"use strict";var ls=Object.defineProperty;var cl=Object.getOwnPropertyDescriptor;var ul=Object.getOwnPropertyNames;var dl=Object.prototype.hasOwnProperty;var pl=(n,t)=>{for(var e in t)ls(n,e,{get:t[e],enumerable:!0})},gl=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ul(t))!dl.call(n,s)&&s!==e&&ls(n,s,{get:()=>t[s],enumerable:!(i=cl(t,s))||i.enumerable});return n};var ml=n=>gl(ls({},"__esModule",{value:!0}),n);var mh={};pl(mh,{highlight_dark:()=>dh,highlight_light:()=>ph,leanVerboseLanguage:()=>fl,verbose:()=>gh});module.exports=ml(mh);var wl=0,Ne=class{constructor(t,e){this.from=t,this.to=e}},D=class{constructor(t={}){this.id=wl++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=t.combine||null}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=J.match(t)),e=>{let i=t(e);return i===void 0?null:[this,i]}}};D.closedBy=new D({deserialize:n=>n.split(" ")});D.openedBy=new D({deserialize:n=>n.split(" ")});D.group=new D({deserialize:n=>n.split(" ")});D.isolate=new D({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});D.contextHash=new D({perNode:!0});D.lookAhead=new D({perNode:!0});D.mounted=new D({perNode:!0});var Ut=class{constructor(t,e,i,s=!1){this.tree=t,this.overlay=e,this.parser=i,this.bracketed=s}static get(t){return t&&t.props&&t.props[D.mounted.id]}},bl=Object.create(null),J=class n{constructor(t,e,i,s=0){this.name=t,this.props=e,this.id=i,this.flags=s}static define(t){let e=t.props&&t.props.length?Object.create(null):bl,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),s=new n(t.name||"",e,t.id,i);if(t.props){for(let r of t.props)if(Array.isArray(r)||(r=r(s)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[r[0].id]=r[1]}}return s}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let e=this.prop(D.group);return e?e.indexOf(t)>-1:!1}return this.id==t}static match(t){let e=Object.create(null);for(let i in t)for(let s of i.split(" "))e[s]=t[i];return i=>{for(let s=i.prop(D.group),r=-1;r<(s?s.length:0);r++){let o=e[r<0?i.name:s[r]];if(o)return o}}}};J.none=new J("",Object.create(null),0,8);var Ie=class n{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let i of this.types){let s=null;for(let r of t){let o=r(i);if(o){s||(s=Object.assign({},i.props));let l=o[1],a=o[0];a.combine&&a.id in s&&(l=a.combine(s[a.id],l)),s[a.id]=l}}e.push(s?new J(i.name,s,i.id,i.flags):i)}return new n(e)}},ui=new WeakMap,tr=new WeakMap,z;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays",n[n.EnterBracketed=16]="EnterBracketed"})(z||(z={}));var X=class n{constructor(t,e,i,s,r){if(this.type=t,this.children=e,this.positions=i,this.length=s,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let t=Ut.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let i of this.children){let s=i.toString();s&&(e&&(e+=","),e+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new We(this.topNode,t)}cursorAt(t,e=0,i=0){let s=ui.get(this)||this.topNode,r=new We(s);return r.moveTo(t,e),ui.set(this,r._tree),r}get topNode(){return new St(this,0,0,null)}resolve(t,e=0){let i=qe(ui.get(this)||this.topNode,t,e,!1);return ui.set(this,i),i}resolveInner(t,e=0){let i=qe(tr.get(this)||this.topNode,t,e,!0);return tr.set(this,i),i}resolveStack(t,e=0){return xl(this,t,e)}iterate(t){let{enter:e,leave:i,from:s=0,to:r=this.length}=t,o=t.mode||0,l=(o&z.IncludeAnonymous)>0;for(let a=this.cursor(o|z.IncludeAnonymous);;){let h=!1;if(a.from<=r&&a.to>=s&&(!l&&a.type.isAnonymous||e(a)!==!1)){if(a.firstChild())continue;h=!0}for(;h&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;h=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:ps(J.none,this.children,this.positions,0,this.children.length,0,this.length,(e,i,s)=>new n(this.type,e,i,s,this.propValues),t.makeTree||((e,i,s)=>new n(J.none,e,i,s)))}static build(t){return yl(t)}};X.empty=new X(J.none,[],[],0);var as=class n{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new n(this.buffer,this.index)}},zt=class n{constructor(t,e,i){this.buffer=t,this.length=e,this.set=i}get type(){return J.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],i=this.buffer[t+3],s=this.set.types[e],r=s.name;if(/\W/.test(r)&&!s.isError&&(r=JSON.stringify(r)),t+=4,i==t)return r;let o=[];for(;t<i;)o.push(this.childString(t)),t=this.buffer[t+3];return r+"("+o.join(",")+")"}findChild(t,e,i,s,r){let{buffer:o}=this,l=-1;for(let a=t;a!=e&&!(sr(r,s,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(t,e,i){let s=this.buffer,r=new Uint16Array(e-t),o=0;for(let l=t,a=0;l<e;){r[a++]=s[l++],r[a++]=s[l++]-i;let h=r[a++]=s[l++]-i;r[a++]=s[l++]-t,o=Math.max(o,h)}return new n(r,o,this.set)}};function sr(n,t,e,i){switch(n){case-2:return e<t;case-1:return i>=t&&e<t;case 0:return e<t&&i>t;case 1:return e<=t&&i>t;case 2:return i>t;case 4:return!0}}function qe(n,t,e,i){for(var s;n.from==n.to||(e<1?n.from>=t:n.from>t)||(e>-1?n.to<=t:n.to<t);){let o=!i&&n instanceof St&&n.index<0?null:n.parent;if(!o)return n;n=o}let r=i?0:z.IgnoreOverlays;if(i)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof St&&o.index<0&&((s=l.enter(t,e,r))===null||s===void 0?void 0:s.from)!=o.from&&(n=l);for(;;){let o=n.enter(t,e,r);if(!o)return n;n=o}}var pi=class{cursor(t=0){return new We(this,t)}getChild(t,e=null,i=null){let s=er(this,t,e,i);return s.length?s[0]:null}getChildren(t,e=null,i=null){return er(this,t,e,i)}resolve(t,e=0){return qe(this,t,e,!1)}resolveInner(t,e=0){return qe(this,t,e,!0)}matchContext(t){return hs(this.parent,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),i=this;for(;e;){let s=e.lastChild;if(!s||s.to!=e.to)break;s.type.isError&&s.from==s.to?(i=e,e=s.prevSibling):e=s}return i}get node(){return this}get next(){return this.parent}},St=class n extends pi{constructor(t,e,i,s){super(),this._tree=t,this.from=e,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,i,s,r=0){var o;for(let l=this;;){for(let{children:a,positions:h}=l._tree,f=e>0?a.length:-1;t!=f;t+=e){let c=a[t],u=h[t]+l.from;if(!(!(r&z.EnterBracketed&&c instanceof X&&((o=Ut.get(c))===null||o===void 0?void 0:o.overlay)===null&&(u>=i||u+c.length<=i))&&!sr(s,i,u,u+c.length))){if(c instanceof zt){if(r&z.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,e,i-u,s);if(d>-1)return new ze(new fs(l,c,t,u),null,d)}else if(r&z.IncludeAnonymous||!c.type.isAnonymous||ds(c)){let d;if(!(r&z.IgnoreMounts)&&(d=Ut.get(c))&&!d.overlay)return new n(d.tree,u,t,l);let p=new n(c,u,t,l);return r&z.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(e<0?c.children.length-1:0,e,i,s,r)}}}if(r&z.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?t=l.index+e:t=e<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}prop(t){return this._tree.prop(t)}enter(t,e,i=0){let s;if(!(i&z.IgnoreOverlays)&&(s=Ut.get(this._tree))&&s.overlay){let r=t-this.from,o=i&z.EnterBracketed&&s.bracketed;for(let{from:l,to:a}of s.overlay)if((e>0||o?l<=r:l<r)&&(e<0||o?a>=r:a>r))return new n(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,i)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function er(n,t,e,i){let s=n.cursor(),r=[];if(!s.firstChild())return r;if(e!=null){for(let o=!1;!o;)if(o=s.type.is(e),!s.nextSibling())return r}for(;;){if(i!=null&&s.type.is(i))return r;if(s.type.is(t)&&r.push(s.node),!s.nextSibling())return i==null?r:[]}}function hs(n,t,e=t.length-1){for(let i=n;e>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[e]&&t[e]!=i.name)return!1;e--}}return!0}var fs=class{constructor(t,e,i,s){this.parent=t,this.buffer=e,this.index=i,this.start=s}},ze=class n extends pi{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,i){super(),this.context=t,this._parent=e,this.index=i,this.type=t.buffer.set.types[t.buffer.buffer[i]]}child(t,e,i){let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],t,e-this.context.start,i);return r<0?null:new n(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}prop(t){return this.type.prop(t)}enter(t,e,i=0){if(i&z.ExcludeBuffers)return null;let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return r<0?null:new n(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new n(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new n(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:i}=this.context,s=this.index+4,r=i.buffer[this.index+3];if(r>s){let o=i.buffer[this.index+1];t.push(i.slice(s,r,o)),e.push(0)}return new X(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function nr(n){if(!n.length)return null;let t=0,e=n[0];for(let r=1;r<n.length;r++){let o=n[r];(o.from>e.from||o.to<e.to)&&(e=o,t=r)}let i=e instanceof St&&e.index<0?null:e.parent,s=n.slice();return i?s[t]=i:s.splice(t,1),new cs(s,e)}var cs=class{constructor(t,e){this.heads=t,this.node=e}get next(){return nr(this.heads)}};function xl(n,t,e){let i=n.resolveInner(t,e),s=null;for(let r=i instanceof St?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(s||(s=[i])).push(o.resolve(t,e)),r=o}else{let o=Ut.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=t&&o.overlay[o.overlay.length-1].to>=t){let l=new St(o.tree,o.overlay[0].from+r.from,-1,r);(s||(s=[i])).push(qe(l,t,e,!1))}}return s?nr(s):i}var We=class{get name(){return this.type.name}constructor(t,e=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=e&~z.EnterBracketed,t instanceof St)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let i=t._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,e){this.index=t;let{start:i,buffer:s}=this.buffer;return this.type=e||s.set.types[s.buffer[t]],this.from=i+s.buffer[t+1],this.to=i+s.buffer[t+2],!0}yield(t){return t?t instanceof St?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,i){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,i,this.mode));let{buffer:s}=this.buffer,r=s.findChild(this.index+4,s.buffer[this.index+3],t,e-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,i=this.mode){return this.buffer?i&z.ExcludeBuffers?!1:this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&z.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&z.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:e}=this.buffer,i=this.stack.length-1;if(t<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(e.findChild(s,this.index,-1,0,4))}else{let s=e.buffer[this.index+3];if(s<(i<0?e.buffer.length:e.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,i,{buffer:s}=this;if(s){if(t>0){if(this.index<s.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(s.buffer.buffer[r+3]<this.index)return!1;({index:e,parent:i}=s)}else({index:e,_parent:i}=this._tree);for(;i;{index:e,_parent:i}=i)if(e>-1)for(let r=e+t,o=t<0?-1:i._tree.children.length;r!=o;r+=t){let l=i._tree.children[r];if(this.mode&z.IncludeAnonymous||l instanceof zt||!l.type.isAnonymous||ds(l))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,i=0;if(t&&t.context==this.buffer)t:for(let s=this.index,r=this.stack.length;r>=0;){for(let o=t;o;o=o._parent)if(o.index==s){if(s==this.index)return o;e=o,i=r+1;break t}s=this.stack[--r]}for(let s=i;s<this.stack.length;s++)e=new ze(this.buffer,e,this.stack[s]);return this.bufferNode=new ze(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let i=0;;){let s=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&e&&e(this),s=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,s=!0}}}matchContext(t){if(!this.buffer)return hs(this.node.parent,t);let{buffer:e}=this.buffer,{types:i}=e.set;for(let s=t.length-1,r=this.stack.length-1;s>=0;r--){if(r<0)return hs(this._tree,t,s);let o=i[e.buffer[this.stack[r]]];if(!o.isAnonymous){if(t[s]&&t[s]!=o.name)return!1;s--}}return!0}};function ds(n){return n.children.some(t=>t instanceof zt||!t.type.isAnonymous||ds(t))}function yl(n){var t;let{buffer:e,nodeSet:i,maxBufferLength:s=1024,reused:r=[],minRepeatType:o=i.types.length}=n,l=Array.isArray(e)?new as(e,e.length):e,a=i.types,h=0,f=0;function c(A,M,$,H,N,V){let{id:T,start:O,end:q,size:F}=l,G=f,qt=h;if(F<0)if(l.next(),F==-1){let Dt=r[T];$.push(Dt),H.push(O-A);return}else if(F==-3){h=T;return}else if(F==-4){f=T;return}else throw new RangeError(`Unrecognized record size: ${F}`);let Le=a[T],fi,Kt,Gn=O-A;if(q-O<=s&&(Kt=m(l.pos-M,N))){let Dt=new Uint16Array(Kt.size-Kt.skip),ft=l.pos-Kt.size,kt=Dt.length;for(;l.pos>ft;)kt=w(Kt.start,Dt,kt);fi=new zt(Dt,q-Kt.start,i),Gn=Kt.start-A}else{let Dt=l.pos-F;l.next();let ft=[],kt=[],Yt=T>=o?T:-1,ce=0,ci=q;for(;l.pos>Dt;)Yt>=0&&l.id==Yt&&l.size>=0?(l.end<=ci-s&&(p(ft,kt,O,ce,l.end,ci,Yt,G,qt),ce=ft.length,ci=l.end),l.next()):V>2500?u(O,Dt,ft,kt):c(O,Dt,ft,kt,Yt,V+1);if(Yt>=0&&ce>0&&ce<ft.length&&p(ft,kt,O,ce,O,ci,Yt,G,qt),ft.reverse(),kt.reverse(),Yt>-1&&ce>0){let Jn=d(Le,qt);fi=ps(Le,ft,kt,0,ft.length,0,q-O,Jn,Jn)}else fi=g(Le,ft,kt,q-O,G-q,qt)}$.push(fi),H.push(Gn)}function u(A,M,$,H){let N=[],V=0,T=-1;for(;l.pos>M;){let{id:O,start:q,end:F,size:G}=l;if(G>4)l.next();else{if(T>-1&&q<T)break;T<0&&(T=F-s),N.push(O,q,F),V++,l.next()}}if(V){let O=new Uint16Array(V*4),q=N[N.length-2];for(let F=N.length-3,G=0;F>=0;F-=3)O[G++]=N[F],O[G++]=N[F+1]-q,O[G++]=N[F+2]-q,O[G++]=G;$.push(new zt(O,N[2]-q,i)),H.push(q-A)}}function d(A,M){return($,H,N)=>{let V=0,T=$.length-1,O,q;if(T>=0&&(O=$[T])instanceof X){if(!T&&O.type==A&&O.length==N)return O;(q=O.prop(D.lookAhead))&&(V=H[T]+O.length+q)}return g(A,$,H,N,V,M)}}function p(A,M,$,H,N,V,T,O,q){let F=[],G=[];for(;A.length>H;)F.push(A.pop()),G.push(M.pop()+$-N);A.push(g(i.types[T],F,G,V-N,O-V,q)),M.push(N-$)}function g(A,M,$,H,N,V,T){if(V){let O=[D.contextHash,V];T=T?[O].concat(T):[O]}if(N>25){let O=[D.lookAhead,N];T=T?[O].concat(T):[O]}return new X(A,M,$,H,T)}function m(A,M){let $=l.fork(),H=0,N=0,V=0,T=$.end-s,O={size:0,start:0,skip:0};t:for(let q=$.pos-A;$.pos>q;){let F=$.size;if($.id==M&&F>=0){O.size=H,O.start=N,O.skip=V,V+=4,H+=4,$.next();continue}let G=$.pos-F;if(F<0||G<q||$.start<T)break;let qt=$.id>=o?4:0,Le=$.start;for($.next();$.pos>G;){if($.size<0)if($.size==-3||$.size==-4)qt+=4;else break t;else $.id>=o&&(qt+=4);$.next()}N=Le,H+=F,V+=qt}return(M<0||H==A)&&(O.size=H,O.start=N,O.skip=V),O.size>4?O:void 0}function w(A,M,$){let{id:H,start:N,end:V,size:T}=l;if(l.next(),T>=0&&H<o){let O=$;if(T>4){let q=l.pos-(T-4);for(;l.pos>q;)$=w(A,M,$)}M[--$]=O,M[--$]=V-A,M[--$]=N-A,M[--$]=H}else T==-3?h=H:T==-4&&(f=H);return $}let C=[],v=[];for(;l.pos>0;)c(n.start||0,n.bufferStart||0,C,v,-1,0);let E=(t=n.length)!==null&&t!==void 0?t:C.length?v[0]+C[0].length:0;return new X(a[n.topID],C.reverse(),v.reverse(),E)}var ir=new WeakMap;function di(n,t){if(!n.isAnonymous||t instanceof zt||t.type!=n)return 1;let e=ir.get(t);if(e==null){e=1;for(let i of t.children){if(i.type!=n||!(i instanceof X)){e=1;break}e+=di(n,i)}ir.set(t,e)}return e}function ps(n,t,e,i,s,r,o,l,a){let h=0;for(let p=i;p<s;p++)h+=di(n,t[p]);let f=Math.ceil(h*1.5/8),c=[],u=[];function d(p,g,m,w,C){for(let v=m;v<w;){let E=v,A=g[v],M=di(n,p[v]);for(v++;v<w;v++){let $=di(n,p[v]);if(M+$>=f)break;M+=$}if(v==E+1){if(M>f){let $=p[E];d($.children,$.positions,0,$.children.length,g[E]+C);continue}c.push(p[E])}else{let $=g[v-1]+p[v-1].length-A;c.push(ps(n,p,g,E,v,A,$,null,a))}u.push(A+C-r)}}return d(t,e,i,s,0),(l||a)(c,u,o)}var _t=class n{constructor(t,e,i,s,r=!1,o=!1){this.from=t,this.to=e,this.tree=i,this.offset=s,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,e=[],i=!1){let s=[new n(0,t.length,t,0,!1,i)];for(let r of e)r.to>t.length&&s.push(r);return s}static applyChanges(t,e,i=128){if(!e.length)return t;let s=[],r=1,o=t.length?t[0]:null;for(let l=0,a=0,h=0;;l++){let f=l<e.length?e[l]:null,c=f?f.fromA:1e9;if(c-a>=i)for(;o&&o.from<c;){let u=o;if(a>=u.from||c<=u.to||h){let d=Math.max(u.from,a)-h,p=Math.min(u.to,c)-h;u=d>=p?null:new n(d,p,u.tree,u.offset+h,l>0,!!f)}if(u&&s.push(u),o.to>c)break;o=r<t.length?t[r++]:null}if(!f)break;a=f.toA,h=f.toA-f.toB}return s}},ue=class{startParse(t,e,i){return typeof t=="string"&&(t=new us(t)),i=i?i.length?i.map(s=>new Ne(s.from,s.to)):[new Ne(0,0)]:[new Ne(0,t.length)],this.createParse(t,e||[],i)}parse(t,e,i){let s=this.startParse(t,e,i);for(;;){let r=s.advance();if(r)return r}}},us=class{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}};var bh=new D({perNode:!0});var ms=[],ar=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=0,e=0;t<n.length;t++)(t%2?ar:ms).push(e=e+n[t])})();function $l(n){if(n<768)return!1;for(let t=0,e=ms.length;;){let i=t+e>>1;if(n<ms[i])e=i;else if(n>=ar[i])t=i+1;else return!0;if(t==e)return!1}}function rr(n){return n>=127462&&n<=127487}var or=8205;function hr(n,t,e=!0,i=!0){return(e?fr:kl)(n,t,i)}function fr(n,t,e){if(t==n.length)return t;t&&cr(n.charCodeAt(t))&&ur(n.charCodeAt(t-1))&&t--;let i=gs(n,t);for(t+=lr(i);t<n.length;){let s=gs(n,t);if(i==or||s==or||e&&$l(s))t+=lr(s),i=s;else if(rr(s)){let r=0,o=t-2;for(;o>=0&&rr(gs(n,o));)r++,o-=2;if(r%2==0)break;t+=2}else break}return t}function kl(n,t,e){for(;t>0;){let i=fr(n,t-2,e);if(i<t)return i;t--}return 0}function gs(n,t){let e=n.charCodeAt(t);if(!ur(e)||t+1==n.length)return e;let i=n.charCodeAt(t+1);return cr(i)?(e-55296<<10)+(i-56320)+65536:e}function cr(n){return n>=56320&&n<57344}function ur(n){return n>=55296&&n<56320}function lr(n){return n<65536?1:2}var R=class n{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,i){[t,e]=we(this,t,e);let s=[];return this.decompose(0,t,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(e,this.length,s,1),pe.from(s,this.length-(e-t)+i.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=we(this,t,e);let i=[];return this.decompose(t,e,i,0),pe.from(i,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),i=this.length-this.scanIdentical(t,-1),s=new te(this),r=new te(t);for(let o=e,l=e;;){if(s.next(o),r.next(o),o=0,s.lineBreak!=r.lineBreak||s.done!=r.done||s.value!=r.value)return!1;if(l+=s.value.length,s.done||l>=i)return!0}}iter(t=1){return new te(this,t)}iterRange(t,e=this.length){return new xi(this,t,e)}iterLines(t,e){let i;if(t==null)i=this.iter();else{e==null&&(e=this.lines+1);let s=this.line(t).from;i=this.iterRange(s,Math.max(s,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new yi(i)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?n.empty:t.length<=32?new rt(t):pe.from(rt.split(t,[]))}},rt=class n extends R{constructor(t,e=Sl(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,i,s){for(let r=0;;r++){let o=this.text[r],l=s+o.length;if((e?i:l)>=t)return new bs(s,l,i,o);s=l+1,i++}}decompose(t,e,i,s){let r=t<=0&&e>=this.length?this:new n(dr(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(s&1){let o=i.pop(),l=bi(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new n(l,o.length+r.length));else{let a=l.length>>1;i.push(new n(l.slice(0,a)),new n(l.slice(a)))}}else i.push(r)}replace(t,e,i){if(!(i instanceof n))return super.replace(t,e,i);[t,e]=we(this,t,e);let s=bi(this.text,bi(i.text,dr(this.text,0,t)),e),r=this.length+i.length-(e-t);return s.length<=32?new n(s,r):pe.from(n.split(s,[]),r)}sliceString(t,e=this.length,i=`
`){[t,e]=we(this,t,e);let s="";for(let r=0,o=0;r<=e&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>t&&o&&(s+=i),t<a&&e>r&&(s+=l.slice(Math.max(0,t-r),e-r)),r=a+1}return s}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let i=[],s=-1;for(let r of t)i.push(r),s+=r.length+1,i.length==32&&(e.push(new n(i,s)),i=[],s=-1);return s>-1&&e.push(new n(i,s)),e}},pe=class n extends R{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let i of t)this.lines+=i.lines}lineInner(t,e,i,s){for(let r=0;;r++){let o=this.children[r],l=s+o.length,a=i+o.lines-1;if((e?a:l)>=t)return o.lineInner(t,e,i,s);s=l+1,i=a+1}}decompose(t,e,i,s){for(let r=0,o=0;o<=e&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(t<=a&&e>=o){let h=s&((o<=t?1:0)|(a>=e?2:0));o>=t&&a<=e&&!h?i.push(l):l.decompose(t-o,e-o,i,h)}o=a+1}}replace(t,e,i){if([t,e]=we(this,t,e),i.lines<this.lines)for(let s=0,r=0;s<this.children.length;s++){let o=this.children[s],l=r+o.length;if(t>=r&&e<=l){let a=o.replace(t-r,e-r,i),h=this.lines-o.lines+a.lines;if(a.lines<h>>4&&a.lines>h>>6){let f=this.children.slice();return f[s]=a,new n(f,this.length-(e-t)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(t,e,i)}sliceString(t,e=this.length,i=`
`){[t,e]=we(this,t,e);let s="";for(let r=0,o=0;r<this.children.length&&o<=e;r++){let l=this.children[r],a=o+l.length;o>t&&r&&(s+=i),t<a&&e>o&&(s+=l.sliceString(t-o,e-o,i)),o=a+1}return s}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof n))return 0;let i=0,[s,r,o,l]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;s+=e,r+=e){if(s==o||r==l)return i;let a=this.children[s],h=t.children[r];if(a!=h)return i+a.scanIdentical(h,e);i+=a.length+1}}static from(t,e=t.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let d of t)i+=d.lines;if(i<32){let d=[];for(let p of t)p.flatten(d);return new rt(d,e)}let s=Math.max(32,i>>5),r=s<<1,o=s>>1,l=[],a=0,h=-1,f=[];function c(d){let p;if(d.lines>r&&d instanceof n)for(let g of d.children)c(g);else d.lines>o&&(a>o||!a)?(u(),l.push(d)):d instanceof rt&&a&&(p=f[f.length-1])instanceof rt&&d.lines+p.lines<=32?(a+=d.lines,h+=d.length+1,f[f.length-1]=new rt(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>s&&u(),a+=d.lines,h+=d.length+1,f.push(d))}function u(){a!=0&&(l.push(f.length==1?f[0]:n.from(f,h)),h=-1,a=f.length=0)}for(let d of t)c(d);return u(),l.length==1?l[0]:new n(l,e)}};R.empty=new rt([""],0);function Sl(n){let t=-1;for(let e of n)t+=e.length+1;return t}function bi(n,t,e=0,i=1e9){for(let s=0,r=0,o=!0;r<n.length&&s<=i;r++){let l=n[r],a=s+l.length;a>=e&&(a>i&&(l=l.slice(0,i-s)),s<e&&(l=l.slice(e-s)),o?(t[t.length-1]+=l,o=!1):t.push(l)),s=a+1}return t}function dr(n,t,e){return bi(n,[""],t,e)}var te=class{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof rt?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],r=this.offsets[i],o=r>>1,l=s instanceof rt?s.text.length:s.children.length;if(o==(e>0?l:0)){if(i==0)return this.done=!0,this.value="",this;e>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(e>0?0:1)){if(this.offsets[i]+=e,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(s instanceof rt){let a=s.text[o+(e<0?-1:0)];if(this.offsets[i]+=e,a.length>Math.max(0,t))return this.value=t==0?a:e>0?a.slice(t):a.slice(0,a.length-t),this;t-=a.length}else{let a=s.children[o+(e<0?-1:0)];t>a.length?(t-=a.length,this.offsets[i]+=e):(e<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(e>0?1:(a instanceof rt?a.text.length:a.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}},xi=class{constructor(t,e,i){this.value="",this.done=!1,this.cursor=new te(t,e>i?-1:1),this.pos=e>i?t.length:0,this.from=Math.min(e,i),this.to=Math.max(e,i)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let i=e<0?this.pos-this.from:this.to-this.pos;t>i&&(t=i),i-=t;let{value:s}=this.cursor.next(t);return this.pos+=(s.length+t)*e,this.value=s.length<=i?s:e<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},yi=class{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:i,value:s}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(R.prototype[Symbol.iterator]=function(){return this.iter()},te.prototype[Symbol.iterator]=xi.prototype[Symbol.iterator]=yi.prototype[Symbol.iterator]=function(){return this});var bs=class{constructor(t,e,i,s){this.from=t,this.to=e,this.number=i,this.text=s}get length(){return this.to-this.from}};function we(n,t,e){return t=Math.max(0,Math.min(n.length,t)),[t,Math.max(t,Math.min(n.length,e))]}function ct(n,t,e=!0,i=!0){return hr(n,t,e,i)}var xs=/\r\n?|\n/,it=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(it||(it={})),ee=class n{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e+1];t+=i<0?this.sections[e]:i}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let e=0,i=0,s=0;e<this.sections.length;){let r=this.sections[e++],o=this.sections[e++];o<0?(t(i,s,r),s+=r):s+=o,i+=r}}iterChangedRanges(t,e=!1){ys(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let i=this.sections[e++],s=this.sections[e++];s<0?t.push(i,s):t.push(s,i)}return new n(t)}composeDesc(t){return this.empty?t:t.empty?this:br(this,t)}mapDesc(t,e=!1){return t.empty?this:$s(this,t,e)}mapPos(t,e=-1,i=it.Simple){let s=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=s+l;if(a<0){if(h>t)return r+(t-s);r+=l}else{if(i!=it.Simple&&h>=t&&(i==it.TrackDel&&s<t&&h>t||i==it.TrackBefore&&s<t||i==it.TrackAfter&&h>t))return null;if(h>t||h==t&&e<0&&!l)return t==s||e<0?r:r+a;r+=a}s=h}if(t>s)throw new RangeError(`Position ${t} is out of range for changeset of length ${s}`);return r}touchesRange(t,e=t){for(let i=0,s=0;i<this.sections.length&&s<=e;){let r=this.sections[i++],o=this.sections[i++],l=s+r;if(o>=0&&s<=e&&l>=t)return s<t&&l>e?"cover":!0;s=l}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let i=this.sections[e++],s=this.sections[e++];t+=(t?" ":"")+i+(s>=0?":"+s:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(e=>typeof e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new n(t)}static create(t){return new n(t)}},ot=class n extends ee{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return ys(this,(e,i,s,r,o)=>t=t.replace(s,s+(i-e),o),!1),t}mapDesc(t,e=!1){return $s(this,t,e,!0)}invert(t){let e=this.sections.slice(),i=[];for(let s=0,r=0;s<e.length;s+=2){let o=e[s],l=e[s+1];if(l>=0){e[s]=l,e[s+1]=o;let a=s>>1;for(;i.length<a;)i.push(R.empty);i.push(o?t.slice(r,r+o):R.empty)}r+=o}return new n(e,i)}compose(t){return this.empty?t:t.empty?this:br(this,t,!0)}map(t,e=!1){return t.empty?this:$s(this,t,e,!0)}iterChanges(t,e=!1){ys(this,t,e)}get desc(){return ee.create(this.sections)}filter(t){let e=[],i=[],s=[],r=new ie(this);t:for(let o=0,l=0;;){let a=o==t.length?1e9:t[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break t;let f=Math.min(r.len,a-l);tt(s,f,-1);let c=r.ins==-1?-1:r.off==0?r.ins:0;tt(e,f,c),c>0&&Wt(i,e,r.text),r.forward(f),l+=f}let h=t[o++];for(;l<h;){if(r.done)break t;let f=Math.min(r.len,h-l);tt(e,f,-1),tt(s,f,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(f),l+=f}}return{changes:new n(e,i),filtered:ee.create(s)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e],s=this.sections[e+1];s<0?t.push(i):s==0?t.push([i]):t.push([i].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,i){let s=[],r=[],o=0,l=null;function a(f=!1){if(!f&&!s.length)return;o<e&&tt(s,e-o,-1);let c=new n(s,r);l=l?l.compose(c.map(l)):c,s=[],r=[],o=0}function h(f){if(Array.isArray(f))for(let c of f)h(c);else if(f instanceof n){if(f.length!=e)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${e})`);a(),l=l?l.compose(f.map(l)):f}else{let{from:c,to:u=c,insert:d}=f;if(c>u||c<0||u>e)throw new RangeError(`Invalid change range ${c} to ${u} (in doc of length ${e})`);let p=d?typeof d=="string"?R.of(d.split(i||xs)):d:R.empty,g=p.length;if(c==u&&g==0)return;c<o&&a(),c>o&&tt(s,c-o,-1),tt(s,u-c,g),Wt(r,s,p),o=u}}return h(t),a(!l),l}static empty(t){return new n(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],i=[];for(let s=0;s<t.length;s++){let r=t[s];if(typeof r=="number")e.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)e.push(r[0],0);else{for(;i.length<s;)i.push(R.empty);i[s]=R.of(r.slice(1)),e.push(r[0],i[s].length)}}}return new n(e,i)}static createSet(t,e){return new n(t,e)}};function tt(n,t,e,i=!1){if(t==0&&e<=0)return;let s=n.length-2;s>=0&&e<=0&&e==n[s+1]?n[s]+=t:s>=0&&t==0&&n[s]==0?n[s+1]+=e:i?(n[s]+=t,n[s+1]+=e):n.push(t,e)}function Wt(n,t,e){if(e.length==0)return;let i=t.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(e);else{for(;n.length<i;)n.push(R.empty);n.push(e)}}function ys(n,t,e){let i=n.inserted;for(let s=0,r=0,o=0;o<n.sections.length;){let l=n.sections[o++],a=n.sections[o++];if(a<0)s+=l,r+=l;else{let h=s,f=r,c=R.empty;for(;h+=l,f+=a,a&&i&&(c=c.append(i[o-2>>1])),!(e||o==n.sections.length||n.sections[o+1]<0);)l=n.sections[o++],a=n.sections[o++];t(s,h,r,f,c),s=h,r=f}}}function $s(n,t,e,i=!1){let s=[],r=i?[]:null,o=new ie(n),l=new ie(t);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let h=Math.min(o.len,l.len);tt(s,h,-1),o.forward(h),l.forward(h)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!e))){let h=l.len;for(tt(s,l.ins,-1);h;){let f=Math.min(o.len,h);o.ins>=0&&a<o.i&&o.len<=f&&(tt(s,0,o.ins),r&&Wt(r,s,o.text),a=o.i),o.forward(f),h-=f}l.next()}else if(o.ins>=0){let h=0,f=o.len;for(;f;)if(l.ins==-1){let c=Math.min(f,l.len);h+=c,f-=c,l.forward(c)}else if(l.ins==0&&l.len<f)f-=l.len,l.next();else break;tt(s,h,a<o.i?o.ins:0),r&&a<o.i&&Wt(r,s,o.text),a=o.i,o.forward(o.len-f)}else{if(o.done&&l.done)return r?ot.createSet(s,r):ee.create(s);throw new Error("Mismatched change set lengths")}}}function br(n,t,e=!1){let i=[],s=e?[]:null,r=new ie(n),o=new ie(t);for(let l=!1;;){if(r.done&&o.done)return s?ot.createSet(i,s):ee.create(i);if(r.ins==0)tt(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)tt(i,0,o.ins,l),s&&Wt(s,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),h=i.length;if(r.ins==-1){let f=o.ins==-1?-1:o.off?0:o.ins;tt(i,a,f,l),s&&f&&Wt(s,i,o.text)}else o.ins==-1?(tt(i,r.off?0:r.len,a,l),s&&Wt(s,i,r.textBit(a))):(tt(i,r.off?0:r.len,o.off?0:o.ins,l),s&&!o.off&&Wt(s,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>h),r.forward2(a),o.forward(a)}}}}var ie=class{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?R.empty:t[e]}textBit(t){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length&&!t?R.empty:e[i].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}},de=class n{constructor(t,e,i){this.from=t,this.to=e,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,e=-1){let i,s;return this.empty?i=s=t.mapPos(this.from,e):(i=t.mapPos(this.from,1),s=t.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new n(i,s,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return k.range(t,e);let i=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return k.range(this.anchor,i)}eq(t,e=!1){return this.anchor==t.anchor&&this.head==t.head&&this.goalColumn==t.goalColumn&&(!e||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return k.range(t.anchor,t.head)}static create(t,e,i){return new n(t,e,i)}},k=class n{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:n.create(this.ranges.map(i=>i.map(t,e)),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(t.ranges[i],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new n([this.main],0)}addRange(t,e=!0){return n.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let i=this.ranges.slice();return i[e]=t,n.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new n(t.ranges.map(e=>de.fromJSON(e)),t.main)}static single(t,e=t){return new n([n.range(t,e)],0)}static create(t,e=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<t.length;s++){let r=t[s];if(r.empty?r.from<=i:r.from<i)return n.normalized(t.slice(),e);i=r.to}return new n(t,e)}static cursor(t,e=0,i,s){return de.create(t,t,(e==0?0:e<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(t,e,i,s){let r=(i??16777215)<<6|(s==null?7:Math.min(6,s));return e<t?de.create(e,t,48|r):de.create(t,e,(e>t?8:0)|r)}static normalized(t,e=0){let i=t[e];t.sort((s,r)=>s.from-r.from),e=t.indexOf(i);for(let s=1;s<t.length;s++){let r=t[s],o=t[s-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);s<=e&&e--,t.splice(--s,2,r.anchor>r.head?n.range(a,l):n.range(l,a))}}return new n(t,e)}};function xr(n,t){for(let e of n.ranges)if(e.to>t)throw new RangeError("Selection points outside of document")}var Ds=0,P=class n{constructor(t,e,i,s,r){this.combine=t,this.compareInput=e,this.compare=i,this.isStatic=s,this.id=Ds++,this.default=t([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(t={}){return new n(t.combine||(e=>e),t.compareInput||((e,i)=>e===i),t.compare||(t.combine?(e,i)=>e===i:Rs),!!t.static,t.enables)}of(t){return new ge([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new ge(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new ge(t,this,2,e)}from(t,e){return e||(e=i=>i),this.compute([t],i=>e(i.field(t)))}};function Rs(n,t){return n==t||n.length==t.length&&n.every((e,i)=>e===t[i])}var ge=class{constructor(t,e,i,s){this.dependencies=t,this.facet=e,this.type=i,this.value=s,this.id=Ds++}dynamicSlot(t){var e;let i=this.value,s=this.facet.compareInput,r=this.id,o=t[r]>>1,l=this.type==2,a=!1,h=!1,f=[];for(let c of this.dependencies)c=="doc"?a=!0:c=="selection"?h=!0:(((e=t[c.id])!==null&&e!==void 0?e:1)&1)==0&&f.push(t[c.id]);return{create(c){return c.values[o]=i(c),1},update(c,u){if(a&&u.docChanged||h&&(u.docChanged||u.selection)||ks(c,f)){let d=i(c);if(l?!pr(d,c.values[o],s):!s(d,c.values[o]))return c.values[o]=d,1}return 0},reconfigure:(c,u)=>{let d,p=u.config.address[r];if(p!=null){let g=vi(u,p);if(this.dependencies.every(m=>m instanceof P?u.facet(m)===c.facet(m):m instanceof Rt?u.field(m,!1)==c.field(m,!1):!0)||(l?pr(d=i(c),g,s):s(d=i(c),g)))return c.values[o]=g,0}else d=i(c);return c.values[o]=d,1}}}};function pr(n,t,e){if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(!e(n[i],t[i]))return!1;return!0}function ks(n,t){let e=!1;for(let i of t)He(n,i)&1&&(e=!0);return e}function vl(n,t,e){let i=e.map(a=>n[a.id]),s=e.map(a=>a.type),r=i.filter(a=>!(a&1)),o=n[t.id]>>1;function l(a){let h=[];for(let f=0;f<i.length;f++){let c=vi(a,i[f]);if(s[f]==2)for(let u of c)h.push(u);else h.push(c)}return t.combine(h)}return{create(a){for(let h of i)He(a,h);return a.values[o]=l(a),1},update(a,h){if(!ks(a,r))return 0;let f=l(a);return t.compare(f,a.values[o])?0:(a.values[o]=f,1)},reconfigure(a,h){let f=ks(a,i),c=h.config.facets[t.id],u=h.facet(t);if(c&&!f&&Rs(e,c))return a.values[o]=u,0;let d=l(a);return t.compare(d,u)?(a.values[o]=u,0):(a.values[o]=d,1)}}}var gi=P.define({static:!0}),Rt=class n{constructor(t,e,i,s,r){this.id=t,this.createF=e,this.updateF=i,this.compareF=s,this.spec=r,this.provides=void 0}static define(t){let e=new n(Ds++,t.create,t.update,t.compare||((i,s)=>i===s),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(gi).find(i=>i.field==this);return(e?.create||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:i=>(i.values[e]=this.create(i),1),update:(i,s)=>{let r=i.values[e],o=this.updateF(r,s);return this.compareF(r,o)?0:(i.values[e]=o,1)},reconfigure:(i,s)=>{let r=i.facet(gi),o=s.facet(gi),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[e]=l.create(i),1):s.config.address[this.id]!=null?(i.values[e]=s.field(this),0):(i.values[e]=this.create(i),1)}}}init(t){return[this,gi.of({field:this,create:t})]}get extension(){return this}},Gt={lowest:4,low:3,default:2,high:1,highest:0};function Fe(n){return t=>new $i(t,n)}var Bs={highest:Fe(Gt.highest),high:Fe(Gt.high),default:Fe(Gt.default),low:Fe(Gt.low),lowest:Fe(Gt.lowest)},$i=class{constructor(t,e){this.inner=t,this.prec=e}},ki=class n{of(t){return new Ve(this,t)}reconfigure(t){return n.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}},Ve=class{constructor(t,e){this.compartment=t,this.inner=e}},Si=class n{constructor(t,e,i,s,r,o){for(this.base=t,this.compartments=e,this.dynamicSlots=i,this.address=s,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]}static resolve(t,e,i){let s=[],r=Object.create(null),o=new Map;for(let u of Ol(t,e,o))u instanceof Rt?s.push(u):(r[u.facet.id]||(r[u.facet.id]=[])).push(u);let l=Object.create(null),a=[],h=[];for(let u of s)l[u.id]=h.length<<1,h.push(d=>u.slot(d));let f=i?.config.facets;for(let u in r){let d=r[u],p=d[0].facet,g=f&&f[u]||[];if(d.every(m=>m.type==0))if(l[p.id]=a.length<<1|1,Rs(g,d))a.push(i.facet(p));else{let m=p.combine(d.map(w=>w.value));a.push(i&&p.compare(m,i.facet(p))?i.facet(p):m)}else{for(let m of d)m.type==0?(l[m.id]=a.length<<1|1,a.push(m.value)):(l[m.id]=h.length<<1,h.push(w=>m.dynamicSlot(w)));l[p.id]=h.length<<1,h.push(m=>vl(m,p,d))}}let c=h.map(u=>u(l));return new n(t,o,c,l,a,r)}};function Ol(n,t,e){let i=[[],[],[],[],[]],s=new Map;function r(o,l){let a=s.get(o);if(a!=null){if(a<=l)return;let h=i[a].indexOf(o);h>-1&&i[a].splice(h,1),o instanceof Ve&&e.delete(o.compartment)}if(s.set(o,l),Array.isArray(o))for(let h of o)r(h,l);else if(o instanceof Ve){if(e.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=t.get(o.compartment)||o.inner;e.set(o.compartment,h),r(h,l)}else if(o instanceof $i)r(o.inner,o.prec);else if(o instanceof Rt)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof ge)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,Gt.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(h,l)}}return r(n,Gt.default),i.reduce((o,l)=>o.concat(l))}function He(n,t){if(t&1)return 2;let e=t>>1,i=n.status[e];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[e]=4;let s=n.computeSlot(n,n.config.dynamicSlots[e]);return n.status[e]=2|s}function vi(n,t){return t&1?n.config.staticValues[t>>1]:n.values[t>>1]}var yr=P.define(),Ss=P.define({combine:n=>n.some(t=>t),static:!0}),$r=P.define({combine:n=>n.length?n[0]:void 0,static:!0}),kr=P.define(),Sr=P.define(),vr=P.define(),Or=P.define({combine:n=>n.length?n[0]:!1}),Bt=class{constructor(t,e){this.type=t,this.value=e}static define(){return new vs}},vs=class{of(t){return new Bt(this,t)}},Os=class{constructor(t){this.map=t}of(t){return new Z(this,t)}},Z=class n{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return e===void 0?void 0:e==this.value?this:new n(this.type,e)}is(t){return this.type==t}static define(t={}){return new Os(t.map||(e=>e))}static mapEffects(t,e){if(!t.length)return t;let i=[];for(let s of t){let r=s.map(e);r&&i.push(r)}return i}};Z.reconfigure=Z.define();Z.appendConfig=Z.define();var st=class n{constructor(t,e,i,s,r,o){this.startState=t,this.changes=e,this.selection=i,this.effects=s,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&xr(i,e.newLength),r.some(l=>l.type==n.time)||(this.annotations=r.concat(n.time.of(Date.now())))}static create(t,e,i,s,r,o){return new n(t,e,i,s,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(n.userEvent);return!!(e&&(e==t||e.length>t.length&&e.slice(0,t.length)==t&&e[t.length]=="."))}};st.time=Bt.define();st.userEvent=Bt.define();st.addToHistory=Bt.define();st.remote=Bt.define();function Cl(n,t){let e=[];for(let i=0,s=0;;){let r,o;if(i<n.length&&(s==t.length||t[s]>=n[i]))r=n[i++],o=n[i++];else if(s<t.length)r=t[s++],o=t[s++];else return e;!e.length||e[e.length-1]<r?e.push(r,o):e[e.length-1]<o&&(e[e.length-1]=o)}}function Cr(n,t,e){var i;let s,r,o;return e?(s=t.changes,r=ot.empty(t.changes.length),o=n.changes.compose(t.changes)):(s=t.changes.map(n.changes),r=n.changes.mapDesc(t.changes,!0),o=n.changes.compose(s)),{changes:o,selection:t.selection?t.selection.map(r):(i=n.selection)===null||i===void 0?void 0:i.map(s),effects:Z.mapEffects(n.effects,s).concat(Z.mapEffects(t.effects,r)),annotations:n.annotations.length?n.annotations.concat(t.annotations):t.annotations,scrollIntoView:n.scrollIntoView||t.scrollIntoView}}function Cs(n,t,e){let i=t.selection,s=me(t.annotations);return t.userEvent&&(s=s.concat(st.userEvent.of(t.userEvent))),{changes:t.changes instanceof ot?t.changes:ot.of(t.changes||[],e,n.facet($r)),selection:i&&(i instanceof k?i:k.single(i.anchor,i.head)),effects:me(t.effects),annotations:s,scrollIntoView:!!t.scrollIntoView}}function Ar(n,t,e){let i=Cs(n,t.length?t[0]:{},n.doc.length);t.length&&t[0].filter===!1&&(e=!1);for(let r=1;r<t.length;r++){t[r].filter===!1&&(e=!1);let o=!!t[r].sequential;i=Cr(i,Cs(n,t[r],o?i.changes.newLength:n.doc.length),o)}let s=st.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Pl(e?Al(s):s)}function Al(n){let t=n.startState,e=!0;for(let s of t.facet(kr)){let r=s(n);if(r===!1){e=!1;break}Array.isArray(r)&&(e=e===!0?r:Cl(e,r))}if(e!==!0){let s,r;if(e===!1)r=n.changes.invertedDesc,s=ot.empty(t.doc.length);else{let o=n.changes.filter(e);s=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}n=st.create(t,s,n.selection&&n.selection.map(r),Z.mapEffects(n.effects,r),n.annotations,n.scrollIntoView)}let i=t.facet(Sr);for(let s=i.length-1;s>=0;s--){let r=i[s](n);r instanceof st?n=r:Array.isArray(r)&&r.length==1&&r[0]instanceof st?n=r[0]:n=Ar(t,me(r),!1)}return n}function Pl(n){let t=n.startState,e=t.facet(vr),i=n;for(let s=e.length-1;s>=0;s--){let r=e[s](n);r&&Object.keys(r).length&&(i=Cr(i,Cs(t,r,n.changes.newLength),!0))}return i==n?n:st.create(t,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}var Ml=[];function me(n){return n==null?Ml:Array.isArray(n)?n:[n]}var vt=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(vt||(vt={})),Tl=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,As;try{As=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Dl(n){if(As)return As.test(n);for(let t=0;t<n.length;t++){let e=n[t];if(/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Tl.test(e)))return!0}return!1}function Rl(n){return t=>{if(!/\S/.test(t))return vt.Space;if(Dl(t))return vt.Word;for(let e=0;e<n.length;e++)if(t.indexOf(n[e])>-1)return vt.Word;return vt.Other}}var j=class n{constructor(t,e,i,s,r,o){this.config=t,this.doc=e,this.selection=i,this.values=s,this.status=t.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)He(this,l<<1);this.computeSlot=null}field(t,e=!0){let i=this.config.address[t.id];if(i==null){if(e)throw new RangeError("Field is not present in this state");return}return He(this,i),vi(this,i)}update(...t){return Ar(this,t,!0)}applyTransaction(t){let e=this.config,{base:i,compartments:s}=e;for(let l of t.effects)l.is(ki.reconfigure)?(e&&(s=new Map,e.compartments.forEach((a,h)=>s.set(h,a)),e=null),s.set(l.value.compartment,l.value.extension)):l.is(Z.reconfigure)?(e=null,i=l.value):l.is(Z.appendConfig)&&(e=null,i=me(i).concat(l.value));let r;e?r=t.startState.values.slice():(e=Si.resolve(i,s,this),r=new n(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(a,h)=>h.reconfigure(a,this),null).values);let o=t.startState.facet(Ss)?t.newSelection:t.newSelection.asSingle();new n(e,t.newDoc,o,r,(l,a)=>a.update(l,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:k.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,i=t(e.ranges[0]),s=this.changes(i.changes),r=[i.range],o=me(i.effects);for(let l=1;l<e.ranges.length;l++){let a=t(e.ranges[l]),h=this.changes(a.changes),f=h.map(s);for(let u=0;u<l;u++)r[u]=r[u].map(f);let c=s.mapDesc(h,!0);r.push(a.range.map(c)),s=s.compose(f),o=Z.mapEffects(o,f).concat(Z.mapEffects(me(a.effects),c))}return{changes:s,selection:k.create(r,e.mainIndex),effects:o}}changes(t=[]){return t instanceof ot?t:ot.of(t,this.doc.length,this.facet(n.lineSeparator))}toText(t){return R.of(t.split(this.facet(n.lineSeparator)||xs))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return e==null?t.default:(He(this,e),vi(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let i in t){let s=t[i];s instanceof Rt&&this.config.address[s.id]!=null&&(e[i]=s.spec.toJSON(this.field(t[i]),this))}return e}static fromJSON(t,e={},i){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(t,r)){let o=i[r],l=t[r];s.push(o.init(a=>o.spec.fromJSON(l,a)))}}return n.create({doc:t.doc,selection:k.fromJSON(t.selection),extensions:e.extensions?s.concat([e.extensions]):s})}static create(t={}){let e=Si.resolve(t.extensions||[],new Map),i=t.doc instanceof R?t.doc:R.of((t.doc||"").split(e.staticFacet(n.lineSeparator)||xs)),s=t.selection?t.selection instanceof k?t.selection:k.single(t.selection.anchor,t.selection.head):k.single(0);return xr(s,i.length),e.staticFacet(Ss)||(s=s.asSingle()),new n(e,i,s,e.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(n.tabSize)}get lineBreak(){return this.facet(n.lineSeparator)||`
`}get readOnly(){return this.facet(Or)}phrase(t,...e){for(let i of this.facet(n.phrases))if(Object.prototype.hasOwnProperty.call(i,t)){t=i[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let r=+(s||1);return!r||r>e.length?i:e[r-1]})),t}languageDataAt(t,e,i=-1){let s=[];for(let r of this.facet(yr))for(let o of r(this,e,i))Object.prototype.hasOwnProperty.call(o,t)&&s.push(o[t]);return s}charCategorizer(t){let e=this.languageDataAt("wordChars",t);return Rl(e.length?e[0]:"")}wordAt(t){let{text:e,from:i,length:s}=this.doc.lineAt(t),r=this.charCategorizer(t),o=t-i,l=t-i;for(;o>0;){let a=ct(e,o,!1);if(r(e.slice(a,o))!=vt.Word)break;o=a}for(;l<s;){let a=ct(e,l);if(r(e.slice(l,a))!=vt.Word)break;l=a}return o==l?null:k.range(o+i,l+i)}};j.allowMultipleSelections=Ss;j.tabSize=P.define({combine:n=>n.length?n[0]:4});j.lineSeparator=$r;j.readOnly=Or;j.phrases=P.define({compare(n,t){let e=Object.keys(n),i=Object.keys(t);return e.length==i.length&&e.every(s=>n[s]==t[s])}});j.languageData=yr;j.changeFilter=kr;j.transactionFilter=Sr;j.transactionExtender=vr;ki.reconfigure=Z.define();var Ot=class{eq(t){return this==t}range(t,e=t){return Xe.create(t,e,this)}};Ot.prototype.startSide=Ot.prototype.endSide=0;Ot.prototype.point=!1;Ot.prototype.mapMode=it.TrackDel;function Es(n,t){return n==t||n.constructor==t.constructor&&n.eq(t)}var Xe=class n{constructor(t,e,i){this.from=t,this.to=e,this.value=i}static create(t,e,i){return new n(t,e,i)}};function Ps(n,t){return n.from-t.from||n.value.startSide-t.value.startSide}var Ms=class n{constructor(t,e,i,s){this.from=t,this.to=e,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(t,e,i,s=0){let r=i?this.to:this.from;for(let o=s,l=r.length;;){if(o==l)return o;let a=o+l>>1,h=r[a]-t||(i?this.value[a].endSide:this.value[a].startSide)-e;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(t,e,i,s){for(let r=this.findIndex(e,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(s(this.from[r]+t,this.to[r]+t,this.value[r])===!1)return!1}map(t,e){let i=[],s=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],f=this.from[a]+t,c=this.to[a]+t,u,d;if(f==c){let p=e.mapPos(f,h.startSide,h.mapMode);if(p==null||(u=d=p,h.startSide!=h.endSide&&(d=e.mapPos(f,h.endSide),d<u)))continue}else if(u=e.mapPos(f,h.startSide),d=e.mapPos(c,h.endSide),u>d||u==d&&h.startSide>0&&h.endSide<=0)continue;(d-u||h.endSide-h.startSide)<0||(o<0&&(o=u),h.point&&(l=Math.max(l,d-u)),i.push(h),s.push(u-o),r.push(d-o))}return{mapped:i.length?new n(s,r,i,l):null,pos:o}}},W=class n{constructor(t,e,i,s){this.chunkPos=t,this.chunk=e,this.nextLayer=i,this.maxPoint=s}static create(t,e,i,s){return new n(t,e,i,s)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:i=!1,filterFrom:s=0,filterTo:r=this.length}=t,o=t.filter;if(e.length==0&&!o)return this;if(i&&(e=e.slice().sort(Ps)),this.isEmpty)return e.length?n.of(e):this;let l=new Oi(this,null,-1).goto(0),a=0,h=[],f=new be;for(;l.value||a<e.length;)if(a<e.length&&(l.from-e[a].from||l.startSide-e[a].value.startSide)>=0){let c=e[a++];f.addInner(c.from,c.to,c.value)||h.push(c)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==e.length||this.chunkEnd(l.chunkIndex)<e[a].from)&&(!o||s>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&f.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||s>l.to||r<l.from||o(l.from,l.to,l.value))&&(f.addInner(l.from,l.to,l.value)||h.push(Xe.create(l.from,l.to,l.value))),l.next());return f.finishInner(this.nextLayer.isEmpty&&!h.length?n.empty:this.nextLayer.update({add:h,filter:o,filterFrom:s,filterTo:r}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],i=[],s=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=t.touchesRange(l,l+a.length);if(h===!1)s=Math.max(s,a.maxPoint),e.push(a),i.push(t.mapPos(l));else if(h===!0){let{mapped:f,pos:c}=a.map(l,t);f&&(s=Math.max(s,f.maxPoint),e.push(f),i.push(c))}}let r=this.nextLayer.map(t);return e.length==0?r:new n(i,e,r||n.empty,s)}between(t,e,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let r=this.chunkPos[s],o=this.chunk[s];if(e>=r&&t<=r+o.length&&o.between(r,t-r,e-r,i)===!1)return}this.nextLayer.between(t,e,i)}}iter(t=0){return Qe.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return Qe.from(t).goto(e)}static compare(t,e,i,s,r=-1){let o=t.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=r),l=e.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=r),a=gr(o,l,i),h=new Jt(o,a,r),f=new Jt(l,a,r);i.iterGaps((c,u,d)=>mr(h,c,f,u,d,s)),i.empty&&i.length==0&&mr(h,0,f,0,0,s)}static eq(t,e,i=0,s){s==null&&(s=999999999);let r=t.filter(f=>!f.isEmpty&&e.indexOf(f)<0),o=e.filter(f=>!f.isEmpty&&t.indexOf(f)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=gr(r,o),a=new Jt(r,l,0).goto(i),h=new Jt(o,l,0).goto(i);for(;;){if(a.to!=h.to||!Ts(a.active,h.active)||a.point&&(!h.point||!Es(a.point,h.point)))return!1;if(a.to>s)return!0;a.next(),h.next()}}static spans(t,e,i,s,r=-1){let o=new Jt(t,null,r).goto(e),l=e,a=o.openStart;for(;;){let h=Math.min(o.to,i);if(o.point){let f=o.activeForPoint(o.to),c=o.pointFrom<e?f.length+1:o.point.startSide<0?f.length:Math.min(f.length,a);s.point(l,h,o.point,f,c,o.pointRank),a=Math.min(o.openEnd(h),f.length)}else h>l&&(s.span(l,h,o.active,a),a=o.openEnd(h));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(t,e=!1){let i=new be;for(let s of t instanceof Xe?[t]:e?Bl(t):t)i.add(s.from,s.to,s.value);return i.finish()}static join(t){if(!t.length)return n.empty;let e=t[t.length-1];for(let i=t.length-2;i>=0;i--)for(let s=t[i];s!=n.empty;s=s.nextLayer)e=new n(s.chunkPos,s.chunk,e,Math.max(s.maxPoint,e.maxPoint));return e}};W.empty=new W([],[],null,-1);function Bl(n){if(n.length>1)for(let t=n[0],e=1;e<n.length;e++){let i=n[e];if(Ps(t,i)>0)return n.slice().sort(Ps);t=i}return n}W.empty.nextLayer=W.empty;var be=class n{finishChunk(t){this.chunks.push(new Ms(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,i){this.addInner(t,e,i)||(this.nextLayer||(this.nextLayer=new n)).add(t,e,i)}addInner(t,e,i){let s=t-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(t-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=i,this.lastFrom=t,this.lastTo=e,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let i=e.value.length-1;return this.last=e.value[i],this.lastFrom=e.from[i]+t,this.lastTo=e.to[i]+t,!0}finish(){return this.finishInner(W.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let e=W.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}};function gr(n,t,e){let i=new Map;for(let r of n)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let s=new Set;for(let r of t)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(e?e.mapPos(l):l)==r.chunkPos[o]&&!e?.touchesRange(l,l+r.chunk[o].length)&&s.add(r.chunk[o])}return s}var Oi=class{constructor(t,e,i,s=0){this.layer=t,this.skip=e,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<t||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],i=t+e.from[this.rangeIndex];if(this.from=i,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}},Qe=class n{constructor(t){this.heap=t}static from(t,e=null,i=-1){let s=[];for(let r=0;r<t.length;r++)for(let o=t[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&s.push(new Oi(o,e,i,r));return s.length==1?s[0]:new n(s)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let i of this.heap)i.goto(t,e);for(let i=this.heap.length>>1;i>=0;i--)ws(this.heap,i);return this.next(),this}forward(t,e){for(let i of this.heap)i.forward(t,e);for(let i=this.heap.length>>1;i>=0;i--)ws(this.heap,i);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),ws(this.heap,0)}}};function ws(n,t){for(let e=n[t];;){let i=(t<<1)+1;if(i>=n.length)break;let s=n[i];if(i+1<n.length&&s.compare(n[i+1])>=0&&(s=n[i+1],i++),e.compare(s)<0)break;n[i]=e,n[t]=s,t=i}}var Jt=class{constructor(t,e,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Qe.from(t,e,i)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){mi(this.active,t),mi(this.activeTo,t),mi(this.activeRank,t),this.minActive=wr(this.active,this.activeTo)}addActive(t){let e=0,{value:i,to:s,rank:r}=this.cursor;for(;e<this.activeRank.length&&(r-this.activeRank[e]||s-this.activeTo[e])>0;)e++;wi(this.active,e,i),wi(this.activeTo,e,s),wi(this.activeRank,e,r),t&&wi(t,e,this.cursor.from),this.minActive=wr(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>t){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&mi(i,s)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<t;s--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>t||this.activeTo[i]==t&&this.active[i].endSide>=this.point.endSide)&&e.push(this.active[i]);return e.reverse()}openEnd(t){let e=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>t;i--)e++;return e}};function mr(n,t,e,i,s,r){n.goto(t),e.goto(i);let o=i+s,l=i,a=i-t,h=!!r.boundChange;for(let f=!1;;){let c=n.to+a-e.to,u=c||n.endSide-e.endSide,d=u<0?n.to+a:e.to,p=Math.min(d,o);if(n.point||e.point?(n.point&&e.point&&Es(n.point,e.point)&&Ts(n.activeForPoint(n.to),e.activeForPoint(e.to))||r.comparePoint(l,p,n.point,e.point),f=!1):(f&&r.boundChange(l),p>l&&!Ts(n.active,e.active)&&r.compareRange(l,p,n.active,e.active),h&&p<o&&(c||n.openEnd(d)!=e.openEnd(d))&&(f=!0)),d>o)break;l=d,u<=0&&n.next(),u>=0&&e.next()}}function Ts(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!=t[e]&&!Es(n[e],t[e]))return!1;return!0}function mi(n,t){for(let e=t,i=n.length-1;e<i;e++)n[e]=n[e+1];n.pop()}function wi(n,t,e){for(let i=n.length-1;i>=t;i--)n[i+1]=n[i];n[t]=e}function wr(n,t){let e=-1,i=1e9;for(let s=0;s<t.length;s++)(t[s]-i||n[s].endSide-n[e].endSide)<0&&(e=s,i=t[s]);return e}function Pr(n,t,e,i){for(let s=0,r=0;;){if(r>=t)return s;if(s==n.length)break;r+=n.charCodeAt(s)==9?e-r%e:1,s=ct(n,s)}return i===!0?-1:n.length}var Mr=typeof Symbol>"u"?"__\u037C":Symbol.for("\u037C"),Ls=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},ut=class{constructor(t,e){this.rules=[];let{finish:i}=e||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,h){let f=[],c=/^@(\w+)\b/.exec(o[0]),u=c&&c[1]=="keyframes";if(c&&l==null)return a.push(o[0]+";");for(let d in l){let p=l[d];if(/&/.test(d))r(d.split(/,\s*/).map(g=>o.map(m=>g.replace(/&/,m))).reduce((g,m)=>g.concat(m)),p,a);else if(p&&typeof p=="object"){if(!c)throw new RangeError("The value of a property ("+d+") should be a primitive value.");r(s(d),p,f,u)}else p!=null&&f.push(d.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(f.length||u)&&a.push((i&&!c&&!h?o.map(i):o).join(", ")+" {"+f.join(" ")+"}")}for(let o in t)r(s(o),t[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=Tr[Mr]||1;return Tr[Mr]=t+1,"\u037C"+t.toString(36)}static mount(t,e,i){let s=t[Ls],r=i&&i.nonce;s?r&&s.setNonce(r):s=new Ns(t,r),s.mount(Array.isArray(e)?e:[e],t)}},Dr=new Map,Ns=class{constructor(t,e){let i=t.ownerDocument||t,s=i.defaultView;if(!t.head&&t.adoptedStyleSheets&&s.CSSStyleSheet){let r=Dr.get(i);if(r)return t[Ls]=r;this.sheet=new s.CSSStyleSheet,Dr.set(i,this)}else this.styleTag=i.createElement("style"),e&&this.styleTag.setAttribute("nonce",e);this.modules=[],t[Ls]=this}mount(t,e){let i=this.sheet,s=0,r=0;for(let o=0;o<t.length;o++){let l=t[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),i)for(let h=0;h<l.rules.length;h++)i.insertRule(l.rules[h],s++)}else{for(;r<a;)s+=this.modules[r++].rules.length;s+=l.rules.length,r++}}if(i)e.adoptedStyleSheets.indexOf(this.sheet)<0&&(e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=e.head||e;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}};var se={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ai={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},vh=typeof navigator<"u"&&/Mac/.test(navigator.platform),Oh=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(K=0;K<10;K++)se[48+K]=se[96+K]=String(K);var K;for(K=1;K<=24;K++)se[K+111]="F"+K;var K;for(K=65;K<=90;K++)se[K]=String.fromCharCode(K+32),Ai[K]=String.fromCharCode(K);var K;for(Ci in se)Ai.hasOwnProperty(Ci)||(Ai[Ci]=se[Ci]);var Ci;var et=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Hs=typeof document<"u"?document:{documentElement:{style:{}}},Vs=/Edge\/(\d+)/.exec(et.userAgent),ro=/MSIE \d/.test(et.userAgent),Xs=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(et.userAgent),Yi=!!(ro||Xs||Vs),Rr=!Yi&&/gecko\/(\d+)/i.test(et.userAgent),Is=!Yi&&/Chrome\/(\d+)/.exec(et.userAgent),Br="webkitFontSmoothing"in Hs.documentElement.style,Qs=!Yi&&/Apple Computer/.test(et.vendor),Er=Qs&&(/Mobile\/\w+/.test(et.userAgent)||et.maxTouchPoints>2),y={mac:Er||/Mac/.test(et.platform),windows:/Win/.test(et.platform),linux:/Linux|X11/.test(et.platform),ie:Yi,ie_version:ro?Hs.documentMode||6:Xs?+Xs[1]:Vs?+Vs[1]:0,gecko:Rr,gecko_version:Rr?+(/Firefox\/(\d+)/.exec(et.userAgent)||[0,0])[1]:0,chrome:!!Is,chrome_version:Is?+Is[1]:0,ios:Er,android:/Android\b/.test(et.userAgent),webkit:Br,webkit_version:Br?+(/\bAppleWebKit\/(\d+)/.exec(et.userAgent)||[0,0])[1]:0,safari:Qs,safari_version:Qs?+(/\bVersion\/(\d+(\.\d+)?)/.exec(et.userAgent)||[0,0])[1]:0,tabSize:Hs.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function On(n,t){for(let e in n)e=="class"&&t.class?t.class+=" "+n.class:e=="style"&&t.style?t.style+=";"+n.style:t[e]=n[e];return t}var Ni=Object.create(null);function Cn(n,t,e){if(n==t)return!0;n||(n=Ni),t||(t=Ni);let i=Object.keys(n),s=Object.keys(t);if(i.length-(e&&i.indexOf(e)>-1?1:0)!=s.length-(e&&s.indexOf(e)>-1?1:0))return!1;for(let r of i)if(r!=e&&(s.indexOf(r)==-1||n[r]!==t[r]))return!1;return!0}function Nl(n,t){for(let e=n.attributes.length-1;e>=0;e--){let i=n.attributes[e].name;t[i]==null&&n.removeAttribute(i)}for(let e in t){let i=t[e];e=="style"?n.style.cssText=i:n.getAttribute(e)!=i&&n.setAttribute(e,i)}}function Lr(n,t,e){let i=!1;if(t)for(let s in t)e&&s in e||(i=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(e)for(let s in e)t&&t[s]==e[s]||(i=!0,s=="style"?n.style.cssText=e[s]:n.setAttribute(s,e[s]));return i}function Il(n){let t=Object.create(null);for(let e=0;e<n.attributes.length;e++){let i=n.attributes[e];t[i.name]=i.value}return t}var oe=class{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}},gt=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(gt||(gt={})),U=class extends Ot{constructor(t,e,i,s){super(),this.startSide=t,this.endSide=e,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(t){return new ii(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),i=!!t.block;return e+=i&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new le(t,e,e,i,t.widget||null,!1)}static replace(t){let e=!!t.block,i,s;if(t.isBlockGap)i=-5e8,s=4e8;else{let{start:r,end:o}=oo(t,e);i=(r?e?-3e8:-1:5e8)-1,s=(o?e?2e8:1:-6e8)+1}return new le(t,i,s,e,t.widget||null,!0)}static line(t){return new si(t)}static set(t,e=!1){return W.of(t,e)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};U.none=W.empty;var ii=class n extends U{constructor(t){let{start:e,end:i}=oo(t);super(e?-1:5e8,i?1:-6e8,null,t),this.tagName=t.tagName||"span",this.attrs=t.class&&t.attributes?On(t.attributes,{class:t.class}):t.class?{class:t.class}:t.attributes||Ni}eq(t){return this==t||t instanceof n&&this.tagName==t.tagName&&Cn(this.attrs,t.attrs)}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}};ii.prototype.point=!1;var si=class n extends U{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof n&&this.spec.class==t.spec.class&&Cn(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}};si.prototype.mapMode=it.TrackBefore;si.prototype.point=!0;var le=class n extends U{constructor(t,e,i,s,r,o){super(e,i,r,t),this.block=s,this.isReplace=o,this.mapMode=s?e<=0?it.TrackBefore:it.TrackAfter:it.TrackDel}get type(){return this.startSide!=this.endSide?gt.WidgetRange:this.startSide<=0?gt.WidgetBefore:gt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof n&&ql(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}};le.prototype.point=!0;function oo(n,t=!1){let{inclusiveStart:e,inclusiveEnd:i}=n;return e==null&&(e=n.inclusive),i==null&&(i=n.inclusive),{start:e??t,end:i??t}}function ql(n,t){return n==t||!!(n&&t&&n.compare(t))}function $e(n,t,e,i=0){let s=e.length-1;s>=0&&e[s]+i>=n?e[s]=Math.max(e[s],t):e.push(n,t)}var Ii=class n extends Ot{constructor(t,e){super(),this.tagName=t,this.attributes=e}eq(t){return t==this||t instanceof n&&this.tagName==t.tagName&&Cn(this.attributes,t.attributes)}static create(t){return new n(t.tagName,t.attributes||Ni)}static set(t,e=!1){return W.of(t,e)}};Ii.prototype.startSide=Ii.prototype.endSide=-1;function Se(n){let t;return n.nodeType==11?t=n.getSelection?n:n.ownerDocument:t=n,t.getSelection()}function Zs(n,t){return t?n==t||n.contains(t.nodeType!=1?t.parentNode:t):!1}function Ye(n,t){if(!t.anchorNode)return!1;try{return Zs(n,t.anchorNode)}catch{return!1}}function Ei(n){return n.nodeType==3?ni(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Ue(n,t,e,i){return e?Nr(n,t,e,i,-1)||Nr(n,t,e,i,1):!1}function Vt(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t}function qi(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function Nr(n,t,e,i,s){for(;;){if(n==e&&t==i)return!0;if(t==(s<0?0:Lt(n))){if(n.nodeName=="DIV")return!1;let r=n.parentNode;if(!r||r.nodeType!=1)return!1;t=Vt(n)+(s<0?0:1),n=r}else if(n.nodeType==1){if(n=n.childNodes[t+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;t=s<0?Lt(n):0}else return!1}}function Lt(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function zi(n,t){let e=t?n.left:n.right;return{left:e,right:e,top:n.top,bottom:n.bottom}}function zl(n){let t=n.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function lo(n,t){let e=t.width/n.offsetWidth,i=t.height/n.offsetHeight;return(e>.995&&e<1.005||!isFinite(e)||Math.abs(t.width-n.offsetWidth)<1)&&(e=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.height-n.offsetHeight)<1)&&(i=1),{scaleX:e,scaleY:i}}function Wl(n,t,e,i,s,r,o,l){let a=n.ownerDocument,h=a.defaultView||window;for(let f=n,c=!1;f&&!c;)if(f.nodeType==1){let u,d=f==a.body,p=1,g=1;if(d)u=zl(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(c=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let C=f.getBoundingClientRect();({scaleX:p,scaleY:g}=lo(f,C)),u={left:C.left,right:C.left+f.clientWidth*p,top:C.top,bottom:C.top+f.clientHeight*g}}let m=0,w=0;if(s=="nearest")t.top<u.top?(w=t.top-(u.top+o),e>0&&t.bottom>u.bottom+w&&(w=t.bottom-u.bottom+o)):t.bottom>u.bottom&&(w=t.bottom-u.bottom+o,e<0&&t.top-w<u.top&&(w=t.top-(u.top+o)));else{let C=t.bottom-t.top,v=u.bottom-u.top;w=(s=="center"&&C<=v?t.top+C/2-v/2:s=="start"||s=="center"&&e<0?t.top-o:t.bottom-v+o)-u.top}if(i=="nearest"?t.left<u.left?(m=t.left-(u.left+r),e>0&&t.right>u.right+m&&(m=t.right-u.right+r)):t.right>u.right&&(m=t.right-u.right+r,e<0&&t.left<u.left+m&&(m=t.left-(u.left+r))):m=(i=="center"?t.left+(t.right-t.left)/2-(u.right-u.left)/2:i=="start"==l?t.left-r:t.right-(u.right-u.left)+r)-u.left,m||w)if(d)h.scrollBy(m,w);else{let C=0,v=0;if(w){let E=f.scrollTop;f.scrollTop+=w/g,v=(f.scrollTop-E)*g}if(m){let E=f.scrollLeft;f.scrollLeft+=m/p,C=(f.scrollLeft-E)*p}t={left:t.left-C,top:t.top-v,right:t.right-C,bottom:t.bottom-v},C&&Math.abs(C-m)<1&&(i="nearest"),v&&Math.abs(v-w)<1&&(s="nearest")}if(d)break;(t.top<u.top||t.bottom>u.bottom||t.left<u.left||t.right>u.right)&&(t={left:Math.max(t.left,u.left),right:Math.min(t.right,u.right),top:Math.max(t.top,u.top),bottom:Math.min(t.bottom,u.bottom)}),f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function Fl(n){let t=n.ownerDocument,e,i;for(let s=n.parentNode;s&&!(s==t.body||e&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!e&&s.scrollWidth>s.clientWidth&&(e=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:e,y:i}}var js=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:i}=t;this.set(e,Math.min(t.anchorOffset,e?Lt(e):0),i,Math.min(t.focusOffset,i?Lt(i):0))}set(t,e,i,s){this.anchorNode=t,this.anchorOffset=e,this.focusNode=i,this.focusOffset=s}},ne=null;y.safari&&y.safari_version>=26&&(ne=!1);function ao(n){if(n.setActive)return n.setActive();if(ne)return n.focus(ne);let t=[];for(let e=n;e&&(t.push(e,e.scrollTop,e.scrollLeft),e!=e.ownerDocument);e=e.parentNode);if(n.focus(ne==null?{get preventScroll(){return ne={preventScroll:!0},!0}}:void 0),!ne){ne=!1;for(let e=0;e<t.length;){let i=t[e++],s=t[e++],r=t[e++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=r&&(i.scrollLeft=r)}}}var Ir;function ni(n,t,e=t){let i=Ir||(Ir=document.createRange());return i.setEnd(n,e),i.setStart(n,t),i}function ke(n,t,e,i){let s={key:t,code:t,keyCode:e,which:e,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let r=new KeyboardEvent("keydown",s);r.synthetic=!0,n.dispatchEvent(r);let o=new KeyboardEvent("keyup",s);return o.synthetic=!0,n.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function Hl(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Vl(n,t){let e=t.focusNode,i=t.focusOffset;if(!e||t.anchorNode!=e||t.anchorOffset!=i)return!1;for(i=Math.min(i,Lt(e));;)if(i){if(e.nodeType!=1)return!1;let s=e.childNodes[i-1];s.contentEditable=="false"?i--:(e=s,i=Lt(e))}else{if(e==n)return!0;i=Vt(e),e=e.parentNode}}function ho(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function fo(n,t){for(let e=n,i=t;;){if(e.nodeType==3&&i>0)return{node:e,offset:i};if(e.nodeType==1&&i>0){if(e.contentEditable=="false")return null;e=e.childNodes[i-1],i=Lt(e)}else if(e.parentNode&&!qi(e))i=Vt(e),e=e.parentNode;else return null}}function co(n,t){for(let e=n,i=t;;){if(e.nodeType==3&&i<e.nodeValue.length)return{node:e,offset:i};if(e.nodeType==1&&i<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[i],i=0}else if(e.parentNode&&!qi(e))i=Vt(e)+1,e=e.parentNode;else return null}}var At=class n{constructor(t,e,i=!0){this.node=t,this.offset=e,this.precise=i}static before(t,e){return new n(t.parentNode,Vt(t),e)}static after(t,e){return new n(t.parentNode,Vt(t)+1,e)}},Y=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(Y||(Y={})),ae=Y.LTR,An=Y.RTL;function uo(n){let t=[];for(let e=0;e<n.length;e++)t.push(1<<+n[e]);return t}var Xl=uo("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Ql=uo("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ks=Object.create(null),Ct=[];for(let n of["()","[]","{}"]){let t=n.charCodeAt(0),e=n.charCodeAt(1);Ks[t]=e,Ks[e]=-t}function po(n){return n<=247?Xl[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?Ql[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}var Zl=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,bt=class{get dir(){return this.level%2?An:ae}constructor(t,e,i){this.from=t,this.to=e,this.level=i}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,i,s){let r=-1;for(let o=0;o<t.length;o++){let l=t[o];if(l.from<=e&&l.to>=e){if(l.level==i)return o;(r<0||(s!=0?s<0?l.from<e:l.to>e:t[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}};function go(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++){let i=n[e],s=t[e];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!go(i.inner,s.inner))return!1}return!0}var L=[];function jl(n,t,e,i,s){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:t,l=r<i.length?i[r].from:e,a=r?256:s;for(let h=o,f=a,c=a;h<l;h++){let u=po(n.charCodeAt(h));u==512?u=f:u==8&&c==4&&(u=16),L[h]=u==4?2:u,u&7&&(c=u),f=u}for(let h=o,f=a,c=a;h<l;h++){let u=L[h];if(u==128)h<l-1&&f==L[h+1]&&f&24?u=L[h]=f:L[h]=256;else if(u==64){let d=h+1;for(;d<l&&L[d]==64;)d++;let p=h&&f==8||d<e&&L[d]==8?c==1?1:8:256;for(let g=h;g<d;g++)L[g]=p;h=d-1}else u==8&&c==1&&(L[h]=1);f=u,u&7&&(c=u)}}}function Kl(n,t,e,i,s){let r=s==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let h=o?i[o-1].to:t,f=o<i.length?i[o].from:e;for(let c=h,u,d,p;c<f;c++)if(d=Ks[u=n.charCodeAt(c)])if(d<0){for(let g=l-3;g>=0;g-=3)if(Ct[g+1]==-d){let m=Ct[g+2],w=m&2?s:m&4?m&1?r:s:0;w&&(L[c]=L[Ct[g]]=w),l=g;break}}else{if(Ct.length==189)break;Ct[l++]=c,Ct[l++]=u,Ct[l++]=a}else if((p=L[c])==2||p==1){let g=p==s;a=g?0:1;for(let m=l-3;m>=0;m-=3){let w=Ct[m+2];if(w&2)break;if(g)Ct[m+2]|=2;else{if(w&4)break;Ct[m+2]|=4}}}}}function Yl(n,t,e,i){for(let s=0,r=i;s<=e.length;s++){let o=s?e[s-1].to:n,l=s<e.length?e[s].from:t;for(let a=o;a<l;){let h=L[a];if(h==256){let f=a+1;for(;;)if(f==l){if(s==e.length)break;f=e[s++].to,l=s<e.length?e[s].from:t}else if(L[f]==256)f++;else break;let c=r==1,u=(f<t?L[f]:i)==1,d=c==u?c?1:2:i;for(let p=f,g=s,m=g?e[g-1].to:n;p>a;)p==m&&(p=e[--g].from,m=g?e[g-1].to:n),L[--p]=d;a=f}else r=h,a++}}}function Ys(n,t,e,i,s,r,o){let l=i%2?2:1;if(i%2==s%2)for(let a=t,h=0;a<e;){let f=!0,c=!1;if(h==r.length||a<r[h].from){let g=L[a];g!=l&&(f=!1,c=g==16)}let u=!f&&l==1?[]:null,d=f?i:i+1,p=a;t:for(;;)if(h<r.length&&p==r[h].from){if(c)break t;let g=r[h];if(!f)for(let m=g.to,w=h+1;;){if(m==e)break t;if(w<r.length&&r[w].from==m)m=r[w++].to;else{if(L[m]==l)break t;break}}if(h++,u)u.push(g);else{g.from>a&&o.push(new bt(a,g.from,d));let m=g.direction==ae!=!(d%2);Us(n,m?i+1:i,s,g.inner,g.from,g.to,o),a=g.to}p=g.to}else{if(p==e||(f?L[p]!=l:L[p]==l))break;p++}u?Ys(n,a,p,i+1,s,u,o):a<p&&o.push(new bt(a,p,d)),a=p}else for(let a=e,h=r.length;a>t;){let f=!0,c=!1;if(!h||a>r[h-1].to){let g=L[a-1];g!=l&&(f=!1,c=g==16)}let u=!f&&l==1?[]:null,d=f?i:i+1,p=a;t:for(;;)if(h&&p==r[h-1].to){if(c)break t;let g=r[--h];if(!f)for(let m=g.from,w=h;;){if(m==t)break t;if(w&&r[w-1].to==m)m=r[--w].from;else{if(L[m-1]==l)break t;break}}if(u)u.push(g);else{g.to<a&&o.push(new bt(g.to,a,d));let m=g.direction==ae!=!(d%2);Us(n,m?i+1:i,s,g.inner,g.from,g.to,o),a=g.from}p=g.from}else{if(p==t||(f?L[p-1]!=l:L[p-1]==l))break;p--}u?Ys(n,p,a,i+1,s,u,o):p<a&&o.push(new bt(p,a,d)),a=p}}function Us(n,t,e,i,s,r,o){let l=t%2?2:1;jl(n,s,r,i,l),Kl(n,s,r,i,l),Yl(s,r,i,l),Ys(n,s,r,t,e,i,o)}function Ul(n,t,e){if(!n)return[new bt(0,0,t==An?1:0)];if(t==ae&&!e.length&&!Zl.test(n))return mo(n.length);if(e.length)for(;n.length>L.length;)L[L.length]=256;let i=[],s=t==ae?0:1;return Us(n,s,s,e,0,n.length,i),i}function mo(n){return[new bt(0,n,0)]}var wo="";function _l(n,t,e,i,s){var r;let o=i.head-n.from,l=bt.find(t,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),a=t[l],h=a.side(s,e);if(o==h){let u=l+=s?1:-1;if(u<0||u>=t.length)return null;a=t[l=u],o=a.side(!s,e),h=a.side(s,e)}let f=ct(n.text,o,a.forward(s,e));(f<a.from||f>a.to)&&(f=h),wo=n.text.slice(Math.min(o,f),Math.max(o,f));let c=l==(s?t.length-1:0)?null:t[l+(s?1:-1)];return c&&f==h&&c.level+(s?0:1)<a.level?k.cursor(c.side(!s,e)+n.from,c.forward(s,e)?1:-1,c.level):k.cursor(f+n.from,a.forward(s,e)?-1:1,a.level)}function Gl(n,t,e){for(let i=t;i<e;i++){let s=po(n.charCodeAt(i));if(s==1)return ae;if(s==2||s==4)return An}return ae}var bo=P.define(),xo=P.define(),yo=P.define(),$o=P.define(),_s=P.define(),ko=P.define(),So=P.define(),Pn=P.define(),Mn=P.define(),vo=P.define({combine:n=>n.some(t=>t)}),Jl=P.define({combine:n=>n.some(t=>t)}),Oo=P.define(),_e=class n{constructor(t,e="nearest",i="nearest",s=5,r=5,o=!1){this.range=t,this.y=e,this.x=i,this.yMargin=s,this.xMargin=r,this.isSnapshot=o}map(t){return t.empty?this:new n(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new n(k.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}},Pi=Z.define({map:(n,t)=>n.map(t)}),Co=Z.define();function xt(n,t,e){let i=n.facet($o);i.length?i[0](t):window.onerror&&window.onerror(String(t),e,void 0,void 0,t)||(e?console.error(e+":",t):console.error(t))}var Et=P.define({combine:n=>n.length?n[0]:!0}),ta=0,xe=P.define({combine(n){return n.filter((t,e)=>{for(let i=0;i<e;i++)if(n[i].plugin==t.plugin)return!1;return!0})}}),ve=class n{constructor(t,e,i,s,r){this.id=t,this.create=e,this.domEventHandlers=i,this.domEventObservers=s,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(xe.of({plugin:this,arg:void 0}))}of(t){return this.baseExtensions.concat(xe.of({plugin:this,arg:t}))}static define(t,e){let{eventHandlers:i,eventObservers:s,provide:r,decorations:o}=e||{};return new n(ta++,t,i,s,l=>{let a=[];return o&&a.push(Ui.of(h=>{let f=h.plugin(l);return f?o(f):U.none})),r&&a.push(r(l)),a})}static fromClass(t,e){return n.define((i,s)=>new t(i,s),e)}},Ge=class{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(t){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(i){if(xt(e.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(t,this.spec.arg)}catch(e){xt(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(!((e=this.value)===null||e===void 0)&&e.destroy)try{this.value.destroy()}catch(i){xt(t.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},Ao=P.define(),Tn=P.define(),Ui=P.define(),Po=P.define(),Dn=P.define(),ri=P.define(),Mo=P.define();function qr(n,t){let e=n.state.facet(Mo);if(!e.length)return e;let i=e.map(r=>r instanceof Function?r(n):r),s=[];return W.spans(i,t.from,t.to,{point(){},span(r,o,l,a){let h=r-t.from,f=o-t.from,c=s;for(let u=l.length-1;u>=0;u--,a--){let d=l[u].spec.bidiIsolate,p;if(d==null&&(d=Gl(t.text,h,f)),a>0&&c.length&&(p=c[c.length-1]).to==h&&p.direction==d)p.to=f,c=p.inner;else{let g={from:h,to:f,direction:d,inner:[]};c.push(g),c=g.inner}}}}),s}var To=P.define();function Do(n){let t=0,e=0,i=0,s=0;for(let r of n.state.facet(To)){let o=r(n);o&&(o.left!=null&&(t=Math.max(t,o.left)),o.right!=null&&(e=Math.max(e,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(s=Math.max(s,o.bottom)))}return{left:t,right:e,top:i,bottom:s}}var Ze=P.define(),yt=class n{constructor(t,e,i,s){this.fromA=t,this.toA=e,this.fromB=i,this.toB=s}join(t){return new n(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,i=this;for(;e>0;e--){let s=t[e-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),t.splice(e-1,1)}}return t.splice(e,0,i),t}static extendWithRanges(t,e){if(e.length==0)return t;let i=[];for(let s=0,r=0,o=0;;){let l=s<t.length?t[s].fromB:1e9,a=r<e.length?e[r]:1e9,h=Math.min(l,a);if(h==1e9)break;let f=h+o,c=h,u=f;for(;;)if(r<e.length&&e[r]<=c){let d=e[r+1];r+=2,c=Math.max(c,d);for(let p=s;p<t.length&&t[p].fromB<=c;p++)o=t[p].toA-t[p].toB;u=Math.max(u,d+o)}else if(s<t.length&&t[s].fromB<=c){let d=t[s++];c=Math.max(c,d.toB),u=Math.max(u,d.toA),o=d.toA-d.toB}else break;i.push(new n(f,u,h,c))}return i}},Wi=class n{constructor(t,e,i){this.view=t,this.state=e,this.transactions=i,this.flags=0,this.startState=t.state,this.changes=ot.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let s=[];this.changes.iterChangedRanges((r,o,l,a)=>s.push(new yt(r,o,l,a))),this.changedRanges=s}static create(t,e,i){return new n(t,e,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},ea=[],Q=class{constructor(t,e,i=0){this.dom=t,this.length=e,this.flags=i,this.parent=null,t.cmTile=this}get breakAfter(){return this.flags&1}get children(){return ea}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(t){if(this.flags|=2,this.flags&4){this.flags&=-5;let e=this.domAttrs;e&&Nl(this.dom,e)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(t){this.dom=t,t.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t,e=this.posAtStart){let i=e;for(let s of this.children){if(s==t)return i;i+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}covers(t){return!0}coordsIn(t,e){return null}domPosFor(t,e){let i=Vt(this.dom),s=this.length?t>0:e>0;return new At(this.parent.dom,i+(s?1:0),t==0||t==this.length)}markDirty(t){this.flags&=-3,t&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let t=this;t;t=t.parent)if(t instanceof Ce)return t;return null}static get(t){return t.cmTile}},Oe=class extends Q{constructor(t){super(t,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(t){this.children.push(t),t.parent=this}sync(t){if(this.flags&2)return;super.sync(t);let e=this.dom,i=null,s,r=t?.node==e?t:null,o=0;for(let l of this.children){if(l.sync(t),o+=l.length+l.breakAfter,s=i?i.nextSibling:e.firstChild,r&&s!=l.dom&&(r.written=!0),l.dom.parentNode==e)for(;s&&s!=l.dom;)s=zr(s);else e.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:e.firstChild,r&&s&&(r.written=!0);s;)s=zr(s);this.length=o}};function zr(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}var Ce=class extends Oe{constructor(t,e){super(e),this.view=t}owns(t){for(;t;t=t.parent)if(t==this)return!0;return!1}isBlock(){return!0}nearest(t){for(;;){if(!t)return null;let e=Q.get(t);if(e&&this.owns(e))return e;t=t.parentNode}}blockTiles(t){for(let e=[],i=this,s=0,r=0;;)if(s==i.children.length){if(!e.length)return;i=i.parent,i.breakAfter&&r++,s=e.pop()}else{let o=i.children[s++];if(o instanceof Ft)e.push(s),i=o,s=0;else{let l=r+o.length,a=t(o,r);if(a!==void 0)return a;r=l+o.breakAfter}}}resolveBlock(t,e){let i,s=-1,r,o=-1;if(this.blockTiles((l,a)=>{let h=a+l.length;if(t>=a&&t<=h){if(l.isWidget()&&e>=-1&&e<=1){if(l.flags&32)return!0;l.flags&16&&(i=void 0)}(a<t||t==h&&(e<-1?l.length:l.covers(1)))&&(!i||!l.isWidget()&&i.isWidget())&&(i=l,s=t-a),(h>t||t==a&&(e>1?l.length:l.covers(-1)))&&(!r||!l.isWidget()&&r.isWidget())&&(r=l,o=t-a)}}),!i&&!r)throw new Error("No tile at position "+t);return i&&e<0||!r?{tile:i,offset:s}:{tile:r,offset:o}}},Ft=class n extends Oe{constructor(t,e){super(t),this.wrapper=e}isBlock(){return!0}covers(t){return this.children.length?t<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(t,e){let i=new n(e||document.createElement(t.tagName),t);return e||(i.flags|=4),i}},Ae=class n extends Oe{constructor(t,e){super(t),this.attrs=e}isLine(){return!0}static start(t,e,i){let s=new n(e||document.createElement("div"),t);return(!e||!i)&&(s.flags|=4),s}get domAttrs(){return this.attrs}resolveInline(t,e,i){let s=null,r=-1,o=null,l=-1;function a(f,c){for(let u=0,d=0;u<f.children.length&&d<=c;u++){let p=f.children[u],g=d+p.length;g>=c&&(p.isComposite()?a(p,c-d):(!o||o.isHidden&&(e>0||i&&sa(o,p)))&&(g>c||p.flags&32)?(o=p,l=c-d):(d<c||p.flags&16&&!p.isHidden)&&(s=p,r=c-d)),d=g}}a(this,t);let h=(e<0?s:o)||s||o;return h?{tile:h,offset:h==s?r:l}:null}coordsIn(t,e){let i=this.resolveInline(t,e,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),e):ia(this)}domIn(t,e){let i=this.resolveInline(t,e);if(i){let{tile:s,offset:r}=i;if(this.dom.contains(s.dom))return s.isText()?new At(s.dom,Math.min(s.dom.nodeValue.length,r)):s.domPosFor(r,s.flags&16?1:s.flags&32?-1:e);let o=i.tile.parent,l=!1;for(let a of o.children){if(l)return new At(a.dom,0);a==i.tile&&(l=!0)}}return new At(this.dom,0)}};function ia(n){let t=n.dom.lastChild;if(!t)return n.dom.getBoundingClientRect();let e=Ei(t);return e[e.length-1]||null}function sa(n,t){let e=n.coordsIn(0,1),i=t.coordsIn(0,1);return e&&i&&i.top<e.bottom}var nt=class n extends Oe{constructor(t,e){super(t),this.mark=e}get domAttrs(){return this.mark.attrs}static of(t,e){let i=new n(e||document.createElement(t.tagName),t);return e||(i.flags|=4),i}},re=class n extends Q{constructor(t,e){super(t,e.length),this.text=e}sync(t){this.flags&2||(super.sync(t),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(t,e){let i=this.dom.nodeValue.length;t>i&&(t=i);let s=t,r=t,o=0;t==0&&e<0||t==i&&e>=0?y.chrome||y.gecko||(t?(s--,o=1):r<i&&(r++,o=-1)):e<0?s--:r<i&&r++;let l=ni(this.dom,s,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:e>=0)?0:l.length-1];return y.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?zi(a,o<0):a||null}static of(t,e){let i=new n(e||document.createTextNode(t),t);return e||(i.flags|=2),i}},he=class n extends Q{constructor(t,e,i,s){super(t,e,s),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(t){return this.flags&48?!1:(this.flags&(t<0?64:128))>0}coordsIn(t,e){return this.coordsInWidget(t,e,!1)}coordsInWidget(t,e,i){let s=this.widget.coordsAt(this.dom,t,e);if(s)return s;if(i)return zi(this.dom.getBoundingClientRect(),this.length?t==0:e<=0);{let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let l=this.flags&16?!0:this.flags&32?!1:t>0;for(let a=l?r.length-1:0;o=r[a],!(t>0?a==0:a==r.length-1||o.top<o.bottom);a+=l?-1:1);return zi(o,!l)}}get overrideDOMText(){if(!this.length)return R.empty;let{root:t}=this;if(!t)return R.empty;let e=this.posAtStart;return t.view.state.doc.slice(e,e+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(t,e,i,s,r){return r||(r=t.toDOM(e),t.editable||(r.contentEditable="false")),new n(r,i,t,s)}},Pe=class extends Q{constructor(t){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),super(e,0,t)}get isHidden(){return!0}get overrideDOMText(){return R.empty}coordsIn(t){return this.dom.getBoundingClientRect()}},Gs=class{constructor(t){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=t}advance(t,e,i){let{tile:s,index:r,beforeBreak:o,parents:l}=this;for(;t||e>0;)if(s.isComposite())if(o){if(!t)break;i&&i.break(),t--,o=!1}else if(r==s.children.length){if(!t&&!l.length)break;i&&i.leave(s),o=!!s.breakAfter,{tile:s,index:r}=l.pop(),r++}else{let a=s.children[r],h=a.breakAfter;(e>0?a.length<=t:a.length<t)&&(!i||i.skip(a,0,a.length)!==!1||!a.isComposite)?(o=!!h,r++,t-=a.length):(l.push({tile:s,index:r}),s=a,r=0,i&&a.isComposite()&&i.enter(a))}else if(r==s.length)o=!!s.breakAfter,{tile:s,index:r}=l.pop(),r++;else if(t){let a=Math.min(t,s.length-r);i&&i.skip(s,r,r+a),t-=a,r+=a}else break;return this.tile=s,this.index=r,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}},Js=class{constructor(t,e,i,s){this.from=t,this.to=e,this.wrapper=i,this.rank=s}},tn=class{constructor(t,e,i){this.cache=t,this.root=e,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(t,e,i,s){var r;this.flushBuffer();let o=this.ensureMarks(e,i),l=o.lastChild;if(l&&l.isText()&&!(l.flags&8)){this.cache.reused.set(l,2);let a=o.children[o.children.length-1]=new re(l.dom,l.text+t);a.parent=o}else o.append(s||re.of(t,(r=this.cache.find(re))===null||r===void 0?void 0:r.dom));this.pos+=t.length,this.afterWidget=null}addComposition(t,e){let i=this.curLine;i.dom!=e.line.dom&&(i.setDOM(this.cache.reused.has(e.line)?qs(e.line.dom):e.line.dom),this.cache.reused.set(e.line,2));let s=i;for(let l=e.marks.length-1;l>=0;l--){let a=e.marks[l],h=s.lastChild;if(h instanceof nt&&h.mark.eq(a.mark))h.dom!=a.dom&&h.setDOM(qs(a.dom)),s=h;else{if(this.cache.reused.get(a)){let c=Q.get(a.dom);c&&c.setDOM(qs(a.dom))}let f=nt.of(a.mark,a.dom);s.append(f),s=f}this.cache.reused.set(a,2)}let r=Q.get(t.text);r&&this.cache.reused.set(r,2);let o=new re(t.text,t.text.nodeValue);o.flags|=8,s.append(o)}addInlineWidget(t,e,i){let s=this.afterWidget&&t.flags&48&&(this.afterWidget.flags&48)==(t.flags&48);s||this.flushBuffer();let r=this.ensureMarks(e,i);!s&&!(t.flags&16)&&r.append(this.getBuffer(1)),r.append(t),this.pos+=t.length,this.afterWidget=t}addMark(t,e,i){this.flushBuffer(),this.ensureMarks(e,i).append(t),this.pos+=t.length,this.afterWidget=null}addBlockWidget(t){this.getBlockPos().append(t),this.pos+=t.length,this.lastBlock=t,this.endLine()}continueWidget(t){let e=this.afterWidget||this.lastBlock;e.length+=t,this.pos+=t}addLineStart(t,e){var i;t||(t=Ro);let s=Ae.start(t,e||((i=this.cache.find(Ae))===null||i===void 0?void 0:i.dom),!!e);this.getBlockPos().append(this.lastBlock=this.curLine=s)}addLine(t){this.getBlockPos().append(t),this.pos+=t.length,this.lastBlock=t,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(t){this.blockPosCovered()||this.addLineStart(t)}ensureLine(t){this.curLine||this.addLineStart(t)}ensureMarks(t,e){var i;let s=this.curLine;for(let r=t.length-1;r>=0;r--){let o=t[r],l;if(e>0&&(l=s.lastChild)&&l instanceof nt&&l.mark.eq(o))s=l,e--;else{let a=nt.of(o,(i=this.cache.find(nt,h=>h.mark.eq(o)))===null||i===void 0?void 0:i.dom);s.append(a),s=a,e=0}}return s}endLine(){if(this.curLine){this.flushBuffer();let t=this.curLine.lastChild;(!t||!Wr(this.curLine,!1)||t.dom.nodeName!="BR"&&t.isWidget()&&!(y.ios&&Wr(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(zs,0,32)||new he(zs.toDOM(),0,zs,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let t=this.wrappers.length-1;t>=0;t--)this.wrappers[t].to<this.pos&&this.wrappers.splice(t,1);for(let t=this.blockWrappers;t.value&&t.from<=this.pos;t.next())if(t.to>=this.pos){let e=new Js(t.from,t.to,t.value,t.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-e.rank||this.wrappers[i-1].to-e.to)<0;)i--;this.wrappers.splice(i,0,e)}this.wrapperPos=this.pos}getBlockPos(){var t;this.updateBlockWrappers();let e=this.root;for(let i of this.wrappers){let s=e.lastChild;if(i.from<this.pos&&s instanceof Ft&&s.wrapper.eq(i.wrapper))e=s;else{let r=Ft.of(i.wrapper,(t=this.cache.find(Ft,o=>o.wrapper.eq(i.wrapper)))===null||t===void 0?void 0:t.dom);e.append(r),e=r}}return e}blockPosCovered(){let t=this.lastBlock;return t!=null&&!t.breakAfter&&(!t.isWidget()||(t.flags&160)>0)}getBuffer(t){let e=2|(t<0?16:32),i=this.cache.find(Pe,void 0,1);return i&&(i.flags=e),i||new Pe(e)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}},en=class{constructor(t){this.skipCount=0,this.text="",this.textOff=0,this.cursor=t.iter()}skip(t){this.textOff+t<=this.text.length?this.textOff+=t:(this.skipCount+=t-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(t){if(this.textOff==this.text.length){let{value:s,lineBreak:r,done:o}=this.cursor.next(this.skipCount);if(this.skipCount=0,o)throw new Error("Ran out of text content when drawing inline views");this.text=s;let l=this.textOff=Math.min(t,s.length);return r?null:s.slice(0,l)}let e=Math.min(this.text.length,this.textOff+t),i=this.text.slice(this.textOff,e);return this.textOff=e,i}},Fi=[he,Ae,re,nt,Pe,Ft,Ce];for(let n=0;n<Fi.length;n++)Fi[n].bucket=n;var sn=class{constructor(t){this.view=t,this.buckets=Fi.map(()=>[]),this.index=Fi.map(()=>0),this.reused=new Map}add(t){let e=t.constructor.bucket,i=this.buckets[e];i.length<6?i.push(t):i[this.index[e]=(this.index[e]+1)%6]=t}find(t,e,i=2){let s=t.bucket,r=this.buckets[s],o=this.index[s];for(let l=r.length-1;l>=0;l--){let a=(l+o)%r.length,h=r[a];if((!e||e(h))&&!this.reused.has(h))return r.splice(a,1),a<o&&this.index[s]--,this.reused.set(h,i),h}return null}findWidget(t,e,i){let s=this.buckets[0];if(s.length)for(let r=0,o=0;;r++){if(r==s.length){if(o)return null;o=1,r=0}let l=s[r];if(!this.reused.has(l)&&(o==0?l.widget.compare(t):l.widget.constructor==t.constructor&&t.updateDOM(l.dom,this.view)))return s.splice(r,1),r<this.index[0]&&this.index[0]--,l.widget==t&&l.length==e&&(l.flags&497)==i?(this.reused.set(l,1),l):(this.reused.set(l,2),new he(l.dom,e,t,l.flags&-498|i))}}reuse(t){return this.reused.set(t,1),t}maybeReuse(t,e=2){if(!this.reused.has(t))return this.reused.set(t,e),t.dom}clear(){for(let t=0;t<this.buckets.length;t++)this.buckets[t].length=this.index[t]=0}},nn=class{constructor(t,e,i,s,r){this.view=t,this.decorations=s,this.disallowBlockEffectsFor=r,this.openWidget=!1,this.openMarks=0,this.cache=new sn(t),this.text=new en(t.state.doc),this.builder=new tn(this.cache,new Ce(t,t.contentDOM),W.iter(i)),this.cache.reused.set(e,2),this.old=new Gs(e),this.reuseWalker={skip:(o,l,a)=>{if(this.cache.add(o),o.isComposite())return!1},enter:o=>this.cache.add(o),leave:()=>{},break:()=>{}}}run(t,e){let i=e&&this.getCompositionContext(e.text);for(let s=0,r=0,o=0;;){let l=o<t.length?t[o++]:null,a=l?l.fromA:this.old.root.length;if(a>s){let h=a-s;this.preserve(h,!o,!l),s=a,r+=h}if(!l)break;e&&l.fromA<=e.range.fromA&&l.toA>=e.range.toA?(this.forward(l.fromA,e.range.fromA,e.range.fromA<e.range.toA?1:-1),this.emit(r,e.range.fromB),this.cache.clear(),this.builder.addComposition(e,i),this.text.skip(e.range.toB-e.range.fromB),this.forward(e.range.fromA,l.toA),this.emit(e.range.toB,l.toB)):(this.forward(l.fromA,l.toA),this.emit(r,l.toB)),r=l.toB,s=l.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(t,e,i){let s=oa(this.old),r=this.openMarks;this.old.advance(t,i?1:-1,{skip:(o,l,a)=>{if(o.isWidget())if(this.openWidget)this.builder.continueWidget(a-l);else{let h=a>0||l<o.length?he.of(o.widget,this.view,a-l,o.flags&496,this.cache.maybeReuse(o)):this.cache.reuse(o);h.flags&256?(h.flags&=-2,this.builder.addBlockWidget(h)):(this.builder.ensureLine(null),this.builder.addInlineWidget(h,s,r),r=s.length)}else if(o.isText())this.builder.ensureLine(null),!l&&a==o.length?this.builder.addText(o.text,s,r,this.cache.reuse(o)):(this.cache.add(o),this.builder.addText(o.text.slice(l,a),s,r)),r=s.length;else if(o.isLine())o.flags&=-2,this.cache.reused.set(o,1),this.builder.addLine(o);else if(o instanceof Pe)this.cache.add(o);else if(o instanceof nt)this.builder.ensureLine(null),this.builder.addMark(o,s,r),this.cache.reused.set(o,1),r=s.length;else return!1;this.openWidget=!1},enter:o=>{o.isLine()?this.builder.addLineStart(o.attrs,this.cache.maybeReuse(o)):(this.cache.add(o),o instanceof nt&&s.unshift(o.mark)),this.openWidget=!1},leave:o=>{o.isLine()?s.length&&(s.length=r=0):o instanceof nt&&(s.shift(),r=Math.min(r,s.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(t)}emit(t,e){let i=null,s=this.builder,r=0,o=W.spans(this.decorations,t,e,{point:(l,a,h,f,c,u)=>{if(h instanceof le){if(this.disallowBlockEffectsFor[u]){if(h.block)throw new RangeError("Block decorations may not be specified via plugins");if(a>this.view.state.doc.lineAt(l).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(r=f.length,c>f.length)s.continueWidget(a-l);else{let d=h.widget||(h.block?Xt.block:Xt.inline),p=na(h),g=this.cache.findWidget(d,a-l,p)||he.of(d,this.view,a-l,p);h.block?(h.startSide>0&&s.addLineStartIfNotCovered(i),s.addBlockWidget(g)):(s.ensureLine(i),s.addInlineWidget(g,f,c))}i=null}else i=ra(i,h);a>l&&this.text.skip(a-l)},span:(l,a,h,f)=>{for(let c=l;c<a;){let u=this.text.next(Math.min(512,a-c));u==null?(s.addLineStartIfNotCovered(i),s.addBreak(),c++):(s.ensureLine(i),s.addText(u,h,f),c+=u.length),i=null}}});s.addLineStartIfNotCovered(i),this.openWidget=o>r,this.openMarks=o}forward(t,e,i=1){e-t<=10?this.old.advance(e-t,i,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(e-t-10,-1),this.old.advance(5,i,this.reuseWalker))}getCompositionContext(t){let e=[],i=null;for(let s=t.parentNode;;s=s.parentNode){let r=Q.get(s);if(s==this.view.contentDOM)break;r instanceof nt?e.push(r):r?.isLine()?i=r:s.nodeName=="DIV"&&!i&&s!=this.view.contentDOM?i=new Ae(s,Ro):e.push(nt.of(new ii({tagName:s.nodeName.toLowerCase(),attributes:Il(s)}),s))}return{line:i,marks:e}}};function Wr(n,t){let e=i=>{for(let s of i.children)if((t?s.isText():s.length)||e(s))return!0;return!1};return e(n)}function na(n){let t=n.isReplace?(n.startSide<0?64:0)|(n.endSide>0?128:0):n.startSide>0?32:16;return n.block&&(t|=256),t}var Ro={class:"cm-line"};function ra(n,t){let e=t.spec.attributes,i=t.spec.class;return!e&&!i||(n||(n={class:"cm-line"}),e&&On(e,n),i&&(n.class+=" "+i)),n}function oa(n){let t=[];for(let e=n.parents.length;e>1;e--){let i=e==n.parents.length?n.tile:n.parents[e].tile;i instanceof nt&&t.push(i.mark)}return t}function qs(n){let t=Q.get(n);return t&&t.setDOM(n.cloneNode()),n}var Xt=class extends oe{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}};Xt.inline=new Xt("span");Xt.block=new Xt("div");var zs=new class extends oe{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}},Hi=class{constructor(t){this.view=t,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=U.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Ce(t,t.contentDOM),this.updateInner([new yt(0,0,0,t.state.doc.length)],null)}update(t){var e;let i=t.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:f,toA:c})=>c<this.minWidthFrom||f>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((e=this.domChanged)===null||e===void 0)&&e.newSel?s=this.domChanged.newSel.head:!pa(t.changes,this.hasComposition)&&!t.selectionSet&&(s=t.state.selection.main.head));let r=s>-1?aa(this.view,t.changes,s):null;if(this.domChanged=null,this.hasComposition){let{from:f,to:c}=this.hasComposition;i=new yt(f,c,t.changes.mapPos(f,-1),t.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(y.ie||y.chrome)&&!r&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.blockWrappers;this.updateDeco();let a=ca(o,this.decorations,t.changes);a.length&&(i=yt.extendWithRanges(i,a));let h=ua(l,this.blockWrappers,t.changes);return h.length&&(i=yt.extendWithRanges(i,h)),r&&!i.some(f=>f.fromA<=r.range.fromA&&f.toA>=r.range.toA)&&(i=r.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,r),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(e||t.length){let o=this.tile,l=new nn(this.view,o,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=l.run(t,e),rn(o,l.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let r=y.chrome||y.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(r),r&&(r.written||i.selectionRange.focusNode!=r.node||!this.tile.dom.contains(r.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let r of this.tile.children)r.isWidget()&&r.widget instanceof Je&&s.push(r.dom);i.updateGaps(s)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let i of e.effects)i.is(Co)&&(this.editContextFormatting=i.value)}updateSelection(t=!1,e=!1){(t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,s=this.view.root.activeElement,r=s==i,o=!r&&!(this.view.state.facet(Et)||i.tabIndex>-1)&&Ye(i,this.view.observer.selectionRange)&&!(s&&i.contains(s));if(!(r||e||o))return;let l=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,h,f;if(a.empty?f=h=this.inlineDOMNearPos(a.anchor,a.assoc||1):(f=this.inlineDOMNearPos(a.head,a.head==a.from?1:-1),h=this.inlineDOMNearPos(a.anchor,a.anchor==a.from?1:-1)),y.gecko&&a.empty&&!this.hasComposition&&la(h)){let u=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(u,h.node.childNodes[h.offset]||null)),h=f=new At(u,0),l=!0}let c=this.view.observer.selectionRange;(l||!c.focusNode||(!Ue(h.node,h.offset,c.anchorNode,c.anchorOffset)||!Ue(f.node,f.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{y.android&&y.chrome&&i.contains(c.focusNode)&&da(c.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let u=Se(this.view.root);if(u)if(a.empty){if(y.gecko){let d=ha(h.node,h.offset);if(d&&d!=3){let p=(d==1?fo:co)(h.node,h.offset);p&&(h=new At(p.node,p.offset))}}u.collapse(h.node,h.offset),a.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=a.bidiLevel)}else if(u.extend){u.collapse(h.node,h.offset);try{u.extend(f.node,f.offset)}catch{}}else{let d=document.createRange();a.anchor>a.head&&([h,f]=[f,h]),d.setEnd(f.node,f.offset),d.setStart(h.node,h.offset),u.removeAllRanges(),u.addRange(d)}o&&this.view.root.activeElement==i&&(i.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(h,f)),this.impreciseAnchor=h.precise?null:new At(c.anchorNode,c.anchorOffset),this.impreciseHead=f.precise?null:new At(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&Ue(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,i=Se(t.root),{anchorNode:s,anchorOffset:r}=t.observer.selectionRange;if(!i||!e.empty||!e.assoc||!i.modify)return;let o=this.lineAt(e.head,e.assoc);if(!o)return;let l=o.posAtStart;if(e.head==l||e.head==l+o.length)return;let a=this.coordsAt(e.head,-1),h=this.coordsAt(e.head,1);if(!a||!h||a.bottom>h.top)return;let f=this.domAtPos(e.head+e.assoc,e.assoc);i.collapse(f.node,f.offset),i.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let c=t.observer.selectionRange;t.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=e.from&&i.collapse(s,r)}posFromDOM(t,e){let i=this.tile.nearest(t);if(!i)return this.tile.dom.compareDocumentPosition(t)&2?0:this.view.state.doc.length;let s=i.posAtStart;if(i.isComposite()){let r;if(t==i.dom)r=i.dom.childNodes[e];else{let o=Lt(t)==0?0:e==0?-1:1;for(;;){let l=t.parentNode;if(l==i.dom)break;o==0&&l.firstChild!=l.lastChild&&(t==l.firstChild?o=-1:o=1),t=l}o<0?r=t:r=t.nextSibling}if(r==i.dom.firstChild)return s;for(;r&&!Q.get(r);)r=r.nextSibling;if(!r)return s+i.length;for(let o=0,l=s;;o++){let a=i.children[o];if(a.dom==r)return l;l+=a.length+a.breakAfter}}else return i.isText()?t==i.dom?s+e:s+(e?i.length:0):s}domAtPos(t,e){let{tile:i,offset:s}=this.tile.resolveBlock(t,e);return i.isWidget()?i.domPosFor(t,e):i.domIn(s,e)}inlineDOMNearPos(t,e){let i,s=-1,r=!1,o,l=-1,a=!1;return this.tile.blockTiles((h,f)=>{if(h.isWidget()){if(h.flags&32&&f>=t)return!0;h.flags&16&&(r=!0)}else{let c=f+h.length;if(f<=t&&(i=h,s=t-f,r=c<t),c>=t&&!o&&(o=h,l=t-f,a=f>t),f>t&&o)return!0}}),!i&&!o?this.domAtPos(t,e):(r&&o?i=null:a&&i&&(o=null),i&&e<0||!o?i.domIn(s,e):o.domIn(l,e))}coordsAt(t,e){let{tile:i,offset:s}=this.tile.resolveBlock(t,e);return i.isWidget()?i.widget instanceof Je?null:i.coordsInWidget(s,e,!0):i.coordsIn(s,e)}lineAt(t,e){let{tile:i}=this.tile.resolveBlock(t,e);return i.isLine()?i:null}coordsForChar(t){let{tile:e,offset:i}=this.tile.resolveBlock(t,1);if(!e.isLine())return null;function s(r,o){if(r.isComposite())for(let l of r.children){if(l.length>=o){let a=s(l,o);if(a)return a}if(o-=l.length,o<0)break}else if(r.isText()&&o<r.length){let l=ct(r.text,o);if(l==o)return null;let a=ni(r.dom,o,l).getClientRects();for(let h=0;h<a.length;h++){let f=a[h];if(h==a.length-1||f.top<f.bottom&&f.left<f.right)return f}}return null}return s(e,i)}measureVisibleLineHeights(t){let e=[],{from:i,to:s}=t,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Y.LTR,h=0,f=(c,u,d)=>{for(let p=0;p<c.children.length&&!(u>s);p++){let g=c.children[p],m=u+g.length,w=g.dom.getBoundingClientRect(),{height:C}=w;if(d&&!p&&(h+=w.top-d.top),g instanceof Ft)m>i&&f(g,u,w);else if(u>=i&&(h>0&&e.push(-h),e.push(C+h),h=0,o)){let v=g.dom.lastChild,E=v?Ei(v):[];if(E.length){let A=E[E.length-1],M=a?A.right-w.left:w.right-A.left;M>l&&(l=M,this.minWidth=r,this.minWidthFrom=u,this.minWidthTo=m)}}d&&p==c.children.length-1&&(h+=d.bottom-w.bottom),u=m+g.breakAfter}};return f(this.tile,0,null),e}textDirectionAt(t){let{tile:e}=this.tile.resolveBlock(t,1);return getComputedStyle(e.dom).direction=="rtl"?Y.RTL:Y.LTR}measureTextSize(){let t=this.tile.blockTiles(o=>{if(o.isLine()&&o.children.length&&o.length<=20){let l=0,a;for(let h of o.children){if(!h.isText()||/[^ -~]/.test(h.text))return;let f=Ei(h.dom);if(f.length!=1)return;l+=f[0].width,a=f[0].height}if(l)return{lineHeight:o.dom.getBoundingClientRect().height,charWidth:l/o.length,textHeight:a}}});if(t)return t;let e=document.createElement("div"),i,s,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(e);let o=Ei(e.firstChild)[0];i=e.getBoundingClientRect().height,s=o&&o.width?o.width/27:7,r=o&&o.height?o.height:i,e.remove()}),{lineHeight:i,charWidth:s,textHeight:r}}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let i=0,s=0;;s++){let r=s==e.viewports.length?null:e.viewports[s],o=r?r.from-1:this.view.state.doc.length;if(o>i){let l=(e.lineBlockAt(o).bottom-e.lineBlockAt(i).top)/this.view.scaleY;t.push(U.replace({widget:new Je(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return U.set(t)}updateDeco(){let t=1,e=this.view.state.facet(Ui).map(r=>(this.dynamicDecorationMap[t++]=typeof r=="function")?r(this.view):r),i=!1,s=this.view.state.facet(Dn).map((r,o)=>{let l=typeof r=="function";return l&&(i=!0),l?r(this.view):r});for(s.length&&(this.dynamicDecorationMap[t++]=i,e.push(W.join(s))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;this.blockWrappers=this.view.state.facet(Po).map(r=>typeof r=="function"?r(this.view):r)}scrollIntoView(t){if(t.isSnapshot){let h=this.view.viewState.lineBlockAt(t.range.head);this.view.scrollDOM.scrollTop=h.top-t.yMargin,this.view.scrollDOM.scrollLeft=t.xMargin;return}for(let h of this.view.state.facet(Oo))try{if(h(this.view,t.range,t))return!0}catch(f){xt(this.view.state,f,"scroll handler")}let{range:e}=t,i=this.coordsAt(e.head,e.empty?e.assoc:e.head>e.anchor?-1:1),s;if(!i)return;!e.empty&&(s=this.coordsAt(e.anchor,e.anchor>e.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let r=Do(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;Wl(this.view.scrollDOM,o,e.head<e.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,l),-l),Math.max(Math.min(t.yMargin,a),-a),this.view.textDirection==Y.LTR)}lineHasWidget(t){let e=i=>i.isWidget()||i.children.some(e);return e(this.tile.resolveBlock(t,1).tile)}destroy(){rn(this.tile)}};function rn(n,t){let e=t?.get(n);if(e!=1){e==null&&n.destroy();for(let i of n.children)rn(i,t)}}function la(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Bo(n,t){let e=n.observer.selectionRange;if(!e.focusNode)return null;let i=fo(e.focusNode,e.focusOffset),s=co(e.focusNode,e.focusOffset),r=i||s;if(s&&i&&s.node!=i.node){let l=Q.get(s.node);if(!l||l.isText()&&l.text!=s.node.nodeValue)r=s;else if(n.docView.lastCompositionAfterCursor){let a=Q.get(i.node);!a||a.isText()&&a.text!=i.node.nodeValue||(r=s)}}if(n.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=t-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function aa(n,t,e){let i=Bo(n,e);if(!i)return null;let{node:s,from:r,to:o}=i,l=s.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(i.from,i.to)!=l)return null;let a=t.invertedDesc;return{range:new yt(a.mapPos(r),a.mapPos(o),r,o),text:s}}function ha(n,t){return n.nodeType!=1?0:(t&&n.childNodes[t-1].contentEditable=="false"?1:0)|(t<n.childNodes.length&&n.childNodes[t].contentEditable=="false"?2:0)}var fa=class{constructor(){this.changes=[]}compareRange(t,e){$e(t,e,this.changes)}comparePoint(t,e){$e(t,e,this.changes)}boundChange(t){$e(t,t,this.changes)}};function ca(n,t,e){let i=new fa;return W.compare(n,t,e,i),i.changes}var on=class{constructor(){this.changes=[]}compareRange(t,e){$e(t,e,this.changes)}comparePoint(){}boundChange(t){$e(t,t,this.changes)}};function ua(n,t,e){let i=new on;return W.compare(n,t,e,i),i.changes}function da(n,t){for(let e=n;e&&e!=t;e=e.assignedSlot||e.parentNode)if(e.nodeType==1&&e.contentEditable=="false")return!0;return!1}function pa(n,t){let e=!1;return t&&n.iterChangedRanges((i,s)=>{i<t.to&&s>t.from&&(e=!0)}),e}var Je=class extends oe{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}};function ga(n,t,e=1){let i=n.charCategorizer(t),s=n.doc.lineAt(t),r=t-s.from;if(s.length==0)return k.cursor(t);r==0?e=1:r==s.length&&(e=-1);let o=r,l=r;e<0?o=ct(s.text,r,!1):l=ct(s.text,r);let a=i(s.text.slice(o,l));for(;o>0;){let h=ct(s.text,o,!1);if(i(s.text.slice(h,o))!=a)break;o=h}for(;l<s.length;){let h=ct(s.text,l);if(i(s.text.slice(l,h))!=a)break;l=h}return k.range(o+s.from,l+s.from)}function ma(n,t,e,i,s){let r=Math.round((i-t.left)*n.defaultCharacterWidth);if(n.lineWrapping&&e.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,a=Math.floor((s-e.top-(n.defaultLineHeight-l)*.5)/l);r+=a*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(e.from,e.to);return e.from+Pr(o,r,n.state.tabSize)}function wa(n,t,e){let i=n.lineBlockAt(t);if(Array.isArray(i.type)){let s;for(let r of i.type){if(r.from>t)break;if(!(r.to<t)){if(r.from<t&&r.to>t)return r;(!s||r.type==gt.Text&&(s.type!=r.type||(e<0?r.from<t:r.to>t)))&&(s=r)}}return s||i}return i}function ba(n,t,e,i){let s=wa(n,t.head,t.assoc||-1),r=!i||s.type!=gt.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(t.assoc<0&&t.head>s.from?t.head-1:t.head);if(r){let o=n.dom.getBoundingClientRect(),l=n.textDirectionAt(s.from),a=n.posAtCoords({x:e==(l==Y.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return k.cursor(a,e?-1:1)}return k.cursor(e?s.to:s.from,e?-1:1)}function Fr(n,t,e,i){let s=n.state.doc.lineAt(t.head),r=n.bidiSpans(s),o=n.textDirectionAt(s.from);for(let l=t,a=null;;){let h=_l(s,r,o,l,e),f=wo;if(!h){if(s.number==(e?n.state.doc.lines:1))return l;f=`
`,s=n.state.doc.line(s.number+(e?1:-1)),r=n.bidiSpans(s),h=n.visualLineSide(s,!e)}if(a){if(!a(f))return l}else{if(!i)return h;a=i(f)}l=h}}function xa(n,t,e){let i=n.state.charCategorizer(t),s=i(e);return r=>{let o=i(r);return s==vt.Space&&(s=o),s==o}}function ya(n,t,e,i){let s=t.head,r=e?1:-1;if(s==(e?n.state.doc.length:0))return k.cursor(s,t.assoc);let o=t.goalColumn,l,a=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(s,t.assoc||-1),f=n.documentTop;if(h)o==null&&(o=h.left-a.left),l=r<0?h.top:h.bottom;else{let p=n.viewState.lineBlockAt(s);o==null&&(o=Math.min(a.right-a.left,n.defaultCharacterWidth*(s-p.from))),l=(r<0?p.top:p.bottom)+f}let c=a.left+o,u=i??n.viewState.heightOracle.textHeight>>1,d=ln(n,{x:c,y:l+u*r},!1,r);return k.cursor(d.pos,d.assoc,void 0,o)}function ti(n,t,e){for(;;){let i=0;for(let s of n)s.between(t-1,t+1,(r,o,l)=>{if(t>r&&t<o){let a=i||e||(t-r<o-t?-1:1);t=a<0?r:o,i=a}});if(!i)return t}}function Eo(n,t){let e=null;for(let i=0;i<t.ranges.length;i++){let s=t.ranges[i],r=null;if(s.empty){let o=ti(n,s.from,0);o!=s.from&&(r=k.cursor(o,-1))}else{let o=ti(n,s.from,-1),l=ti(n,s.to,1);(o!=s.from||l!=s.to)&&(r=k.range(s.from==s.anchor?o:l,s.from==s.head?o:l))}r&&(e||(e=t.ranges.slice()),e[i]=r)}return e?k.create(e,t.mainIndex):t}function Ws(n,t,e){let i=ti(n.state.facet(ri).map(s=>s(n)),e.from,t.head>e.from?-1:1);return i==e.from?e:k.cursor(i,i<e.from?1:-1)}var pt=class{constructor(t,e){this.pos=t,this.assoc=e}};function ln(n,t,e,i){let s=n.contentDOM.getBoundingClientRect(),r=s.top+n.viewState.paddingTop,{x:o,y:l}=t,a=l-r,h;for(;;){if(a<0)return new pt(0,1);if(a>n.viewState.docHeight)return new pt(n.state.doc.length,-1);if(h=n.elementAtHeight(a),i==null)break;if(h.type==gt.Text){let u=n.docView.coordsAt(i<0?h.from:h.to,i);if(u&&(i<0?u.top<=a+r:u.bottom>=a+r))break}let c=n.viewState.heightOracle.textHeight/2;a=i>0?h.bottom+c:h.top-c}if(n.viewport.from>=h.to||n.viewport.to<=h.from){if(e)return null;if(h.type==gt.Text){let c=ma(n,s,h,o,l);return new pt(c,c==h.from?1:-1)}}if(h.type!=gt.Text)return a<(h.top+h.bottom)/2?new pt(h.from,1):new pt(h.to,-1);let f=n.docView.lineAt(h.from,2);return(!f||f.length!=h.length)&&(f=n.docView.lineAt(h.from,-2)),Lo(n,f,h.from,o,l)}function Lo(n,t,e,i,s){let r=-1,o=null,l=1e9,a=1e9,h=s,f=s,c=(u,d)=>{for(let p=0;p<u.length;p++){let g=u[p];if(g.top==g.bottom)continue;let m=g.left>i?g.left-i:g.right<i?i-g.right:0,w=g.top>s?g.top-s:g.bottom<s?s-g.bottom:0;g.top<=f&&g.bottom>=h&&(h=Math.min(g.top,h),f=Math.max(g.bottom,f),w=0),(r<0||(w-a||m-l)<0)&&(r>=0&&a&&l<m&&o.top<=f-2&&o.bottom>=h+2?a=0:(r=d,l=m,a=w,o=g))}};if(t.isText()){for(let d=0;d<t.length;){let p=ct(t.text,d);if(c(ni(t.dom,d,p).getClientRects(),d),!l&&!a)break;d=p}return i>(o.left+o.right)/2==(Hr(n,r+e)==Y.LTR)?new pt(e+ct(t.text,r),-1):new pt(e+r,1)}else{if(!t.length)return new pt(e,1);for(let g=0;g<t.children.length;g++){let m=t.children[g];if(m.flags&48)continue;let w=(m.dom.nodeType==1?m.dom:ni(m.dom,0,m.length)).getClientRects();if(c(w,g),!l&&!a)break}let u=t.children[r],d=t.posBefore(u,e);return u.isComposite()||u.isText()?Lo(n,u,d,Math.max(o.left,Math.min(o.right,i)),s):i>(o.left+o.right)/2==(Hr(n,r+e)==Y.LTR)?new pt(d+u.length,-1):new pt(d,1)}}function Hr(n,t){let e=n.state.doc.lineAt(t);return n.bidiSpans(e)[bt.find(n.bidiSpans(e),t-e.from,-1,1)].dir}var je="\uFFFF",an=class{constructor(t,e){this.points=t,this.view=e,this.text="",this.lineSeparator=e.state.facet(j.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=je}readRange(t,e){if(!t)return this;let i=t.parentNode;for(let s=t;;){this.findPointBefore(i,s);let r=this.text.length;this.readNode(s);let o=Q.get(s),l=s.nextSibling;if(l==e){o?.breakAfter&&!l&&i!=this.view.contentDOM&&this.lineBreak();break}let a=Q.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:qi(s))||qi(l)&&(s.nodeName!="BR"||o?.isWidget())&&this.text.length>r)&&!ka(l,e)&&this.lineBreak(),s=l}return this.findPointBefore(i,e),this}readTextNode(t){let e=t.nodeValue;for(let i of this.points)i.node==t&&(i.pos=this.text.length+Math.min(i.offset,e.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=e.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=s.exec(e))&&(r=l.index,o=l[0].length),this.append(e.slice(i,r<0?e.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==t&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(t){let e=Q.get(t),i=e&&e.overrideDOMText;if(i!=null){this.findPointInside(t,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let i of this.points)i.node==t&&t.childNodes[i.offset]==e&&(i.pos=this.text.length)}findPointInside(t,e){for(let i of this.points)(t.nodeType==3?i.node==t:t.contains(i.node))&&(i.pos=this.text.length+($a(t,i.node,i.offset)?e:0))}};function $a(n,t,e){for(;;){if(!t||e<Lt(t))return!1;if(t==n)return!0;e=Vt(t)+1,t=t.parentNode}}function ka(n,t){let e;for(;!(n==t||!n);n=n.nextSibling){let i=Q.get(n);if(!i?.isWidget())return!1;i&&(e||(e=[])).push(i)}if(e)for(let i of e){let s=i.overrideDOMText;if(s?.length)return!1}return!0}var Vi=class{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}},hn=class{constructor(t,e,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:r,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=No(t.docView.tile,e,i,0))){let l=r||o?[]:va(t),a=new an(l,t);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=Oa(l,this.bounds.from)}else{let l=t.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!Zs(t.contentDOM,l.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(l.focusNode,l.focusOffset),h=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Zs(t.contentDOM,l.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(l.anchorNode,l.anchorOffset),f=t.viewport;if((y.ios||y.chrome)&&t.state.selection.main.empty&&a!=h&&(f.from>0||f.to<t.state.doc.length)){let c=Math.min(a,h),u=Math.max(a,h),d=f.from-c,p=f.to-u;(d==0||d==1||c==0)&&(p==0||p==-1||u==t.state.doc.length)&&(a=0,h=t.state.doc.length)}t.inputState.composing>-1&&t.state.selection.ranges.length>1?this.newSel=t.state.selection.replaceRange(k.range(h,a)):this.newSel=k.single(h,a)}}};function No(n,t,e,i){if(n.isComposite()){let s=-1,r=-1,o=-1,l=-1;for(let a=0,h=i,f=i;a<n.children.length;a++){let c=n.children[a],u=h+c.length;if(h<t&&u>e)return No(c,t,e,h);if(u>=t&&s==-1&&(s=a,r=h),h>e&&c.dom.parentNode==n.dom){o=a,l=f;break}f=u,h=u+c.breakAfter}return{from:r,to:l<0?i+n.length:l,startDOM:(s?n.children[s-1].dom.nextSibling:null)||n.dom.firstChild,endDOM:o<n.children.length&&o>=0?n.children[o].dom:null}}else return n.isText()?{from:i,to:i+n.length,startDOM:n.dom,endDOM:n.dom.nextSibling}:null}function Io(n,t){let e,{newSel:i}=t,s=n.state.selection.main,r=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(t.bounds){let{from:o,to:l}=t.bounds,a=s.from,h=null;(r===8||y.android&&t.text.length<l-o)&&(a=s.to,h="end");let f=qo(n.state.doc.sliceString(o,l,je),t.text,a-o,h);f&&(y.chrome&&r==13&&f.toB==f.from+2&&t.text.slice(f.from,f.toB)==je+je&&f.toB--,e={from:o+f.from,to:o+f.toA,insert:R.of(t.text.slice(f.from,f.toB).split(je))})}else i&&(!n.hasFocus&&n.state.facet(Et)||Xi(i,s))&&(i=null);if(!e&&!i)return!1;if(!e&&t.typeOver&&!s.empty&&i&&i.main.empty?e={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:(y.mac||y.android)&&e&&e.from==e.to&&e.from==s.head-1&&/^\. ?$/.test(e.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&e.insert.length==2&&(i=k.single(i.main.anchor-1,i.main.head-1)),e={from:e.from,to:e.to,insert:R.of([e.insert.toString().replace("."," ")])}):e&&e.from>=s.from&&e.to<=s.to&&(e.from!=s.from||e.to!=s.to)&&s.to-s.from-(e.to-e.from)<=4?e={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,e.from).append(e.insert).append(n.state.doc.slice(e.to,s.to))}:n.state.doc.lineAt(s.from).to<s.to&&n.docView.lineHasWidget(s.to)&&n.inputState.insertingTextAt>Date.now()-50?e={from:s.from,to:s.to,insert:n.state.toText(n.inputState.insertingText)}:y.chrome&&e&&e.from==e.to&&e.from==s.head&&e.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=k.single(i.main.anchor-1,i.main.head-1)),e={from:s.from,to:s.to,insert:R.of([" "])}),e)return Rn(n,e,i,r);if(i&&!Xi(i,s)){let o=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),l=n.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=Eo(n.state.facet(ri).map(a=>a(n)),i))),n.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function Rn(n,t,e,i=-1){if(y.ios&&n.inputState.flushIOSKey(t))return!0;let s=n.state.selection.main;if(y.android&&(t.to==s.to&&(t.from==s.from||t.from==s.from-1&&n.state.sliceDoc(t.from,s.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&ke(n.contentDOM,"Enter",13)||(t.from==s.from-1&&t.to==s.to&&t.insert.length==0||i==8&&t.insert.length<t.to-t.from&&t.to>s.head)&&ke(n.contentDOM,"Backspace",8)||t.from==s.from&&t.to==s.to+1&&t.insert.length==0&&ke(n.contentDOM,"Delete",46)))return!0;let r=t.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,l=()=>o||(o=Sa(n,t,e));return n.state.facet(ko).some(a=>a(n,t.from,t.to,r,l))||n.dispatch(l()),!0}function Sa(n,t,e){let i,s=n.state,r=s.selection.main,o=-1;if(t.from==t.to&&t.from<r.from||t.from>r.to){let a=t.from<r.from?-1:1,h=a<0?r.from:r.to,f=ti(s.facet(ri).map(c=>c(n)),h,a);t.from==f&&(o=f)}if(o>-1)i={changes:t,selection:k.cursor(t.from+t.insert.length,-1)};else if(t.from>=r.from&&t.to<=r.to&&t.to-t.from>=(r.to-r.from)/3&&(!e||e.main.empty&&e.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let a=r.from<t.from?s.sliceDoc(r.from,t.from):"",h=r.to>t.to?s.sliceDoc(t.to,r.to):"";i=s.replaceSelection(n.state.toText(a+t.insert.sliceString(0,void 0,n.state.lineBreak)+h))}else{let a=s.changes(t),h=e&&e.main.to<=a.newLength?e.main:void 0;if(s.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&t.to<=r.to+10&&t.to>=r.to-10){let f=n.state.sliceDoc(t.from,t.to),c,u=e&&Bo(n,e.main.head);if(u){let p=t.insert.length-(t.to-t.from);c={from:u.from,to:u.to-p}}else c=n.state.doc.lineAt(r.head);let d=r.to-t.to;i=s.changeByRange(p=>{if(p.from==r.from&&p.to==r.to)return{changes:a,range:h||p.map(a)};let g=p.to-d,m=g-f.length;if(n.state.sliceDoc(m,g)!=f||g>=c.from&&m<=c.to)return{range:p};let w=s.changes({from:m,to:g,insert:t.insert}),C=p.to-r.to;return{changes:w,range:h?k.range(Math.max(0,h.anchor+C),Math.max(0,h.head+C)):p.map(w)}})}else i={changes:a,selection:h&&s.selection.replaceRange(h)}}let l="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,l+=".compose",n.inputState.compositionFirstChange&&(l+=".start",n.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:l,scrollIntoView:!0})}function qo(n,t,e,i){let s=Math.min(n.length,t.length),r=0;for(;r<s&&n.charCodeAt(r)==t.charCodeAt(r);)r++;if(r==s&&n.length==t.length)return null;let o=n.length,l=t.length;for(;o>0&&l>0&&n.charCodeAt(o-1)==t.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));e-=o+a-r}if(o<r&&n.length<t.length){let a=e<=r&&e>=o?r-e:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=e<=r&&e>=l?r-e:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function va(n){let t=[];if(n.root.activeElement!=n.contentDOM)return t;let{anchorNode:e,anchorOffset:i,focusNode:s,focusOffset:r}=n.observer.selectionRange;return e&&(t.push(new Vi(e,i)),(s!=e||r!=i)&&t.push(new Vi(s,r))),t}function Oa(n,t){if(n.length==0)return null;let e=n[0].pos,i=n.length==2?n[1].pos:e;return e>-1&&i>-1?k.single(e+t,i+t):null}function Xi(n,t){return t.head==n.main.head&&t.anchor==n.main.anchor}var fn=class{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,y.safari&&t.contentDOM.addEventListener("input",()=>null),y.gecko&&Wa(t.contentDOM.ownerDocument)}handleEvent(t){!Ba(this.view,t)||this.ignoreDuringComposition(t)||t.type=="keydown"&&this.keydown(t)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(t.type,t)):this.runHandlers(t.type,t))}runHandlers(t,e){let i=this.handlers[t];if(i){for(let s of i.observers)s(this.view,e);for(let s of i.handlers){if(e.defaultPrevented)break;if(s(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=Ca(t),i=this.handlers,s=this.view.contentDOM;for(let r in e)if(r!="scroll"){let o=!e[r].handlers.length,l=i[r];l&&o!=!l.handlers.length&&(s.removeEventListener(r,this.handleEvent),l=null),l||s.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!e[r]&&s.removeEventListener(r,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&t.keyCode!=27&&Pa.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),y.android&&y.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return y.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((e=zo.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||Aa.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=e||t,setTimeout(()=>this.flushIOSKey(),250),!0):(t.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(t){let e=this.pendingIOSKey;return!e||e.key=="Enter"&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString())?!1:(this.pendingIOSKey=void 0,ke(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!/^key/.test(t.type)||t.synthetic?!1:this.composing>0?!0:y.safari&&!y.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function Vr(n,t){return(e,i)=>{try{return t.call(n,i,e)}catch(s){xt(e.state,s)}}}function Ca(n){let t=Object.create(null);function e(i){return t[i]||(t[i]={observers:[],handlers:[]})}for(let i of n){let s=i.spec,r=s&&s.plugin.domEventHandlers,o=s&&s.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&e(l).handlers.push(Vr(i.value,a))}if(o)for(let l in o){let a=o[l];a&&e(l).observers.push(Vr(i.value,a))}}for(let i in $t)e(i).handlers.push($t[i]);for(let i in mt)e(i).observers.push(mt[i]);return t}var zo=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Aa="dthko",Pa=[16,17,18,20,91,92,224,225],Mi=6;function Ti(n){return Math.max(0,n)*.7+8}function Ma(n,t){return Math.max(Math.abs(n.clientX-t.clientX),Math.abs(n.clientY-t.clientY))}var cn=class{constructor(t,e,i,s){this.view=t,this.startEvent=e,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=Fl(t.contentDOM),this.atoms=t.state.facet(ri).map(o=>o(t));let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(j.allowMultipleSelections)&&Ta(t,e),this.dragging=Ra(t,e)&&Ho(e)==1?null:!1}start(t){this.dragging===!1&&this.select(t)}move(t){if(t.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Ma(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let e=0,i=0,s=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Do(this.view);t.clientX-a.left<=s+Mi?e=-Ti(s-t.clientX):t.clientX+a.right>=o-Mi&&(e=Ti(t.clientX-o)),t.clientY-a.top<=r+Mi?i=-Ti(r-t.clientY):t.clientY+a.bottom>=l-Mi&&(i=Ti(t.clientY-l)),this.setScrollSpeed(e,i)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),this.dragging===!1&&this.select(this.lastEvent)}select(t){let{view:e}=this,i=Eo(this.atoms,this.style.get(t,this.extend,this.multiple));(this.mustSelect||!i.eq(e.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}};function Ta(n,t){let e=n.state.facet(bo);return e.length?e[0](t):y.mac?t.metaKey:t.ctrlKey}function Da(n,t){let e=n.state.facet(xo);return e.length?e[0](t):y.mac?!t.altKey:!t.ctrlKey}function Ra(n,t){let{main:e}=n.state.selection;if(e.empty)return!1;let i=Se(n.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let r=0;r<s.length;r++){let o=s[r];if(o.left<=t.clientX&&o.right>=t.clientX&&o.top<=t.clientY&&o.bottom>=t.clientY)return!0}return!1}function Ba(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target,i;e!=n.contentDOM;e=e.parentNode)if(!e||e.nodeType==11||(i=Q.get(e))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(t))return!1;return!0}var $t=Object.create(null),mt=Object.create(null),Wo=y.ie&&y.ie_version<15||y.ios&&y.webkit_version<604;function Ea(n){let t=n.dom.parentNode;if(!t)return;let e=t.appendChild(document.createElement("textarea"));e.style.cssText="position: fixed; left: -10000px; top: 10px",e.focus(),setTimeout(()=>{n.focus(),e.remove(),Fo(n,e.value)},50)}function _i(n,t,e){for(let i of n.facet(t))e=i(e,n);return e}function Fo(n,t){t=_i(n.state,Pn,t);let{state:e}=n,i,s=1,r=e.toText(t),o=r.lines==e.selection.ranges.length;if(un!=null&&e.selection.ranges.every(a=>a.empty)&&un==r.toString()){let a=-1;i=e.changeByRange(h=>{let f=e.doc.lineAt(h.from);if(f.from==a)return{range:h};a=f.from;let c=e.toText((o?r.line(s++).text:t)+e.lineBreak);return{changes:{from:f.from,insert:c},range:k.cursor(h.from+c.length)}})}else o?i=e.changeByRange(a=>{let h=r.line(s++);return{changes:{from:a.from,to:a.to,insert:h.text},range:k.cursor(a.from+h.length)}}):i=e.replaceSelection(r);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}mt.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};$t.keydown=(n,t)=>(n.inputState.setSelectionOrigin("select"),t.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);mt.touchstart=(n,t)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};mt.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};$t.mousedown=(n,t)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let e=null;for(let i of n.state.facet(yo))if(e=i(n,t),e)break;if(!e&&t.button==0&&(e=Na(n,t)),e){let i=!n.hasFocus;n.inputState.startMouseSelection(new cn(n,t,e,i)),i&&n.observer.ignore(()=>{ao(n.contentDOM);let r=n.root.activeElement;r&&!r.contains(n.contentDOM)&&r.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(t),s.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function Xr(n,t,e,i){if(i==1)return k.cursor(t,e);if(i==2)return ga(n.state,t,e);{let s=n.docView.lineAt(t,e),r=n.state.doc.lineAt(s?s.posAtEnd:t),o=s?s.posAtStart:r.from,l=s?s.posAtEnd:r.to;return l<n.state.doc.length&&l==r.to&&l++,k.range(o,l)}}var La=y.ie&&y.ie_version<=11,Qr=null,Zr=0,jr=0;function Ho(n){if(!La)return n.detail;let t=Qr,e=jr;return Qr=n,jr=Date.now(),Zr=!t||e>Date.now()-400&&Math.abs(t.clientX-n.clientX)<2&&Math.abs(t.clientY-n.clientY)<2?(Zr+1)%3:1}function Na(n,t){let e=n.posAndSideAtCoords({x:t.clientX,y:t.clientY},!1),i=Ho(t),s=n.state.selection;return{update(r){r.docChanged&&(e.pos=r.changes.mapPos(e.pos),s=s.map(r.changes))},get(r,o,l){let a=n.posAndSideAtCoords({x:r.clientX,y:r.clientY},!1),h,f=Xr(n,a.pos,a.assoc,i);if(e.pos!=a.pos&&!o){let c=Xr(n,e.pos,e.assoc,i),u=Math.min(c.from,f.from),d=Math.max(c.to,f.to);f=u<f.from?k.range(u,d):k.range(d,u)}return o?s.replaceRange(s.main.extend(f.from,f.to)):l&&i==1&&s.ranges.length>1&&(h=Ia(s,a.pos))?h:l?s.addRange(f):k.create([f])}}}function Ia(n,t){for(let e=0;e<n.ranges.length;e++){let{from:i,to:s}=n.ranges[e];if(i<=t&&s>=t)return k.create(n.ranges.slice(0,e).concat(n.ranges.slice(e+1)),n.mainIndex==e?0:n.mainIndex-(n.mainIndex>e?1:0))}return null}$t.dragstart=(n,t)=>{let{selection:{main:e}}=n.state;if(t.target.draggable){let s=n.docView.tile.nearest(t.target);if(s&&s.isWidget()){let r=s.posAtStart,o=r+s.length;(r>=e.to||o<=e.from)&&(e=k.range(r,o))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=e,t.dataTransfer&&(t.dataTransfer.setData("Text",_i(n.state,Mn,n.state.sliceDoc(e.from,e.to))),t.dataTransfer.effectAllowed="copyMove"),!1};$t.dragend=n=>(n.inputState.draggedContent=null,!1);function Kr(n,t,e,i){if(e=_i(n.state,Pn,e),!e)return;let s=n.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:r}=n.inputState,o=i&&r&&Da(n,t)?{from:r.from,to:r.to}:null,l={from:s,insert:e},a=n.state.changes(o?[o,l]:l);n.focus(),n.dispatch({changes:a,selection:{anchor:a.mapPos(s,-1),head:a.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}$t.drop=(n,t)=>{if(!t.dataTransfer)return!1;if(n.state.readOnly)return!0;let e=t.dataTransfer.files;if(e&&e.length){let i=Array(e.length),s=0,r=()=>{++s==e.length&&Kr(n,t,i.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<e.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(e[o])}return!0}else{let i=t.dataTransfer.getData("Text");if(i)return Kr(n,t,i,!0),!0}return!1};$t.paste=(n,t)=>{if(n.state.readOnly)return!0;n.observer.flush();let e=Wo?null:t.clipboardData;return e?(Fo(n,e.getData("text/plain")||e.getData("text/uri-list")),!0):(Ea(n),!1)};function qa(n,t){let e=n.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function za(n){let t=[],e=[],i=!1;for(let s of n.selection.ranges)s.empty||(t.push(n.sliceDoc(s.from,s.to)),e.push(s));if(!t.length){let s=-1;for(let{from:r}of n.selection.ranges){let o=n.doc.lineAt(r);o.number>s&&(t.push(o.text),e.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),s=o.number}i=!0}return{text:_i(n,Mn,t.join(n.lineBreak)),ranges:e,linewise:i}}var un=null;$t.copy=$t.cut=(n,t)=>{let e=Se(n.root);if(e&&!Ye(n.contentDOM,e))return!1;let{text:i,ranges:s,linewise:r}=za(n.state);if(!i&&!r)return!1;un=r?i:null,t.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"});let o=Wo?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",i),!0):(qa(n,i),!1)};var Vo=Bt.define();function Xo(n,t){let e=[];for(let i of n.facet(So)){let s=i(n,t);s&&e.push(s)}return e.length?n.update({effects:e,annotations:Vo.of(!0)}):null}function Qo(n){setTimeout(()=>{let t=n.hasFocus;if(t!=n.inputState.notifiedFocused){let e=Xo(n.state,t);e?n.dispatch(e):n.update([])}},10)}mt.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Qo(n)};mt.blur=n=>{n.observer.clearSelectionRange(),Qo(n)};mt.compositionstart=mt.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};mt.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,y.chrome&&y.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};mt.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};$t.beforeinput=(n,t)=>{var e,i;if((t.inputType=="insertText"||t.inputType=="insertCompositionText")&&(n.inputState.insertingText=t.data,n.inputState.insertingTextAt=Date.now()),t.inputType=="insertReplacementText"&&n.observer.editContext){let r=(e=t.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain"),o=t.getTargetRanges();if(r&&o.length){let l=o[0],a=n.posAtDOM(l.startContainer,l.startOffset),h=n.posAtDOM(l.endContainer,l.endOffset);return Rn(n,{from:a,to:h,insert:n.state.toText(r)},null),!0}}let s;if(y.chrome&&y.android&&(s=zo.find(r=>r.inputType==t.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return y.ios&&t.inputType=="deleteContentForward"&&n.observer.flushSoon(),y.safari&&t.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>mt.compositionend(n,t),20),!1};var Yr=new Set;function Wa(n){Yr.has(n)||(Yr.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}var Ur=["pre-wrap","normal","pre-line","break-spaces"],Me=!1;function _r(){Me=!1}var dn=class{constructor(t){this.lineWrapping=t,this.doc=R.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let i=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((e-t-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return Ur.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let i=0;i<t.length;i++){let s=t[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(e=!0,this.heightSamples[Math.floor(s*10)]=!0)}return e}refresh(t,e,i,s,r,o){let l=Ur.indexOf(t)>-1,a=Math.abs(e-this.lineHeight)>.3||this.lineWrapping!=l||Math.abs(i-this.charWidth)>.1;if(this.lineWrapping=l,this.lineHeight=e,this.charWidth=i,this.textHeight=s,this.lineLength=r,a){this.heightSamples={};for(let h=0;h<o.length;h++){let f=o[h];f<0?h++:this.heightSamples[Math.floor(f*10)]=!0}}return a}},pn=class{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}},wt=class n{constructor(t,e,i,s,r){this.from=t,this.length=e,this.top=i,this.height=s,this._content=r}get type(){return typeof this._content=="number"?gt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof le?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new n(this.from,this.length+t.length,this.top,this.height+t.height,e)}},I=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(I||(I={})),Li=.001,lt=class n{constructor(t,e,i=2){this.length=t,this.height=e,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>Li&&(Me=!0),this.height=t)}replace(t,e,i){return n.of(i)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,i,s){let r=this,o=i.doc;for(let l=s.length-1;l>=0;l--){let{fromA:a,toA:h,fromB:f,toB:c}=s[l],u=r.lineAt(a,I.ByPosNoHeight,i.setDoc(e),0,0),d=u.to>=h?u:r.lineAt(h,I.ByPosNoHeight,i,0,0);for(c+=d.to-h,h=d.to;l>0&&u.from<=s[l-1].toA;)a=s[l-1].fromA,f=s[l-1].fromB,l--,a<u.from&&(u=r.lineAt(a,I.ByPosNoHeight,i,0,0));f+=u.from-a,a=u.from;let p=mn.build(i.setDoc(o),t,f,c);r=Qi(r,r.replace(a,h,p))}return r.updateHeight(i,0)}static empty(){return new dt(0,0,0)}static of(t){if(t.length==1)return t[0];let e=0,i=t.length,s=0,r=0;for(;;)if(e==i)if(s>r*2){let l=t[e-1];l.break?t.splice(--e,1,l.left,null,l.right):t.splice(--e,1,l.left,l.right),i+=1+l.break,s-=l.size}else if(r>s*2){let l=t[i];l.break?t.splice(i,1,l.left,null,l.right):t.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(s<r){let l=t[e++];l&&(s+=l.size)}else{let l=t[--i];l&&(r+=l.size)}let o=0;return t[e-1]==null?(o=1,e--):t[e]==null&&(o=1,i++),new gn(n.of(t.slice(0,e)),o,n.of(t.slice(i)))}};function Qi(n,t){return n==t?n:(n.constructor!=t.constructor&&(Me=!0),t)}lt.prototype.size=1;var Fa=U.replace({}),Zi=class extends lt{constructor(t,e,i){super(t,e),this.deco=i,this.spaceAbove=0}mainBlock(t,e){return new wt(e,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(t,e,i,s){return this.spaceAbove&&t<i+this.spaceAbove?new wt(s,0,i,this.spaceAbove,Fa):this.mainBlock(i,s)}lineAt(t,e,i,s,r){let o=this.mainBlock(s,r);return this.spaceAbove?this.blockAt(0,i,s,r).join(o):o}forEachLine(t,e,i,s,r,o){t<=r+this.length&&e>=r&&o(this.lineAt(0,I.ByPos,i,s,r))}setMeasuredHeight(t){let e=t.heights[t.index++];e<0?(this.spaceAbove=-e,e=t.heights[t.index++]):this.spaceAbove=0,this.setHeight(e)}updateHeight(t,e=0,i=!1,s){return s&&s.from<=e&&s.more&&this.setMeasuredHeight(s),this.outdated=!1,this}toString(){return`block(${this.length})`}},dt=class n extends Zi{constructor(t,e,i){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(t,e){return new wt(e,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(t,e,i){let s=i[0];return i.length==1&&(s instanceof n||s instanceof Ht&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Ht?s=new n(s.length,this.height,this.spaceAbove):s.height=this.height,this.outdated||(s.outdated=!1),s):lt.of(i)}updateHeight(t,e=0,i=!1,s){return s&&s.from<=e&&s.more?this.setMeasuredHeight(s):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},Ht=class n extends lt{constructor(t){super(t,0)}heightMetrics(t,e){let i=t.doc.lineAt(e).number,s=t.doc.lineAt(e+this.length).number,r=s-i+1,o,l=0;if(t.lineWrapping){let a=Math.min(this.height,t.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:s,perLine:o,perChar:l}}blockAt(t,e,i,s){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(e,s);if(e.lineWrapping){let h=s+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-i)/this.height))*this.length)),f=e.doc.lineAt(h),c=l+f.length*a,u=Math.max(i,t-c/2);return new wt(f.from,f.length,u,c,0)}else{let h=Math.max(0,Math.min(o-r,Math.floor((t-i)/l))),{from:f,length:c}=e.doc.line(r+h);return new wt(f,c,i+l*h,l,0)}}lineAt(t,e,i,s,r){if(e==I.ByHeight)return this.blockAt(t,i,s,r);if(e==I.ByPosNoHeight){let{from:d,to:p}=i.doc.lineAt(t);return new wt(d,p-d,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),h=i.doc.lineAt(t),f=l+h.length*a,c=h.number-o,u=s+l*c+a*(h.from-r-c);return new wt(h.from,h.length,Math.max(s,Math.min(u,s+this.height-f)),f,0)}forEachLine(t,e,i,s,r,o){t=Math.max(t,r),e=Math.min(e,r+this.length);let{firstLine:l,perLine:a,perChar:h}=this.heightMetrics(i,r);for(let f=t,c=s;f<=e;){let u=i.doc.lineAt(f);if(f==t){let p=u.number-l;c+=a*p+h*(t-r-p)}let d=a+h*u.length;o(new wt(u.from,u.length,c,d,0)),c+=d,f=u.to+1}}replace(t,e,i){let s=this.length-e;if(s>0){let r=i[i.length-1];r instanceof n?i[i.length-1]=new n(r.length+s):i.push(null,new n(s-1))}if(t>0){let r=i[0];r instanceof n?i[0]=new n(t+r.length):i.unshift(new n(t-1),null)}return lt.of(i)}decomposeLeft(t,e){e.push(new n(t-1),null)}decomposeRight(t,e){e.push(null,new n(this.length-t-1))}updateHeight(t,e=0,i=!1,s){let r=e+this.length;if(s&&s.from<=e+this.length&&s.more){let o=[],l=Math.max(e,s.from),a=-1;for(s.from>e&&o.push(new n(s.from-e-1).updateHeight(t,e));l<=r&&s.more;){let f=t.doc.lineAt(l).length;o.length&&o.push(null);let c=s.heights[s.index++],u=0;c<0&&(u=-c,c=s.heights[s.index++]),a==-1?a=c:Math.abs(c-a)>=Li&&(a=-2);let d=new dt(f,c,u);d.outdated=!1,o.push(d),l+=f+1}l<=r&&o.push(null,new n(r-l).updateHeight(t,l));let h=lt.of(o);return(a<0||Math.abs(h.height-this.height)>=Li||Math.abs(a-this.heightMetrics(t,e).perLine)>=Li)&&(Me=!0),Qi(this,h)}else(i||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},gn=class extends lt{constructor(t,e,i){super(t.length+e+i.length,t.height+i.height,e|(t.outdated||i.outdated?2:0)),this.left=t,this.right=i,this.size=t.size+i.size}get break(){return this.flags&1}blockAt(t,e,i,s){let r=i+this.left.height;return t<r?this.left.blockAt(t,e,i,s):this.right.blockAt(t,e,r,s+this.left.length+this.break)}lineAt(t,e,i,s,r){let o=s+this.left.height,l=r+this.left.length+this.break,a=e==I.ByHeight?t<o:t<l,h=a?this.left.lineAt(t,e,i,s,r):this.right.lineAt(t,e,i,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let f=e==I.ByPosNoHeight?I.ByPosNoHeight:I.ByPos;return a?h.join(this.right.lineAt(l,f,i,o,l)):this.left.lineAt(l,f,i,s,r).join(h)}forEachLine(t,e,i,s,r,o){let l=s+this.left.height,a=r+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,i,s,r,o),e>=a&&this.right.forEachLine(t,e,i,l,a,o);else{let h=this.lineAt(a,I.ByPos,i,s,r);t<h.from&&this.left.forEachLine(t,h.from-1,i,s,r,o),h.to>=t&&h.from<=e&&o(h),e>h.to&&this.right.forEachLine(h.to+1,e,i,l,a,o)}}replace(t,e,i){let s=this.left.length+this.break;if(e<s)return this.balanced(this.left.replace(t,e,i),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-s,e-s,i));let r=[];t>0&&this.decomposeLeft(t,r);let o=r.length;for(let l of i)r.push(l);if(t>0&&Gr(r,o-1),e<this.length){let l=r.length;this.decomposeRight(e,r),Gr(r,l)}return lt.of(r)}decomposeLeft(t,e){let i=this.left.length;if(t<=i)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(i++,t>=i&&e.push(null)),t>i&&this.right.decomposeLeft(t-i,e)}decomposeRight(t,e){let i=this.left.length,s=i+this.break;if(t>=s)return this.right.decomposeRight(t-s,e);t<i&&this.left.decomposeRight(t,e),this.break&&t<s&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?lt.of(this.break?[t,null,e]:[t,e]):(this.left=Qi(this.left,t),this.right=Qi(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,i=!1,s){let{left:r,right:o}=this,l=e+r.length+this.break,a=null;return s&&s.from<=e+r.length&&s.more?a=r=r.updateHeight(t,e,i,s):r.updateHeight(t,e,i),s&&s.from<=l+o.length&&s.more?a=o=o.updateHeight(t,l,i,s):o.updateHeight(t,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function Gr(n,t){let e,i;n[t]==null&&(e=n[t-1])instanceof Ht&&(i=n[t+1])instanceof Ht&&n.splice(t-1,3,new Ht(e.length+1+i.length))}var Ha=5,mn=class n{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let i=Math.min(e,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof dt?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new dt(i-this.pos,-1,0)),this.writtenTo=i,e>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,i){if(t<e||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let o=e-t;i.block?this.addBlock(new Zi(o,s,i)):(o||r||s>=Ha)&&this.addLineDeco(s,r,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new dt(this.pos-t,-1,0)),this.writtenTo=this.pos}blankContent(t,e){let i=new Ht(e-t);return this.oracle.doc.lineAt(t).to==e&&(i.flags|=4),i}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof dt)return t;let e=new dt(0,-1,0);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,t),s.breaks+=e,this.writtenTo=this.pos=this.pos+i}finish(t){let e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(e instanceof dt)&&!this.isCovered?this.nodes.push(new dt(0,-1,0)):(this.writtenTo<this.pos||e==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=t;for(let s of this.nodes)s instanceof dt&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(t,e,i,s){let r=new n(i,t);return W.spans(e,i,s,r,0),r.finish(i)}};function Va(n,t,e){let i=new wn;return W.compare(n,t,e,i,0),i.changes}var wn=class{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,i,s){(t<e||i&&i.heightRelevant||s&&s.heightRelevant)&&$e(t,e,this.changes,5)}};function Xa(n,t){let e=n.getBoundingClientRect(),i=n.ownerDocument,s=i.defaultView||window,r=Math.max(0,e.left),o=Math.min(s.innerWidth,e.right),l=Math.max(0,e.top),a=Math.min(s.innerHeight,e.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let f=h,c=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&c.overflow!="visible"){let u=f.getBoundingClientRect();r=Math.max(r,u.left),o=Math.min(o,u.right),l=Math.max(l,u.top),a=Math.min(h==n.parentNode?s.innerHeight:a,u.bottom)}h=c.position=="absolute"||c.position=="fixed"?f.offsetParent:f.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:r-e.left,right:Math.max(r,o)-e.left,top:l-(e.top+t),bottom:Math.max(l,a)-(e.top+t)}}function Qa(n){let t=n.getBoundingClientRect(),e=n.ownerDocument.defaultView||window;return t.left<e.innerWidth&&t.right>0&&t.top<e.innerHeight&&t.bottom>0}function Za(n,t){let e=n.getBoundingClientRect();return{left:0,right:e.right-e.left,top:t,bottom:e.bottom-(e.top+t)}}var ei=class{constructor(t,e,i,s){this.from=t,this.to=e,this.size=i,this.displaySize=s}static same(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++){let s=t[i],r=e[i];if(s.from!=r.from||s.to!=r.to||s.size!=r.size)return!1}return!0}draw(t,e){return U.replace({widget:new bn(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}},bn=class extends oe{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}},ji=class{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Jr,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Y.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(Tn).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new dn(e),this.stateDeco=to(t),this.heightMap=lt.empty().applyChanges(this.stateDeco,R.empty,this.heightOracle.setDoc(t.doc),[new yt(0,0,0,t.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=U.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let i=0;i<=1;i++){let s=i?e.head:e.anchor;if(!t.some(({from:r,to:o})=>s>=r&&s<=o)){let{from:r,to:o}=this.lineBlockAt(s);t.push(new ye(r,o))}}return this.viewports=t.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?Jr:new xn(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(Ke(t,this.scaler))})}update(t,e=null){this.state=t.state;let i=this.stateDeco;this.stateDeco=to(this.state);let s=t.changedRanges,r=yt.extendWithRanges(s,Va(i,this.stateDeco,t?t.changes:ot.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);_r(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||Me)&&(t.flags|=2),l?(this.scrollAnchorPos=t.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let h=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,t.flags|=this.updateForViewport(),(h||!t.changes.empty||t.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&(t.selectionSet||t.focusChanged)&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(Jl)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,i=window.getComputedStyle(e),s=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Y.RTL:Y.LTR;let o=this.heightOracle.mustRefreshForWrapping(r)||this.mustMeasureContent,l=e.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let h=0,f=0;if(l.width&&l.height){let{scaleX:E,scaleY:A}=lo(e,l);(E>.005&&Math.abs(this.scaleX-E)>.005||A>.005&&Math.abs(this.scaleY-A)>.005)&&(this.scaleX=E,this.scaleY=A,h|=16,o=a=!0)}let c=(parseInt(i.paddingTop)||0)*this.scaleY,u=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=c||this.paddingBottom!=u)&&(this.paddingTop=c,this.paddingBottom=u,h|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(s.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,h|=16);let d=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=ho(t.scrollDOM);let p=(this.printing?Za:Xa)(e,this.paddingTop),g=p.top-this.pixelViewport.top,m=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let w=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(w!=this.inView&&(this.inView=w,w&&(a=!0)),!this.inView&&!this.scrollTarget&&!Qa(t.dom))return 0;let C=l.width;if((this.contentDOMWidth!=C||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=t.scrollDOM.clientHeight,h|=16),a){let E=t.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(E)&&(o=!0),o||s.lineWrapping&&Math.abs(C-this.contentDOMWidth)>s.charWidth){let{lineHeight:A,charWidth:M,textHeight:$}=t.docView.measureTextSize();o=A>0&&s.refresh(r,A,M,$,Math.max(5,C/M),E),o&&(t.docView.minWidth=0,h|=16)}g>0&&m>0?f=Math.max(g,m):g<0&&m<0&&(f=Math.min(g,m)),_r();for(let A of this.viewports){let M=A.from==this.viewport.from?E:t.docView.measureVisibleLineHeights(A);this.heightMap=(o?lt.empty().applyChanges(this.stateDeco,R.empty,this.heightOracle,[new yt(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new pn(A.from,M))}Me&&(h|=2)}let v=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),h|=this.updateForViewport()),(h&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let i=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),s=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new ye(s.lineAt(o-i*1e3,I.ByHeight,r,0,0).from,s.lineAt(l+(1-i)*1e3,I.ByHeight,r,0,0).to);if(e){let{head:h}=e.range;if(h<a.from||h>a.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=s.lineAt(h,I.ByPos,r,0,0),u;e.y=="center"?u=(c.top+c.bottom)/2-f/2:e.y=="start"||e.y=="nearest"&&h<a.from?u=c.top:u=c.bottom-f,a=new ye(s.lineAt(u-1e3/2,I.ByHeight,r,0,0).from,s.lineAt(u+f+1e3/2,I.ByHeight,r,0,0).to)}}return a}mapViewport(t,e){let i=e.mapPos(t.from,-1),s=e.mapPos(t.to,1);return new ye(this.heightMap.lineAt(i,I.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,I.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(t,I.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(e,I.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(t==0||s<=o-Math.max(10,Math.min(-i,250)))&&(e==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&s>o-2*1e3&&r<l+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let i=[];for(let s of t)e.touchesRange(s.from,s.to)||i.push(new ei(e.mapPos(s.from),e.mapPos(s.to),s.size,s.displaySize));return i}ensureLineGaps(t,e){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,r=s>>1,o=s<<1;if(this.defaultTextDirection!=Y.LTR&&!i)return[];let l=[],a=(f,c,u,d)=>{if(c-f<r)return;let p=this.state.selection.main,g=[p.from];p.empty||g.push(p.to);for(let w of g)if(w>f&&w<c){a(f,w-10,u,d),a(w+10,c,u,d);return}let m=Ka(t,w=>w.from>=u.from&&w.to<=u.to&&Math.abs(w.from-f)<r&&Math.abs(w.to-c)<r&&!g.some(C=>w.from<C&&w.to>C));if(!m){if(c<u.to&&e&&i&&e.visibleRanges.some(v=>v.from<=c&&v.to>=c)){let v=e.moveToLineBoundary(k.cursor(c),!1,!0).head;v>f&&(c=v)}let w=this.gapSize(u,f,c,d),C=i||w<2e6?w:2e6;m=new ei(f,c,w,C)}l.push(m)},h=f=>{if(f.length<o||f.type!=gt.Text)return;let c=ja(f.from,f.to,this.stateDeco);if(c.total<o)return;let u=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(i){let g=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,w;if(u!=null){let C=Ri(c,u),v=((this.visibleBottom-this.visibleTop)/2+g)/f.height;m=C-v,w=C+v}else m=(this.visibleTop-f.top-g)/f.height,w=(this.visibleBottom-f.top+g)/f.height;d=Di(c,m),p=Di(c,w)}else{let g=c.total*this.heightOracle.charWidth,m=s*this.heightOracle.charWidth,w=0;if(g>2e6)for(let M of t)M.from>=f.from&&M.from<f.to&&M.size!=M.displaySize&&M.from*this.heightOracle.charWidth+w<this.pixelViewport.left&&(w=M.size-M.displaySize);let C=this.pixelViewport.left+w,v=this.pixelViewport.right+w,E,A;if(u!=null){let M=Ri(c,u),$=((v-C)/2+m)/g;E=M-$,A=M+$}else E=(C-m)/g,A=(v+m)/g;d=Di(c,E),p=Di(c,A)}d>f.from&&a(f.from,d,f,c),p<f.to&&a(p,f.to,f,c)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(h):h(f);return l}gapSize(t,e,i,s){let r=Ri(s,i)-Ri(s,e);return this.heightOracle.lineWrapping?t.height*r:s.total*this.heightOracle.charWidth*r}updateLineGaps(t){ei.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=U.set(t.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];W.spans(e,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let s=0;if(i.length!=this.visibleRanges.length)s=12;else for(let r=0;r<i.length&&!(s&8);r++){let o=this.visibleRanges[r],l=i[r];(o.from!=l.from||o.to!=l.to)&&(s|=4,t&&t.mapPos(o.from,-1)==l.from&&t.mapPos(o.to,1)==l.to||(s|=8))}return this.visibleRanges=i,s}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(e=>e.from<=t&&e.to>=t)||Ke(this.heightMap.lineAt(t,I.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(e=>e.top<=t&&e.bottom>=t)||Ke(this.heightMap.lineAt(this.scaler.fromDOM(t),I.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return Ke(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},ye=class{constructor(t,e){this.from=t,this.to=e}};function ja(n,t,e){let i=[],s=n,r=0;return W.spans(e,n,t,{span(){},point(o,l){o>s&&(i.push({from:s,to:o}),r+=o-s),s=l}},20),s<t&&(i.push({from:s,to:t}),r+=t-s),{total:r,ranges:i}}function Di({total:n,ranges:t},e){if(e<=0)return t[0].from;if(e>=1)return t[t.length-1].to;let i=Math.floor(n*e);for(let s=0;;s++){let{from:r,to:o}=t[s],l=o-r;if(i<=l)return r+i;i-=l}}function Ri(n,t){let e=0;for(let{from:i,to:s}of n.ranges){if(t<=s){e+=t-i;break}e+=s-i}return e/n.total}function Ka(n,t){for(let e of n)if(t(e))return e}var Jr={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};function to(n){let t=n.facet(Ui).filter(i=>typeof i!="function"),e=n.facet(Dn).filter(i=>typeof i!="function");return e.length&&t.push(W.join(e)),t}var xn=class n{constructor(t,e,i){let s=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let h=e.lineAt(l,I.ByPos,t,0,0).top,f=e.lineAt(a,I.ByPos,t,0,0).bottom;return s+=f-h,{from:l,to:a,top:h,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(e.height-s);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(t){for(let e=0,i=0,s=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return s+(t-i)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);i=r.bottom,s=r.domBottom}}fromDOM(t){for(let e=0,i=0,s=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return i+(t-s)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);i=r.bottom,s=r.domBottom}}eq(t){return t instanceof n?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((e,i)=>e.from==t.viewports[i].from&&e.to==t.viewports[i].to):!1}};function Ke(n,t){if(t.scale==1)return n;let e=t.toDOM(n.top),i=t.toDOM(n.bottom);return new wt(n.from,n.length,e,i-e,Array.isArray(n._content)?n._content.map(s=>Ke(s,t)):n._content)}var Bi=P.define({combine:n=>n.join(" ")}),yn=P.define({combine:n=>n.indexOf(!0)>-1}),$n=ut.newName(),Zo=ut.newName(),jo=ut.newName(),Ko={"&light":"."+Zo,"&dark":"."+jo};function kn(n,t,e){return new ut(t,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return n;if(!e||!e[s])throw new RangeError(`Unsupported selector: ${s}`);return e[s]}):n+" "+i}})}var Ya=kn("."+$n,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Ko),Ua={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Fs=y.ie&&y.ie_version<=11,Sn=class{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new js,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(e=>{for(let i of e)this.queue.push(i);(y.ie&&y.ie_version<=11||y.ios&&t.composing)&&e.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&y.android&&t.constructor.EDIT_CONTEXT!==!1&&!(y.chrome&&y.chrome_version<126)&&(this.editContext=new vn(t),t.state.facet(Et)&&(t.contentDOM.editContext=this.editContext.editContext)),Fs&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var e;((e=this.view.docView)===null||e===void 0?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(t){(t.type=="change"||!t.type)&&!t.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((e,i)=>e!=t[i]))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(Et)?i.root.activeElement!=this.dom:!Ye(this.dom,s))return;let r=s.anchorNode&&i.docView.tile.nearest(s.anchorNode);if(r&&r.isWidget()&&r.widget.ignoreEvent(t)){e||(this.selectionChanged=!1);return}(y.ie&&y.ie_version<=11||y.android&&y.chrome)&&!i.state.selection.main.empty&&s.focusNode&&Ue(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=Se(t.root);if(!e)return!1;let i=y.safari&&t.root.nodeType==11&&t.root.activeElement==this.dom&&_a(this.view,e)||e;if(!i||this.selectionRange.eq(i))return!1;let s=Ye(this.dom,i);return s&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&Vl(this.dom,i)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let i=this.dom;i;)if(i.nodeType==1)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==i?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=e)i.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Ua),Fs&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Fs&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var i;if(!this.delayedAndroidKey){let s=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&ke(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,i=-1,s=!1;for(let r of t){let o=this.readMutation(r);o&&(o.typeOver&&(s=!0),e==-1?{from:e,to:i}=o:(e=Math.min(o.from,e),i=Math.max(o.to,i)))}return{from:e,to:i,typeOver:s}}readChange(){let{from:t,to:e,typeOver:i}=this.processRecords(),s=this.selectionChanged&&Ye(this.dom,this.selectionRange);if(t<0&&!s)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new hn(this.view,t,e,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let i=this.view.state,s=Io(this.view,e);return this.view.state==i&&(e.domChanged||e.newSel&&!Xi(this.view.state.selection,e.newSel.main))&&this.view.update([]),s}readMutation(t){let e=this.view.docView.tile.nearest(t.target);if(!e||e.isWidget())return null;if(e.markDirty(t.type=="attributes"),t.type=="childList"){let i=eo(e,t.previousSibling||t.target.previousSibling,-1),s=eo(e,t.nextSibling||t.target.nextSibling,1);return{from:i?e.posAfter(i):e.posAtStart,to:s?e.posBefore(s):e.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(Et)!=t.state.facet(Et)&&(t.view.contentDOM.editContext=t.state.facet(Et)?this.editContext.editContext:null))}destroy(){var t,e,i;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(e=this.gapIntersection)===null||e===void 0||e.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function eo(n,t,e){for(;t;){let i=Q.get(t);if(i&&i.parent==n)return i;let s=t.parentNode;t=s!=n.dom?s:e>0?t.nextSibling:t.previousSibling}return null}function io(n,t){let e=t.startContainer,i=t.startOffset,s=t.endContainer,r=t.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor,1);return Ue(o.node,o.offset,s,r)&&([e,i,s,r]=[s,r,e,i]),{anchorNode:e,anchorOffset:i,focusNode:s,focusOffset:r}}function _a(n,t){if(t.getComposedRanges){let s=t.getComposedRanges(n.root)[0];if(s)return io(n,s)}let e=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),e=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),e?io(n,e):null}var vn=class{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=i=>{let s=t.state.selection.main,{anchor:r,head:o}=s,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let h=a-l>i.text.length;l==this.from&&r<this.from?l=r:a==this.to&&r>this.to&&(a=r);let f=qo(t.state.sliceDoc(l,a),i.text,(h?s.from:s.to)-l,h?"end":null);if(!f){let u=k.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));Xi(u,s)||t.dispatch({selection:u,userEvent:"select"});return}let c={from:f.from+l,to:f.toA+l,insert:R.of(i.text.slice(f.from,f.toB).split(`
`))};if((y.mac||y.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&t.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:l,to:a,insert:R.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!t.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);Rn(t,c,k.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state)),c.from<c.to&&!c.insert.length&&t.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(e.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(e.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let s=[],r=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=t.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,s.push(r)}e.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(r.rangeStart),h=this.toEditorPos(r.rangeEnd);if(a<h){let f=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;s.push(U.mark({attributes:{style:f}}).range(a,h))}}}t.dispatch({effects:Co.of(U.set(s))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(t.state)}};for(let i in this.handlers)e.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=Se(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,i=!1,s=this.pendingContextChange;return t.changes.iterChanges((r,o,l,a,h)=>{if(i)return;let f=h.length-(o-r);if(s&&o>=s.to)if(s.from==r&&s.to==o&&s.insert.eq(h)){s=this.pendingContextChange=null,e+=f,this.to+=f;return}else s=null,this.revertPending(t.state);if(r+=e,o+=e,o<=this.from)this.from+=f,this.to+=f;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),h.toString()),this.to+=f}e+=f}),s&&!i&&this.revertPending(t.state),!i}update(t){let e=this.pendingContextChange,i=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(i.from,i.to)&&t.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):!this.applyEdits(t)||!this.rangeIsValid(t.state)?(this.pendingContextChange=null,this.reset(t.state)):(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),s=this.toContextPos(e.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>1e4*3)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let i=this.composing;return i&&i.drifted?i.editorBase+(t-i.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}},B=class n{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:i}=t;this.dispatchTransactions=t.dispatchTransactions||i&&(s=>s.forEach(r=>i(r,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=t.root||Hl(t.parent)||document,this.viewState=new ji(t.state||j.create(t)),t.scrollTo&&t.scrollTo.is(Pi)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(xe).map(s=>new Ge(s));for(let s of this.plugins)s.update(this);this.observer=new Sn(this),this.inputState=new fn(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Hi(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((e=document.fonts)===null||e===void 0)&&e.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...t){let e=t.length==1&&t[0]instanceof st?t:t.length==1&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e=!1,i=!1,s,r=this.state;for(let u of t){if(u.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=u.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;t.some(u=>u.annotation(Vo))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=Xo(r,o),a||(l=1));let h=this.observer.delayedAndroidKey,f=null;if(h?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(f=null)):this.observer.clear(),r.facet(j.phrases)!=this.state.facet(j.phrases))return this.setState(r);s=Wi.create(this,r,t),s.flags|=l;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let u of t){if(c&&(c=c.map(u.changes)),u.scrollIntoView){let{main:d}=u.state.selection;c=new _e(d.empty?d:k.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of u.effects)d.is(Pi)&&(c=d.value.clip(this.state))}this.viewState.update(s,c),this.bidiCache=Ki.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),e=this.docView.update(s),this.state.facet(Ze)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(e,t.some(u=>u.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Bi)!=s.state.facet(Bi)&&(this.viewState.mustMeasureContent=!0),(e||i||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),e&&this.docViewUpdate(),!s.empty)for(let u of this.state.facet(_s))try{u(s)}catch(d){xt(this.state,d,"update listener")}(a||f)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),f&&!Io(this,f)&&h.force&&ke(this.contentDOM,h.key,h.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let e=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new ji(t),this.plugins=t.facet(xe).map(i=>new Ge(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Hi(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(xe),i=t.state.facet(xe);if(e!=i){let s=[];for(let r of i){let o=e.indexOf(r);if(o<0)s.push(new Ge(r));else{let l=this.plugins[o];l.mustUpdate=t,s.push(l)}}for(let r of this.plugins)r.mustUpdate!=t&&r.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=t;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);e!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(i){xt(this.state,i,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(ho(i))r=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(s);r=d.from,o=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];a&4||([this.measureRequests,h]=[h,this.measureRequests]);let f=h.map(d=>{try{return d.read(this)}catch(p){return xt(this.state,p),so}}),c=Wi.create(this,this.state,[]),u=!1;c.flags|=a,e?e.flags|=a:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),u=this.docView.update(c),u&&this.docViewUpdate());for(let d=0;d<h.length;d++)if(f[d]!=so)try{let p=h[d];p.write&&p.write(f[d],this)}catch(p){xt(this.state,p)}if(u&&this.docView.updateSelection(!0),!c.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(p>1||p<-1){s=s+p,i.scrollTop=s/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let l of this.state.facet(_s))l(e)}get themeClasses(){return $n+" "+(this.state.facet(yn)?jo:Zo)+" "+this.state.facet(Bi)}updateAttrs(){let t=no(this,Ao,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Et)?"true":"false",class:"cm-content",style:`${y.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),no(this,Tn,e);let i=this.observer.ignore(()=>{let s=Lr(this.contentDOM,this.contentAttrs,e),r=Lr(this.dom,this.editorAttrs,t);return s||r});return this.editorAttrs=t,this.contentAttrs=e,i}showAnnouncements(t){let e=!0;for(let i of t)for(let s of i.effects)if(s.is(n.announce)){e&&(this.announceDOM.textContent=""),e=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Ze);let t=this.state.facet(n.cspNonce);ut.mount(this.root,this.styleModules.concat(Ya).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key){this.measureRequests[e]=t;return}}this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(e===void 0||e&&e.plugin!=t)&&this.pluginMap.set(t,e=this.plugins.find(i=>i.plugin==t)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,i){return Ws(this,t,Fr(this,t,e,i))}moveByGroup(t,e){return Ws(this,t,Fr(this,t,e,i=>xa(this,t.head,i)))}visualLineSide(t,e){let i=this.bidiSpans(t),s=this.textDirectionAt(t.from),r=i[e?i.length-1:0];return k.cursor(r.side(e,s)+t.from,r.forward(!e,s)?1:-1)}moveToLineBoundary(t,e,i=!0){return ba(this,t,e,i)}moveVertically(t,e,i){return Ws(this,t,ya(this,t,e,i))}domAtPos(t,e=1){return this.docView.domAtPos(t,e)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){this.readMeasured();let i=ln(this,t,e);return i&&i.pos}posAndSideAtCoords(t,e=!0){return this.readMeasured(),ln(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let i=this.docView.coordsAt(t,e);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(t),r=this.bidiSpans(s),o=r[bt.find(r,t-s.from,-1,e)];return zi(i,o.dir==Y.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(vo)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>Ga)return mo(t.length);let e=this.textDirectionAt(t.from),i;for(let r of this.bidiCache)if(r.from==t.from&&r.dir==e&&(r.fresh||go(r.isolates,i=qr(this,t))))return r.order;i||(i=qr(this,t));let s=Ul(t.text,e,i);return this.bidiCache.push(new Ki(t.from,t.to,e,i,!0,s)),s}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||y.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{ao(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return Pi.of(new _e(typeof t=="number"?k.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,i=this.viewState.scrollAnchorAt(t);return Pi.of(new _e(k.cursor(i.from),"start","start",i.top-t,e,!0))}setTabFocusMode(t){t==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof t=="boolean"?this.inputState.tabFocusMode=t?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return ve.define(()=>({}),{eventHandlers:t})}static domEventObservers(t){return ve.define(()=>({}),{eventObservers:t})}static theme(t,e){let i=ut.newName(),s=[Bi.of(i),Ze.of(kn(`.${i}`,t))];return e&&e.dark&&s.push(yn.of(!0)),s}static baseTheme(t){return Bs.lowest(Ze.of(kn("."+$n,t,Ko)))}static findFromDOM(t){var e;let i=t.querySelector(".cm-content"),s=i&&Q.get(i)||Q.get(t);return((e=s?.root)===null||e===void 0?void 0:e.view)||null}};B.styleModule=Ze;B.inputHandler=ko;B.clipboardInputFilter=Pn;B.clipboardOutputFilter=Mn;B.scrollHandler=Oo;B.focusChangeEffect=So;B.perLineTextDirection=vo;B.exceptionSink=$o;B.updateListener=_s;B.editable=Et;B.mouseSelectionStyle=yo;B.dragMovesSelection=xo;B.clickAddsSelectionRange=bo;B.decorations=Ui;B.blockWrappers=Po;B.outerDecorations=Dn;B.atomicRanges=ri;B.bidiIsolatedRanges=Mo;B.scrollMargins=To;B.darkTheme=yn;B.cspNonce=P.define({combine:n=>n.length?n[0]:""});B.contentAttributes=Tn;B.editorAttributes=Ao;B.lineWrapping=B.contentAttributes.of({class:"cm-lineWrapping"});B.announce=Z.define();var Ga=4096,so={},Ki=class n{constructor(t,e,i,s,r,o){this.from=t,this.to=e,this.dir=i,this.isolates=s,this.fresh=r,this.order=o}static update(t,e){if(e.empty&&!t.some(r=>r.fresh))return t;let i=[],s=t.length?t[t.length-1].dir:Y.LTR;for(let r=Math.max(0,t.length-10);r<t.length;r++){let o=t[r];o.dir==s&&!e.touchesRange(o.from,o.to)&&i.push(new n(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}};function no(n,t,e){for(let i=n.state.facet(t),s=i.length-1;s>=0;s--){let r=i[s],o=typeof r=="function"?r(n):r;o&&On(o,e)}return e}var Ih=y.mac?"mac":y.windows?"win":y.linux?"linux":"key";var qh=/x/.unicode!=null?"gu":"g";var Nt=class extends Ot{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}};Nt.prototype.elementClass="";Nt.prototype.toDOM=void 0;Nt.prototype.mapMode=it.TrackBefore;Nt.prototype.startSide=Nt.prototype.endSide=-1;Nt.prototype.point=!0;var Ja=0,_=class n{constructor(t,e,i,s){this.name=t,this.set=e,this.base=i,this.modified=s,this.id=Ja++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let i=typeof t=="string"?t:"?";if(t instanceof n&&(e=t),e?.base)throw new Error("Can not derive from a modified tag");let s=new n(i,[],null,[]);if(s.set.push(s),e)for(let r of e.set)s.set.push(r);return s}static defineModifier(t){let e=new es(t);return i=>i.modified.indexOf(e)>-1?i:es.get(i.base||i,i.modified.concat(e).sort((s,r)=>s.id-r.id))}},th=0,es=class n{constructor(t){this.name=t,this.instances=[],this.id=th++}static get(t,e){if(!e.length)return t;let i=e[0].instances.find(l=>l.base==t&&eh(e,l.modified));if(i)return i;let s=[],r=new _(t.name,s,t,e);for(let l of e)l.instances.push(r);let o=ih(e);for(let l of t.set)if(!l.modified.length)for(let a of o)s.push(n.get(l,a));return r}};function eh(n,t){return n.length==t.length&&n.every((e,i)=>e==t[i])}function ih(n){let t=[[]];for(let e=0;e<n.length;e++)for(let i=0,s=t.length;i<s;i++)t.push(t[i].concat(n[e]));return t.sort((e,i)=>i.length-e.length)}function is(n){let t=Object.create(null);for(let e in n){let i=n[e];Array.isArray(i)||(i=[i]);for(let s of e.split(" "))if(s){let r=[],o=2,l=s;for(let c=0;;){if(l=="..."&&c>0&&c+3==s.length){o=1;break}let u=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!u)throw new RangeError("Invalid path: "+s);if(r.push(u[0]=="*"?"":u[0][0]=='"'?JSON.parse(u[0]):u[0]),c+=u[0].length,c==s.length)break;let d=s[c++];if(c==s.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+s);l=s.slice(c)}let a=r.length-1,h=r[a];if(!h)throw new RangeError("Invalid path: "+s);let f=new Te(i,o,a>0?r.slice(0,a):null);t[h]=f.sort(t[h])}}return sh.add(t)}var sh=new D({combine(n,t){let e,i,s;for(;n||t;){if(!n||t&&n.depth>=t.depth?(s=t,t=t.next):(s=n,n=n.next),e&&e.mode==s.mode&&!s.context&&!e.context)continue;let r=new Te(s.tags,s.mode,s.context);e?e.next=r:i=r,e=r}return i}}),Te=class{constructor(t,e,i,s){this.tags=t,this.mode=e,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}};Te.empty=new Te([],2,null);function Ln(n,t){let e=Object.create(null);for(let r of n)if(!Array.isArray(r.tag))e[r.tag.id]=r.class;else for(let o of r.tag)e[o.id]=r.class;let{scope:i,all:s=null}=t||{};return{style:r=>{let o=s;for(let l of r)for(let a of l.set){let h=e[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}var b=_.define,Gi=b(),Qt=b(),Yo=b(Qt),Uo=b(Qt),Zt=b(),Ji=b(Zt),Bn=b(Zt),Tt=b(),fe=b(Tt),Pt=b(),Mt=b(),En=b(),oi=b(En),ts=b(),x={comment:Gi,lineComment:b(Gi),blockComment:b(Gi),docComment:b(Gi),name:Qt,variableName:b(Qt),typeName:Yo,tagName:b(Yo),propertyName:Uo,attributeName:b(Uo),className:b(Qt),labelName:b(Qt),namespace:b(Qt),macroName:b(Qt),literal:Zt,string:Ji,docString:b(Ji),character:b(Ji),attributeValue:b(Ji),number:Bn,integer:b(Bn),float:b(Bn),bool:b(Zt),regexp:b(Zt),escape:b(Zt),color:b(Zt),url:b(Zt),keyword:Pt,self:b(Pt),null:b(Pt),atom:b(Pt),unit:b(Pt),modifier:b(Pt),operatorKeyword:b(Pt),controlKeyword:b(Pt),definitionKeyword:b(Pt),moduleKeyword:b(Pt),operator:Mt,derefOperator:b(Mt),arithmeticOperator:b(Mt),logicOperator:b(Mt),bitwiseOperator:b(Mt),compareOperator:b(Mt),updateOperator:b(Mt),definitionOperator:b(Mt),typeOperator:b(Mt),controlOperator:b(Mt),punctuation:En,separator:b(En),bracket:oi,angleBracket:b(oi),squareBracket:b(oi),paren:b(oi),brace:b(oi),content:Tt,heading:fe,heading1:b(fe),heading2:b(fe),heading3:b(fe),heading4:b(fe),heading5:b(fe),heading6:b(fe),contentSeparator:b(Tt),list:b(Tt),quote:b(Tt),emphasis:b(Tt),strong:b(Tt),link:b(Tt),monospace:b(Tt),strikethrough:b(Tt),inserted:b(),deleted:b(),changed:b(),invalid:b(),meta:ts,documentMeta:b(ts),annotation:b(ts),processingInstruction:b(ts),definition:_.defineModifier("definition"),constant:_.defineModifier("constant"),function:_.defineModifier("function"),standard:_.defineModifier("standard"),local:_.defineModifier("local"),special:_.defineModifier("special")};for(let n in x){let t=x[n];t instanceof _&&(t.name=n)}var Hh=Ln([{tag:x.link,class:"tok-link"},{tag:x.heading,class:"tok-heading"},{tag:x.emphasis,class:"tok-emphasis"},{tag:x.strong,class:"tok-strong"},{tag:x.keyword,class:"tok-keyword"},{tag:x.atom,class:"tok-atom"},{tag:x.bool,class:"tok-bool"},{tag:x.url,class:"tok-url"},{tag:x.labelName,class:"tok-labelName"},{tag:x.inserted,class:"tok-inserted"},{tag:x.deleted,class:"tok-deleted"},{tag:x.literal,class:"tok-literal"},{tag:x.string,class:"tok-string"},{tag:x.number,class:"tok-number"},{tag:[x.regexp,x.escape,x.special(x.string)],class:"tok-string2"},{tag:x.variableName,class:"tok-variableName"},{tag:x.local(x.variableName),class:"tok-variableName tok-local"},{tag:x.definition(x.variableName),class:"tok-variableName tok-definition"},{tag:x.special(x.variableName),class:"tok-variableName2"},{tag:x.definition(x.propertyName),class:"tok-propertyName tok-definition"},{tag:x.typeName,class:"tok-typeName"},{tag:x.namespace,class:"tok-namespace"},{tag:x.className,class:"tok-className"},{tag:x.macroName,class:"tok-macroName"},{tag:x.propertyName,class:"tok-propertyName"},{tag:x.operator,class:"tok-operator"},{tag:x.comment,class:"tok-comment"},{tag:x.meta,class:"tok-meta"},{tag:x.invalid,class:"tok-invalid"},{tag:x.punctuation,class:"tok-punctuation"}]);var Nn,De=new D;function nh(n){return P.define({combine:n?t=>t.concat(n):void 0})}var rh=new D,at=class{constructor(t,e,i=[],s=""){this.data=t,this.name=s,j.prototype.hasOwnProperty("tree")||Object.defineProperty(j.prototype,"tree",{get(){return zn(this)}}),this.parser=e,this.extension=[Re.of(this),j.languageData.of((r,o,l)=>{let a=_o(r,o,l),h=a.type.prop(De);if(!h)return[];let f=r.facet(h),c=a.type.prop(rh);if(c){let u=a.resolve(o-a.from,l);for(let d of c)if(d.test(u,r)){let p=r.facet(d.facet);return d.type=="replace"?p:p.concat(f)}}return f})].concat(i)}isActiveAt(t,e,i=-1){return _o(t,e,i).type.prop(De)==this.data}findRegions(t){let e=t.facet(Re);if(e?.data==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let i=[],s=(r,o)=>{if(r.prop(De)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(D.mounted);if(l){if(l.tree.prop(De)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(s(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let h=r.children[a];h instanceof X&&s(h,r.positions[a]+o)}};return s(zn(t),0),i}get allowsNesting(){return!0}};at.setState=Z.define();function _o(n,t,e){let i=n.facet(Re),s=zn(n).topNode;if(!i||i.allowsNesting)for(let r=s;r;r=r.enter(t,e,z.ExcludeBuffers|z.EnterBracketed))r.type.isTop&&(s=r);return s}var ss=class n extends at{constructor(t,e,i){super(t,e,[],i),this.parser=e}static define(t){let e=nh(t.languageData);return new n(e,t.parser.configure({props:[De.add(i=>i.isTop?e:void 0)]}),t.name)}configure(t,e){return new n(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}};function zn(n){let t=n.field(at.state,!1);return t?t.tree:X.empty}var Wn=class{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let i=this.cursorPos-this.string.length;return t<i||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-i,e-i)}},li=null,Fn=class n{constructor(t,e,i=[],s,r,o,l,a){this.parser=t,this.state=e,this.fragments=i,this.tree=s,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(t,e,i){return new n(t,e,[],X.empty,0,i,[],null)}startParse(){return this.parser.startParse(new Wn(this.state.doc),this.fragments)}work(t,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=X.empty&&this.isDone(e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof t=="number"){let s=Date.now()+t;t=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(_t.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(e??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(_t.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=li;li=this;try{return t()}finally{li=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=Go(t,e.from,e.to);return t}changes(t,e){let{fragments:i,tree:s,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!t.empty){let a=[];if(t.iterChangedRanges((h,f,c,u)=>a.push({fromA:h,toA:f,fromB:c,toB:u})),i=_t.applyChanges(i,a),s=X.empty,r=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let f=t.mapPos(h.from,1),c=t.mapPos(h.to,-1);f<c&&l.push({from:f,to:c})}}}return new n(this.parser,e,i,s,r,o,l,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:r}=this.skipped[i];s<t.to&&r>t.from&&(this.fragments=Go(this.fragments,s,r),this.skipped.splice(i--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends ue{createParse(e,i,s){let r=s[0].from,o=s[s.length-1].to;return{parsedPos:r,advance(){let a=li;if(a){for(let h of s)a.tempSkipped.push(h);t&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,t]):t)}return this.parsedPos=o,new X(J.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&e[0].from==0&&e[0].to>=t}static get(){return li}};function Go(n,t,e){return _t.applyChanges(n,[{fromA:t,toA:e,fromB:t,toB:e}])}var ai=class n{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),i=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,i)||e.takeTree(),new n(e)}static init(t){let e=Math.min(3e3,t.doc.length),i=Fn.create(t.facet(Re).parser,t,{from:0,to:e});return i.work(20,e)||i.takeTree(),new n(i)}};at.state=Rt.define({create:ai.init,update(n,t){for(let e of t.effects)if(e.is(at.setState))return e.value;return t.startState.facet(Re)!=t.state.facet(Re)?ai.init(t.state):n.apply(t)}});var il=n=>{let t=setTimeout(()=>n(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(il=n=>{let t=-1,e=setTimeout(()=>{t=requestIdleCallback(n,{timeout:400})},100);return()=>t<0?clearTimeout(e):cancelIdleCallback(t)});var In=typeof navigator<"u"&&(!((Nn=navigator.scheduling)===null||Nn===void 0)&&Nn.isInputPending)?()=>navigator.scheduling.isInputPending():null,oh=ve.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(at.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(at.state);(e.tree!=e.context.tree||!e.context.isDone(t.doc.length))&&(this.working=il(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,r=i.field(at.state);if(r.tree==r.context.tree&&r.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!In?Math.max(25,t.timeRemaining()-5):1e9),l=r.context.treeLen<s&&i.doc.length>s+1e3,a=r.context.work(()=>In&&In()||Date.now()>o,s+(l?0:1e5));this.chunkBudget-=Date.now()-e,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:at.setState.of(new ai(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(e=>xt(this.view.state,e)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Re=P.define({combine(n){return n.length?n[0]:null},enables:n=>[at.state,oh,B.contentAttributes.compute([n],t=>{let e=t.facet(n);return e&&e.name?{"data-language":e.name}:{}})]}),ns=class{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}};var Be=class n{constructor(t,e){this.specs=t;let i;function s(l){let a=ut.newName();return(i||(i=Object.create(null)))["."+a]=l,a}let r=typeof e.all=="string"?e.all:e.all?s(e.all):void 0,o=e.scope;this.scope=o instanceof at?l=>l.prop(De)==o.data:o?l=>l==o:void 0,this.style=Ln(t.map(l=>({tag:l.tag,class:l.class||s(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new ut(i):null,this.themeType=e.themeType}static define(t,e){return new n(t,e||{})}};var Gh=Be.define([{tag:x.meta,color:"#404740"},{tag:x.link,textDecoration:"underline"},{tag:x.heading,textDecoration:"underline",fontWeight:"bold"},{tag:x.emphasis,fontStyle:"italic"},{tag:x.strong,fontWeight:"bold"},{tag:x.strikethrough,textDecoration:"line-through"},{tag:x.keyword,color:"#708"},{tag:[x.atom,x.bool,x.url,x.contentSeparator,x.labelName],color:"#219"},{tag:[x.literal,x.inserted],color:"#164"},{tag:[x.string,x.deleted],color:"#a11"},{tag:[x.regexp,x.escape,x.special(x.string)],color:"#e40"},{tag:x.definition(x.variableName),color:"#00f"},{tag:x.local(x.variableName),color:"#30a"},{tag:[x.typeName,x.namespace],color:"#085"},{tag:x.className,color:"#167"},{tag:[x.special(x.variableName),x.macroName],color:"#256"},{tag:x.definition(x.propertyName),color:"#00c"},{tag:x.comment,color:"#940"},{tag:x.invalid,color:"#f00"}]);var lh=Object.create(null),Jo=[J.none];var tl=[],el=Object.create(null),ah=Object.create(null);for(let[n,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ah[n]=hh(lh,t);function qn(n,t){tl.indexOf(n)>-1||(tl.push(n),console.warn(t))}function hh(n,t){let e=[];for(let l of t.split(" ")){let a=[];for(let h of l.split(".")){let f=n[h]||x[h];f?typeof f=="function"?a.length?a=a.map(f):qn(h,`Modifier ${h} used at start of tag`):a.length?qn(h,`Tag ${h} used as modifier`):a=Array.isArray(f)?f:[f]:qn(h,`Unknown highlighting tag ${h}`)}for(let h of a)e.push(h)}if(!e.length)return 0;let i=t.replace(/ /g,"_"),s=i+" "+e.map(l=>l.id),r=el[s];if(r)return r.id;let o=el[s]=J.define({id:Jo.length,name:i,props:[is({[i]:e})]});return Jo.push(o),o.id}var Jh={rtl:U.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:Y.RTL}),ltr:U.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:Y.LTR}),auto:U.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};var Vn=class n{constructor(t,e,i,s,r,o,l,a,h,f=0,c){this.p=t,this.stack=e,this.state=i,this.reducePos=s,this.pos=r,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=h,this.lookAhead=f,this.parent=c}toString(){return`[${this.stack.filter((t,e)=>e%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,i=0){let s=t.parser.context;return new n(t,[],e,i,i,0,[],0,s?new rs(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var e;let i=t>>19,s=t&65535,{parser:r}=this.p,o=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),l=r.dynamicPrecedence(s);if(l&&(this.score+=l),i==0){this.pushState(r.getGoto(this.state,s,!0),this.reducePos),s<r.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(s,this.reducePos);return}let a=this.stack.length-(i-1)*3-(t&262144?6:0),h=a?this.stack[a-2]:this.p.ranges[0].from,f=this.reducePos-h;f>=2e3&&!(!((e=this.p.parser.nodeSet.types[s])===null||e===void 0)&&e.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=f));let c=a?this.stack[a-1]:0,u=this.bufferBase+this.buffer.length-c;if(s<r.minRepeatTerm||t&131072){let d=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,h,d,u+4,!0)}if(t&262144)this.state=this.stack[a];else{let d=this.stack[a-3];this.state=r.getGoto(d,s,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(s,h)}storeNode(t,e,i,s=4,r=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(e==i)return;if(o.buffer[l-2]>=e){o.buffer[l-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(t,e,i,s);else{let o=this.buffer.length;if(o>0&&(this.buffer[o-4]!=0||this.buffer[o-1]<0)){let l=!1;for(let a=o;a>0&&this.buffer[a-2]>i;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,s>4&&(s-=4)}this.buffer[o]=t,this.buffer[o+1]=e,this.buffer[o+2]=i,this.buffer[o+3]=s}}shift(t,e,i,s){if(t&131072)this.pushState(t&65535,this.pos);else if((t&262144)==0){let r=t,{parser:o}=this.p;this.pos=s;let l=o.stateFlag(r,1);!l&&(s>i||e<=o.maxNode)&&(this.reducePos=s),this.pushState(r,l?i:Math.min(i,this.reducePos)),this.shiftContext(e,i),e<=o.maxNode&&this.buffer.push(e,i,s,4)}else this.pos=s,this.shiftContext(e,i),e<=this.p.parser.maxNode&&this.buffer.push(e,i,s,4)}apply(t,e,i,s){t&65536?this.reduce(t):this.shift(t,e,i,s)}useNode(t,e){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=t)&&(this.p.reused.push(t),i++);let s=this.pos;this.reducePos=this.pos=s+t.length,this.pushState(e,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let i=t.buffer.slice(e),s=t.bufferBase+e;for(;t&&s==t.bufferBase;)t=t.parent;return new n(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let i=t<=this.p.parser.maxNode;i&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,i?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new Xn(this);;){let i=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(i==0)return!1;if((i&65536)==0)return!0;e.reduce(i)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){let s=[];for(let r=0,o;r<e.length;r+=2)(o=e[r+1])!=this.state&&this.p.parser.hasAction(o,t)&&s.push(e[r],o);if(this.stack.length<120)for(let r=0;s.length<8&&r<e.length;r+=2){let o=e[r+1];s.some((l,a)=>a&1&&l==o)||s.push(e[r],o)}e=s}let i=[];for(let s=0;s<e.length&&i.length<4;s+=2){let r=e[s+1];if(r==this.state)continue;let o=this.split();o.pushState(r,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(e[s],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:t}=this.p,e=t.stateSlot(this.state,5);if((e&65536)==0)return!1;if(!t.validAction(this.state,e)){let i=e>>19,s=e&65535,r=this.stack.length-i*3;if(r<0||t.getGoto(this.stack[r],s,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;e=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}findForcedReduction(){let{parser:t}=this.p,e=[],i=(s,r)=>{if(!e.includes(s))return e.push(s),t.allActions(s,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-r;if(l>1){let a=o&65535,h=this.stack.length-l*3;if(h>=0&&t.getGoto(this.stack[h],a,!1)>=0)return l<<19|65536|a}}else{let l=i(o,r+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new rs(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){return t<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=t,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}},rs=class{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}},Xn=class{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=t&65535,i=t>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=s}},Qn=class n{constructor(t,e,i){this.stack=t,this.pos=e,this.index=i,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new n(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new n(this.stack,this.pos,this.index)}};function hi(n,t=Uint16Array){if(typeof n!="string")return n;let e=null;for(let i=0,s=0;i<n.length;){let r=0;for(;;){let o=n.charCodeAt(i++),l=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),r+=a,l)break;r*=46}e?e[s++]=r:e=new t(r)}return e}var Ee=class{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}},sl=new Ee,Zn=class{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=sl,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let i=this.range,s=this.rangeIndex,r=this.pos+t;for(;r<i.from;){if(!s)return null;let o=this.ranges[--s];r-=i.from-o.to,i=o}for(;e<0?r>i.to:r>=i.to;){if(s==this.ranges.length-1)return null;let o=this.ranges[++s];r+=o.from-i.to,i=o}return r}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e=this.chunkOff+t,i,s;if(e>=0&&e<this.chunk.length)i=this.pos+t,s=this.chunk.charCodeAt(e);else{let r=this.resolveOffset(t,1);if(r==null)return-1;if(i=r,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(t,e=0){let i=e?this.resolveOffset(e,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=i}acceptTokenTo(t,e){this.token.value=t,this.token.end=e}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=sl,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let i="";for(let s of this.ranges){if(s.from>=e)break;s.to>t&&(i+=this.input.read(Math.max(s.from,t),Math.min(s.to,e)))}return i}},jt=class{constructor(t,e){this.data=t,this.id=e}token(t,e){let{parser:i}=e.p;al(this.data,t,e,this.id,i.data,i.tokenPrecTable)}};jt.prototype.contextual=jt.prototype.fallback=jt.prototype.extend=!1;var jn=class{constructor(t,e,i){this.precTable=e,this.elseToken=i,this.data=typeof t=="string"?hi(t):t}token(t,e){let i=t.pos,s=0;for(;;){let r=t.next<0,o=t.resolveOffset(1,1);if(al(this.data,t,e,0,this.data,this.precTable),t.token.value>-1)break;if(this.elseToken==null)return;if(r||s++,o==null)break;t.reset(o,t.token)}s&&(t.reset(i,t.token),t.acceptToken(this.elseToken,s))}};jn.prototype.contextual=jt.prototype.fallback=jt.prototype.extend=!1;function al(n,t,e,i,s,r){let o=0,l=1<<i,{dialect:a}=e.p.parser;t:for(;(l&n[o])!=0;){let h=n[o+1];for(let d=o+3;d<h;d+=2)if((n[d+1]&l)>0){let p=n[d];if(a.allows(p)&&(t.token.value==-1||t.token.value==p||ch(p,t.token.value,s,r))){t.acceptToken(p);break}}let f=t.next,c=0,u=n[o+2];if(t.next<0&&u>c&&n[h+u*3-3]==65535){o=n[h+u*3-1];continue t}for(;c<u;){let d=c+u>>1,p=h+d+(d<<1),g=n[p],m=n[p+1]||65536;if(f<g)u=d;else if(f>=m)c=d+1;else{o=n[p+2],t.advance();continue t}}break}}function nl(n,t,e){for(let i=t,s;(s=n[i])!=65535;i++)if(s==e)return i-t;return-1}function ch(n,t,e,i){let s=nl(e,i,t);return s<0||nl(e,i,n)<s}var ht=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG),Hn=null;function rl(n,t,e){let i=n.cursor(z.IncludeAnonymous);for(i.moveTo(t);;)if(!(e<0?i.childBefore(t):i.childAfter(t)))for(;;){if((e<0?i.to<t:i.from>t)&&!i.type.isError)return e<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(n.length,Math.max(i.from+1,t+25));if(e<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return e<0?0:n.length}}var Kn=class{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?rl(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?rl(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let i=this.trees[e],s=this.index[e];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[s],o=this.start[e]+i.positions[s];if(o>t)return this.nextStart=o,null;if(r instanceof X){if(o==t){if(o<this.safeFrom)return null;let l=o+r.length;if(l<=this.safeTo){let a=r.prop(D.lookAhead);if(!a||l+a<this.fragment.to)return r}}this.index[e]++,o+r.length>=Math.max(this.safeFrom,t)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[e]++,this.nextStart=o+r.length}}},Yn=class{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(i=>new Ee)}getActions(t){let e=0,i=null,{parser:s}=t.p,{tokenizers:r}=s,o=s.stateSlot(t.state,3),l=t.curContext?t.curContext.hash:0,a=0;for(let h=0;h<r.length;h++){if((1<<h&o)==0)continue;let f=r[h],c=this.tokens[h];if(!(i&&!f.fallback)&&((f.contextual||c.start!=t.pos||c.mask!=o||c.context!=l)&&(this.updateCachedToken(c,f,t),c.mask=o,c.context=l),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),c.value!=0)){let u=e;if(c.extended>-1&&(e=this.addActions(t,c.extended,c.end,e)),e=this.addActions(t,c.value,c.end,e),!f.extend&&(i=c,e>u))break}}for(;this.actions.length>e;)this.actions.pop();return a&&t.setLookAhead(a),!i&&t.pos==this.stream.end&&(i=new Ee,i.value=t.p.parser.eofTerm,i.start=i.end=t.pos,e=this.addActions(t,i.value,i.end,e)),this.mainToken=i,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new Ee,{pos:i,p:s}=t;return e.start=i,e.end=Math.min(i+1,s.stream.end),e.value=i==s.stream.end?s.parser.eofTerm:0,e}updateCachedToken(t,e,i){let s=this.stream.clipPos(i.pos);if(e.token(this.stream.reset(s,t),i),t.value>-1){let{parser:r}=i.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==t.value){let l=r.specializers[o](this.stream.read(t.start,t.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){(l&1)==0?t.value=l>>1:t.extended=l>>1;break}}}else t.value=0,t.end=this.stream.clipPos(s+1)}putAction(t,e,i,s){for(let r=0;r<s;r+=3)if(this.actions[r]==t)return s;return this.actions[s++]=t,this.actions[s++]=e,this.actions[s++]=i,s}addActions(t,e,i,s){let{state:r}=t,{parser:o}=t.p,{data:l}=o;for(let a=0;a<2;a++)for(let h=o.stateSlot(r,a?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=It(l,h+2);else{s==0&&l[h+1]==2&&(s=this.putAction(It(l,h+2),e,i,s));break}l[h]==e&&(s=this.putAction(It(l,h+1),e,i,s))}return s}},Un=class{constructor(t,e,i,s){this.parser=t,this.input=e,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Zn(e,s),this.tokens=new Yn(t,this.stream),this.topTerm=t.top[1];let{from:r}=s[0];this.stacks=[Vn.start(this,t.top[0],r)],this.fragments=i.length&&this.stream.end-r>t.bufferLength*4?new Kn(i,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,e=this.minStackPos,i=this.stacks=[],s,r;if(this.bigReductionCount>300&&t.length==1){let[o]=t;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<t.length;o++){let l=t[o];for(;;){if(this.tokens.mainToken=null,l.pos>e)i.push(l);else{if(this.advanceStack(l,i,t))continue;{s||(s=[],r=[]),s.push(l);let a=this.tokens.getMainToken(l);r.push(a.value,a.end)}}break}}if(!i.length){let o=s&&uh(s);if(o)return ht&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw ht&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+e);this.recovering||(this.recovering=5)}if(this.recovering&&s){let o=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,r,i);if(o)return ht&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>e)&&this.recovering--}else if(i.length>1){t:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let h=i[a];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue t}}}i.length>12&&(i.sort((o,l)=>l.score-o.score),i.splice(12,i.length-12))}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,i){let s=t.pos,{parser:r}=this,o=ht?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let h=t.curContext&&t.curContext.tracker.strict,f=h?t.curContext.hash:0;for(let c=this.fragments.nodeAt(s);c;){let u=this.parser.nodeSet.types[c.type.id]==c.type?r.getGoto(t.state,c.type.id):-1;if(u>-1&&c.length&&(!h||(c.prop(D.contextHash)||0)==f))return t.useNode(c,u),ht&&console.log(o+this.stackID(t)+` (via reuse of ${r.getName(c.type.id)})`),!0;if(!(c instanceof X)||c.children.length==0||c.positions[0]>0)break;let d=c.children[0];if(d instanceof X&&c.positions[0]==0)c=d;else break}}let l=r.stateSlot(t.state,4);if(l>0)return t.reduce(l),ht&&console.log(o+this.stackID(t)+` (via always-reduce ${r.getName(l&65535)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let a=this.tokens.getActions(t);for(let h=0;h<a.length;){let f=a[h++],c=a[h++],u=a[h++],d=h==a.length||!i,p=d?t:t.split(),g=this.tokens.mainToken;if(p.apply(f,c,g?g.start:p.pos,u),ht&&console.log(o+this.stackID(p)+` (via ${(f&65536)==0?"shift":`reduce of ${r.getName(f&65535)}`} for ${r.getName(c)} @ ${s}${p==t?"":", split"})`),d)return!0;p.pos>s?e.push(p):i.push(p)}return!1}advanceFully(t,e){let i=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>i)return ol(t,e),!0}}runRecovery(t,e,i){let s=null,r=!1;for(let o=0;o<t.length;o++){let l=t[o],a=e[o<<1],h=e[(o<<1)+1],f=ht?this.stackID(l)+" -> ":"";if(l.deadEnd&&(r||(r=!0,l.restart(),ht&&console.log(f+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let c=l.split(),u=f;for(let d=0;d<10&&c.forceReduce()&&(ht&&console.log(u+this.stackID(c)+" (via force-reduce)"),!this.advanceFully(c,i));d++)ht&&(u=this.stackID(c)+" -> ");for(let d of l.recoverByInsert(a))ht&&console.log(f+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>l.pos?(h==l.pos&&(h++,a=0),l.recoverByDelete(a,h),ht&&console.log(f+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),ol(l,i)):(!s||s.score<c.score)&&(s=c)}return s}stackToTree(t){return t.close(),X.build({buffer:Qn.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(Hn||(Hn=new WeakMap)).get(t);return e||Hn.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}};function ol(n,t){for(let e=0;e<t.length;e++){let i=t[e];if(i.pos==n.pos&&i.sameState(n)){t[e].score<n.score&&(t[e]=n);return}}t.push(n)}var _n=class{constructor(t,e,i){this.source=t,this.flags=e,this.disabled=i}allows(t){return!this.disabled||this.disabled[t]==0}};var os=class n extends ue{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let l=0;l<t.repeatNodeCount;l++)e.push("");let i=Object.keys(t.topRules).map(l=>t.topRules[l][1]),s=[];for(let l=0;l<e.length;l++)s.push([]);function r(l,a,h){s[l].push([a,a.deserialize(String(h))])}if(t.nodeProps)for(let l of t.nodeProps){let a=l[0];typeof a=="string"&&(a=D[a]);for(let h=1;h<l.length;){let f=l[h++];if(f>=0)r(f,a,l[h++]);else{let c=l[h+-f];for(let u=-f;u>0;u--)r(l[h++],a,c);h++}}}this.nodeSet=new Ie(e.map((l,a)=>J.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:s[a],top:i.indexOf(a)>-1,error:a==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(a)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=1024;let o=hi(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(ll),this.states=hi(t.states,Uint32Array),this.data=hi(t.stateData),this.goto=hi(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(l=>typeof l=="number"?new jt(o,l):l),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,i){let s=new Un(this,t,e,i);for(let r of this.wrappers)s=r(s,t,e,i);return s}getGoto(t,e,i=!1){let s=this.goto;if(e>=s[0])return-1;for(let r=s[e+1];;){let o=s[r++],l=o&1,a=s[r++];if(l&&i)return a;for(let h=r+(o>>1);r<h;r++)if(s[r]==t)return a;if(l)return-1}}hasAction(t,e){let i=this.data;for(let s=0;s<2;s++)for(let r=this.stateSlot(t,s?2:1),o;;r+=3){if((o=i[r])==65535)if(i[r+1]==1)o=i[r=It(i,r+2)];else{if(i[r+1]==2)return It(i,r+2);break}if(o==e||o==0)return It(i,r+1)}return 0}stateSlot(t,e){return this.states[t*6+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){return!!this.allActions(t,i=>i==e?!0:null)}allActions(t,e){let i=this.stateSlot(t,4),s=i?e(i):void 0;for(let r=this.stateSlot(t,1);s==null;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=It(this.data,r+2);else break;s=e(It(this.data,r+1))}return s}nextStates(t){let e=[];for(let i=this.stateSlot(t,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=It(this.data,i+2);else break;if((this.data[i+2]&1)==0){let s=this.data[i+1];e.some((r,o)=>o&1&&r==s)||e.push(this.data[i],s)}}return e}configure(t){let e=Object.assign(Object.create(n.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let i=this.topRules[t.top];if(!i)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=i}return t.tokenizers&&(e.tokenizers=this.tokenizers.map(i=>{let s=t.tokenizers.find(r=>r.from==i);return s?s.to:i})),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map((i,s)=>{let r=t.specializers.find(l=>l.from==i.external);if(!r)return i;let o=Object.assign(Object.assign({},i),{external:r.to});return e.specializers[s]=ll(o),o})),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),t.bufferLength!=null&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return e==null?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),i=e.map(()=>!1);if(t)for(let r of t.split(" ")){let o=e.indexOf(r);o>=0&&(i[o]=!0)}let s=null;for(let r=0;r<e.length;r++)if(!i[r])for(let o=this.dialects[e[r]],l;(l=this.data[o++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[l]=1;return new _n(t,i,s)}static deserialize(t){return new n(t)}};function It(n,t){return n[t]|n[t+1]<<16}function uh(n){let t=null;for(let e of n){let i=e.p.stoppedAt;(e.pos==e.p.stream.end||i!=null&&e.pos>i)&&e.p.parser.stateFlag(e.state,2)&&(!t||t.score<e.score)&&(t=e)}return t}function ll(n){if(n.external){let t=n.extend?1:0;return(e,i)=>n.external(e,i)<<1|t}return n.get}var hl=os.deserialize({version:14,states:"!^QVQPOOOOQO'#C`'#C`OOQO'#DU'#DUO#cQPO'#C^OOQO'#C^'#C^OOQO'#DT'#DTQVQPOOOOQO-E7S-E7SOOQO,58x,58xOOQO-E7R-E7R",stateData:"$X~O{OS~ORSOTPOUPOVPOWPOXPOYPOZPO[PO]PO^PO_PO`POaPObPOcPOdPOePOfPOgPOhPOiPOjPOkPOlPOmPOnPOoPOpPOqPOrPOsPOtPOuPO~OvWO~PYORmlkjihgfedcba`o^_[ZYXWVUT]u~",goto:"!byPPzP!OPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP!T!ZTTOUVQORUQUORXUSROURVR",nodeNames:"\u26A0 Program Sentence Comment Atom Fix By Example Exercise Proof QED Given Assume Conclusion Lets Let Us Prove That We Compute Conclude ByWord Applied To Using Get Such It Suffices String LParen RParen LBrace RBrace LBracket RBracket Chunk EndOfSentence",maxTerm:43,skippedNodes:[0],repeatNodeCount:2,tokenData:"#?u~R![OX$wXY%xYZ&WZ]$w]^%x^p$wpq%xqr$wrs&]sx$wxy'yyz)Sz}$w}!O)X!O!c$w!c!d,a!d!e3d!e!f5b!f!g$w!g!h@i!h!iMt!i!j!!s!j!n$w!n!o!(u!o!r$w!r!s!-{!s!t!3}!t!y$w!y!z!6|!z!}$w!}#O!8z#O#P$w#P#Q!9P#Q#T$w#T#U!9U#U#V!@X#V#W!BV#W#Z$w#Z#[# _#[#]$w#]#^#$^#^#d$w#d#e#&[#e#g$w#g#h#+]#h#i#5e#i#j#:h#j#k$w#k#l!6|#l#o$w#o#p#?k#p#q$w#q#r#?p#r;'S$w;'S;=`%r<%l~$w~O$w~~&W~$|[u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~%uP;=`<%l$w~%}R{~XY%x]^%xpq%x~&]Ov~~&`VOr&]rs&us#O&]#O#P&z#P;'S&];'S;=`'s<%lO&]~&zOn~~&}RO;'S&];'S;=`'W;=`O&]~'ZWOr&]rs&us#O&]#O#P&z#P;'S&];'S;=`'s;=`<%l&]<%lO&]~'vP;=`<%l&]~(OPo~z{(R~(UTOz(Rz{(e{;'S(R;'S;=`(|<%lO(R~(hTOy(Ryz(wz;'S(R;'S;=`(|<%lO(R~(|OR~~)PP;=`<%l(R~)XOp~~)^^u~OX$wZ]$w^p$wqr$wsx$wz}$w}!O*Y!O!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~*aeR~u~OX*YXY+rZ]*Y]^+r^p*Ypq+rqr*Yrs+rsx*Yxz+rz!}*Y!}#O+r#O#P*Y#P#Q+r#Q#o*Y#o#p+r#p#q*Y#q#r+r#r;'S*Y;'S;=`,Z<%lO*Y~+wSR~OY+rZ;'S+r;'S;=`,T<%lO+r~,WP;=`<%l+r~,^P;=`<%l*Y~,f^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#g$w#g#h-b#h#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~-g^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#g$w#g#h.c#h#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~.h^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#i$w#i#j/d#j#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~/i^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#a$w#a#b0e#b#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~0j^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#X$w#X#Y1f#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~1k^u~OX$wZ]$w^p$wqr$wsx$wz![$w![!]2g!]!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~2n[[~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~3i^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#m$w#m#n4e#n#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~4l[U~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~5g^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#c$w#c#d6c#d#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~6h^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#b$w#b#c7d#c#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~7i^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#V$w#V#W8e#W#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~8j^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#`$w#`#a9f#a#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~9k^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#i$w#i#j:g#j#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~:l^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#g$w#g#h;h#h#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~;m^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#]$w#]#^<i#^#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~<n^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#c$w#c#d=j#d#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~=o^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#b$w#b#c>k#c#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~>p^u~OX$wZ]$w^p$wqr$wsx$wz![$w![!]?l!]!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~?s[]~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~@n^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#l$w#l#mAj#m#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~Ao`u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#T$w#T#UBq#U#X$w#X#YGr#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~Bv^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#a$w#a#bCr#b#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~Cw^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#d$w#d#eDs#e#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~Dx^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#`$w#`#aEt#a#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~Ey^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#X$w#X#YFu#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~F|[V~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~Gw^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#f$w#f#gHs#g#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~Hx^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#V$w#V#WIt#W#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~Iy^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#]$w#]#^Ju#^#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~Jz^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#g$w#g#hKv#h#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~K{^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#X$w#X#YLw#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~MO[W~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~My^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#]$w#]#^Nu#^#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~Nz^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#l$w#l#m! v#m#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~! }[T~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!!x^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#]$w#]#^!#t#^#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!#y^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#j$w#j#k!$u#k#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!$z^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#X$w#X#Y!%v#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!%{^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#b$w#b#c!&w#c#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!&|^u~OX$wZ]$w^p$wqr$wsx$wz![$w![!]!'x!]!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!(P[Z~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!(z^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#X$w#X#Y!)v#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!){^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#h$w#h#i!*w#i#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!+O__~u~OX$wZ]$w^p$wqr$wsw$wwx!+}z!}$w#O#P$w#Q#g$w#g#h!-O#h#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!,S^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#g$w#g#h!-O#h#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!-V[^~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!.Q^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#f$w#f#g!.|#g#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!/R^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#c$w#c#d!/}#d#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!0S^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#c$w#c#d!1O#d#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!1T^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#Y$w#Y#Z!2P#Z#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!2U^u~OX$wZ]$w^p$wqr$wsx$wz![$w![!]!3Q!]!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!3X[X~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!4S^u~OX$wZ]$w^p$wqr$wsx$wz!g$w!g!h!5O!h!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!5T^u~OX$wZ]$w^p$wqr$wsx$wz!f$w!f!g!6P!g!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!6W[Y~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!7R^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#X$w#X#Y!7}#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!8U[c~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!9POs~~!9UOt~~!9Z^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#d$w#d#e!:V#e#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!:[^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#d$w#d#e!;W#e#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!;]^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#`$w#`#a!<X#a#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!<^^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#]$w#]#^!=Y#^#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!=_^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#X$w#X#Y!>Z#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!>`^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#W$w#W#X!?[#X#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!?c[g~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!@^^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#m$w#m#n!AY#n#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!Aa[f~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!B[^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#c$w#c#d!CW#d#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!C]_u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#a$w#a#b!D[#b#c!I]#c#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!Da^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#d$w#d#e!E]#e#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!Eb^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#i$w#i#j!F^#j#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!Fc^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#h$w#h#i!G_#i#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!Gd^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#X$w#X#Y!H`#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!Hg[d~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!Ib^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#V$w#V#W!J^#W#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!Jc^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#`$w#`#a!K_#a#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!Kd^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#i$w#i#j!L`#j#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!Le^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#W$w#W#X!Ma#X#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!Mf^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#X$w#X#Y!Nb#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~!Ni[e~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~# d^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#X$w#X#Y#!`#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#!e^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#h$w#h#i##a#i#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~##h[j~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#$c^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#h$w#h#i#%_#i#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#%f[l~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#&a^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#f$w#f#g#']#g#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#'b^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#c$w#c#d#(^#d#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#(c^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#j$w#j#k#)_#k#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#)d^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#X$w#X#Y#*`#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#*g[a~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#+b^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#i$w#i#j#,^#j#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#,c`u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#V$w#V#W#-e#W#Y$w#Y#Z#/c#Z#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#-j^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#[$w#[#]#.f#]#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#.m[k~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#/h^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#Y$w#Y#Z#0d#Z#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#0i^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#]$w#]#^#1e#^#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#1j^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#V$w#V#W#2f#W#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#2k^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#X$w#X#Y#3g#Y#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#3l^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#g$w#g#h#4h#h#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#4o[m~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#5j`u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#[$w#[#]#6l#]#c$w#c#d#9k#d#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#6q^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#T$w#T#U#7m#U#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#7r^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#h$w#h#i#8n#i#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#8u[b~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#9r[h~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#:m^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#g$w#g#h#;i#h#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#;p^`~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#]$w#]#^#<l#^#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#<q^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#b$w#b#c#=m#c#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#=r^u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#Z$w#Z#[#>n#[#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#>u[i~u~OX$wZ]$w^p$wqr$wsx$wz!}$w#O#P$w#Q#o$w#p#q$w#r;'S$w;'S;=`%r<%lO$w~#?pOq~~#?uOr~",tokenizers:[0],topRules:{Program:[0,1]},tokenPrec:118});var S={verbose:_.define(),tactic:_.define(),argument:_.define(),param:_.define(),string:_.define(),comment:_.define(),bracket:_.define()},dh=Be.define([{tag:S.verbose,color:"#912828"},{tag:S.tactic,color:"#56b3ffff"},{tag:S.param,color:"#0077ee"},{tag:S.string,color:"#00aa00"},{tag:S.comment,color:"#9ea0b1ff"},{tag:S.bracket,color:"#ff0000"}]),ph=Be.define([{tag:S.verbose,color:"#eb0808ff"},{tag:S.tactic,color:"#004cf0ff"},{tag:S.param,color:"#0077aa"},{tag:S.string,color:"#00aa00"},{tag:S.comment,color:"#787c99"},{tag:S.bracket,color:"#ff0000"}]),fl=ss.define({parser:hl.configure({props:[is({Example:S.verbose,Exercise:S.verbose,Proof:S.verbose,QED:S.verbose,Given:S.param,Assume:S.param,Conclusion:S.param,Fix:S.tactic,By:S.tactic,Lets:S.tactic,Let:S.tactic,Us:S.tactic,Prove:S.tactic,That:S.tactic,We:S.tactic,Compute:S.tactic,Conclude:S.tactic,ByWord:S.tactic,Applied:S.tactic,To:S.tactic,Using:S.tactic,Get:S.tactic,Such:S.tactic,It:S.tactic,Suffices:S.tactic,Chunk:S.argument,Comment:S.comment,String:S.string,LParen:S.bracket,RParen:S.bracket,LBrace:S.bracket,RBrace:S.bracket,LBracket:S.bracket,RBracket:S.bracket})]}),name:"leanVerbose"});function gh(){return new ns(fl)}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2luZGV4LnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AbGV6ZXIvY29tbW9uL2Rpc3QvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL0BtYXJpam4vZmluZC1jbHVzdGVyLWJyZWFrL3NyYy9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvQGNvZGVtaXJyb3Ivc3RhdGUvZGlzdC9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3R5bGUtbW9kL3NyYy9zdHlsZS1tb2QuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3czYy1rZXluYW1lL2luZGV4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9AY29kZW1pcnJvci92aWV3L2Rpc3QvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL0BsZXplci9oaWdobGlnaHQvZGlzdC9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvQGNvZGVtaXJyb3IvbGFuZ3VhZ2UvZGlzdC9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvQGxlemVyL2xyL2Rpc3QvaW5kZXguanMiLCAiLi4vc3JjL3N5bnRheC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gSW1wb3J0aW5nIG5lY2Vzc2FyeSBtb2R1bGVzIGZyb20gdGhlIENvZGVtaXJyb3IgbGlicmFyeVxuaW1wb3J0IHtcbiAgICBIaWdobGlnaHRTdHlsZSwgTFJMYW5ndWFnZSwgTGFuZ3VhZ2VTdXBwb3J0LCBzeW50YXhIaWdobGlnaHRpbmdcbn0gZnJvbSBcIkBjb2RlbWlycm9yL2xhbmd1YWdlXCJcbmltcG9ydCB7IFRhZywgc3R5bGVUYWdzIH0gZnJvbSBcIkBsZXplci9oaWdobGlnaHRcIlxuXG4vLyBJbXBvcnRpbmcgdGhlIHBhcnNlciBmb3IgdGhlIExlYW4gVmVyYm9zZVxuaW1wb3J0IHsgcGFyc2VyIH0gZnJvbSBcIi4vc3ludGF4XCJcblxuLy8gRGVmaW5pbmcgY3VzdG9tIHRhZ3MgZm9yIHNwZWNpZmljIGVsZW1lbnRzIG9mIHRoZSBMZWFuIFZlcmJvc2VcbmNvbnN0IHRhZ3MgPSB7XG4gICAgdmVyYm9zZTogVGFnLmRlZmluZSgpLFxuICAgIHRhY3RpYzogVGFnLmRlZmluZSgpLFxuICAgIGFyZ3VtZW50OiBUYWcuZGVmaW5lKCksXG4gICAgcGFyYW06IFRhZy5kZWZpbmUoKSxcbiAgICBzdHJpbmc6IFRhZy5kZWZpbmUoKSxcbiAgICBjb21tZW50OiBUYWcuZGVmaW5lKCksXG4gICAgYnJhY2tldDogVGFnLmRlZmluZSgpLFxufVxuXG4vLyBIaWdobGlnaHRpbmcgc3BlY2lmaWMgZWxlbWVudHMgb2YgdGhlIExlYW4gVmVyYm9zZVxuZXhwb3J0IGNvbnN0IGhpZ2hsaWdodF9kYXJrID0gSGlnaGxpZ2h0U3R5bGUuZGVmaW5lKFtcbiAgICB7IHRhZzogdGFncy52ZXJib3NlLCBjb2xvcjogXCIjOTEyODI4XCIgfSxcbiAgICB7IHRhZzogdGFncy50YWN0aWMsIGNvbG9yOiBcIiM1NmIzZmZmZlwiIH0sXG4gICAgeyB0YWc6IHRhZ3MucGFyYW0sIGNvbG9yOiBcIiMwMDc3ZWVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnN0cmluZywgY29sb3I6IFwiIzAwYWEwMFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuY29tbWVudCwgY29sb3I6IFwiIzllYTBiMWZmXCIgfSxcbiAgICB7IHRhZzogdGFncy5icmFja2V0LCBjb2xvcjogXCIjZmYwMDAwXCIgfSxcbl0pXG5cbi8vIEhpZ2hsaWdodGluZyBzcGVjaWZpYyBlbGVtZW50cyBvZiB0aGUgTGVhbiBWZXJib3NlXG5leHBvcnQgY29uc3QgaGlnaGxpZ2h0X2xpZ2h0ID0gSGlnaGxpZ2h0U3R5bGUuZGVmaW5lKFtcbiAgICB7IHRhZzogdGFncy52ZXJib3NlLCBjb2xvcjogXCIjZWIwODA4ZmZcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnRhY3RpYywgY29sb3I6IFwiIzAwNGNmMGZmXCIgfSxcbiAgICB7IHRhZzogdGFncy5wYXJhbSwgY29sb3I6IFwiIzAwNzdhYVwiIH0sXG4gICAgeyB0YWc6IHRhZ3Muc3RyaW5nLCBjb2xvcjogXCIjMDBhYTAwXCIgfSxcbiAgICB7IHRhZzogdGFncy5jb21tZW50LCBjb2xvcjogXCIjNzg3Yzk5XCIgfSxcbiAgICB7IHRhZzogdGFncy5icmFja2V0LCBjb2xvcjogXCIjZmYwMDAwXCIgfSxcbl0pO1xuXG4vLyBEZWZpbmluZyB0aGUgTGVhbiBWZXJib3NlIHN5bnRheCwgaGlnaGxpZ2h0aW5nIGFuZCBpbmRlbnRhdGlvblxuZXhwb3J0IGNvbnN0IGxlYW5WZXJib3NlTGFuZ3VhZ2UgPSBMUkxhbmd1YWdlLmRlZmluZSh7XG4gICAgcGFyc2VyOiBwYXJzZXIuY29uZmlndXJlKHtcbiAgICAgICAgcHJvcHM6IFtcbiAgICAgICAgICAgIHN0eWxlVGFncyh7XG4gICAgICAgICAgICAgICAgLy8gc3RydWN0dXJlXG4gICAgICAgICAgICAgICAgXCJFeGFtcGxlXCI6IHRhZ3MudmVyYm9zZSxcbiAgICAgICAgICAgICAgICBcIkV4ZXJjaXNlXCI6IHRhZ3MudmVyYm9zZSxcbiAgICAgICAgICAgICAgICBcIlByb29mXCI6IHRhZ3MudmVyYm9zZSxcbiAgICAgICAgICAgICAgICBcIlFFRFwiOiB0YWdzLnZlcmJvc2UsXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXCJHaXZlblwiOiB0YWdzLnBhcmFtLFxuICAgICAgICAgICAgICAgIFwiQXNzdW1lXCI6IHRhZ3MucGFyYW0sXG4gICAgICAgICAgICAgICAgXCJDb25jbHVzaW9uXCI6IHRhZ3MucGFyYW0sXG5cbiAgICAgICAgICAgICAgICAvLyB0YWN0aWNzIC8gY29ubmVjdG9ycyAvIGVuZ2xpc2gga2V5d29yZHNcbiAgICAgICAgICAgICAgICBcIkZpeFwiOiB0YWdzLnRhY3RpYyxcbiAgICAgICAgICAgICAgICBcIkJ5XCI6IHRhZ3MudGFjdGljLFxuICAgICAgICAgICAgICAgIFwiTGV0c1wiOiB0YWdzLnRhY3RpYyxcbiAgICAgICAgICAgICAgICBcIkxldFwiOiB0YWdzLnRhY3RpYyxcbiAgICAgICAgICAgICAgICBcIlVzXCI6IHRhZ3MudGFjdGljLFxuICAgICAgICAgICAgICAgIFwiUHJvdmVcIjogdGFncy50YWN0aWMsXG4gICAgICAgICAgICAgICAgXCJUaGF0XCI6IHRhZ3MudGFjdGljLFxuICAgICAgICAgICAgICAgIFwiV2VcIjogdGFncy50YWN0aWMsXG4gICAgICAgICAgICAgICAgXCJDb21wdXRlXCI6IHRhZ3MudGFjdGljLFxuICAgICAgICAgICAgICAgIFwiQ29uY2x1ZGVcIjogdGFncy50YWN0aWMsXG4gICAgICAgICAgICAgICAgXCJCeVdvcmRcIjogdGFncy50YWN0aWMsXG4gICAgICAgICAgICAgICAgXCJBcHBsaWVkXCI6IHRhZ3MudGFjdGljLFxuICAgICAgICAgICAgICAgIFwiVG9cIjogdGFncy50YWN0aWMsXG4gICAgICAgICAgICAgICAgXCJVc2luZ1wiOiB0YWdzLnRhY3RpYyxcbiAgICAgICAgICAgICAgICBcIkdldFwiOiB0YWdzLnRhY3RpYyxcbiAgICAgICAgICAgICAgICBcIlN1Y2hcIjogdGFncy50YWN0aWMsXG4gICAgICAgICAgICAgICAgXCJJdFwiOiB0YWdzLnRhY3RpYyxcbiAgICAgICAgICAgICAgICBcIlN1ZmZpY2VzXCI6IHRhZ3MudGFjdGljLFxuXG4gICAgICAgICAgICAgICAgLy8gZ2VuZXJpY1xuICAgICAgICAgICAgICAgIFwiQ2h1bmtcIjogdGFncy5hcmd1bWVudCxcbiAgICAgICAgICAgICAgICBcIkNvbW1lbnRcIjogdGFncy5jb21tZW50LFxuICAgICAgICAgICAgICAgIFwiU3RyaW5nXCI6IHRhZ3Muc3RyaW5nLFxuXG4gICAgICAgICAgICAgICAgLy8gcHVuY3R1YXRpb25cbiAgICAgICAgICAgICAgICBcIkxQYXJlblwiOiB0YWdzLmJyYWNrZXQsXG4gICAgICAgICAgICAgICAgXCJSUGFyZW5cIjogdGFncy5icmFja2V0LFxuICAgICAgICAgICAgICAgIFwiTEJyYWNlXCI6IHRhZ3MuYnJhY2tldCxcbiAgICAgICAgICAgICAgICBcIlJCcmFjZVwiOiB0YWdzLmJyYWNrZXQsXG4gICAgICAgICAgICAgICAgXCJMQnJhY2tldFwiOiB0YWdzLmJyYWNrZXQsXG4gICAgICAgICAgICAgICAgXCJSQnJhY2tldFwiOiB0YWdzLmJyYWNrZXQsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgXVxuICAgIH0pLFxuICAgIG5hbWU6IFwibGVhblZlcmJvc2VcIlxufSlcblxuZXhwb3J0IGZ1bmN0aW9uIHZlcmJvc2UoKSB7XG4gICAgcmV0dXJuIG5ldyBMYW5ndWFnZVN1cHBvcnQobGVhblZlcmJvc2VMYW5ndWFnZSlcbn1cbiIsICIvKipcblRoZSBkZWZhdWx0IG1heGltdW0gbGVuZ3RoIG9mIGEgYFRyZWVCdWZmZXJgIG5vZGUuXG4qL1xuY29uc3QgRGVmYXVsdEJ1ZmZlckxlbmd0aCA9IDEwMjQ7XG5sZXQgbmV4dFByb3BJRCA9IDA7XG5jbGFzcyBSYW5nZSB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgIH1cbn1cbi8qKlxuRWFjaCBbbm9kZSB0eXBlXSgjY29tbW9uLk5vZGVUeXBlKSBvciBbaW5kaXZpZHVhbCB0cmVlXSgjY29tbW9uLlRyZWUpXG5jYW4gaGF2ZSBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggaXQgaW4gcHJvcHMuIEluc3RhbmNlcyBvZiB0aGlzXG5jbGFzcyByZXByZXNlbnQgcHJvcCBuYW1lcy5cbiovXG5jbGFzcyBOb2RlUHJvcCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbmV3IG5vZGUgcHJvcCB0eXBlLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICAgICAgdGhpcy5pZCA9IG5leHRQcm9wSUQrKztcbiAgICAgICAgdGhpcy5wZXJOb2RlID0gISFjb25maWcucGVyTm9kZTtcbiAgICAgICAgdGhpcy5kZXNlcmlhbGl6ZSA9IGNvbmZpZy5kZXNlcmlhbGl6ZSB8fCAoKCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBub2RlIHR5cGUgZG9lc24ndCBkZWZpbmUgYSBkZXNlcmlhbGl6ZSBmdW5jdGlvblwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29tYmluZSA9IGNvbmZpZy5jb21iaW5lIHx8IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoaXMgaXMgbWVhbnQgdG8gYmUgdXNlZCB3aXRoXG4gICAgW2BOb2RlU2V0LmV4dGVuZGBdKCNjb21tb24uTm9kZVNldC5leHRlbmQpIG9yXG4gICAgW2BMUlBhcnNlci5jb25maWd1cmVgXSgjbHIuUGFyc2VyQ29uZmlnLnByb3BzKSB0byBjb21wdXRlXG4gICAgcHJvcCB2YWx1ZXMgZm9yIGVhY2ggbm9kZSB0eXBlIGluIHRoZSBzZXQuIFRha2VzIGEgW21hdGNoXG4gICAgb2JqZWN0XSgjY29tbW9uLk5vZGVUeXBlXm1hdGNoKSBvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgdW5kZWZpbmVkXG4gICAgaWYgdGhlIG5vZGUgdHlwZSBkb2Vzbid0IGdldCB0aGlzIHByb3AsIGFuZCB0aGUgcHJvcCdzIHZhbHVlIGlmXG4gICAgaXQgZG9lcy5cbiAgICAqL1xuICAgIGFkZChtYXRjaCkge1xuICAgICAgICBpZiAodGhpcy5wZXJOb2RlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJDYW4ndCBhZGQgcGVyLW5vZGUgcHJvcHMgdG8gbm9kZSB0eXBlc1wiKTtcbiAgICAgICAgaWYgKHR5cGVvZiBtYXRjaCAhPSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICBtYXRjaCA9IE5vZGVUeXBlLm1hdGNoKG1hdGNoKTtcbiAgICAgICAgcmV0dXJuICh0eXBlKSA9PiB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gbWF0Y2godHlwZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBudWxsIDogW3RoaXMsIHJlc3VsdF07XG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG5Qcm9wIHRoYXQgaXMgdXNlZCB0byBkZXNjcmliZSBtYXRjaGluZyBkZWxpbWl0ZXJzLiBGb3Igb3BlbmluZ1xuZGVsaW1pdGVycywgdGhpcyBob2xkcyBhbiBhcnJheSBvZiBub2RlIG5hbWVzICh3cml0dGVuIGFzIGFcbnNwYWNlLXNlcGFyYXRlZCBzdHJpbmcgd2hlbiBkZWNsYXJpbmcgdGhpcyBwcm9wIGluIGEgZ3JhbW1hcilcbmZvciB0aGUgbm9kZSB0eXBlcyBvZiBjbG9zaW5nIGRlbGltaXRlcnMgdGhhdCBtYXRjaCBpdC5cbiovXG5Ob2RlUHJvcC5jbG9zZWRCeSA9IG5ldyBOb2RlUHJvcCh7IGRlc2VyaWFsaXplOiBzdHIgPT4gc3RyLnNwbGl0KFwiIFwiKSB9KTtcbi8qKlxuVGhlIGludmVyc2Ugb2YgW2BjbG9zZWRCeWBdKCNjb21tb24uTm9kZVByb3BeY2xvc2VkQnkpLiBUaGlzIGlzXG5hdHRhY2hlZCB0byBjbG9zaW5nIGRlbGltaXRlcnMsIGhvbGRpbmcgYW4gYXJyYXkgb2Ygbm9kZSBuYW1lc1xub2YgdHlwZXMgb2YgbWF0Y2hpbmcgb3BlbmluZyBkZWxpbWl0ZXJzLlxuKi9cbk5vZGVQcm9wLm9wZW5lZEJ5ID0gbmV3IE5vZGVQcm9wKHsgZGVzZXJpYWxpemU6IHN0ciA9PiBzdHIuc3BsaXQoXCIgXCIpIH0pO1xuLyoqXG5Vc2VkIHRvIGFzc2lnbiBub2RlIHR5cGVzIHRvIGdyb3VwcyAoZm9yIGV4YW1wbGUsIGFsbCBub2RlXG50eXBlcyB0aGF0IHJlcHJlc2VudCBhbiBleHByZXNzaW9uIGNvdWxkIGJlIHRhZ2dlZCB3aXRoIGFuXG5gXCJFeHByZXNzaW9uXCJgIGdyb3VwKS5cbiovXG5Ob2RlUHJvcC5ncm91cCA9IG5ldyBOb2RlUHJvcCh7IGRlc2VyaWFsaXplOiBzdHIgPT4gc3RyLnNwbGl0KFwiIFwiKSB9KTtcbi8qKlxuQXR0YWNoZWQgdG8gbm9kZXMgdG8gaW5kaWNhdGUgdGhlc2Ugc2hvdWxkIGJlXG5bZGlzcGxheWVkXShodHRwczovL2NvZGVtaXJyb3IubmV0L2RvY3MvcmVmLyNsYW5ndWFnZS5zeW50YXhUcmVlKVxuaW4gYSBiaWRpcmVjdGlvbmFsIHRleHQgaXNvbGF0ZSwgc28gdGhhdCBkaXJlY3Rpb24tbmV1dHJhbFxuY2hhcmFjdGVycyBvbiB0aGVpciBzaWRlcyBkb24ndCBpbmNvcnJlY3RseSBnZXQgYXNzb2NpYXRlZCB3aXRoXG5zdXJyb3VuZGluZyB0ZXh0LiBZb3UnbGwgZ2VuZXJhbGx5IHdhbnQgdG8gc2V0IHRoaXMgZm9yIG5vZGVzXG50aGF0IGNvbnRhaW4gYXJiaXRyYXJ5IHRleHQsIGxpa2Ugc3RyaW5ncyBhbmQgY29tbWVudHMsIGFuZCBmb3Jcbm5vZGVzIHRoYXQgYXBwZWFyIF9pbnNpZGVfIGFyYml0cmFyeSB0ZXh0LCBsaWtlIEhUTUwgdGFncy4gV2hlblxubm90IGdpdmVuIGEgdmFsdWUsIGluIGEgZ3JhbW1hciBkZWNsYXJhdGlvbiwgZGVmYXVsdHMgdG9cbmBcImF1dG9cImAuXG4qL1xuTm9kZVByb3AuaXNvbGF0ZSA9IG5ldyBOb2RlUHJvcCh7IGRlc2VyaWFsaXplOiB2YWx1ZSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZSAhPSBcInJ0bFwiICYmIHZhbHVlICE9IFwibHRyXCIgJiYgdmFsdWUgIT0gXCJhdXRvXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgdmFsdWUgZm9yIGlzb2xhdGU6IFwiICsgdmFsdWUpO1xuICAgICAgICByZXR1cm4gdmFsdWUgfHwgXCJhdXRvXCI7XG4gICAgfSB9KTtcbi8qKlxuVGhlIGhhc2ggb2YgdGhlIFtjb250ZXh0XSgjbHIuQ29udGV4dFRyYWNrZXIuY29uc3RydWN0b3IpXG50aGF0IHRoZSBub2RlIHdhcyBwYXJzZWQgaW4sIGlmIGFueS4gVXNlZCB0byBsaW1pdCByZXVzZSBvZlxuY29udGV4dHVhbCBub2Rlcy5cbiovXG5Ob2RlUHJvcC5jb250ZXh0SGFzaCA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7XG4vKipcblRoZSBkaXN0YW5jZSBiZXlvbmQgdGhlIGVuZCBvZiB0aGUgbm9kZSB0aGF0IHRoZSB0b2tlbml6ZXJcbmxvb2tlZCBhaGVhZCBmb3IgYW55IG9mIHRoZSB0b2tlbnMgaW5zaWRlIHRoZSBub2RlLiAoVGhlIExSXG5wYXJzZXIgb25seSBzdG9yZXMgdGhpcyB3aGVuIGl0IGlzIGxhcmdlciB0aGFuIDI1LCBmb3JcbmVmZmljaWVuY3kgcmVhc29ucy4pXG4qL1xuTm9kZVByb3AubG9va0FoZWFkID0gbmV3IE5vZGVQcm9wKHsgcGVyTm9kZTogdHJ1ZSB9KTtcbi8qKlxuVGhpcyBwZXItbm9kZSBwcm9wIGlzIHVzZWQgdG8gcmVwbGFjZSBhIGdpdmVuIG5vZGUsIG9yIHBhcnQgb2YgYVxubm9kZSwgd2l0aCBhbm90aGVyIHRyZWUuIFRoaXMgaXMgdXNlZnVsIHRvIGluY2x1ZGUgdHJlZXMgZnJvbVxuZGlmZmVyZW50IGxhbmd1YWdlcyBpbiBtaXhlZC1sYW5ndWFnZSBwYXJzZXJzLlxuKi9cbk5vZGVQcm9wLm1vdW50ZWQgPSBuZXcgTm9kZVByb3AoeyBwZXJOb2RlOiB0cnVlIH0pO1xuLyoqXG5BIG1vdW50ZWQgdHJlZSwgd2hpY2ggY2FuIGJlIFtzdG9yZWRdKCNjb21tb24uTm9kZVByb3BebW91bnRlZCkgb25cbmEgdHJlZSBub2RlIHRvIGluZGljYXRlIHRoYXQgcGFydHMgb2YgaXRzIGNvbnRlbnQgYXJlXG5yZXByZXNlbnRlZCBieSBhbm90aGVyIHRyZWUuXG4qL1xuY2xhc3MgTW91bnRlZFRyZWUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBpbm5lciB0cmVlLlxuICAgICovXG4gICAgdHJlZSwgXG4gICAgLyoqXG4gICAgSWYgdGhpcyBpcyBudWxsLCB0aGlzIHRyZWUgcmVwbGFjZXMgdGhlIGVudGlyZSBub2RlIChpdCB3aWxsXG4gICAgYmUgaW5jbHVkZWQgaW4gdGhlIHJlZ3VsYXIgaXRlcmF0aW9uIGluc3RlYWQgb2YgaXRzIGhvc3RcbiAgICBub2RlKS4gSWYgbm90LCBvbmx5IHRoZSBnaXZlbiByYW5nZXMgYXJlIGNvbnNpZGVyZWQgdG8gYmVcbiAgICBjb3ZlcmVkIGJ5IHRoaXMgdHJlZS4gVGhpcyBpcyB1c2VkIGZvciB0cmVlcyB0aGF0IGFyZSBtaXhlZCBpblxuICAgIGEgd2F5IHRoYXQgaXNuJ3Qgc3RyaWN0bHkgaGllcmFyY2hpY2FsLiBTdWNoIG1vdW50ZWQgdHJlZXMgYXJlXG4gICAgb25seSBlbnRlcmVkIGJ5IFtgcmVzb2x2ZUlubmVyYF0oI2NvbW1vbi5UcmVlLnJlc29sdmVJbm5lcilcbiAgICBhbmQgW2BlbnRlcmBdKCNjb21tb24uU3ludGF4Tm9kZS5lbnRlcikuXG4gICAgKi9cbiAgICBvdmVybGF5LCBcbiAgICAvKipcbiAgICBUaGUgcGFyc2VyIHVzZWQgdG8gY3JlYXRlIHRoaXMgc3VidHJlZS5cbiAgICAqL1xuICAgIHBhcnNlciwgXG4gICAgLyoqXG4gICAgW0luZGljYXRlc10oI2NvbW1vbi5JdGVyTW9kZS5FbnRlckJyYWNrZXRlZCkgdGhhdCB0aGUgbmVzdGVkXG4gICAgY29udGVudCBpcyBkZWxpbmVhdGVkIHdpdGggc29tZSBraW5kXG4gICAgb2YgYnJhY2tldCB0b2tlbi5cbiAgICAqL1xuICAgIGJyYWNrZXRlZCA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgIHRoaXMub3ZlcmxheSA9IG92ZXJsYXk7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLmJyYWNrZXRlZCA9IGJyYWNrZXRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgZ2V0KHRyZWUpIHtcbiAgICAgICAgcmV0dXJuIHRyZWUgJiYgdHJlZS5wcm9wcyAmJiB0cmVlLnByb3BzW05vZGVQcm9wLm1vdW50ZWQuaWRdO1xuICAgIH1cbn1cbmNvbnN0IG5vUHJvcHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuLyoqXG5FYWNoIG5vZGUgaW4gYSBzeW50YXggdHJlZSBoYXMgYSBub2RlIHR5cGUgYXNzb2NpYXRlZCB3aXRoIGl0LlxuKi9cbmNsYXNzIE5vZGVUeXBlIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBuYW1lIG9mIHRoZSBub2RlIHR5cGUuIE5vdCBuZWNlc3NhcmlseSB1bmlxdWUsIGJ1dCBpZiB0aGVcbiAgICBncmFtbWFyIHdhcyB3cml0dGVuIHByb3Blcmx5LCBkaWZmZXJlbnQgbm9kZSB0eXBlcyB3aXRoIHRoZVxuICAgIHNhbWUgbmFtZSB3aXRoaW4gYSBub2RlIHNldCBzaG91bGQgcGxheSB0aGUgc2FtZSBzZW1hbnRpY1xuICAgIHJvbGUuXG4gICAgKi9cbiAgICBuYW1lLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHByb3BzLCBcbiAgICAvKipcbiAgICBUaGUgaWQgb2YgdGhpcyBub2RlIGluIGl0cyBzZXQuIENvcnJlc3BvbmRzIHRvIHRoZSB0ZXJtIGlkc1xuICAgIHVzZWQgaW4gdGhlIHBhcnNlci5cbiAgICAqL1xuICAgIGlkLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGZsYWdzID0gMCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSBub2RlIHR5cGUuXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKHNwZWMpIHtcbiAgICAgICAgbGV0IHByb3BzID0gc3BlYy5wcm9wcyAmJiBzcGVjLnByb3BzLmxlbmd0aCA/IE9iamVjdC5jcmVhdGUobnVsbCkgOiBub1Byb3BzO1xuICAgICAgICBsZXQgZmxhZ3MgPSAoc3BlYy50b3AgPyAxIC8qIE5vZGVGbGFnLlRvcCAqLyA6IDApIHwgKHNwZWMuc2tpcHBlZCA/IDIgLyogTm9kZUZsYWcuU2tpcHBlZCAqLyA6IDApIHxcbiAgICAgICAgICAgIChzcGVjLmVycm9yID8gNCAvKiBOb2RlRmxhZy5FcnJvciAqLyA6IDApIHwgKHNwZWMubmFtZSA9PSBudWxsID8gOCAvKiBOb2RlRmxhZy5Bbm9ueW1vdXMgKi8gOiAwKTtcbiAgICAgICAgbGV0IHR5cGUgPSBuZXcgTm9kZVR5cGUoc3BlYy5uYW1lIHx8IFwiXCIsIHByb3BzLCBzcGVjLmlkLCBmbGFncyk7XG4gICAgICAgIGlmIChzcGVjLnByb3BzKVxuICAgICAgICAgICAgZm9yIChsZXQgc3JjIG9mIHNwZWMucHJvcHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3JjKSlcbiAgICAgICAgICAgICAgICAgICAgc3JjID0gc3JjKHR5cGUpO1xuICAgICAgICAgICAgICAgIGlmIChzcmMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNyY1swXS5wZXJOb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJDYW4ndCBzdG9yZSBhIHBlci1ub2RlIHByb3Agb24gYSBub2RlIHR5cGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzW3NyY1swXS5pZF0gPSBzcmNbMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHlwZTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0cmlldmVzIGEgbm9kZSBwcm9wIGZvciB0aGlzIHR5cGUuIFdpbGwgcmV0dXJuIGB1bmRlZmluZWRgIGlmXG4gICAgdGhlIHByb3AgaXNuJ3QgcHJlc2VudCBvbiB0aGlzIG5vZGUuXG4gICAgKi9cbiAgICBwcm9wKHByb3ApIHsgcmV0dXJuIHRoaXMucHJvcHNbcHJvcC5pZF07IH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gdGhpcyBpcyB0aGUgdG9wIG5vZGUgb2YgYSBncmFtbWFyLlxuICAgICovXG4gICAgZ2V0IGlzVG9wKCkgeyByZXR1cm4gKHRoaXMuZmxhZ3MgJiAxIC8qIE5vZGVGbGFnLlRvcCAqLykgPiAwOyB9XG4gICAgLyoqXG4gICAgVHJ1ZSB3aGVuIHRoaXMgbm9kZSBpcyBwcm9kdWNlZCBieSBhIHNraXAgcnVsZS5cbiAgICAqL1xuICAgIGdldCBpc1NraXBwZWQoKSB7IHJldHVybiAodGhpcy5mbGFncyAmIDIgLyogTm9kZUZsYWcuU2tpcHBlZCAqLykgPiAwOyB9XG4gICAgLyoqXG4gICAgSW5kaWNhdGVzIHdoZXRoZXIgdGhpcyBpcyBhbiBlcnJvciBub2RlLlxuICAgICovXG4gICAgZ2V0IGlzRXJyb3IoKSB7IHJldHVybiAodGhpcy5mbGFncyAmIDQgLyogTm9kZUZsYWcuRXJyb3IgKi8pID4gMDsgfVxuICAgIC8qKlxuICAgIFdoZW4gdHJ1ZSwgdGhpcyBub2RlIHR5cGUgZG9lc24ndCBjb3JyZXNwb25kIHRvIGEgdXNlci1kZWNsYXJlZFxuICAgIG5hbWVkIG5vZGUsIGZvciBleGFtcGxlIGJlY2F1c2UgaXQgaXMgdXNlZCB0byBjYWNoZSByZXBldGl0aW9uLlxuICAgICovXG4gICAgZ2V0IGlzQW5vbnltb3VzKCkgeyByZXR1cm4gKHRoaXMuZmxhZ3MgJiA4IC8qIE5vZGVGbGFnLkFub255bW91cyAqLykgPiAwOyB9XG4gICAgLyoqXG4gICAgUmV0dXJucyB0cnVlIHdoZW4gdGhpcyBub2RlJ3MgbmFtZSBvciBvbmUgb2YgaXRzXG4gICAgW2dyb3Vwc10oI2NvbW1vbi5Ob2RlUHJvcF5ncm91cCkgbWF0Y2hlcyB0aGUgZ2l2ZW4gc3RyaW5nLlxuICAgICovXG4gICAgaXMobmFtZSkge1xuICAgICAgICBpZiAodHlwZW9mIG5hbWUgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5hbWUgPT0gbmFtZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBncm91cCA9IHRoaXMucHJvcChOb2RlUHJvcC5ncm91cCk7XG4gICAgICAgICAgICByZXR1cm4gZ3JvdXAgPyBncm91cC5pbmRleE9mKG5hbWUpID4gLTEgOiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5pZCA9PSBuYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBmdW5jdGlvbiBmcm9tIG5vZGUgdHlwZXMgdG8gYXJiaXRyYXJ5IHZhbHVlcyBieVxuICAgIHNwZWNpZnlpbmcgYW4gb2JqZWN0IHdob3NlIHByb3BlcnR5IG5hbWVzIGFyZSBub2RlIG9yXG4gICAgW2dyb3VwXSgjY29tbW9uLk5vZGVQcm9wXmdyb3VwKSBuYW1lcy4gT2Z0ZW4gdXNlZnVsIHdpdGhcbiAgICBbYE5vZGVQcm9wLmFkZGBdKCNjb21tb24uTm9kZVByb3AuYWRkKS4gWW91IGNhbiBwdXQgbXVsdGlwbGVcbiAgICBuYW1lcywgc2VwYXJhdGVkIGJ5IHNwYWNlcywgaW4gYSBzaW5nbGUgcHJvcGVydHkgbmFtZSB0byBtYXBcbiAgICBtdWx0aXBsZSBub2RlIG5hbWVzIHRvIGEgc2luZ2xlIHZhbHVlLlxuICAgICovXG4gICAgc3RhdGljIG1hdGNoKG1hcCkge1xuICAgICAgICBsZXQgZGlyZWN0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBtYXApXG4gICAgICAgICAgICBmb3IgKGxldCBuYW1lIG9mIHByb3Auc3BsaXQoXCIgXCIpKVxuICAgICAgICAgICAgICAgIGRpcmVjdFtuYW1lXSA9IG1hcFtwcm9wXTtcbiAgICAgICAgcmV0dXJuIChub2RlKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBncm91cHMgPSBub2RlLnByb3AoTm9kZVByb3AuZ3JvdXApLCBpID0gLTE7IGkgPCAoZ3JvdXBzID8gZ3JvdXBzLmxlbmd0aCA6IDApOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBkaXJlY3RbaSA8IDAgPyBub2RlLm5hbWUgOiBncm91cHNbaV1dO1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuQW4gZW1wdHkgZHVtbXkgbm9kZSB0eXBlIHRvIHVzZSB3aGVuIG5vIGFjdHVhbCB0eXBlIGlzIGF2YWlsYWJsZS5cbiovXG5Ob2RlVHlwZS5ub25lID0gbmV3IE5vZGVUeXBlKFwiXCIsIE9iamVjdC5jcmVhdGUobnVsbCksIDAsIDggLyogTm9kZUZsYWcuQW5vbnltb3VzICovKTtcbi8qKlxuQSBub2RlIHNldCBob2xkcyBhIGNvbGxlY3Rpb24gb2Ygbm9kZSB0eXBlcy4gSXQgaXMgdXNlZCB0b1xuY29tcGFjdGx5IHJlcHJlc2VudCB0cmVlcyBieSBzdG9yaW5nIHRoZWlyIHR5cGUgaWRzLCByYXRoZXIgdGhhbiBhXG5mdWxsIHBvaW50ZXIgdG8gdGhlIHR5cGUgb2JqZWN0LCBpbiBhIG51bWVyaWMgYXJyYXkuIEVhY2ggcGFyc2VyXG5baGFzXSgjbHIuTFJQYXJzZXIubm9kZVNldCkgYSBub2RlIHNldCwgYW5kIFt0cmVlXG5idWZmZXJzXSgjY29tbW9uLlRyZWVCdWZmZXIpIGNhbiBvbmx5IHN0b3JlIGNvbGxlY3Rpb25zIG9mIG5vZGVzXG5mcm9tIHRoZSBzYW1lIHNldC4gQSBzZXQgY2FuIGhhdmUgYSBtYXhpbXVtIG9mIDIqKjE2ICg2NTUzNikgbm9kZVxudHlwZXMgaW4gaXQsIHNvIHRoYXQgdGhlIGlkcyBmaXQgaW50byAxNi1iaXQgdHlwZWQgYXJyYXkgc2xvdHMuXG4qL1xuY2xhc3MgTm9kZVNldCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc2V0IHdpdGggdGhlIGdpdmVuIHR5cGVzLiBUaGUgYGlkYCBwcm9wZXJ0eSBvZiBlYWNoXG4gICAgdHlwZSBzaG91bGQgY29ycmVzcG9uZCB0byBpdHMgcG9zaXRpb24gd2l0aGluIHRoZSBhcnJheS5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBub2RlIHR5cGVzIGluIHRoaXMgc2V0LCBieSBpZC5cbiAgICAqL1xuICAgIHR5cGVzKSB7XG4gICAgICAgIHRoaXMudHlwZXMgPSB0eXBlcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0eXBlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmICh0eXBlc1tpXS5pZCAhPSBpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiTm9kZSB0eXBlIGlkcyBzaG91bGQgY29ycmVzcG9uZCB0byBhcnJheSBwb3NpdGlvbnMgd2hlbiBjcmVhdGluZyBhIG5vZGUgc2V0XCIpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBjb3B5IG9mIHRoaXMgc2V0IHdpdGggc29tZSBub2RlIHByb3BlcnRpZXMgYWRkZWQuIFRoZVxuICAgIGFyZ3VtZW50cyB0byB0aGlzIG1ldGhvZCBjYW4gYmUgY3JlYXRlZCB3aXRoXG4gICAgW2BOb2RlUHJvcC5hZGRgXSgjY29tbW9uLk5vZGVQcm9wLmFkZCkuXG4gICAgKi9cbiAgICBleHRlbmQoLi4ucHJvcHMpIHtcbiAgICAgICAgbGV0IG5ld1R5cGVzID0gW107XG4gICAgICAgIGZvciAobGV0IHR5cGUgb2YgdGhpcy50eXBlcykge1xuICAgICAgICAgICAgbGV0IG5ld1Byb3BzID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAobGV0IHNvdXJjZSBvZiBwcm9wcykge1xuICAgICAgICAgICAgICAgIGxldCBhZGQgPSBzb3VyY2UodHlwZSk7XG4gICAgICAgICAgICAgICAgaWYgKGFkZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld1Byb3BzKVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcHMgPSBPYmplY3QuYXNzaWduKHt9LCB0eXBlLnByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gYWRkWzFdLCBwcm9wID0gYWRkWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcC5jb21iaW5lICYmIHByb3AuaWQgaW4gbmV3UHJvcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHByb3AuY29tYmluZShuZXdQcm9wc1twcm9wLmlkXSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBuZXdQcm9wc1twcm9wLmlkXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld1R5cGVzLnB1c2gobmV3UHJvcHMgPyBuZXcgTm9kZVR5cGUodHlwZS5uYW1lLCBuZXdQcm9wcywgdHlwZS5pZCwgdHlwZS5mbGFncykgOiB0eXBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IE5vZGVTZXQobmV3VHlwZXMpO1xuICAgIH1cbn1cbmNvbnN0IENhY2hlZE5vZGUgPSBuZXcgV2Vha01hcCgpLCBDYWNoZWRJbm5lck5vZGUgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG5PcHRpb25zIHRoYXQgY29udHJvbCBpdGVyYXRpb24uIENhbiBiZSBjb21iaW5lZCB3aXRoIHRoZSBgfGBcbm9wZXJhdG9yIHRvIGVuYWJsZSBtdWx0aXBsZSBvbmVzLlxuKi9cbnZhciBJdGVyTW9kZTtcbihmdW5jdGlvbiAoSXRlck1vZGUpIHtcbiAgICAvKipcbiAgICBXaGVuIGVuYWJsZWQsIGl0ZXJhdGlvbiB3aWxsIG9ubHkgdmlzaXQgW2BUcmVlYF0oI2NvbW1vbi5UcmVlKVxuICAgIG9iamVjdHMsIG5vdCBub2RlcyBwYWNrZWQgaW50b1xuICAgIFtgVHJlZUJ1ZmZlcmBdKCNjb21tb24uVHJlZUJ1ZmZlcilzLlxuICAgICovXG4gICAgSXRlck1vZGVbSXRlck1vZGVbXCJFeGNsdWRlQnVmZmVyc1wiXSA9IDFdID0gXCJFeGNsdWRlQnVmZmVyc1wiO1xuICAgIC8qKlxuICAgIEVuYWJsZSB0aGlzIHRvIG1ha2UgaXRlcmF0aW9uIGluY2x1ZGUgYW5vbnltb3VzIG5vZGVzIChzdWNoIGFzXG4gICAgdGhlIG5vZGVzIHRoYXQgd3JhcCByZXBlYXRlZCBncmFtbWFyIGNvbnN0cnVjdHMgaW50byBhIGJhbGFuY2VkXG4gICAgdHJlZSkuXG4gICAgKi9cbiAgICBJdGVyTW9kZVtJdGVyTW9kZVtcIkluY2x1ZGVBbm9ueW1vdXNcIl0gPSAyXSA9IFwiSW5jbHVkZUFub255bW91c1wiO1xuICAgIC8qKlxuICAgIEJ5IGRlZmF1bHQsIHJlZ3VsYXIgW21vdW50ZWRdKCNjb21tb24uTm9kZVByb3BebW91bnRlZCkgbm9kZXNcbiAgICByZXBsYWNlIHRoZWlyIGJhc2Ugbm9kZSBpbiBpdGVyYXRpb24uIEVuYWJsZSB0aGlzIHRvIGlnbm9yZSB0aGVtXG4gICAgaW5zdGVhZC5cbiAgICAqL1xuICAgIEl0ZXJNb2RlW0l0ZXJNb2RlW1wiSWdub3JlTW91bnRzXCJdID0gNF0gPSBcIklnbm9yZU1vdW50c1wiO1xuICAgIC8qKlxuICAgIFRoaXMgb3B0aW9uIG9ubHkgYXBwbGllcyBpblxuICAgIFtgZW50ZXJgXSgjY29tbW9uLlN5bnRheE5vZGUuZW50ZXIpLXN0eWxlIG1ldGhvZHMuIEl0IHRlbGxzIHRoZVxuICAgIGxpYnJhcnkgdG8gbm90IGVudGVyIG1vdW50ZWQgb3ZlcmxheXMgaWYgb25lIGNvdmVycyB0aGUgZ2l2ZW5cbiAgICBwb3NpdGlvbi5cbiAgICAqL1xuICAgIEl0ZXJNb2RlW0l0ZXJNb2RlW1wiSWdub3JlT3ZlcmxheXNcIl0gPSA4XSA9IFwiSWdub3JlT3ZlcmxheXNcIjtcbiAgICAvKipcbiAgICBXaGVuIHNldCwgcG9zaXRpb25zIG9uIHRoZSBib3VuZGFyeSBvZiBhIG1vdW50ZWQgb3ZlcmxheSB0cmVlXG4gICAgdGhhdCBoYXMgaXRzIFtgYnJhY2tldGVkYF0oI2NvbW1vbi5OZXN0ZWRQYXJzZS5icmFja2V0ZWQpIGZsYWdcbiAgICBzZXQgd2lsbCBlbnRlciB0aGF0IHRyZWUgcmVnYXJkbGVzcyBvZiBzaWRlLiBPbmx5IHN1cHBvcnRlZCBpblxuICAgIFtgZW50ZXJgXSgjY29tbW9uLlN5bnRheE5vZGUuZW50ZXIpLCBub3QgaW4gY3Vyc29ycy5cbiAgICAqL1xuICAgIEl0ZXJNb2RlW0l0ZXJNb2RlW1wiRW50ZXJCcmFja2V0ZWRcIl0gPSAxNl0gPSBcIkVudGVyQnJhY2tldGVkXCI7XG59KShJdGVyTW9kZSB8fCAoSXRlck1vZGUgPSB7fSkpO1xuLyoqXG5BIHBpZWNlIG9mIHN5bnRheCB0cmVlLiBUaGVyZSBhcmUgdHdvIHdheXMgdG8gYXBwcm9hY2ggdGhlc2VcbnRyZWVzOiB0aGUgd2F5IHRoZXkgYXJlIGFjdHVhbGx5IHN0b3JlZCBpbiBtZW1vcnksIGFuZCB0aGVcbmNvbnZlbmllbnQgd2F5LlxuXG5TeW50YXggdHJlZXMgYXJlIHN0b3JlZCBhcyBhIHRyZWUgb2YgYFRyZWVgIGFuZCBgVHJlZUJ1ZmZlcmBcbm9iamVjdHMuIEJ5IHBhY2tpbmcgZGV0YWlsIGluZm9ybWF0aW9uIGludG8gYFRyZWVCdWZmZXJgIGxlYWZcbm5vZGVzLCB0aGUgcmVwcmVzZW50YXRpb24gaXMgbWFkZSBhIGxvdCBtb3JlIG1lbW9yeS1lZmZpY2llbnQuXG5cbkhvd2V2ZXIsIHdoZW4geW91IHdhbnQgdG8gYWN0dWFsbHkgd29yayB3aXRoIHRyZWUgbm9kZXMsIHRoaXNcbnJlcHJlc2VudGF0aW9uIGlzIHZlcnkgYXdrd2FyZCwgc28gbW9zdCBjbGllbnQgY29kZSB3aWxsIHdhbnQgdG9cbnVzZSB0aGUgW2BUcmVlQ3Vyc29yYF0oI2NvbW1vbi5UcmVlQ3Vyc29yKSBvclxuW2BTeW50YXhOb2RlYF0oI2NvbW1vbi5TeW50YXhOb2RlKSBpbnRlcmZhY2UgaW5zdGVhZCwgd2hpY2ggcHJvdmlkZXNcbmEgdmlldyBvbiBzb21lIHBhcnQgb2YgdGhpcyBkYXRhIHN0cnVjdHVyZSwgYW5kIGNhbiBiZSB1c2VkIHRvXG5tb3ZlIGFyb3VuZCB0byBhZGphY2VudCBub2Rlcy5cbiovXG5jbGFzcyBUcmVlIHtcbiAgICAvKipcbiAgICBDb25zdHJ1Y3QgYSBuZXcgdHJlZS4gU2VlIGFsc28gW2BUcmVlLmJ1aWxkYF0oI2NvbW1vbi5UcmVlXmJ1aWxkKS5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSB0eXBlIG9mIHRoZSB0b3Agbm9kZS5cbiAgICAqL1xuICAgIHR5cGUsIFxuICAgIC8qKlxuICAgIFRoaXMgbm9kZSdzIGNoaWxkIG5vZGVzLlxuICAgICovXG4gICAgY2hpbGRyZW4sIFxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbnMgKG9mZnNldHMgcmVsYXRpdmUgdG8gdGhlIHN0YXJ0IG9mIHRoaXMgdHJlZSkgb2ZcbiAgICB0aGUgY2hpbGRyZW4uXG4gICAgKi9cbiAgICBwb3NpdGlvbnMsIFxuICAgIC8qKlxuICAgIFRoZSB0b3RhbCBsZW5ndGggb2YgdGhpcyB0cmVlXG4gICAgKi9cbiAgICBsZW5ndGgsIFxuICAgIC8qKlxuICAgIFBlci1ub2RlIFtub2RlIHByb3BzXSgjY29tbW9uLk5vZGVQcm9wKSB0byBhc3NvY2lhdGUgd2l0aCB0aGlzIG5vZGUuXG4gICAgKi9cbiAgICBwcm9wcykge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICAgIHRoaXMucG9zaXRpb25zID0gcG9zaXRpb25zO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnByb3BzID0gbnVsbDtcbiAgICAgICAgaWYgKHByb3BzICYmIHByb3BzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICBmb3IgKGxldCBbcHJvcCwgdmFsdWVdIG9mIHByb3BzKVxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHNbdHlwZW9mIHByb3AgPT0gXCJudW1iZXJcIiA/IHByb3AgOiBwcm9wLmlkXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCBtb3VudGVkID0gTW91bnRlZFRyZWUuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAobW91bnRlZCAmJiAhbW91bnRlZC5vdmVybGF5KVxuICAgICAgICAgICAgcmV0dXJuIG1vdW50ZWQudHJlZS50b1N0cmluZygpO1xuICAgICAgICBsZXQgY2hpbGRyZW4gPSBcIlwiO1xuICAgICAgICBmb3IgKGxldCBjaCBvZiB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBsZXQgc3RyID0gY2gudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGlmIChzdHIpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuICs9IFwiLFwiO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuICs9IHN0cjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXRoaXMudHlwZS5uYW1lID8gY2hpbGRyZW4gOlxuICAgICAgICAgICAgKC9cXFcvLnRlc3QodGhpcy50eXBlLm5hbWUpICYmICF0aGlzLnR5cGUuaXNFcnJvciA/IEpTT04uc3RyaW5naWZ5KHRoaXMudHlwZS5uYW1lKSA6IHRoaXMudHlwZS5uYW1lKSArXG4gICAgICAgICAgICAgICAgKGNoaWxkcmVuLmxlbmd0aCA/IFwiKFwiICsgY2hpbGRyZW4gKyBcIilcIiA6IFwiXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgYSBbdHJlZSBjdXJzb3JdKCNjb21tb24uVHJlZUN1cnNvcikgcG9zaXRpb25lZCBhdCB0aGUgdG9wIG9mXG4gICAgdGhlIHRyZWUuIE1vZGUgY2FuIGJlIHVzZWQgdG8gW2NvbnRyb2xdKCNjb21tb24uSXRlck1vZGUpIHdoaWNoXG4gICAgbm9kZXMgdGhlIGN1cnNvciB2aXNpdHMuXG4gICAgKi9cbiAgICBjdXJzb3IobW9kZSA9IDApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlQ3Vyc29yKHRoaXMudG9wTm9kZSwgbW9kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCBhIFt0cmVlIGN1cnNvcl0oI2NvbW1vbi5UcmVlQ3Vyc29yKSBwb2ludGluZyBpbnRvIHRoaXMgdHJlZVxuICAgIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgc2lkZSAoc2VlXG4gICAgW2Btb3ZlVG9gXSgjY29tbW9uLlRyZWVDdXJzb3IubW92ZVRvKS5cbiAgICAqL1xuICAgIGN1cnNvckF0KHBvcywgc2lkZSA9IDAsIG1vZGUgPSAwKSB7XG4gICAgICAgIGxldCBzY29wZSA9IENhY2hlZE5vZGUuZ2V0KHRoaXMpIHx8IHRoaXMudG9wTm9kZTtcbiAgICAgICAgbGV0IGN1cnNvciA9IG5ldyBUcmVlQ3Vyc29yKHNjb3BlKTtcbiAgICAgICAgY3Vyc29yLm1vdmVUbyhwb3MsIHNpZGUpO1xuICAgICAgICBDYWNoZWROb2RlLnNldCh0aGlzLCBjdXJzb3IuX3RyZWUpO1xuICAgICAgICByZXR1cm4gY3Vyc29yO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgYSBbc3ludGF4IG5vZGVdKCNjb21tb24uU3ludGF4Tm9kZSkgb2JqZWN0IGZvciB0aGUgdG9wIG9mIHRoZVxuICAgIHRyZWUuXG4gICAgKi9cbiAgICBnZXQgdG9wTm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlTm9kZSh0aGlzLCAwLCAwLCBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBbc3ludGF4IG5vZGVdKCNjb21tb24uU3ludGF4Tm9kZSkgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgIElmIGBzaWRlYCBpcyAtMSwgdGhpcyB3aWxsIG1vdmUgaW50byBub2RlcyB0aGF0IGVuZCBhdCB0aGVcbiAgICBwb3NpdGlvbi4gSWYgMSwgaXQnbGwgbW92ZSBpbnRvIG5vZGVzIHRoYXQgc3RhcnQgYXQgdGhlXG4gICAgcG9zaXRpb24uIFdpdGggMCwgaXQnbGwgb25seSBlbnRlciBub2RlcyB0aGF0IGNvdmVyIHRoZSBwb3NpdGlvblxuICAgIGZyb20gYm90aCBzaWRlcy5cbiAgICBcbiAgICBOb3RlIHRoYXQgdGhpcyB3aWxsIG5vdCBlbnRlclxuICAgIFtvdmVybGF5c10oI2NvbW1vbi5Nb3VudGVkVHJlZS5vdmVybGF5KSwgYW5kIHlvdSBvZnRlbiB3YW50XG4gICAgW2ByZXNvbHZlSW5uZXJgXSgjY29tbW9uLlRyZWUucmVzb2x2ZUlubmVyKSBpbnN0ZWFkLlxuICAgICovXG4gICAgcmVzb2x2ZShwb3MsIHNpZGUgPSAwKSB7XG4gICAgICAgIGxldCBub2RlID0gcmVzb2x2ZU5vZGUoQ2FjaGVkTm9kZS5nZXQodGhpcykgfHwgdGhpcy50b3BOb2RlLCBwb3MsIHNpZGUsIGZhbHNlKTtcbiAgICAgICAgQ2FjaGVkTm9kZS5zZXQodGhpcywgbm9kZSk7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICAvKipcbiAgICBMaWtlIFtgcmVzb2x2ZWBdKCNjb21tb24uVHJlZS5yZXNvbHZlKSwgYnV0IHdpbGwgZW50ZXJcbiAgICBbb3ZlcmxhaWRdKCNjb21tb24uTW91bnRlZFRyZWUub3ZlcmxheSkgbm9kZXMsIHByb2R1Y2luZyBhIHN5bnRheCBub2RlXG4gICAgcG9pbnRpbmcgaW50byB0aGUgaW5uZXJtb3N0IG92ZXJsYWlkIHRyZWUgYXQgdGhlIGdpdmVuIHBvc2l0aW9uXG4gICAgKHdpdGggcGFyZW50IGxpbmtzIGdvaW5nIHRocm91Z2ggYWxsIHBhcmVudCBzdHJ1Y3R1cmUsIGluY2x1ZGluZ1xuICAgIHRoZSBob3N0IHRyZWVzKS5cbiAgICAqL1xuICAgIHJlc29sdmVJbm5lcihwb3MsIHNpZGUgPSAwKSB7XG4gICAgICAgIGxldCBub2RlID0gcmVzb2x2ZU5vZGUoQ2FjaGVkSW5uZXJOb2RlLmdldCh0aGlzKSB8fCB0aGlzLnRvcE5vZGUsIHBvcywgc2lkZSwgdHJ1ZSk7XG4gICAgICAgIENhY2hlZElubmVyTm9kZS5zZXQodGhpcywgbm9kZSk7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICAvKipcbiAgICBJbiBzb21lIHNpdHVhdGlvbnMsIGl0IGNhbiBiZSB1c2VmdWwgdG8gaXRlcmF0ZSB0aHJvdWdoIGFsbFxuICAgIG5vZGVzIGFyb3VuZCBhIHBvc2l0aW9uLCBpbmNsdWRpbmcgdGhvc2UgaW4gb3ZlcmxheXMgdGhhdCBkb24ndFxuICAgIGRpcmVjdGx5IGNvdmVyIHRoZSBwb3NpdGlvbi4gVGhpcyBtZXRob2QgZ2l2ZXMgeW91IGFuIGl0ZXJhdG9yXG4gICAgdGhhdCB3aWxsIHByb2R1Y2UgYWxsIG5vZGVzLCBmcm9tIHNtYWxsIHRvIGJpZywgYXJvdW5kIHRoZSBnaXZlblxuICAgIHBvc2l0aW9uLlxuICAgICovXG4gICAgcmVzb2x2ZVN0YWNrKHBvcywgc2lkZSA9IDApIHtcbiAgICAgICAgcmV0dXJuIHN0YWNrSXRlcmF0b3IodGhpcywgcG9zLCBzaWRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSB0cmVlIGFuZCBpdHMgY2hpbGRyZW4sIGNhbGxpbmcgYGVudGVyYCBmb3IgYW55XG4gICAgbm9kZSB0aGF0IHRvdWNoZXMgdGhlIGBmcm9tYC9gdG9gIHJlZ2lvbiAoaWYgZ2l2ZW4pIGJlZm9yZVxuICAgIHJ1bm5pbmcgb3ZlciBzdWNoIGEgbm9kZSdzIGNoaWxkcmVuLCBhbmQgYGxlYXZlYCAoaWYgZ2l2ZW4pIHdoZW5cbiAgICBsZWF2aW5nIHRoZSBub2RlLiBXaGVuIGBlbnRlcmAgcmV0dXJucyBgZmFsc2VgLCB0aGF0IG5vZGUgd2lsbFxuICAgIG5vdCBoYXZlIGl0cyBjaGlsZHJlbiBpdGVyYXRlZCBvdmVyIChvciBgbGVhdmVgIGNhbGxlZCkuXG4gICAgKi9cbiAgICBpdGVyYXRlKHNwZWMpIHtcbiAgICAgICAgbGV0IHsgZW50ZXIsIGxlYXZlLCBmcm9tID0gMCwgdG8gPSB0aGlzLmxlbmd0aCB9ID0gc3BlYztcbiAgICAgICAgbGV0IG1vZGUgPSBzcGVjLm1vZGUgfHwgMCwgYW5vbiA9IChtb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgPiAwO1xuICAgICAgICBmb3IgKGxldCBjID0gdGhpcy5jdXJzb3IobW9kZSB8IEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpOzspIHtcbiAgICAgICAgICAgIGxldCBlbnRlcmVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoYy5mcm9tIDw9IHRvICYmIGMudG8gPj0gZnJvbSAmJiAoIWFub24gJiYgYy50eXBlLmlzQW5vbnltb3VzIHx8IGVudGVyKGMpICE9PSBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoYy5maXJzdENoaWxkKCkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGVudGVyZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgIGlmIChlbnRlcmVkICYmIGxlYXZlICYmIChhbm9uIHx8ICFjLnR5cGUuaXNBbm9ueW1vdXMpKVxuICAgICAgICAgICAgICAgICAgICBsZWF2ZShjKTtcbiAgICAgICAgICAgICAgICBpZiAoYy5uZXh0U2libGluZygpKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBpZiAoIWMucGFyZW50KCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBlbnRlcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBbbm9kZSBwcm9wXSgjY29tbW9uLk5vZGVQcm9wKSBmb3IgdGhpc1xuICAgIG5vZGUuIFdvcmtzIHdpdGggYm90aCBwZXItbm9kZSBhbmQgcGVyLXR5cGUgcHJvcHMuXG4gICAgKi9cbiAgICBwcm9wKHByb3ApIHtcbiAgICAgICAgcmV0dXJuICFwcm9wLnBlck5vZGUgPyB0aGlzLnR5cGUucHJvcChwcm9wKSA6IHRoaXMucHJvcHMgPyB0aGlzLnByb3BzW3Byb3AuaWRdIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRoZSBub2RlJ3MgW3Blci1ub2RlIHByb3BzXSgjY29tbW9uLk5vZGVQcm9wLnBlck5vZGUpIGluIGFcbiAgICBmb3JtYXQgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSBbYFRyZWVgXSgjY29tbW9uLlRyZWUpXG4gICAgY29uc3RydWN0b3IuXG4gICAgKi9cbiAgICBnZXQgcHJvcFZhbHVlcygpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBpZiAodGhpcy5wcm9wcylcbiAgICAgICAgICAgIGZvciAobGV0IGlkIGluIHRoaXMucHJvcHMpXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goWytpZCwgdGhpcy5wcm9wc1tpZF1dKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgQmFsYW5jZSB0aGUgZGlyZWN0IGNoaWxkcmVuIG9mIHRoaXMgdHJlZSwgcHJvZHVjaW5nIGEgY29weSBvZlxuICAgIHdoaWNoIG1heSBoYXZlIGNoaWxkcmVuIGdyb3VwZWQgaW50byBzdWJ0cmVlcyB3aXRoIHR5cGVcbiAgICBbYE5vZGVUeXBlLm5vbmVgXSgjY29tbW9uLk5vZGVUeXBlXm5vbmUpLlxuICAgICovXG4gICAgYmFsYW5jZShjb25maWcgPSB7fSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGggPD0gOCAvKiBCYWxhbmNlLkJyYW5jaEZhY3RvciAqLyA/IHRoaXMgOlxuICAgICAgICAgICAgYmFsYW5jZVJhbmdlKE5vZGVUeXBlLm5vbmUsIHRoaXMuY2hpbGRyZW4sIHRoaXMucG9zaXRpb25zLCAwLCB0aGlzLmNoaWxkcmVuLmxlbmd0aCwgMCwgdGhpcy5sZW5ndGgsIChjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpID0+IG5ldyBUcmVlKHRoaXMudHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoLCB0aGlzLnByb3BWYWx1ZXMpLCBjb25maWcubWFrZVRyZWUgfHwgKChjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpID0+IG5ldyBUcmVlKE5vZGVUeXBlLm5vbmUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQnVpbGQgYSB0cmVlIGZyb20gYSBwb3N0Zml4LW9yZGVyZWQgYnVmZmVyIG9mIG5vZGUgaW5mb3JtYXRpb24sXG4gICAgb3IgYSBjdXJzb3Igb3ZlciBzdWNoIGEgYnVmZmVyLlxuICAgICovXG4gICAgc3RhdGljIGJ1aWxkKGRhdGEpIHsgcmV0dXJuIGJ1aWxkVHJlZShkYXRhKTsgfVxufVxuLyoqXG5UaGUgZW1wdHkgdHJlZVxuKi9cblRyZWUuZW1wdHkgPSBuZXcgVHJlZShOb2RlVHlwZS5ub25lLCBbXSwgW10sIDApO1xuY2xhc3MgRmxhdEJ1ZmZlckN1cnNvciB7XG4gICAgY29uc3RydWN0b3IoYnVmZmVyLCBpbmRleCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgIH1cbiAgICBnZXQgaWQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gNF07IH1cbiAgICBnZXQgc3RhcnQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gM107IH1cbiAgICBnZXQgZW5kKCkgeyByZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5pbmRleCAtIDJdOyB9XG4gICAgZ2V0IHNpemUoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gMV07IH1cbiAgICBnZXQgcG9zKCkgeyByZXR1cm4gdGhpcy5pbmRleDsgfVxuICAgIG5leHQoKSB7IHRoaXMuaW5kZXggLT0gNDsgfVxuICAgIGZvcmsoKSB7IHJldHVybiBuZXcgRmxhdEJ1ZmZlckN1cnNvcih0aGlzLmJ1ZmZlciwgdGhpcy5pbmRleCk7IH1cbn1cbi8qKlxuVHJlZSBidWZmZXJzIGNvbnRhaW4gKHR5cGUsIHN0YXJ0LCBlbmQsIGVuZEluZGV4KSBxdWFkcyBmb3IgZWFjaFxubm9kZS4gSW4gc3VjaCBhIGJ1ZmZlciwgbm9kZXMgYXJlIHN0b3JlZCBpbiBwcmVmaXggb3JkZXIgKHBhcmVudHNcbmJlZm9yZSBjaGlsZHJlbiwgd2l0aCB0aGUgZW5kSW5kZXggb2YgdGhlIHBhcmVudCBpbmRpY2F0aW5nIHdoaWNoXG5jaGlsZHJlbiBiZWxvbmcgdG8gaXQpLlxuKi9cbmNsYXNzIFRyZWVCdWZmZXIge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIHRyZWUgYnVmZmVyLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIGJ1ZmZlcidzIGNvbnRlbnQuXG4gICAgKi9cbiAgICBidWZmZXIsIFxuICAgIC8qKlxuICAgIFRoZSB0b3RhbCBsZW5ndGggb2YgdGhlIGdyb3VwIG9mIG5vZGVzIGluIHRoZSBidWZmZXIuXG4gICAgKi9cbiAgICBsZW5ndGgsIFxuICAgIC8qKlxuICAgIFRoZSBub2RlIHNldCB1c2VkIGluIHRoaXMgYnVmZmVyLlxuICAgICovXG4gICAgc2V0KSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5zZXQgPSBzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IHR5cGUoKSB7IHJldHVybiBOb2RlVHlwZS5ub25lOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5idWZmZXIubGVuZ3RoOykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5jaGlsZFN0cmluZyhpbmRleCkpO1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLmJ1ZmZlcltpbmRleCArIDNdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQuam9pbihcIixcIik7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2hpbGRTdHJpbmcoaW5kZXgpIHtcbiAgICAgICAgbGV0IGlkID0gdGhpcy5idWZmZXJbaW5kZXhdLCBlbmRJbmRleCA9IHRoaXMuYnVmZmVyW2luZGV4ICsgM107XG4gICAgICAgIGxldCB0eXBlID0gdGhpcy5zZXQudHlwZXNbaWRdLCByZXN1bHQgPSB0eXBlLm5hbWU7XG4gICAgICAgIGlmICgvXFxXLy50ZXN0KHJlc3VsdCkgJiYgIXR5cGUuaXNFcnJvcilcbiAgICAgICAgICAgIHJlc3VsdCA9IEpTT04uc3RyaW5naWZ5KHJlc3VsdCk7XG4gICAgICAgIGluZGV4ICs9IDQ7XG4gICAgICAgIGlmIChlbmRJbmRleCA9PSBpbmRleClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIGxldCBjaGlsZHJlbiA9IFtdO1xuICAgICAgICB3aGlsZSAoaW5kZXggPCBlbmRJbmRleCkge1xuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaCh0aGlzLmNoaWxkU3RyaW5nKGluZGV4KSk7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuYnVmZmVyW2luZGV4ICsgM107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIFwiKFwiICsgY2hpbGRyZW4uam9pbihcIixcIikgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBmaW5kQ2hpbGQoc3RhcnRJbmRleCwgZW5kSW5kZXgsIGRpciwgcG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcywgcGljayA9IC0xO1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSAhPSBlbmRJbmRleDsgaSA9IGJ1ZmZlcltpICsgM10pIHtcbiAgICAgICAgICAgIGlmIChjaGVja1NpZGUoc2lkZSwgcG9zLCBidWZmZXJbaSArIDFdLCBidWZmZXJbaSArIDJdKSkge1xuICAgICAgICAgICAgICAgIHBpY2sgPSBpO1xuICAgICAgICAgICAgICAgIGlmIChkaXIgPiAwKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGljaztcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzbGljZShzdGFydEksIGVuZEksIGZyb20pIHtcbiAgICAgICAgbGV0IGIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgbGV0IGNvcHkgPSBuZXcgVWludDE2QXJyYXkoZW5kSSAtIHN0YXJ0SSksIGxlbiA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydEksIGogPSAwOyBpIDwgZW5kSTspIHtcbiAgICAgICAgICAgIGNvcHlbaisrXSA9IGJbaSsrXTtcbiAgICAgICAgICAgIGNvcHlbaisrXSA9IGJbaSsrXSAtIGZyb207XG4gICAgICAgICAgICBsZXQgdG8gPSBjb3B5W2orK10gPSBiW2krK10gLSBmcm9tO1xuICAgICAgICAgICAgY29weVtqKytdID0gYltpKytdIC0gc3RhcnRJO1xuICAgICAgICAgICAgbGVuID0gTWF0aC5tYXgobGVuLCB0byk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlQnVmZmVyKGNvcHksIGxlbiwgdGhpcy5zZXQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrU2lkZShzaWRlLCBwb3MsIGZyb20sIHRvKSB7XG4gICAgc3dpdGNoIChzaWRlKSB7XG4gICAgICAgIGNhc2UgLTIgLyogU2lkZS5CZWZvcmUgKi86IHJldHVybiBmcm9tIDwgcG9zO1xuICAgICAgICBjYXNlIC0xIC8qIFNpZGUuQXRPckJlZm9yZSAqLzogcmV0dXJuIHRvID49IHBvcyAmJiBmcm9tIDwgcG9zO1xuICAgICAgICBjYXNlIDAgLyogU2lkZS5Bcm91bmQgKi86IHJldHVybiBmcm9tIDwgcG9zICYmIHRvID4gcG9zO1xuICAgICAgICBjYXNlIDEgLyogU2lkZS5BdE9yQWZ0ZXIgKi86IHJldHVybiBmcm9tIDw9IHBvcyAmJiB0byA+IHBvcztcbiAgICAgICAgY2FzZSAyIC8qIFNpZGUuQWZ0ZXIgKi86IHJldHVybiB0byA+IHBvcztcbiAgICAgICAgY2FzZSA0IC8qIFNpZGUuRG9udENhcmUgKi86IHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlc29sdmVOb2RlKG5vZGUsIHBvcywgc2lkZSwgb3ZlcmxheXMpIHtcbiAgICB2YXIgX2E7XG4gICAgLy8gTW92ZSB1cCB0byBhIG5vZGUgdGhhdCBhY3R1YWxseSBob2xkcyB0aGUgcG9zaXRpb24sIGlmIHBvc3NpYmxlXG4gICAgd2hpbGUgKG5vZGUuZnJvbSA9PSBub2RlLnRvIHx8XG4gICAgICAgIChzaWRlIDwgMSA/IG5vZGUuZnJvbSA+PSBwb3MgOiBub2RlLmZyb20gPiBwb3MpIHx8XG4gICAgICAgIChzaWRlID4gLTEgPyBub2RlLnRvIDw9IHBvcyA6IG5vZGUudG8gPCBwb3MpKSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSAhb3ZlcmxheXMgJiYgbm9kZSBpbnN0YW5jZW9mIFRyZWVOb2RlICYmIG5vZGUuaW5kZXggPCAwID8gbnVsbCA6IG5vZGUucGFyZW50O1xuICAgICAgICBpZiAoIXBhcmVudClcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICBub2RlID0gcGFyZW50O1xuICAgIH1cbiAgICBsZXQgbW9kZSA9IG92ZXJsYXlzID8gMCA6IEl0ZXJNb2RlLklnbm9yZU92ZXJsYXlzO1xuICAgIC8vIE11c3QgZ28gdXAgb3V0IG9mIG92ZXJsYXlzIHdoZW4gdGhvc2UgZG8gbm90IG92ZXJsYXAgd2l0aCBwb3NcbiAgICBpZiAob3ZlcmxheXMpXG4gICAgICAgIGZvciAobGV0IHNjYW4gPSBub2RlLCBwYXJlbnQgPSBzY2FuLnBhcmVudDsgcGFyZW50OyBzY2FuID0gcGFyZW50LCBwYXJlbnQgPSBzY2FuLnBhcmVudCkge1xuICAgICAgICAgICAgaWYgKHNjYW4gaW5zdGFuY2VvZiBUcmVlTm9kZSAmJiBzY2FuLmluZGV4IDwgMCAmJiAoKF9hID0gcGFyZW50LmVudGVyKHBvcywgc2lkZSwgbW9kZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mcm9tKSAhPSBzY2FuLmZyb20pXG4gICAgICAgICAgICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgIGZvciAoOzspIHtcbiAgICAgICAgbGV0IGlubmVyID0gbm9kZS5lbnRlcihwb3MsIHNpZGUsIG1vZGUpO1xuICAgICAgICBpZiAoIWlubmVyKVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIG5vZGUgPSBpbm5lcjtcbiAgICB9XG59XG5jbGFzcyBCYXNlTm9kZSB7XG4gICAgY3Vyc29yKG1vZGUgPSAwKSB7IHJldHVybiBuZXcgVHJlZUN1cnNvcih0aGlzLCBtb2RlKTsgfVxuICAgIGdldENoaWxkKHR5cGUsIGJlZm9yZSA9IG51bGwsIGFmdGVyID0gbnVsbCkge1xuICAgICAgICBsZXQgciA9IGdldENoaWxkcmVuKHRoaXMsIHR5cGUsIGJlZm9yZSwgYWZ0ZXIpO1xuICAgICAgICByZXR1cm4gci5sZW5ndGggPyByWzBdIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0Q2hpbGRyZW4odHlwZSwgYmVmb3JlID0gbnVsbCwgYWZ0ZXIgPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBnZXRDaGlsZHJlbih0aGlzLCB0eXBlLCBiZWZvcmUsIGFmdGVyKTtcbiAgICB9XG4gICAgcmVzb2x2ZShwb3MsIHNpZGUgPSAwKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlTm9kZSh0aGlzLCBwb3MsIHNpZGUsIGZhbHNlKTtcbiAgICB9XG4gICAgcmVzb2x2ZUlubmVyKHBvcywgc2lkZSA9IDApIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVOb2RlKHRoaXMsIHBvcywgc2lkZSwgdHJ1ZSk7XG4gICAgfVxuICAgIG1hdGNoQ29udGV4dChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBtYXRjaE5vZGVDb250ZXh0KHRoaXMucGFyZW50LCBjb250ZXh0KTtcbiAgICB9XG4gICAgZW50ZXJVbmZpbmlzaGVkTm9kZXNCZWZvcmUocG9zKSB7XG4gICAgICAgIGxldCBzY2FuID0gdGhpcy5jaGlsZEJlZm9yZShwb3MpLCBub2RlID0gdGhpcztcbiAgICAgICAgd2hpbGUgKHNjYW4pIHtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gc2Nhbi5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoIWxhc3QgfHwgbGFzdC50byAhPSBzY2FuLnRvKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKGxhc3QudHlwZS5pc0Vycm9yICYmIGxhc3QuZnJvbSA9PSBsYXN0LnRvKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IHNjYW47XG4gICAgICAgICAgICAgICAgc2NhbiA9IGxhc3QucHJldlNpYmxpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzY2FuID0gbGFzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgZ2V0IG5vZGUoKSB7IHJldHVybiB0aGlzOyB9XG4gICAgZ2V0IG5leHQoKSB7IHJldHVybiB0aGlzLnBhcmVudDsgfVxufVxuY2xhc3MgVHJlZU5vZGUgZXh0ZW5kcyBCYXNlTm9kZSB7XG4gICAgY29uc3RydWN0b3IoX3RyZWUsIGZyb20sIFxuICAgIC8vIEluZGV4IGluIHBhcmVudCBub2RlLCBzZXQgdG8gLTEgaWYgdGhlIG5vZGUgaXMgbm90IGEgZGlyZWN0IGNoaWxkIG9mIF9wYXJlbnQubm9kZSAob3ZlcmxheSlcbiAgICBpbmRleCwgX3BhcmVudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl90cmVlID0gX3RyZWU7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gX3BhcmVudDtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7IHJldHVybiB0aGlzLl90cmVlLnR5cGU7IH1cbiAgICBnZXQgbmFtZSgpIHsgcmV0dXJuIHRoaXMuX3RyZWUudHlwZS5uYW1lOyB9XG4gICAgZ2V0IHRvKCkgeyByZXR1cm4gdGhpcy5mcm9tICsgdGhpcy5fdHJlZS5sZW5ndGg7IH1cbiAgICBuZXh0Q2hpbGQoaSwgZGlyLCBwb3MsIHNpZGUsIG1vZGUgPSAwKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgZm9yIChsZXQgcGFyZW50ID0gdGhpczs7KSB7XG4gICAgICAgICAgICBmb3IgKGxldCB7IGNoaWxkcmVuLCBwb3NpdGlvbnMgfSA9IHBhcmVudC5fdHJlZSwgZSA9IGRpciA+IDAgPyBjaGlsZHJlbi5sZW5ndGggOiAtMTsgaSAhPSBlOyBpICs9IGRpcikge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gY2hpbGRyZW5baV0sIHN0YXJ0ID0gcG9zaXRpb25zW2ldICsgcGFyZW50LmZyb207XG4gICAgICAgICAgICAgICAgaWYgKCEoKG1vZGUgJiBJdGVyTW9kZS5FbnRlckJyYWNrZXRlZCkgJiYgbmV4dCBpbnN0YW5jZW9mIFRyZWUgJiZcbiAgICAgICAgICAgICAgICAgICAgKChfYSA9IE1vdW50ZWRUcmVlLmdldChuZXh0KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm92ZXJsYXkpID09PSBudWxsICYmIChzdGFydCA+PSBwb3MgfHwgc3RhcnQgKyBuZXh0Lmxlbmd0aCA8PSBwb3MpKSAmJlxuICAgICAgICAgICAgICAgICAgICAhY2hlY2tTaWRlKHNpZGUsIHBvcywgc3RhcnQsIHN0YXJ0ICsgbmV4dC5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCBpbnN0YW5jZW9mIFRyZWVCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgJiBJdGVyTW9kZS5FeGNsdWRlQnVmZmVycylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBuZXh0LmZpbmRDaGlsZCgwLCBuZXh0LmJ1ZmZlci5sZW5ndGgsIGRpciwgcG9zIC0gc3RhcnQsIHNpZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQnVmZmVyTm9kZShuZXcgQnVmZmVyQ29udGV4dChwYXJlbnQsIG5leHQsIGksIHN0YXJ0KSwgbnVsbCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgobW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpIHx8ICghbmV4dC50eXBlLmlzQW5vbnltb3VzIHx8IGhhc0NoaWxkKG5leHQpKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbW91bnRlZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEobW9kZSAmIEl0ZXJNb2RlLklnbm9yZU1vdW50cykgJiYgKG1vdW50ZWQgPSBNb3VudGVkVHJlZS5nZXQobmV4dCkpICYmICFtb3VudGVkLm92ZXJsYXkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRyZWVOb2RlKG1vdW50ZWQudHJlZSwgc3RhcnQsIGksIHBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbm5lciA9IG5ldyBUcmVlTm9kZShuZXh0LCBzdGFydCwgaSwgcGFyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgfHwgIWlubmVyLnR5cGUuaXNBbm9ueW1vdXMgPyBpbm5lclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpbm5lci5uZXh0Q2hpbGQoZGlyIDwgMCA/IG5leHQuY2hpbGRyZW4ubGVuZ3RoIC0gMSA6IDAsIGRpciwgcG9zLCBzaWRlLCBtb2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKG1vZGUgJiBJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKSB8fCAhcGFyZW50LnR5cGUuaXNBbm9ueW1vdXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZiAocGFyZW50LmluZGV4ID49IDApXG4gICAgICAgICAgICAgICAgaSA9IHBhcmVudC5pbmRleCArIGRpcjtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBpID0gZGlyIDwgMCA/IC0xIDogcGFyZW50Ll9wYXJlbnQuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50Ll9wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXBhcmVudClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZmlyc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKDAsIDEsIDAsIDQgLyogU2lkZS5Eb250Q2FyZSAqLyk7IH1cbiAgICBnZXQgbGFzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5uZXh0Q2hpbGQodGhpcy5fdHJlZS5jaGlsZHJlbi5sZW5ndGggLSAxLCAtMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKTsgfVxuICAgIGNoaWxkQWZ0ZXIocG9zKSB7IHJldHVybiB0aGlzLm5leHRDaGlsZCgwLCAxLCBwb3MsIDIgLyogU2lkZS5BZnRlciAqLyk7IH1cbiAgICBjaGlsZEJlZm9yZShwb3MpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKHRoaXMuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgLTEsIHBvcywgLTIgLyogU2lkZS5CZWZvcmUgKi8pOyB9XG4gICAgcHJvcChwcm9wKSB7IHJldHVybiB0aGlzLl90cmVlLnByb3AocHJvcCk7IH1cbiAgICBlbnRlcihwb3MsIHNpZGUsIG1vZGUgPSAwKSB7XG4gICAgICAgIGxldCBtb3VudGVkO1xuICAgICAgICBpZiAoIShtb2RlICYgSXRlck1vZGUuSWdub3JlT3ZlcmxheXMpICYmIChtb3VudGVkID0gTW91bnRlZFRyZWUuZ2V0KHRoaXMuX3RyZWUpKSAmJiBtb3VudGVkLm92ZXJsYXkpIHtcbiAgICAgICAgICAgIGxldCByUG9zID0gcG9zIC0gdGhpcy5mcm9tLCBlbnRlckJyYWNrZXRlZCA9IChtb2RlICYgSXRlck1vZGUuRW50ZXJCcmFja2V0ZWQpICYmIG1vdW50ZWQuYnJhY2tldGVkO1xuICAgICAgICAgICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIG1vdW50ZWQub3ZlcmxheSkge1xuICAgICAgICAgICAgICAgIGlmICgoc2lkZSA+IDAgfHwgZW50ZXJCcmFja2V0ZWQgPyBmcm9tIDw9IHJQb3MgOiBmcm9tIDwgclBvcykgJiZcbiAgICAgICAgICAgICAgICAgICAgKHNpZGUgPCAwIHx8IGVudGVyQnJhY2tldGVkID8gdG8gPj0gclBvcyA6IHRvID4gclBvcykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVHJlZU5vZGUobW91bnRlZC50cmVlLCBtb3VudGVkLm92ZXJsYXlbMF0uZnJvbSArIHRoaXMuZnJvbSwgLTEsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5leHRDaGlsZCgwLCAxLCBwb3MsIHNpZGUsIG1vZGUpO1xuICAgIH1cbiAgICBuZXh0U2lnbmlmaWNhbnRQYXJlbnQoKSB7XG4gICAgICAgIGxldCB2YWwgPSB0aGlzO1xuICAgICAgICB3aGlsZSAodmFsLnR5cGUuaXNBbm9ueW1vdXMgJiYgdmFsLl9wYXJlbnQpXG4gICAgICAgICAgICB2YWwgPSB2YWwuX3BhcmVudDtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudCA/IHRoaXMuX3BhcmVudC5uZXh0U2lnbmlmaWNhbnRQYXJlbnQoKSA6IG51bGw7XG4gICAgfVxuICAgIGdldCBuZXh0U2libGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudCAmJiB0aGlzLmluZGV4ID49IDAgPyB0aGlzLl9wYXJlbnQubmV4dENoaWxkKHRoaXMuaW5kZXggKyAxLCAxLCAwLCA0IC8qIFNpZGUuRG9udENhcmUgKi8pIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IHByZXZTaWJsaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50ICYmIHRoaXMuaW5kZXggPj0gMCA/IHRoaXMuX3BhcmVudC5uZXh0Q2hpbGQodGhpcy5pbmRleCAtIDEsIC0xLCAwLCA0IC8qIFNpZGUuRG9udENhcmUgKi8pIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IHRyZWUoKSB7IHJldHVybiB0aGlzLl90cmVlOyB9XG4gICAgdG9UcmVlKCkgeyByZXR1cm4gdGhpcy5fdHJlZTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiB0aGlzLl90cmVlLnRvU3RyaW5nKCk7IH1cbn1cbmZ1bmN0aW9uIGdldENoaWxkcmVuKG5vZGUsIHR5cGUsIGJlZm9yZSwgYWZ0ZXIpIHtcbiAgICBsZXQgY3VyID0gbm9kZS5jdXJzb3IoKSwgcmVzdWx0ID0gW107XG4gICAgaWYgKCFjdXIuZmlyc3RDaGlsZCgpKVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChiZWZvcmUgIT0gbnVsbClcbiAgICAgICAgZm9yIChsZXQgZm91bmQgPSBmYWxzZTsgIWZvdW5kOykge1xuICAgICAgICAgICAgZm91bmQgPSBjdXIudHlwZS5pcyhiZWZvcmUpO1xuICAgICAgICAgICAgaWYgKCFjdXIubmV4dFNpYmxpbmcoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgZm9yICg7Oykge1xuICAgICAgICBpZiAoYWZ0ZXIgIT0gbnVsbCAmJiBjdXIudHlwZS5pcyhhZnRlcikpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICBpZiAoY3VyLnR5cGUuaXModHlwZSkpXG4gICAgICAgICAgICByZXN1bHQucHVzaChjdXIubm9kZSk7XG4gICAgICAgIGlmICghY3VyLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICByZXR1cm4gYWZ0ZXIgPT0gbnVsbCA/IHJlc3VsdCA6IFtdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1hdGNoTm9kZUNvbnRleHQobm9kZSwgY29udGV4dCwgaSA9IGNvbnRleHQubGVuZ3RoIC0gMSkge1xuICAgIGZvciAobGV0IHAgPSBub2RlOyBpID49IDA7IHAgPSBwLnBhcmVudCkge1xuICAgICAgICBpZiAoIXApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghcC50eXBlLmlzQW5vbnltb3VzKSB7XG4gICAgICAgICAgICBpZiAoY29udGV4dFtpXSAmJiBjb250ZXh0W2ldICE9IHAubmFtZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpLS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5jbGFzcyBCdWZmZXJDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIGJ1ZmZlciwgaW5kZXgsIHN0YXJ0KSB7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgfVxufVxuY2xhc3MgQnVmZmVyTm9kZSBleHRlbmRzIEJhc2VOb2RlIHtcbiAgICBnZXQgbmFtZSgpIHsgcmV0dXJuIHRoaXMudHlwZS5uYW1lOyB9XG4gICAgZ2V0IGZyb20oKSB7IHJldHVybiB0aGlzLmNvbnRleHQuc3RhcnQgKyB0aGlzLmNvbnRleHQuYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgMV07IH1cbiAgICBnZXQgdG8oKSB7IHJldHVybiB0aGlzLmNvbnRleHQuc3RhcnQgKyB0aGlzLmNvbnRleHQuYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgMl07IH1cbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBfcGFyZW50LCBpbmRleCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBfcGFyZW50O1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMudHlwZSA9IGNvbnRleHQuYnVmZmVyLnNldC50eXBlc1tjb250ZXh0LmJ1ZmZlci5idWZmZXJbaW5kZXhdXTtcbiAgICB9XG4gICAgY2hpbGQoZGlyLCBwb3MsIHNpZGUpIHtcbiAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIGxldCBpbmRleCA9IGJ1ZmZlci5maW5kQ2hpbGQodGhpcy5pbmRleCArIDQsIGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDNdLCBkaXIsIHBvcyAtIHRoaXMuY29udGV4dC5zdGFydCwgc2lkZSk7XG4gICAgICAgIHJldHVybiBpbmRleCA8IDAgPyBudWxsIDogbmV3IEJ1ZmZlck5vZGUodGhpcy5jb250ZXh0LCB0aGlzLCBpbmRleCk7XG4gICAgfVxuICAgIGdldCBmaXJzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5jaGlsZCgxLCAwLCA0IC8qIFNpZGUuRG9udENhcmUgKi8pOyB9XG4gICAgZ2V0IGxhc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMuY2hpbGQoLTEsIDAsIDQgLyogU2lkZS5Eb250Q2FyZSAqLyk7IH1cbiAgICBjaGlsZEFmdGVyKHBvcykgeyByZXR1cm4gdGhpcy5jaGlsZCgxLCBwb3MsIDIgLyogU2lkZS5BZnRlciAqLyk7IH1cbiAgICBjaGlsZEJlZm9yZShwb3MpIHsgcmV0dXJuIHRoaXMuY2hpbGQoLTEsIHBvcywgLTIgLyogU2lkZS5CZWZvcmUgKi8pOyB9XG4gICAgcHJvcChwcm9wKSB7IHJldHVybiB0aGlzLnR5cGUucHJvcChwcm9wKTsgfVxuICAgIGVudGVyKHBvcywgc2lkZSwgbW9kZSA9IDApIHtcbiAgICAgICAgaWYgKG1vZGUgJiBJdGVyTW9kZS5FeGNsdWRlQnVmZmVycylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgbGV0IGluZGV4ID0gYnVmZmVyLmZpbmRDaGlsZCh0aGlzLmluZGV4ICsgNCwgYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgM10sIHNpZGUgPiAwID8gMSA6IC0xLCBwb3MgLSB0aGlzLmNvbnRleHQuc3RhcnQsIHNpZGUpO1xuICAgICAgICByZXR1cm4gaW5kZXggPCAwID8gbnVsbCA6IG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcywgaW5kZXgpO1xuICAgIH1cbiAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50IHx8IHRoaXMuY29udGV4dC5wYXJlbnQubmV4dFNpZ25pZmljYW50UGFyZW50KCk7XG4gICAgfVxuICAgIGV4dGVybmFsU2libGluZyhkaXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudCA/IG51bGwgOiB0aGlzLmNvbnRleHQucGFyZW50Lm5leHRDaGlsZCh0aGlzLmNvbnRleHQuaW5kZXggKyBkaXIsIGRpciwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKTtcbiAgICB9XG4gICAgZ2V0IG5leHRTaWJsaW5nKCkge1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgbGV0IGFmdGVyID0gYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgM107XG4gICAgICAgIGlmIChhZnRlciA8ICh0aGlzLl9wYXJlbnQgPyBidWZmZXIuYnVmZmVyW3RoaXMuX3BhcmVudC5pbmRleCArIDNdIDogYnVmZmVyLmJ1ZmZlci5sZW5ndGgpKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcy5fcGFyZW50LCBhZnRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dGVybmFsU2libGluZygxKTtcbiAgICB9XG4gICAgZ2V0IHByZXZTaWJsaW5nKCkge1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgbGV0IHBhcmVudFN0YXJ0ID0gdGhpcy5fcGFyZW50ID8gdGhpcy5fcGFyZW50LmluZGV4ICsgNCA6IDA7XG4gICAgICAgIGlmICh0aGlzLmluZGV4ID09IHBhcmVudFN0YXJ0KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZXJuYWxTaWJsaW5nKC0xKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcy5fcGFyZW50LCBidWZmZXIuZmluZENoaWxkKHBhcmVudFN0YXJ0LCB0aGlzLmluZGV4LCAtMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKSk7XG4gICAgfVxuICAgIGdldCB0cmVlKCkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHRvVHJlZSgpIHtcbiAgICAgICAgbGV0IGNoaWxkcmVuID0gW10sIHBvc2l0aW9ucyA9IFtdO1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgbGV0IHN0YXJ0SSA9IHRoaXMuaW5kZXggKyA0LCBlbmRJID0gYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgM107XG4gICAgICAgIGlmIChlbmRJID4gc3RhcnRJKSB7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDFdO1xuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChidWZmZXIuc2xpY2Uoc3RhcnRJLCBlbmRJLCBmcm9tKSk7XG4gICAgICAgICAgICBwb3NpdGlvbnMucHVzaCgwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFRyZWUodGhpcy50eXBlLCBjaGlsZHJlbiwgcG9zaXRpb25zLCB0aGlzLnRvIC0gdGhpcy5mcm9tKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b1N0cmluZygpIHsgcmV0dXJuIHRoaXMuY29udGV4dC5idWZmZXIuY2hpbGRTdHJpbmcodGhpcy5pbmRleCk7IH1cbn1cbmZ1bmN0aW9uIGl0ZXJTdGFjayhoZWFkcykge1xuICAgIGlmICghaGVhZHMubGVuZ3RoKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgcGljayA9IDAsIHBpY2tlZCA9IGhlYWRzWzBdO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaGVhZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5vZGUgPSBoZWFkc1tpXTtcbiAgICAgICAgaWYgKG5vZGUuZnJvbSA+IHBpY2tlZC5mcm9tIHx8IG5vZGUudG8gPCBwaWNrZWQudG8pIHtcbiAgICAgICAgICAgIHBpY2tlZCA9IG5vZGU7XG4gICAgICAgICAgICBwaWNrID0gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgbmV4dCA9IHBpY2tlZCBpbnN0YW5jZW9mIFRyZWVOb2RlICYmIHBpY2tlZC5pbmRleCA8IDAgPyBudWxsIDogcGlja2VkLnBhcmVudDtcbiAgICBsZXQgbmV3SGVhZHMgPSBoZWFkcy5zbGljZSgpO1xuICAgIGlmIChuZXh0KVxuICAgICAgICBuZXdIZWFkc1twaWNrXSA9IG5leHQ7XG4gICAgZWxzZVxuICAgICAgICBuZXdIZWFkcy5zcGxpY2UocGljaywgMSk7XG4gICAgcmV0dXJuIG5ldyBTdGFja0l0ZXJhdG9yKG5ld0hlYWRzLCBwaWNrZWQpO1xufVxuY2xhc3MgU3RhY2tJdGVyYXRvciB7XG4gICAgY29uc3RydWN0b3IoaGVhZHMsIG5vZGUpIHtcbiAgICAgICAgdGhpcy5oZWFkcyA9IGhlYWRzO1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgIH1cbiAgICBnZXQgbmV4dCgpIHsgcmV0dXJuIGl0ZXJTdGFjayh0aGlzLmhlYWRzKTsgfVxufVxuZnVuY3Rpb24gc3RhY2tJdGVyYXRvcih0cmVlLCBwb3MsIHNpZGUpIHtcbiAgICBsZXQgaW5uZXIgPSB0cmVlLnJlc29sdmVJbm5lcihwb3MsIHNpZGUpLCBsYXllcnMgPSBudWxsO1xuICAgIGZvciAobGV0IHNjYW4gPSBpbm5lciBpbnN0YW5jZW9mIFRyZWVOb2RlID8gaW5uZXIgOiBpbm5lci5jb250ZXh0LnBhcmVudDsgc2Nhbjsgc2NhbiA9IHNjYW4ucGFyZW50KSB7XG4gICAgICAgIGlmIChzY2FuLmluZGV4IDwgMCkgeyAvLyBUaGlzIGlzIGFuIG92ZXJsYXkgcm9vdFxuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHNjYW4ucGFyZW50O1xuICAgICAgICAgICAgKGxheWVycyB8fCAobGF5ZXJzID0gW2lubmVyXSkpLnB1c2gocGFyZW50LnJlc29sdmUocG9zLCBzaWRlKSk7XG4gICAgICAgICAgICBzY2FuID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG1vdW50ID0gTW91bnRlZFRyZWUuZ2V0KHNjYW4udHJlZSk7XG4gICAgICAgICAgICAvLyBSZWxldmFudCBvdmVybGF5IGJyYW5jaGluZyBvZmZcbiAgICAgICAgICAgIGlmIChtb3VudCAmJiBtb3VudC5vdmVybGF5ICYmIG1vdW50Lm92ZXJsYXlbMF0uZnJvbSA8PSBwb3MgJiYgbW91bnQub3ZlcmxheVttb3VudC5vdmVybGF5Lmxlbmd0aCAtIDFdLnRvID49IHBvcykge1xuICAgICAgICAgICAgICAgIGxldCByb290ID0gbmV3IFRyZWVOb2RlKG1vdW50LnRyZWUsIG1vdW50Lm92ZXJsYXlbMF0uZnJvbSArIHNjYW4uZnJvbSwgLTEsIHNjYW4pO1xuICAgICAgICAgICAgICAgIChsYXllcnMgfHwgKGxheWVycyA9IFtpbm5lcl0pKS5wdXNoKHJlc29sdmVOb2RlKHJvb3QsIHBvcywgc2lkZSwgZmFsc2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGF5ZXJzID8gaXRlclN0YWNrKGxheWVycykgOiBpbm5lcjtcbn1cbi8qKlxuQSB0cmVlIGN1cnNvciBvYmplY3QgZm9jdXNlcyBvbiBhIGdpdmVuIG5vZGUgaW4gYSBzeW50YXggdHJlZSwgYW5kXG5hbGxvd3MgeW91IHRvIG1vdmUgdG8gYWRqYWNlbnQgbm9kZXMuXG4qL1xuY2xhc3MgVHJlZUN1cnNvciB7XG4gICAgLyoqXG4gICAgU2hvcnRoYW5kIGZvciBgLnR5cGUubmFtZWAuXG4gICAgKi9cbiAgICBnZXQgbmFtZSgpIHsgcmV0dXJuIHRoaXMudHlwZS5uYW1lOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihub2RlLCBtb2RlID0gMCkge1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGFjayA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLmJ1ZmZlck5vZGUgPSBudWxsO1xuICAgICAgICB0aGlzLm1vZGUgPSBtb2RlICYgfkl0ZXJNb2RlLkVudGVyQnJhY2tldGVkO1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIFRyZWVOb2RlKSB7XG4gICAgICAgICAgICB0aGlzLnlpZWxkTm9kZShub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3RyZWUgPSBub2RlLmNvbnRleHQucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBub2RlLmNvbnRleHQ7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gbm9kZS5fcGFyZW50OyBuOyBuID0gbi5fcGFyZW50KVxuICAgICAgICAgICAgICAgIHRoaXMuc3RhY2sudW5zaGlmdChuLmluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyTm9kZSA9IG5vZGU7XG4gICAgICAgICAgICB0aGlzLnlpZWxkQnVmKG5vZGUuaW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHlpZWxkTm9kZShub2RlKSB7XG4gICAgICAgIGlmICghbm9kZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5fdHJlZSA9IG5vZGU7XG4gICAgICAgIHRoaXMudHlwZSA9IG5vZGUudHlwZTtcbiAgICAgICAgdGhpcy5mcm9tID0gbm9kZS5mcm9tO1xuICAgICAgICB0aGlzLnRvID0gbm9kZS50bztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHlpZWxkQnVmKGluZGV4LCB0eXBlKSB7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgbGV0IHsgc3RhcnQsIGJ1ZmZlciB9ID0gdGhpcy5idWZmZXI7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGUgfHwgYnVmZmVyLnNldC50eXBlc1tidWZmZXIuYnVmZmVyW2luZGV4XV07XG4gICAgICAgIHRoaXMuZnJvbSA9IHN0YXJ0ICsgYnVmZmVyLmJ1ZmZlcltpbmRleCArIDFdO1xuICAgICAgICB0aGlzLnRvID0gc3RhcnQgKyBidWZmZXIuYnVmZmVyW2luZGV4ICsgMl07XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHlpZWxkKG5vZGUpIHtcbiAgICAgICAgaWYgKCFub2RlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIFRyZWVOb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy55aWVsZE5vZGUobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idWZmZXIgPSBub2RlLmNvbnRleHQ7XG4gICAgICAgIHJldHVybiB0aGlzLnlpZWxkQnVmKG5vZGUuaW5kZXgsIG5vZGUudHlwZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA/IHRoaXMuYnVmZmVyLmJ1ZmZlci5jaGlsZFN0cmluZyh0aGlzLmluZGV4KSA6IHRoaXMuX3RyZWUudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBlbnRlckNoaWxkKGRpciwgcG9zLCBzaWRlKSB7XG4gICAgICAgIGlmICghdGhpcy5idWZmZXIpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy55aWVsZCh0aGlzLl90cmVlLm5leHRDaGlsZChkaXIgPCAwID8gdGhpcy5fdHJlZS5fdHJlZS5jaGlsZHJlbi5sZW5ndGggLSAxIDogMCwgZGlyLCBwb3MsIHNpZGUsIHRoaXMubW9kZSkpO1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuYnVmZmVyO1xuICAgICAgICBsZXQgaW5kZXggPSBidWZmZXIuZmluZENoaWxkKHRoaXMuaW5kZXggKyA0LCBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAzXSwgZGlyLCBwb3MgLSB0aGlzLmJ1ZmZlci5zdGFydCwgc2lkZSk7XG4gICAgICAgIGlmIChpbmRleCA8IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RhY2sucHVzaCh0aGlzLmluZGV4KTtcbiAgICAgICAgcmV0dXJuIHRoaXMueWllbGRCdWYoaW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICBNb3ZlIHRoZSBjdXJzb3IgdG8gdGhpcyBub2RlJ3MgZmlyc3QgY2hpbGQuIFdoZW4gdGhpcyByZXR1cm5zXG4gICAgZmFsc2UsIHRoZSBub2RlIGhhcyBubyBjaGlsZCwgYW5kIHRoZSBjdXJzb3IgaGFzIG5vdCBiZWVuIG1vdmVkLlxuICAgICovXG4gICAgZmlyc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMuZW50ZXJDaGlsZCgxLCAwLCA0IC8qIFNpZGUuRG9udENhcmUgKi8pOyB9XG4gICAgLyoqXG4gICAgTW92ZSB0aGUgY3Vyc29yIHRvIHRoaXMgbm9kZSdzIGxhc3QgY2hpbGQuXG4gICAgKi9cbiAgICBsYXN0Q2hpbGQoKSB7IHJldHVybiB0aGlzLmVudGVyQ2hpbGQoLTEsIDAsIDQgLyogU2lkZS5Eb250Q2FyZSAqLyk7IH1cbiAgICAvKipcbiAgICBNb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIGZpcnN0IGNoaWxkIHRoYXQgZW5kcyBhZnRlciBgcG9zYC5cbiAgICAqL1xuICAgIGNoaWxkQWZ0ZXIocG9zKSB7IHJldHVybiB0aGlzLmVudGVyQ2hpbGQoMSwgcG9zLCAyIC8qIFNpZGUuQWZ0ZXIgKi8pOyB9XG4gICAgLyoqXG4gICAgTW92ZSB0byB0aGUgbGFzdCBjaGlsZCB0aGF0IHN0YXJ0cyBiZWZvcmUgYHBvc2AuXG4gICAgKi9cbiAgICBjaGlsZEJlZm9yZShwb3MpIHsgcmV0dXJuIHRoaXMuZW50ZXJDaGlsZCgtMSwgcG9zLCAtMiAvKiBTaWRlLkJlZm9yZSAqLyk7IH1cbiAgICAvKipcbiAgICBNb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIGNoaWxkIGFyb3VuZCBgcG9zYC4gSWYgc2lkZSBpcyAtMSB0aGVcbiAgICBjaGlsZCBtYXkgZW5kIGF0IHRoYXQgcG9zaXRpb24sIHdoZW4gMSBpdCBtYXkgc3RhcnQgdGhlcmUuIFRoaXNcbiAgICB3aWxsIGFsc28gZW50ZXIgW292ZXJsYWlkXSgjY29tbW9uLk1vdW50ZWRUcmVlLm92ZXJsYXkpXG4gICAgW21vdW50ZWRdKCNjb21tb24uTm9kZVByb3BebW91bnRlZCkgdHJlZXMgdW5sZXNzIGBvdmVybGF5c2AgaXNcbiAgICBzZXQgdG8gZmFsc2UuXG4gICAgKi9cbiAgICBlbnRlcihwb3MsIHNpZGUsIG1vZGUgPSB0aGlzLm1vZGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkKHRoaXMuX3RyZWUuZW50ZXIocG9zLCBzaWRlLCBtb2RlKSk7XG4gICAgICAgIHJldHVybiBtb2RlICYgSXRlck1vZGUuRXhjbHVkZUJ1ZmZlcnMgPyBmYWxzZSA6IHRoaXMuZW50ZXJDaGlsZCgxLCBwb3MsIHNpZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICBNb3ZlIHRvIHRoZSBub2RlJ3MgcGFyZW50IG5vZGUsIGlmIHRoaXMgaXNuJ3QgdGhlIHRvcCBub2RlLlxuICAgICovXG4gICAgcGFyZW50KCkge1xuICAgICAgICBpZiAoIXRoaXMuYnVmZmVyKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGROb2RlKCh0aGlzLm1vZGUgJiBJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKSA/IHRoaXMuX3RyZWUuX3BhcmVudCA6IHRoaXMuX3RyZWUucGFyZW50KTtcbiAgICAgICAgaWYgKHRoaXMuc3RhY2subGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGRCdWYodGhpcy5zdGFjay5wb3AoKSk7XG4gICAgICAgIGxldCBwYXJlbnQgPSAodGhpcy5tb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgPyB0aGlzLmJ1ZmZlci5wYXJlbnQgOiB0aGlzLmJ1ZmZlci5wYXJlbnQubmV4dFNpZ25pZmljYW50UGFyZW50KCk7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMueWllbGROb2RlKHBhcmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2libGluZyhkaXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcilcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5fdHJlZS5fcGFyZW50ID8gZmFsc2VcbiAgICAgICAgICAgICAgICA6IHRoaXMueWllbGQodGhpcy5fdHJlZS5pbmRleCA8IDAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5fdHJlZS5fcGFyZW50Lm5leHRDaGlsZCh0aGlzLl90cmVlLmluZGV4ICsgZGlyLCBkaXIsIDAsIDQgLyogU2lkZS5Eb250Q2FyZSAqLywgdGhpcy5tb2RlKSk7XG4gICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5idWZmZXIsIGQgPSB0aGlzLnN0YWNrLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmIChkaXIgPCAwKSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50U3RhcnQgPSBkIDwgMCA/IDAgOiB0aGlzLnN0YWNrW2RdICsgNDtcbiAgICAgICAgICAgIGlmICh0aGlzLmluZGV4ICE9IHBhcmVudFN0YXJ0KVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkQnVmKGJ1ZmZlci5maW5kQ2hpbGQocGFyZW50U3RhcnQsIHRoaXMuaW5kZXgsIC0xLCAwLCA0IC8qIFNpZGUuRG9udENhcmUgKi8pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBhZnRlciA9IGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDNdO1xuICAgICAgICAgICAgaWYgKGFmdGVyIDwgKGQgPCAwID8gYnVmZmVyLmJ1ZmZlci5sZW5ndGggOiBidWZmZXIuYnVmZmVyW3RoaXMuc3RhY2tbZF0gKyAzXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGRCdWYoYWZ0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkIDwgMCA/IHRoaXMueWllbGQodGhpcy5idWZmZXIucGFyZW50Lm5leHRDaGlsZCh0aGlzLmJ1ZmZlci5pbmRleCArIGRpciwgZGlyLCAwLCA0IC8qIFNpZGUuRG9udENhcmUgKi8sIHRoaXMubW9kZSkpIDogZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgdG8gdGhpcyBub2RlJ3MgbmV4dCBzaWJsaW5nLCBpZiBhbnkuXG4gICAgKi9cbiAgICBuZXh0U2libGluZygpIHsgcmV0dXJuIHRoaXMuc2libGluZygxKTsgfVxuICAgIC8qKlxuICAgIE1vdmUgdG8gdGhpcyBub2RlJ3MgcHJldmlvdXMgc2libGluZywgaWYgYW55LlxuICAgICovXG4gICAgcHJldlNpYmxpbmcoKSB7IHJldHVybiB0aGlzLnNpYmxpbmcoLTEpOyB9XG4gICAgYXRMYXN0Tm9kZShkaXIpIHtcbiAgICAgICAgbGV0IGluZGV4LCBwYXJlbnQsIHsgYnVmZmVyIH0gPSB0aGlzO1xuICAgICAgICBpZiAoYnVmZmVyKSB7XG4gICAgICAgICAgICBpZiAoZGlyID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmluZGV4IDwgYnVmZmVyLmJ1ZmZlci5idWZmZXIubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kZXg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlci5idWZmZXIuYnVmZmVyW2kgKyAzXSA8IHRoaXMuaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoeyBpbmRleCwgcGFyZW50IH0gPSBidWZmZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgKHsgaW5kZXgsIF9wYXJlbnQ6IHBhcmVudCB9ID0gdGhpcy5fdHJlZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICg7IHBhcmVudDsgeyBpbmRleCwgX3BhcmVudDogcGFyZW50IH0gPSBwYXJlbnQpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleCArIGRpciwgZSA9IGRpciA8IDAgPyAtMSA6IHBhcmVudC5fdHJlZS5jaGlsZHJlbi5sZW5ndGg7IGkgIT0gZTsgaSArPSBkaXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gcGFyZW50Ll90cmVlLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMubW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCBpbnN0YW5jZW9mIFRyZWVCdWZmZXIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFjaGlsZC50eXBlLmlzQW5vbnltb3VzIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGlsZChjaGlsZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBtb3ZlKGRpciwgZW50ZXIpIHtcbiAgICAgICAgaWYgKGVudGVyICYmIHRoaXMuZW50ZXJDaGlsZChkaXIsIDAsIDQgLyogU2lkZS5Eb250Q2FyZSAqLykpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2libGluZyhkaXIpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuYXRMYXN0Tm9kZShkaXIpIHx8ICF0aGlzLnBhcmVudCgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBNb3ZlIHRvIHRoZSBuZXh0IG5vZGUgaW4gYVxuICAgIFtwcmUtb3JkZXJdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1RyZWVfdHJhdmVyc2FsI1ByZS1vcmRlcixfTkxSKVxuICAgIHRyYXZlcnNhbCwgZ29pbmcgZnJvbSBhIG5vZGUgdG8gaXRzIGZpcnN0IGNoaWxkIG9yLCBpZiB0aGVcbiAgICBjdXJyZW50IG5vZGUgaXMgZW1wdHkgb3IgYGVudGVyYCBpcyBmYWxzZSwgaXRzIG5leHQgc2libGluZyBvclxuICAgIHRoZSBuZXh0IHNpYmxpbmcgb2YgdGhlIGZpcnN0IHBhcmVudCBub2RlIHRoYXQgaGFzIG9uZS5cbiAgICAqL1xuICAgIG5leHQoZW50ZXIgPSB0cnVlKSB7IHJldHVybiB0aGlzLm1vdmUoMSwgZW50ZXIpOyB9XG4gICAgLyoqXG4gICAgTW92ZSB0byB0aGUgbmV4dCBub2RlIGluIGEgbGFzdC10by1maXJzdCBwcmUtb3JkZXIgdHJhdmVyc2FsLiBBXG4gICAgbm9kZSBpcyBmb2xsb3dlZCBieSBpdHMgbGFzdCBjaGlsZCBvciwgaWYgaXQgaGFzIG5vbmUsIGl0c1xuICAgIHByZXZpb3VzIHNpYmxpbmcgb3IgdGhlIHByZXZpb3VzIHNpYmxpbmcgb2YgdGhlIGZpcnN0IHBhcmVudFxuICAgIG5vZGUgdGhhdCBoYXMgb25lLlxuICAgICovXG4gICAgcHJldihlbnRlciA9IHRydWUpIHsgcmV0dXJuIHRoaXMubW92ZSgtMSwgZW50ZXIpOyB9XG4gICAgLyoqXG4gICAgTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBpbm5lcm1vc3Qgbm9kZSB0aGF0IGNvdmVycyBgcG9zYC4gSWZcbiAgICBgc2lkZWAgaXMgLTEsIGl0IHdpbGwgZW50ZXIgbm9kZXMgdGhhdCBlbmQgYXQgYHBvc2AuIElmIGl0IGlzIDEsXG4gICAgaXQgd2lsbCBlbnRlciBub2RlcyB0aGF0IHN0YXJ0IGF0IGBwb3NgLlxuICAgICovXG4gICAgbW92ZVRvKHBvcywgc2lkZSA9IDApIHtcbiAgICAgICAgLy8gTW92ZSB1cCB0byBhIG5vZGUgdGhhdCBhY3R1YWxseSBob2xkcyB0aGUgcG9zaXRpb24sIGlmIHBvc3NpYmxlXG4gICAgICAgIHdoaWxlICh0aGlzLmZyb20gPT0gdGhpcy50byB8fFxuICAgICAgICAgICAgKHNpZGUgPCAxID8gdGhpcy5mcm9tID49IHBvcyA6IHRoaXMuZnJvbSA+IHBvcykgfHxcbiAgICAgICAgICAgIChzaWRlID4gLTEgPyB0aGlzLnRvIDw9IHBvcyA6IHRoaXMudG8gPCBwb3MpKVxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudCgpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAvLyBUaGVuIHNjYW4gZG93biBpbnRvIGNoaWxkIG5vZGVzIGFzIGZhciBhcyBwb3NzaWJsZVxuICAgICAgICB3aGlsZSAodGhpcy5lbnRlckNoaWxkKDEsIHBvcywgc2lkZSkpIHsgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IGEgW3N5bnRheCBub2RlXSgjY29tbW9uLlN5bnRheE5vZGUpIGF0IHRoZSBjdXJzb3IncyBjdXJyZW50XG4gICAgcG9zaXRpb24uXG4gICAgKi9cbiAgICBnZXQgbm9kZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmVlO1xuICAgICAgICBsZXQgY2FjaGUgPSB0aGlzLmJ1ZmZlck5vZGUsIHJlc3VsdCA9IG51bGwsIGRlcHRoID0gMDtcbiAgICAgICAgaWYgKGNhY2hlICYmIGNhY2hlLmNvbnRleHQgPT0gdGhpcy5idWZmZXIpIHtcbiAgICAgICAgICAgIHNjYW46IGZvciAobGV0IGluZGV4ID0gdGhpcy5pbmRleCwgZCA9IHRoaXMuc3RhY2subGVuZ3RoOyBkID49IDA7KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IGNhY2hlOyBjOyBjID0gYy5fcGFyZW50KVxuICAgICAgICAgICAgICAgICAgICBpZiAoYy5pbmRleCA9PSBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IHRoaXMuaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVwdGggPSBkICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHNjYW47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuc3RhY2tbLS1kXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gZGVwdGg7IGkgPCB0aGlzLnN0YWNrLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEJ1ZmZlck5vZGUodGhpcy5idWZmZXIsIHJlc3VsdCwgdGhpcy5zdGFja1tpXSk7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlck5vZGUgPSBuZXcgQnVmZmVyTm9kZSh0aGlzLmJ1ZmZlciwgcmVzdWx0LCB0aGlzLmluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBbdHJlZV0oI2NvbW1vbi5UcmVlKSB0aGF0IHJlcHJlc2VudHMgdGhlIGN1cnJlbnQgbm9kZSwgaWZcbiAgICBhbnkuIFdpbGwgcmV0dXJuIG51bGwgd2hlbiB0aGUgbm9kZSBpcyBpbiBhIFt0cmVlXG4gICAgYnVmZmVyXSgjY29tbW9uLlRyZWVCdWZmZXIpLlxuICAgICovXG4gICAgZ2V0IHRyZWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA/IG51bGwgOiB0aGlzLl90cmVlLl90cmVlO1xuICAgIH1cbiAgICAvKipcbiAgICBJdGVyYXRlIG92ZXIgdGhlIGN1cnJlbnQgbm9kZSBhbmQgYWxsIGl0cyBkZXNjZW5kYW50cywgY2FsbGluZ1xuICAgIGBlbnRlcmAgd2hlbiBlbnRlcmluZyBhIG5vZGUgYW5kIGBsZWF2ZWAsIGlmIGdpdmVuLCB3aGVuIGxlYXZpbmdcbiAgICBvbmUuIFdoZW4gYGVudGVyYCByZXR1cm5zIGBmYWxzZWAsIGFueSBjaGlsZHJlbiBvZiB0aGF0IG5vZGUgYXJlXG4gICAgc2tpcHBlZCwgYW5kIGBsZWF2ZWAgaXNuJ3QgY2FsbGVkIGZvciBpdC5cbiAgICAqL1xuICAgIGl0ZXJhdGUoZW50ZXIsIGxlYXZlKSB7XG4gICAgICAgIGZvciAobGV0IGRlcHRoID0gMDs7KSB7XG4gICAgICAgICAgICBsZXQgbXVzdExlYXZlID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy50eXBlLmlzQW5vbnltb3VzIHx8IGVudGVyKHRoaXMpICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpcnN0Q2hpbGQoKSkge1xuICAgICAgICAgICAgICAgICAgICBkZXB0aCsrO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnR5cGUuaXNBbm9ueW1vdXMpXG4gICAgICAgICAgICAgICAgICAgIG11c3RMZWF2ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgaWYgKG11c3RMZWF2ZSAmJiBsZWF2ZSlcbiAgICAgICAgICAgICAgICAgICAgbGVhdmUodGhpcyk7XG4gICAgICAgICAgICAgICAgbXVzdExlYXZlID0gdGhpcy50eXBlLmlzQW5vbnltb3VzO1xuICAgICAgICAgICAgICAgIGlmICghZGVwdGgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5uZXh0U2libGluZygpKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudCgpO1xuICAgICAgICAgICAgICAgIGRlcHRoLS07XG4gICAgICAgICAgICAgICAgbXVzdExlYXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBUZXN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgbm9kZSBtYXRjaGVzIGEgZ2l2ZW4gY29udGV4dFx1MjAxNGEgc2VxdWVuY2VcbiAgICBvZiBkaXJlY3QgcGFyZW50IG5vZGUgbmFtZXMuIEVtcHR5IHN0cmluZ3MgaW4gdGhlIGNvbnRleHQgYXJyYXlcbiAgICBhcmUgdHJlYXRlZCBhcyB3aWxkY2FyZHMuXG4gICAgKi9cbiAgICBtYXRjaENvbnRleHQoY29udGV4dCkge1xuICAgICAgICBpZiAoIXRoaXMuYnVmZmVyKVxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoTm9kZUNvbnRleHQodGhpcy5ub2RlLnBhcmVudCwgY29udGV4dCk7XG4gICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5idWZmZXIsIHsgdHlwZXMgfSA9IGJ1ZmZlci5zZXQ7XG4gICAgICAgIGZvciAobGV0IGkgPSBjb250ZXh0Lmxlbmd0aCAtIDEsIGQgPSB0aGlzLnN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgZC0tKSB7XG4gICAgICAgICAgICBpZiAoZCA8IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoTm9kZUNvbnRleHQodGhpcy5fdHJlZSwgY29udGV4dCwgaSk7XG4gICAgICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2J1ZmZlci5idWZmZXJbdGhpcy5zdGFja1tkXV1dO1xuICAgICAgICAgICAgaWYgKCF0eXBlLmlzQW5vbnltb3VzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRleHRbaV0gJiYgY29udGV4dFtpXSAhPSB0eXBlLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuZnVuY3Rpb24gaGFzQ2hpbGQodHJlZSkge1xuICAgIHJldHVybiB0cmVlLmNoaWxkcmVuLnNvbWUoY2ggPT4gY2ggaW5zdGFuY2VvZiBUcmVlQnVmZmVyIHx8ICFjaC50eXBlLmlzQW5vbnltb3VzIHx8IGhhc0NoaWxkKGNoKSk7XG59XG5mdW5jdGlvbiBidWlsZFRyZWUoZGF0YSkge1xuICAgIHZhciBfYTtcbiAgICBsZXQgeyBidWZmZXIsIG5vZGVTZXQsIG1heEJ1ZmZlckxlbmd0aCA9IERlZmF1bHRCdWZmZXJMZW5ndGgsIHJldXNlZCA9IFtdLCBtaW5SZXBlYXRUeXBlID0gbm9kZVNldC50eXBlcy5sZW5ndGggfSA9IGRhdGE7XG4gICAgbGV0IGN1cnNvciA9IEFycmF5LmlzQXJyYXkoYnVmZmVyKSA/IG5ldyBGbGF0QnVmZmVyQ3Vyc29yKGJ1ZmZlciwgYnVmZmVyLmxlbmd0aCkgOiBidWZmZXI7XG4gICAgbGV0IHR5cGVzID0gbm9kZVNldC50eXBlcztcbiAgICBsZXQgY29udGV4dEhhc2ggPSAwLCBsb29rQWhlYWQgPSAwO1xuICAgIGZ1bmN0aW9uIHRha2VOb2RlKHBhcmVudFN0YXJ0LCBtaW5Qb3MsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGluUmVwZWF0LCBkZXB0aCkge1xuICAgICAgICBsZXQgeyBpZCwgc3RhcnQsIGVuZCwgc2l6ZSB9ID0gY3Vyc29yO1xuICAgICAgICBsZXQgbG9va0FoZWFkQXRTdGFydCA9IGxvb2tBaGVhZCwgY29udGV4dEF0U3RhcnQgPSBjb250ZXh0SGFzaDtcbiAgICAgICAgaWYgKHNpemUgPCAwKSB7XG4gICAgICAgICAgICBjdXJzb3IubmV4dCgpO1xuICAgICAgICAgICAgaWYgKHNpemUgPT0gLTEgLyogU3BlY2lhbFJlY29yZC5SZXVzZSAqLykge1xuICAgICAgICAgICAgICAgIGxldCBub2RlID0gcmV1c2VkW2lkXTtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKHN0YXJ0IC0gcGFyZW50U3RhcnQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNpemUgPT0gLTMgLyogU3BlY2lhbFJlY29yZC5Db250ZXh0Q2hhbmdlICovKSB7IC8vIENvbnRleHQgY2hhbmdlXG4gICAgICAgICAgICAgICAgY29udGV4dEhhc2ggPSBpZDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzaXplID09IC00IC8qIFNwZWNpYWxSZWNvcmQuTG9va0FoZWFkICovKSB7XG4gICAgICAgICAgICAgICAgbG9va0FoZWFkID0gaWQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYFVucmVjb2duaXplZCByZWNvcmQgc2l6ZTogJHtzaXplfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCB0eXBlID0gdHlwZXNbaWRdLCBub2RlLCBidWZmZXI7XG4gICAgICAgIGxldCBzdGFydFBvcyA9IHN0YXJ0IC0gcGFyZW50U3RhcnQ7XG4gICAgICAgIGlmIChlbmQgLSBzdGFydCA8PSBtYXhCdWZmZXJMZW5ndGggJiYgKGJ1ZmZlciA9IGZpbmRCdWZmZXJTaXplKGN1cnNvci5wb3MgLSBtaW5Qb3MsIGluUmVwZWF0KSkpIHtcbiAgICAgICAgICAgIC8vIFNtYWxsIGVub3VnaCBmb3IgYSBidWZmZXIsIGFuZCBubyByZXVzZWQgbm9kZXMgaW5zaWRlXG4gICAgICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50MTZBcnJheShidWZmZXIuc2l6ZSAtIGJ1ZmZlci5za2lwKTtcbiAgICAgICAgICAgIGxldCBlbmRQb3MgPSBjdXJzb3IucG9zIC0gYnVmZmVyLnNpemUsIGluZGV4ID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoY3Vyc29yLnBvcyA+IGVuZFBvcylcbiAgICAgICAgICAgICAgICBpbmRleCA9IGNvcHlUb0J1ZmZlcihidWZmZXIuc3RhcnQsIGRhdGEsIGluZGV4KTtcbiAgICAgICAgICAgIG5vZGUgPSBuZXcgVHJlZUJ1ZmZlcihkYXRhLCBlbmQgLSBidWZmZXIuc3RhcnQsIG5vZGVTZXQpO1xuICAgICAgICAgICAgc3RhcnRQb3MgPSBidWZmZXIuc3RhcnQgLSBwYXJlbnRTdGFydDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHsgLy8gTWFrZSBpdCBhIG5vZGVcbiAgICAgICAgICAgIGxldCBlbmRQb3MgPSBjdXJzb3IucG9zIC0gc2l6ZTtcbiAgICAgICAgICAgIGN1cnNvci5uZXh0KCk7XG4gICAgICAgICAgICBsZXQgbG9jYWxDaGlsZHJlbiA9IFtdLCBsb2NhbFBvc2l0aW9ucyA9IFtdO1xuICAgICAgICAgICAgbGV0IGxvY2FsSW5SZXBlYXQgPSBpZCA+PSBtaW5SZXBlYXRUeXBlID8gaWQgOiAtMTtcbiAgICAgICAgICAgIGxldCBsYXN0R3JvdXAgPSAwLCBsYXN0RW5kID0gZW5kO1xuICAgICAgICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiBlbmRQb3MpIHtcbiAgICAgICAgICAgICAgICBpZiAobG9jYWxJblJlcGVhdCA+PSAwICYmIGN1cnNvci5pZCA9PSBsb2NhbEluUmVwZWF0ICYmIGN1cnNvci5zaXplID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnNvci5lbmQgPD0gbGFzdEVuZCAtIG1heEJ1ZmZlckxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZVJlcGVhdExlYWYobG9jYWxDaGlsZHJlbiwgbG9jYWxQb3NpdGlvbnMsIHN0YXJ0LCBsYXN0R3JvdXAsIGN1cnNvci5lbmQsIGxhc3RFbmQsIGxvY2FsSW5SZXBlYXQsIGxvb2tBaGVhZEF0U3RhcnQsIGNvbnRleHRBdFN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RHcm91cCA9IGxvY2FsQ2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEVuZCA9IGN1cnNvci5lbmQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yLm5leHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGVwdGggPiAyNTAwIC8qIEN1dE9mZi5EZXB0aCAqLykge1xuICAgICAgICAgICAgICAgICAgICB0YWtlRmxhdE5vZGUoc3RhcnQsIGVuZFBvcywgbG9jYWxDaGlsZHJlbiwgbG9jYWxQb3NpdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGFrZU5vZGUoc3RhcnQsIGVuZFBvcywgbG9jYWxDaGlsZHJlbiwgbG9jYWxQb3NpdGlvbnMsIGxvY2FsSW5SZXBlYXQsIGRlcHRoICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxvY2FsSW5SZXBlYXQgPj0gMCAmJiBsYXN0R3JvdXAgPiAwICYmIGxhc3RHcm91cCA8IGxvY2FsQ2hpbGRyZW4ubGVuZ3RoKVxuICAgICAgICAgICAgICAgIG1ha2VSZXBlYXRMZWFmKGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCBzdGFydCwgbGFzdEdyb3VwLCBzdGFydCwgbGFzdEVuZCwgbG9jYWxJblJlcGVhdCwgbG9va0FoZWFkQXRTdGFydCwgY29udGV4dEF0U3RhcnQpO1xuICAgICAgICAgICAgbG9jYWxDaGlsZHJlbi5yZXZlcnNlKCk7XG4gICAgICAgICAgICBsb2NhbFBvc2l0aW9ucy5yZXZlcnNlKCk7XG4gICAgICAgICAgICBpZiAobG9jYWxJblJlcGVhdCA+IC0xICYmIGxhc3RHcm91cCA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgbWFrZSA9IG1ha2VCYWxhbmNlZCh0eXBlLCBjb250ZXh0QXRTdGFydCk7XG4gICAgICAgICAgICAgICAgbm9kZSA9IGJhbGFuY2VSYW5nZSh0eXBlLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgMCwgbG9jYWxDaGlsZHJlbi5sZW5ndGgsIDAsIGVuZCAtIHN0YXJ0LCBtYWtlLCBtYWtlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBtYWtlVHJlZSh0eXBlLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgZW5kIC0gc3RhcnQsIGxvb2tBaGVhZEF0U3RhcnQgLSBlbmQsIGNvbnRleHRBdFN0YXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjaGlsZHJlbi5wdXNoKG5vZGUpO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChzdGFydFBvcyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRha2VGbGF0Tm9kZShwYXJlbnRTdGFydCwgbWluUG9zLCBjaGlsZHJlbiwgcG9zaXRpb25zKSB7XG4gICAgICAgIGxldCBub2RlcyA9IFtdOyAvLyBUZW1wb3JhcnksIGludmVydGVkIGFycmF5IG9mIGxlYWYgbm9kZXMgZm91bmQsIHdpdGggYWJzb2x1dGUgcG9zaXRpb25zXG4gICAgICAgIGxldCBub2RlQ291bnQgPSAwLCBzdG9wQXQgPSAtMTtcbiAgICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiBtaW5Qb3MpIHtcbiAgICAgICAgICAgIGxldCB7IGlkLCBzdGFydCwgZW5kLCBzaXplIH0gPSBjdXJzb3I7XG4gICAgICAgICAgICBpZiAoc2l6ZSA+IDQpIHsgLy8gTm90IGEgbGVhZlxuICAgICAgICAgICAgICAgIGN1cnNvci5uZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzdG9wQXQgPiAtMSAmJiBzdGFydCA8IHN0b3BBdCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3BBdCA8IDApXG4gICAgICAgICAgICAgICAgICAgIHN0b3BBdCA9IGVuZCAtIG1heEJ1ZmZlckxlbmd0aDtcbiAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKGlkLCBzdGFydCwgZW5kKTtcbiAgICAgICAgICAgICAgICBub2RlQ291bnQrKztcbiAgICAgICAgICAgICAgICBjdXJzb3IubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlQ291bnQpIHtcbiAgICAgICAgICAgIGxldCBidWZmZXIgPSBuZXcgVWludDE2QXJyYXkobm9kZUNvdW50ICogNCk7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBub2Rlc1tub2Rlcy5sZW5ndGggLSAyXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBub2Rlcy5sZW5ndGggLSAzLCBqID0gMDsgaSA+PSAwOyBpIC09IDMpIHtcbiAgICAgICAgICAgICAgICBidWZmZXJbaisrXSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgICAgIGJ1ZmZlcltqKytdID0gbm9kZXNbaSArIDFdIC0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgYnVmZmVyW2orK10gPSBub2Rlc1tpICsgMl0gLSBzdGFydDtcbiAgICAgICAgICAgICAgICBidWZmZXJbaisrXSA9IGo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKG5ldyBUcmVlQnVmZmVyKGJ1ZmZlciwgbm9kZXNbMl0gLSBzdGFydCwgbm9kZVNldCkpO1xuICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goc3RhcnQgLSBwYXJlbnRTdGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbWFrZUJhbGFuY2VkKHR5cGUsIGNvbnRleHRIYXNoKSB7XG4gICAgICAgIHJldHVybiAoY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoKSA9PiB7XG4gICAgICAgICAgICBsZXQgbG9va0FoZWFkID0gMCwgbGFzdEkgPSBjaGlsZHJlbi5sZW5ndGggLSAxLCBsYXN0LCBsb29rQWhlYWRQcm9wO1xuICAgICAgICAgICAgaWYgKGxhc3RJID49IDAgJiYgKGxhc3QgPSBjaGlsZHJlbltsYXN0SV0pIGluc3RhbmNlb2YgVHJlZSkge1xuICAgICAgICAgICAgICAgIGlmICghbGFzdEkgJiYgbGFzdC50eXBlID09IHR5cGUgJiYgbGFzdC5sZW5ndGggPT0gbGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFzdDtcbiAgICAgICAgICAgICAgICBpZiAobG9va0FoZWFkUHJvcCA9IGxhc3QucHJvcChOb2RlUHJvcC5sb29rQWhlYWQpKVxuICAgICAgICAgICAgICAgICAgICBsb29rQWhlYWQgPSBwb3NpdGlvbnNbbGFzdEldICsgbGFzdC5sZW5ndGggKyBsb29rQWhlYWRQcm9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1ha2VUcmVlKHR5cGUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCwgbG9va0FoZWFkLCBjb250ZXh0SGFzaCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1ha2VSZXBlYXRMZWFmKGNoaWxkcmVuLCBwb3NpdGlvbnMsIGJhc2UsIGksIGZyb20sIHRvLCB0eXBlLCBsb29rQWhlYWQsIGNvbnRleHRIYXNoKSB7XG4gICAgICAgIGxldCBsb2NhbENoaWxkcmVuID0gW10sIGxvY2FsUG9zaXRpb25zID0gW107XG4gICAgICAgIHdoaWxlIChjaGlsZHJlbi5sZW5ndGggPiBpKSB7XG4gICAgICAgICAgICBsb2NhbENoaWxkcmVuLnB1c2goY2hpbGRyZW4ucG9wKCkpO1xuICAgICAgICAgICAgbG9jYWxQb3NpdGlvbnMucHVzaChwb3NpdGlvbnMucG9wKCkgKyBiYXNlIC0gZnJvbSk7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGRyZW4ucHVzaChtYWtlVHJlZShub2RlU2V0LnR5cGVzW3R5cGVdLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgdG8gLSBmcm9tLCBsb29rQWhlYWQgLSB0bywgY29udGV4dEhhc2gpKTtcbiAgICAgICAgcG9zaXRpb25zLnB1c2goZnJvbSAtIGJhc2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtYWtlVHJlZSh0eXBlLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgsIGxvb2tBaGVhZCwgY29udGV4dEhhc2gsIHByb3BzKSB7XG4gICAgICAgIGlmIChjb250ZXh0SGFzaCkge1xuICAgICAgICAgICAgbGV0IHBhaXIgPSBbTm9kZVByb3AuY29udGV4dEhhc2gsIGNvbnRleHRIYXNoXTtcbiAgICAgICAgICAgIHByb3BzID0gcHJvcHMgPyBbcGFpcl0uY29uY2F0KHByb3BzKSA6IFtwYWlyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobG9va0FoZWFkID4gMjUpIHtcbiAgICAgICAgICAgIGxldCBwYWlyID0gW05vZGVQcm9wLmxvb2tBaGVhZCwgbG9va0FoZWFkXTtcbiAgICAgICAgICAgIHByb3BzID0gcHJvcHMgPyBbcGFpcl0uY29uY2F0KHByb3BzKSA6IFtwYWlyXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFRyZWUodHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoLCBwcm9wcyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmRCdWZmZXJTaXplKG1heFNpemUsIGluUmVwZWF0KSB7XG4gICAgICAgIC8vIFNjYW4gdGhyb3VnaCB0aGUgYnVmZmVyIHRvIGZpbmQgcHJldmlvdXMgc2libGluZ3MgdGhhdCBmaXRcbiAgICAgICAgLy8gdG9nZXRoZXIgaW4gYSBUcmVlQnVmZmVyLCBhbmQgZG9uJ3QgY29udGFpbiBhbnkgcmV1c2VkIG5vZGVzXG4gICAgICAgIC8vICh3aGljaCBjYW4ndCBiZSBzdG9yZWQgaW4gYSBidWZmZXIpLlxuICAgICAgICAvLyBJZiBgaW5SZXBlYXRgIGlzID4gLTEsIGlnbm9yZSBub2RlIGJvdW5kYXJpZXMgb2YgdGhhdCB0eXBlIGZvclxuICAgICAgICAvLyBuZXN0aW5nLCBidXQgbWFrZSBzdXJlIHRoZSBlbmQgZmFsbHMgZWl0aGVyIGF0IHRoZSBzdGFydFxuICAgICAgICAvLyAoYG1heFNpemVgKSBvciBiZWZvcmUgc3VjaCBhIG5vZGUuXG4gICAgICAgIGxldCBmb3JrID0gY3Vyc29yLmZvcmsoKTtcbiAgICAgICAgbGV0IHNpemUgPSAwLCBzdGFydCA9IDAsIHNraXAgPSAwLCBtaW5TdGFydCA9IGZvcmsuZW5kIC0gbWF4QnVmZmVyTGVuZ3RoO1xuICAgICAgICBsZXQgcmVzdWx0ID0geyBzaXplOiAwLCBzdGFydDogMCwgc2tpcDogMCB9O1xuICAgICAgICBzY2FuOiBmb3IgKGxldCBtaW5Qb3MgPSBmb3JrLnBvcyAtIG1heFNpemU7IGZvcmsucG9zID4gbWluUG9zOykge1xuICAgICAgICAgICAgbGV0IG5vZGVTaXplID0gZm9yay5zaXplO1xuICAgICAgICAgICAgLy8gUHJldGVuZCBuZXN0ZWQgcmVwZWF0IG5vZGVzIG9mIHRoZSBzYW1lIHR5cGUgZG9uJ3QgZXhpc3RcbiAgICAgICAgICAgIGlmIChmb3JrLmlkID09IGluUmVwZWF0ICYmIG5vZGVTaXplID49IDApIHtcbiAgICAgICAgICAgICAgICAvLyBFeGNlcHQgdGhhdCB3ZSBzdG9yZSB0aGUgY3VycmVudCBzdGF0ZSBhcyBhIHZhbGlkIHJldHVyblxuICAgICAgICAgICAgICAgIC8vIHZhbHVlLlxuICAgICAgICAgICAgICAgIHJlc3VsdC5zaXplID0gc2l6ZTtcbiAgICAgICAgICAgICAgICByZXN1bHQuc3RhcnQgPSBzdGFydDtcbiAgICAgICAgICAgICAgICByZXN1bHQuc2tpcCA9IHNraXA7XG4gICAgICAgICAgICAgICAgc2tpcCArPSA0O1xuICAgICAgICAgICAgICAgIHNpemUgKz0gNDtcbiAgICAgICAgICAgICAgICBmb3JrLm5leHQoKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzdGFydFBvcyA9IGZvcmsucG9zIC0gbm9kZVNpemU7XG4gICAgICAgICAgICBpZiAobm9kZVNpemUgPCAwIHx8IHN0YXJ0UG9zIDwgbWluUG9zIHx8IGZvcmsuc3RhcnQgPCBtaW5TdGFydClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGxldCBsb2NhbFNraXBwZWQgPSBmb3JrLmlkID49IG1pblJlcGVhdFR5cGUgPyA0IDogMDtcbiAgICAgICAgICAgIGxldCBub2RlU3RhcnQgPSBmb3JrLnN0YXJ0O1xuICAgICAgICAgICAgZm9yay5uZXh0KCk7XG4gICAgICAgICAgICB3aGlsZSAoZm9yay5wb3MgPiBzdGFydFBvcykge1xuICAgICAgICAgICAgICAgIGlmIChmb3JrLnNpemUgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JrLnNpemUgPT0gLTMgLyogU3BlY2lhbFJlY29yZC5Db250ZXh0Q2hhbmdlICovIHx8IGZvcmsuc2l6ZSA9PSAtNCAvKiBTcGVjaWFsUmVjb3JkLkxvb2tBaGVhZCAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU2tpcHBlZCArPSA0O1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBzY2FuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChmb3JrLmlkID49IG1pblJlcGVhdFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTa2lwcGVkICs9IDQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvcmsubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhcnQgPSBub2RlU3RhcnQ7XG4gICAgICAgICAgICBzaXplICs9IG5vZGVTaXplO1xuICAgICAgICAgICAgc2tpcCArPSBsb2NhbFNraXBwZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluUmVwZWF0IDwgMCB8fCBzaXplID09IG1heFNpemUpIHtcbiAgICAgICAgICAgIHJlc3VsdC5zaXplID0gc2l6ZTtcbiAgICAgICAgICAgIHJlc3VsdC5zdGFydCA9IHN0YXJ0O1xuICAgICAgICAgICAgcmVzdWx0LnNraXAgPSBza2lwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQuc2l6ZSA+IDQgPyByZXN1bHQgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvcHlUb0J1ZmZlcihidWZmZXJTdGFydCwgYnVmZmVyLCBpbmRleCkge1xuICAgICAgICBsZXQgeyBpZCwgc3RhcnQsIGVuZCwgc2l6ZSB9ID0gY3Vyc29yO1xuICAgICAgICBjdXJzb3IubmV4dCgpO1xuICAgICAgICBpZiAoc2l6ZSA+PSAwICYmIGlkIDwgbWluUmVwZWF0VHlwZSkge1xuICAgICAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIGlmIChzaXplID4gNCkge1xuICAgICAgICAgICAgICAgIGxldCBlbmRQb3MgPSBjdXJzb3IucG9zIC0gKHNpemUgLSA0KTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoY3Vyc29yLnBvcyA+IGVuZFBvcylcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBjb3B5VG9CdWZmZXIoYnVmZmVyU3RhcnQsIGJ1ZmZlciwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVmZmVyWy0taW5kZXhdID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgIGJ1ZmZlclstLWluZGV4XSA9IGVuZCAtIGJ1ZmZlclN0YXJ0O1xuICAgICAgICAgICAgYnVmZmVyWy0taW5kZXhdID0gc3RhcnQgLSBidWZmZXJTdGFydDtcbiAgICAgICAgICAgIGJ1ZmZlclstLWluZGV4XSA9IGlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNpemUgPT0gLTMgLyogU3BlY2lhbFJlY29yZC5Db250ZXh0Q2hhbmdlICovKSB7XG4gICAgICAgICAgICBjb250ZXh0SGFzaCA9IGlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNpemUgPT0gLTQgLyogU3BlY2lhbFJlY29yZC5Mb29rQWhlYWQgKi8pIHtcbiAgICAgICAgICAgIGxvb2tBaGVhZCA9IGlkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gICAgbGV0IGNoaWxkcmVuID0gW10sIHBvc2l0aW9ucyA9IFtdO1xuICAgIHdoaWxlIChjdXJzb3IucG9zID4gMClcbiAgICAgICAgdGFrZU5vZGUoZGF0YS5zdGFydCB8fCAwLCBkYXRhLmJ1ZmZlclN0YXJ0IHx8IDAsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIC0xLCAwKTtcbiAgICBsZXQgbGVuZ3RoID0gKF9hID0gZGF0YS5sZW5ndGgpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChjaGlsZHJlbi5sZW5ndGggPyBwb3NpdGlvbnNbMF0gKyBjaGlsZHJlblswXS5sZW5ndGggOiAwKTtcbiAgICByZXR1cm4gbmV3IFRyZWUodHlwZXNbZGF0YS50b3BJRF0sIGNoaWxkcmVuLnJldmVyc2UoKSwgcG9zaXRpb25zLnJldmVyc2UoKSwgbGVuZ3RoKTtcbn1cbmNvbnN0IG5vZGVTaXplQ2FjaGUgPSBuZXcgV2Vha01hcDtcbmZ1bmN0aW9uIG5vZGVTaXplKGJhbGFuY2VUeXBlLCBub2RlKSB7XG4gICAgaWYgKCFiYWxhbmNlVHlwZS5pc0Fub255bW91cyB8fCBub2RlIGluc3RhbmNlb2YgVHJlZUJ1ZmZlciB8fCBub2RlLnR5cGUgIT0gYmFsYW5jZVR5cGUpXG4gICAgICAgIHJldHVybiAxO1xuICAgIGxldCBzaXplID0gbm9kZVNpemVDYWNoZS5nZXQobm9kZSk7XG4gICAgaWYgKHNpemUgPT0gbnVsbCkge1xuICAgICAgICBzaXplID0gMTtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgaWYgKGNoaWxkLnR5cGUgIT0gYmFsYW5jZVR5cGUgfHwgIShjaGlsZCBpbnN0YW5jZW9mIFRyZWUpKSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaXplICs9IG5vZGVTaXplKGJhbGFuY2VUeXBlLCBjaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZVNpemVDYWNoZS5zZXQobm9kZSwgc2l6ZSk7XG4gICAgfVxuICAgIHJldHVybiBzaXplO1xufVxuZnVuY3Rpb24gYmFsYW5jZVJhbmdlKFxuLy8gVGhlIHR5cGUgdGhlIGJhbGFuY2VkIHRyZWUncyBpbm5lciBub2Rlcy5cbmJhbGFuY2VUeXBlLCBcbi8vIFRoZSBkaXJlY3QgY2hpbGRyZW4gYW5kIHRoZWlyIHBvc2l0aW9uc1xuY2hpbGRyZW4sIHBvc2l0aW9ucywgXG4vLyBUaGUgaW5kZXggcmFuZ2UgaW4gY2hpbGRyZW4vcG9zaXRpb25zIHRvIHVzZVxuZnJvbSwgdG8sIFxuLy8gVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBub2RlcywgcmVsYXRpdmUgdG8gdGhlaXIgcGFyZW50Llxuc3RhcnQsIFxuLy8gTGVuZ3RoIG9mIHRoZSBvdXRlciBub2RlXG5sZW5ndGgsIFxuLy8gRnVuY3Rpb24gdG8gYnVpbGQgdGhlIHRvcCBub2RlIG9mIHRoZSBiYWxhbmNlZCB0cmVlXG5ta1RvcCwgXG4vLyBGdW5jdGlvbiB0byBidWlsZCBpbnRlcm5hbCBub2RlcyBmb3IgdGhlIGJhbGFuY2VkIHRyZWVcbm1rVHJlZSkge1xuICAgIGxldCB0b3RhbCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IGZyb207IGkgPCB0bzsgaSsrKVxuICAgICAgICB0b3RhbCArPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGRyZW5baV0pO1xuICAgIGxldCBtYXhDaGlsZCA9IE1hdGguY2VpbCgodG90YWwgKiAxLjUpIC8gOCAvKiBCYWxhbmNlLkJyYW5jaEZhY3RvciAqLyk7XG4gICAgbGV0IGxvY2FsQ2hpbGRyZW4gPSBbXSwgbG9jYWxQb3NpdGlvbnMgPSBbXTtcbiAgICBmdW5jdGlvbiBkaXZpZGUoY2hpbGRyZW4sIHBvc2l0aW9ucywgZnJvbSwgdG8sIG9mZnNldCkge1xuICAgICAgICBmb3IgKGxldCBpID0gZnJvbTsgaSA8IHRvOykge1xuICAgICAgICAgICAgbGV0IGdyb3VwRnJvbSA9IGksIGdyb3VwU3RhcnQgPSBwb3NpdGlvbnNbaV0sIGdyb3VwU2l6ZSA9IG5vZGVTaXplKGJhbGFuY2VUeXBlLCBjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgICBmb3IgKDsgaSA8IHRvOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dFNpemUgPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGRyZW5baV0pO1xuICAgICAgICAgICAgICAgIGlmIChncm91cFNpemUgKyBuZXh0U2l6ZSA+PSBtYXhDaGlsZClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZ3JvdXBTaXplICs9IG5leHRTaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGkgPT0gZ3JvdXBGcm9tICsgMSkge1xuICAgICAgICAgICAgICAgIGlmIChncm91cFNpemUgPiBtYXhDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb25seSA9IGNoaWxkcmVuW2dyb3VwRnJvbV07IC8vIE9ubHkgdHJlZXMgY2FuIGhhdmUgYSBzaXplID4gMVxuICAgICAgICAgICAgICAgICAgICBkaXZpZGUob25seS5jaGlsZHJlbiwgb25seS5wb3NpdGlvbnMsIDAsIG9ubHkuY2hpbGRyZW4ubGVuZ3RoLCBwb3NpdGlvbnNbZ3JvdXBGcm9tXSArIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsb2NhbENoaWxkcmVuLnB1c2goY2hpbGRyZW5bZ3JvdXBGcm9tXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgbGVuZ3RoID0gcG9zaXRpb25zW2kgLSAxXSArIGNoaWxkcmVuW2kgLSAxXS5sZW5ndGggLSBncm91cFN0YXJ0O1xuICAgICAgICAgICAgICAgIGxvY2FsQ2hpbGRyZW4ucHVzaChiYWxhbmNlUmFuZ2UoYmFsYW5jZVR5cGUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGdyb3VwRnJvbSwgaSwgZ3JvdXBTdGFydCwgbGVuZ3RoLCBudWxsLCBta1RyZWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvY2FsUG9zaXRpb25zLnB1c2goZ3JvdXBTdGFydCArIG9mZnNldCAtIHN0YXJ0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkaXZpZGUoY2hpbGRyZW4sIHBvc2l0aW9ucywgZnJvbSwgdG8sIDApO1xuICAgIHJldHVybiAobWtUb3AgfHwgbWtUcmVlKShsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgbGVuZ3RoKTtcbn1cbi8qKlxuUHJvdmlkZXMgYSB3YXkgdG8gYXNzb2NpYXRlIHZhbHVlcyB3aXRoIHBpZWNlcyBvZiB0cmVlcy4gQXMgbG9uZ1xuYXMgdGhhdCBwYXJ0IG9mIHRoZSB0cmVlIGlzIHJldXNlZCwgdGhlIGFzc29jaWF0ZWQgdmFsdWVzIGNhbiBiZVxucmV0cmlldmVkIGZyb20gYW4gdXBkYXRlZCB0cmVlLlxuKi9cbmNsYXNzIE5vZGVXZWFrTWFwIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5tYXAgPSBuZXcgV2Vha01hcCgpO1xuICAgIH1cbiAgICBzZXRCdWZmZXIoYnVmZmVyLCBpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgbGV0IGlubmVyID0gdGhpcy5tYXAuZ2V0KGJ1ZmZlcik7XG4gICAgICAgIGlmICghaW5uZXIpXG4gICAgICAgICAgICB0aGlzLm1hcC5zZXQoYnVmZmVyLCBpbm5lciA9IG5ldyBNYXApO1xuICAgICAgICBpbm5lci5zZXQoaW5kZXgsIHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0QnVmZmVyKGJ1ZmZlciwgaW5kZXgpIHtcbiAgICAgICAgbGV0IGlubmVyID0gdGhpcy5tYXAuZ2V0KGJ1ZmZlcik7XG4gICAgICAgIHJldHVybiBpbm5lciAmJiBpbm5lci5nZXQoaW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICBTZXQgdGhlIHZhbHVlIGZvciB0aGlzIHN5bnRheCBub2RlLlxuICAgICovXG4gICAgc2V0KG5vZGUsIHZhbHVlKSB7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgQnVmZmVyTm9kZSlcbiAgICAgICAgICAgIHRoaXMuc2V0QnVmZmVyKG5vZGUuY29udGV4dC5idWZmZXIsIG5vZGUuaW5kZXgsIHZhbHVlKTtcbiAgICAgICAgZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIFRyZWVOb2RlKVxuICAgICAgICAgICAgdGhpcy5tYXAuc2V0KG5vZGUudHJlZSwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXRyaWV2ZSB2YWx1ZSBmb3IgdGhpcyBzeW50YXggbm9kZSwgaWYgaXQgZXhpc3RzIGluIHRoZSBtYXAuXG4gICAgKi9cbiAgICBnZXQobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIEJ1ZmZlck5vZGUgPyB0aGlzLmdldEJ1ZmZlcihub2RlLmNvbnRleHQuYnVmZmVyLCBub2RlLmluZGV4KVxuICAgICAgICAgICAgOiBub2RlIGluc3RhbmNlb2YgVHJlZU5vZGUgPyB0aGlzLm1hcC5nZXQobm9kZS50cmVlKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgU2V0IHRoZSB2YWx1ZSBmb3IgdGhlIG5vZGUgdGhhdCBhIGN1cnNvciBjdXJyZW50bHkgcG9pbnRzIHRvLlxuICAgICovXG4gICAgY3Vyc29yU2V0KGN1cnNvciwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGN1cnNvci5idWZmZXIpXG4gICAgICAgICAgICB0aGlzLnNldEJ1ZmZlcihjdXJzb3IuYnVmZmVyLmJ1ZmZlciwgY3Vyc29yLmluZGV4LCB2YWx1ZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMubWFwLnNldChjdXJzb3IudHJlZSwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXRyaWV2ZSB0aGUgdmFsdWUgZm9yIHRoZSBub2RlIHRoYXQgYSBjdXJzb3IgY3VycmVudGx5IHBvaW50c1xuICAgIHRvLlxuICAgICovXG4gICAgY3Vyc29yR2V0KGN1cnNvcikge1xuICAgICAgICByZXR1cm4gY3Vyc29yLmJ1ZmZlciA/IHRoaXMuZ2V0QnVmZmVyKGN1cnNvci5idWZmZXIuYnVmZmVyLCBjdXJzb3IuaW5kZXgpIDogdGhpcy5tYXAuZ2V0KGN1cnNvci50cmVlKTtcbiAgICB9XG59XG5cbi8qKlxuVHJlZSBmcmFnbWVudHMgYXJlIHVzZWQgZHVyaW5nIFtpbmNyZW1lbnRhbFxucGFyc2luZ10oI2NvbW1vbi5QYXJzZXIuc3RhcnRQYXJzZSkgdG8gdHJhY2sgcGFydHMgb2Ygb2xkIHRyZWVzXG50aGF0IGNhbiBiZSByZXVzZWQgaW4gYSBuZXcgcGFyc2UuIEFuIGFycmF5IG9mIGZyYWdtZW50cyBpcyB1c2VkXG50byB0cmFjayByZWdpb25zIG9mIGFuIG9sZCB0cmVlIHdob3NlIG5vZGVzIG1pZ2h0IGJlIHJldXNlZCBpbiBuZXdcbnBhcnNlcy4gVXNlIHRoZSBzdGF0aWNcbltgYXBwbHlDaGFuZ2VzYF0oI2NvbW1vbi5UcmVlRnJhZ21lbnReYXBwbHlDaGFuZ2VzKSBtZXRob2QgdG9cbnVwZGF0ZSBmcmFnbWVudHMgZm9yIGRvY3VtZW50IGNoYW5nZXMuXG4qL1xuY2xhc3MgVHJlZUZyYWdtZW50IHtcbiAgICAvKipcbiAgICBDb25zdHJ1Y3QgYSB0cmVlIGZyYWdtZW50LiBZb3UnbGwgdXN1YWxseSB3YW50IHRvIHVzZVxuICAgIFtgYWRkVHJlZWBdKCNjb21tb24uVHJlZUZyYWdtZW50XmFkZFRyZWUpIGFuZFxuICAgIFtgYXBwbHlDaGFuZ2VzYF0oI2NvbW1vbi5UcmVlRnJhZ21lbnReYXBwbHlDaGFuZ2VzKSBpbnN0ZWFkIG9mXG4gICAgY2FsbGluZyB0aGlzIGRpcmVjdGx5LlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHN0YXJ0IG9mIHRoZSB1bmNoYW5nZWQgcmFuZ2UgcG9pbnRlZCB0byBieSB0aGlzIGZyYWdtZW50LlxuICAgIFRoaXMgcmVmZXJzIHRvIGFuIG9mZnNldCBpbiB0aGUgX3VwZGF0ZWRfIGRvY3VtZW50IChhcyBvcHBvc2VkXG4gICAgdG8gdGhlIG9yaWdpbmFsIHRyZWUpLlxuICAgICovXG4gICAgZnJvbSwgXG4gICAgLyoqXG4gICAgVGhlIGVuZCBvZiB0aGUgdW5jaGFuZ2VkIHJhbmdlLlxuICAgICovXG4gICAgdG8sIFxuICAgIC8qKlxuICAgIFRoZSB0cmVlIHRoYXQgdGhpcyBmcmFnbWVudCBpcyBiYXNlZCBvbi5cbiAgICAqL1xuICAgIHRyZWUsIFxuICAgIC8qKlxuICAgIFRoZSBvZmZzZXQgYmV0d2VlbiB0aGUgZnJhZ21lbnQncyB0cmVlIGFuZCB0aGUgZG9jdW1lbnQgdGhhdFxuICAgIHRoaXMgZnJhZ21lbnQgY2FuIGJlIHVzZWQgYWdhaW5zdC4gQWRkIHRoaXMgd2hlbiBnb2luZyBmcm9tXG4gICAgZG9jdW1lbnQgdG8gdHJlZSBwb3NpdGlvbnMsIHN1YnRyYWN0IGl0IHRvIGdvIGZyb20gdHJlZSB0b1xuICAgIGRvY3VtZW50IHBvc2l0aW9ucy5cbiAgICAqL1xuICAgIG9mZnNldCwgb3BlblN0YXJ0ID0gZmFsc2UsIG9wZW5FbmQgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICB0aGlzLm9wZW4gPSAob3BlblN0YXJ0ID8gMSAvKiBPcGVuLlN0YXJ0ICovIDogMCkgfCAob3BlbkVuZCA/IDIgLyogT3Blbi5FbmQgKi8gOiAwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGUgc3RhcnQgb2YgdGhlIGZyYWdtZW50IHJlcHJlc2VudHMgdGhlIHN0YXJ0IG9mIGFcbiAgICBwYXJzZSwgb3IgdGhlIGVuZCBvZiBhIGNoYW5nZS4gKEluIHRoZSBzZWNvbmQgY2FzZSwgaXQgbWF5IG5vdFxuICAgIGJlIHNhZmUgdG8gcmV1c2Ugc29tZSBub2RlcyBhdCB0aGUgc3RhcnQsIGRlcGVuZGluZyBvbiB0aGVcbiAgICBwYXJzaW5nIGFsZ29yaXRobS4pXG4gICAgKi9cbiAgICBnZXQgb3BlblN0YXJ0KCkgeyByZXR1cm4gKHRoaXMub3BlbiAmIDEgLyogT3Blbi5TdGFydCAqLykgPiAwOyB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGUgZW5kIG9mIHRoZSBmcmFnbWVudCByZXByZXNlbnRzIHRoZSBlbmQgb2YgYVxuICAgIGZ1bGwtZG9jdW1lbnQgcGFyc2UsIG9yIHRoZSBzdGFydCBvZiBhIGNoYW5nZS5cbiAgICAqL1xuICAgIGdldCBvcGVuRW5kKCkgeyByZXR1cm4gKHRoaXMub3BlbiAmIDIgLyogT3Blbi5FbmQgKi8pID4gMDsgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHNldCBvZiBmcmFnbWVudHMgZnJvbSBhIGZyZXNobHkgcGFyc2VkIHRyZWUsIG9yIHVwZGF0ZVxuICAgIGFuIGV4aXN0aW5nIHNldCBvZiBmcmFnbWVudHMgYnkgcmVwbGFjaW5nIHRoZSBvbmVzIHRoYXQgb3ZlcmxhcFxuICAgIHdpdGggYSB0cmVlIHdpdGggY29udGVudCBmcm9tIHRoZSBuZXcgdHJlZS4gV2hlbiBgcGFydGlhbGAgaXNcbiAgICB0cnVlLCB0aGUgcGFyc2UgaXMgdHJlYXRlZCBhcyBpbmNvbXBsZXRlLCBhbmQgdGhlIHJlc3VsdGluZ1xuICAgIGZyYWdtZW50IGhhcyBbYG9wZW5FbmRgXSgjY29tbW9uLlRyZWVGcmFnbWVudC5vcGVuRW5kKSBzZXQgdG9cbiAgICB0cnVlLlxuICAgICovXG4gICAgc3RhdGljIGFkZFRyZWUodHJlZSwgZnJhZ21lbnRzID0gW10sIHBhcnRpYWwgPSBmYWxzZSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gW25ldyBUcmVlRnJhZ21lbnQoMCwgdHJlZS5sZW5ndGgsIHRyZWUsIDAsIGZhbHNlLCBwYXJ0aWFsKV07XG4gICAgICAgIGZvciAobGV0IGYgb2YgZnJhZ21lbnRzKVxuICAgICAgICAgICAgaWYgKGYudG8gPiB0cmVlLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChmKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgQXBwbHkgYSBzZXQgb2YgZWRpdHMgdG8gYW4gYXJyYXkgb2YgZnJhZ21lbnRzLCByZW1vdmluZyBvclxuICAgIHNwbGl0dGluZyBmcmFnbWVudHMgYXMgbmVjZXNzYXJ5IHRvIHJlbW92ZSBlZGl0ZWQgcmFuZ2VzLCBhbmRcbiAgICBhZGp1c3Rpbmcgb2Zmc2V0cyBmb3IgZnJhZ21lbnRzIHRoYXQgbW92ZWQuXG4gICAgKi9cbiAgICBzdGF0aWMgYXBwbHlDaGFuZ2VzKGZyYWdtZW50cywgY2hhbmdlcywgbWluR2FwID0gMTI4KSB7XG4gICAgICAgIGlmICghY2hhbmdlcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGxldCBmSSA9IDEsIG5leHRGID0gZnJhZ21lbnRzLmxlbmd0aCA/IGZyYWdtZW50c1swXSA6IG51bGw7XG4gICAgICAgIGZvciAobGV0IGNJID0gMCwgcG9zID0gMCwgb2ZmID0gMDs7IGNJKyspIHtcbiAgICAgICAgICAgIGxldCBuZXh0QyA9IGNJIDwgY2hhbmdlcy5sZW5ndGggPyBjaGFuZ2VzW2NJXSA6IG51bGw7XG4gICAgICAgICAgICBsZXQgbmV4dFBvcyA9IG5leHRDID8gbmV4dEMuZnJvbUEgOiAxZTk7XG4gICAgICAgICAgICBpZiAobmV4dFBvcyAtIHBvcyA+PSBtaW5HYXApXG4gICAgICAgICAgICAgICAgd2hpbGUgKG5leHRGICYmIG5leHRGLmZyb20gPCBuZXh0UG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXQgPSBuZXh0RjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA+PSBjdXQuZnJvbSB8fCBuZXh0UG9zIDw9IGN1dC50byB8fCBvZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmRnJvbSA9IE1hdGgubWF4KGN1dC5mcm9tLCBwb3MpIC0gb2ZmLCBmVG8gPSBNYXRoLm1pbihjdXQudG8sIG5leHRQb3MpIC0gb2ZmO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3V0ID0gZkZyb20gPj0gZlRvID8gbnVsbCA6IG5ldyBUcmVlRnJhZ21lbnQoZkZyb20sIGZUbywgY3V0LnRyZWUsIGN1dC5vZmZzZXQgKyBvZmYsIGNJID4gMCwgISFuZXh0Qyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1dClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGN1dCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0Ri50byA+IG5leHRQb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgbmV4dEYgPSBmSSA8IGZyYWdtZW50cy5sZW5ndGggPyBmcmFnbWVudHNbZkkrK10gOiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbmV4dEMpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwb3MgPSBuZXh0Qy50b0E7XG4gICAgICAgICAgICBvZmYgPSBuZXh0Qy50b0EgLSBuZXh0Qy50b0I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG4vKipcbkEgc3VwZXJjbGFzcyB0aGF0IHBhcnNlcnMgc2hvdWxkIGV4dGVuZC5cbiovXG5jbGFzcyBQYXJzZXIge1xuICAgIC8qKlxuICAgIFN0YXJ0IGEgcGFyc2UsIHJldHVybmluZyBhIFtwYXJ0aWFsIHBhcnNlXSgjY29tbW9uLlBhcnRpYWxQYXJzZSlcbiAgICBvYmplY3QuIFtgZnJhZ21lbnRzYF0oI2NvbW1vbi5UcmVlRnJhZ21lbnQpIGNhbiBiZSBwYXNzZWQgaW4gdG9cbiAgICBtYWtlIHRoZSBwYXJzZSBpbmNyZW1lbnRhbC5cbiAgICBcbiAgICBCeSBkZWZhdWx0LCB0aGUgZW50aXJlIGlucHV0IGlzIHBhcnNlZC4gWW91IGNhbiBwYXNzIGByYW5nZXNgLFxuICAgIHdoaWNoIHNob3VsZCBiZSBhIHNvcnRlZCBhcnJheSBvZiBub24tZW1wdHksIG5vbi1vdmVybGFwcGluZ1xuICAgIHJhbmdlcywgdG8gcGFyc2Ugb25seSB0aG9zZSByYW5nZXMuIFRoZSB0cmVlIHJldHVybmVkIGluIHRoYXRcbiAgICBjYXNlIHdpbGwgc3RhcnQgYXQgYHJhbmdlc1swXS5mcm9tYC5cbiAgICAqL1xuICAgIHN0YXJ0UGFyc2UoaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIGlucHV0ID0gbmV3IFN0cmluZ0lucHV0KGlucHV0KTtcbiAgICAgICAgcmFuZ2VzID0gIXJhbmdlcyA/IFtuZXcgUmFuZ2UoMCwgaW5wdXQubGVuZ3RoKV0gOiByYW5nZXMubGVuZ3RoID8gcmFuZ2VzLm1hcChyID0+IG5ldyBSYW5nZShyLmZyb20sIHIudG8pKSA6IFtuZXcgUmFuZ2UoMCwgMCldO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVQYXJzZShpbnB1dCwgZnJhZ21lbnRzIHx8IFtdLCByYW5nZXMpO1xuICAgIH1cbiAgICAvKipcbiAgICBSdW4gYSBmdWxsIHBhcnNlLCByZXR1cm5pbmcgdGhlIHJlc3VsdGluZyB0cmVlLlxuICAgICovXG4gICAgcGFyc2UoaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKSB7XG4gICAgICAgIGxldCBwYXJzZSA9IHRoaXMuc3RhcnRQYXJzZShpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgZG9uZSA9IHBhcnNlLmFkdmFuY2UoKTtcbiAgICAgICAgICAgIGlmIChkb25lKVxuICAgICAgICAgICAgICAgIHJldHVybiBkb25lO1xuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgU3RyaW5nSW5wdXQge1xuICAgIGNvbnN0cnVjdG9yKHN0cmluZykge1xuICAgICAgICB0aGlzLnN0cmluZyA9IHN0cmluZztcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHsgcmV0dXJuIHRoaXMuc3RyaW5nLmxlbmd0aDsgfVxuICAgIGNodW5rKGZyb20pIHsgcmV0dXJuIHRoaXMuc3RyaW5nLnNsaWNlKGZyb20pOyB9XG4gICAgZ2V0IGxpbmVDaHVua3MoKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIHJlYWQoZnJvbSwgdG8pIHsgcmV0dXJuIHRoaXMuc3RyaW5nLnNsaWNlKGZyb20sIHRvKTsgfVxufVxuXG4vKipcbkNyZWF0ZSBhIHBhcnNlIHdyYXBwZXIgdGhhdCwgYWZ0ZXIgdGhlIGlubmVyIHBhcnNlIGNvbXBsZXRlcyxcbnNjYW5zIGl0cyB0cmVlIGZvciBtaXhlZCBsYW5ndWFnZSByZWdpb25zIHdpdGggdGhlIGBuZXN0YFxuZnVuY3Rpb24sIHJ1bnMgdGhlIHJlc3VsdGluZyBbaW5uZXIgcGFyc2VzXSgjY29tbW9uLk5lc3RlZFBhcnNlKSxcbmFuZCB0aGVuIFttb3VudHNdKCNjb21tb24uTm9kZVByb3BebW91bnRlZCkgdGhlaXIgcmVzdWx0cyBvbnRvIHRoZVxudHJlZS5cbiovXG5mdW5jdGlvbiBwYXJzZU1peGVkKG5lc3QpIHtcbiAgICByZXR1cm4gKHBhcnNlLCBpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpID0+IG5ldyBNaXhlZFBhcnNlKHBhcnNlLCBuZXN0LCBpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpO1xufVxuY2xhc3MgSW5uZXJQYXJzZSB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyLCBwYXJzZSwgb3ZlcmxheSwgYnJhY2tldGVkLCB0YXJnZXQsIGZyb20pIHtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMucGFyc2UgPSBwYXJzZTtcbiAgICAgICAgdGhpcy5vdmVybGF5ID0gb3ZlcmxheTtcbiAgICAgICAgdGhpcy5icmFja2V0ZWQgPSBicmFja2V0ZWQ7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrUmFuZ2VzKHJhbmdlcykge1xuICAgIGlmICghcmFuZ2VzLmxlbmd0aCB8fCByYW5nZXMuc29tZShyID0+IHIuZnJvbSA+PSByLnRvKSlcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGlubmVyIHBhcnNlIHJhbmdlcyBnaXZlbjogXCIgKyBKU09OLnN0cmluZ2lmeShyYW5nZXMpKTtcbn1cbmNsYXNzIEFjdGl2ZU92ZXJsYXkge1xuICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgcHJlZGljYXRlLCBtb3VudHMsIGluZGV4LCBzdGFydCwgYnJhY2tldGVkLCB0YXJnZXQsIHByZXYpIHtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLm1vdW50cyA9IG1vdW50cztcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgICAgIHRoaXMuYnJhY2tldGVkID0gYnJhY2tldGVkO1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5wcmV2ID0gcHJldjtcbiAgICAgICAgdGhpcy5kZXB0aCA9IDA7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gW107XG4gICAgfVxufVxuY29uc3Qgc3RvcHBlZElubmVyID0gbmV3IE5vZGVQcm9wKHsgcGVyTm9kZTogdHJ1ZSB9KTtcbmNsYXNzIE1peGVkUGFyc2Uge1xuICAgIGNvbnN0cnVjdG9yKGJhc2UsIG5lc3QsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICB0aGlzLm5lc3QgPSBuZXN0O1xuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgdGhpcy5pbm5lciA9IFtdO1xuICAgICAgICB0aGlzLmlubmVyRG9uZSA9IDA7XG4gICAgICAgIHRoaXMuYmFzZVRyZWUgPSBudWxsO1xuICAgICAgICB0aGlzLnN0b3BwZWRBdCA9IG51bGw7XG4gICAgICAgIHRoaXMuYmFzZVBhcnNlID0gYmFzZTtcbiAgICB9XG4gICAgYWR2YW5jZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuYmFzZVBhcnNlKSB7XG4gICAgICAgICAgICBsZXQgZG9uZSA9IHRoaXMuYmFzZVBhcnNlLmFkdmFuY2UoKTtcbiAgICAgICAgICAgIGlmICghZG9uZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuYmFzZVBhcnNlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuYmFzZVRyZWUgPSBkb25lO1xuICAgICAgICAgICAgdGhpcy5zdGFydElubmVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdG9wcGVkQXQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbm5lciBvZiB0aGlzLmlubmVyKVxuICAgICAgICAgICAgICAgICAgICBpbm5lci5wYXJzZS5zdG9wQXQodGhpcy5zdG9wcGVkQXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlubmVyRG9uZSA9PSB0aGlzLmlubmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuYmFzZVRyZWU7XG4gICAgICAgICAgICBpZiAodGhpcy5zdG9wcGVkQXQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgVHJlZShyZXN1bHQudHlwZSwgcmVzdWx0LmNoaWxkcmVuLCByZXN1bHQucG9zaXRpb25zLCByZXN1bHQubGVuZ3RoLCByZXN1bHQucHJvcFZhbHVlcy5jb25jYXQoW1tzdG9wcGVkSW5uZXIsIHRoaXMuc3RvcHBlZEF0XV0pKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGlubmVyID0gdGhpcy5pbm5lclt0aGlzLmlubmVyRG9uZV0sIGRvbmUgPSBpbm5lci5wYXJzZS5hZHZhbmNlKCk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICB0aGlzLmlubmVyRG9uZSsrO1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHNvbWV3aGF0IGRvZGd5IGJ1dCBzdXBlciBoZWxwZnVsIGhhY2sgd2hlcmUgd2VcbiAgICAgICAgICAgIC8vIHBhdGNoIHVwIG5vZGVzIGNyZWF0ZWQgYnkgdGhlIGlubmVyIHBhcnNlIChhbmQgdGh1c1xuICAgICAgICAgICAgLy8gcHJlc3VtYWJseSBub3QgYWxpYXNlZCBhbnl3aGVyZSBlbHNlKSB0byBob2xkIHRoZSBpbmZvcm1hdGlvblxuICAgICAgICAgICAgLy8gYWJvdXQgdGhlIGlubmVyIHBhcnNlLlxuICAgICAgICAgICAgbGV0IHByb3BzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBpbm5lci50YXJnZXQucHJvcHMpO1xuICAgICAgICAgICAgcHJvcHNbTm9kZVByb3AubW91bnRlZC5pZF0gPSBuZXcgTW91bnRlZFRyZWUoZG9uZSwgaW5uZXIub3ZlcmxheSwgaW5uZXIucGFyc2VyLCBpbm5lci5icmFja2V0ZWQpO1xuICAgICAgICAgICAgaW5uZXIudGFyZ2V0LnByb3BzID0gcHJvcHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGdldCBwYXJzZWRQb3MoKSB7XG4gICAgICAgIGlmICh0aGlzLmJhc2VQYXJzZSlcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICBsZXQgcG9zID0gdGhpcy5pbnB1dC5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmlubmVyRG9uZTsgaSA8IHRoaXMuaW5uZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlubmVyW2ldLmZyb20gPCBwb3MpXG4gICAgICAgICAgICAgICAgcG9zID0gTWF0aC5taW4ocG9zLCB0aGlzLmlubmVyW2ldLnBhcnNlLnBhcnNlZFBvcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG4gICAgc3RvcEF0KHBvcykge1xuICAgICAgICB0aGlzLnN0b3BwZWRBdCA9IHBvcztcbiAgICAgICAgaWYgKHRoaXMuYmFzZVBhcnNlKVxuICAgICAgICAgICAgdGhpcy5iYXNlUGFyc2Uuc3RvcEF0KHBvcyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmlubmVyRG9uZTsgaSA8IHRoaXMuaW5uZXIubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lcltpXS5wYXJzZS5zdG9wQXQocG9zKTtcbiAgICB9XG4gICAgc3RhcnRJbm5lcigpIHtcbiAgICAgICAgbGV0IGZyYWdtZW50Q3Vyc29yID0gbmV3IEZyYWdtZW50Q3Vyc29yKHRoaXMuZnJhZ21lbnRzKTtcbiAgICAgICAgbGV0IG92ZXJsYXkgPSBudWxsO1xuICAgICAgICBsZXQgY292ZXJlZCA9IG51bGw7XG4gICAgICAgIGxldCBjdXJzb3IgPSBuZXcgVHJlZUN1cnNvcihuZXcgVHJlZU5vZGUodGhpcy5iYXNlVHJlZSwgdGhpcy5yYW5nZXNbMF0uZnJvbSwgMCwgbnVsbCksIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMgfCBJdGVyTW9kZS5JZ25vcmVNb3VudHMpO1xuICAgICAgICBzY2FuOiBmb3IgKGxldCBuZXN0LCBpc0NvdmVyZWQ7Oykge1xuICAgICAgICAgICAgbGV0IGVudGVyID0gdHJ1ZSwgcmFuZ2U7XG4gICAgICAgICAgICBpZiAodGhpcy5zdG9wcGVkQXQgIT0gbnVsbCAmJiBjdXJzb3IuZnJvbSA+PSB0aGlzLnN0b3BwZWRBdCkge1xuICAgICAgICAgICAgICAgIGVudGVyID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChmcmFnbWVudEN1cnNvci5oYXNOb2RlKGN1cnNvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSBvdmVybGF5Lm1vdW50cy5maW5kKG0gPT4gbS5mcmFnLmZyb20gPD0gY3Vyc29yLmZyb20gJiYgbS5mcmFnLnRvID49IGN1cnNvci50byAmJiBtLm1vdW50Lm92ZXJsYXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCByIG9mIG1hdGNoLm1vdW50Lm92ZXJsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IHIuZnJvbSArIG1hdGNoLnBvcywgdG8gPSByLnRvICsgbWF0Y2gucG9zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcm9tID49IGN1cnNvci5mcm9tICYmIHRvIDw9IGN1cnNvci50byAmJiAhb3ZlcmxheS5yYW5nZXMuc29tZShyID0+IHIuZnJvbSA8IHRvICYmIHIudG8gPiBmcm9tKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheS5yYW5nZXMucHVzaCh7IGZyb20sIHRvIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbnRlciA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY292ZXJlZCAmJiAoaXNDb3ZlcmVkID0gY2hlY2tDb3Zlcihjb3ZlcmVkLnJhbmdlcywgY3Vyc29yLmZyb20sIGN1cnNvci50bykpKSB7XG4gICAgICAgICAgICAgICAgZW50ZXIgPSBpc0NvdmVyZWQgIT0gMiAvKiBDb3Zlci5GdWxsICovO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWN1cnNvci50eXBlLmlzQW5vbnltb3VzICYmIChuZXN0ID0gdGhpcy5uZXN0KGN1cnNvciwgdGhpcy5pbnB1dCkpICYmXG4gICAgICAgICAgICAgICAgKGN1cnNvci5mcm9tIDwgY3Vyc29yLnRvIHx8ICFuZXN0Lm92ZXJsYXkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXJzb3IudHJlZSkge1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbGl6ZShjdXJzb3IpO1xuICAgICAgICAgICAgICAgICAgICAvLyBtYXRlcmlhbGl6ZSBjcmVhdGUgb25lIG1vcmUgbGV2ZWwgb2YgbmVzdGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGFkZCBkZXB0aCB0byBhY3RpdmUgb3ZlcmxheSBmb3IgZ29pbmcgYmFja3dhcmRzXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KVxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheS5kZXB0aCsrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY292ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyZWQuZGVwdGgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG9sZE1vdW50cyA9IGZyYWdtZW50Q3Vyc29yLmZpbmRNb3VudHMoY3Vyc29yLmZyb20sIG5lc3QucGFyc2VyKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5lc3Qub3ZlcmxheSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheSA9IG5ldyBBY3RpdmVPdmVybGF5KG5lc3QucGFyc2VyLCBuZXN0Lm92ZXJsYXksIG9sZE1vdW50cywgdGhpcy5pbm5lci5sZW5ndGgsIGN1cnNvci5mcm9tLCAhIW5lc3QuYnJhY2tldGVkLCBjdXJzb3IudHJlZSwgb3ZlcmxheSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmFuZ2VzID0gcHVuY2hSYW5nZXModGhpcy5yYW5nZXMsIG5lc3Qub3ZlcmxheSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKGN1cnNvci5mcm9tIDwgY3Vyc29yLnRvID8gW25ldyBSYW5nZShjdXJzb3IuZnJvbSwgY3Vyc29yLnRvKV0gOiBbXSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrUmFuZ2VzKHJhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZXMubGVuZ3RoIHx8ICFuZXN0Lm92ZXJsYXkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlubmVyLnB1c2gobmV3IElubmVyUGFyc2UobmVzdC5wYXJzZXIsIHJhbmdlcy5sZW5ndGggPyBuZXN0LnBhcnNlci5zdGFydFBhcnNlKHRoaXMuaW5wdXQsIGVudGVyRnJhZ21lbnRzKG9sZE1vdW50cywgcmFuZ2VzKSwgcmFuZ2VzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbmVzdC5wYXJzZXIuc3RhcnRQYXJzZShcIlwiKSwgbmVzdC5vdmVybGF5ID8gbmVzdC5vdmVybGF5Lm1hcChyID0+IG5ldyBSYW5nZShyLmZyb20gLSBjdXJzb3IuZnJvbSwgci50byAtIGN1cnNvci5mcm9tKSkgOiBudWxsLCAhIW5lc3QuYnJhY2tldGVkLCBjdXJzb3IudHJlZSwgcmFuZ2VzLmxlbmd0aCA/IHJhbmdlc1swXS5mcm9tIDogY3Vyc29yLmZyb20pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXN0Lm92ZXJsYXkpXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyYW5nZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgY292ZXJlZCA9IHsgcmFuZ2VzLCBkZXB0aDogMCwgcHJldjogY292ZXJlZCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG92ZXJsYXkgJiYgKHJhbmdlID0gb3ZlcmxheS5wcmVkaWNhdGUoY3Vyc29yKSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2UgPT09IHRydWUpXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gbmV3IFJhbmdlKGN1cnNvci5mcm9tLCBjdXJzb3IudG8pO1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZS5mcm9tIDwgcmFuZ2UudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3QgPSBvdmVybGF5LnJhbmdlcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGFzdCA+PSAwICYmIG92ZXJsYXkucmFuZ2VzW2xhc3RdLnRvID09IHJhbmdlLmZyb20pXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5LnJhbmdlc1tsYXN0XSA9IHsgZnJvbTogb3ZlcmxheS5yYW5nZXNbbGFzdF0uZnJvbSwgdG86IHJhbmdlLnRvIH07XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkucmFuZ2VzLnB1c2gocmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbnRlciAmJiBjdXJzb3IuZmlyc3RDaGlsZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXkuZGVwdGgrKztcbiAgICAgICAgICAgICAgICBpZiAoY292ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZC5kZXB0aCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3Vyc29yLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJzb3IucGFyZW50KCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBzY2FuO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSAmJiAhLS1vdmVybGF5LmRlcHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmFuZ2VzID0gcHVuY2hSYW5nZXModGhpcy5yYW5nZXMsIG92ZXJsYXkucmFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tSYW5nZXMocmFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlubmVyLnNwbGljZShvdmVybGF5LmluZGV4LCAwLCBuZXcgSW5uZXJQYXJzZShvdmVybGF5LnBhcnNlciwgb3ZlcmxheS5wYXJzZXIuc3RhcnRQYXJzZSh0aGlzLmlucHV0LCBlbnRlckZyYWdtZW50cyhvdmVybGF5Lm1vdW50cywgcmFuZ2VzKSwgcmFuZ2VzKSwgb3ZlcmxheS5yYW5nZXMubWFwKHIgPT4gbmV3IFJhbmdlKHIuZnJvbSAtIG92ZXJsYXkuc3RhcnQsIHIudG8gLSBvdmVybGF5LnN0YXJ0KSksIG92ZXJsYXkuYnJhY2tldGVkLCBvdmVybGF5LnRhcmdldCwgcmFuZ2VzWzBdLmZyb20pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkgPSBvdmVybGF5LnByZXY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdmVyZWQgJiYgIS0tY292ZXJlZC5kZXB0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyZWQgPSBjb3ZlcmVkLnByZXY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tDb3Zlcihjb3ZlcmVkLCBmcm9tLCB0bykge1xuICAgIGZvciAobGV0IHJhbmdlIG9mIGNvdmVyZWQpIHtcbiAgICAgICAgaWYgKHJhbmdlLmZyb20gPj0gdG8pXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgaWYgKHJhbmdlLnRvID4gZnJvbSlcbiAgICAgICAgICAgIHJldHVybiByYW5nZS5mcm9tIDw9IGZyb20gJiYgcmFuZ2UudG8gPj0gdG8gPyAyIC8qIENvdmVyLkZ1bGwgKi8gOiAxIC8qIENvdmVyLlBhcnRpYWwgKi87XG4gICAgfVxuICAgIHJldHVybiAwIC8qIENvdmVyLk5vbmUgKi87XG59XG4vLyBUYWtlIGEgcGllY2Ugb2YgYnVmZmVyIGFuZCBjb252ZXJ0IGl0IGludG8gYSBzdGFuZC1hbG9uZVxuLy8gVHJlZUJ1ZmZlci5cbmZ1bmN0aW9uIHNsaWNlQnVmKGJ1Ziwgc3RhcnRJLCBlbmRJLCBub2RlcywgcG9zaXRpb25zLCBvZmYpIHtcbiAgICBpZiAoc3RhcnRJIDwgZW5kSSkge1xuICAgICAgICBsZXQgZnJvbSA9IGJ1Zi5idWZmZXJbc3RhcnRJICsgMV07XG4gICAgICAgIG5vZGVzLnB1c2goYnVmLnNsaWNlKHN0YXJ0SSwgZW5kSSwgZnJvbSkpO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChmcm9tIC0gb2ZmKTtcbiAgICB9XG59XG4vLyBUaGlzIGZ1bmN0aW9uIHRha2VzIGEgbm9kZSB0aGF0J3MgaW4gYSBidWZmZXIsIGFuZCBjb252ZXJ0cyBpdCwgYW5kXG4vLyBpdHMgcGFyZW50IGJ1ZmZlciBub2RlcywgaW50byBhIFRyZWUuIFRoaXMgaXMgYWdhaW4gYWN0aW5nIG9uIHRoZVxuLy8gYXNzdW1wdGlvbiB0aGF0IHRoZSB0cmVlcyBhbmQgYnVmZmVycyBoYXZlIGJlZW4gY29uc3RydWN0ZWQgYnkgdGhlXG4vLyBwYXJzZSB0aGF0IHdhcyByYW4gdmlhIHRoZSBtaXggcGFyc2VyLCBhbmQgdGh1cyBhcmVuJ3Qgc2hhcmVkIHdpdGhcbi8vIGFueSBvdGhlciBjb2RlLCBtYWtpbmcgdmlvbGF0aW9ucyBvZiB0aGUgaW1tdXRhYmlsaXR5IHNhZmUuXG5mdW5jdGlvbiBtYXRlcmlhbGl6ZShjdXJzb3IpIHtcbiAgICBsZXQgeyBub2RlIH0gPSBjdXJzb3IsIHN0YWNrID0gW107XG4gICAgbGV0IGJ1ZmZlciA9IG5vZGUuY29udGV4dC5idWZmZXI7XG4gICAgLy8gU2NhbiB1cCB0byB0aGUgbmVhcmVzdCB0cmVlXG4gICAgZG8ge1xuICAgICAgICBzdGFjay5wdXNoKGN1cnNvci5pbmRleCk7XG4gICAgICAgIGN1cnNvci5wYXJlbnQoKTtcbiAgICB9IHdoaWxlICghY3Vyc29yLnRyZWUpO1xuICAgIC8vIEZpbmQgdGhlIGluZGV4IG9mIHRoZSBidWZmZXIgaW4gdGhhdCB0cmVlXG4gICAgbGV0IGJhc2UgPSBjdXJzb3IudHJlZSwgaSA9IGJhc2UuY2hpbGRyZW4uaW5kZXhPZihidWZmZXIpO1xuICAgIGxldCBidWYgPSBiYXNlLmNoaWxkcmVuW2ldLCBiID0gYnVmLmJ1ZmZlciwgbmV3U3RhY2sgPSBbaV07XG4gICAgLy8gU3BsaXQgYSBsZXZlbCBpbiB0aGUgYnVmZmVyLCBwdXR0aW5nIHRoZSBub2RlcyBiZWZvcmUgYW5kIGFmdGVyXG4gICAgLy8gdGhlIGNoaWxkIHRoYXQgY29udGFpbnMgYG5vZGVgIGludG8gbmV3IGJ1ZmZlcnMuXG4gICAgZnVuY3Rpb24gc3BsaXQoc3RhcnRJLCBlbmRJLCB0eXBlLCBpbm5lck9mZnNldCwgbGVuZ3RoLCBzdGFja1Bvcykge1xuICAgICAgICBsZXQgdGFyZ2V0SSA9IHN0YWNrW3N0YWNrUG9zXTtcbiAgICAgICAgbGV0IGNoaWxkcmVuID0gW10sIHBvc2l0aW9ucyA9IFtdO1xuICAgICAgICBzbGljZUJ1ZihidWYsIHN0YXJ0SSwgdGFyZ2V0SSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgaW5uZXJPZmZzZXQpO1xuICAgICAgICBsZXQgZnJvbSA9IGJbdGFyZ2V0SSArIDFdLCB0byA9IGJbdGFyZ2V0SSArIDJdO1xuICAgICAgICBuZXdTdGFjay5wdXNoKGNoaWxkcmVuLmxlbmd0aCk7XG4gICAgICAgIGxldCBjaGlsZCA9IHN0YWNrUG9zXG4gICAgICAgICAgICA/IHNwbGl0KHRhcmdldEkgKyA0LCBiW3RhcmdldEkgKyAzXSwgYnVmLnNldC50eXBlc1tiW3RhcmdldEldXSwgZnJvbSwgdG8gLSBmcm9tLCBzdGFja1BvcyAtIDEpXG4gICAgICAgICAgICA6IG5vZGUudG9UcmVlKCk7XG4gICAgICAgIGNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChmcm9tIC0gaW5uZXJPZmZzZXQpO1xuICAgICAgICBzbGljZUJ1ZihidWYsIGJbdGFyZ2V0SSArIDNdLCBlbmRJLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBpbm5lck9mZnNldCk7XG4gICAgICAgIHJldHVybiBuZXcgVHJlZSh0eXBlLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpO1xuICAgIH1cbiAgICBiYXNlLmNoaWxkcmVuW2ldID0gc3BsaXQoMCwgYi5sZW5ndGgsIE5vZGVUeXBlLm5vbmUsIDAsIGJ1Zi5sZW5ndGgsIHN0YWNrLmxlbmd0aCAtIDEpO1xuICAgIC8vIE1vdmUgdGhlIGN1cnNvciBiYWNrIHRvIHRoZSB0YXJnZXQgbm9kZVxuICAgIGZvciAobGV0IGluZGV4IG9mIG5ld1N0YWNrKSB7XG4gICAgICAgIGxldCB0cmVlID0gY3Vyc29yLnRyZWUuY2hpbGRyZW5baW5kZXhdLCBwb3MgPSBjdXJzb3IudHJlZS5wb3NpdGlvbnNbaW5kZXhdO1xuICAgICAgICBjdXJzb3IueWllbGQobmV3IFRyZWVOb2RlKHRyZWUsIHBvcyArIGN1cnNvci5mcm9tLCBpbmRleCwgY3Vyc29yLl90cmVlKSk7XG4gICAgfVxufVxuY2xhc3MgU3RydWN0dXJlQ3Vyc29yIHtcbiAgICBjb25zdHJ1Y3Rvcihyb290LCBvZmZzZXQpIHtcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN1cnNvciA9IHJvb3QuY3Vyc29yKEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMgfCBJdGVyTW9kZS5JZ25vcmVNb3VudHMpO1xuICAgIH1cbiAgICAvLyBNb3ZlIHRvIHRoZSBmaXJzdCBub2RlIChpbiBwcmUtb3JkZXIpIHRoYXQgc3RhcnRzIGF0IG9yIGFmdGVyIGBwb3NgLlxuICAgIG1vdmVUbyhwb3MpIHtcbiAgICAgICAgbGV0IHsgY3Vyc29yIH0gPSB0aGlzLCBwID0gcG9zIC0gdGhpcy5vZmZzZXQ7XG4gICAgICAgIHdoaWxlICghdGhpcy5kb25lICYmIGN1cnNvci5mcm9tIDwgcCkge1xuICAgICAgICAgICAgaWYgKGN1cnNvci50byA+PSBwb3MgJiYgY3Vyc29yLmVudGVyKHAsIDEsIEl0ZXJNb2RlLklnbm9yZU92ZXJsYXlzIHwgSXRlck1vZGUuRXhjbHVkZUJ1ZmZlcnMpKSA7XG4gICAgICAgICAgICBlbHNlIGlmICghY3Vyc29yLm5leHQoZmFsc2UpKVxuICAgICAgICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFzTm9kZShjdXJzb3IpIHtcbiAgICAgICAgdGhpcy5tb3ZlVG8oY3Vyc29yLmZyb20pO1xuICAgICAgICBpZiAoIXRoaXMuZG9uZSAmJiB0aGlzLmN1cnNvci5mcm9tICsgdGhpcy5vZmZzZXQgPT0gY3Vyc29yLmZyb20gJiYgdGhpcy5jdXJzb3IudHJlZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgdHJlZSA9IHRoaXMuY3Vyc29yLnRyZWU7Oykge1xuICAgICAgICAgICAgICAgIGlmICh0cmVlID09IGN1cnNvci50cmVlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAodHJlZS5jaGlsZHJlbi5sZW5ndGggJiYgdHJlZS5wb3NpdGlvbnNbMF0gPT0gMCAmJiB0cmVlLmNoaWxkcmVuWzBdIGluc3RhbmNlb2YgVHJlZSlcbiAgICAgICAgICAgICAgICAgICAgdHJlZSA9IHRyZWUuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuY2xhc3MgRnJhZ21lbnRDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKGZyYWdtZW50cykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgICAgICB0aGlzLmN1clRvID0gMDtcbiAgICAgICAgdGhpcy5mcmFnSSA9IDA7XG4gICAgICAgIGlmIChmcmFnbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgZmlyc3QgPSB0aGlzLmN1ckZyYWcgPSBmcmFnbWVudHNbMF07XG4gICAgICAgICAgICB0aGlzLmN1clRvID0gKF9hID0gZmlyc3QudHJlZS5wcm9wKHN0b3BwZWRJbm5lcikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZpcnN0LnRvO1xuICAgICAgICAgICAgdGhpcy5pbm5lciA9IG5ldyBTdHJ1Y3R1cmVDdXJzb3IoZmlyc3QudHJlZSwgLWZpcnN0Lm9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmN1ckZyYWcgPSB0aGlzLmlubmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNOb2RlKG5vZGUpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuY3VyRnJhZyAmJiBub2RlLmZyb20gPj0gdGhpcy5jdXJUbylcbiAgICAgICAgICAgIHRoaXMubmV4dEZyYWcoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VyRnJhZyAmJiB0aGlzLmN1ckZyYWcuZnJvbSA8PSBub2RlLmZyb20gJiYgdGhpcy5jdXJUbyA+PSBub2RlLnRvICYmIHRoaXMuaW5uZXIuaGFzTm9kZShub2RlKTtcbiAgICB9XG4gICAgbmV4dEZyYWcoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5mcmFnSSsrO1xuICAgICAgICBpZiAodGhpcy5mcmFnSSA9PSB0aGlzLmZyYWdtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY3VyRnJhZyA9IHRoaXMuaW5uZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGZyYWcgPSB0aGlzLmN1ckZyYWcgPSB0aGlzLmZyYWdtZW50c1t0aGlzLmZyYWdJXTtcbiAgICAgICAgICAgIHRoaXMuY3VyVG8gPSAoX2EgPSBmcmFnLnRyZWUucHJvcChzdG9wcGVkSW5uZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmcmFnLnRvO1xuICAgICAgICAgICAgdGhpcy5pbm5lciA9IG5ldyBTdHJ1Y3R1cmVDdXJzb3IoZnJhZy50cmVlLCAtZnJhZy5vZmZzZXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmRNb3VudHMocG9zLCBwYXJzZXIpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGlmICh0aGlzLmlubmVyKSB7XG4gICAgICAgICAgICB0aGlzLmlubmVyLmN1cnNvci5tb3ZlVG8ocG9zLCAxKTtcbiAgICAgICAgICAgIGZvciAobGV0IHBvcyA9IHRoaXMuaW5uZXIuY3Vyc29yLm5vZGU7IHBvczsgcG9zID0gcG9zLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIGxldCBtb3VudCA9IChfYSA9IHBvcy50cmVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJvcChOb2RlUHJvcC5tb3VudGVkKTtcbiAgICAgICAgICAgICAgICBpZiAobW91bnQgJiYgbW91bnQucGFyc2VyID09IHBhcnNlcikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5mcmFnSTsgaSA8IHRoaXMuZnJhZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnJhZyA9IHRoaXMuZnJhZ21lbnRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyYWcuZnJvbSA+PSBwb3MudG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJhZy50cmVlID09IHRoaXMuY3VyRnJhZy50cmVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiBwb3MuZnJvbSAtIGZyYWcub2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gcHVuY2hSYW5nZXMob3V0ZXIsIHJhbmdlcykge1xuICAgIGxldCBjb3B5ID0gbnVsbCwgY3VycmVudCA9IHJhbmdlcztcbiAgICBmb3IgKGxldCBpID0gMSwgaiA9IDA7IGkgPCBvdXRlci5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgZ2FwRnJvbSA9IG91dGVyW2kgLSAxXS50bywgZ2FwVG8gPSBvdXRlcltpXS5mcm9tO1xuICAgICAgICBmb3IgKDsgaiA8IGN1cnJlbnQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGxldCByID0gY3VycmVudFtqXTtcbiAgICAgICAgICAgIGlmIChyLmZyb20gPj0gZ2FwVG8pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAoci50byA8PSBnYXBGcm9tKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKCFjb3B5KVxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjb3B5ID0gcmFuZ2VzLnNsaWNlKCk7XG4gICAgICAgICAgICBpZiAoci5mcm9tIDwgZ2FwRnJvbSkge1xuICAgICAgICAgICAgICAgIGNvcHlbal0gPSBuZXcgUmFuZ2Uoci5mcm9tLCBnYXBGcm9tKTtcbiAgICAgICAgICAgICAgICBpZiAoci50byA+IGdhcFRvKVxuICAgICAgICAgICAgICAgICAgICBjb3B5LnNwbGljZShqICsgMSwgMCwgbmV3IFJhbmdlKGdhcFRvLCByLnRvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyLnRvID4gZ2FwVG8pIHtcbiAgICAgICAgICAgICAgICBjb3B5W2otLV0gPSBuZXcgUmFuZ2UoZ2FwVG8sIHIudG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29weS5zcGxpY2Uoai0tLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3VycmVudDtcbn1cbmZ1bmN0aW9uIGZpbmRDb3ZlckNoYW5nZXMoYSwgYiwgZnJvbSwgdG8pIHtcbiAgICBsZXQgaUEgPSAwLCBpQiA9IDAsIGluQSA9IGZhbHNlLCBpbkIgPSBmYWxzZSwgcG9zID0gLTFlOTtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yICg7Oykge1xuICAgICAgICBsZXQgbmV4dEEgPSBpQSA9PSBhLmxlbmd0aCA/IDFlOSA6IGluQSA/IGFbaUFdLnRvIDogYVtpQV0uZnJvbTtcbiAgICAgICAgbGV0IG5leHRCID0gaUIgPT0gYi5sZW5ndGggPyAxZTkgOiBpbkIgPyBiW2lCXS50byA6IGJbaUJdLmZyb207XG4gICAgICAgIGlmIChpbkEgIT0gaW5CKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBNYXRoLm1heChwb3MsIGZyb20pLCBlbmQgPSBNYXRoLm1pbihuZXh0QSwgbmV4dEIsIHRvKTtcbiAgICAgICAgICAgIGlmIChzdGFydCA8IGVuZClcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgUmFuZ2Uoc3RhcnQsIGVuZCkpO1xuICAgICAgICB9XG4gICAgICAgIHBvcyA9IE1hdGgubWluKG5leHRBLCBuZXh0Qik7XG4gICAgICAgIGlmIChwb3MgPT0gMWU5KVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmIChuZXh0QSA9PSBwb3MpIHtcbiAgICAgICAgICAgIGlmICghaW5BKVxuICAgICAgICAgICAgICAgIGluQSA9IHRydWU7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbkEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpQSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChuZXh0QiA9PSBwb3MpIHtcbiAgICAgICAgICAgIGlmICghaW5CKVxuICAgICAgICAgICAgICAgIGluQiA9IHRydWU7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbkIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpQisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyBHaXZlbiBhIG51bWJlciBvZiBmcmFnbWVudHMgZm9yIHRoZSBvdXRlciB0cmVlLCBhbmQgYSBzZXQgb2YgcmFuZ2VzXG4vLyB0byBwYXJzZSwgZmluZCBmcmFnbWVudHMgZm9yIGlubmVyIHRyZWVzIG1vdW50ZWQgYXJvdW5kIHRob3NlXG4vLyByYW5nZXMsIGlmIGFueS5cbmZ1bmN0aW9uIGVudGVyRnJhZ21lbnRzKG1vdW50cywgcmFuZ2VzKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IHsgcG9zLCBtb3VudCwgZnJhZyB9IG9mIG1vdW50cykge1xuICAgICAgICBsZXQgc3RhcnRQb3MgPSBwb3MgKyAobW91bnQub3ZlcmxheSA/IG1vdW50Lm92ZXJsYXlbMF0uZnJvbSA6IDApLCBlbmRQb3MgPSBzdGFydFBvcyArIG1vdW50LnRyZWUubGVuZ3RoO1xuICAgICAgICBsZXQgZnJvbSA9IE1hdGgubWF4KGZyYWcuZnJvbSwgc3RhcnRQb3MpLCB0byA9IE1hdGgubWluKGZyYWcudG8sIGVuZFBvcyk7XG4gICAgICAgIGlmIChtb3VudC5vdmVybGF5KSB7XG4gICAgICAgICAgICBsZXQgb3ZlcmxheSA9IG1vdW50Lm92ZXJsYXkubWFwKHIgPT4gbmV3IFJhbmdlKHIuZnJvbSArIHBvcywgci50byArIHBvcykpO1xuICAgICAgICAgICAgbGV0IGNoYW5nZXMgPSBmaW5kQ292ZXJDaGFuZ2VzKHJhbmdlcywgb3ZlcmxheSwgZnJvbSwgdG8pO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IGZyb207OyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgbGFzdCA9IGkgPT0gY2hhbmdlcy5sZW5ndGgsIGVuZCA9IGxhc3QgPyB0byA6IGNoYW5nZXNbaV0uZnJvbTtcbiAgICAgICAgICAgICAgICBpZiAoZW5kID4gcG9zKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgVHJlZUZyYWdtZW50KHBvcywgZW5kLCBtb3VudC50cmVlLCAtc3RhcnRQb3MsIGZyYWcuZnJvbSA+PSBwb3MgfHwgZnJhZy5vcGVuU3RhcnQsIGZyYWcudG8gPD0gZW5kIHx8IGZyYWcub3BlbkVuZCkpO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBwb3MgPSBjaGFuZ2VzW2ldLnRvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IFRyZWVGcmFnbWVudChmcm9tLCB0bywgbW91bnQudHJlZSwgLXN0YXJ0UG9zLCBmcmFnLmZyb20gPj0gc3RhcnRQb3MgfHwgZnJhZy5vcGVuU3RhcnQsIGZyYWcudG8gPD0gZW5kUG9zIHx8IGZyYWcub3BlbkVuZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCB7IERlZmF1bHRCdWZmZXJMZW5ndGgsIEl0ZXJNb2RlLCBNb3VudGVkVHJlZSwgTm9kZVByb3AsIE5vZGVTZXQsIE5vZGVUeXBlLCBOb2RlV2Vha01hcCwgUGFyc2VyLCBUcmVlLCBUcmVlQnVmZmVyLCBUcmVlQ3Vyc29yLCBUcmVlRnJhZ21lbnQsIHBhcnNlTWl4ZWQgfTtcbiIsICIvLyBUaGVzZSBhcmUgZmlsbGVkIHdpdGggcmFuZ2VzIChyYW5nZUZyb21baV0gdXAgdG8gYnV0IG5vdCBpbmNsdWRpbmdcbi8vIHJhbmdlVG9baV0pIG9mIGNvZGUgcG9pbnRzIHRoYXQgY291bnQgYXMgZXh0ZW5kaW5nIGNoYXJhY3RlcnMuXG5sZXQgcmFuZ2VGcm9tID0gW10sIHJhbmdlVG8gPSBbXVxuXG47KCgpID0+IHtcbiAgLy8gQ29tcHJlc3NlZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgR3JhcGhlbWVfQ2x1c3Rlcl9CcmVhaz1FeHRlbmRcbiAgLy8gaW5mb3JtYXRpb24gZnJvbVxuICAvLyBodHRwOi8vd3d3LnVuaWNvZGUub3JnL1B1YmxpYy8xNi4wLjAvdWNkL2F1eGlsaWFyeS9HcmFwaGVtZUJyZWFrUHJvcGVydHkudHh0LlxuICAvLyBFYWNoIHBhaXIgb2YgZWxlbWVudHMgcmVwcmVzZW50cyBhIHJhbmdlLCBhcyBhbiBvZmZldCBmcm9tIHRoZVxuICAvLyBwcmV2aW91cyByYW5nZSBhbmQgYSBsZW5ndGguIE51bWJlcnMgYXJlIGluIGJhc2UtMzYsIHdpdGggdGhlIGVtcHR5XG4gIC8vIHN0cmluZyBiZWluZyBhIHNob3J0aGFuZCBmb3IgMS5cbiAgbGV0IG51bWJlcnMgPSBcImxjLDM0LDduLDcsN2IsMTksLCwsMiwsMiwsLDIwLGIsMWMsbCxnLCwydCw3LDIsNiwyLDIsLDQseiwsdSxyLDJqLGIsMW0sOSw5LCxvLDQsLDksLDMsLDUsMTcsMywzYixmLCx3LDFqLCwsLDQsOCw0LCwzLDcsYSwyLHQsLDFtLCwsLDIsNCw4LCw5LCxhLDIscSwsMiwyLDFsLCw0LDIsNCwyLDIsMywzLCx1LDIsMywsYiwyLDFsLCw0LDUsLDIsNCwsaywyLG0sNiwsLDFtLCwsMiwsNCw4LCw3LDMsYSwyLHUsLDFuLCwsLGMsLDksLDE0LCwzLCwxbCwzLDUsMywsNCw3LDIsYiwyLHQsLDFtLCwyLCwyLCwzLCw1LDIsNywyLGIsMixzLDIsMWwsMiwsLDIsNCw4LCw5LCxhLDIsdCwsMjAsLDQsLDIsMywsLDgsLDI5LCwyLDcsYyw4LDJxLCwyLDksYiw2LDIyLDIsciwsLCwsLDFqLGUsLDUsLDIsNSxiLCwxMCw5LCwydSw0LCw2LCwyLDIsMixwLDIsNCwzLGcsNCxkLCwyLDIsNiwsZiwsamosMyxxYSwzLHQsMyx0LDIsdSwyLDFzLDIsLDcsOCwsMixiLDksLDE5LDMsM2IsMix5LCwzYSwzLDQsMiw5LCw2LDMsNjMsMiwyLCwxbSwsLDcsLCwsLDIsOCw2LGEsMiwsMWMsaCwxciw0LDFjLDcsLCw1LCwxNCw5LGMsMix3LDQsMiwyLCwzLDFrLCwsMiwzLCwsMywxbSw4LDIsMiw0OCwzLCxkLCw3LDQsLDYsLDMsMiw1aSwxbSwsNSxlaywsNWYseCwyZGEsMywzeCwsMm8sdyxmZSw2LDJ4LDIsbjl3LDQsLGEsdywyLDI4LDIsN2ssLDMsLDQsLHAsMiw1LCw0NywyLHEsaSxkLCwxMiw4LHAsYiwxYSwzLDFjLCwyLDQsMiwyLDEzLCwxdiw2LDIsMiwyLDIsYywsOCwsMWIsLDFmLCwsMywyLDIsNSwyLCwsMTYsMiw4LCw2bSwsMiwsNCwsZm40LCxraCxnLGcsZyxhNiwyLGd0LCw2YSwsNDUsNSwxYWUsMywsMiw1LDQsMTQsMyw0LCw0bCwyLGZ4LDQsYXIsMiw0OSxiLDR3LCwxaSxmLDFrLDMsMWQsNCwyLDIsMXgsMywxMCw1LCw4LDFxLCxjLDIsMWcsOSxhLDQsMiwsMm4sMywyLCwsMiw2LCw0ZywsMyw4LGwsMiwxbCwyLCwsLCxtLCxlLDcsMyw1LDVmLDgsMiwzLCwsbiwsMjksLDIsNiwsLDIsLCwyLCwyLDZqLCwyLDQsNiwyLCwyLHIsMiwyZCw4LDIsLCwyLDJ5LCwsLDIsNiwsLDJ0LDMsMiw0LCw1LDc3LDksLDIsNnQsLGEsMiwsLDQsLDQwLDQsMiwyLDQsLHcsYSwxNCw2LDIsNCw4LCw5LDYsMiwzLDFhLGQsLDIsYmEsNywsNiwsLDJhLG0sMiw3LCwyLCwyLDNlLDYsMywsLDIsLDcsLCwyMCwyLDMsLCwsOW4sMixmMGIsNSwxbiw3LHQ0LCwxciw0LDI5LCxmNWssMiw0M3EsLCwzLDQsNSw4LDgsMiw3LHUsNCw0NCwzLDFpeiwxaiw0LDFlLDgsLGUsLG0sNSwsZiwxMXMsNywsaCwyLDcsLDIsLDUsNzksNyxjNSw0LDE1cyw3LDMxLDcsMjQwLDUsZ3g3aywybywzayw2b1wiLnNwbGl0KFwiLFwiKS5tYXAocyA9PiBzID8gcGFyc2VJbnQocywgMzYpIDogMSlcbiAgZm9yIChsZXQgaSA9IDAsIG4gPSAwOyBpIDwgbnVtYmVycy5sZW5ndGg7IGkrKylcbiAgICAoaSAlIDIgPyByYW5nZVRvIDogcmFuZ2VGcm9tKS5wdXNoKG4gPSBuICsgbnVtYmVyc1tpXSlcbn0pKClcblxuZXhwb3J0IGZ1bmN0aW9uIGlzRXh0ZW5kaW5nQ2hhcihjb2RlKSB7XG4gIGlmIChjb2RlIDwgNzY4KSByZXR1cm4gZmFsc2VcbiAgZm9yIChsZXQgZnJvbSA9IDAsIHRvID0gcmFuZ2VGcm9tLmxlbmd0aDs7KSB7XG4gICAgbGV0IG1pZCA9IChmcm9tICsgdG8pID4+IDFcbiAgICBpZiAoY29kZSA8IHJhbmdlRnJvbVttaWRdKSB0byA9IG1pZFxuICAgIGVsc2UgaWYgKGNvZGUgPj0gcmFuZ2VUb1ttaWRdKSBmcm9tID0gbWlkICsgMVxuICAgIGVsc2UgcmV0dXJuIHRydWVcbiAgICBpZiAoZnJvbSA9PSB0bykgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuZnVuY3Rpb24gaXNSZWdpb25hbEluZGljYXRvcihjb2RlKSB7XG4gIHJldHVybiBjb2RlID49IDB4MUYxRTYgJiYgY29kZSA8PSAweDFGMUZGXG59XG5cbmZ1bmN0aW9uIGNoZWNrKGNvZGUpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZUZyb20ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocmFuZ2VUb1tpXSA+IGNvZGUpIHJldHVybiByYW5nZUZyb21baV0gPD0gY29kZVxuICB9XG4gIHJldHVybiBmYWxzZVxufVxuXG5jb25zdCBaV0ogPSAweDIwMGRcblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRDbHVzdGVyQnJlYWsoc3RyLCBwb3MsIGZvcndhcmQgPSB0cnVlLCBpbmNsdWRlRXh0ZW5kaW5nID0gdHJ1ZSkge1xuICByZXR1cm4gKGZvcndhcmQgPyBuZXh0Q2x1c3RlckJyZWFrIDogcHJldkNsdXN0ZXJCcmVhaykoc3RyLCBwb3MsIGluY2x1ZGVFeHRlbmRpbmcpXG59XG5cbmZ1bmN0aW9uIG5leHRDbHVzdGVyQnJlYWsoc3RyLCBwb3MsIGluY2x1ZGVFeHRlbmRpbmcpIHtcbiAgaWYgKHBvcyA9PSBzdHIubGVuZ3RoKSByZXR1cm4gcG9zXG4gIC8vIElmIHBvcyBpcyBpbiB0aGUgbWlkZGxlIG9mIGEgc3Vycm9nYXRlIHBhaXIsIG1vdmUgdG8gaXRzIHN0YXJ0XG4gIGlmIChwb3MgJiYgc3Vycm9nYXRlTG93KHN0ci5jaGFyQ29kZUF0KHBvcykpICYmIHN1cnJvZ2F0ZUhpZ2goc3RyLmNoYXJDb2RlQXQocG9zIC0gMSkpKSBwb3MtLVxuICBsZXQgcHJldiA9IGNvZGVQb2ludEF0KHN0ciwgcG9zKVxuICBwb3MgKz0gY29kZVBvaW50U2l6ZShwcmV2KVxuICB3aGlsZSAocG9zIDwgc3RyLmxlbmd0aCkge1xuICAgIGxldCBuZXh0ID0gY29kZVBvaW50QXQoc3RyLCBwb3MpXG4gICAgaWYgKHByZXYgPT0gWldKIHx8IG5leHQgPT0gWldKIHx8IGluY2x1ZGVFeHRlbmRpbmcgJiYgaXNFeHRlbmRpbmdDaGFyKG5leHQpKSB7XG4gICAgICBwb3MgKz0gY29kZVBvaW50U2l6ZShuZXh0KVxuICAgICAgcHJldiA9IG5leHRcbiAgICB9IGVsc2UgaWYgKGlzUmVnaW9uYWxJbmRpY2F0b3IobmV4dCkpIHtcbiAgICAgIGxldCBjb3VudEJlZm9yZSA9IDAsIGkgPSBwb3MgLSAyXG4gICAgICB3aGlsZSAoaSA+PSAwICYmIGlzUmVnaW9uYWxJbmRpY2F0b3IoY29kZVBvaW50QXQoc3RyLCBpKSkpIHsgY291bnRCZWZvcmUrKzsgaSAtPSAyIH1cbiAgICAgIGlmIChjb3VudEJlZm9yZSAlIDIgPT0gMCkgYnJlYWtcbiAgICAgIGVsc2UgcG9zICs9IDJcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBvc1xufVxuXG5mdW5jdGlvbiBwcmV2Q2x1c3RlckJyZWFrKHN0ciwgcG9zLCBpbmNsdWRlRXh0ZW5kaW5nKSB7XG4gIHdoaWxlIChwb3MgPiAwKSB7XG4gICAgbGV0IGZvdW5kID0gbmV4dENsdXN0ZXJCcmVhayhzdHIsIHBvcyAtIDIsIGluY2x1ZGVFeHRlbmRpbmcpXG4gICAgaWYgKGZvdW5kIDwgcG9zKSByZXR1cm4gZm91bmRcbiAgICBwb3MtLVxuICB9XG4gIHJldHVybiAwXG59XG5cbmZ1bmN0aW9uIGNvZGVQb2ludEF0KHN0ciwgcG9zKSB7XG4gIGxldCBjb2RlMCA9IHN0ci5jaGFyQ29kZUF0KHBvcylcbiAgaWYgKCFzdXJyb2dhdGVIaWdoKGNvZGUwKSB8fCBwb3MgKyAxID09IHN0ci5sZW5ndGgpIHJldHVybiBjb2RlMFxuICBsZXQgY29kZTEgPSBzdHIuY2hhckNvZGVBdChwb3MgKyAxKVxuICBpZiAoIXN1cnJvZ2F0ZUxvdyhjb2RlMSkpIHJldHVybiBjb2RlMFxuICByZXR1cm4gKChjb2RlMCAtIDB4ZDgwMCkgPDwgMTApICsgKGNvZGUxIC0gMHhkYzAwKSArIDB4MTAwMDBcbn1cblxuZnVuY3Rpb24gc3Vycm9nYXRlTG93KGNoKSB7IHJldHVybiBjaCA+PSAweERDMDAgJiYgY2ggPCAweEUwMDAgfVxuZnVuY3Rpb24gc3Vycm9nYXRlSGlnaChjaCkgeyByZXR1cm4gY2ggPj0gMHhEODAwICYmIGNoIDwgMHhEQzAwIH1cbmZ1bmN0aW9uIGNvZGVQb2ludFNpemUoY29kZSkgeyByZXR1cm4gY29kZSA8IDB4MTAwMDAgPyAxIDogMiB9XG4iLCAiaW1wb3J0IHsgZmluZENsdXN0ZXJCcmVhayBhcyBmaW5kQ2x1c3RlckJyZWFrJDEgfSBmcm9tICdAbWFyaWpuL2ZpbmQtY2x1c3Rlci1icmVhayc7XG5cbi8qKlxuVGhlIGRhdGEgc3RydWN0dXJlIGZvciBkb2N1bWVudHMuIEBub25hYnN0cmFjdFxuKi9cbmNsYXNzIFRleHQge1xuICAgIC8qKlxuICAgIEdldCB0aGUgbGluZSBkZXNjcmlwdGlvbiBhcm91bmQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgbGluZUF0KHBvcykge1xuICAgICAgICBpZiAocG9zIDwgMCB8fCBwb3MgPiB0aGlzLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIHBvc2l0aW9uICR7cG9zfSBpbiBkb2N1bWVudCBvZiBsZW5ndGggJHt0aGlzLmxlbmd0aH1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGluZUlubmVyKHBvcywgZmFsc2UsIDEsIDApO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGRlc2NyaXB0aW9uIGZvciB0aGUgZ2l2ZW4gKDEtYmFzZWQpIGxpbmUgbnVtYmVyLlxuICAgICovXG4gICAgbGluZShuKSB7XG4gICAgICAgIGlmIChuIDwgMSB8fCBuID4gdGhpcy5saW5lcylcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIGxpbmUgbnVtYmVyICR7bn0gaW4gJHt0aGlzLmxpbmVzfS1saW5lIGRvY3VtZW50YCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVJbm5lcihuLCB0cnVlLCAxLCAwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSBhIHJhbmdlIG9mIHRoZSB0ZXh0IHdpdGggdGhlIGdpdmVuIGNvbnRlbnQuXG4gICAgKi9cbiAgICByZXBsYWNlKGZyb20sIHRvLCB0ZXh0KSB7XG4gICAgICAgIFtmcm9tLCB0b10gPSBjbGlwKHRoaXMsIGZyb20sIHRvKTtcbiAgICAgICAgbGV0IHBhcnRzID0gW107XG4gICAgICAgIHRoaXMuZGVjb21wb3NlKDAsIGZyb20sIHBhcnRzLCAyIC8qIE9wZW4uVG8gKi8pO1xuICAgICAgICBpZiAodGV4dC5sZW5ndGgpXG4gICAgICAgICAgICB0ZXh0LmRlY29tcG9zZSgwLCB0ZXh0Lmxlbmd0aCwgcGFydHMsIDEgLyogT3Blbi5Gcm9tICovIHwgMiAvKiBPcGVuLlRvICovKTtcbiAgICAgICAgdGhpcy5kZWNvbXBvc2UodG8sIHRoaXMubGVuZ3RoLCBwYXJ0cywgMSAvKiBPcGVuLkZyb20gKi8pO1xuICAgICAgICByZXR1cm4gVGV4dE5vZGUuZnJvbShwYXJ0cywgdGhpcy5sZW5ndGggLSAodG8gLSBmcm9tKSArIHRleHQubGVuZ3RoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQXBwZW5kIGFub3RoZXIgZG9jdW1lbnQgdG8gdGhpcyBvbmUuXG4gICAgKi9cbiAgICBhcHBlbmQob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZSh0aGlzLmxlbmd0aCwgdGhpcy5sZW5ndGgsIG90aGVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0cmlldmUgdGhlIHRleHQgYmV0d2VlbiB0aGUgZ2l2ZW4gcG9pbnRzLlxuICAgICovXG4gICAgc2xpY2UoZnJvbSwgdG8gPSB0aGlzLmxlbmd0aCkge1xuICAgICAgICBbZnJvbSwgdG9dID0gY2xpcCh0aGlzLCBmcm9tLCB0byk7XG4gICAgICAgIGxldCBwYXJ0cyA9IFtdO1xuICAgICAgICB0aGlzLmRlY29tcG9zZShmcm9tLCB0bywgcGFydHMsIDApO1xuICAgICAgICByZXR1cm4gVGV4dE5vZGUuZnJvbShwYXJ0cywgdG8gLSBmcm9tKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGVzdCB3aGV0aGVyIHRoaXMgdGV4dCBpcyBlcXVhbCB0byBhbm90aGVyIGluc3RhbmNlLlxuICAgICovXG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgaWYgKG90aGVyID09IHRoaXMpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKG90aGVyLmxlbmd0aCAhPSB0aGlzLmxlbmd0aCB8fCBvdGhlci5saW5lcyAhPSB0aGlzLmxpbmVzKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnNjYW5JZGVudGljYWwob3RoZXIsIDEpLCBlbmQgPSB0aGlzLmxlbmd0aCAtIHRoaXMuc2NhbklkZW50aWNhbChvdGhlciwgLTEpO1xuICAgICAgICBsZXQgYSA9IG5ldyBSYXdUZXh0Q3Vyc29yKHRoaXMpLCBiID0gbmV3IFJhd1RleHRDdXJzb3Iob3RoZXIpO1xuICAgICAgICBmb3IgKGxldCBza2lwID0gc3RhcnQsIHBvcyA9IHN0YXJ0OzspIHtcbiAgICAgICAgICAgIGEubmV4dChza2lwKTtcbiAgICAgICAgICAgIGIubmV4dChza2lwKTtcbiAgICAgICAgICAgIHNraXAgPSAwO1xuICAgICAgICAgICAgaWYgKGEubGluZUJyZWFrICE9IGIubGluZUJyZWFrIHx8IGEuZG9uZSAhPSBiLmRvbmUgfHwgYS52YWx1ZSAhPSBiLnZhbHVlKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHBvcyArPSBhLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChhLmRvbmUgfHwgcG9zID49IGVuZClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBJdGVyYXRlIG92ZXIgdGhlIHRleHQuIFdoZW4gYGRpcmAgaXMgYC0xYCwgaXRlcmF0aW9uIGhhcHBlbnNcbiAgICBmcm9tIGVuZCB0byBzdGFydC4gVGhpcyB3aWxsIHJldHVybiBsaW5lcyBhbmQgdGhlIGJyZWFrcyBiZXR3ZWVuXG4gICAgdGhlbSBhcyBzZXBhcmF0ZSBzdHJpbmdzLlxuICAgICovXG4gICAgaXRlcihkaXIgPSAxKSB7IHJldHVybiBuZXcgUmF3VGV4dEN1cnNvcih0aGlzLCBkaXIpOyB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIGEgcmFuZ2Ugb2YgdGhlIHRleHQuIFdoZW4gYGZyb21gID4gYHRvYCwgdGhlXG4gICAgaXRlcmF0b3Igd2lsbCBydW4gaW4gcmV2ZXJzZS5cbiAgICAqL1xuICAgIGl0ZXJSYW5nZShmcm9tLCB0byA9IHRoaXMubGVuZ3RoKSB7IHJldHVybiBuZXcgUGFydGlhbFRleHRDdXJzb3IodGhpcywgZnJvbSwgdG8pOyB9XG4gICAgLyoqXG4gICAgUmV0dXJuIGEgY3Vyc29yIHRoYXQgaXRlcmF0ZXMgb3ZlciB0aGUgZ2l2ZW4gcmFuZ2Ugb2YgbGluZXMsXG4gICAgX3dpdGhvdXRfIHJldHVybmluZyB0aGUgbGluZSBicmVha3MgYmV0d2VlbiwgYW5kIHlpZWxkaW5nIGVtcHR5XG4gICAgc3RyaW5ncyBmb3IgZW1wdHkgbGluZXMuXG4gICAgXG4gICAgV2hlbiBgZnJvbWAgYW5kIGB0b2AgYXJlIGdpdmVuLCB0aGV5IHNob3VsZCBiZSAxLWJhc2VkIGxpbmUgbnVtYmVycy5cbiAgICAqL1xuICAgIGl0ZXJMaW5lcyhmcm9tLCB0bykge1xuICAgICAgICBsZXQgaW5uZXI7XG4gICAgICAgIGlmIChmcm9tID09IG51bGwpIHtcbiAgICAgICAgICAgIGlubmVyID0gdGhpcy5pdGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodG8gPT0gbnVsbClcbiAgICAgICAgICAgICAgICB0byA9IHRoaXMubGluZXMgKyAxO1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5saW5lKGZyb20pLmZyb207XG4gICAgICAgICAgICBpbm5lciA9IHRoaXMuaXRlclJhbmdlKHN0YXJ0LCBNYXRoLm1heChzdGFydCwgdG8gPT0gdGhpcy5saW5lcyArIDEgPyB0aGlzLmxlbmd0aCA6IHRvIDw9IDEgPyAwIDogdGhpcy5saW5lKHRvIC0gMSkudG8pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IExpbmVDdXJzb3IoaW5uZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gdGhlIGRvY3VtZW50IGFzIGEgc3RyaW5nLCB1c2luZyBuZXdsaW5lIGNoYXJhY3RlcnMgdG9cbiAgICBzZXBhcmF0ZSBsaW5lcy5cbiAgICAqL1xuICAgIHRvU3RyaW5nKCkgeyByZXR1cm4gdGhpcy5zbGljZVN0cmluZygwKTsgfVxuICAgIC8qKlxuICAgIENvbnZlcnQgdGhlIGRvY3VtZW50IHRvIGFuIGFycmF5IG9mIGxpbmVzICh3aGljaCBjYW4gYmVcbiAgICBkZXNlcmlhbGl6ZWQgYWdhaW4gdmlhIFtgVGV4dC5vZmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVGV4dF5vZikpLlxuICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBsZXQgbGluZXMgPSBbXTtcbiAgICAgICAgdGhpcy5mbGF0dGVuKGxpbmVzKTtcbiAgICAgICAgcmV0dXJuIGxpbmVzO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgYFRleHRgIGluc3RhbmNlIGZvciB0aGUgZ2l2ZW4gYXJyYXkgb2YgbGluZXMuXG4gICAgKi9cbiAgICBzdGF0aWMgb2YodGV4dCkge1xuICAgICAgICBpZiAodGV4dC5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQSBkb2N1bWVudCBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGxpbmVcIik7XG4gICAgICAgIGlmICh0ZXh0Lmxlbmd0aCA9PSAxICYmICF0ZXh0WzBdKVxuICAgICAgICAgICAgcmV0dXJuIFRleHQuZW1wdHk7XG4gICAgICAgIHJldHVybiB0ZXh0Lmxlbmd0aCA8PSAzMiAvKiBUcmVlLkJyYW5jaCAqLyA/IG5ldyBUZXh0TGVhZih0ZXh0KSA6IFRleHROb2RlLmZyb20oVGV4dExlYWYuc3BsaXQodGV4dCwgW10pKTtcbiAgICB9XG59XG4vLyBMZWF2ZXMgc3RvcmUgYW4gYXJyYXkgb2YgbGluZSBzdHJpbmdzLiBUaGVyZSBhcmUgYWx3YXlzIGxpbmUgYnJlYWtzXG4vLyBiZXR3ZWVuIHRoZXNlIHN0cmluZ3MuIExlYXZlcyBhcmUgbGltaXRlZCBpbiBzaXplIGFuZCBoYXZlIHRvIGJlXG4vLyBjb250YWluZWQgaW4gVGV4dE5vZGUgaW5zdGFuY2VzIGZvciBiaWdnZXIgZG9jdW1lbnRzLlxuY2xhc3MgVGV4dExlYWYgZXh0ZW5kcyBUZXh0IHtcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0LCBsZW5ndGggPSB0ZXh0TGVuZ3RoKHRleHQpKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgIH1cbiAgICBnZXQgbGluZXMoKSB7IHJldHVybiB0aGlzLnRleHQubGVuZ3RoOyB9XG4gICAgZ2V0IGNoaWxkcmVuKCkgeyByZXR1cm4gbnVsbDsgfVxuICAgIGxpbmVJbm5lcih0YXJnZXQsIGlzTGluZSwgbGluZSwgb2Zmc2V0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RyaW5nID0gdGhpcy50ZXh0W2ldLCBlbmQgPSBvZmZzZXQgKyBzdHJpbmcubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKChpc0xpbmUgPyBsaW5lIDogZW5kKSA+PSB0YXJnZXQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaW5lKG9mZnNldCwgZW5kLCBsaW5lLCBzdHJpbmcpO1xuICAgICAgICAgICAgb2Zmc2V0ID0gZW5kICsgMTtcbiAgICAgICAgICAgIGxpbmUrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZWNvbXBvc2UoZnJvbSwgdG8sIHRhcmdldCwgb3Blbikge1xuICAgICAgICBsZXQgdGV4dCA9IGZyb20gPD0gMCAmJiB0byA+PSB0aGlzLmxlbmd0aCA/IHRoaXNcbiAgICAgICAgICAgIDogbmV3IFRleHRMZWFmKHNsaWNlVGV4dCh0aGlzLnRleHQsIGZyb20sIHRvKSwgTWF0aC5taW4odG8sIHRoaXMubGVuZ3RoKSAtIE1hdGgubWF4KDAsIGZyb20pKTtcbiAgICAgICAgaWYgKG9wZW4gJiAxIC8qIE9wZW4uRnJvbSAqLykge1xuICAgICAgICAgICAgbGV0IHByZXYgPSB0YXJnZXQucG9wKCk7XG4gICAgICAgICAgICBsZXQgam9pbmVkID0gYXBwZW5kVGV4dCh0ZXh0LnRleHQsIHByZXYudGV4dC5zbGljZSgpLCAwLCB0ZXh0Lmxlbmd0aCk7XG4gICAgICAgICAgICBpZiAoam9pbmVkLmxlbmd0aCA8PSAzMiAvKiBUcmVlLkJyYW5jaCAqLykge1xuICAgICAgICAgICAgICAgIHRhcmdldC5wdXNoKG5ldyBUZXh0TGVhZihqb2luZWQsIHByZXYubGVuZ3RoICsgdGV4dC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBtaWQgPSBqb2luZWQubGVuZ3RoID4+IDE7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnB1c2gobmV3IFRleHRMZWFmKGpvaW5lZC5zbGljZSgwLCBtaWQpKSwgbmV3IFRleHRMZWFmKGpvaW5lZC5zbGljZShtaWQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQucHVzaCh0ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXBsYWNlKGZyb20sIHRvLCB0ZXh0KSB7XG4gICAgICAgIGlmICghKHRleHQgaW5zdGFuY2VvZiBUZXh0TGVhZikpXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIucmVwbGFjZShmcm9tLCB0bywgdGV4dCk7XG4gICAgICAgIFtmcm9tLCB0b10gPSBjbGlwKHRoaXMsIGZyb20sIHRvKTtcbiAgICAgICAgbGV0IGxpbmVzID0gYXBwZW5kVGV4dCh0aGlzLnRleHQsIGFwcGVuZFRleHQodGV4dC50ZXh0LCBzbGljZVRleHQodGhpcy50ZXh0LCAwLCBmcm9tKSksIHRvKTtcbiAgICAgICAgbGV0IG5ld0xlbiA9IHRoaXMubGVuZ3RoICsgdGV4dC5sZW5ndGggLSAodG8gLSBmcm9tKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA8PSAzMiAvKiBUcmVlLkJyYW5jaCAqLylcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dExlYWYobGluZXMsIG5ld0xlbik7XG4gICAgICAgIHJldHVybiBUZXh0Tm9kZS5mcm9tKFRleHRMZWFmLnNwbGl0KGxpbmVzLCBbXSksIG5ld0xlbik7XG4gICAgfVxuICAgIHNsaWNlU3RyaW5nKGZyb20sIHRvID0gdGhpcy5sZW5ndGgsIGxpbmVTZXAgPSBcIlxcblwiKSB7XG4gICAgICAgIFtmcm9tLCB0b10gPSBjbGlwKHRoaXMsIGZyb20sIHRvKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IDAsIGkgPSAwOyBwb3MgPD0gdG8gJiYgaSA8IHRoaXMudGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSB0aGlzLnRleHRbaV0sIGVuZCA9IHBvcyArIGxpbmUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHBvcyA+IGZyb20gJiYgaSlcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gbGluZVNlcDtcbiAgICAgICAgICAgIGlmIChmcm9tIDwgZW5kICYmIHRvID4gcG9zKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBsaW5lLnNsaWNlKE1hdGgubWF4KDAsIGZyb20gLSBwb3MpLCB0byAtIHBvcyk7XG4gICAgICAgICAgICBwb3MgPSBlbmQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZsYXR0ZW4odGFyZ2V0KSB7XG4gICAgICAgIGZvciAobGV0IGxpbmUgb2YgdGhpcy50ZXh0KVxuICAgICAgICAgICAgdGFyZ2V0LnB1c2gobGluZSk7XG4gICAgfVxuICAgIHNjYW5JZGVudGljYWwoKSB7IHJldHVybiAwOyB9XG4gICAgc3RhdGljIHNwbGl0KHRleHQsIHRhcmdldCkge1xuICAgICAgICBsZXQgcGFydCA9IFtdLCBsZW4gPSAtMTtcbiAgICAgICAgZm9yIChsZXQgbGluZSBvZiB0ZXh0KSB7XG4gICAgICAgICAgICBwYXJ0LnB1c2gobGluZSk7XG4gICAgICAgICAgICBsZW4gKz0gbGluZS5sZW5ndGggKyAxO1xuICAgICAgICAgICAgaWYgKHBhcnQubGVuZ3RoID09IDMyIC8qIFRyZWUuQnJhbmNoICovKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnB1c2gobmV3IFRleHRMZWFmKHBhcnQsIGxlbikpO1xuICAgICAgICAgICAgICAgIHBhcnQgPSBbXTtcbiAgICAgICAgICAgICAgICBsZW4gPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuID4gLTEpXG4gICAgICAgICAgICB0YXJnZXQucHVzaChuZXcgVGV4dExlYWYocGFydCwgbGVuKSk7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxufVxuLy8gTm9kZXMgcHJvdmlkZSB0aGUgdHJlZSBzdHJ1Y3R1cmUgb2YgdGhlIGBUZXh0YCB0eXBlLiBUaGV5IHN0b3JlIGFcbi8vIG51bWJlciBvZiBvdGhlciBub2RlcyBvciBsZWF2ZXMsIHRha2luZyBjYXJlIHRvIGJhbGFuY2UgdGhlbXNlbHZlc1xuLy8gb24gY2hhbmdlcy4gVGhlcmUgYXJlIGltcGxpZWQgbGluZSBicmVha3MgX2JldHdlZW5fIHRoZSBjaGlsZHJlbiBvZlxuLy8gYSBub2RlIChidXQgbm90IGJlZm9yZSB0aGUgZmlyc3Qgb3IgYWZ0ZXIgdGhlIGxhc3QgY2hpbGQpLlxuY2xhc3MgVGV4dE5vZGUgZXh0ZW5kcyBUZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihjaGlsZHJlbiwgbGVuZ3RoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMubGluZXMgPSAwO1xuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbilcbiAgICAgICAgICAgIHRoaXMubGluZXMgKz0gY2hpbGQubGluZXM7XG4gICAgfVxuICAgIGxpbmVJbm5lcih0YXJnZXQsIGlzTGluZSwgbGluZSwgb2Zmc2V0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBlbmQgPSBvZmZzZXQgKyBjaGlsZC5sZW5ndGgsIGVuZExpbmUgPSBsaW5lICsgY2hpbGQubGluZXMgLSAxO1xuICAgICAgICAgICAgaWYgKChpc0xpbmUgPyBlbmRMaW5lIDogZW5kKSA+PSB0YXJnZXQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkLmxpbmVJbm5lcih0YXJnZXQsIGlzTGluZSwgbGluZSwgb2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCA9IGVuZCArIDE7XG4gICAgICAgICAgICBsaW5lID0gZW5kTGluZSArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVjb21wb3NlKGZyb20sIHRvLCB0YXJnZXQsIG9wZW4pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7IHBvcyA8PSB0byAmJiBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgZW5kID0gcG9zICsgY2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGZyb20gPD0gZW5kICYmIHRvID49IHBvcykge1xuICAgICAgICAgICAgICAgIGxldCBjaGlsZE9wZW4gPSBvcGVuICYgKChwb3MgPD0gZnJvbSA/IDEgLyogT3Blbi5Gcm9tICovIDogMCkgfCAoZW5kID49IHRvID8gMiAvKiBPcGVuLlRvICovIDogMCkpO1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPj0gZnJvbSAmJiBlbmQgPD0gdG8gJiYgIWNoaWxkT3BlbilcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnB1c2goY2hpbGQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuZGVjb21wb3NlKGZyb20gLSBwb3MsIHRvIC0gcG9zLCB0YXJnZXQsIGNoaWxkT3Blbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3MgPSBlbmQgKyAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcGxhY2UoZnJvbSwgdG8sIHRleHQpIHtcbiAgICAgICAgW2Zyb20sIHRvXSA9IGNsaXAodGhpcywgZnJvbSwgdG8pO1xuICAgICAgICBpZiAodGV4dC5saW5lcyA8IHRoaXMubGluZXMpXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBlbmQgPSBwb3MgKyBjaGlsZC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgLy8gRmFzdCBwYXRoOiBpZiB0aGUgY2hhbmdlIG9ubHkgYWZmZWN0cyBvbmUgY2hpbGQgYW5kIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNoaWxkJ3Mgc2l6ZSByZW1haW5zIGluIHRoZSBhY2NlcHRhYmxlIHJhbmdlLCBvbmx5IHVwZGF0ZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgY2hpbGRcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA+PSBwb3MgJiYgdG8gPD0gZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB1cGRhdGVkID0gY2hpbGQucmVwbGFjZShmcm9tIC0gcG9zLCB0byAtIHBvcywgdGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0b3RhbExpbmVzID0gdGhpcy5saW5lcyAtIGNoaWxkLmxpbmVzICsgdXBkYXRlZC5saW5lcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWQubGluZXMgPCAodG90YWxMaW5lcyA+PiAoNSAvKiBUcmVlLkJyYW5jaFNoaWZ0ICovIC0gMSkpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkLmxpbmVzID4gKHRvdGFsTGluZXMgPj4gKDUgLyogVHJlZS5CcmFuY2hTaGlmdCAqLyArIDEpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvcHkgPSB0aGlzLmNoaWxkcmVuLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5W2ldID0gdXBkYXRlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dE5vZGUoY29weSwgdGhpcy5sZW5ndGggLSAodG8gLSBmcm9tKSArIHRleHQubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIucmVwbGFjZShwb3MsIGVuZCwgdXBkYXRlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBvcyA9IGVuZCArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci5yZXBsYWNlKGZyb20sIHRvLCB0ZXh0KTtcbiAgICB9XG4gICAgc2xpY2VTdHJpbmcoZnJvbSwgdG8gPSB0aGlzLmxlbmd0aCwgbGluZVNlcCA9IFwiXFxuXCIpIHtcbiAgICAgICAgW2Zyb20sIHRvXSA9IGNsaXAodGhpcywgZnJvbSwgdG8pO1xuICAgICAgICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aCAmJiBwb3MgPD0gdG87IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgZW5kID0gcG9zICsgY2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHBvcyA+IGZyb20gJiYgaSlcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gbGluZVNlcDtcbiAgICAgICAgICAgIGlmIChmcm9tIDwgZW5kICYmIHRvID4gcG9zKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGlsZC5zbGljZVN0cmluZyhmcm9tIC0gcG9zLCB0byAtIHBvcywgbGluZVNlcCk7XG4gICAgICAgICAgICBwb3MgPSBlbmQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZsYXR0ZW4odGFyZ2V0KSB7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pXG4gICAgICAgICAgICBjaGlsZC5mbGF0dGVuKHRhcmdldCk7XG4gICAgfVxuICAgIHNjYW5JZGVudGljYWwob3RoZXIsIGRpcikge1xuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIFRleHROb2RlKSlcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICBsZXQgbGVuZ3RoID0gMDtcbiAgICAgICAgbGV0IFtpQSwgaUIsIGVBLCBlQl0gPSBkaXIgPiAwID8gWzAsIDAsIHRoaXMuY2hpbGRyZW4ubGVuZ3RoLCBvdGhlci5jaGlsZHJlbi5sZW5ndGhdXG4gICAgICAgICAgICA6IFt0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDEsIG90aGVyLmNoaWxkcmVuLmxlbmd0aCAtIDEsIC0xLCAtMV07XG4gICAgICAgIGZvciAoOzsgaUEgKz0gZGlyLCBpQiArPSBkaXIpIHtcbiAgICAgICAgICAgIGlmIChpQSA9PSBlQSB8fCBpQiA9PSBlQilcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVuZ3RoO1xuICAgICAgICAgICAgbGV0IGNoQSA9IHRoaXMuY2hpbGRyZW5baUFdLCBjaEIgPSBvdGhlci5jaGlsZHJlbltpQl07XG4gICAgICAgICAgICBpZiAoY2hBICE9IGNoQilcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVuZ3RoICsgY2hBLnNjYW5JZGVudGljYWwoY2hCLCBkaXIpO1xuICAgICAgICAgICAgbGVuZ3RoICs9IGNoQS5sZW5ndGggKyAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKGNoaWxkcmVuLCBsZW5ndGggPSBjaGlsZHJlbi5yZWR1Y2UoKGwsIGNoKSA9PiBsICsgY2gubGVuZ3RoICsgMSwgLTEpKSB7XG4gICAgICAgIGxldCBsaW5lcyA9IDA7XG4gICAgICAgIGZvciAobGV0IGNoIG9mIGNoaWxkcmVuKVxuICAgICAgICAgICAgbGluZXMgKz0gY2gubGluZXM7XG4gICAgICAgIGlmIChsaW5lcyA8IDMyIC8qIFRyZWUuQnJhbmNoICovKSB7XG4gICAgICAgICAgICBsZXQgZmxhdCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgY2ggb2YgY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgY2guZmxhdHRlbihmbGF0KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dExlYWYoZmxhdCwgbGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY2h1bmsgPSBNYXRoLm1heCgzMiAvKiBUcmVlLkJyYW5jaCAqLywgbGluZXMgPj4gNSAvKiBUcmVlLkJyYW5jaFNoaWZ0ICovKSwgbWF4Q2h1bmsgPSBjaHVuayA8PCAxLCBtaW5DaHVuayA9IGNodW5rID4+IDE7XG4gICAgICAgIGxldCBjaHVua2VkID0gW10sIGN1cnJlbnRMaW5lcyA9IDAsIGN1cnJlbnRMZW4gPSAtMSwgY3VycmVudENodW5rID0gW107XG4gICAgICAgIGZ1bmN0aW9uIGFkZChjaGlsZCkge1xuICAgICAgICAgICAgbGV0IGxhc3Q7XG4gICAgICAgICAgICBpZiAoY2hpbGQubGluZXMgPiBtYXhDaHVuayAmJiBjaGlsZCBpbnN0YW5jZW9mIFRleHROb2RlKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbm9kZSBvZiBjaGlsZC5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICAgICAgYWRkKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hpbGQubGluZXMgPiBtaW5DaHVuayAmJiAoY3VycmVudExpbmVzID4gbWluQ2h1bmsgfHwgIWN1cnJlbnRMaW5lcykpIHtcbiAgICAgICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICAgICAgICAgIGNodW5rZWQucHVzaChjaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRleHRMZWFmICYmIGN1cnJlbnRMaW5lcyAmJlxuICAgICAgICAgICAgICAgIChsYXN0ID0gY3VycmVudENodW5rW2N1cnJlbnRDaHVuay5sZW5ndGggLSAxXSkgaW5zdGFuY2VvZiBUZXh0TGVhZiAmJlxuICAgICAgICAgICAgICAgIGNoaWxkLmxpbmVzICsgbGFzdC5saW5lcyA8PSAzMiAvKiBUcmVlLkJyYW5jaCAqLykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMaW5lcyArPSBjaGlsZC5saW5lcztcbiAgICAgICAgICAgICAgICBjdXJyZW50TGVuICs9IGNoaWxkLmxlbmd0aCArIDE7XG4gICAgICAgICAgICAgICAgY3VycmVudENodW5rW2N1cnJlbnRDaHVuay5sZW5ndGggLSAxXSA9IG5ldyBUZXh0TGVhZihsYXN0LnRleHQuY29uY2F0KGNoaWxkLnRleHQpLCBsYXN0Lmxlbmd0aCArIDEgKyBjaGlsZC5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRMaW5lcyArIGNoaWxkLmxpbmVzID4gY2h1bmspXG4gICAgICAgICAgICAgICAgICAgIGZsdXNoKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudExpbmVzICs9IGNoaWxkLmxpbmVzO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMZW4gKz0gY2hpbGQubGVuZ3RoICsgMTtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2h1bmsucHVzaChjaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudExpbmVzID09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2h1bmtlZC5wdXNoKGN1cnJlbnRDaHVuay5sZW5ndGggPT0gMSA/IGN1cnJlbnRDaHVua1swXSA6IFRleHROb2RlLmZyb20oY3VycmVudENodW5rLCBjdXJyZW50TGVuKSk7XG4gICAgICAgICAgICBjdXJyZW50TGVuID0gLTE7XG4gICAgICAgICAgICBjdXJyZW50TGluZXMgPSBjdXJyZW50Q2h1bmsubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbilcbiAgICAgICAgICAgIGFkZChjaGlsZCk7XG4gICAgICAgIGZsdXNoKCk7XG4gICAgICAgIHJldHVybiBjaHVua2VkLmxlbmd0aCA9PSAxID8gY2h1bmtlZFswXSA6IG5ldyBUZXh0Tm9kZShjaHVua2VkLCBsZW5ndGgpO1xuICAgIH1cbn1cblRleHQuZW1wdHkgPSAvKkBfX1BVUkVfXyovbmV3IFRleHRMZWFmKFtcIlwiXSwgMCk7XG5mdW5jdGlvbiB0ZXh0TGVuZ3RoKHRleHQpIHtcbiAgICBsZXQgbGVuZ3RoID0gLTE7XG4gICAgZm9yIChsZXQgbGluZSBvZiB0ZXh0KVxuICAgICAgICBsZW5ndGggKz0gbGluZS5sZW5ndGggKyAxO1xuICAgIHJldHVybiBsZW5ndGg7XG59XG5mdW5jdGlvbiBhcHBlbmRUZXh0KHRleHQsIHRhcmdldCwgZnJvbSA9IDAsIHRvID0gMWU5KSB7XG4gICAgZm9yIChsZXQgcG9zID0gMCwgaSA9IDAsIGZpcnN0ID0gdHJ1ZTsgaSA8IHRleHQubGVuZ3RoICYmIHBvcyA8PSB0bzsgaSsrKSB7XG4gICAgICAgIGxldCBsaW5lID0gdGV4dFtpXSwgZW5kID0gcG9zICsgbGluZS5sZW5ndGg7XG4gICAgICAgIGlmIChlbmQgPj0gZnJvbSkge1xuICAgICAgICAgICAgaWYgKGVuZCA+IHRvKVxuICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lLnNsaWNlKDAsIHRvIC0gcG9zKTtcbiAgICAgICAgICAgIGlmIChwb3MgPCBmcm9tKVxuICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lLnNsaWNlKGZyb20gLSBwb3MpO1xuICAgICAgICAgICAgaWYgKGZpcnN0KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W3RhcmdldC5sZW5ndGggLSAxXSArPSBsaW5lO1xuICAgICAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnB1c2gobGluZSk7XG4gICAgICAgIH1cbiAgICAgICAgcG9zID0gZW5kICsgMTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmZ1bmN0aW9uIHNsaWNlVGV4dCh0ZXh0LCBmcm9tLCB0bykge1xuICAgIHJldHVybiBhcHBlbmRUZXh0KHRleHQsIFtcIlwiXSwgZnJvbSwgdG8pO1xufVxuY2xhc3MgUmF3VGV4dEN1cnNvciB7XG4gICAgY29uc3RydWN0b3IodGV4dCwgZGlyID0gMSkge1xuICAgICAgICB0aGlzLmRpciA9IGRpcjtcbiAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGluZUJyZWFrID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLm5vZGVzID0gW3RleHRdO1xuICAgICAgICB0aGlzLm9mZnNldHMgPSBbZGlyID4gMCA/IDEgOiAodGV4dCBpbnN0YW5jZW9mIFRleHRMZWFmID8gdGV4dC50ZXh0Lmxlbmd0aCA6IHRleHQuY2hpbGRyZW4ubGVuZ3RoKSA8PCAxXTtcbiAgICB9XG4gICAgbmV4dElubmVyKHNraXAsIGRpcikge1xuICAgICAgICB0aGlzLmRvbmUgPSB0aGlzLmxpbmVCcmVhayA9IGZhbHNlO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgbGFzdCA9IHRoaXMubm9kZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIGxldCB0b3AgPSB0aGlzLm5vZGVzW2xhc3RdLCBvZmZzZXRWYWx1ZSA9IHRoaXMub2Zmc2V0c1tsYXN0XSwgb2Zmc2V0ID0gb2Zmc2V0VmFsdWUgPj4gMTtcbiAgICAgICAgICAgIGxldCBzaXplID0gdG9wIGluc3RhbmNlb2YgVGV4dExlYWYgPyB0b3AudGV4dC5sZW5ndGggOiB0b3AuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKG9mZnNldCA9PSAoZGlyID4gMCA/IHNpemUgOiAwKSkge1xuICAgICAgICAgICAgICAgIGlmIChsYXN0ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGlyID4gMClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRzW2xhc3QgLSAxXSsrO1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRzLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKG9mZnNldFZhbHVlICYgMSkgPT0gKGRpciA+IDAgPyAwIDogMSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHNbbGFzdF0gKz0gZGlyO1xuICAgICAgICAgICAgICAgIGlmIChza2lwID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lQnJlYWsgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNraXAtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRvcCBpbnN0YW5jZW9mIFRleHRMZWFmKSB7XG4gICAgICAgICAgICAgICAgLy8gTW92ZSB0byB0aGUgbmV4dCBzdHJpbmdcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHRvcC50ZXh0W29mZnNldCArIChkaXIgPCAwID8gLTEgOiAwKV07XG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRzW2xhc3RdICs9IGRpcjtcbiAgICAgICAgICAgICAgICBpZiAobmV4dC5sZW5ndGggPiBNYXRoLm1heCgwLCBza2lwKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gc2tpcCA9PSAwID8gbmV4dCA6IGRpciA+IDAgPyBuZXh0LnNsaWNlKHNraXApIDogbmV4dC5zbGljZSgwLCBuZXh0Lmxlbmd0aCAtIHNraXApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2tpcCAtPSBuZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gdG9wLmNoaWxkcmVuW29mZnNldCArIChkaXIgPCAwID8gLTEgOiAwKV07XG4gICAgICAgICAgICAgICAgaWYgKHNraXAgPiBuZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBza2lwIC09IG5leHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHNbbGFzdF0gKz0gZGlyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpciA8IDApXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHNbbGFzdF0tLTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKG5leHQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHMucHVzaChkaXIgPiAwID8gMSA6IChuZXh0IGluc3RhbmNlb2YgVGV4dExlYWYgPyBuZXh0LnRleHQubGVuZ3RoIDogbmV4dC5jaGlsZHJlbi5sZW5ndGgpIDw8IDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBuZXh0KHNraXAgPSAwKSB7XG4gICAgICAgIGlmIChza2lwIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0SW5uZXIoLXNraXAsICgtdGhpcy5kaXIpKTtcbiAgICAgICAgICAgIHNraXAgPSB0aGlzLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0SW5uZXIoc2tpcCwgdGhpcy5kaXIpO1xuICAgIH1cbn1cbmNsYXNzIFBhcnRpYWxUZXh0Q3Vyc29yIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0LCBzdGFydCwgZW5kKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBuZXcgUmF3VGV4dEN1cnNvcih0ZXh0LCBzdGFydCA+IGVuZCA/IC0xIDogMSk7XG4gICAgICAgIHRoaXMucG9zID0gc3RhcnQgPiBlbmQgPyB0ZXh0Lmxlbmd0aCA6IDA7XG4gICAgICAgIHRoaXMuZnJvbSA9IE1hdGgubWluKHN0YXJ0LCBlbmQpO1xuICAgICAgICB0aGlzLnRvID0gTWF0aC5tYXgoc3RhcnQsIGVuZCk7XG4gICAgfVxuICAgIG5leHRJbm5lcihza2lwLCBkaXIpIHtcbiAgICAgICAgaWYgKGRpciA8IDAgPyB0aGlzLnBvcyA8PSB0aGlzLmZyb20gOiB0aGlzLnBvcyA+PSB0aGlzLnRvKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBza2lwICs9IE1hdGgubWF4KDAsIGRpciA8IDAgPyB0aGlzLnBvcyAtIHRoaXMudG8gOiB0aGlzLmZyb20gLSB0aGlzLnBvcyk7XG4gICAgICAgIGxldCBsaW1pdCA9IGRpciA8IDAgPyB0aGlzLnBvcyAtIHRoaXMuZnJvbSA6IHRoaXMudG8gLSB0aGlzLnBvcztcbiAgICAgICAgaWYgKHNraXAgPiBsaW1pdClcbiAgICAgICAgICAgIHNraXAgPSBsaW1pdDtcbiAgICAgICAgbGltaXQgLT0gc2tpcDtcbiAgICAgICAgbGV0IHsgdmFsdWUgfSA9IHRoaXMuY3Vyc29yLm5leHQoc2tpcCk7XG4gICAgICAgIHRoaXMucG9zICs9ICh2YWx1ZS5sZW5ndGggKyBza2lwKSAqIGRpcjtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlLmxlbmd0aCA8PSBsaW1pdCA/IHZhbHVlIDogZGlyIDwgMCA/IHZhbHVlLnNsaWNlKHZhbHVlLmxlbmd0aCAtIGxpbWl0KSA6IHZhbHVlLnNsaWNlKDAsIGxpbWl0KTtcbiAgICAgICAgdGhpcy5kb25lID0gIXRoaXMudmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBuZXh0KHNraXAgPSAwKSB7XG4gICAgICAgIGlmIChza2lwIDwgMClcbiAgICAgICAgICAgIHNraXAgPSBNYXRoLm1heChza2lwLCB0aGlzLmZyb20gLSB0aGlzLnBvcyk7XG4gICAgICAgIGVsc2UgaWYgKHNraXAgPiAwKVxuICAgICAgICAgICAgc2tpcCA9IE1hdGgubWluKHNraXAsIHRoaXMudG8gLSB0aGlzLnBvcyk7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHRJbm5lcihza2lwLCB0aGlzLmN1cnNvci5kaXIpO1xuICAgIH1cbiAgICBnZXQgbGluZUJyZWFrKCkgeyByZXR1cm4gdGhpcy5jdXJzb3IubGluZUJyZWFrICYmIHRoaXMudmFsdWUgIT0gXCJcIjsgfVxufVxuY2xhc3MgTGluZUN1cnNvciB7XG4gICAgY29uc3RydWN0b3IoaW5uZXIpIHtcbiAgICAgICAgdGhpcy5pbm5lciA9IGlubmVyO1xuICAgICAgICB0aGlzLmFmdGVyQnJlYWsgPSB0cnVlO1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgfVxuICAgIG5leHQoc2tpcCA9IDApIHtcbiAgICAgICAgbGV0IHsgZG9uZSwgbGluZUJyZWFrLCB2YWx1ZSB9ID0gdGhpcy5pbm5lci5uZXh0KHNraXApO1xuICAgICAgICBpZiAoZG9uZSAmJiB0aGlzLmFmdGVyQnJlYWspIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5hZnRlckJyZWFrID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZG9uZSkge1xuICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxpbmVCcmVhaykge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWZ0ZXJCcmVhaykge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZnRlckJyZWFrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJCcmVhayA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXQgbGluZUJyZWFrKCkgeyByZXR1cm4gZmFsc2U7IH1cbn1cbmlmICh0eXBlb2YgU3ltYm9sICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICBUZXh0LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5pdGVyKCk7IH07XG4gICAgUmF3VGV4dEN1cnNvci5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IFBhcnRpYWxUZXh0Q3Vyc29yLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID1cbiAgICAgICAgTGluZUN1cnNvci5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG59XG4vKipcblRoaXMgdHlwZSBkZXNjcmliZXMgYSBsaW5lIGluIHRoZSBkb2N1bWVudC4gSXQgaXMgY3JlYXRlZFxub24tZGVtYW5kIHdoZW4gbGluZXMgYXJlIFtxdWVyaWVkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRleHQubGluZUF0KS5cbiovXG5jbGFzcyBMaW5lIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbiBvZiB0aGUgc3RhcnQgb2YgdGhlIGxpbmUuXG4gICAgKi9cbiAgICBmcm9tLCBcbiAgICAvKipcbiAgICBUaGUgcG9zaXRpb24gYXQgdGhlIGVuZCBvZiB0aGUgbGluZSAoX2JlZm9yZV8gdGhlIGxpbmUgYnJlYWssXG4gICAgb3IgYXQgdGhlIGVuZCBvZiBkb2N1bWVudCBmb3IgdGhlIGxhc3QgbGluZSkuXG4gICAgKi9cbiAgICB0bywgXG4gICAgLyoqXG4gICAgVGhpcyBsaW5lJ3MgbGluZSBudW1iZXIgKDEtYmFzZWQpLlxuICAgICovXG4gICAgbnVtYmVyLCBcbiAgICAvKipcbiAgICBUaGUgbGluZSdzIGNvbnRlbnQuXG4gICAgKi9cbiAgICB0ZXh0KSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5udW1iZXIgPSBudW1iZXI7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBsZW5ndGggb2YgdGhlIGxpbmUgKG5vdCBpbmNsdWRpbmcgYW55IGxpbmUgYnJlYWsgYWZ0ZXIgaXQpLlxuICAgICovXG4gICAgZ2V0IGxlbmd0aCgpIHsgcmV0dXJuIHRoaXMudG8gLSB0aGlzLmZyb207IH1cbn1cbmZ1bmN0aW9uIGNsaXAodGV4dCwgZnJvbSwgdG8pIHtcbiAgICBmcm9tID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGV4dC5sZW5ndGgsIGZyb20pKTtcbiAgICByZXR1cm4gW2Zyb20sIE1hdGgubWF4KGZyb20sIE1hdGgubWluKHRleHQubGVuZ3RoLCB0bykpXTtcbn1cblxuLyoqXG5SZXR1cm5zIGEgbmV4dCBncmFwaGVtZSBjbHVzdGVyIGJyZWFrIF9hZnRlcl8gKG5vdCBlcXVhbCB0bylcbmBwb3NgLCBpZiBgZm9yd2FyZGAgaXMgdHJ1ZSwgb3IgYmVmb3JlIG90aGVyd2lzZS4gUmV0dXJucyBgcG9zYFxuaXRzZWxmIGlmIG5vIGZ1cnRoZXIgY2x1c3RlciBicmVhayBpcyBhdmFpbGFibGUgaW4gdGhlIHN0cmluZy5cbk1vdmVzIGFjcm9zcyBzdXJyb2dhdGUgcGFpcnMsIGV4dGVuZGluZyBjaGFyYWN0ZXJzICh3aGVuXG5gaW5jbHVkZUV4dGVuZGluZ2AgaXMgdHJ1ZSksIGNoYXJhY3RlcnMgam9pbmVkIHdpdGggemVyby13aWR0aFxuam9pbmVycywgYW5kIGZsYWcgZW1vamkuXG4qL1xuZnVuY3Rpb24gZmluZENsdXN0ZXJCcmVhayhzdHIsIHBvcywgZm9yd2FyZCA9IHRydWUsIGluY2x1ZGVFeHRlbmRpbmcgPSB0cnVlKSB7XG4gICAgcmV0dXJuIGZpbmRDbHVzdGVyQnJlYWskMShzdHIsIHBvcywgZm9yd2FyZCwgaW5jbHVkZUV4dGVuZGluZyk7XG59XG5mdW5jdGlvbiBzdXJyb2dhdGVMb3coY2gpIHsgcmV0dXJuIGNoID49IDB4REMwMCAmJiBjaCA8IDB4RTAwMDsgfVxuZnVuY3Rpb24gc3Vycm9nYXRlSGlnaChjaCkgeyByZXR1cm4gY2ggPj0gMHhEODAwICYmIGNoIDwgMHhEQzAwOyB9XG4vKipcbkZpbmQgdGhlIGNvZGUgcG9pbnQgYXQgdGhlIGdpdmVuIHBvc2l0aW9uIGluIGEgc3RyaW5nIChsaWtlIHRoZVxuW2Bjb2RlUG9pbnRBdGBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9jb2RlUG9pbnRBdClcbnN0cmluZyBtZXRob2QpLlxuKi9cbmZ1bmN0aW9uIGNvZGVQb2ludEF0KHN0ciwgcG9zKSB7XG4gICAgbGV0IGNvZGUwID0gc3RyLmNoYXJDb2RlQXQocG9zKTtcbiAgICBpZiAoIXN1cnJvZ2F0ZUhpZ2goY29kZTApIHx8IHBvcyArIDEgPT0gc3RyLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGNvZGUwO1xuICAgIGxldCBjb2RlMSA9IHN0ci5jaGFyQ29kZUF0KHBvcyArIDEpO1xuICAgIGlmICghc3Vycm9nYXRlTG93KGNvZGUxKSlcbiAgICAgICAgcmV0dXJuIGNvZGUwO1xuICAgIHJldHVybiAoKGNvZGUwIC0gMHhkODAwKSA8PCAxMCkgKyAoY29kZTEgLSAweGRjMDApICsgMHgxMDAwMDtcbn1cbi8qKlxuR2l2ZW4gYSBVbmljb2RlIGNvZGVwb2ludCwgcmV0dXJuIHRoZSBKYXZhU2NyaXB0IHN0cmluZyB0aGF0XG5yZXNwcmVzZW50cyBpdCAobGlrZVxuW2BTdHJpbmcuZnJvbUNvZGVQb2ludGBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9mcm9tQ29kZVBvaW50KSkuXG4qL1xuZnVuY3Rpb24gZnJvbUNvZGVQb2ludChjb2RlKSB7XG4gICAgaWYgKGNvZGUgPD0gMHhmZmZmKVxuICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKTtcbiAgICBjb2RlIC09IDB4MTAwMDA7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGUgPj4gMTApICsgMHhkODAwLCAoY29kZSAmIDEwMjMpICsgMHhkYzAwKTtcbn1cbi8qKlxuVGhlIGFtb3VudCBvZiBwb3NpdGlvbnMgYSBjaGFyYWN0ZXIgdGFrZXMgdXAgaW4gYSBKYXZhU2NyaXB0IHN0cmluZy5cbiovXG5mdW5jdGlvbiBjb2RlUG9pbnRTaXplKGNvZGUpIHsgcmV0dXJuIGNvZGUgPCAweDEwMDAwID8gMSA6IDI7IH1cblxuY29uc3QgRGVmYXVsdFNwbGl0ID0gL1xcclxcbj98XFxuLztcbi8qKlxuRGlzdGluZ3Vpc2hlcyBkaWZmZXJlbnQgd2F5cyBpbiB3aGljaCBwb3NpdGlvbnMgY2FuIGJlIG1hcHBlZC5cbiovXG52YXIgTWFwTW9kZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKE1hcE1vZGUpIHtcbiAgICAvKipcbiAgICBNYXAgYSBwb3NpdGlvbiB0byBhIHZhbGlkIG5ldyBwb3NpdGlvbiwgZXZlbiB3aGVuIGl0cyBjb250ZXh0XG4gICAgd2FzIGRlbGV0ZWQuXG4gICAgKi9cbiAgICBNYXBNb2RlW01hcE1vZGVbXCJTaW1wbGVcIl0gPSAwXSA9IFwiU2ltcGxlXCI7XG4gICAgLyoqXG4gICAgUmV0dXJuIG51bGwgaWYgZGVsZXRpb24gaGFwcGVucyBhY3Jvc3MgdGhlIHBvc2l0aW9uLlxuICAgICovXG4gICAgTWFwTW9kZVtNYXBNb2RlW1wiVHJhY2tEZWxcIl0gPSAxXSA9IFwiVHJhY2tEZWxcIjtcbiAgICAvKipcbiAgICBSZXR1cm4gbnVsbCBpZiB0aGUgY2hhcmFjdGVyIF9iZWZvcmVfIHRoZSBwb3NpdGlvbiBpcyBkZWxldGVkLlxuICAgICovXG4gICAgTWFwTW9kZVtNYXBNb2RlW1wiVHJhY2tCZWZvcmVcIl0gPSAyXSA9IFwiVHJhY2tCZWZvcmVcIjtcbiAgICAvKipcbiAgICBSZXR1cm4gbnVsbCBpZiB0aGUgY2hhcmFjdGVyIF9hZnRlcl8gdGhlIHBvc2l0aW9uIGlzIGRlbGV0ZWQuXG4gICAgKi9cbiAgICBNYXBNb2RlW01hcE1vZGVbXCJUcmFja0FmdGVyXCJdID0gM10gPSBcIlRyYWNrQWZ0ZXJcIjtcbnJldHVybiBNYXBNb2RlfSkoTWFwTW9kZSB8fCAoTWFwTW9kZSA9IHt9KSk7XG4vKipcbkEgY2hhbmdlIGRlc2NyaXB0aW9uIGlzIGEgdmFyaWFudCBvZiBbY2hhbmdlIHNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5DaGFuZ2VTZXQpXG50aGF0IGRvZXNuJ3Qgc3RvcmUgdGhlIGluc2VydGVkIHRleHQuIEFzIHN1Y2gsIGl0IGNhbid0IGJlXG5hcHBsaWVkLCBidXQgaXMgY2hlYXBlciB0byBzdG9yZSBhbmQgbWFuaXB1bGF0ZS5cbiovXG5jbGFzcyBDaGFuZ2VEZXNjIHtcbiAgICAvLyBTZWN0aW9ucyBhcmUgZW5jb2RlZCBhcyBwYWlycyBvZiBpbnRlZ2Vycy4gVGhlIGZpcnN0IGlzIHRoZVxuICAgIC8vIGxlbmd0aCBpbiB0aGUgY3VycmVudCBkb2N1bWVudCwgYW5kIHRoZSBzZWNvbmQgaXMgLTEgZm9yXG4gICAgLy8gdW5hZmZlY3RlZCBzZWN0aW9ucywgYW5kIHRoZSBsZW5ndGggb2YgdGhlIHJlcGxhY2VtZW50IGNvbnRlbnRcbiAgICAvLyBvdGhlcndpc2UuIFNvIGFuIGluc2VydGlvbiB3b3VsZCBiZSAoMCwgbj4wKSwgYSBkZWxldGlvbiAobj4wLFxuICAgIC8vIDApLCBhbmQgYSByZXBsYWNlbWVudCB0d28gcG9zaXRpdmUgbnVtYmVycy5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2VjdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zZWN0aW9ucyA9IHNlY3Rpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgbGVuZ3RoIG9mIHRoZSBkb2N1bWVudCBiZWZvcmUgdGhlIGNoYW5nZS5cbiAgICAqL1xuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5zZWN0aW9uc1tpXTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGxlbmd0aCBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgdGhlIGNoYW5nZS5cbiAgICAqL1xuICAgIGdldCBuZXdMZW5ndGgoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGxldCBpbnMgPSB0aGlzLnNlY3Rpb25zW2kgKyAxXTtcbiAgICAgICAgICAgIHJlc3VsdCArPSBpbnMgPCAwID8gdGhpcy5zZWN0aW9uc1tpXSA6IGlucztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBGYWxzZSB3aGVuIHRoZXJlIGFyZSBhY3R1YWwgY2hhbmdlcyBpbiB0aGlzIHNldC5cbiAgICAqL1xuICAgIGdldCBlbXB0eSgpIHsgcmV0dXJuIHRoaXMuc2VjdGlvbnMubGVuZ3RoID09IDAgfHwgdGhpcy5zZWN0aW9ucy5sZW5ndGggPT0gMiAmJiB0aGlzLnNlY3Rpb25zWzFdIDwgMDsgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0aGUgdW5jaGFuZ2VkIHBhcnRzIGxlZnQgYnkgdGhlc2UgY2hhbmdlcy4gYHBvc0FgXG4gICAgcHJvdmlkZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSByYW5nZSBpbiB0aGUgb2xkIGRvY3VtZW50LCBgcG9zQmBcbiAgICB0aGUgbmV3IHBvc2l0aW9uIGluIHRoZSBjaGFuZ2VkIGRvY3VtZW50LlxuICAgICovXG4gICAgaXRlckdhcHMoZikge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zQSA9IDAsIHBvc0IgPSAwOyBpIDwgdGhpcy5zZWN0aW9ucy5sZW5ndGg7KSB7XG4gICAgICAgICAgICBsZXQgbGVuID0gdGhpcy5zZWN0aW9uc1tpKytdLCBpbnMgPSB0aGlzLnNlY3Rpb25zW2krK107XG4gICAgICAgICAgICBpZiAoaW5zIDwgMCkge1xuICAgICAgICAgICAgICAgIGYocG9zQSwgcG9zQiwgbGVuKTtcbiAgICAgICAgICAgICAgICBwb3NCICs9IGxlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBvc0IgKz0gaW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zQSArPSBsZW47XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSByYW5nZXMgY2hhbmdlZCBieSB0aGVzZSBjaGFuZ2VzLiAoU2VlXG4gICAgW2BDaGFuZ2VTZXQuaXRlckNoYW5nZXNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNoYW5nZVNldC5pdGVyQ2hhbmdlcykgZm9yIGFcbiAgICB2YXJpYW50IHRoYXQgYWxzbyBwcm92aWRlcyB5b3Ugd2l0aCB0aGUgaW5zZXJ0ZWQgdGV4dC4pXG4gICAgYGZyb21BYC9gdG9BYCBwcm92aWRlcyB0aGUgZXh0ZW50IG9mIHRoZSBjaGFuZ2UgaW4gdGhlIHN0YXJ0aW5nXG4gICAgZG9jdW1lbnQsIGBmcm9tQmAvYHRvQmAgdGhlIGV4dGVudCBvZiB0aGUgcmVwbGFjZW1lbnQgaW4gdGhlXG4gICAgY2hhbmdlZCBkb2N1bWVudC5cbiAgICBcbiAgICBXaGVuIGBpbmRpdmlkdWFsYCBpcyB0cnVlLCBhZGphY2VudCBjaGFuZ2VzICh3aGljaCBhcmUga2VwdFxuICAgIHNlcGFyYXRlIGZvciBbcG9zaXRpb24gbWFwcGluZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5DaGFuZ2VEZXNjLm1hcFBvcykpIGFyZVxuICAgIHJlcG9ydGVkIHNlcGFyYXRlbHkuXG4gICAgKi9cbiAgICBpdGVyQ2hhbmdlZFJhbmdlcyhmLCBpbmRpdmlkdWFsID0gZmFsc2UpIHtcbiAgICAgICAgaXRlckNoYW5nZXModGhpcywgZiwgaW5kaXZpZHVhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCBhIGRlc2NyaXB0aW9uIG9mIHRoZSBpbnZlcnRlZCBmb3JtIG9mIHRoZXNlIGNoYW5nZXMuXG4gICAgKi9cbiAgICBnZXQgaW52ZXJ0ZWREZXNjKCkge1xuICAgICAgICBsZXQgc2VjdGlvbnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnNlY3Rpb25zW2krK10sIGlucyA9IHRoaXMuc2VjdGlvbnNbaSsrXTtcbiAgICAgICAgICAgIGlmIChpbnMgPCAwKVxuICAgICAgICAgICAgICAgIHNlY3Rpb25zLnB1c2gobGVuLCBpbnMpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHNlY3Rpb25zLnB1c2goaW5zLCBsZW4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ2hhbmdlRGVzYyhzZWN0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbXB1dGUgdGhlIGNvbWJpbmVkIGVmZmVjdCBvZiBhcHBseWluZyBhbm90aGVyIHNldCBvZiBjaGFuZ2VzXG4gICAgYWZ0ZXIgdGhpcyBvbmUuIFRoZSBsZW5ndGggb2YgdGhlIGRvY3VtZW50IGFmdGVyIHRoaXMgc2V0IHNob3VsZFxuICAgIG1hdGNoIHRoZSBsZW5ndGggYmVmb3JlIGBvdGhlcmAuXG4gICAgKi9cbiAgICBjb21wb3NlRGVzYyhvdGhlcikgeyByZXR1cm4gdGhpcy5lbXB0eSA/IG90aGVyIDogb3RoZXIuZW1wdHkgPyB0aGlzIDogY29tcG9zZVNldHModGhpcywgb3RoZXIpOyB9XG4gICAgLyoqXG4gICAgTWFwIHRoaXMgZGVzY3JpcHRpb24sIHdoaWNoIHNob3VsZCBzdGFydCB3aXRoIHRoZSBzYW1lIGRvY3VtZW50XG4gICAgYXMgYG90aGVyYCwgb3ZlciBhbm90aGVyIHNldCBvZiBjaGFuZ2VzLCBzbyB0aGF0IGl0IGNhbiBiZVxuICAgIGFwcGxpZWQgYWZ0ZXIgaXQuIFdoZW4gYGJlZm9yZWAgaXMgdHJ1ZSwgbWFwIGFzIGlmIHRoZSBjaGFuZ2VzXG4gICAgaW4gYHRoaXNgIGhhcHBlbmVkIGJlZm9yZSB0aGUgb25lcyBpbiBgb3RoZXJgLlxuICAgICovXG4gICAgbWFwRGVzYyhvdGhlciwgYmVmb3JlID0gZmFsc2UpIHsgcmV0dXJuIG90aGVyLmVtcHR5ID8gdGhpcyA6IG1hcFNldCh0aGlzLCBvdGhlciwgYmVmb3JlKTsgfVxuICAgIG1hcFBvcyhwb3MsIGFzc29jID0gLTEsIG1vZGUgPSBNYXBNb2RlLlNpbXBsZSkge1xuICAgICAgICBsZXQgcG9zQSA9IDAsIHBvc0IgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOykge1xuICAgICAgICAgICAgbGV0IGxlbiA9IHRoaXMuc2VjdGlvbnNbaSsrXSwgaW5zID0gdGhpcy5zZWN0aW9uc1tpKytdLCBlbmRBID0gcG9zQSArIGxlbjtcbiAgICAgICAgICAgIGlmIChpbnMgPCAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVuZEEgPiBwb3MpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3NCICsgKHBvcyAtIHBvc0EpO1xuICAgICAgICAgICAgICAgIHBvc0IgKz0gbGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgIT0gTWFwTW9kZS5TaW1wbGUgJiYgZW5kQSA+PSBwb3MgJiZcbiAgICAgICAgICAgICAgICAgICAgKG1vZGUgPT0gTWFwTW9kZS5UcmFja0RlbCAmJiBwb3NBIDwgcG9zICYmIGVuZEEgPiBwb3MgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPT0gTWFwTW9kZS5UcmFja0JlZm9yZSAmJiBwb3NBIDwgcG9zIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlID09IE1hcE1vZGUuVHJhY2tBZnRlciAmJiBlbmRBID4gcG9zKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGVuZEEgPiBwb3MgfHwgZW5kQSA9PSBwb3MgJiYgYXNzb2MgPCAwICYmICFsZW4pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3MgPT0gcG9zQSB8fCBhc3NvYyA8IDAgPyBwb3NCIDogcG9zQiArIGlucztcbiAgICAgICAgICAgICAgICBwb3NCICs9IGlucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvc0EgPSBlbmRBO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3MgPiBwb3NBKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYFBvc2l0aW9uICR7cG9zfSBpcyBvdXQgb2YgcmFuZ2UgZm9yIGNoYW5nZXNldCBvZiBsZW5ndGggJHtwb3NBfWApO1xuICAgICAgICByZXR1cm4gcG9zQjtcbiAgICB9XG4gICAgLyoqXG4gICAgQ2hlY2sgd2hldGhlciB0aGVzZSBjaGFuZ2VzIHRvdWNoIGEgZ2l2ZW4gcmFuZ2UuIFdoZW4gb25lIG9mIHRoZVxuICAgIGNoYW5nZXMgZW50aXJlbHkgY292ZXJzIHRoZSByYW5nZSwgdGhlIHN0cmluZyBgXCJjb3ZlclwiYCBpc1xuICAgIHJldHVybmVkLlxuICAgICovXG4gICAgdG91Y2hlc1JhbmdlKGZyb20sIHRvID0gZnJvbSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoICYmIHBvcyA8PSB0bzspIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnNlY3Rpb25zW2krK10sIGlucyA9IHRoaXMuc2VjdGlvbnNbaSsrXSwgZW5kID0gcG9zICsgbGVuO1xuICAgICAgICAgICAgaWYgKGlucyA+PSAwICYmIHBvcyA8PSB0byAmJiBlbmQgPj0gZnJvbSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zIDwgZnJvbSAmJiBlbmQgPiB0byA/IFwiY292ZXJcIiA6IHRydWU7XG4gICAgICAgICAgICBwb3MgPSBlbmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnNlY3Rpb25zW2krK10sIGlucyA9IHRoaXMuc2VjdGlvbnNbaSsrXTtcbiAgICAgICAgICAgIHJlc3VsdCArPSAocmVzdWx0ID8gXCIgXCIgOiBcIlwiKSArIGxlbiArIChpbnMgPj0gMCA/IFwiOlwiICsgaW5zIDogXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgU2VyaWFsaXplIHRoaXMgY2hhbmdlIGRlc2MgdG8gYSBKU09OLXJlcHJlc2VudGFibGUgdmFsdWUuXG4gICAgKi9cbiAgICB0b0pTT04oKSB7IHJldHVybiB0aGlzLnNlY3Rpb25zOyB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgY2hhbmdlIGRlc2MgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiAoYXMgcHJvZHVjZWRcbiAgICBieSBbYHRvSlNPTmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ2hhbmdlRGVzYy50b0pTT04pLlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24pIHx8IGpzb24ubGVuZ3RoICUgMiB8fCBqc29uLnNvbWUoYSA9PiB0eXBlb2YgYSAhPSBcIm51bWJlclwiKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBKU09OIHJlcHJlc2VudGF0aW9uIG9mIENoYW5nZURlc2NcIik7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhbmdlRGVzYyhqc29uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKHNlY3Rpb25zKSB7IHJldHVybiBuZXcgQ2hhbmdlRGVzYyhzZWN0aW9ucyk7IH1cbn1cbi8qKlxuQSBjaGFuZ2Ugc2V0IHJlcHJlc2VudHMgYSBncm91cCBvZiBtb2RpZmljYXRpb25zIHRvIGEgZG9jdW1lbnQuIEl0XG5zdG9yZXMgdGhlIGRvY3VtZW50IGxlbmd0aCwgYW5kIGNhbiBvbmx5IGJlIGFwcGxpZWQgdG8gZG9jdW1lbnRzXG53aXRoIGV4YWN0bHkgdGhhdCBsZW5ndGguXG4qL1xuY2xhc3MgQ2hhbmdlU2V0IGV4dGVuZHMgQ2hhbmdlRGVzYyB7XG4gICAgY29uc3RydWN0b3Ioc2VjdGlvbnMsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgaW5zZXJ0ZWQpIHtcbiAgICAgICAgc3VwZXIoc2VjdGlvbnMpO1xuICAgICAgICB0aGlzLmluc2VydGVkID0gaW5zZXJ0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEFwcGx5IHRoZSBjaGFuZ2VzIHRvIGEgZG9jdW1lbnQsIHJldHVybmluZyB0aGUgbW9kaWZpZWRcbiAgICBkb2N1bWVudC5cbiAgICAqL1xuICAgIGFwcGx5KGRvYykge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggIT0gZG9jLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQXBwbHlpbmcgY2hhbmdlIHNldCB0byBhIGRvY3VtZW50IHdpdGggdGhlIHdyb25nIGxlbmd0aFwiKTtcbiAgICAgICAgaXRlckNoYW5nZXModGhpcywgKGZyb21BLCB0b0EsIGZyb21CLCBfdG9CLCB0ZXh0KSA9PiBkb2MgPSBkb2MucmVwbGFjZShmcm9tQiwgZnJvbUIgKyAodG9BIC0gZnJvbUEpLCB0ZXh0KSwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gZG9jO1xuICAgIH1cbiAgICBtYXBEZXNjKG90aGVyLCBiZWZvcmUgPSBmYWxzZSkgeyByZXR1cm4gbWFwU2V0KHRoaXMsIG90aGVyLCBiZWZvcmUsIHRydWUpOyB9XG4gICAgLyoqXG4gICAgR2l2ZW4gdGhlIGRvY3VtZW50IGFzIGl0IGV4aXN0ZWQgX2JlZm9yZV8gdGhlIGNoYW5nZXMsIHJldHVybiBhXG4gICAgY2hhbmdlIHNldCB0aGF0IHJlcHJlc2VudHMgdGhlIGludmVyc2Ugb2YgdGhpcyBzZXQsIHdoaWNoIGNvdWxkXG4gICAgYmUgdXNlZCB0byBnbyBmcm9tIHRoZSBkb2N1bWVudCBjcmVhdGVkIGJ5IHRoZSBjaGFuZ2VzIGJhY2sgdG9cbiAgICB0aGUgZG9jdW1lbnQgYXMgaXQgZXhpc3RlZCBiZWZvcmUgdGhlIGNoYW5nZXMuXG4gICAgKi9cbiAgICBpbnZlcnQoZG9jKSB7XG4gICAgICAgIGxldCBzZWN0aW9ucyA9IHRoaXMuc2VjdGlvbnMuc2xpY2UoKSwgaW5zZXJ0ZWQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgbGV0IGxlbiA9IHNlY3Rpb25zW2ldLCBpbnMgPSBzZWN0aW9uc1tpICsgMV07XG4gICAgICAgICAgICBpZiAoaW5zID49IDApIHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uc1tpXSA9IGlucztcbiAgICAgICAgICAgICAgICBzZWN0aW9uc1tpICsgMV0gPSBsZW47XG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gaSA+PiAxO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpbnNlcnRlZC5sZW5ndGggPCBpbmRleClcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ZWQucHVzaChUZXh0LmVtcHR5KTtcbiAgICAgICAgICAgICAgICBpbnNlcnRlZC5wdXNoKGxlbiA/IGRvYy5zbGljZShwb3MsIHBvcyArIGxlbikgOiBUZXh0LmVtcHR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyArPSBsZW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VTZXQoc2VjdGlvbnMsIGluc2VydGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tYmluZSB0d28gc3Vic2VxdWVudCBjaGFuZ2Ugc2V0cyBpbnRvIGEgc2luZ2xlIHNldC4gYG90aGVyYFxuICAgIG11c3Qgc3RhcnQgaW4gdGhlIGRvY3VtZW50IHByb2R1Y2VkIGJ5IGB0aGlzYC4gSWYgYHRoaXNgIGdvZXNcbiAgICBgZG9jQWAgXHUyMTkyIGBkb2NCYCBhbmQgYG90aGVyYCByZXByZXNlbnRzIGBkb2NCYCBcdTIxOTIgYGRvY0NgLCB0aGVcbiAgICByZXR1cm5lZCB2YWx1ZSB3aWxsIHJlcHJlc2VudCB0aGUgY2hhbmdlIGBkb2NBYCBcdTIxOTIgYGRvY0NgLlxuICAgICovXG4gICAgY29tcG9zZShvdGhlcikgeyByZXR1cm4gdGhpcy5lbXB0eSA/IG90aGVyIDogb3RoZXIuZW1wdHkgPyB0aGlzIDogY29tcG9zZVNldHModGhpcywgb3RoZXIsIHRydWUpOyB9XG4gICAgLyoqXG4gICAgR2l2ZW4gYW5vdGhlciBjaGFuZ2Ugc2V0IHN0YXJ0aW5nIGluIHRoZSBzYW1lIGRvY3VtZW50LCBtYXBzIHRoaXNcbiAgICBjaGFuZ2Ugc2V0IG92ZXIgdGhlIG90aGVyLCBwcm9kdWNpbmcgYSBuZXcgY2hhbmdlIHNldCB0aGF0IGNhbiBiZVxuICAgIGFwcGxpZWQgdG8gdGhlIGRvY3VtZW50IHByb2R1Y2VkIGJ5IGFwcGx5aW5nIGBvdGhlcmAuIFdoZW5cbiAgICBgYmVmb3JlYCBpcyBgdHJ1ZWAsIG9yZGVyIGNoYW5nZXMgYXMgaWYgYHRoaXNgIGNvbWVzIGJlZm9yZVxuICAgIGBvdGhlcmAsIG90aGVyd2lzZSAodGhlIGRlZmF1bHQpIHRyZWF0IGBvdGhlcmAgYXMgY29taW5nIGZpcnN0LlxuICAgIFxuICAgIEdpdmVuIHR3byBjaGFuZ2VzIGBBYCBhbmQgYEJgLCBgQS5jb21wb3NlKEIubWFwKEEpKWAgYW5kXG4gICAgYEIuY29tcG9zZShBLm1hcChCLCB0cnVlKSlgIHdpbGwgcHJvZHVjZSB0aGUgc2FtZSBkb2N1bWVudC4gVGhpc1xuICAgIHByb3ZpZGVzIGEgYmFzaWMgZm9ybSBvZiBbb3BlcmF0aW9uYWxcbiAgICB0cmFuc2Zvcm1hdGlvbl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvT3BlcmF0aW9uYWxfdHJhbnNmb3JtYXRpb24pLFxuICAgIGFuZCBjYW4gYmUgdXNlZCBmb3IgY29sbGFib3JhdGl2ZSBlZGl0aW5nLlxuICAgICovXG4gICAgbWFwKG90aGVyLCBiZWZvcmUgPSBmYWxzZSkgeyByZXR1cm4gb3RoZXIuZW1wdHkgPyB0aGlzIDogbWFwU2V0KHRoaXMsIG90aGVyLCBiZWZvcmUsIHRydWUpOyB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSBjaGFuZ2VkIHJhbmdlcyBpbiB0aGUgZG9jdW1lbnQsIGNhbGxpbmcgYGZgIGZvclxuICAgIGVhY2gsIHdpdGggdGhlIHJhbmdlIGluIHRoZSBvcmlnaW5hbCBkb2N1bWVudCAoYGZyb21BYC1gdG9BYClcbiAgICBhbmQgdGhlIHJhbmdlIHRoYXQgcmVwbGFjZXMgaXQgaW4gdGhlIG5ldyBkb2N1bWVudFxuICAgIChgZnJvbUJgLWB0b0JgKS5cbiAgICBcbiAgICBXaGVuIGBpbmRpdmlkdWFsYCBpcyB0cnVlLCBhZGphY2VudCBjaGFuZ2VzIGFyZSByZXBvcnRlZFxuICAgIHNlcGFyYXRlbHkuXG4gICAgKi9cbiAgICBpdGVyQ2hhbmdlcyhmLCBpbmRpdmlkdWFsID0gZmFsc2UpIHtcbiAgICAgICAgaXRlckNoYW5nZXModGhpcywgZiwgaW5kaXZpZHVhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCBhIFtjaGFuZ2UgZGVzY3JpcHRpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ2hhbmdlRGVzYykgZm9yIHRoaXMgY2hhbmdlXG4gICAgc2V0LlxuICAgICovXG4gICAgZ2V0IGRlc2MoKSB7IHJldHVybiBDaGFuZ2VEZXNjLmNyZWF0ZSh0aGlzLnNlY3Rpb25zKTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZmlsdGVyKHJhbmdlcykge1xuICAgICAgICBsZXQgcmVzdWx0U2VjdGlvbnMgPSBbXSwgcmVzdWx0SW5zZXJ0ZWQgPSBbXSwgZmlsdGVyZWRTZWN0aW9ucyA9IFtdO1xuICAgICAgICBsZXQgaXRlciA9IG5ldyBTZWN0aW9uSXRlcih0aGlzKTtcbiAgICAgICAgZG9uZTogZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7Oykge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBpID09IHJhbmdlcy5sZW5ndGggPyAxZTkgOiByYW5nZXNbaSsrXTtcbiAgICAgICAgICAgIHdoaWxlIChwb3MgPCBuZXh0IHx8IHBvcyA9PSBuZXh0ICYmIGl0ZXIubGVuID09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlci5kb25lKVxuICAgICAgICAgICAgICAgICAgICBicmVhayBkb25lO1xuICAgICAgICAgICAgICAgIGxldCBsZW4gPSBNYXRoLm1pbihpdGVyLmxlbiwgbmV4dCAtIHBvcyk7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihmaWx0ZXJlZFNlY3Rpb25zLCBsZW4sIC0xKTtcbiAgICAgICAgICAgICAgICBsZXQgaW5zID0gaXRlci5pbnMgPT0gLTEgPyAtMSA6IGl0ZXIub2ZmID09IDAgPyBpdGVyLmlucyA6IDA7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihyZXN1bHRTZWN0aW9ucywgbGVuLCBpbnMpO1xuICAgICAgICAgICAgICAgIGlmIChpbnMgPiAwKVxuICAgICAgICAgICAgICAgICAgICBhZGRJbnNlcnQocmVzdWx0SW5zZXJ0ZWQsIHJlc3VsdFNlY3Rpb25zLCBpdGVyLnRleHQpO1xuICAgICAgICAgICAgICAgIGl0ZXIuZm9yd2FyZChsZW4pO1xuICAgICAgICAgICAgICAgIHBvcyArPSBsZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZW5kID0gcmFuZ2VzW2krK107XG4gICAgICAgICAgICB3aGlsZSAocG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZXIuZG9uZSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWsgZG9uZTtcbiAgICAgICAgICAgICAgICBsZXQgbGVuID0gTWF0aC5taW4oaXRlci5sZW4sIGVuZCAtIHBvcyk7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihyZXN1bHRTZWN0aW9ucywgbGVuLCAtMSk7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihmaWx0ZXJlZFNlY3Rpb25zLCBsZW4sIGl0ZXIuaW5zID09IC0xID8gLTEgOiBpdGVyLm9mZiA9PSAwID8gaXRlci5pbnMgOiAwKTtcbiAgICAgICAgICAgICAgICBpdGVyLmZvcndhcmQobGVuKTtcbiAgICAgICAgICAgICAgICBwb3MgKz0gbGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGNoYW5nZXM6IG5ldyBDaGFuZ2VTZXQocmVzdWx0U2VjdGlvbnMsIHJlc3VsdEluc2VydGVkKSxcbiAgICAgICAgICAgIGZpbHRlcmVkOiBDaGFuZ2VEZXNjLmNyZWF0ZShmaWx0ZXJlZFNlY3Rpb25zKSB9O1xuICAgIH1cbiAgICAvKipcbiAgICBTZXJpYWxpemUgdGhpcyBjaGFuZ2Ugc2V0IHRvIGEgSlNPTi1yZXByZXNlbnRhYmxlIHZhbHVlLlxuICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBsZXQgcGFydHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICBsZXQgbGVuID0gdGhpcy5zZWN0aW9uc1tpXSwgaW5zID0gdGhpcy5zZWN0aW9uc1tpICsgMV07XG4gICAgICAgICAgICBpZiAoaW5zIDwgMClcbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKGxlbik7XG4gICAgICAgICAgICBlbHNlIGlmIChpbnMgPT0gMClcbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKFtsZW5dKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKFtsZW5dLmNvbmNhdCh0aGlzLmluc2VydGVkW2kgPj4gMV0udG9KU09OKCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFydHM7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGNoYW5nZSBzZXQgZm9yIHRoZSBnaXZlbiBjaGFuZ2VzLCBmb3IgYSBkb2N1bWVudCBvZiB0aGVcbiAgICBnaXZlbiBsZW5ndGgsIHVzaW5nIGBsaW5lU2VwYCBhcyBsaW5lIHNlcGFyYXRvci5cbiAgICAqL1xuICAgIHN0YXRpYyBvZihjaGFuZ2VzLCBsZW5ndGgsIGxpbmVTZXApIHtcbiAgICAgICAgbGV0IHNlY3Rpb25zID0gW10sIGluc2VydGVkID0gW10sIHBvcyA9IDA7XG4gICAgICAgIGxldCB0b3RhbCA9IG51bGw7XG4gICAgICAgIGZ1bmN0aW9uIGZsdXNoKGZvcmNlID0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmICghZm9yY2UgJiYgIXNlY3Rpb25zLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAocG9zIDwgbGVuZ3RoKVxuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGxlbmd0aCAtIHBvcywgLTEpO1xuICAgICAgICAgICAgbGV0IHNldCA9IG5ldyBDaGFuZ2VTZXQoc2VjdGlvbnMsIGluc2VydGVkKTtcbiAgICAgICAgICAgIHRvdGFsID0gdG90YWwgPyB0b3RhbC5jb21wb3NlKHNldC5tYXAodG90YWwpKSA6IHNldDtcbiAgICAgICAgICAgIHNlY3Rpb25zID0gW107XG4gICAgICAgICAgICBpbnNlcnRlZCA9IFtdO1xuICAgICAgICAgICAgcG9zID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzKHNwZWMpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNwZWMpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc3ViIG9mIHNwZWMpXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3Moc3ViKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNwZWMgaW5zdGFuY2VvZiBDaGFuZ2VTZXQpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3BlYy5sZW5ndGggIT0gbGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgTWlzbWF0Y2hlZCBjaGFuZ2Ugc2V0IGxlbmd0aCAoZ290ICR7c3BlYy5sZW5ndGh9LCBleHBlY3RlZCAke2xlbmd0aH0pYCk7XG4gICAgICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgICAgICAgICB0b3RhbCA9IHRvdGFsID8gdG90YWwuY29tcG9zZShzcGVjLm1hcCh0b3RhbCkpIDogc3BlYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB7IGZyb20sIHRvID0gZnJvbSwgaW5zZXJ0IH0gPSBzcGVjO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tID4gdG8gfHwgZnJvbSA8IDAgfHwgdG8gPiBsZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIGNoYW5nZSByYW5nZSAke2Zyb219IHRvICR7dG99IChpbiBkb2Mgb2YgbGVuZ3RoICR7bGVuZ3RofSlgKTtcbiAgICAgICAgICAgICAgICBsZXQgaW5zVGV4dCA9ICFpbnNlcnQgPyBUZXh0LmVtcHR5IDogdHlwZW9mIGluc2VydCA9PSBcInN0cmluZ1wiID8gVGV4dC5vZihpbnNlcnQuc3BsaXQobGluZVNlcCB8fCBEZWZhdWx0U3BsaXQpKSA6IGluc2VydDtcbiAgICAgICAgICAgICAgICBsZXQgaW5zTGVuID0gaW5zVGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGZyb20gPT0gdG8gJiYgaW5zTGVuID09IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA8IHBvcylcbiAgICAgICAgICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA+IHBvcylcbiAgICAgICAgICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgZnJvbSAtIHBvcywgLTEpO1xuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIHRvIC0gZnJvbSwgaW5zTGVuKTtcbiAgICAgICAgICAgICAgICBhZGRJbnNlcnQoaW5zZXJ0ZWQsIHNlY3Rpb25zLCBpbnNUZXh0KTtcbiAgICAgICAgICAgICAgICBwb3MgPSB0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm9jZXNzKGNoYW5nZXMpO1xuICAgICAgICBmbHVzaCghdG90YWwpO1xuICAgICAgICByZXR1cm4gdG90YWw7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBlbXB0eSBjaGFuZ2VzZXQgb2YgdGhlIGdpdmVuIGxlbmd0aC5cbiAgICAqL1xuICAgIHN0YXRpYyBlbXB0eShsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VTZXQobGVuZ3RoID8gW2xlbmd0aCwgLTFdIDogW10sIFtdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgY2hhbmdlc2V0IGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gKGFzIHByb2R1Y2VkIGJ5XG4gICAgW2B0b0pTT05gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNoYW5nZVNldC50b0pTT04pLlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24pKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIEpTT04gcmVwcmVzZW50YXRpb24gb2YgQ2hhbmdlU2V0XCIpO1xuICAgICAgICBsZXQgc2VjdGlvbnMgPSBbXSwgaW5zZXJ0ZWQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqc29uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcGFydCA9IGpzb25baV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcnQgPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zLnB1c2gocGFydCwgLTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocGFydCkgfHwgdHlwZW9mIHBhcnRbMF0gIT0gXCJudW1iZXJcIiB8fCBwYXJ0LnNvbWUoKGUsIGkpID0+IGkgJiYgdHlwZW9mIGUgIT0gXCJzdHJpbmdcIikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBDaGFuZ2VTZXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJ0Lmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgc2VjdGlvbnMucHVzaChwYXJ0WzBdLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHdoaWxlIChpbnNlcnRlZC5sZW5ndGggPCBpKVxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRlZC5wdXNoKFRleHQuZW1wdHkpO1xuICAgICAgICAgICAgICAgIGluc2VydGVkW2ldID0gVGV4dC5vZihwYXJ0LnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICBzZWN0aW9ucy5wdXNoKHBhcnRbMF0sIGluc2VydGVkW2ldLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VTZXQoc2VjdGlvbnMsIGluc2VydGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlU2V0KHNlY3Rpb25zLCBpbnNlcnRlZCkge1xuICAgICAgICByZXR1cm4gbmV3IENoYW5nZVNldChzZWN0aW9ucywgaW5zZXJ0ZWQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGxlbiwgaW5zLCBmb3JjZUpvaW4gPSBmYWxzZSkge1xuICAgIGlmIChsZW4gPT0gMCAmJiBpbnMgPD0gMClcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCBsYXN0ID0gc2VjdGlvbnMubGVuZ3RoIC0gMjtcbiAgICBpZiAobGFzdCA+PSAwICYmIGlucyA8PSAwICYmIGlucyA9PSBzZWN0aW9uc1tsYXN0ICsgMV0pXG4gICAgICAgIHNlY3Rpb25zW2xhc3RdICs9IGxlbjtcbiAgICBlbHNlIGlmIChsYXN0ID49IDAgJiYgbGVuID09IDAgJiYgc2VjdGlvbnNbbGFzdF0gPT0gMClcbiAgICAgICAgc2VjdGlvbnNbbGFzdCArIDFdICs9IGlucztcbiAgICBlbHNlIGlmIChmb3JjZUpvaW4pIHtcbiAgICAgICAgc2VjdGlvbnNbbGFzdF0gKz0gbGVuO1xuICAgICAgICBzZWN0aW9uc1tsYXN0ICsgMV0gKz0gaW5zO1xuICAgIH1cbiAgICBlbHNlXG4gICAgICAgIHNlY3Rpb25zLnB1c2gobGVuLCBpbnMpO1xufVxuZnVuY3Rpb24gYWRkSW5zZXJ0KHZhbHVlcywgc2VjdGlvbnMsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlLmxlbmd0aCA9PSAwKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IGluZGV4ID0gKHNlY3Rpb25zLmxlbmd0aCAtIDIpID4+IDE7XG4gICAgaWYgKGluZGV4IDwgdmFsdWVzLmxlbmd0aCkge1xuICAgICAgICB2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdID0gdmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXS5hcHBlbmQodmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgd2hpbGUgKHZhbHVlcy5sZW5ndGggPCBpbmRleClcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKFRleHQuZW1wdHkpO1xuICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXRlckNoYW5nZXMoZGVzYywgZiwgaW5kaXZpZHVhbCkge1xuICAgIGxldCBpbnNlcnRlZCA9IGRlc2MuaW5zZXJ0ZWQ7XG4gICAgZm9yIChsZXQgcG9zQSA9IDAsIHBvc0IgPSAwLCBpID0gMDsgaSA8IGRlc2Muc2VjdGlvbnMubGVuZ3RoOykge1xuICAgICAgICBsZXQgbGVuID0gZGVzYy5zZWN0aW9uc1tpKytdLCBpbnMgPSBkZXNjLnNlY3Rpb25zW2krK107XG4gICAgICAgIGlmIChpbnMgPCAwKSB7XG4gICAgICAgICAgICBwb3NBICs9IGxlbjtcbiAgICAgICAgICAgIHBvc0IgKz0gbGVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGVuZEEgPSBwb3NBLCBlbmRCID0gcG9zQiwgdGV4dCA9IFRleHQuZW1wdHk7XG4gICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgZW5kQSArPSBsZW47XG4gICAgICAgICAgICAgICAgZW5kQiArPSBpbnM7XG4gICAgICAgICAgICAgICAgaWYgKGlucyAmJiBpbnNlcnRlZClcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRleHQuYXBwZW5kKGluc2VydGVkWyhpIC0gMikgPj4gMV0pO1xuICAgICAgICAgICAgICAgIGlmIChpbmRpdmlkdWFsIHx8IGkgPT0gZGVzYy5zZWN0aW9ucy5sZW5ndGggfHwgZGVzYy5zZWN0aW9uc1tpICsgMV0gPCAwKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBsZW4gPSBkZXNjLnNlY3Rpb25zW2krK107XG4gICAgICAgICAgICAgICAgaW5zID0gZGVzYy5zZWN0aW9uc1tpKytdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZihwb3NBLCBlbmRBLCBwb3NCLCBlbmRCLCB0ZXh0KTtcbiAgICAgICAgICAgIHBvc0EgPSBlbmRBO1xuICAgICAgICAgICAgcG9zQiA9IGVuZEI7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBtYXBTZXQoc2V0QSwgc2V0QiwgYmVmb3JlLCBta1NldCA9IGZhbHNlKSB7XG4gICAgLy8gUHJvZHVjZSBhIGNvcHkgb2Ygc2V0QSB0aGF0IGFwcGxpZXMgdG8gdGhlIGRvY3VtZW50IGFmdGVyIHNldEJcbiAgICAvLyBoYXMgYmVlbiBhcHBsaWVkIChhc3N1bWluZyBib3RoIHN0YXJ0IGF0IHRoZSBzYW1lIGRvY3VtZW50KS5cbiAgICBsZXQgc2VjdGlvbnMgPSBbXSwgaW5zZXJ0ID0gbWtTZXQgPyBbXSA6IG51bGw7XG4gICAgbGV0IGEgPSBuZXcgU2VjdGlvbkl0ZXIoc2V0QSksIGIgPSBuZXcgU2VjdGlvbkl0ZXIoc2V0Qik7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGJvdGggc2V0cyBpbiBwYXJhbGxlbC4gaW5zZXJ0ZWQgdHJhY2tzLCBmb3IgY2hhbmdlc1xuICAgIC8vIGluIEEgdGhhdCBoYXZlIHRvIGJlIHByb2Nlc3NlZCBwaWVjZS1ieS1waWVjZSwgd2hldGhlciB0aGVpclxuICAgIC8vIGNvbnRlbnQgaGFzIGJlZW4gaW5zZXJ0ZWQgYWxyZWFkeSwgYW5kIHJlZmVycyB0byB0aGUgc2VjdGlvblxuICAgIC8vIGluZGV4LlxuICAgIGZvciAobGV0IGluc2VydGVkID0gLTE7Oykge1xuICAgICAgICBpZiAoYS5kb25lICYmIGIubGVuIHx8IGIuZG9uZSAmJiBhLmxlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzbWF0Y2hlZCBjaGFuZ2Ugc2V0IGxlbmd0aHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYS5pbnMgPT0gLTEgJiYgYi5pbnMgPT0gLTEpIHtcbiAgICAgICAgICAgIC8vIE1vdmUgYWNyb3NzIHJhbmdlcyBza2lwcGVkIGJ5IGJvdGggc2V0cy5cbiAgICAgICAgICAgIGxldCBsZW4gPSBNYXRoLm1pbihhLmxlbiwgYi5sZW4pO1xuICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgbGVuLCAtMSk7XG4gICAgICAgICAgICBhLmZvcndhcmQobGVuKTtcbiAgICAgICAgICAgIGIuZm9yd2FyZChsZW4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGIuaW5zID49IDAgJiYgKGEuaW5zIDwgMCB8fCBpbnNlcnRlZCA9PSBhLmkgfHwgYS5vZmYgPT0gMCAmJiAoYi5sZW4gPCBhLmxlbiB8fCBiLmxlbiA9PSBhLmxlbiAmJiAhYmVmb3JlKSkpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBjaGFuZ2UgaW4gQiB0aGF0IGNvbWVzIGJlZm9yZSB0aGUgbmV4dCBjaGFuZ2UgaW5cbiAgICAgICAgICAgIC8vIEEgKG9yZGVyZWQgYnkgc3RhcnQgcG9zLCB0aGVuIGxlbiwgdGhlbiBiZWZvcmUgZmxhZyksIHNraXBcbiAgICAgICAgICAgIC8vIHRoYXQgKGFuZCBwcm9jZXNzIGFueSBjaGFuZ2VzIGluIEEgaXQgY292ZXJzKS5cbiAgICAgICAgICAgIGxldCBsZW4gPSBiLmxlbjtcbiAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGIuaW5zLCAtMSk7XG4gICAgICAgICAgICB3aGlsZSAobGVuKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBpZWNlID0gTWF0aC5taW4oYS5sZW4sIGxlbik7XG4gICAgICAgICAgICAgICAgaWYgKGEuaW5zID49IDAgJiYgaW5zZXJ0ZWQgPCBhLmkgJiYgYS5sZW4gPD0gcGllY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgMCwgYS5pbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0KVxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkSW5zZXJ0KGluc2VydCwgc2VjdGlvbnMsIGEudGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGluc2VydGVkID0gYS5pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhLmZvcndhcmQocGllY2UpO1xuICAgICAgICAgICAgICAgIGxlbiAtPSBwaWVjZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGIubmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGEuaW5zID49IDApIHtcbiAgICAgICAgICAgIC8vIFByb2Nlc3MgdGhlIHBhcnQgb2YgYSBjaGFuZ2UgaW4gQSB1cCB0byB0aGUgc3RhcnQgb2YgdGhlIG5leHRcbiAgICAgICAgICAgIC8vIG5vbi1kZWxldGlvbiBjaGFuZ2UgaW4gQiAoaWYgb3ZlcmxhcHBpbmcpLlxuICAgICAgICAgICAgbGV0IGxlbiA9IDAsIGxlZnQgPSBhLmxlbjtcbiAgICAgICAgICAgIHdoaWxlIChsZWZ0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGIuaW5zID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwaWVjZSA9IE1hdGgubWluKGxlZnQsIGIubGVuKTtcbiAgICAgICAgICAgICAgICAgICAgbGVuICs9IHBpZWNlO1xuICAgICAgICAgICAgICAgICAgICBsZWZ0IC09IHBpZWNlO1xuICAgICAgICAgICAgICAgICAgICBiLmZvcndhcmQocGllY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChiLmlucyA9PSAwICYmIGIubGVuIDwgbGVmdCkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0IC09IGIubGVuO1xuICAgICAgICAgICAgICAgICAgICBiLm5leHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGxlbiwgaW5zZXJ0ZWQgPCBhLmkgPyBhLmlucyA6IDApO1xuICAgICAgICAgICAgaWYgKGluc2VydCAmJiBpbnNlcnRlZCA8IGEuaSlcbiAgICAgICAgICAgICAgICBhZGRJbnNlcnQoaW5zZXJ0LCBzZWN0aW9ucywgYS50ZXh0KTtcbiAgICAgICAgICAgIGluc2VydGVkID0gYS5pO1xuICAgICAgICAgICAgYS5mb3J3YXJkKGEubGVuIC0gbGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYS5kb25lICYmIGIuZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIGluc2VydCA/IENoYW5nZVNldC5jcmVhdGVTZXQoc2VjdGlvbnMsIGluc2VydCkgOiBDaGFuZ2VEZXNjLmNyZWF0ZShzZWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNtYXRjaGVkIGNoYW5nZSBzZXQgbGVuZ3Roc1wiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXBvc2VTZXRzKHNldEEsIHNldEIsIG1rU2V0ID0gZmFsc2UpIHtcbiAgICBsZXQgc2VjdGlvbnMgPSBbXTtcbiAgICBsZXQgaW5zZXJ0ID0gbWtTZXQgPyBbXSA6IG51bGw7XG4gICAgbGV0IGEgPSBuZXcgU2VjdGlvbkl0ZXIoc2V0QSksIGIgPSBuZXcgU2VjdGlvbkl0ZXIoc2V0Qik7XG4gICAgZm9yIChsZXQgb3BlbiA9IGZhbHNlOzspIHtcbiAgICAgICAgaWYgKGEuZG9uZSAmJiBiLmRvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnNlcnQgPyBDaGFuZ2VTZXQuY3JlYXRlU2V0KHNlY3Rpb25zLCBpbnNlcnQpIDogQ2hhbmdlRGVzYy5jcmVhdGUoc2VjdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGEuaW5zID09IDApIHsgLy8gRGVsZXRpb24gaW4gQVxuICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgYS5sZW4sIDAsIG9wZW4pO1xuICAgICAgICAgICAgYS5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYi5sZW4gPT0gMCAmJiAhYi5kb25lKSB7IC8vIEluc2VydGlvbiBpbiBCXG4gICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCAwLCBiLmlucywgb3Blbik7XG4gICAgICAgICAgICBpZiAoaW5zZXJ0KVxuICAgICAgICAgICAgICAgIGFkZEluc2VydChpbnNlcnQsIHNlY3Rpb25zLCBiLnRleHQpO1xuICAgICAgICAgICAgYi5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYS5kb25lIHx8IGIuZG9uZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzbWF0Y2hlZCBjaGFuZ2Ugc2V0IGxlbmd0aHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbGVuID0gTWF0aC5taW4oYS5sZW4yLCBiLmxlbiksIHNlY3Rpb25MZW4gPSBzZWN0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoYS5pbnMgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5zQiA9IGIuaW5zID09IC0xID8gLTEgOiBiLm9mZiA/IDAgOiBiLmlucztcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCBsZW4sIGluc0IsIG9wZW4pO1xuICAgICAgICAgICAgICAgIGlmIChpbnNlcnQgJiYgaW5zQilcbiAgICAgICAgICAgICAgICAgICAgYWRkSW5zZXJ0KGluc2VydCwgc2VjdGlvbnMsIGIudGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChiLmlucyA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGEub2ZmID8gMCA6IGEubGVuLCBsZW4sIG9wZW4pO1xuICAgICAgICAgICAgICAgIGlmIChpbnNlcnQpXG4gICAgICAgICAgICAgICAgICAgIGFkZEluc2VydChpbnNlcnQsIHNlY3Rpb25zLCBhLnRleHRCaXQobGVuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCBhLm9mZiA/IDAgOiBhLmxlbiwgYi5vZmYgPyAwIDogYi5pbnMsIG9wZW4pO1xuICAgICAgICAgICAgICAgIGlmIChpbnNlcnQgJiYgIWIub2ZmKVxuICAgICAgICAgICAgICAgICAgICBhZGRJbnNlcnQoaW5zZXJ0LCBzZWN0aW9ucywgYi50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wZW4gPSAoYS5pbnMgPiBsZW4gfHwgYi5pbnMgPj0gMCAmJiBiLmxlbiA+IGxlbikgJiYgKG9wZW4gfHwgc2VjdGlvbnMubGVuZ3RoID4gc2VjdGlvbkxlbik7XG4gICAgICAgICAgICBhLmZvcndhcmQyKGxlbik7XG4gICAgICAgICAgICBiLmZvcndhcmQobGVuKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIFNlY3Rpb25JdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihzZXQpIHtcbiAgICAgICAgdGhpcy5zZXQgPSBzZXQ7XG4gICAgICAgIHRoaXMuaSA9IDA7XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICBsZXQgeyBzZWN0aW9ucyB9ID0gdGhpcy5zZXQ7XG4gICAgICAgIGlmICh0aGlzLmkgPCBzZWN0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMubGVuID0gc2VjdGlvbnNbdGhpcy5pKytdO1xuICAgICAgICAgICAgdGhpcy5pbnMgPSBzZWN0aW9uc1t0aGlzLmkrK107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxlbiA9IDA7XG4gICAgICAgICAgICB0aGlzLmlucyA9IC0yO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2ZmID0gMDtcbiAgICB9XG4gICAgZ2V0IGRvbmUoKSB7IHJldHVybiB0aGlzLmlucyA9PSAtMjsgfVxuICAgIGdldCBsZW4yKCkgeyByZXR1cm4gdGhpcy5pbnMgPCAwID8gdGhpcy5sZW4gOiB0aGlzLmluczsgfVxuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICBsZXQgeyBpbnNlcnRlZCB9ID0gdGhpcy5zZXQsIGluZGV4ID0gKHRoaXMuaSAtIDIpID4+IDE7XG4gICAgICAgIHJldHVybiBpbmRleCA+PSBpbnNlcnRlZC5sZW5ndGggPyBUZXh0LmVtcHR5IDogaW5zZXJ0ZWRbaW5kZXhdO1xuICAgIH1cbiAgICB0ZXh0Qml0KGxlbikge1xuICAgICAgICBsZXQgeyBpbnNlcnRlZCB9ID0gdGhpcy5zZXQsIGluZGV4ID0gKHRoaXMuaSAtIDIpID4+IDE7XG4gICAgICAgIHJldHVybiBpbmRleCA+PSBpbnNlcnRlZC5sZW5ndGggJiYgIWxlbiA/IFRleHQuZW1wdHlcbiAgICAgICAgICAgIDogaW5zZXJ0ZWRbaW5kZXhdLnNsaWNlKHRoaXMub2ZmLCBsZW4gPT0gbnVsbCA/IHVuZGVmaW5lZCA6IHRoaXMub2ZmICsgbGVuKTtcbiAgICB9XG4gICAgZm9yd2FyZChsZW4pIHtcbiAgICAgICAgaWYgKGxlbiA9PSB0aGlzLmxlbilcbiAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGVuIC09IGxlbjtcbiAgICAgICAgICAgIHRoaXMub2ZmICs9IGxlbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3J3YXJkMihsZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuaW5zID09IC0xKVxuICAgICAgICAgICAgdGhpcy5mb3J3YXJkKGxlbik7XG4gICAgICAgIGVsc2UgaWYgKGxlbiA9PSB0aGlzLmlucylcbiAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW5zIC09IGxlbjtcbiAgICAgICAgICAgIHRoaXMub2ZmICs9IGxlbjtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG5BIHNpbmdsZSBzZWxlY3Rpb24gcmFuZ2UuIFdoZW5cbltgYWxsb3dNdWx0aXBsZVNlbGVjdGlvbnNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXmFsbG93TXVsdGlwbGVTZWxlY3Rpb25zKVxuaXMgZW5hYmxlZCwgYSBbc2VsZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclNlbGVjdGlvbikgbWF5IGhvbGRcbm11bHRpcGxlIHJhbmdlcy4gQnkgZGVmYXVsdCwgc2VsZWN0aW9ucyBob2xkIGV4YWN0bHkgb25lIHJhbmdlLlxuKi9cbmNsYXNzIFNlbGVjdGlvblJhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgbG93ZXIgYm91bmRhcnkgb2YgdGhlIHJhbmdlLlxuICAgICovXG4gICAgZnJvbSwgXG4gICAgLyoqXG4gICAgVGhlIHVwcGVyIGJvdW5kYXJ5IG9mIHRoZSByYW5nZS5cbiAgICAqL1xuICAgIHRvLCBmbGFncykge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMuZmxhZ3MgPSBmbGFncztcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGFuY2hvciBvZiB0aGUgcmFuZ2VcdTIwMTR0aGUgc2lkZSB0aGF0IGRvZXNuJ3QgbW92ZSB3aGVuIHlvdVxuICAgIGV4dGVuZCBpdC5cbiAgICAqL1xuICAgIGdldCBhbmNob3IoKSB7IHJldHVybiB0aGlzLmZsYWdzICYgMzIgLyogUmFuZ2VGbGFnLkludmVydGVkICovID8gdGhpcy50byA6IHRoaXMuZnJvbTsgfVxuICAgIC8qKlxuICAgIFRoZSBoZWFkIG9mIHRoZSByYW5nZSwgd2hpY2ggaXMgbW92ZWQgd2hlbiB0aGUgcmFuZ2UgaXNcbiAgICBbZXh0ZW5kZWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU2VsZWN0aW9uUmFuZ2UuZXh0ZW5kKS5cbiAgICAqL1xuICAgIGdldCBoZWFkKCkgeyByZXR1cm4gdGhpcy5mbGFncyAmIDMyIC8qIFJhbmdlRmxhZy5JbnZlcnRlZCAqLyA/IHRoaXMuZnJvbSA6IHRoaXMudG87IH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gYGFuY2hvcmAgYW5kIGBoZWFkYCBhcmUgYXQgdGhlIHNhbWUgcG9zaXRpb24uXG4gICAgKi9cbiAgICBnZXQgZW1wdHkoKSB7IHJldHVybiB0aGlzLmZyb20gPT0gdGhpcy50bzsgfVxuICAgIC8qKlxuICAgIElmIHRoaXMgaXMgYSBjdXJzb3IgdGhhdCBpcyBleHBsaWNpdGx5IGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICBjaGFyYWN0ZXIgb24gb25lIG9mIGl0cyBzaWRlcywgdGhpcyByZXR1cm5zIHRoZSBzaWRlLiAtMSBtZWFuc1xuICAgIHRoZSBjaGFyYWN0ZXIgYmVmb3JlIGl0cyBwb3NpdGlvbiwgMSB0aGUgY2hhcmFjdGVyIGFmdGVyLCBhbmQgMFxuICAgIG1lYW5zIG5vIGFzc29jaWF0aW9uLlxuICAgICovXG4gICAgZ2V0IGFzc29jKCkgeyByZXR1cm4gdGhpcy5mbGFncyAmIDggLyogUmFuZ2VGbGFnLkFzc29jQmVmb3JlICovID8gLTEgOiB0aGlzLmZsYWdzICYgMTYgLyogUmFuZ2VGbGFnLkFzc29jQWZ0ZXIgKi8gPyAxIDogMDsgfVxuICAgIC8qKlxuICAgIFRoZSBiaWRpcmVjdGlvbmFsIHRleHQgbGV2ZWwgYXNzb2NpYXRlZCB3aXRoIHRoaXMgY3Vyc29yLCBpZlxuICAgIGFueS5cbiAgICAqL1xuICAgIGdldCBiaWRpTGV2ZWwoKSB7XG4gICAgICAgIGxldCBsZXZlbCA9IHRoaXMuZmxhZ3MgJiA3IC8qIFJhbmdlRmxhZy5CaWRpTGV2ZWxNYXNrICovO1xuICAgICAgICByZXR1cm4gbGV2ZWwgPT0gNyA/IG51bGwgOiBsZXZlbDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGdvYWwgY29sdW1uIChzdG9yZWQgdmVydGljYWwgb2Zmc2V0KSBhc3NvY2lhdGVkIHdpdGggYVxuICAgIGN1cnNvci4gVGhpcyBpcyB1c2VkIHRvIHByZXNlcnZlIHRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB3aGVuXG4gICAgW21vdmluZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcubW92ZVZlcnRpY2FsbHkpIGFjcm9zc1xuICAgIGxpbmVzIG9mIGRpZmZlcmVudCBsZW5ndGguXG4gICAgKi9cbiAgICBnZXQgZ29hbENvbHVtbigpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5mbGFncyA+PiA2IC8qIFJhbmdlRmxhZy5Hb2FsQ29sdW1uT2Zmc2V0ICovO1xuICAgICAgICByZXR1cm4gdmFsdWUgPT0gMTY3NzcyMTUgLyogUmFuZ2VGbGFnLk5vR29hbENvbHVtbiAqLyA/IHVuZGVmaW5lZCA6IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICBNYXAgdGhpcyByYW5nZSB0aHJvdWdoIGEgY2hhbmdlLCBwcm9kdWNpbmcgYSB2YWxpZCByYW5nZSBpbiB0aGVcbiAgICB1cGRhdGVkIGRvY3VtZW50LlxuICAgICovXG4gICAgbWFwKGNoYW5nZSwgYXNzb2MgPSAtMSkge1xuICAgICAgICBsZXQgZnJvbSwgdG87XG4gICAgICAgIGlmICh0aGlzLmVtcHR5KSB7XG4gICAgICAgICAgICBmcm9tID0gdG8gPSBjaGFuZ2UubWFwUG9zKHRoaXMuZnJvbSwgYXNzb2MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZnJvbSA9IGNoYW5nZS5tYXBQb3ModGhpcy5mcm9tLCAxKTtcbiAgICAgICAgICAgIHRvID0gY2hhbmdlLm1hcFBvcyh0aGlzLnRvLCAtMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyb20gPT0gdGhpcy5mcm9tICYmIHRvID09IHRoaXMudG8gPyB0aGlzIDogbmV3IFNlbGVjdGlvblJhbmdlKGZyb20sIHRvLCB0aGlzLmZsYWdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRXh0ZW5kIHRoaXMgcmFuZ2UgdG8gY292ZXIgYXQgbGVhc3QgYGZyb21gIHRvIGB0b2AuXG4gICAgKi9cbiAgICBleHRlbmQoZnJvbSwgdG8gPSBmcm9tKSB7XG4gICAgICAgIGlmIChmcm9tIDw9IHRoaXMuYW5jaG9yICYmIHRvID49IHRoaXMuYW5jaG9yKVxuICAgICAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5yYW5nZShmcm9tLCB0byk7XG4gICAgICAgIGxldCBoZWFkID0gTWF0aC5hYnMoZnJvbSAtIHRoaXMuYW5jaG9yKSA+IE1hdGguYWJzKHRvIC0gdGhpcy5hbmNob3IpID8gZnJvbSA6IHRvO1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHRoaXMuYW5jaG9yLCBoZWFkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tcGFyZSB0aGlzIHJhbmdlIHRvIGFub3RoZXIgcmFuZ2UuXG4gICAgKi9cbiAgICBlcShvdGhlciwgaW5jbHVkZUFzc29jID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5jaG9yID09IG90aGVyLmFuY2hvciAmJiB0aGlzLmhlYWQgPT0gb3RoZXIuaGVhZCAmJiB0aGlzLmdvYWxDb2x1bW4gPT0gb3RoZXIuZ29hbENvbHVtbiAmJlxuICAgICAgICAgICAgKCFpbmNsdWRlQXNzb2MgfHwgIXRoaXMuZW1wdHkgfHwgdGhpcy5hc3NvYyA9PSBvdGhlci5hc3NvYyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybiBhIEpTT04tc2VyaWFsaXphYmxlIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHJhbmdlLlxuICAgICovXG4gICAgdG9KU09OKCkgeyByZXR1cm4geyBhbmNob3I6IHRoaXMuYW5jaG9yLCBoZWFkOiB0aGlzLmhlYWQgfTsgfVxuICAgIC8qKlxuICAgIENvbnZlcnQgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGEgcmFuZ2UgdG8gYSBgU2VsZWN0aW9uUmFuZ2VgXG4gICAgaW5zdGFuY2UuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICBpZiAoIWpzb24gfHwgdHlwZW9mIGpzb24uYW5jaG9yICE9IFwibnVtYmVyXCIgfHwgdHlwZW9mIGpzb24uaGVhZCAhPSBcIm51bWJlclwiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIEpTT04gcmVwcmVzZW50YXRpb24gZm9yIFNlbGVjdGlvblJhbmdlXCIpO1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGpzb24uYW5jaG9yLCBqc29uLmhlYWQpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZnJvbSwgdG8sIGZsYWdzKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2VsZWN0aW9uUmFuZ2UoZnJvbSwgdG8sIGZsYWdzKTtcbiAgICB9XG59XG4vKipcbkFuIGVkaXRvciBzZWxlY3Rpb24gaG9sZHMgb25lIG9yIG1vcmUgc2VsZWN0aW9uIHJhbmdlcy5cbiovXG5jbGFzcyBFZGl0b3JTZWxlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSByYW5nZXMgaW4gdGhlIHNlbGVjdGlvbiwgc29ydGVkIGJ5IHBvc2l0aW9uLiBSYW5nZXMgY2Fubm90XG4gICAgb3ZlcmxhcCAoYnV0IHRoZXkgbWF5IHRvdWNoLCBpZiB0aGV5IGFyZW4ndCBlbXB0eSkuXG4gICAgKi9cbiAgICByYW5nZXMsIFxuICAgIC8qKlxuICAgIFRoZSBpbmRleCBvZiB0aGUgX21haW5fIHJhbmdlIGluIHRoZSBzZWxlY3Rpb24gKHdoaWNoIGlzXG4gICAgdXN1YWxseSB0aGUgcmFuZ2UgdGhhdCB3YXMgYWRkZWQgbGFzdCkuXG4gICAgKi9cbiAgICBtYWluSW5kZXgpIHtcbiAgICAgICAgdGhpcy5yYW5nZXMgPSByYW5nZXM7XG4gICAgICAgIHRoaXMubWFpbkluZGV4ID0gbWFpbkluZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICBNYXAgYSBzZWxlY3Rpb24gdGhyb3VnaCBhIGNoYW5nZS4gVXNlZCB0byBhZGp1c3QgdGhlIHNlbGVjdGlvblxuICAgIHBvc2l0aW9uIGZvciBjaGFuZ2VzLlxuICAgICovXG4gICAgbWFwKGNoYW5nZSwgYXNzb2MgPSAtMSkge1xuICAgICAgICBpZiAoY2hhbmdlLmVtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHRoaXMucmFuZ2VzLm1hcChyID0+IHIubWFwKGNoYW5nZSwgYXNzb2MpKSwgdGhpcy5tYWluSW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb21wYXJlIHRoaXMgc2VsZWN0aW9uIHRvIGFub3RoZXIgc2VsZWN0aW9uLiBCeSBkZWZhdWx0LCByYW5nZXNcbiAgICBhcmUgY29tcGFyZWQgb25seSBieSBwb3NpdGlvbi4gV2hlbiBgaW5jbHVkZUFzc29jYCBpcyB0cnVlLFxuICAgIGN1cnNvciByYW5nZXMgbXVzdCBhbHNvIGhhdmUgdGhlIHNhbWVcbiAgICBbYGFzc29jYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TZWxlY3Rpb25SYW5nZS5hc3NvYykgdmFsdWUuXG4gICAgKi9cbiAgICBlcShvdGhlciwgaW5jbHVkZUFzc29jID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRoaXMucmFuZ2VzLmxlbmd0aCAhPSBvdGhlci5yYW5nZXMubGVuZ3RoIHx8XG4gICAgICAgICAgICB0aGlzLm1haW5JbmRleCAhPSBvdGhlci5tYWluSW5kZXgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoIXRoaXMucmFuZ2VzW2ldLmVxKG90aGVyLnJhbmdlc1tpXSwgaW5jbHVkZUFzc29jKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHByaW1hcnkgc2VsZWN0aW9uIHJhbmdlLiBVc3VhbGx5LCB5b3Ugc2hvdWxkIG1ha2Ugc3VyZVxuICAgIHlvdXIgY29kZSBhcHBsaWVzIHRvIF9hbGxfIHJhbmdlcywgYnkgdXNpbmcgbWV0aG9kcyBsaWtlXG4gICAgW2BjaGFuZ2VCeVJhbmdlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5jaGFuZ2VCeVJhbmdlKS5cbiAgICAqL1xuICAgIGdldCBtYWluKCkgeyByZXR1cm4gdGhpcy5yYW5nZXNbdGhpcy5tYWluSW5kZXhdOyB9XG4gICAgLyoqXG4gICAgTWFrZSBzdXJlIHRoZSBzZWxlY3Rpb24gb25seSBoYXMgb25lIHJhbmdlLiBSZXR1cm5zIGEgc2VsZWN0aW9uXG4gICAgaG9sZGluZyBvbmx5IHRoZSBtYWluIHJhbmdlIGZyb20gdGhpcyBzZWxlY3Rpb24uXG4gICAgKi9cbiAgICBhc1NpbmdsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2VzLmxlbmd0aCA9PSAxID8gdGhpcyA6IG5ldyBFZGl0b3JTZWxlY3Rpb24oW3RoaXMubWFpbl0sIDApO1xuICAgIH1cbiAgICAvKipcbiAgICBFeHRlbmQgdGhpcyBzZWxlY3Rpb24gd2l0aCBhbiBleHRyYSByYW5nZS5cbiAgICAqL1xuICAgIGFkZFJhbmdlKHJhbmdlLCBtYWluID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShbcmFuZ2VdLmNvbmNhdCh0aGlzLnJhbmdlcyksIG1haW4gPyAwIDogdGhpcy5tYWluSW5kZXggKyAxKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSBhIGdpdmVuIHJhbmdlIHdpdGggYW5vdGhlciByYW5nZSwgYW5kIHRoZW4gbm9ybWFsaXplIHRoZVxuICAgIHNlbGVjdGlvbiB0byBtZXJnZSBhbmQgc29ydCByYW5nZXMgaWYgbmVjZXNzYXJ5LlxuICAgICovXG4gICAgcmVwbGFjZVJhbmdlKHJhbmdlLCB3aGljaCA9IHRoaXMubWFpbkluZGV4KSB7XG4gICAgICAgIGxldCByYW5nZXMgPSB0aGlzLnJhbmdlcy5zbGljZSgpO1xuICAgICAgICByYW5nZXNbd2hpY2hdID0gcmFuZ2U7XG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHJhbmdlcywgdGhpcy5tYWluSW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb252ZXJ0IHRoaXMgc2VsZWN0aW9uIHRvIGFuIG9iamVjdCB0aGF0IGNhbiBiZSBzZXJpYWxpemVkIHRvXG4gICAgSlNPTi5cbiAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgcmFuZ2VzOiB0aGlzLnJhbmdlcy5tYXAociA9PiByLnRvSlNPTigpKSwgbWFpbjogdGhpcy5tYWluSW5kZXggfTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc2VsZWN0aW9uIGZyb20gYSBKU09OIHJlcHJlc2VudGF0aW9uLlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgaWYgKCFqc29uIHx8ICFBcnJheS5pc0FycmF5KGpzb24ucmFuZ2VzKSB8fCB0eXBlb2YganNvbi5tYWluICE9IFwibnVtYmVyXCIgfHwganNvbi5tYWluID49IGpzb24ucmFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBKU09OIHJlcHJlc2VudGF0aW9uIGZvciBFZGl0b3JTZWxlY3Rpb25cIik7XG4gICAgICAgIHJldHVybiBuZXcgRWRpdG9yU2VsZWN0aW9uKGpzb24ucmFuZ2VzLm1hcCgocikgPT4gU2VsZWN0aW9uUmFuZ2UuZnJvbUpTT04ocikpLCBqc29uLm1haW4pO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBzZWxlY3Rpb24gaG9sZGluZyBhIHNpbmdsZSByYW5nZS5cbiAgICAqL1xuICAgIHN0YXRpYyBzaW5nbGUoYW5jaG9yLCBoZWFkID0gYW5jaG9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgRWRpdG9yU2VsZWN0aW9uKFtFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoYW5jaG9yLCBoZWFkKV0sIDApO1xuICAgIH1cbiAgICAvKipcbiAgICBTb3J0IGFuZCBtZXJnZSB0aGUgZ2l2ZW4gc2V0IG9mIHJhbmdlcywgY3JlYXRpbmcgYSB2YWxpZFxuICAgIHNlbGVjdGlvbi5cbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUocmFuZ2VzLCBtYWluSW5kZXggPSAwKSB7XG4gICAgICAgIGlmIChyYW5nZXMubGVuZ3RoID09IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkEgc2VsZWN0aW9uIG5lZWRzIGF0IGxlYXN0IG9uZSByYW5nZVwiKTtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gMCwgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCByYW5nZSA9IHJhbmdlc1tpXTtcbiAgICAgICAgICAgIGlmIChyYW5nZS5lbXB0eSA/IHJhbmdlLmZyb20gPD0gcG9zIDogcmFuZ2UuZnJvbSA8IHBvcylcbiAgICAgICAgICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLm5vcm1hbGl6ZWQocmFuZ2VzLnNsaWNlKCksIG1haW5JbmRleCk7XG4gICAgICAgICAgICBwb3MgPSByYW5nZS50bztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEVkaXRvclNlbGVjdGlvbihyYW5nZXMsIG1haW5JbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGN1cnNvciBzZWxlY3Rpb24gcmFuZ2UgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLiBZb3UgY2FuXG4gICAgc2FmZWx5IGlnbm9yZSB0aGUgb3B0aW9uYWwgYXJndW1lbnRzIGluIG1vc3Qgc2l0dWF0aW9ucy5cbiAgICAqL1xuICAgIHN0YXRpYyBjdXJzb3IocG9zLCBhc3NvYyA9IDAsIGJpZGlMZXZlbCwgZ29hbENvbHVtbikge1xuICAgICAgICByZXR1cm4gU2VsZWN0aW9uUmFuZ2UuY3JlYXRlKHBvcywgcG9zLCAoYXNzb2MgPT0gMCA/IDAgOiBhc3NvYyA8IDAgPyA4IC8qIFJhbmdlRmxhZy5Bc3NvY0JlZm9yZSAqLyA6IDE2IC8qIFJhbmdlRmxhZy5Bc3NvY0FmdGVyICovKSB8XG4gICAgICAgICAgICAoYmlkaUxldmVsID09IG51bGwgPyA3IDogTWF0aC5taW4oNiwgYmlkaUxldmVsKSkgfFxuICAgICAgICAgICAgKChnb2FsQ29sdW1uICE9PSBudWxsICYmIGdvYWxDb2x1bW4gIT09IHZvaWQgMCA/IGdvYWxDb2x1bW4gOiAxNjc3NzIxNSAvKiBSYW5nZUZsYWcuTm9Hb2FsQ29sdW1uICovKSA8PCA2IC8qIFJhbmdlRmxhZy5Hb2FsQ29sdW1uT2Zmc2V0ICovKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHNlbGVjdGlvbiByYW5nZS5cbiAgICAqL1xuICAgIHN0YXRpYyByYW5nZShhbmNob3IsIGhlYWQsIGdvYWxDb2x1bW4sIGJpZGlMZXZlbCkge1xuICAgICAgICBsZXQgZmxhZ3MgPSAoKGdvYWxDb2x1bW4gIT09IG51bGwgJiYgZ29hbENvbHVtbiAhPT0gdm9pZCAwID8gZ29hbENvbHVtbiA6IDE2Nzc3MjE1IC8qIFJhbmdlRmxhZy5Ob0dvYWxDb2x1bW4gKi8pIDw8IDYgLyogUmFuZ2VGbGFnLkdvYWxDb2x1bW5PZmZzZXQgKi8pIHxcbiAgICAgICAgICAgIChiaWRpTGV2ZWwgPT0gbnVsbCA/IDcgOiBNYXRoLm1pbig2LCBiaWRpTGV2ZWwpKTtcbiAgICAgICAgcmV0dXJuIGhlYWQgPCBhbmNob3IgPyBTZWxlY3Rpb25SYW5nZS5jcmVhdGUoaGVhZCwgYW5jaG9yLCAzMiAvKiBSYW5nZUZsYWcuSW52ZXJ0ZWQgKi8gfCAxNiAvKiBSYW5nZUZsYWcuQXNzb2NBZnRlciAqLyB8IGZsYWdzKVxuICAgICAgICAgICAgOiBTZWxlY3Rpb25SYW5nZS5jcmVhdGUoYW5jaG9yLCBoZWFkLCAoaGVhZCA+IGFuY2hvciA/IDggLyogUmFuZ2VGbGFnLkFzc29jQmVmb3JlICovIDogMCkgfCBmbGFncyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIG5vcm1hbGl6ZWQocmFuZ2VzLCBtYWluSW5kZXggPSAwKSB7XG4gICAgICAgIGxldCBtYWluID0gcmFuZ2VzW21haW5JbmRleF07XG4gICAgICAgIHJhbmdlcy5zb3J0KChhLCBiKSA9PiBhLmZyb20gLSBiLmZyb20pO1xuICAgICAgICBtYWluSW5kZXggPSByYW5nZXMuaW5kZXhPZihtYWluKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCByYW5nZSA9IHJhbmdlc1tpXSwgcHJldiA9IHJhbmdlc1tpIC0gMV07XG4gICAgICAgICAgICBpZiAocmFuZ2UuZW1wdHkgPyByYW5nZS5mcm9tIDw9IHByZXYudG8gOiByYW5nZS5mcm9tIDwgcHJldi50bykge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gcHJldi5mcm9tLCB0byA9IE1hdGgubWF4KHJhbmdlLnRvLCBwcmV2LnRvKTtcbiAgICAgICAgICAgICAgICBpZiAoaSA8PSBtYWluSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgIG1haW5JbmRleC0tO1xuICAgICAgICAgICAgICAgIHJhbmdlcy5zcGxpY2UoLS1pLCAyLCByYW5nZS5hbmNob3IgPiByYW5nZS5oZWFkID8gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHRvLCBmcm9tKSA6IEVkaXRvclNlbGVjdGlvbi5yYW5nZShmcm9tLCB0bykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRWRpdG9yU2VsZWN0aW9uKHJhbmdlcywgbWFpbkluZGV4KTtcbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja1NlbGVjdGlvbihzZWxlY3Rpb24sIGRvY0xlbmd0aCkge1xuICAgIGZvciAobGV0IHJhbmdlIG9mIHNlbGVjdGlvbi5yYW5nZXMpXG4gICAgICAgIGlmIChyYW5nZS50byA+IGRvY0xlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiU2VsZWN0aW9uIHBvaW50cyBvdXRzaWRlIG9mIGRvY3VtZW50XCIpO1xufVxuXG5sZXQgbmV4dElEID0gMDtcbi8qKlxuQSBmYWNldCBpcyBhIGxhYmVsZWQgdmFsdWUgdGhhdCBpcyBhc3NvY2lhdGVkIHdpdGggYW4gZWRpdG9yXG5zdGF0ZS4gSXQgdGFrZXMgaW5wdXRzIGZyb20gYW55IG51bWJlciBvZiBleHRlbnNpb25zLCBhbmQgY29tYmluZXNcbnRob3NlIGludG8gYSBzaW5nbGUgb3V0cHV0IHZhbHVlLlxuXG5FeGFtcGxlcyBvZiB1c2VzIG9mIGZhY2V0cyBhcmUgdGhlIFt0YWJcbnNpemVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVedGFiU2l6ZSksIFtlZGl0b3JcbmF0dHJpYnV0ZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XmVkaXRvckF0dHJpYnV0ZXMpLCBhbmQgW3VwZGF0ZVxubGlzdGVuZXJzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld151cGRhdGVMaXN0ZW5lcikuXG5cbk5vdGUgdGhhdCBgRmFjZXRgIGluc3RhbmNlcyBjYW4gYmUgdXNlZCBhbnl3aGVyZSB3aGVyZVxuW2BGYWNldFJlYWRlcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRmFjZXRSZWFkZXIpIGlzIGV4cGVjdGVkLlxuKi9cbmNsYXNzIEZhY2V0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbWJpbmUsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29tcGFyZUlucHV0LCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbXBhcmUsIGlzU3RhdGljLCBlbmFibGVzKSB7XG4gICAgICAgIHRoaXMuY29tYmluZSA9IGNvbWJpbmU7XG4gICAgICAgIHRoaXMuY29tcGFyZUlucHV0ID0gY29tcGFyZUlucHV0O1xuICAgICAgICB0aGlzLmNvbXBhcmUgPSBjb21wYXJlO1xuICAgICAgICB0aGlzLmlzU3RhdGljID0gaXNTdGF0aWM7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pZCA9IG5leHRJRCsrO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSBjb21iaW5lKFtdKTtcbiAgICAgICAgdGhpcy5leHRlbnNpb25zID0gdHlwZW9mIGVuYWJsZXMgPT0gXCJmdW5jdGlvblwiID8gZW5hYmxlcyh0aGlzKSA6IGVuYWJsZXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgYSBmYWNldCByZWFkZXIgZm9yIHRoaXMgZmFjZXQsIHdoaWNoIGNhbiBiZSB1c2VkIHRvXG4gICAgW3JlYWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUuZmFjZXQpIGl0IGJ1dCBub3QgdG8gZGVmaW5lIHZhbHVlcyBmb3IgaXQuXG4gICAgKi9cbiAgICBnZXQgcmVhZGVyKCkgeyByZXR1cm4gdGhpczsgfVxuICAgIC8qKlxuICAgIERlZmluZSBhIG5ldyBmYWNldC5cbiAgICAqL1xuICAgIHN0YXRpYyBkZWZpbmUoY29uZmlnID0ge30pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGYWNldChjb25maWcuY29tYmluZSB8fCAoKGEpID0+IGEpLCBjb25maWcuY29tcGFyZUlucHV0IHx8ICgoYSwgYikgPT4gYSA9PT0gYiksIGNvbmZpZy5jb21wYXJlIHx8ICghY29uZmlnLmNvbWJpbmUgPyBzYW1lQXJyYXkgOiAoYSwgYikgPT4gYSA9PT0gYiksICEhY29uZmlnLnN0YXRpYywgY29uZmlnLmVuYWJsZXMpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGFkZHMgdGhlIGdpdmVuIHZhbHVlIHRvIHRoaXMgZmFjZXQuXG4gICAgKi9cbiAgICBvZih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbmV3IEZhY2V0UHJvdmlkZXIoW10sIHRoaXMsIDAgLyogUHJvdmlkZXIuU3RhdGljICovLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCBjb21wdXRlcyBhIHZhbHVlIGZvciB0aGUgZmFjZXQgZnJvbSBhXG4gICAgc3RhdGUuIFlvdSBtdXN0IHRha2UgY2FyZSB0byBkZWNsYXJlIHRoZSBwYXJ0cyBvZiB0aGUgc3RhdGUgdGhhdFxuICAgIHRoaXMgdmFsdWUgZGVwZW5kcyBvbiwgc2luY2UgeW91ciBmdW5jdGlvbiBpcyBvbmx5IGNhbGxlZCBhZ2FpblxuICAgIGZvciBhIG5ldyBzdGF0ZSB3aGVuIG9uZSBvZiB0aG9zZSBwYXJ0cyBjaGFuZ2VkLlxuICAgIFxuICAgIEluIGNhc2VzIHdoZXJlIHlvdXIgdmFsdWUgZGVwZW5kcyBvbmx5IG9uIGEgc2luZ2xlIGZpZWxkLCB5b3UnbGxcbiAgICB3YW50IHRvIHVzZSB0aGUgW2Bmcm9tYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5GYWNldC5mcm9tKSBtZXRob2QgaW5zdGVhZC5cbiAgICAqL1xuICAgIGNvbXB1dGUoZGVwcywgZ2V0KSB7XG4gICAgICAgIGlmICh0aGlzLmlzU3RhdGljKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgY29tcHV0ZSBhIHN0YXRpYyBmYWNldFwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGYWNldFByb3ZpZGVyKGRlcHMsIHRoaXMsIDEgLyogUHJvdmlkZXIuU2luZ2xlICovLCBnZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gZXh0ZW5zaW9uIHRoYXQgY29tcHV0ZXMgemVybyBvciBtb3JlIHZhbHVlcyBmb3IgdGhpc1xuICAgIGZhY2V0IGZyb20gYSBzdGF0ZS5cbiAgICAqL1xuICAgIGNvbXB1dGVOKGRlcHMsIGdldCkge1xuICAgICAgICBpZiAodGhpcy5pc1N0YXRpYylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGNvbXB1dGUgYSBzdGF0aWMgZmFjZXRcIik7XG4gICAgICAgIHJldHVybiBuZXcgRmFjZXRQcm92aWRlcihkZXBzLCB0aGlzLCAyIC8qIFByb3ZpZGVyLk11bHRpICovLCBnZXQpO1xuICAgIH1cbiAgICBmcm9tKGZpZWxkLCBnZXQpIHtcbiAgICAgICAgaWYgKCFnZXQpXG4gICAgICAgICAgICBnZXQgPSB4ID0+IHg7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXB1dGUoW2ZpZWxkXSwgc3RhdGUgPT4gZ2V0KHN0YXRlLmZpZWxkKGZpZWxkKSkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNhbWVBcnJheShhLCBiKSB7XG4gICAgcmV0dXJuIGEgPT0gYiB8fCBhLmxlbmd0aCA9PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KChlLCBpKSA9PiBlID09PSBiW2ldKTtcbn1cbmNsYXNzIEZhY2V0UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGRlcGVuZGVuY2llcywgZmFjZXQsIHR5cGUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzO1xuICAgICAgICB0aGlzLmZhY2V0ID0gZmFjZXQ7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5pZCA9IG5leHRJRCsrO1xuICAgIH1cbiAgICBkeW5hbWljU2xvdChhZGRyZXNzZXMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgZ2V0dGVyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgbGV0IGNvbXBhcmUgPSB0aGlzLmZhY2V0LmNvbXBhcmVJbnB1dDtcbiAgICAgICAgbGV0IGlkID0gdGhpcy5pZCwgaWR4ID0gYWRkcmVzc2VzW2lkXSA+PiAxLCBtdWx0aSA9IHRoaXMudHlwZSA9PSAyIC8qIFByb3ZpZGVyLk11bHRpICovO1xuICAgICAgICBsZXQgZGVwRG9jID0gZmFsc2UsIGRlcFNlbCA9IGZhbHNlLCBkZXBBZGRycyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBkZXAgb2YgdGhpcy5kZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgICAgIGlmIChkZXAgPT0gXCJkb2NcIilcbiAgICAgICAgICAgICAgICBkZXBEb2MgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAoZGVwID09IFwic2VsZWN0aW9uXCIpXG4gICAgICAgICAgICAgICAgZGVwU2VsID0gdHJ1ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKCgoKF9hID0gYWRkcmVzc2VzW2RlcC5pZF0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDEpICYgMSkgPT0gMClcbiAgICAgICAgICAgICAgICBkZXBBZGRycy5wdXNoKGFkZHJlc3Nlc1tkZXAuaWRdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSBnZXR0ZXIoc3RhdGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGUoc3RhdGUsIHRyKSB7XG4gICAgICAgICAgICAgICAgaWYgKChkZXBEb2MgJiYgdHIuZG9jQ2hhbmdlZCkgfHwgKGRlcFNlbCAmJiAodHIuZG9jQ2hhbmdlZCB8fCB0ci5zZWxlY3Rpb24pKSB8fCBlbnN1cmVBbGwoc3RhdGUsIGRlcEFkZHJzKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VmFsID0gZ2V0dGVyKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG11bHRpID8gIWNvbXBhcmVBcnJheShuZXdWYWwsIHN0YXRlLnZhbHVlc1tpZHhdLCBjb21wYXJlKSA6ICFjb21wYXJlKG5ld1ZhbCwgc3RhdGUudmFsdWVzW2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IG5ld1ZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZWNvbmZpZ3VyZTogKHN0YXRlLCBvbGRTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBuZXdWYWwsIG9sZEFkZHIgPSBvbGRTdGF0ZS5jb25maWcuYWRkcmVzc1tpZF07XG4gICAgICAgICAgICAgICAgaWYgKG9sZEFkZHIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb2xkVmFsID0gZ2V0QWRkcihvbGRTdGF0ZSwgb2xkQWRkcik7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlcGVuZGVuY2llcy5ldmVyeShkZXAgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlcCBpbnN0YW5jZW9mIEZhY2V0ID8gb2xkU3RhdGUuZmFjZXQoZGVwKSA9PT0gc3RhdGUuZmFjZXQoZGVwKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwIGluc3RhbmNlb2YgU3RhdGVGaWVsZCA/IG9sZFN0YXRlLmZpZWxkKGRlcCwgZmFsc2UpID09IHN0YXRlLmZpZWxkKGRlcCwgZmFsc2UpIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSkgfHwgKG11bHRpID8gY29tcGFyZUFycmF5KG5ld1ZhbCA9IGdldHRlcihzdGF0ZSksIG9sZFZhbCwgY29tcGFyZSkgOiBjb21wYXJlKG5ld1ZhbCA9IGdldHRlcihzdGF0ZSksIG9sZFZhbCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IG9sZFZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdWYWwgPSBnZXR0ZXIoc3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IG5ld1ZhbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuZnVuY3Rpb24gY29tcGFyZUFycmF5KGEsIGIsIGNvbXBhcmUpIHtcbiAgICBpZiAoYS5sZW5ndGggIT0gYi5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspXG4gICAgICAgIGlmICghY29tcGFyZShhW2ldLCBiW2ldKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGVuc3VyZUFsbChzdGF0ZSwgYWRkcnMpIHtcbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlO1xuICAgIGZvciAobGV0IGFkZHIgb2YgYWRkcnMpXG4gICAgICAgIGlmIChlbnN1cmVBZGRyKHN0YXRlLCBhZGRyKSAmIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovKVxuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgcmV0dXJuIGNoYW5nZWQ7XG59XG5mdW5jdGlvbiBkeW5hbWljRmFjZXRTbG90KGFkZHJlc3NlcywgZmFjZXQsIHByb3ZpZGVycykge1xuICAgIGxldCBwcm92aWRlckFkZHJzID0gcHJvdmlkZXJzLm1hcChwID0+IGFkZHJlc3Nlc1twLmlkXSk7XG4gICAgbGV0IHByb3ZpZGVyVHlwZXMgPSBwcm92aWRlcnMubWFwKHAgPT4gcC50eXBlKTtcbiAgICBsZXQgZHluYW1pYyA9IHByb3ZpZGVyQWRkcnMuZmlsdGVyKHAgPT4gIShwICYgMSkpO1xuICAgIGxldCBpZHggPSBhZGRyZXNzZXNbZmFjZXQuaWRdID4+IDE7XG4gICAgZnVuY3Rpb24gZ2V0KHN0YXRlKSB7XG4gICAgICAgIGxldCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm92aWRlckFkZHJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBnZXRBZGRyKHN0YXRlLCBwcm92aWRlckFkZHJzW2ldKTtcbiAgICAgICAgICAgIGlmIChwcm92aWRlclR5cGVzW2ldID09IDIgLyogUHJvdmlkZXIuTXVsdGkgKi8pXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdmFsIG9mIHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWwpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFjZXQuY29tYmluZSh2YWx1ZXMpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjcmVhdGUoc3RhdGUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGFkZHIgb2YgcHJvdmlkZXJBZGRycylcbiAgICAgICAgICAgICAgICBlbnN1cmVBZGRyKHN0YXRlLCBhZGRyKTtcbiAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gZ2V0KHN0YXRlKTtcbiAgICAgICAgICAgIHJldHVybiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLztcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlKHN0YXRlLCB0cikge1xuICAgICAgICAgICAgaWYgKCFlbnN1cmVBbGwoc3RhdGUsIGR5bmFtaWMpKVxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gZ2V0KHN0YXRlKTtcbiAgICAgICAgICAgIGlmIChmYWNldC5jb21wYXJlKHZhbHVlLCBzdGF0ZS52YWx1ZXNbaWR4XSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICB9LFxuICAgICAgICByZWNvbmZpZ3VyZShzdGF0ZSwgb2xkU3RhdGUpIHtcbiAgICAgICAgICAgIGxldCBkZXBDaGFuZ2VkID0gZW5zdXJlQWxsKHN0YXRlLCBwcm92aWRlckFkZHJzKTtcbiAgICAgICAgICAgIGxldCBvbGRQcm92aWRlcnMgPSBvbGRTdGF0ZS5jb25maWcuZmFjZXRzW2ZhY2V0LmlkXSwgb2xkVmFsdWUgPSBvbGRTdGF0ZS5mYWNldChmYWNldCk7XG4gICAgICAgICAgICBpZiAob2xkUHJvdmlkZXJzICYmICFkZXBDaGFuZ2VkICYmIHNhbWVBcnJheShwcm92aWRlcnMsIG9sZFByb3ZpZGVycykpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IG9sZFZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHZhbHVlID0gZ2V0KHN0YXRlKTtcbiAgICAgICAgICAgIGlmIChmYWNldC5jb21wYXJlKHZhbHVlLCBvbGRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IG9sZFZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLztcbiAgICAgICAgfVxuICAgIH07XG59XG5jb25zdCBpbml0RmllbGQgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHsgc3RhdGljOiB0cnVlIH0pO1xuLyoqXG5GaWVsZHMgY2FuIHN0b3JlIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gaW4gYW4gZWRpdG9yIHN0YXRlLCBhbmRcbmtlZXAgaXQgaW4gc3luYyB3aXRoIHRoZSByZXN0IG9mIHRoZSBzdGF0ZS5cbiovXG5jbGFzcyBTdGF0ZUZpZWxkIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGlkLCBjcmVhdGVGLCB1cGRhdGVGLCBjb21wYXJlRiwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzcGVjKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5jcmVhdGVGID0gY3JlYXRlRjtcbiAgICAgICAgdGhpcy51cGRhdGVGID0gdXBkYXRlRjtcbiAgICAgICAgdGhpcy5jb21wYXJlRiA9IGNvbXBhcmVGO1xuICAgICAgICB0aGlzLnNwZWMgPSBzcGVjO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMucHJvdmlkZXMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgIERlZmluZSBhIHN0YXRlIGZpZWxkLlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZShjb25maWcpIHtcbiAgICAgICAgbGV0IGZpZWxkID0gbmV3IFN0YXRlRmllbGQobmV4dElEKyssIGNvbmZpZy5jcmVhdGUsIGNvbmZpZy51cGRhdGUsIGNvbmZpZy5jb21wYXJlIHx8ICgoYSwgYikgPT4gYSA9PT0gYiksIGNvbmZpZyk7XG4gICAgICAgIGlmIChjb25maWcucHJvdmlkZSlcbiAgICAgICAgICAgIGZpZWxkLnByb3ZpZGVzID0gY29uZmlnLnByb3ZpZGUoZmllbGQpO1xuICAgICAgICByZXR1cm4gZmllbGQ7XG4gICAgfVxuICAgIGNyZWF0ZShzdGF0ZSkge1xuICAgICAgICBsZXQgaW5pdCA9IHN0YXRlLmZhY2V0KGluaXRGaWVsZCkuZmluZChpID0+IGkuZmllbGQgPT0gdGhpcyk7XG4gICAgICAgIHJldHVybiAoKGluaXQgPT09IG51bGwgfHwgaW5pdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5pdC5jcmVhdGUpIHx8IHRoaXMuY3JlYXRlRikoc3RhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNsb3QoYWRkcmVzc2VzKSB7XG4gICAgICAgIGxldCBpZHggPSBhZGRyZXNzZXNbdGhpcy5pZF0gPj4gMTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNyZWF0ZTogKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSB0aGlzLmNyZWF0ZShzdGF0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZTogKHN0YXRlLCB0cikgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBvbGRWYWwgPSBzdGF0ZS52YWx1ZXNbaWR4XTtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLnVwZGF0ZUYob2xkVmFsLCB0cik7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyZUYob2xkVmFsLCB2YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlY29uZmlndXJlOiAoc3RhdGUsIG9sZFN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGluaXQgPSBzdGF0ZS5mYWNldChpbml0RmllbGQpLCBvbGRJbml0ID0gb2xkU3RhdGUuZmFjZXQoaW5pdEZpZWxkKSwgcmVJbml0O1xuICAgICAgICAgICAgICAgIGlmICgocmVJbml0ID0gaW5pdC5maW5kKGkgPT4gaS5maWVsZCA9PSB0aGlzKSkgJiYgcmVJbml0ICE9IG9sZEluaXQuZmluZChpID0+IGkuZmllbGQgPT0gdGhpcykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSByZUluaXQuY3JlYXRlKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob2xkU3RhdGUuY29uZmlnLmFkZHJlc3NbdGhpcy5pZF0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IG9sZFN0YXRlLmZpZWxkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSB0aGlzLmNyZWF0ZShzdGF0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGVuYWJsZXMgdGhpcyBmaWVsZCBhbmQgb3ZlcnJpZGVzIHRoZVxuICAgIHdheSBpdCBpcyBpbml0aWFsaXplZC4gQ2FuIGJlIHVzZWZ1bCB3aGVuIHlvdSBuZWVkIHRvIHByb3ZpZGUgYVxuICAgIG5vbi1kZWZhdWx0IHN0YXJ0aW5nIHZhbHVlIGZvciB0aGUgZmllbGQuXG4gICAgKi9cbiAgICBpbml0KGNyZWF0ZSkge1xuICAgICAgICByZXR1cm4gW3RoaXMsIGluaXRGaWVsZC5vZih7IGZpZWxkOiB0aGlzLCBjcmVhdGUgfSldO1xuICAgIH1cbiAgICAvKipcbiAgICBTdGF0ZSBmaWVsZCBpbnN0YW5jZXMgY2FuIGJlIHVzZWQgYXNcbiAgICBbYEV4dGVuc2lvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRXh0ZW5zaW9uKSB2YWx1ZXMgdG8gZW5hYmxlIHRoZSBmaWVsZCBpbiBhXG4gICAgZ2l2ZW4gc3RhdGUuXG4gICAgKi9cbiAgICBnZXQgZXh0ZW5zaW9uKCkgeyByZXR1cm4gdGhpczsgfVxufVxuY29uc3QgUHJlY18gPSB7IGxvd2VzdDogNCwgbG93OiAzLCBkZWZhdWx0OiAyLCBoaWdoOiAxLCBoaWdoZXN0OiAwIH07XG5mdW5jdGlvbiBwcmVjKHZhbHVlKSB7XG4gICAgcmV0dXJuIChleHQpID0+IG5ldyBQcmVjRXh0ZW5zaW9uKGV4dCwgdmFsdWUpO1xufVxuLyoqXG5CeSBkZWZhdWx0IGV4dGVuc2lvbnMgYXJlIHJlZ2lzdGVyZWQgaW4gdGhlIG9yZGVyIHRoZXkgYXJlIGZvdW5kXG5pbiB0aGUgZmxhdHRlbmVkIGZvcm0gb2YgbmVzdGVkIGFycmF5IHRoYXQgd2FzIHByb3ZpZGVkLlxuSW5kaXZpZHVhbCBleHRlbnNpb24gdmFsdWVzIGNhbiBiZSBhc3NpZ25lZCBhIHByZWNlZGVuY2UgdG9cbm92ZXJyaWRlIHRoaXMuIEV4dGVuc2lvbnMgdGhhdCBkbyBub3QgaGF2ZSBhIHByZWNlZGVuY2Ugc2V0IGdldFxudGhlIHByZWNlZGVuY2Ugb2YgdGhlIG5lYXJlc3QgcGFyZW50IHdpdGggYSBwcmVjZWRlbmNlLCBvclxuW2BkZWZhdWx0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5QcmVjLmRlZmF1bHQpIGlmIHRoZXJlIGlzIG5vIHN1Y2ggcGFyZW50LiBUaGVcbmZpbmFsIG9yZGVyaW5nIG9mIGV4dGVuc2lvbnMgaXMgZGV0ZXJtaW5lZCBieSBmaXJzdCBzb3J0aW5nIGJ5XG5wcmVjZWRlbmNlIGFuZCB0aGVuIGJ5IG9yZGVyIHdpdGhpbiBlYWNoIHByZWNlZGVuY2UuXG4qL1xuY29uc3QgUHJlYyA9IHtcbiAgICAvKipcbiAgICBUaGUgaGlnaGVzdCBwcmVjZWRlbmNlIGxldmVsLCBmb3IgZXh0ZW5zaW9ucyB0aGF0IHNob3VsZCBlbmQgdXBcbiAgICBuZWFyIHRoZSBzdGFydCBvZiB0aGUgcHJlY2VkZW5jZSBvcmRlcmluZy5cbiAgICAqL1xuICAgIGhpZ2hlc3Q6IC8qQF9fUFVSRV9fKi9wcmVjKFByZWNfLmhpZ2hlc3QpLFxuICAgIC8qKlxuICAgIEEgaGlnaGVyLXRoYW4tZGVmYXVsdCBwcmVjZWRlbmNlLCBmb3IgZXh0ZW5zaW9ucyB0aGF0IHNob3VsZFxuICAgIGNvbWUgYmVmb3JlIHRob3NlIHdpdGggZGVmYXVsdCBwcmVjZWRlbmNlLlxuICAgICovXG4gICAgaGlnaDogLypAX19QVVJFX18qL3ByZWMoUHJlY18uaGlnaCksXG4gICAgLyoqXG4gICAgVGhlIGRlZmF1bHQgcHJlY2VkZW5jZSwgd2hpY2ggaXMgYWxzbyB1c2VkIGZvciBleHRlbnNpb25zXG4gICAgd2l0aG91dCBhbiBleHBsaWNpdCBwcmVjZWRlbmNlLlxuICAgICovXG4gICAgZGVmYXVsdDogLypAX19QVVJFX18qL3ByZWMoUHJlY18uZGVmYXVsdCksXG4gICAgLyoqXG4gICAgQSBsb3dlci10aGFuLWRlZmF1bHQgcHJlY2VkZW5jZS5cbiAgICAqL1xuICAgIGxvdzogLypAX19QVVJFX18qL3ByZWMoUHJlY18ubG93KSxcbiAgICAvKipcbiAgICBUaGUgbG93ZXN0IHByZWNlZGVuY2UgbGV2ZWwuIE1lYW50IGZvciB0aGluZ3MgdGhhdCBzaG91bGQgZW5kIHVwXG4gICAgbmVhciB0aGUgZW5kIG9mIHRoZSBleHRlbnNpb24gb3JkZXIuXG4gICAgKi9cbiAgICBsb3dlc3Q6IC8qQF9fUFVSRV9fKi9wcmVjKFByZWNfLmxvd2VzdClcbn07XG5jbGFzcyBQcmVjRXh0ZW5zaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihpbm5lciwgcHJlYykge1xuICAgICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG4gICAgICAgIHRoaXMucHJlYyA9IHByZWM7XG4gICAgfVxufVxuLyoqXG5FeHRlbnNpb24gY29tcGFydG1lbnRzIGNhbiBiZSB1c2VkIHRvIG1ha2UgYSBjb25maWd1cmF0aW9uXG5keW5hbWljLiBCeSBbd3JhcHBpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ29tcGFydG1lbnQub2YpIHBhcnQgb2YgeW91clxuY29uZmlndXJhdGlvbiBpbiBhIGNvbXBhcnRtZW50LCB5b3UgY2FuIGxhdGVyXG5bcmVwbGFjZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5Db21wYXJ0bWVudC5yZWNvbmZpZ3VyZSkgdGhhdCBwYXJ0IHRocm91Z2ggYVxudHJhbnNhY3Rpb24uXG4qL1xuY2xhc3MgQ29tcGFydG1lbnQge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNvbXBhcnRtZW50IHRvIGFkZCB0byB5b3VyIFtzdGF0ZVxuICAgIGNvbmZpZ3VyYXRpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVDb25maWcuZXh0ZW5zaW9ucykuXG4gICAgKi9cbiAgICBvZihleHQpIHsgcmV0dXJuIG5ldyBDb21wYXJ0bWVudEluc3RhbmNlKHRoaXMsIGV4dCk7IH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gW2VmZmVjdF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuZWZmZWN0cykgdGhhdFxuICAgIHJlY29uZmlndXJlcyB0aGlzIGNvbXBhcnRtZW50LlxuICAgICovXG4gICAgcmVjb25maWd1cmUoY29udGVudCkge1xuICAgICAgICByZXR1cm4gQ29tcGFydG1lbnQucmVjb25maWd1cmUub2YoeyBjb21wYXJ0bWVudDogdGhpcywgZXh0ZW5zaW9uOiBjb250ZW50IH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGN1cnJlbnQgY29udGVudCBvZiB0aGUgY29tcGFydG1lbnQgaW4gdGhlIHN0YXRlLCBvclxuICAgIGB1bmRlZmluZWRgIGlmIGl0IGlzbid0IHByZXNlbnQuXG4gICAgKi9cbiAgICBnZXQoc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlLmNvbmZpZy5jb21wYXJ0bWVudHMuZ2V0KHRoaXMpO1xuICAgIH1cbn1cbmNsYXNzIENvbXBhcnRtZW50SW5zdGFuY2Uge1xuICAgIGNvbnN0cnVjdG9yKGNvbXBhcnRtZW50LCBpbm5lcikge1xuICAgICAgICB0aGlzLmNvbXBhcnRtZW50ID0gY29tcGFydG1lbnQ7XG4gICAgICAgIHRoaXMuaW5uZXIgPSBpbm5lcjtcbiAgICB9XG59XG5jbGFzcyBDb25maWd1cmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihiYXNlLCBjb21wYXJ0bWVudHMsIGR5bmFtaWNTbG90cywgYWRkcmVzcywgc3RhdGljVmFsdWVzLCBmYWNldHMpIHtcbiAgICAgICAgdGhpcy5iYXNlID0gYmFzZTtcbiAgICAgICAgdGhpcy5jb21wYXJ0bWVudHMgPSBjb21wYXJ0bWVudHM7XG4gICAgICAgIHRoaXMuZHluYW1pY1Nsb3RzID0gZHluYW1pY1Nsb3RzO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLnN0YXRpY1ZhbHVlcyA9IHN0YXRpY1ZhbHVlcztcbiAgICAgICAgdGhpcy5mYWNldHMgPSBmYWNldHM7XG4gICAgICAgIHRoaXMuc3RhdHVzVGVtcGxhdGUgPSBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMuc3RhdHVzVGVtcGxhdGUubGVuZ3RoIDwgZHluYW1pY1Nsb3RzLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzVGVtcGxhdGUucHVzaCgwIC8qIFNsb3RTdGF0dXMuVW5yZXNvbHZlZCAqLyk7XG4gICAgfVxuICAgIHN0YXRpY0ZhY2V0KGZhY2V0KSB7XG4gICAgICAgIGxldCBhZGRyID0gdGhpcy5hZGRyZXNzW2ZhY2V0LmlkXTtcbiAgICAgICAgcmV0dXJuIGFkZHIgPT0gbnVsbCA/IGZhY2V0LmRlZmF1bHQgOiB0aGlzLnN0YXRpY1ZhbHVlc1thZGRyID4+IDFdO1xuICAgIH1cbiAgICBzdGF0aWMgcmVzb2x2ZShiYXNlLCBjb21wYXJ0bWVudHMsIG9sZFN0YXRlKSB7XG4gICAgICAgIGxldCBmaWVsZHMgPSBbXTtcbiAgICAgICAgbGV0IGZhY2V0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGxldCBuZXdDb21wYXJ0bWVudHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAobGV0IGV4dCBvZiBmbGF0dGVuKGJhc2UsIGNvbXBhcnRtZW50cywgbmV3Q29tcGFydG1lbnRzKSkge1xuICAgICAgICAgICAgaWYgKGV4dCBpbnN0YW5jZW9mIFN0YXRlRmllbGQpXG4gICAgICAgICAgICAgICAgZmllbGRzLnB1c2goZXh0KTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAoZmFjZXRzW2V4dC5mYWNldC5pZF0gfHwgKGZhY2V0c1tleHQuZmFjZXQuaWRdID0gW10pKS5wdXNoKGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFkZHJlc3MgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBsZXQgc3RhdGljVmFsdWVzID0gW107XG4gICAgICAgIGxldCBkeW5hbWljU2xvdHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgZmllbGQgb2YgZmllbGRzKSB7XG4gICAgICAgICAgICBhZGRyZXNzW2ZpZWxkLmlkXSA9IGR5bmFtaWNTbG90cy5sZW5ndGggPDwgMTtcbiAgICAgICAgICAgIGR5bmFtaWNTbG90cy5wdXNoKGEgPT4gZmllbGQuc2xvdChhKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9sZEZhY2V0cyA9IG9sZFN0YXRlID09PSBudWxsIHx8IG9sZFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbGRTdGF0ZS5jb25maWcuZmFjZXRzO1xuICAgICAgICBmb3IgKGxldCBpZCBpbiBmYWNldHMpIHtcbiAgICAgICAgICAgIGxldCBwcm92aWRlcnMgPSBmYWNldHNbaWRdLCBmYWNldCA9IHByb3ZpZGVyc1swXS5mYWNldDtcbiAgICAgICAgICAgIGxldCBvbGRQcm92aWRlcnMgPSBvbGRGYWNldHMgJiYgb2xkRmFjZXRzW2lkXSB8fCBbXTtcbiAgICAgICAgICAgIGlmIChwcm92aWRlcnMuZXZlcnkocCA9PiBwLnR5cGUgPT0gMCAvKiBQcm92aWRlci5TdGF0aWMgKi8pKSB7XG4gICAgICAgICAgICAgICAgYWRkcmVzc1tmYWNldC5pZF0gPSAoc3RhdGljVmFsdWVzLmxlbmd0aCA8PCAxKSB8IDE7XG4gICAgICAgICAgICAgICAgaWYgKHNhbWVBcnJheShvbGRQcm92aWRlcnMsIHByb3ZpZGVycykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVzLnB1c2gob2xkU3RhdGUuZmFjZXQoZmFjZXQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGZhY2V0LmNvbWJpbmUocHJvdmlkZXJzLm1hcChwID0+IHAudmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVzLnB1c2gob2xkU3RhdGUgJiYgZmFjZXQuY29tcGFyZSh2YWx1ZSwgb2xkU3RhdGUuZmFjZXQoZmFjZXQpKSA/IG9sZFN0YXRlLmZhY2V0KGZhY2V0KSA6IHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwIG9mIHByb3ZpZGVycykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocC50eXBlID09IDAgLyogUHJvdmlkZXIuU3RhdGljICovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzW3AuaWRdID0gKHN0YXRpY1ZhbHVlcy5sZW5ndGggPDwgMSkgfCAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVzLnB1c2gocC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzW3AuaWRdID0gZHluYW1pY1Nsb3RzLmxlbmd0aCA8PCAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pY1Nsb3RzLnB1c2goYSA9PiBwLmR5bmFtaWNTbG90KGEpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhZGRyZXNzW2ZhY2V0LmlkXSA9IGR5bmFtaWNTbG90cy5sZW5ndGggPDwgMTtcbiAgICAgICAgICAgICAgICBkeW5hbWljU2xvdHMucHVzaChhID0+IGR5bmFtaWNGYWNldFNsb3QoYSwgZmFjZXQsIHByb3ZpZGVycykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBkeW5hbWljID0gZHluYW1pY1Nsb3RzLm1hcChmID0+IGYoYWRkcmVzcykpO1xuICAgICAgICByZXR1cm4gbmV3IENvbmZpZ3VyYXRpb24oYmFzZSwgbmV3Q29tcGFydG1lbnRzLCBkeW5hbWljLCBhZGRyZXNzLCBzdGF0aWNWYWx1ZXMsIGZhY2V0cyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZmxhdHRlbihleHRlbnNpb24sIGNvbXBhcnRtZW50cywgbmV3Q29tcGFydG1lbnRzKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtbXSwgW10sIFtdLCBbXSwgW11dO1xuICAgIGxldCBzZWVuID0gbmV3IE1hcCgpO1xuICAgIGZ1bmN0aW9uIGlubmVyKGV4dCwgcHJlYykge1xuICAgICAgICBsZXQga25vd24gPSBzZWVuLmdldChleHQpO1xuICAgICAgICBpZiAoa25vd24gIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGtub3duIDw9IHByZWMpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IGZvdW5kID0gcmVzdWx0W2tub3duXS5pbmRleE9mKGV4dCk7XG4gICAgICAgICAgICBpZiAoZm91bmQgPiAtMSlcbiAgICAgICAgICAgICAgICByZXN1bHRba25vd25dLnNwbGljZShmb3VuZCwgMSk7XG4gICAgICAgICAgICBpZiAoZXh0IGluc3RhbmNlb2YgQ29tcGFydG1lbnRJbnN0YW5jZSlcbiAgICAgICAgICAgICAgICBuZXdDb21wYXJ0bWVudHMuZGVsZXRlKGV4dC5jb21wYXJ0bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgc2Vlbi5zZXQoZXh0LCBwcmVjKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZXh0KSkge1xuICAgICAgICAgICAgZm9yIChsZXQgZSBvZiBleHQpXG4gICAgICAgICAgICAgICAgaW5uZXIoZSwgcHJlYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXh0IGluc3RhbmNlb2YgQ29tcGFydG1lbnRJbnN0YW5jZSkge1xuICAgICAgICAgICAgaWYgKG5ld0NvbXBhcnRtZW50cy5oYXMoZXh0LmNvbXBhcnRtZW50KSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgRHVwbGljYXRlIHVzZSBvZiBjb21wYXJ0bWVudCBpbiBleHRlbnNpb25zYCk7XG4gICAgICAgICAgICBsZXQgY29udGVudCA9IGNvbXBhcnRtZW50cy5nZXQoZXh0LmNvbXBhcnRtZW50KSB8fCBleHQuaW5uZXI7XG4gICAgICAgICAgICBuZXdDb21wYXJ0bWVudHMuc2V0KGV4dC5jb21wYXJ0bWVudCwgY29udGVudCk7XG4gICAgICAgICAgICBpbm5lcihjb250ZW50LCBwcmVjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHQgaW5zdGFuY2VvZiBQcmVjRXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICBpbm5lcihleHQuaW5uZXIsIGV4dC5wcmVjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHQgaW5zdGFuY2VvZiBTdGF0ZUZpZWxkKSB7XG4gICAgICAgICAgICByZXN1bHRbcHJlY10ucHVzaChleHQpO1xuICAgICAgICAgICAgaWYgKGV4dC5wcm92aWRlcylcbiAgICAgICAgICAgICAgICBpbm5lcihleHQucHJvdmlkZXMsIHByZWMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4dCBpbnN0YW5jZW9mIEZhY2V0UHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHJlc3VsdFtwcmVjXS5wdXNoKGV4dCk7XG4gICAgICAgICAgICBpZiAoZXh0LmZhY2V0LmV4dGVuc2lvbnMpXG4gICAgICAgICAgICAgICAgaW5uZXIoZXh0LmZhY2V0LmV4dGVuc2lvbnMsIFByZWNfLmRlZmF1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSBleHQuZXh0ZW5zaW9uO1xuICAgICAgICAgICAgaWYgKCFjb250ZW50KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGV4dGVuc2lvbiB2YWx1ZSBpbiBleHRlbnNpb24gc2V0ICgke2V4dH0pLiBUaGlzIHNvbWV0aW1lcyBoYXBwZW5zIGJlY2F1c2UgbXVsdGlwbGUgaW5zdGFuY2VzIG9mIEBjb2RlbWlycm9yL3N0YXRlIGFyZSBsb2FkZWQsIGJyZWFraW5nIGluc3RhbmNlb2YgY2hlY2tzLmApO1xuICAgICAgICAgICAgaW5uZXIoY29udGVudCwgcHJlYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5uZXIoZXh0ZW5zaW9uLCBQcmVjXy5kZWZhdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0LnJlZHVjZSgoYSwgYikgPT4gYS5jb25jYXQoYikpO1xufVxuZnVuY3Rpb24gZW5zdXJlQWRkcihzdGF0ZSwgYWRkcikge1xuICAgIGlmIChhZGRyICYgMSlcbiAgICAgICAgcmV0dXJuIDIgLyogU2xvdFN0YXR1cy5Db21wdXRlZCAqLztcbiAgICBsZXQgaWR4ID0gYWRkciA+PiAxO1xuICAgIGxldCBzdGF0dXMgPSBzdGF0ZS5zdGF0dXNbaWR4XTtcbiAgICBpZiAoc3RhdHVzID09IDQgLyogU2xvdFN0YXR1cy5Db21wdXRpbmcgKi8pXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkN5Y2xpYyBkZXBlbmRlbmN5IGJldHdlZW4gZmllbGRzIGFuZC9vciBmYWNldHNcIik7XG4gICAgaWYgKHN0YXR1cyAmIDIgLyogU2xvdFN0YXR1cy5Db21wdXRlZCAqLylcbiAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICBzdGF0ZS5zdGF0dXNbaWR4XSA9IDQgLyogU2xvdFN0YXR1cy5Db21wdXRpbmcgKi87XG4gICAgbGV0IGNoYW5nZWQgPSBzdGF0ZS5jb21wdXRlU2xvdChzdGF0ZSwgc3RhdGUuY29uZmlnLmR5bmFtaWNTbG90c1tpZHhdKTtcbiAgICByZXR1cm4gc3RhdGUuc3RhdHVzW2lkeF0gPSAyIC8qIFNsb3RTdGF0dXMuQ29tcHV0ZWQgKi8gfCBjaGFuZ2VkO1xufVxuZnVuY3Rpb24gZ2V0QWRkcihzdGF0ZSwgYWRkcikge1xuICAgIHJldHVybiBhZGRyICYgMSA/IHN0YXRlLmNvbmZpZy5zdGF0aWNWYWx1ZXNbYWRkciA+PiAxXSA6IHN0YXRlLnZhbHVlc1thZGRyID4+IDFdO1xufVxuXG5jb25zdCBsYW5ndWFnZURhdGEgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBhbGxvd011bHRpcGxlU2VsZWN0aW9ucyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuc29tZSh2ID0+IHYpLFxuICAgIHN0YXRpYzogdHJ1ZVxufSk7XG5jb25zdCBsaW5lU2VwYXJhdG9yID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5sZW5ndGggPyB2YWx1ZXNbMF0gOiB1bmRlZmluZWQsXG4gICAgc3RhdGljOiB0cnVlXG59KTtcbmNvbnN0IGNoYW5nZUZpbHRlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IHRyYW5zYWN0aW9uRmlsdGVyID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgdHJhbnNhY3Rpb25FeHRlbmRlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IHJlYWRPbmx5ID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5sZW5ndGggPyB2YWx1ZXNbMF0gOiBmYWxzZVxufSk7XG5cbi8qKlxuQW5ub3RhdGlvbnMgYXJlIHRhZ2dlZCB2YWx1ZXMgdGhhdCBhcmUgdXNlZCB0byBhZGQgbWV0YWRhdGEgdG9cbnRyYW5zYWN0aW9ucyBpbiBhbiBleHRlbnNpYmxlIHdheS4gVGhleSBzaG91bGQgYmUgdXNlZCB0byBtb2RlbFxudGhpbmdzIHRoYXQgZWZmZWN0IHRoZSBlbnRpcmUgdHJhbnNhY3Rpb24gKHN1Y2ggYXMgaXRzIFt0aW1lXG5zdGFtcF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbl50aW1lKSBvciBpbmZvcm1hdGlvbiBhYm91dCBpdHNcbltvcmlnaW5dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25edXNlckV2ZW50KSkuIEZvciBlZmZlY3RzIHRoYXQgaGFwcGVuXG5fYWxvbmdzaWRlXyB0aGUgb3RoZXIgY2hhbmdlcyBtYWRlIGJ5IHRoZSB0cmFuc2FjdGlvbiwgW3N0YXRlXG5lZmZlY3RzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlN0YXRlRWZmZWN0KSBhcmUgbW9yZSBhcHByb3ByaWF0ZS5cbiovXG5jbGFzcyBBbm5vdGF0aW9uIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBhbm5vdGF0aW9uIHR5cGUuXG4gICAgKi9cbiAgICB0eXBlLCBcbiAgICAvKipcbiAgICBUaGUgdmFsdWUgb2YgdGhpcyBhbm5vdGF0aW9uLlxuICAgICovXG4gICAgdmFsdWUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSBuZXcgdHlwZSBvZiBhbm5vdGF0aW9uLlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZSgpIHsgcmV0dXJuIG5ldyBBbm5vdGF0aW9uVHlwZSgpOyB9XG59XG4vKipcbk1hcmtlciB0aGF0IGlkZW50aWZpZXMgYSB0eXBlIG9mIFthbm5vdGF0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkFubm90YXRpb24pLlxuKi9cbmNsYXNzIEFubm90YXRpb25UeXBlIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBhbm5vdGF0aW9uLlxuICAgICovXG4gICAgb2YodmFsdWUpIHsgcmV0dXJuIG5ldyBBbm5vdGF0aW9uKHRoaXMsIHZhbHVlKTsgfVxufVxuLyoqXG5SZXByZXNlbnRhdGlvbiBvZiBhIHR5cGUgb2Ygc3RhdGUgZWZmZWN0LiBEZWZpbmVkIHdpdGhcbltgU3RhdGVFZmZlY3QuZGVmaW5lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TdGF0ZUVmZmVjdF5kZWZpbmUpLlxuKi9cbmNsYXNzIFN0YXRlRWZmZWN0VHlwZSB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBUaGUgYGFueWAgdHlwZXMgaW4gdGhlc2UgZnVuY3Rpb24gdHlwZXMgYXJlIHRoZXJlIHRvIHdvcmtcbiAgICAvLyBhcm91bmQgVHlwZVNjcmlwdCBpc3N1ZSAjMzc2MzEsIHdoZXJlIHRoZSB0eXBlIGd1YXJkIG9uXG4gICAgLy8gYFN0YXRlRWZmZWN0LmlzYCBteXN0ZXJpb3VzbHkgc3RvcHMgd29ya2luZyB3aGVuIHRoZXNlIHByb3Blcmx5XG4gICAgLy8gaGF2ZSB0eXBlIGBWYWx1ZWAuXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBtYXApIHtcbiAgICAgICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIFtzdGF0ZSBlZmZlY3RdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVFZmZlY3QpIGluc3RhbmNlIG9mIHRoaXNcbiAgICB0eXBlLlxuICAgICovXG4gICAgb2YodmFsdWUpIHsgcmV0dXJuIG5ldyBTdGF0ZUVmZmVjdCh0aGlzLCB2YWx1ZSk7IH1cbn1cbi8qKlxuU3RhdGUgZWZmZWN0cyBjYW4gYmUgdXNlZCB0byByZXByZXNlbnQgYWRkaXRpb25hbCBlZmZlY3RzXG5hc3NvY2lhdGVkIHdpdGggYSBbdHJhbnNhY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb24uZWZmZWN0cykuIFRoZXlcbmFyZSBvZnRlbiB1c2VmdWwgdG8gbW9kZWwgY2hhbmdlcyB0byBjdXN0b20gW3N0YXRlXG5maWVsZHNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVGaWVsZCksIHdoZW4gdGhvc2UgY2hhbmdlcyBhcmVuJ3QgaW1wbGljaXQgaW5cbmRvY3VtZW50IG9yIHNlbGVjdGlvbiBjaGFuZ2VzLlxuKi9cbmNsYXNzIFN0YXRlRWZmZWN0IHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdHlwZSwgXG4gICAgLyoqXG4gICAgVGhlIHZhbHVlIG9mIHRoaXMgZWZmZWN0LlxuICAgICovXG4gICAgdmFsdWUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICBNYXAgdGhpcyBlZmZlY3QgdGhyb3VnaCBhIHBvc2l0aW9uIG1hcHBpbmcuIFdpbGwgcmV0dXJuXG4gICAgYHVuZGVmaW5lZGAgd2hlbiB0aGF0IGVuZHMgdXAgZGVsZXRpbmcgdGhlIGVmZmVjdC5cbiAgICAqL1xuICAgIG1hcChtYXBwaW5nKSB7XG4gICAgICAgIGxldCBtYXBwZWQgPSB0aGlzLnR5cGUubWFwKHRoaXMudmFsdWUsIG1hcHBpbmcpO1xuICAgICAgICByZXR1cm4gbWFwcGVkID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBtYXBwZWQgPT0gdGhpcy52YWx1ZSA/IHRoaXMgOiBuZXcgU3RhdGVFZmZlY3QodGhpcy50eXBlLCBtYXBwZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICBUZWxscyB5b3Ugd2hldGhlciB0aGlzIGVmZmVjdCBvYmplY3QgaXMgb2YgYSBnaXZlblxuICAgIFt0eXBlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlN0YXRlRWZmZWN0VHlwZSkuXG4gICAgKi9cbiAgICBpcyh0eXBlKSB7IHJldHVybiB0aGlzLnR5cGUgPT0gdHlwZTsgfVxuICAgIC8qKlxuICAgIERlZmluZSBhIG5ldyBlZmZlY3QgdHlwZS4gVGhlIHR5cGUgcGFyYW1ldGVyIGluZGljYXRlcyB0aGUgdHlwZVxuICAgIG9mIHZhbHVlcyB0aGF0IGhpcyBlZmZlY3QgaG9sZHMuIEl0IHNob3VsZCBiZSBhIHR5cGUgdGhhdFxuICAgIGRvZXNuJ3QgaW5jbHVkZSBgdW5kZWZpbmVkYCwgc2luY2UgdGhhdCBpcyB1c2VkIGluXG4gICAgW21hcHBpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVFZmZlY3QubWFwKSB0byBpbmRpY2F0ZSB0aGF0IGFuIGVmZmVjdCBpc1xuICAgIHJlbW92ZWQuXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKHNwZWMgPSB7fSkge1xuICAgICAgICByZXR1cm4gbmV3IFN0YXRlRWZmZWN0VHlwZShzcGVjLm1hcCB8fCAodiA9PiB2KSk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hcCBhbiBhcnJheSBvZiBlZmZlY3RzIHRocm91Z2ggYSBjaGFuZ2Ugc2V0LlxuICAgICovXG4gICAgc3RhdGljIG1hcEVmZmVjdHMoZWZmZWN0cywgbWFwcGluZykge1xuICAgICAgICBpZiAoIWVmZmVjdHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGVmZmVjdHM7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIGVmZmVjdHMpIHtcbiAgICAgICAgICAgIGxldCBtYXBwZWQgPSBlZmZlY3QubWFwKG1hcHBpbmcpO1xuICAgICAgICAgICAgaWYgKG1hcHBlZClcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChtYXBwZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG5UaGlzIGVmZmVjdCBjYW4gYmUgdXNlZCB0byByZWNvbmZpZ3VyZSB0aGUgcm9vdCBleHRlbnNpb25zIG9mXG50aGUgZWRpdG9yLiBEb2luZyB0aGlzIHdpbGwgZGlzY2FyZCBhbnkgZXh0ZW5zaW9uc1xuW2FwcGVuZGVkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlN0YXRlRWZmZWN0XmFwcGVuZENvbmZpZyksIGJ1dCBkb2VzIG5vdCByZXNldFxudGhlIGNvbnRlbnQgb2YgW3JlY29uZmlndXJlZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5Db21wYXJ0bWVudC5yZWNvbmZpZ3VyZSlcbmNvbXBhcnRtZW50cy5cbiovXG5TdGF0ZUVmZmVjdC5yZWNvbmZpZ3VyZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbi8qKlxuQXBwZW5kIGV4dGVuc2lvbnMgdG8gdGhlIHRvcC1sZXZlbCBjb25maWd1cmF0aW9uIG9mIHRoZSBlZGl0b3IuXG4qL1xuU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuLyoqXG5DaGFuZ2VzIHRvIHRoZSBlZGl0b3Igc3RhdGUgYXJlIGdyb3VwZWQgaW50byB0cmFuc2FjdGlvbnMuXG5UeXBpY2FsbHksIGEgdXNlciBhY3Rpb24gY3JlYXRlcyBhIHNpbmdsZSB0cmFuc2FjdGlvbiwgd2hpY2ggbWF5XG5jb250YWluIGFueSBudW1iZXIgb2YgZG9jdW1lbnQgY2hhbmdlcywgbWF5IGNoYW5nZSB0aGUgc2VsZWN0aW9uLFxub3IgaGF2ZSBvdGhlciBlZmZlY3RzLiBDcmVhdGUgYSB0cmFuc2FjdGlvbiBieSBjYWxsaW5nXG5bYEVkaXRvclN0YXRlLnVwZGF0ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUudXBkYXRlKSwgb3IgaW1tZWRpYXRlbHlcbmRpc3BhdGNoIG9uZSBieSBjYWxsaW5nXG5bYEVkaXRvclZpZXcuZGlzcGF0Y2hgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5kaXNwYXRjaCkuXG4qL1xuY2xhc3MgVHJhbnNhY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBzdGF0ZSBmcm9tIHdoaWNoIHRoZSB0cmFuc2FjdGlvbiBzdGFydHMuXG4gICAgKi9cbiAgICBzdGFydFN0YXRlLCBcbiAgICAvKipcbiAgICBUaGUgZG9jdW1lbnQgY2hhbmdlcyBtYWRlIGJ5IHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgKi9cbiAgICBjaGFuZ2VzLCBcbiAgICAvKipcbiAgICBUaGUgc2VsZWN0aW9uIHNldCBieSB0aGlzIHRyYW5zYWN0aW9uLCBvciB1bmRlZmluZWQgaWYgaXRcbiAgICBkb2Vzbid0IGV4cGxpY2l0bHkgc2V0IGEgc2VsZWN0aW9uLlxuICAgICovXG4gICAgc2VsZWN0aW9uLCBcbiAgICAvKipcbiAgICBUaGUgZWZmZWN0cyBhZGRlZCB0byB0aGUgdHJhbnNhY3Rpb24uXG4gICAgKi9cbiAgICBlZmZlY3RzLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFubm90YXRpb25zLCBcbiAgICAvKipcbiAgICBXaGV0aGVyIHRoZSBzZWxlY3Rpb24gc2hvdWxkIGJlIHNjcm9sbGVkIGludG8gdmlldyBhZnRlciB0aGlzXG4gICAgdHJhbnNhY3Rpb24gaXMgZGlzcGF0Y2hlZC5cbiAgICAqL1xuICAgIHNjcm9sbEludG9WaWV3KSB7XG4gICAgICAgIHRoaXMuc3RhcnRTdGF0ZSA9IHN0YXJ0U3RhdGU7XG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IGNoYW5nZXM7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xuICAgICAgICB0aGlzLmVmZmVjdHMgPSBlZmZlY3RzO1xuICAgICAgICB0aGlzLmFubm90YXRpb25zID0gYW5ub3RhdGlvbnM7XG4gICAgICAgIHRoaXMuc2Nyb2xsSW50b1ZpZXcgPSBzY3JvbGxJbnRvVmlldztcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLl9kb2MgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuX3N0YXRlID0gbnVsbDtcbiAgICAgICAgaWYgKHNlbGVjdGlvbilcbiAgICAgICAgICAgIGNoZWNrU2VsZWN0aW9uKHNlbGVjdGlvbiwgY2hhbmdlcy5uZXdMZW5ndGgpO1xuICAgICAgICBpZiAoIWFubm90YXRpb25zLnNvbWUoKGEpID0+IGEudHlwZSA9PSBUcmFuc2FjdGlvbi50aW1lKSlcbiAgICAgICAgICAgIHRoaXMuYW5ub3RhdGlvbnMgPSBhbm5vdGF0aW9ucy5jb25jYXQoVHJhbnNhY3Rpb24udGltZS5vZihEYXRlLm5vdygpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShzdGFydFN0YXRlLCBjaGFuZ2VzLCBzZWxlY3Rpb24sIGVmZmVjdHMsIGFubm90YXRpb25zLCBzY3JvbGxJbnRvVmlldykge1xuICAgICAgICByZXR1cm4gbmV3IFRyYW5zYWN0aW9uKHN0YXJ0U3RhdGUsIGNoYW5nZXMsIHNlbGVjdGlvbiwgZWZmZWN0cywgYW5ub3RhdGlvbnMsIHNjcm9sbEludG9WaWV3KTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIG5ldyBkb2N1bWVudCBwcm9kdWNlZCBieSB0aGUgdHJhbnNhY3Rpb24uIENvbnRyYXJ5IHRvXG4gICAgW2Auc3RhdGVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uLnN0YXRlKWAuZG9jYCwgYWNjZXNzaW5nIHRoaXMgd29uJ3RcbiAgICBmb3JjZSB0aGUgZW50aXJlIG5ldyBzdGF0ZSB0byBiZSBjb21wdXRlZCByaWdodCBhd2F5LCBzbyBpdCBpc1xuICAgIHJlY29tbWVuZGVkIHRoYXQgW3RyYW5zYWN0aW9uXG4gICAgZmlsdGVyc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV50cmFuc2FjdGlvbkZpbHRlcikgdXNlIHRoaXMgZ2V0dGVyXG4gICAgd2hlbiB0aGV5IG5lZWQgdG8gbG9vayBhdCB0aGUgbmV3IGRvY3VtZW50LlxuICAgICovXG4gICAgZ2V0IG5ld0RvYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvYyB8fCAodGhpcy5fZG9jID0gdGhpcy5jaGFuZ2VzLmFwcGx5KHRoaXMuc3RhcnRTdGF0ZS5kb2MpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIG5ldyBzZWxlY3Rpb24gcHJvZHVjZWQgYnkgdGhlIHRyYW5zYWN0aW9uLiBJZlxuICAgIFtgdGhpcy5zZWxlY3Rpb25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uLnNlbGVjdGlvbikgaXMgdW5kZWZpbmVkLFxuICAgIHRoaXMgd2lsbCBbbWFwXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclNlbGVjdGlvbi5tYXApIHRoZSBzdGFydCBzdGF0ZSdzXG4gICAgY3VycmVudCBzZWxlY3Rpb24gdGhyb3VnaCB0aGUgY2hhbmdlcyBtYWRlIGJ5IHRoZSB0cmFuc2FjdGlvbi5cbiAgICAqL1xuICAgIGdldCBuZXdTZWxlY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbiB8fCB0aGlzLnN0YXJ0U3RhdGUuc2VsZWN0aW9uLm1hcCh0aGlzLmNoYW5nZXMpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgbmV3IHN0YXRlIGNyZWF0ZWQgYnkgdGhlIHRyYW5zYWN0aW9uLiBDb21wdXRlZCBvbiBkZW1hbmRcbiAgICAoYnV0IHJldGFpbmVkIGZvciBzdWJzZXF1ZW50IGFjY2VzcyksIHNvIGl0IGlzIHJlY29tbWVuZGVkIG5vdCB0b1xuICAgIGFjY2VzcyBpdCBpbiBbdHJhbnNhY3Rpb25cbiAgICBmaWx0ZXJzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXnRyYW5zYWN0aW9uRmlsdGVyKSB3aGVuIHBvc3NpYmxlLlxuICAgICovXG4gICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3N0YXRlKVxuICAgICAgICAgICAgdGhpcy5zdGFydFN0YXRlLmFwcGx5VHJhbnNhY3Rpb24odGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gYW5ub3RhdGlvbiB0eXBlLCBpZiBhbnkuXG4gICAgKi9cbiAgICBhbm5vdGF0aW9uKHR5cGUpIHtcbiAgICAgICAgZm9yIChsZXQgYW5uIG9mIHRoaXMuYW5ub3RhdGlvbnMpXG4gICAgICAgICAgICBpZiAoYW5uLnR5cGUgPT0gdHlwZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5uLnZhbHVlO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICBJbmRpY2F0ZXMgd2hldGhlciB0aGUgdHJhbnNhY3Rpb24gY2hhbmdlZCB0aGUgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBnZXQgZG9jQ2hhbmdlZCgpIHsgcmV0dXJuICF0aGlzLmNoYW5nZXMuZW1wdHk7IH1cbiAgICAvKipcbiAgICBJbmRpY2F0ZXMgd2hldGhlciB0aGlzIHRyYW5zYWN0aW9uIHJlY29uZmlndXJlcyB0aGUgc3RhdGVcbiAgICAodGhyb3VnaCBhIFtjb25maWd1cmF0aW9uIGNvbXBhcnRtZW50XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNvbXBhcnRtZW50KSBvclxuICAgIHdpdGggYSB0b3AtbGV2ZWwgY29uZmlndXJhdGlvblxuICAgIFtlZmZlY3RdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVFZmZlY3RecmVjb25maWd1cmUpLlxuICAgICovXG4gICAgZ2V0IHJlY29uZmlndXJlZCgpIHsgcmV0dXJuIHRoaXMuc3RhcnRTdGF0ZS5jb25maWcgIT0gdGhpcy5zdGF0ZS5jb25maWc7IH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRydWUgaWYgdGhlIHRyYW5zYWN0aW9uIGhhcyBhIFt1c2VyXG4gICAgZXZlbnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25edXNlckV2ZW50KSBhbm5vdGF0aW9uIHRoYXQgaXMgZXF1YWwgdG9cbiAgICBvciBtb3JlIHNwZWNpZmljIHRoYW4gYGV2ZW50YC4gRm9yIGV4YW1wbGUsIGlmIHRoZSB0cmFuc2FjdGlvblxuICAgIGhhcyBgXCJzZWxlY3QucG9pbnRlclwiYCBhcyB1c2VyIGV2ZW50LCBgXCJzZWxlY3RcImAgYW5kXG4gICAgYFwic2VsZWN0LnBvaW50ZXJcImAgd2lsbCBtYXRjaCBpdC5cbiAgICAqL1xuICAgIGlzVXNlckV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5hbm5vdGF0aW9uKFRyYW5zYWN0aW9uLnVzZXJFdmVudCk7XG4gICAgICAgIHJldHVybiAhIShlICYmIChlID09IGV2ZW50IHx8IGUubGVuZ3RoID4gZXZlbnQubGVuZ3RoICYmIGUuc2xpY2UoMCwgZXZlbnQubGVuZ3RoKSA9PSBldmVudCAmJiBlW2V2ZW50Lmxlbmd0aF0gPT0gXCIuXCIpKTtcbiAgICB9XG59XG4vKipcbkFubm90YXRpb24gdXNlZCB0byBzdG9yZSB0cmFuc2FjdGlvbiB0aW1lc3RhbXBzLiBBdXRvbWF0aWNhbGx5XG5hZGRlZCB0byBldmVyeSB0cmFuc2FjdGlvbiwgaG9sZGluZyBgRGF0ZS5ub3coKWAuXG4qL1xuVHJhbnNhY3Rpb24udGltZSA9IC8qQF9fUFVSRV9fKi9Bbm5vdGF0aW9uLmRlZmluZSgpO1xuLyoqXG5Bbm5vdGF0aW9uIHVzZWQgdG8gYXNzb2NpYXRlIGEgdHJhbnNhY3Rpb24gd2l0aCBhIHVzZXIgaW50ZXJmYWNlXG5ldmVudC4gSG9sZHMgYSBzdHJpbmcgaWRlbnRpZnlpbmcgdGhlIGV2ZW50LCB1c2luZyBhXG5kb3Qtc2VwYXJhdGVkIGZvcm1hdCB0byBzdXBwb3J0IGF0dGFjaGluZyBtb3JlIHNwZWNpZmljXG5pbmZvcm1hdGlvbi4gVGhlIGV2ZW50cyB1c2VkIGJ5IHRoZSBjb3JlIGxpYnJhcmllcyBhcmU6XG5cbiAtIGBcImlucHV0XCJgIHdoZW4gY29udGVudCBpcyBlbnRlcmVkXG4gICAtIGBcImlucHV0LnR5cGVcImAgZm9yIHR5cGVkIGlucHV0XG4gICAgIC0gYFwiaW5wdXQudHlwZS5jb21wb3NlXCJgIGZvciBjb21wb3NpdGlvblxuICAgLSBgXCJpbnB1dC5wYXN0ZVwiYCBmb3IgcGFzdGVkIGlucHV0XG4gICAtIGBcImlucHV0LmRyb3BcImAgd2hlbiBhZGRpbmcgY29udGVudCB3aXRoIGRyYWctYW5kLWRyb3BcbiAgIC0gYFwiaW5wdXQuY29tcGxldGVcImAgd2hlbiBhdXRvY29tcGxldGluZ1xuIC0gYFwiZGVsZXRlXCJgIHdoZW4gdGhlIHVzZXIgZGVsZXRlcyBjb250ZW50XG4gICAtIGBcImRlbGV0ZS5zZWxlY3Rpb25cImAgd2hlbiBkZWxldGluZyB0aGUgc2VsZWN0aW9uXG4gICAtIGBcImRlbGV0ZS5mb3J3YXJkXCJgIHdoZW4gZGVsZXRpbmcgZm9yd2FyZCBmcm9tIHRoZSBzZWxlY3Rpb25cbiAgIC0gYFwiZGVsZXRlLmJhY2t3YXJkXCJgIHdoZW4gZGVsZXRpbmcgYmFja3dhcmQgZnJvbSB0aGUgc2VsZWN0aW9uXG4gICAtIGBcImRlbGV0ZS5jdXRcImAgd2hlbiBjdXR0aW5nIHRvIHRoZSBjbGlwYm9hcmRcbiAtIGBcIm1vdmVcImAgd2hlbiBjb250ZW50IGlzIG1vdmVkXG4gICAtIGBcIm1vdmUuZHJvcFwiYCB3aGVuIGNvbnRlbnQgaXMgbW92ZWQgd2l0aGluIHRoZSBlZGl0b3IgdGhyb3VnaCBkcmFnLWFuZC1kcm9wXG4gLSBgXCJzZWxlY3RcImAgd2hlbiBleHBsaWNpdGx5IGNoYW5naW5nIHRoZSBzZWxlY3Rpb25cbiAgIC0gYFwic2VsZWN0LnBvaW50ZXJcImAgd2hlbiBzZWxlY3Rpbmcgd2l0aCBhIG1vdXNlIG9yIG90aGVyIHBvaW50aW5nIGRldmljZVxuIC0gYFwidW5kb1wiYCBhbmQgYFwicmVkb1wiYCBmb3IgaGlzdG9yeSBhY3Rpb25zXG5cblVzZSBbYGlzVXNlckV2ZW50YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbi5pc1VzZXJFdmVudCkgdG8gY2hlY2tcbndoZXRoZXIgdGhlIGFubm90YXRpb24gbWF0Y2hlcyBhIGdpdmVuIGV2ZW50LlxuKi9cblRyYW5zYWN0aW9uLnVzZXJFdmVudCA9IC8qQF9fUFVSRV9fKi9Bbm5vdGF0aW9uLmRlZmluZSgpO1xuLyoqXG5Bbm5vdGF0aW9uIGluZGljYXRpbmcgd2hldGhlciBhIHRyYW5zYWN0aW9uIHNob3VsZCBiZSBhZGRlZCB0b1xudGhlIHVuZG8gaGlzdG9yeSBvciBub3QuXG4qL1xuVHJhbnNhY3Rpb24uYWRkVG9IaXN0b3J5ID0gLypAX19QVVJFX18qL0Fubm90YXRpb24uZGVmaW5lKCk7XG4vKipcbkFubm90YXRpb24gaW5kaWNhdGluZyAod2hlbiBwcmVzZW50IGFuZCB0cnVlKSB0aGF0IGEgdHJhbnNhY3Rpb25cbnJlcHJlc2VudHMgYSBjaGFuZ2UgbWFkZSBieSBzb21lIG90aGVyIGFjdG9yLCBub3QgdGhlIHVzZXIuIFRoaXNcbmlzIHVzZWQsIGZvciBleGFtcGxlLCB0byB0YWcgb3RoZXIgcGVvcGxlJ3MgY2hhbmdlcyBpblxuY29sbGFib3JhdGl2ZSBlZGl0aW5nLlxuKi9cblRyYW5zYWN0aW9uLnJlbW90ZSA9IC8qQF9fUFVSRV9fKi9Bbm5vdGF0aW9uLmRlZmluZSgpO1xuZnVuY3Rpb24gam9pblJhbmdlcyhhLCBiKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IGlBID0gMCwgaUIgPSAwOzspIHtcbiAgICAgICAgbGV0IGZyb20sIHRvO1xuICAgICAgICBpZiAoaUEgPCBhLmxlbmd0aCAmJiAoaUIgPT0gYi5sZW5ndGggfHwgYltpQl0gPj0gYVtpQV0pKSB7XG4gICAgICAgICAgICBmcm9tID0gYVtpQSsrXTtcbiAgICAgICAgICAgIHRvID0gYVtpQSsrXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpQiA8IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICBmcm9tID0gYltpQisrXTtcbiAgICAgICAgICAgIHRvID0gYltpQisrXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICBpZiAoIXJlc3VsdC5sZW5ndGggfHwgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA8IGZyb20pXG4gICAgICAgICAgICByZXN1bHQucHVzaChmcm9tLCB0byk7XG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gPCB0bylcbiAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gPSB0bztcbiAgICB9XG59XG5mdW5jdGlvbiBtZXJnZVRyYW5zYWN0aW9uKGEsIGIsIHNlcXVlbnRpYWwpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IG1hcEZvckEsIG1hcEZvckIsIGNoYW5nZXM7XG4gICAgaWYgKHNlcXVlbnRpYWwpIHtcbiAgICAgICAgbWFwRm9yQSA9IGIuY2hhbmdlcztcbiAgICAgICAgbWFwRm9yQiA9IENoYW5nZVNldC5lbXB0eShiLmNoYW5nZXMubGVuZ3RoKTtcbiAgICAgICAgY2hhbmdlcyA9IGEuY2hhbmdlcy5jb21wb3NlKGIuY2hhbmdlcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtYXBGb3JBID0gYi5jaGFuZ2VzLm1hcChhLmNoYW5nZXMpO1xuICAgICAgICBtYXBGb3JCID0gYS5jaGFuZ2VzLm1hcERlc2MoYi5jaGFuZ2VzLCB0cnVlKTtcbiAgICAgICAgY2hhbmdlcyA9IGEuY2hhbmdlcy5jb21wb3NlKG1hcEZvckEpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjaGFuZ2VzLFxuICAgICAgICBzZWxlY3Rpb246IGIuc2VsZWN0aW9uID8gYi5zZWxlY3Rpb24ubWFwKG1hcEZvckIpIDogKF9hID0gYS5zZWxlY3Rpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXAobWFwRm9yQSksXG4gICAgICAgIGVmZmVjdHM6IFN0YXRlRWZmZWN0Lm1hcEVmZmVjdHMoYS5lZmZlY3RzLCBtYXBGb3JBKS5jb25jYXQoU3RhdGVFZmZlY3QubWFwRWZmZWN0cyhiLmVmZmVjdHMsIG1hcEZvckIpKSxcbiAgICAgICAgYW5ub3RhdGlvbnM6IGEuYW5ub3RhdGlvbnMubGVuZ3RoID8gYS5hbm5vdGF0aW9ucy5jb25jYXQoYi5hbm5vdGF0aW9ucykgOiBiLmFubm90YXRpb25zLFxuICAgICAgICBzY3JvbGxJbnRvVmlldzogYS5zY3JvbGxJbnRvVmlldyB8fCBiLnNjcm9sbEludG9WaWV3XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2FjdGlvbklubmVyKHN0YXRlLCBzcGVjLCBkb2NTaXplKSB7XG4gICAgbGV0IHNlbCA9IHNwZWMuc2VsZWN0aW9uLCBhbm5vdGF0aW9ucyA9IGFzQXJyYXkoc3BlYy5hbm5vdGF0aW9ucyk7XG4gICAgaWYgKHNwZWMudXNlckV2ZW50KVxuICAgICAgICBhbm5vdGF0aW9ucyA9IGFubm90YXRpb25zLmNvbmNhdChUcmFuc2FjdGlvbi51c2VyRXZlbnQub2Yoc3BlYy51c2VyRXZlbnQpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjaGFuZ2VzOiBzcGVjLmNoYW5nZXMgaW5zdGFuY2VvZiBDaGFuZ2VTZXQgPyBzcGVjLmNoYW5nZXNcbiAgICAgICAgICAgIDogQ2hhbmdlU2V0Lm9mKHNwZWMuY2hhbmdlcyB8fCBbXSwgZG9jU2l6ZSwgc3RhdGUuZmFjZXQobGluZVNlcGFyYXRvcikpLFxuICAgICAgICBzZWxlY3Rpb246IHNlbCAmJiAoc2VsIGluc3RhbmNlb2YgRWRpdG9yU2VsZWN0aW9uID8gc2VsIDogRWRpdG9yU2VsZWN0aW9uLnNpbmdsZShzZWwuYW5jaG9yLCBzZWwuaGVhZCkpLFxuICAgICAgICBlZmZlY3RzOiBhc0FycmF5KHNwZWMuZWZmZWN0cyksXG4gICAgICAgIGFubm90YXRpb25zLFxuICAgICAgICBzY3JvbGxJbnRvVmlldzogISFzcGVjLnNjcm9sbEludG9WaWV3XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2FjdGlvbihzdGF0ZSwgc3BlY3MsIGZpbHRlcikge1xuICAgIGxldCBzID0gcmVzb2x2ZVRyYW5zYWN0aW9uSW5uZXIoc3RhdGUsIHNwZWNzLmxlbmd0aCA/IHNwZWNzWzBdIDoge30sIHN0YXRlLmRvYy5sZW5ndGgpO1xuICAgIGlmIChzcGVjcy5sZW5ndGggJiYgc3BlY3NbMF0uZmlsdGVyID09PSBmYWxzZSlcbiAgICAgICAgZmlsdGVyID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzcGVjcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc3BlY3NbaV0uZmlsdGVyID09PSBmYWxzZSlcbiAgICAgICAgICAgIGZpbHRlciA9IGZhbHNlO1xuICAgICAgICBsZXQgc2VxID0gISFzcGVjc1tpXS5zZXF1ZW50aWFsO1xuICAgICAgICBzID0gbWVyZ2VUcmFuc2FjdGlvbihzLCByZXNvbHZlVHJhbnNhY3Rpb25Jbm5lcihzdGF0ZSwgc3BlY3NbaV0sIHNlcSA/IHMuY2hhbmdlcy5uZXdMZW5ndGggOiBzdGF0ZS5kb2MubGVuZ3RoKSwgc2VxKTtcbiAgICB9XG4gICAgbGV0IHRyID0gVHJhbnNhY3Rpb24uY3JlYXRlKHN0YXRlLCBzLmNoYW5nZXMsIHMuc2VsZWN0aW9uLCBzLmVmZmVjdHMsIHMuYW5ub3RhdGlvbnMsIHMuc2Nyb2xsSW50b1ZpZXcpO1xuICAgIHJldHVybiBleHRlbmRUcmFuc2FjdGlvbihmaWx0ZXIgPyBmaWx0ZXJUcmFuc2FjdGlvbih0cikgOiB0cik7XG59XG4vLyBGaW5pc2ggYSB0cmFuc2FjdGlvbiBieSBhcHBseWluZyBmaWx0ZXJzIGlmIG5lY2Vzc2FyeS5cbmZ1bmN0aW9uIGZpbHRlclRyYW5zYWN0aW9uKHRyKSB7XG4gICAgbGV0IHN0YXRlID0gdHIuc3RhcnRTdGF0ZTtcbiAgICAvLyBDaGFuZ2UgZmlsdGVyc1xuICAgIGxldCByZXN1bHQgPSB0cnVlO1xuICAgIGZvciAobGV0IGZpbHRlciBvZiBzdGF0ZS5mYWNldChjaGFuZ2VGaWx0ZXIpKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IGZpbHRlcih0cik7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKVxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ID09PSB0cnVlID8gdmFsdWUgOiBqb2luUmFuZ2VzKHJlc3VsdCwgdmFsdWUpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0ICE9PSB0cnVlKSB7XG4gICAgICAgIGxldCBjaGFuZ2VzLCBiYWNrO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgYmFjayA9IHRyLmNoYW5nZXMuaW52ZXJ0ZWREZXNjO1xuICAgICAgICAgICAgY2hhbmdlcyA9IENoYW5nZVNldC5lbXB0eShzdGF0ZS5kb2MubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBmaWx0ZXJlZCA9IHRyLmNoYW5nZXMuZmlsdGVyKHJlc3VsdCk7XG4gICAgICAgICAgICBjaGFuZ2VzID0gZmlsdGVyZWQuY2hhbmdlcztcbiAgICAgICAgICAgIGJhY2sgPSBmaWx0ZXJlZC5maWx0ZXJlZC5tYXBEZXNjKGZpbHRlcmVkLmNoYW5nZXMpLmludmVydGVkRGVzYztcbiAgICAgICAgfVxuICAgICAgICB0ciA9IFRyYW5zYWN0aW9uLmNyZWF0ZShzdGF0ZSwgY2hhbmdlcywgdHIuc2VsZWN0aW9uICYmIHRyLnNlbGVjdGlvbi5tYXAoYmFjayksIFN0YXRlRWZmZWN0Lm1hcEVmZmVjdHModHIuZWZmZWN0cywgYmFjayksIHRyLmFubm90YXRpb25zLCB0ci5zY3JvbGxJbnRvVmlldyk7XG4gICAgfVxuICAgIC8vIFRyYW5zYWN0aW9uIGZpbHRlcnNcbiAgICBsZXQgZmlsdGVycyA9IHN0YXRlLmZhY2V0KHRyYW5zYWN0aW9uRmlsdGVyKTtcbiAgICBmb3IgKGxldCBpID0gZmlsdGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBsZXQgZmlsdGVyZWQgPSBmaWx0ZXJzW2ldKHRyKTtcbiAgICAgICAgaWYgKGZpbHRlcmVkIGluc3RhbmNlb2YgVHJhbnNhY3Rpb24pXG4gICAgICAgICAgICB0ciA9IGZpbHRlcmVkO1xuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGZpbHRlcmVkKSAmJiBmaWx0ZXJlZC5sZW5ndGggPT0gMSAmJiBmaWx0ZXJlZFswXSBpbnN0YW5jZW9mIFRyYW5zYWN0aW9uKVxuICAgICAgICAgICAgdHIgPSBmaWx0ZXJlZFswXTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdHIgPSByZXNvbHZlVHJhbnNhY3Rpb24oc3RhdGUsIGFzQXJyYXkoZmlsdGVyZWQpLCBmYWxzZSk7XG4gICAgfVxuICAgIHJldHVybiB0cjtcbn1cbmZ1bmN0aW9uIGV4dGVuZFRyYW5zYWN0aW9uKHRyKSB7XG4gICAgbGV0IHN0YXRlID0gdHIuc3RhcnRTdGF0ZSwgZXh0ZW5kZXJzID0gc3RhdGUuZmFjZXQodHJhbnNhY3Rpb25FeHRlbmRlciksIHNwZWMgPSB0cjtcbiAgICBmb3IgKGxldCBpID0gZXh0ZW5kZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBleHRlbnNpb24gPSBleHRlbmRlcnNbaV0odHIpO1xuICAgICAgICBpZiAoZXh0ZW5zaW9uICYmIE9iamVjdC5rZXlzKGV4dGVuc2lvbikubGVuZ3RoKVxuICAgICAgICAgICAgc3BlYyA9IG1lcmdlVHJhbnNhY3Rpb24oc3BlYywgcmVzb2x2ZVRyYW5zYWN0aW9uSW5uZXIoc3RhdGUsIGV4dGVuc2lvbiwgdHIuY2hhbmdlcy5uZXdMZW5ndGgpLCB0cnVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHNwZWMgPT0gdHIgPyB0ciA6IFRyYW5zYWN0aW9uLmNyZWF0ZShzdGF0ZSwgdHIuY2hhbmdlcywgdHIuc2VsZWN0aW9uLCBzcGVjLmVmZmVjdHMsIHNwZWMuYW5ub3RhdGlvbnMsIHNwZWMuc2Nyb2xsSW50b1ZpZXcpO1xufVxuY29uc3Qgbm9uZSA9IFtdO1xuZnVuY3Rpb24gYXNBcnJheSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gbm9uZSA6IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdO1xufVxuXG4vKipcblRoZSBjYXRlZ29yaWVzIHByb2R1Y2VkIGJ5IGEgW2NoYXJhY3RlclxuY2F0ZWdvcml6ZXJdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUuY2hhckNhdGVnb3JpemVyKS4gVGhlc2UgYXJlIHVzZWRcbmRvIHRoaW5ncyBsaWtlIHNlbGVjdGluZyBieSB3b3JkLlxuKi9cbnZhciBDaGFyQ2F0ZWdvcnkgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChDaGFyQ2F0ZWdvcnkpIHtcbiAgICAvKipcbiAgICBXb3JkIGNoYXJhY3RlcnMuXG4gICAgKi9cbiAgICBDaGFyQ2F0ZWdvcnlbQ2hhckNhdGVnb3J5W1wiV29yZFwiXSA9IDBdID0gXCJXb3JkXCI7XG4gICAgLyoqXG4gICAgV2hpdGVzcGFjZS5cbiAgICAqL1xuICAgIENoYXJDYXRlZ29yeVtDaGFyQ2F0ZWdvcnlbXCJTcGFjZVwiXSA9IDFdID0gXCJTcGFjZVwiO1xuICAgIC8qKlxuICAgIEFueXRoaW5nIGVsc2UuXG4gICAgKi9cbiAgICBDaGFyQ2F0ZWdvcnlbQ2hhckNhdGVnb3J5W1wiT3RoZXJcIl0gPSAyXSA9IFwiT3RoZXJcIjtcbnJldHVybiBDaGFyQ2F0ZWdvcnl9KShDaGFyQ2F0ZWdvcnkgfHwgKENoYXJDYXRlZ29yeSA9IHt9KSk7XG5jb25zdCBub25BU0NJSVNpbmdsZUNhc2VXb3JkQ2hhciA9IC9bXFx1MDBkZlxcdTA1ODdcXHUwNTkwLVxcdTA1ZjRcXHUwNjAwLVxcdTA2ZmZcXHUzMDQwLVxcdTMwOWZcXHUzMGEwLVxcdTMwZmZcXHUzNDAwLVxcdTRkYjVcXHU0ZTAwLVxcdTlmY2NcXHVhYzAwLVxcdWQ3YWZdLztcbmxldCB3b3JkQ2hhcjtcbnRyeSB7XG4gICAgd29yZENoYXIgPSAvKkBfX1BVUkVfXyovbmV3IFJlZ0V4cChcIltcXFxccHtBbHBoYWJldGljfVxcXFxwe051bWJlcn1fXVwiLCBcInVcIik7XG59XG5jYXRjaCAoXykgeyB9XG5mdW5jdGlvbiBoYXNXb3JkQ2hhcihzdHIpIHtcbiAgICBpZiAod29yZENoYXIpXG4gICAgICAgIHJldHVybiB3b3JkQ2hhci50ZXN0KHN0cik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGNoID0gc3RyW2ldO1xuICAgICAgICBpZiAoL1xcdy8udGVzdChjaCkgfHwgY2ggPiBcIlxceDgwXCIgJiYgKGNoLnRvVXBwZXJDYXNlKCkgIT0gY2gudG9Mb3dlckNhc2UoKSB8fCBub25BU0NJSVNpbmdsZUNhc2VXb3JkQ2hhci50ZXN0KGNoKSkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gbWFrZUNhdGVnb3JpemVyKHdvcmRDaGFycykge1xuICAgIHJldHVybiAoY2hhcikgPT4ge1xuICAgICAgICBpZiAoIS9cXFMvLnRlc3QoY2hhcikpXG4gICAgICAgICAgICByZXR1cm4gQ2hhckNhdGVnb3J5LlNwYWNlO1xuICAgICAgICBpZiAoaGFzV29yZENoYXIoY2hhcikpXG4gICAgICAgICAgICByZXR1cm4gQ2hhckNhdGVnb3J5LldvcmQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29yZENoYXJzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKGNoYXIuaW5kZXhPZih3b3JkQ2hhcnNbaV0pID4gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIENoYXJDYXRlZ29yeS5Xb3JkO1xuICAgICAgICByZXR1cm4gQ2hhckNhdGVnb3J5Lk90aGVyO1xuICAgIH07XG59XG5cbi8qKlxuVGhlIGVkaXRvciBzdGF0ZSBjbGFzcyBpcyBhIHBlcnNpc3RlbnQgKGltbXV0YWJsZSkgZGF0YSBzdHJ1Y3R1cmUuXG5UbyB1cGRhdGUgYSBzdGF0ZSwgeW91IFtjcmVhdGVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUudXBkYXRlKSBhXG5bdHJhbnNhY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb24pLCB3aGljaCBwcm9kdWNlcyBhIF9uZXdfIHN0YXRlXG5pbnN0YW5jZSwgd2l0aG91dCBtb2RpZnlpbmcgdGhlIG9yaWdpbmFsIG9iamVjdC5cblxuQXMgc3VjaCwgX25ldmVyXyBtdXRhdGUgcHJvcGVydGllcyBvZiBhIHN0YXRlIGRpcmVjdGx5LiBUaGF0J2xsXG5qdXN0IGJyZWFrIHRoaW5ncy5cbiovXG5jbGFzcyBFZGl0b3JTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25maWcsIFxuICAgIC8qKlxuICAgIFRoZSBjdXJyZW50IGRvY3VtZW50LlxuICAgICovXG4gICAgZG9jLCBcbiAgICAvKipcbiAgICBUaGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgKi9cbiAgICBzZWxlY3Rpb24sIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdmFsdWVzLCBjb21wdXRlU2xvdCwgdHIpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuZG9jID0gZG9jO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gY29uZmlnLnN0YXR1c1RlbXBsYXRlLnNsaWNlKCk7XG4gICAgICAgIHRoaXMuY29tcHV0ZVNsb3QgPSBjb21wdXRlU2xvdDtcbiAgICAgICAgLy8gRmlsbCBpbiB0aGUgY29tcHV0ZWQgc3RhdGUgaW1tZWRpYXRlbHksIHNvIHRoYXQgZnVydGhlciBxdWVyaWVzXG4gICAgICAgIC8vIGZvciBpdCBtYWRlIGR1cmluZyB0aGUgdXBkYXRlIHJldHVybiB0aGlzIHN0YXRlXG4gICAgICAgIGlmICh0cilcbiAgICAgICAgICAgIHRyLl9zdGF0ZSA9IHRoaXM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maWcuZHluYW1pY1Nsb3RzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgZW5zdXJlQWRkcih0aGlzLCBpIDw8IDEpO1xuICAgICAgICB0aGlzLmNvbXB1dGVTbG90ID0gbnVsbDtcbiAgICB9XG4gICAgZmllbGQoZmllbGQsIHJlcXVpcmUgPSB0cnVlKSB7XG4gICAgICAgIGxldCBhZGRyID0gdGhpcy5jb25maWcuYWRkcmVzc1tmaWVsZC5pZF07XG4gICAgICAgIGlmIChhZGRyID09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChyZXF1aXJlKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiRmllbGQgaXMgbm90IHByZXNlbnQgaW4gdGhpcyBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZW5zdXJlQWRkcih0aGlzLCBhZGRyKTtcbiAgICAgICAgcmV0dXJuIGdldEFkZHIodGhpcywgYWRkcik7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIFt0cmFuc2FjdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbikgdGhhdCB1cGRhdGVzIHRoaXNcbiAgICBzdGF0ZS4gQW55IG51bWJlciBvZiBbdHJhbnNhY3Rpb24gc3BlY3NdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjKVxuICAgIGNhbiBiZSBwYXNzZWQuIFVubGVzc1xuICAgIFtgc2VxdWVudGlhbGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLnNlcXVlbnRpYWwpIGlzIHNldCwgdGhlXG4gICAgW2NoYW5nZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmNoYW5nZXMpIChpZiBhbnkpIG9mIGVhY2ggc3BlY1xuICAgIGFyZSBhc3N1bWVkIHRvIHN0YXJ0IGluIHRoZSBfY3VycmVudF8gZG9jdW1lbnQgKG5vdCB0aGUgZG9jdW1lbnRcbiAgICBwcm9kdWNlZCBieSBwcmV2aW91cyBzcGVjcyksIGFuZCBpdHNcbiAgICBbc2VsZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5zZWxlY3Rpb24pIGFuZFxuICAgIFtlZmZlY3RzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5lZmZlY3RzKSBhcmUgYXNzdW1lZCB0byByZWZlclxuICAgIHRvIHRoZSBkb2N1bWVudCBjcmVhdGVkIGJ5IGl0cyBfb3duXyBjaGFuZ2VzLiBUaGUgcmVzdWx0aW5nXG4gICAgdHJhbnNhY3Rpb24gY29udGFpbnMgdGhlIGNvbWJpbmVkIGVmZmVjdCBvZiBhbGwgdGhlIGRpZmZlcmVudFxuICAgIHNwZWNzLiBGb3IgW3NlbGVjdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuc2VsZWN0aW9uKSwgbGF0ZXJcbiAgICBzcGVjcyB0YWtlIHByZWNlZGVuY2Ugb3ZlciBlYXJsaWVyIG9uZXMuXG4gICAgKi9cbiAgICB1cGRhdGUoLi4uc3BlY3MpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVUcmFuc2FjdGlvbih0aGlzLCBzcGVjcywgdHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgYXBwbHlUcmFuc2FjdGlvbih0cikge1xuICAgICAgICBsZXQgY29uZiA9IHRoaXMuY29uZmlnLCB7IGJhc2UsIGNvbXBhcnRtZW50cyB9ID0gY29uZjtcbiAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoQ29tcGFydG1lbnQucmVjb25maWd1cmUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmYpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGFydG1lbnRzID0gbmV3IE1hcDtcbiAgICAgICAgICAgICAgICAgICAgY29uZi5jb21wYXJ0bWVudHMuZm9yRWFjaCgodmFsLCBrZXkpID0+IGNvbXBhcnRtZW50cy5zZXQoa2V5LCB2YWwpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uZiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbXBhcnRtZW50cy5zZXQoZWZmZWN0LnZhbHVlLmNvbXBhcnRtZW50LCBlZmZlY3QudmFsdWUuZXh0ZW5zaW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVmZmVjdC5pcyhTdGF0ZUVmZmVjdC5yZWNvbmZpZ3VyZSkpIHtcbiAgICAgICAgICAgICAgICBjb25mID0gbnVsbDtcbiAgICAgICAgICAgICAgICBiYXNlID0gZWZmZWN0LnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZWZmZWN0LmlzKFN0YXRlRWZmZWN0LmFwcGVuZENvbmZpZykpIHtcbiAgICAgICAgICAgICAgICBjb25mID0gbnVsbDtcbiAgICAgICAgICAgICAgICBiYXNlID0gYXNBcnJheShiYXNlKS5jb25jYXQoZWZmZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RhcnRWYWx1ZXM7XG4gICAgICAgIGlmICghY29uZikge1xuICAgICAgICAgICAgY29uZiA9IENvbmZpZ3VyYXRpb24ucmVzb2x2ZShiYXNlLCBjb21wYXJ0bWVudHMsIHRoaXMpO1xuICAgICAgICAgICAgbGV0IGludGVybWVkaWF0ZVN0YXRlID0gbmV3IEVkaXRvclN0YXRlKGNvbmYsIHRoaXMuZG9jLCB0aGlzLnNlbGVjdGlvbiwgY29uZi5keW5hbWljU2xvdHMubWFwKCgpID0+IG51bGwpLCAoc3RhdGUsIHNsb3QpID0+IHNsb3QucmVjb25maWd1cmUoc3RhdGUsIHRoaXMpLCBudWxsKTtcbiAgICAgICAgICAgIHN0YXJ0VmFsdWVzID0gaW50ZXJtZWRpYXRlU3RhdGUudmFsdWVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhcnRWYWx1ZXMgPSB0ci5zdGFydFN0YXRlLnZhbHVlcy5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSB0ci5zdGFydFN0YXRlLmZhY2V0KGFsbG93TXVsdGlwbGVTZWxlY3Rpb25zKSA/IHRyLm5ld1NlbGVjdGlvbiA6IHRyLm5ld1NlbGVjdGlvbi5hc1NpbmdsZSgpO1xuICAgICAgICBuZXcgRWRpdG9yU3RhdGUoY29uZiwgdHIubmV3RG9jLCBzZWxlY3Rpb24sIHN0YXJ0VmFsdWVzLCAoc3RhdGUsIHNsb3QpID0+IHNsb3QudXBkYXRlKHN0YXRlLCB0ciksIHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgW3RyYW5zYWN0aW9uIHNwZWNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjKSB0aGF0XG4gICAgcmVwbGFjZXMgZXZlcnkgc2VsZWN0aW9uIHJhbmdlIHdpdGggdGhlIGdpdmVuIGNvbnRlbnQuXG4gICAgKi9cbiAgICByZXBsYWNlU2VsZWN0aW9uKHRleHQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0ZXh0ID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICB0ZXh0ID0gdGhpcy50b1RleHQodGV4dCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4gKHsgY2hhbmdlczogeyBmcm9tOiByYW5nZS5mcm9tLCB0bzogcmFuZ2UudG8sIGluc2VydDogdGV4dCB9LFxuICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuZnJvbSArIHRleHQubGVuZ3RoKSB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHNldCBvZiBjaGFuZ2VzIGFuZCBhIG5ldyBzZWxlY3Rpb24gYnkgcnVubmluZyB0aGUgZ2l2ZW5cbiAgICBmdW5jdGlvbiBmb3IgZWFjaCByYW5nZSBpbiB0aGUgYWN0aXZlIHNlbGVjdGlvbi4gVGhlIGZ1bmN0aW9uXG4gICAgY2FuIHJldHVybiBhbiBvcHRpb25hbCBzZXQgb2YgY2hhbmdlcyAoaW4gdGhlIGNvb3JkaW5hdGUgc3BhY2VcbiAgICBvZiB0aGUgc3RhcnQgZG9jdW1lbnQpLCBwbHVzIGFuIHVwZGF0ZWQgcmFuZ2UgKGluIHRoZSBjb29yZGluYXRlXG4gICAgc3BhY2Ugb2YgdGhlIGRvY3VtZW50IHByb2R1Y2VkIGJ5IHRoZSBjYWxsJ3Mgb3duIGNoYW5nZXMpLiBUaGlzXG4gICAgbWV0aG9kIHdpbGwgbWVyZ2UgYWxsIHRoZSBjaGFuZ2VzIGFuZCByYW5nZXMgaW50byBhIHNpbmdsZVxuICAgIGNoYW5nZXNldCBhbmQgc2VsZWN0aW9uLCBhbmQgcmV0dXJuIGl0IGFzIGEgW3RyYW5zYWN0aW9uXG4gICAgc3BlY10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMpLCB3aGljaCBjYW4gYmUgcGFzc2VkIHRvXG4gICAgW2B1cGRhdGVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnVwZGF0ZSkuXG4gICAgKi9cbiAgICBjaGFuZ2VCeVJhbmdlKGYpIHtcbiAgICAgICAgbGV0IHNlbCA9IHRoaXMuc2VsZWN0aW9uO1xuICAgICAgICBsZXQgcmVzdWx0MSA9IGYoc2VsLnJhbmdlc1swXSk7XG4gICAgICAgIGxldCBjaGFuZ2VzID0gdGhpcy5jaGFuZ2VzKHJlc3VsdDEuY2hhbmdlcyksIHJhbmdlcyA9IFtyZXN1bHQxLnJhbmdlXTtcbiAgICAgICAgbGV0IGVmZmVjdHMgPSBhc0FycmF5KHJlc3VsdDEuZWZmZWN0cyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGYoc2VsLnJhbmdlc1tpXSk7XG4gICAgICAgICAgICBsZXQgbmV3Q2hhbmdlcyA9IHRoaXMuY2hhbmdlcyhyZXN1bHQuY2hhbmdlcyksIG5ld01hcHBlZCA9IG5ld0NoYW5nZXMubWFwKGNoYW5nZXMpO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpOyBqKyspXG4gICAgICAgICAgICAgICAgcmFuZ2VzW2pdID0gcmFuZ2VzW2pdLm1hcChuZXdNYXBwZWQpO1xuICAgICAgICAgICAgbGV0IG1hcEJ5ID0gY2hhbmdlcy5tYXBEZXNjKG5ld0NoYW5nZXMsIHRydWUpO1xuICAgICAgICAgICAgcmFuZ2VzLnB1c2gocmVzdWx0LnJhbmdlLm1hcChtYXBCeSkpO1xuICAgICAgICAgICAgY2hhbmdlcyA9IGNoYW5nZXMuY29tcG9zZShuZXdNYXBwZWQpO1xuICAgICAgICAgICAgZWZmZWN0cyA9IFN0YXRlRWZmZWN0Lm1hcEVmZmVjdHMoZWZmZWN0cywgbmV3TWFwcGVkKS5jb25jYXQoU3RhdGVFZmZlY3QubWFwRWZmZWN0cyhhc0FycmF5KHJlc3VsdC5lZmZlY3RzKSwgbWFwQnkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2hhbmdlcyxcbiAgICAgICAgICAgIHNlbGVjdGlvbjogRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShyYW5nZXMsIHNlbC5tYWluSW5kZXgpLFxuICAgICAgICAgICAgZWZmZWN0c1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBbY2hhbmdlIHNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5DaGFuZ2VTZXQpIGZyb20gdGhlIGdpdmVuIGNoYW5nZVxuICAgIGRlc2NyaXB0aW9uLCB0YWtpbmcgdGhlIHN0YXRlJ3MgZG9jdW1lbnQgbGVuZ3RoIGFuZCBsaW5lXG4gICAgc2VwYXJhdG9yIGludG8gYWNjb3VudC5cbiAgICAqL1xuICAgIGNoYW5nZXMoc3BlYyA9IFtdKSB7XG4gICAgICAgIGlmIChzcGVjIGluc3RhbmNlb2YgQ2hhbmdlU2V0KVxuICAgICAgICAgICAgcmV0dXJuIHNwZWM7XG4gICAgICAgIHJldHVybiBDaGFuZ2VTZXQub2Yoc3BlYywgdGhpcy5kb2MubGVuZ3RoLCB0aGlzLmZhY2V0KEVkaXRvclN0YXRlLmxpbmVTZXBhcmF0b3IpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVXNpbmcgdGhlIHN0YXRlJ3MgW2xpbmVcbiAgICBzZXBhcmF0b3JdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVebGluZVNlcGFyYXRvciksIGNyZWF0ZSBhXG4gICAgW2BUZXh0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UZXh0KSBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBzdHJpbmcuXG4gICAgKi9cbiAgICB0b1RleHQoc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBUZXh0Lm9mKHN0cmluZy5zcGxpdCh0aGlzLmZhY2V0KEVkaXRvclN0YXRlLmxpbmVTZXBhcmF0b3IpIHx8IERlZmF1bHRTcGxpdCkpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gdGhlIGdpdmVuIHJhbmdlIG9mIHRoZSBkb2N1bWVudCBhcyBhIHN0cmluZy5cbiAgICAqL1xuICAgIHNsaWNlRG9jKGZyb20gPSAwLCB0byA9IHRoaXMuZG9jLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2Muc2xpY2VTdHJpbmcoZnJvbSwgdG8sIHRoaXMubGluZUJyZWFrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSB2YWx1ZSBvZiBhIHN0YXRlIFtmYWNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5GYWNldCkuXG4gICAgKi9cbiAgICBmYWNldChmYWNldCkge1xuICAgICAgICBsZXQgYWRkciA9IHRoaXMuY29uZmlnLmFkZHJlc3NbZmFjZXQuaWRdO1xuICAgICAgICBpZiAoYWRkciA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGZhY2V0LmRlZmF1bHQ7XG4gICAgICAgIGVuc3VyZUFkZHIodGhpcywgYWRkcik7XG4gICAgICAgIHJldHVybiBnZXRBZGRyKHRoaXMsIGFkZHIpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb252ZXJ0IHRoaXMgc3RhdGUgdG8gYSBKU09OLXNlcmlhbGl6YWJsZSBvYmplY3QuIFdoZW4gY3VzdG9tXG4gICAgZmllbGRzIHNob3VsZCBiZSBzZXJpYWxpemVkLCB5b3UgY2FuIHBhc3MgdGhlbSBpbiBhcyBhbiBvYmplY3RcbiAgICBtYXBwaW5nIHByb3BlcnR5IG5hbWVzIChpbiB0aGUgcmVzdWx0aW5nIG9iamVjdCwgd2hpY2ggc2hvdWxkXG4gICAgbm90IHVzZSBgZG9jYCBvciBgc2VsZWN0aW9uYCkgdG8gZmllbGRzLlxuICAgICovXG4gICAgdG9KU09OKGZpZWxkcykge1xuICAgICAgICBsZXQgcmVzdWx0ID0ge1xuICAgICAgICAgICAgZG9jOiB0aGlzLnNsaWNlRG9jKCksXG4gICAgICAgICAgICBzZWxlY3Rpb246IHRoaXMuc2VsZWN0aW9uLnRvSlNPTigpXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmaWVsZHMpXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIGZpZWxkcykge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGZpZWxkc1twcm9wXTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTdGF0ZUZpZWxkICYmIHRoaXMuY29uZmlnLmFkZHJlc3NbdmFsdWUuaWRdICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtwcm9wXSA9IHZhbHVlLnNwZWMudG9KU09OKHRoaXMuZmllbGQoZmllbGRzW3Byb3BdKSwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIERlc2VyaWFsaXplIGEgc3RhdGUgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbi4gV2hlbiBjdXN0b21cbiAgICBmaWVsZHMgc2hvdWxkIGJlIGRlc2VyaWFsaXplZCwgcGFzcyB0aGUgc2FtZSBvYmplY3QgeW91IHBhc3NlZFxuICAgIHRvIFtgdG9KU09OYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS50b0pTT04pIHdoZW4gc2VyaWFsaXppbmcgYXNcbiAgICB0aGlyZCBhcmd1bWVudC5cbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uLCBjb25maWcgPSB7fSwgZmllbGRzKSB7XG4gICAgICAgIGlmICghanNvbiB8fCB0eXBlb2YganNvbi5kb2MgIT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBKU09OIHJlcHJlc2VudGF0aW9uIGZvciBFZGl0b3JTdGF0ZVwiKTtcbiAgICAgICAgbGV0IGZpZWxkSW5pdCA9IFtdO1xuICAgICAgICBpZiAoZmllbGRzKVxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBmaWVsZHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGpzb24sIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZCA9IGZpZWxkc1twcm9wXSwgdmFsdWUgPSBqc29uW3Byb3BdO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZEluaXQucHVzaChmaWVsZC5pbml0KHN0YXRlID0+IGZpZWxkLnNwZWMuZnJvbUpTT04odmFsdWUsIHN0YXRlKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVkaXRvclN0YXRlLmNyZWF0ZSh7XG4gICAgICAgICAgICBkb2M6IGpzb24uZG9jLFxuICAgICAgICAgICAgc2VsZWN0aW9uOiBFZGl0b3JTZWxlY3Rpb24uZnJvbUpTT04oanNvbi5zZWxlY3Rpb24pLFxuICAgICAgICAgICAgZXh0ZW5zaW9uczogY29uZmlnLmV4dGVuc2lvbnMgPyBmaWVsZEluaXQuY29uY2F0KFtjb25maWcuZXh0ZW5zaW9uc10pIDogZmllbGRJbml0XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgc3RhdGUuIFlvdSdsbCB1c3VhbGx5IG9ubHkgbmVlZCB0aGlzIHdoZW5cbiAgICBpbml0aWFsaXppbmcgYW4gZWRpdG9yXHUyMDE0dXBkYXRlZCBzdGF0ZXMgYXJlIGNyZWF0ZWQgYnkgYXBwbHlpbmdcbiAgICB0cmFuc2FjdGlvbnMuXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIGxldCBjb25maWd1cmF0aW9uID0gQ29uZmlndXJhdGlvbi5yZXNvbHZlKGNvbmZpZy5leHRlbnNpb25zIHx8IFtdLCBuZXcgTWFwKTtcbiAgICAgICAgbGV0IGRvYyA9IGNvbmZpZy5kb2MgaW5zdGFuY2VvZiBUZXh0ID8gY29uZmlnLmRvY1xuICAgICAgICAgICAgOiBUZXh0Lm9mKChjb25maWcuZG9jIHx8IFwiXCIpLnNwbGl0KGNvbmZpZ3VyYXRpb24uc3RhdGljRmFjZXQoRWRpdG9yU3RhdGUubGluZVNlcGFyYXRvcikgfHwgRGVmYXVsdFNwbGl0KSk7XG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSAhY29uZmlnLnNlbGVjdGlvbiA/IEVkaXRvclNlbGVjdGlvbi5zaW5nbGUoMClcbiAgICAgICAgICAgIDogY29uZmlnLnNlbGVjdGlvbiBpbnN0YW5jZW9mIEVkaXRvclNlbGVjdGlvbiA/IGNvbmZpZy5zZWxlY3Rpb25cbiAgICAgICAgICAgICAgICA6IEVkaXRvclNlbGVjdGlvbi5zaW5nbGUoY29uZmlnLnNlbGVjdGlvbi5hbmNob3IsIGNvbmZpZy5zZWxlY3Rpb24uaGVhZCk7XG4gICAgICAgIGNoZWNrU2VsZWN0aW9uKHNlbGVjdGlvbiwgZG9jLmxlbmd0aCk7XG4gICAgICAgIGlmICghY29uZmlndXJhdGlvbi5zdGF0aWNGYWNldChhbGxvd011bHRpcGxlU2VsZWN0aW9ucykpXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBzZWxlY3Rpb24uYXNTaW5nbGUoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBFZGl0b3JTdGF0ZShjb25maWd1cmF0aW9uLCBkb2MsIHNlbGVjdGlvbiwgY29uZmlndXJhdGlvbi5keW5hbWljU2xvdHMubWFwKCgpID0+IG51bGwpLCAoc3RhdGUsIHNsb3QpID0+IHNsb3QuY3JlYXRlKHN0YXRlKSwgbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBzaXplIChpbiBjb2x1bW5zKSBvZiBhIHRhYiBpbiB0aGUgZG9jdW1lbnQsIGRldGVybWluZWQgYnlcbiAgICB0aGUgW2B0YWJTaXplYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV50YWJTaXplKSBmYWNldC5cbiAgICAqL1xuICAgIGdldCB0YWJTaXplKCkgeyByZXR1cm4gdGhpcy5mYWNldChFZGl0b3JTdGF0ZS50YWJTaXplKTsgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgcHJvcGVyIFtsaW5lLWJyZWFrXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXmxpbmVTZXBhcmF0b3IpXG4gICAgc3RyaW5nIGZvciB0aGlzIHN0YXRlLlxuICAgICovXG4gICAgZ2V0IGxpbmVCcmVhaygpIHsgcmV0dXJuIHRoaXMuZmFjZXQoRWRpdG9yU3RhdGUubGluZVNlcGFyYXRvcikgfHwgXCJcXG5cIjsgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdHJ1ZSB3aGVuIHRoZSBlZGl0b3IgaXNcbiAgICBbY29uZmlndXJlZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV5yZWFkT25seSkgdG8gYmUgcmVhZC1vbmx5LlxuICAgICovXG4gICAgZ2V0IHJlYWRPbmx5KCkgeyByZXR1cm4gdGhpcy5mYWNldChyZWFkT25seSk7IH1cbiAgICAvKipcbiAgICBMb29rIHVwIGEgdHJhbnNsYXRpb24gZm9yIHRoZSBnaXZlbiBwaHJhc2UgKHZpYSB0aGVcbiAgICBbYHBocmFzZXNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXnBocmFzZXMpIGZhY2V0KSwgb3IgcmV0dXJuIHRoZVxuICAgIG9yaWdpbmFsIHN0cmluZyBpZiBubyB0cmFuc2xhdGlvbiBpcyBmb3VuZC5cbiAgICBcbiAgICBJZiBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcGFzc2VkLCB0aGV5IHdpbGwgYmUgaW5zZXJ0ZWQgaW5cbiAgICBwbGFjZSBvZiBtYXJrZXJzIGxpa2UgYCQxYCAoZm9yIHRoZSBmaXJzdCB2YWx1ZSkgYW5kIGAkMmAsIGV0Yy5cbiAgICBBIHNpbmdsZSBgJGAgaXMgZXF1aXZhbGVudCB0byBgJDFgLCBhbmQgYCQkYCB3aWxsIHByb2R1Y2UgYVxuICAgIGxpdGVyYWwgZG9sbGFyIHNpZ24uXG4gICAgKi9cbiAgICBwaHJhc2UocGhyYXNlLCAuLi5pbnNlcnQpIHtcbiAgICAgICAgZm9yIChsZXQgbWFwIG9mIHRoaXMuZmFjZXQoRWRpdG9yU3RhdGUucGhyYXNlcykpXG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1hcCwgcGhyYXNlKSkge1xuICAgICAgICAgICAgICAgIHBocmFzZSA9IG1hcFtwaHJhc2VdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICBpZiAoaW5zZXJ0Lmxlbmd0aClcbiAgICAgICAgICAgIHBocmFzZSA9IHBocmFzZS5yZXBsYWNlKC9cXCQoXFwkfFxcZCopL2csIChtLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gXCIkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIiRcIjtcbiAgICAgICAgICAgICAgICBsZXQgbiA9ICsoaSB8fCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIW4gfHwgbiA+IGluc2VydC5sZW5ndGggPyBtIDogaW5zZXJ0W24gLSAxXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGhyYXNlO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSB2YWx1ZXMgZm9yIGEgZ2l2ZW4gbGFuZ3VhZ2UgZGF0YSBmaWVsZCwgcHJvdmlkZWQgYnkgdGhlXG4gICAgdGhlIFtgbGFuZ3VhZ2VEYXRhYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV5sYW5ndWFnZURhdGEpIGZhY2V0LlxuICAgIFxuICAgIEV4YW1wbGVzIG9mIGxhbmd1YWdlIGRhdGEgZmllbGRzIGFyZS4uLlxuICAgIFxuICAgIC0gW2BcImNvbW1lbnRUb2tlbnNcImBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuQ29tbWVudFRva2VucykgZm9yIHNwZWNpZnlpbmdcbiAgICAgIGNvbW1lbnQgc3ludGF4LlxuICAgIC0gW2BcImF1dG9jb21wbGV0ZVwiYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuYXV0b2NvbXBsZXRpb25eY29uZmlnLm92ZXJyaWRlKVxuICAgICAgZm9yIHByb3ZpZGluZyBsYW5ndWFnZS1zcGVjaWZpYyBjb21wbGV0aW9uIHNvdXJjZXMuXG4gICAgLSBbYFwid29yZENoYXJzXCJgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmNoYXJDYXRlZ29yaXplcikgZm9yIGFkZGluZ1xuICAgICAgY2hhcmFjdGVycyB0aGF0IHNob3VsZCBiZSBjb25zaWRlcmVkIHBhcnQgb2Ygd29yZHMgaW4gdGhpc1xuICAgICAgbGFuZ3VhZ2UuXG4gICAgLSBbYFwiY2xvc2VCcmFja2V0c1wiYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuQ2xvc2VCcmFja2V0Q29uZmlnKSBjb250cm9sc1xuICAgICAgYnJhY2tldCBjbG9zaW5nIGJlaGF2aW9yLlxuICAgICovXG4gICAgbGFuZ3VhZ2VEYXRhQXQobmFtZSwgcG9zLCBzaWRlID0gLTEpIHtcbiAgICAgICAgbGV0IHZhbHVlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBwcm92aWRlciBvZiB0aGlzLmZhY2V0KGxhbmd1YWdlRGF0YSkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHJlc3VsdCBvZiBwcm92aWRlcih0aGlzLCBwb3MsIHNpZGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsIG5hbWUpKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChyZXN1bHRbbmFtZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybiBhIGZ1bmN0aW9uIHRoYXQgY2FuIGNhdGVnb3JpemUgc3RyaW5ncyAoZXhwZWN0ZWQgdG9cbiAgICByZXByZXNlbnQgYSBzaW5nbGUgW2dyYXBoZW1lIGNsdXN0ZXJdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuZmluZENsdXN0ZXJCcmVhaykpXG4gICAgaW50byBvbmUgb2Y6XG4gICAgXG4gICAgIC0gV29yZCAoY29udGFpbnMgYW4gYWxwaGFudW1lcmljIGNoYXJhY3RlciBvciBhIGNoYXJhY3RlclxuICAgICAgIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSBsb2NhbCBsYW5ndWFnZSdzIGBcIndvcmRDaGFyc1wiYFxuICAgICAgIGxhbmd1YWdlIGRhdGEsIHdoaWNoIHNob3VsZCBiZSBhIHN0cmluZylcbiAgICAgLSBTcGFjZSAoY29udGFpbnMgb25seSB3aGl0ZXNwYWNlKVxuICAgICAtIE90aGVyIChhbnl0aGluZyBlbHNlKVxuICAgICovXG4gICAgY2hhckNhdGVnb3JpemVyKGF0KSB7XG4gICAgICAgIGxldCBjaGFycyA9IHRoaXMubGFuZ3VhZ2VEYXRhQXQoXCJ3b3JkQ2hhcnNcIiwgYXQpO1xuICAgICAgICByZXR1cm4gbWFrZUNhdGVnb3JpemVyKGNoYXJzLmxlbmd0aCA/IGNoYXJzWzBdIDogXCJcIik7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIHdvcmQgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLCBtZWFuaW5nIHRoZSByYW5nZVxuICAgIGNvbnRhaW5pbmcgYWxsIFt3b3JkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNoYXJDYXRlZ29yeS5Xb3JkKSBjaGFyYWN0ZXJzXG4gICAgYXJvdW5kIGl0LiBJZiBubyB3b3JkIGNoYXJhY3RlcnMgYXJlIGFkamFjZW50IHRvIHRoZSBwb3NpdGlvbixcbiAgICB0aGlzIHJldHVybnMgbnVsbC5cbiAgICAqL1xuICAgIHdvcmRBdChwb3MpIHtcbiAgICAgICAgbGV0IHsgdGV4dCwgZnJvbSwgbGVuZ3RoIH0gPSB0aGlzLmRvYy5saW5lQXQocG9zKTtcbiAgICAgICAgbGV0IGNhdCA9IHRoaXMuY2hhckNhdGVnb3JpemVyKHBvcyk7XG4gICAgICAgIGxldCBzdGFydCA9IHBvcyAtIGZyb20sIGVuZCA9IHBvcyAtIGZyb207XG4gICAgICAgIHdoaWxlIChzdGFydCA+IDApIHtcbiAgICAgICAgICAgIGxldCBwcmV2ID0gZmluZENsdXN0ZXJCcmVhayh0ZXh0LCBzdGFydCwgZmFsc2UpO1xuICAgICAgICAgICAgaWYgKGNhdCh0ZXh0LnNsaWNlKHByZXYsIHN0YXJ0KSkgIT0gQ2hhckNhdGVnb3J5LldvcmQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBzdGFydCA9IHByZXY7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGVuZCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBmaW5kQ2x1c3RlckJyZWFrKHRleHQsIGVuZCk7XG4gICAgICAgICAgICBpZiAoY2F0KHRleHQuc2xpY2UoZW5kLCBuZXh0KSkgIT0gQ2hhckNhdGVnb3J5LldvcmQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBlbmQgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGFydCA9PSBlbmQgPyBudWxsIDogRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHN0YXJ0ICsgZnJvbSwgZW5kICsgZnJvbSk7XG4gICAgfVxufVxuLyoqXG5BIGZhY2V0IHRoYXQsIHdoZW4gZW5hYmxlZCwgY2F1c2VzIHRoZSBlZGl0b3IgdG8gYWxsb3cgbXVsdGlwbGVcbnJhbmdlcyB0byBiZSBzZWxlY3RlZC4gQmUgY2FyZWZ1bCB0aG91Z2gsIGJlY2F1c2UgYnkgZGVmYXVsdCB0aGVcbmVkaXRvciByZWxpZXMgb24gdGhlIG5hdGl2ZSBET00gc2VsZWN0aW9uLCB3aGljaCBjYW5ub3QgaGFuZGxlXG5tdWx0aXBsZSBzZWxlY3Rpb25zLiBBbiBleHRlbnNpb24gbGlrZVxuW2BkcmF3U2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmRyYXdTZWxlY3Rpb24pIGNhbiBiZSB1c2VkIHRvIG1ha2VcbnNlY29uZGFyeSBzZWxlY3Rpb25zIHZpc2libGUgdG8gdGhlIHVzZXIuXG4qL1xuRWRpdG9yU3RhdGUuYWxsb3dNdWx0aXBsZVNlbGVjdGlvbnMgPSBhbGxvd011bHRpcGxlU2VsZWN0aW9ucztcbi8qKlxuQ29uZmlndXJlcyB0aGUgdGFiIHNpemUgdG8gdXNlIGluIHRoaXMgc3RhdGUuIFRoZSBmaXJzdFxuKGhpZ2hlc3QtcHJlY2VkZW5jZSkgdmFsdWUgb2YgdGhlIGZhY2V0IGlzIHVzZWQuIElmIG5vIHZhbHVlIGlzXG5naXZlbiwgdGhpcyBkZWZhdWx0cyB0byA0LlxuKi9cbkVkaXRvclN0YXRlLnRhYlNpemUgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlc1swXSA6IDRcbn0pO1xuLyoqXG5UaGUgbGluZSBzZXBhcmF0b3IgdG8gdXNlLiBCeSBkZWZhdWx0LCBhbnkgb2YgYFwiXFxuXCJgLCBgXCJcXHJcXG5cImBcbmFuZCBgXCJcXHJcImAgaXMgdHJlYXRlZCBhcyBhIHNlcGFyYXRvciB3aGVuIHNwbGl0dGluZyBsaW5lcywgYW5kXG5saW5lcyBhcmUgam9pbmVkIHdpdGggYFwiXFxuXCJgLlxuXG5XaGVuIHlvdSBjb25maWd1cmUgYSB2YWx1ZSBoZXJlLCBvbmx5IHRoYXQgcHJlY2lzZSBzZXBhcmF0b3JcbndpbGwgYmUgdXNlZCwgYWxsb3dpbmcgeW91IHRvIHJvdW5kLXRyaXAgZG9jdW1lbnRzIHRocm91Z2ggdGhlXG5lZGl0b3Igd2l0aG91dCBub3JtYWxpemluZyBsaW5lIHNlcGFyYXRvcnMuXG4qL1xuRWRpdG9yU3RhdGUubGluZVNlcGFyYXRvciA9IGxpbmVTZXBhcmF0b3I7XG4vKipcblRoaXMgZmFjZXQgY29udHJvbHMgdGhlIHZhbHVlIG9mIHRoZVxuW2ByZWFkT25seWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUucmVhZE9ubHkpIGdldHRlciwgd2hpY2ggaXNcbmNvbnN1bHRlZCBieSBjb21tYW5kcyBhbmQgZXh0ZW5zaW9ucyB0aGF0IGltcGxlbWVudCBlZGl0aW5nXG5mdW5jdGlvbmFsaXR5IHRvIGRldGVybWluZSB3aGV0aGVyIHRoZXkgc2hvdWxkIGFwcGx5LiBJdFxuZGVmYXVsdHMgdG8gZmFsc2UsIGJ1dCB3aGVuIGl0cyBoaWdoZXN0LXByZWNlZGVuY2UgdmFsdWUgaXNcbmB0cnVlYCwgc3VjaCBmdW5jdGlvbmFsaXR5IGRpc2FibGVzIGl0c2VsZi5cblxuTm90IHRvIGJlIGNvbmZ1c2VkIHdpdGhcbltgRWRpdG9yVmlldy5lZGl0YWJsZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XmVkaXRhYmxlKSwgd2hpY2hcbmNvbnRyb2xzIHdoZXRoZXIgdGhlIGVkaXRvcidzIERPTSBpcyBzZXQgdG8gYmUgZWRpdGFibGUgKGFuZFxudGh1cyBmb2N1c2FibGUpLlxuKi9cbkVkaXRvclN0YXRlLnJlYWRPbmx5ID0gcmVhZE9ubHk7XG4vKipcblJlZ2lzdGVycyB0cmFuc2xhdGlvbiBwaHJhc2VzLiBUaGVcbltgcGhyYXNlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5waHJhc2UpIG1ldGhvZCB3aWxsIGxvb2sgdGhyb3VnaFxuYWxsIG9iamVjdHMgcmVnaXN0ZXJlZCB3aXRoIHRoaXMgZmFjZXQgdG8gZmluZCB0cmFuc2xhdGlvbnMgZm9yXG5pdHMgYXJndW1lbnQuXG4qL1xuRWRpdG9yU3RhdGUucGhyYXNlcyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbXBhcmUoYSwgYikge1xuICAgICAgICBsZXQga0EgPSBPYmplY3Qua2V5cyhhKSwga0IgPSBPYmplY3Qua2V5cyhiKTtcbiAgICAgICAgcmV0dXJuIGtBLmxlbmd0aCA9PSBrQi5sZW5ndGggJiYga0EuZXZlcnkoayA9PiBhW2tdID09IGJba10pO1xuICAgIH1cbn0pO1xuLyoqXG5BIGZhY2V0IHVzZWQgdG8gcmVnaXN0ZXIgW2xhbmd1YWdlXG5kYXRhXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmxhbmd1YWdlRGF0YUF0KSBwcm92aWRlcnMuXG4qL1xuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhID0gbGFuZ3VhZ2VEYXRhO1xuLyoqXG5GYWNldCB1c2VkIHRvIHJlZ2lzdGVyIGNoYW5nZSBmaWx0ZXJzLCB3aGljaCBhcmUgY2FsbGVkIGZvciBlYWNoXG50cmFuc2FjdGlvbiAodW5sZXNzIGV4cGxpY2l0bHlcbltkaXNhYmxlZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuZmlsdGVyKSksIGFuZCBjYW4gc3VwcHJlc3NcbnBhcnQgb2YgdGhlIHRyYW5zYWN0aW9uJ3MgY2hhbmdlcy5cblxuU3VjaCBhIGZ1bmN0aW9uIGNhbiByZXR1cm4gYHRydWVgIHRvIGluZGljYXRlIHRoYXQgaXQgZG9lc24ndFxud2FudCB0byBkbyBhbnl0aGluZywgYGZhbHNlYCB0byBjb21wbGV0ZWx5IHN0b3AgdGhlIGNoYW5nZXMgaW5cbnRoZSB0cmFuc2FjdGlvbiwgb3IgYSBzZXQgb2YgcmFuZ2VzIGluIHdoaWNoIGNoYW5nZXMgc2hvdWxkIGJlXG5zdXBwcmVzc2VkLiBTdWNoIHJhbmdlcyBhcmUgcmVwcmVzZW50ZWQgYXMgYW4gYXJyYXkgb2YgbnVtYmVycyxcbndpdGggZWFjaCBwYWlyIG9mIHR3byBudW1iZXJzIGluZGljYXRpbmcgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgYVxucmFuZ2UuIFNvIGZvciBleGFtcGxlIGBbMTAsIDIwLCAxMDAsIDExMF1gIHN1cHByZXNzZXMgY2hhbmdlc1xuYmV0d2VlbiAxMCBhbmQgMjAsIGFuZCBiZXR3ZWVuIDEwMCBhbmQgMTEwLlxuKi9cbkVkaXRvclN0YXRlLmNoYW5nZUZpbHRlciA9IGNoYW5nZUZpbHRlcjtcbi8qKlxuRmFjZXQgdXNlZCB0byByZWdpc3RlciBhIGhvb2sgdGhhdCBnZXRzIGEgY2hhbmNlIHRvIHVwZGF0ZSBvclxucmVwbGFjZSB0cmFuc2FjdGlvbiBzcGVjcyBiZWZvcmUgdGhleSBhcmUgYXBwbGllZC4gVGhpcyB3aWxsXG5vbmx5IGJlIGFwcGxpZWQgZm9yIHRyYW5zYWN0aW9ucyB0aGF0IGRvbid0IGhhdmVcbltgZmlsdGVyYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuZmlsdGVyKSBzZXQgdG8gYGZhbHNlYC4gWW91XG5jYW4gZWl0aGVyIHJldHVybiBhIHNpbmdsZSB0cmFuc2FjdGlvbiBzcGVjIChwb3NzaWJseSB0aGUgaW5wdXRcbnRyYW5zYWN0aW9uKSwgb3IgYW4gYXJyYXkgb2Ygc3BlY3MgKHdoaWNoIHdpbGwgYmUgY29tYmluZWQgaW5cbnRoZSBzYW1lIHdheSBhcyB0aGUgYXJndW1lbnRzIHRvXG5bYEVkaXRvclN0YXRlLnVwZGF0ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUudXBkYXRlKSkuXG5cbldoZW4gcG9zc2libGUsIGl0IGlzIHJlY29tbWVuZGVkIHRvIGF2b2lkIGFjY2Vzc2luZ1xuW2BUcmFuc2FjdGlvbi5zdGF0ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb24uc3RhdGUpIGluIGEgZmlsdGVyLFxuc2luY2UgaXQgd2lsbCBmb3JjZSBjcmVhdGlvbiBvZiBhIHN0YXRlIHRoYXQgd2lsbCB0aGVuIGJlXG5kaXNjYXJkZWQgYWdhaW4sIGlmIHRoZSB0cmFuc2FjdGlvbiBpcyBhY3R1YWxseSBmaWx0ZXJlZC5cblxuKFRoaXMgZnVuY3Rpb25hbGl0eSBzaG91bGQgYmUgdXNlZCB3aXRoIGNhcmUuIEluZGlzY3JpbWluYXRlbHlcbm1vZGlmeWluZyB0cmFuc2FjdGlvbiBpcyBsaWtlbHkgdG8gYnJlYWsgc29tZXRoaW5nIG9yIGRlZ3JhZGVcbnRoZSB1c2VyIGV4cGVyaWVuY2UuKVxuKi9cbkVkaXRvclN0YXRlLnRyYW5zYWN0aW9uRmlsdGVyID0gdHJhbnNhY3Rpb25GaWx0ZXI7XG4vKipcblRoaXMgaXMgYSBtb3JlIGxpbWl0ZWQgZm9ybSBvZlxuW2B0cmFuc2FjdGlvbkZpbHRlcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVedHJhbnNhY3Rpb25GaWx0ZXIpLFxud2hpY2ggY2FuIG9ubHkgYWRkXG5bYW5ub3RhdGlvbnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmFubm90YXRpb25zKSBhbmRcbltlZmZlY3RzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5lZmZlY3RzKS4gX0J1dF8sIHRoaXMgdHlwZVxub2YgZmlsdGVyIHJ1bnMgZXZlbiBpZiB0aGUgdHJhbnNhY3Rpb24gaGFzIGRpc2FibGVkIHJlZ3VsYXJcbltmaWx0ZXJpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmZpbHRlciksIG1ha2luZyBpdCBzdWl0YWJsZVxuZm9yIGVmZmVjdHMgdGhhdCBkb24ndCBuZWVkIHRvIHRvdWNoIHRoZSBjaGFuZ2VzIG9yIHNlbGVjdGlvbixcbmJ1dCBkbyB3YW50IHRvIHByb2Nlc3MgZXZlcnkgdHJhbnNhY3Rpb24uXG5cbkV4dGVuZGVycyBydW4gX2FmdGVyXyBmaWx0ZXJzLCB3aGVuIGJvdGggYXJlIHByZXNlbnQuXG4qL1xuRWRpdG9yU3RhdGUudHJhbnNhY3Rpb25FeHRlbmRlciA9IHRyYW5zYWN0aW9uRXh0ZW5kZXI7XG5Db21wYXJ0bWVudC5yZWNvbmZpZ3VyZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcblxuLyoqXG5VdGlsaXR5IGZ1bmN0aW9uIGZvciBjb21iaW5pbmcgYmVoYXZpb3JzIHRvIGZpbGwgaW4gYSBjb25maWdcbm9iamVjdCBmcm9tIGFuIGFycmF5IG9mIHByb3ZpZGVkIGNvbmZpZ3MuIGBkZWZhdWx0c2Agc2hvdWxkIGhvbGRcbmRlZmF1bHQgdmFsdWVzIGZvciBhbGwgb3B0aW9uYWwgZmllbGRzIGluIGBDb25maWdgLlxuXG5UaGUgZnVuY3Rpb24gd2lsbCwgYnkgZGVmYXVsdCwgZXJyb3JcbndoZW4gYSBmaWVsZCBnZXRzIHR3byB2YWx1ZXMgdGhhdCBhcmVuJ3QgYD09PWAtZXF1YWwsIGJ1dCB5b3UgY2FuXG5wcm92aWRlIGNvbWJpbmUgZnVuY3Rpb25zIHBlciBmaWVsZCB0byBkbyBzb21ldGhpbmcgZWxzZS5cbiovXG5mdW5jdGlvbiBjb21iaW5lQ29uZmlnKGNvbmZpZ3MsIGRlZmF1bHRzLCAvLyBTaG91bGQgaG9sZCBvbmx5IHRoZSBvcHRpb25hbCBwcm9wZXJ0aWVzIG9mIENvbmZpZywgYnV0IEkgaGF2ZW4ndCBtYW5hZ2VkIHRvIGV4cHJlc3MgdGhhdFxuY29tYmluZSA9IHt9KSB7XG4gICAgbGV0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAobGV0IGNvbmZpZyBvZiBjb25maWdzKVxuICAgICAgICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoY29uZmlnKSkge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gY29uZmlnW2tleV0sIGN1cnJlbnQgPSByZXN1bHRba2V5XTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnQgPT09IHZhbHVlIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIDsgLy8gTm8gY29uZmxpY3RcbiAgICAgICAgICAgIGVsc2UgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbWJpbmUsIGtleSkpXG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBjb21iaW5lW2tleV0oY3VycmVudCwgdmFsdWUpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZyBtZXJnZSBjb25mbGljdCBmb3IgZmllbGQgXCIgKyBrZXkpO1xuICAgICAgICB9XG4gICAgZm9yIChsZXQga2V5IGluIGRlZmF1bHRzKVxuICAgICAgICBpZiAocmVzdWx0W2tleV0gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gZGVmYXVsdHNba2V5XTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbkVhY2ggcmFuZ2UgaXMgYXNzb2NpYXRlZCB3aXRoIGEgdmFsdWUsIHdoaWNoIG11c3QgaW5oZXJpdCBmcm9tXG50aGlzIGNsYXNzLlxuKi9cbmNsYXNzIFJhbmdlVmFsdWUge1xuICAgIC8qKlxuICAgIENvbXBhcmUgdGhpcyB2YWx1ZSB3aXRoIGFub3RoZXIgdmFsdWUuIFVzZWQgd2hlbiBjb21wYXJpbmdcbiAgICByYW5nZXNldHMuIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGNvbXBhcmVzIGJ5IGlkZW50aXR5LlxuICAgIFVubGVzcyB5b3UgYXJlIG9ubHkgY3JlYXRpbmcgYSBmaXhlZCBudW1iZXIgb2YgdW5pcXVlIGluc3RhbmNlc1xuICAgIG9mIHlvdXIgdmFsdWUgdHlwZSwgaXQgaXMgYSBnb29kIGlkZWEgdG8gaW1wbGVtZW50IHRoaXNcbiAgICBwcm9wZXJseS5cbiAgICAqL1xuICAgIGVxKG90aGVyKSB7IHJldHVybiB0aGlzID09IG90aGVyOyB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgW3JhbmdlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlJhbmdlKSB3aXRoIHRoaXMgdmFsdWUuXG4gICAgKi9cbiAgICByYW5nZShmcm9tLCB0byA9IGZyb20pIHsgcmV0dXJuIFJhbmdlLmNyZWF0ZShmcm9tLCB0bywgdGhpcyk7IH1cbn1cblJhbmdlVmFsdWUucHJvdG90eXBlLnN0YXJ0U2lkZSA9IFJhbmdlVmFsdWUucHJvdG90eXBlLmVuZFNpZGUgPSAwO1xuUmFuZ2VWYWx1ZS5wcm90b3R5cGUucG9pbnQgPSBmYWxzZTtcblJhbmdlVmFsdWUucHJvdG90eXBlLm1hcE1vZGUgPSBNYXBNb2RlLlRyYWNrRGVsO1xuZnVuY3Rpb24gY21wVmFsKGEsIGIpIHtcbiAgICByZXR1cm4gYSA9PSBiIHx8IGEuY29uc3RydWN0b3IgPT0gYi5jb25zdHJ1Y3RvciAmJiBhLmVxKGIpO1xufVxuLyoqXG5BIHJhbmdlIGFzc29jaWF0ZXMgYSB2YWx1ZSB3aXRoIGEgcmFuZ2Ugb2YgcG9zaXRpb25zLlxuKi9cbmNsYXNzIFJhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgcmFuZ2UncyBzdGFydCBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGZyb20sIFxuICAgIC8qKlxuICAgIEl0cyBlbmQgcG9zaXRpb24uXG4gICAgKi9cbiAgICB0bywgXG4gICAgLyoqXG4gICAgVGhlIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHJhbmdlLlxuICAgICovXG4gICAgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShmcm9tLCB0bywgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSYW5nZShmcm9tLCB0bywgdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNtcFJhbmdlKGEsIGIpIHtcbiAgICByZXR1cm4gYS5mcm9tIC0gYi5mcm9tIHx8IGEudmFsdWUuc3RhcnRTaWRlIC0gYi52YWx1ZS5zdGFydFNpZGU7XG59XG5jbGFzcyBDaHVuayB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8sIHZhbHVlLCBcbiAgICAvLyBDaHVua3MgYXJlIG1hcmtlZCB3aXRoIHRoZSBsYXJnZXN0IHBvaW50IHRoYXQgb2NjdXJzXG4gICAgLy8gaW4gdGhlbSAob3IgLTEgZm9yIG5vIHBvaW50cyksIHNvIHRoYXQgc2NhbnMgdGhhdCBhcmVcbiAgICAvLyBvbmx5IGludGVyZXN0ZWQgaW4gcG9pbnRzIChzdWNoIGFzIHRoZVxuICAgIC8vIGhlaWdodG1hcC1yZWxhdGVkIGxvZ2ljKSBjYW4gc2tpcCByYW5nZS1vbmx5IGNodW5rcy5cbiAgICBtYXhQb2ludCkge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5tYXhQb2ludCA9IG1heFBvaW50O1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkgeyByZXR1cm4gdGhpcy50b1t0aGlzLnRvLmxlbmd0aCAtIDFdOyB9XG4gICAgLy8gRmluZCB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIHBvc2l0aW9uIGFuZCBzaWRlLiBVc2UgdGhlIHJhbmdlcydcbiAgICAvLyBgZnJvbWAgcG9zIHdoZW4gYGVuZCA9PSBmYWxzZWAsIGB0b2Agd2hlbiBgZW5kID09IHRydWVgLlxuICAgIGZpbmRJbmRleChwb3MsIHNpZGUsIGVuZCwgc3RhcnRBdCA9IDApIHtcbiAgICAgICAgbGV0IGFyciA9IGVuZCA/IHRoaXMudG8gOiB0aGlzLmZyb207XG4gICAgICAgIGZvciAobGV0IGxvID0gc3RhcnRBdCwgaGkgPSBhcnIubGVuZ3RoOzspIHtcbiAgICAgICAgICAgIGlmIChsbyA9PSBoaSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbG87XG4gICAgICAgICAgICBsZXQgbWlkID0gKGxvICsgaGkpID4+IDE7XG4gICAgICAgICAgICBsZXQgZGlmZiA9IGFyclttaWRdIC0gcG9zIHx8IChlbmQgPyB0aGlzLnZhbHVlW21pZF0uZW5kU2lkZSA6IHRoaXMudmFsdWVbbWlkXS5zdGFydFNpZGUpIC0gc2lkZTtcbiAgICAgICAgICAgIGlmIChtaWQgPT0gbG8pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpZmYgPj0gMCA/IGxvIDogaGk7XG4gICAgICAgICAgICBpZiAoZGlmZiA+PSAwKVxuICAgICAgICAgICAgICAgIGhpID0gbWlkO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGxvID0gbWlkICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiZXR3ZWVuKG9mZnNldCwgZnJvbSwgdG8sIGYpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuZmluZEluZGV4KGZyb20sIC0xMDAwMDAwMDAwIC8qIEMuRmFyICovLCB0cnVlKSwgZSA9IHRoaXMuZmluZEluZGV4KHRvLCAxMDAwMDAwMDAwIC8qIEMuRmFyICovLCBmYWxzZSwgaSk7IGkgPCBlOyBpKyspXG4gICAgICAgICAgICBpZiAoZih0aGlzLmZyb21baV0gKyBvZmZzZXQsIHRoaXMudG9baV0gKyBvZmZzZXQsIHRoaXMudmFsdWVbaV0pID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG1hcChvZmZzZXQsIGNoYW5nZXMpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gW10sIGZyb20gPSBbXSwgdG8gPSBbXSwgbmV3UG9zID0gLTEsIG1heFBvaW50ID0gLTE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHZhbCA9IHRoaXMudmFsdWVbaV0sIGN1ckZyb20gPSB0aGlzLmZyb21baV0gKyBvZmZzZXQsIGN1clRvID0gdGhpcy50b1tpXSArIG9mZnNldCwgbmV3RnJvbSwgbmV3VG87XG4gICAgICAgICAgICBpZiAoY3VyRnJvbSA9PSBjdXJUbykge1xuICAgICAgICAgICAgICAgIGxldCBtYXBwZWQgPSBjaGFuZ2VzLm1hcFBvcyhjdXJGcm9tLCB2YWwuc3RhcnRTaWRlLCB2YWwubWFwTW9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hcHBlZCA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBuZXdGcm9tID0gbmV3VG8gPSBtYXBwZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHZhbC5zdGFydFNpZGUgIT0gdmFsLmVuZFNpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VG8gPSBjaGFuZ2VzLm1hcFBvcyhjdXJGcm9tLCB2YWwuZW5kU2lkZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUbyA8IG5ld0Zyb20pXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdGcm9tID0gY2hhbmdlcy5tYXBQb3MoY3VyRnJvbSwgdmFsLnN0YXJ0U2lkZSk7XG4gICAgICAgICAgICAgICAgbmV3VG8gPSBjaGFuZ2VzLm1hcFBvcyhjdXJUbywgdmFsLmVuZFNpZGUpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdGcm9tID4gbmV3VG8gfHwgbmV3RnJvbSA9PSBuZXdUbyAmJiB2YWwuc3RhcnRTaWRlID4gMCAmJiB2YWwuZW5kU2lkZSA8PSAwKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgobmV3VG8gLSBuZXdGcm9tIHx8IHZhbC5lbmRTaWRlIC0gdmFsLnN0YXJ0U2lkZSkgPCAwKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKG5ld1BvcyA8IDApXG4gICAgICAgICAgICAgICAgbmV3UG9zID0gbmV3RnJvbTtcbiAgICAgICAgICAgIGlmICh2YWwucG9pbnQpXG4gICAgICAgICAgICAgICAgbWF4UG9pbnQgPSBNYXRoLm1heChtYXhQb2ludCwgbmV3VG8gLSBuZXdGcm9tKTtcbiAgICAgICAgICAgIHZhbHVlLnB1c2godmFsKTtcbiAgICAgICAgICAgIGZyb20ucHVzaChuZXdGcm9tIC0gbmV3UG9zKTtcbiAgICAgICAgICAgIHRvLnB1c2gobmV3VG8gLSBuZXdQb3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IG1hcHBlZDogdmFsdWUubGVuZ3RoID8gbmV3IENodW5rKGZyb20sIHRvLCB2YWx1ZSwgbWF4UG9pbnQpIDogbnVsbCwgcG9zOiBuZXdQb3MgfTtcbiAgICB9XG59XG4vKipcbkEgcmFuZ2Ugc2V0IHN0b3JlcyBhIGNvbGxlY3Rpb24gb2YgW3Jhbmdlc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5SYW5nZSkgaW4gYVxud2F5IHRoYXQgbWFrZXMgdGhlbSBlZmZpY2llbnQgdG8gW21hcF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5SYW5nZVNldC5tYXApIGFuZFxuW3VwZGF0ZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5SYW5nZVNldC51cGRhdGUpLiBUaGlzIGlzIGFuIGltbXV0YWJsZSBkYXRhXG5zdHJ1Y3R1cmUuXG4qL1xuY2xhc3MgUmFuZ2VTZXQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2h1bmtQb3MsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2h1bmssIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgbmV4dExheWVyLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG1heFBvaW50KSB7XG4gICAgICAgIHRoaXMuY2h1bmtQb3MgPSBjaHVua1BvcztcbiAgICAgICAgdGhpcy5jaHVuayA9IGNodW5rO1xuICAgICAgICB0aGlzLm5leHRMYXllciA9IG5leHRMYXllcjtcbiAgICAgICAgdGhpcy5tYXhQb2ludCA9IG1heFBvaW50O1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoY2h1bmtQb3MsIGNodW5rLCBuZXh0TGF5ZXIsIG1heFBvaW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgUmFuZ2VTZXQoY2h1bmtQb3MsIGNodW5rLCBuZXh0TGF5ZXIsIG1heFBvaW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICBsZXQgbGFzdCA9IHRoaXMuY2h1bmsubGVuZ3RoIC0gMTtcbiAgICAgICAgcmV0dXJuIGxhc3QgPCAwID8gMCA6IE1hdGgubWF4KHRoaXMuY2h1bmtFbmQobGFzdCksIHRoaXMubmV4dExheWVyLmxlbmd0aCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBudW1iZXIgb2YgcmFuZ2VzIGluIHRoZSBzZXQuXG4gICAgKi9cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSlcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICBsZXQgc2l6ZSA9IHRoaXMubmV4dExheWVyLnNpemU7XG4gICAgICAgIGZvciAobGV0IGNodW5rIG9mIHRoaXMuY2h1bmspXG4gICAgICAgICAgICBzaXplICs9IGNodW5rLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2h1bmtFbmQoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2h1bmtQb3NbaW5kZXhdICsgdGhpcy5jaHVua1tpbmRleF0ubGVuZ3RoO1xuICAgIH1cbiAgICAvKipcbiAgICBVcGRhdGUgdGhlIHJhbmdlIHNldCwgb3B0aW9uYWxseSBhZGRpbmcgbmV3IHJhbmdlcyBvciBmaWx0ZXJpbmdcbiAgICBvdXQgZXhpc3Rpbmcgb25lcy5cbiAgICBcbiAgICAoTm90ZTogVGhlIHR5cGUgcGFyYW1ldGVyIGlzIGp1c3QgdGhlcmUgYXMgYSBrbHVkZ2UgdG8gd29ya1xuICAgIGFyb3VuZCBUeXBlU2NyaXB0IHZhcmlhbmNlIGlzc3VlcyB0aGF0IHByZXZlbnRlZCBgUmFuZ2VTZXQ8WD5gXG4gICAgZnJvbSBiZWluZyBhIHN1YnR5cGUgb2YgYFJhbmdlU2V0PFk+YCB3aGVuIGBYYCBpcyBhIHN1YnR5cGUgb2ZcbiAgICBgWWAuKVxuICAgICovXG4gICAgdXBkYXRlKHVwZGF0ZVNwZWMpIHtcbiAgICAgICAgbGV0IHsgYWRkID0gW10sIHNvcnQgPSBmYWxzZSwgZmlsdGVyRnJvbSA9IDAsIGZpbHRlclRvID0gdGhpcy5sZW5ndGggfSA9IHVwZGF0ZVNwZWM7XG4gICAgICAgIGxldCBmaWx0ZXIgPSB1cGRhdGVTcGVjLmZpbHRlcjtcbiAgICAgICAgaWYgKGFkZC5sZW5ndGggPT0gMCAmJiAhZmlsdGVyKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGlmIChzb3J0KVxuICAgICAgICAgICAgYWRkID0gYWRkLnNsaWNlKCkuc29ydChjbXBSYW5nZSk7XG4gICAgICAgIGlmICh0aGlzLmlzRW1wdHkpXG4gICAgICAgICAgICByZXR1cm4gYWRkLmxlbmd0aCA/IFJhbmdlU2V0Lm9mKGFkZCkgOiB0aGlzO1xuICAgICAgICBsZXQgY3VyID0gbmV3IExheWVyQ3Vyc29yKHRoaXMsIG51bGwsIC0xKS5nb3RvKDApLCBpID0gMCwgc3BpbGwgPSBbXTtcbiAgICAgICAgbGV0IGJ1aWxkZXIgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKCk7XG4gICAgICAgIHdoaWxlIChjdXIudmFsdWUgfHwgaSA8IGFkZC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChpIDwgYWRkLmxlbmd0aCAmJiAoY3VyLmZyb20gLSBhZGRbaV0uZnJvbSB8fCBjdXIuc3RhcnRTaWRlIC0gYWRkW2ldLnZhbHVlLnN0YXJ0U2lkZSkgPj0gMCkge1xuICAgICAgICAgICAgICAgIGxldCByYW5nZSA9IGFkZFtpKytdO1xuICAgICAgICAgICAgICAgIGlmICghYnVpbGRlci5hZGRJbm5lcihyYW5nZS5mcm9tLCByYW5nZS50bywgcmFuZ2UudmFsdWUpKVxuICAgICAgICAgICAgICAgICAgICBzcGlsbC5wdXNoKHJhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGN1ci5yYW5nZUluZGV4ID09IDEgJiYgY3VyLmNodW5rSW5kZXggPCB0aGlzLmNodW5rLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIChpID09IGFkZC5sZW5ndGggfHwgdGhpcy5jaHVua0VuZChjdXIuY2h1bmtJbmRleCkgPCBhZGRbaV0uZnJvbSkgJiZcbiAgICAgICAgICAgICAgICAoIWZpbHRlciB8fCBmaWx0ZXJGcm9tID4gdGhpcy5jaHVua0VuZChjdXIuY2h1bmtJbmRleCkgfHwgZmlsdGVyVG8gPCB0aGlzLmNodW5rUG9zW2N1ci5jaHVua0luZGV4XSkgJiZcbiAgICAgICAgICAgICAgICBidWlsZGVyLmFkZENodW5rKHRoaXMuY2h1bmtQb3NbY3VyLmNodW5rSW5kZXhdLCB0aGlzLmNodW5rW2N1ci5jaHVua0luZGV4XSkpIHtcbiAgICAgICAgICAgICAgICBjdXIubmV4dENodW5rKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWZpbHRlciB8fCBmaWx0ZXJGcm9tID4gY3VyLnRvIHx8IGZpbHRlclRvIDwgY3VyLmZyb20gfHwgZmlsdGVyKGN1ci5mcm9tLCBjdXIudG8sIGN1ci52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFidWlsZGVyLmFkZElubmVyKGN1ci5mcm9tLCBjdXIudG8sIGN1ci52YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGlsbC5wdXNoKFJhbmdlLmNyZWF0ZShjdXIuZnJvbSwgY3VyLnRvLCBjdXIudmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VyLm5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVpbGRlci5maW5pc2hJbm5lcih0aGlzLm5leHRMYXllci5pc0VtcHR5ICYmICFzcGlsbC5sZW5ndGggPyBSYW5nZVNldC5lbXB0eVxuICAgICAgICAgICAgOiB0aGlzLm5leHRMYXllci51cGRhdGUoeyBhZGQ6IHNwaWxsLCBmaWx0ZXIsIGZpbHRlckZyb20sIGZpbHRlclRvIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTWFwIHRoaXMgcmFuZ2Ugc2V0IHRocm91Z2ggYSBzZXQgb2YgY2hhbmdlcywgcmV0dXJuIHRoZSBuZXcgc2V0LlxuICAgICovXG4gICAgbWFwKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMuZW1wdHkgfHwgdGhpcy5pc0VtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGxldCBjaHVua3MgPSBbXSwgY2h1bmtQb3MgPSBbXSwgbWF4UG9pbnQgPSAtMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNodW5rLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLmNodW5rUG9zW2ldLCBjaHVuayA9IHRoaXMuY2h1bmtbaV07XG4gICAgICAgICAgICBsZXQgdG91Y2ggPSBjaGFuZ2VzLnRvdWNoZXNSYW5nZShzdGFydCwgc3RhcnQgKyBjaHVuay5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKHRvdWNoID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIG1heFBvaW50ID0gTWF0aC5tYXgobWF4UG9pbnQsIGNodW5rLm1heFBvaW50KTtcbiAgICAgICAgICAgICAgICBjaHVua3MucHVzaChjaHVuayk7XG4gICAgICAgICAgICAgICAgY2h1bmtQb3MucHVzaChjaGFuZ2VzLm1hcFBvcyhzdGFydCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodG91Y2ggPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBtYXBwZWQsIHBvcyB9ID0gY2h1bmsubWFwKHN0YXJ0LCBjaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICBpZiAobWFwcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heFBvaW50ID0gTWF0aC5tYXgobWF4UG9pbnQsIG1hcHBlZC5tYXhQb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIGNodW5rcy5wdXNoKG1hcHBlZCk7XG4gICAgICAgICAgICAgICAgICAgIGNodW5rUG9zLnB1c2gocG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5leHQgPSB0aGlzLm5leHRMYXllci5tYXAoY2hhbmdlcyk7XG4gICAgICAgIHJldHVybiBjaHVua3MubGVuZ3RoID09IDAgPyBuZXh0IDogbmV3IFJhbmdlU2V0KGNodW5rUG9zLCBjaHVua3MsIG5leHQgfHwgUmFuZ2VTZXQuZW1wdHksIG1heFBvaW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSByYW5nZXMgdGhhdCB0b3VjaCB0aGUgcmVnaW9uIGBmcm9tYCB0byBgdG9gLFxuICAgIGNhbGxpbmcgYGZgIGZvciBlYWNoLiBUaGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCB0aGUgcmFuZ2VzIHdpbGxcbiAgICBiZSByZXBvcnRlZCBpbiBhbnkgc3BlY2lmaWMgb3JkZXIuIFdoZW4gdGhlIGNhbGxiYWNrIHJldHVybnNcbiAgICBgZmFsc2VgLCBpdGVyYXRpb24gc3RvcHMuXG4gICAgKi9cbiAgICBiZXR3ZWVuKGZyb20sIHRvLCBmKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRW1wdHkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaHVuay5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5jaHVua1Bvc1tpXSwgY2h1bmsgPSB0aGlzLmNodW5rW2ldO1xuICAgICAgICAgICAgaWYgKHRvID49IHN0YXJ0ICYmIGZyb20gPD0gc3RhcnQgKyBjaHVuay5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBjaHVuay5iZXR3ZWVuKHN0YXJ0LCBmcm9tIC0gc3RhcnQsIHRvIC0gc3RhcnQsIGYpID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXh0TGF5ZXIuYmV0d2Vlbihmcm9tLCB0bywgZik7XG4gICAgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0aGUgcmFuZ2VzIGluIHRoaXMgc2V0LCBpbiBvcmRlciwgaW5jbHVkaW5nIGFsbFxuICAgIHJhbmdlcyB0aGF0IGVuZCBhdCBvciBhZnRlciBgZnJvbWAuXG4gICAgKi9cbiAgICBpdGVyKGZyb20gPSAwKSB7XG4gICAgICAgIHJldHVybiBIZWFwQ3Vyc29yLmZyb20oW3RoaXNdKS5nb3RvKGZyb20pO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGdldCBpc0VtcHR5KCkgeyByZXR1cm4gdGhpcy5uZXh0TGF5ZXIgPT0gdGhpczsgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0aGUgcmFuZ2VzIGluIGEgY29sbGVjdGlvbiBvZiBzZXRzLCBpbiBvcmRlcixcbiAgICBzdGFydGluZyBmcm9tIGBmcm9tYC5cbiAgICAqL1xuICAgIHN0YXRpYyBpdGVyKHNldHMsIGZyb20gPSAwKSB7XG4gICAgICAgIHJldHVybiBIZWFwQ3Vyc29yLmZyb20oc2V0cykuZ290byhmcm9tKTtcbiAgICB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHR3byBncm91cHMgb2Ygc2V0cywgY2FsbGluZyBtZXRob2RzIG9uIGBjb21wYXJhdG9yYFxuICAgIHRvIG5vdGlmeSBpdCBvZiBwb3NzaWJsZSBkaWZmZXJlbmNlcy5cbiAgICAqL1xuICAgIHN0YXRpYyBjb21wYXJlKG9sZFNldHMsIG5ld1NldHMsIFxuICAgIC8qKlxuICAgIFRoaXMgaW5kaWNhdGVzIGhvdyB0aGUgdW5kZXJseWluZyBkYXRhIGNoYW5nZWQgYmV0d2VlbiB0aGVzZVxuICAgIHJhbmdlcywgYW5kIGlzIG5lZWRlZCB0byBzeW5jaHJvbml6ZSB0aGUgaXRlcmF0aW9uLlxuICAgICovXG4gICAgdGV4dERpZmYsIGNvbXBhcmF0b3IsIFxuICAgIC8qKlxuICAgIENhbiBiZSB1c2VkIHRvIGlnbm9yZSBhbGwgbm9uLXBvaW50IHJhbmdlcywgYW5kIHBvaW50cyBiZWxvd1xuICAgIHRoZSBnaXZlbiBzaXplLiBXaGVuIC0xLCBhbGwgcmFuZ2VzIGFyZSBjb21wYXJlZC5cbiAgICAqL1xuICAgIG1pblBvaW50U2l6ZSA9IC0xKSB7XG4gICAgICAgIGxldCBhID0gb2xkU2V0cy5maWx0ZXIoc2V0ID0+IHNldC5tYXhQb2ludCA+IDAgfHwgIXNldC5pc0VtcHR5ICYmIHNldC5tYXhQb2ludCA+PSBtaW5Qb2ludFNpemUpO1xuICAgICAgICBsZXQgYiA9IG5ld1NldHMuZmlsdGVyKHNldCA9PiBzZXQubWF4UG9pbnQgPiAwIHx8ICFzZXQuaXNFbXB0eSAmJiBzZXQubWF4UG9pbnQgPj0gbWluUG9pbnRTaXplKTtcbiAgICAgICAgbGV0IHNoYXJlZENodW5rcyA9IGZpbmRTaGFyZWRDaHVua3MoYSwgYiwgdGV4dERpZmYpO1xuICAgICAgICBsZXQgc2lkZUEgPSBuZXcgU3BhbkN1cnNvcihhLCBzaGFyZWRDaHVua3MsIG1pblBvaW50U2l6ZSk7XG4gICAgICAgIGxldCBzaWRlQiA9IG5ldyBTcGFuQ3Vyc29yKGIsIHNoYXJlZENodW5rcywgbWluUG9pbnRTaXplKTtcbiAgICAgICAgdGV4dERpZmYuaXRlckdhcHMoKGZyb21BLCBmcm9tQiwgbGVuZ3RoKSA9PiBjb21wYXJlKHNpZGVBLCBmcm9tQSwgc2lkZUIsIGZyb21CLCBsZW5ndGgsIGNvbXBhcmF0b3IpKTtcbiAgICAgICAgaWYgKHRleHREaWZmLmVtcHR5ICYmIHRleHREaWZmLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgY29tcGFyZShzaWRlQSwgMCwgc2lkZUIsIDAsIDAsIGNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb21wYXJlIHRoZSBjb250ZW50cyBvZiB0d28gZ3JvdXBzIG9mIHJhbmdlIHNldHMsIHJldHVybmluZyB0cnVlXG4gICAgaWYgdGhleSBhcmUgZXF1aXZhbGVudCBpbiB0aGUgZ2l2ZW4gcmFuZ2UuXG4gICAgKi9cbiAgICBzdGF0aWMgZXEob2xkU2V0cywgbmV3U2V0cywgZnJvbSA9IDAsIHRvKSB7XG4gICAgICAgIGlmICh0byA9PSBudWxsKVxuICAgICAgICAgICAgdG8gPSAxMDAwMDAwMDAwIC8qIEMuRmFyICovIC0gMTtcbiAgICAgICAgbGV0IGEgPSBvbGRTZXRzLmZpbHRlcihzZXQgPT4gIXNldC5pc0VtcHR5ICYmIG5ld1NldHMuaW5kZXhPZihzZXQpIDwgMCk7XG4gICAgICAgIGxldCBiID0gbmV3U2V0cy5maWx0ZXIoc2V0ID0+ICFzZXQuaXNFbXB0eSAmJiBvbGRTZXRzLmluZGV4T2Yoc2V0KSA8IDApO1xuICAgICAgICBpZiAoYS5sZW5ndGggIT0gYi5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghYS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgbGV0IHNoYXJlZENodW5rcyA9IGZpbmRTaGFyZWRDaHVua3MoYSwgYik7XG4gICAgICAgIGxldCBzaWRlQSA9IG5ldyBTcGFuQ3Vyc29yKGEsIHNoYXJlZENodW5rcywgMCkuZ290byhmcm9tKSwgc2lkZUIgPSBuZXcgU3BhbkN1cnNvcihiLCBzaGFyZWRDaHVua3MsIDApLmdvdG8oZnJvbSk7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGlmIChzaWRlQS50byAhPSBzaWRlQi50byB8fFxuICAgICAgICAgICAgICAgICFzYW1lVmFsdWVzKHNpZGVBLmFjdGl2ZSwgc2lkZUIuYWN0aXZlKSB8fFxuICAgICAgICAgICAgICAgIHNpZGVBLnBvaW50ICYmICghc2lkZUIucG9pbnQgfHwgIWNtcFZhbChzaWRlQS5wb2ludCwgc2lkZUIucG9pbnQpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoc2lkZUEudG8gPiB0bylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHNpZGVBLm5leHQoKTtcbiAgICAgICAgICAgIHNpZGVCLm5leHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBJdGVyYXRlIG92ZXIgYSBncm91cCBvZiByYW5nZSBzZXRzIGF0IHRoZSBzYW1lIHRpbWUsIG5vdGlmeWluZ1xuICAgIHRoZSBpdGVyYXRvciBhYm91dCB0aGUgcmFuZ2VzIGNvdmVyaW5nIGV2ZXJ5IGdpdmVuIHBpZWNlIG9mXG4gICAgY29udGVudC4gUmV0dXJucyB0aGUgb3BlbiBjb3VudCAoc2VlXG4gICAgW2BTcGFuSXRlcmF0b3Iuc3BhbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3Bhbkl0ZXJhdG9yLnNwYW4pKSBhdCB0aGUgZW5kXG4gICAgb2YgdGhlIGl0ZXJhdGlvbi5cbiAgICAqL1xuICAgIHN0YXRpYyBzcGFucyhzZXRzLCBmcm9tLCB0bywgaXRlcmF0b3IsIFxuICAgIC8qKlxuICAgIFdoZW4gZ2l2ZW4gYW5kIGdyZWF0ZXIgdGhhbiAtMSwgb25seSBwb2ludHMgb2YgYXQgbGVhc3QgdGhpc1xuICAgIHNpemUgYXJlIHRha2VuIGludG8gYWNjb3VudC5cbiAgICAqL1xuICAgIG1pblBvaW50U2l6ZSA9IC0xKSB7XG4gICAgICAgIGxldCBjdXJzb3IgPSBuZXcgU3BhbkN1cnNvcihzZXRzLCBudWxsLCBtaW5Qb2ludFNpemUpLmdvdG8oZnJvbSksIHBvcyA9IGZyb207XG4gICAgICAgIGxldCBvcGVuUmFuZ2VzID0gY3Vyc29yLm9wZW5TdGFydDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGN1clRvID0gTWF0aC5taW4oY3Vyc29yLnRvLCB0byk7XG4gICAgICAgICAgICBpZiAoY3Vyc29yLnBvaW50KSB7XG4gICAgICAgICAgICAgICAgbGV0IGFjdGl2ZSA9IGN1cnNvci5hY3RpdmVGb3JQb2ludChjdXJzb3IudG8pO1xuICAgICAgICAgICAgICAgIGxldCBvcGVuQ291bnQgPSBjdXJzb3IucG9pbnRGcm9tIDwgZnJvbSA/IGFjdGl2ZS5sZW5ndGggKyAxXG4gICAgICAgICAgICAgICAgICAgIDogY3Vyc29yLnBvaW50LnN0YXJ0U2lkZSA8IDAgPyBhY3RpdmUubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICA6IE1hdGgubWluKGFjdGl2ZS5sZW5ndGgsIG9wZW5SYW5nZXMpO1xuICAgICAgICAgICAgICAgIGl0ZXJhdG9yLnBvaW50KHBvcywgY3VyVG8sIGN1cnNvci5wb2ludCwgYWN0aXZlLCBvcGVuQ291bnQsIGN1cnNvci5wb2ludFJhbmspO1xuICAgICAgICAgICAgICAgIG9wZW5SYW5nZXMgPSBNYXRoLm1pbihjdXJzb3Iub3BlbkVuZChjdXJUbyksIGFjdGl2ZS5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY3VyVG8gPiBwb3MpIHtcbiAgICAgICAgICAgICAgICBpdGVyYXRvci5zcGFuKHBvcywgY3VyVG8sIGN1cnNvci5hY3RpdmUsIG9wZW5SYW5nZXMpO1xuICAgICAgICAgICAgICAgIG9wZW5SYW5nZXMgPSBjdXJzb3Iub3BlbkVuZChjdXJUbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3Vyc29yLnRvID4gdG8pXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wZW5SYW5nZXMgKyAoY3Vyc29yLnBvaW50ICYmIGN1cnNvci50byA+IHRvID8gMSA6IDApO1xuICAgICAgICAgICAgcG9zID0gY3Vyc29yLnRvO1xuICAgICAgICAgICAgY3Vyc29yLm5leHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSByYW5nZSBzZXQgZm9yIHRoZSBnaXZlbiByYW5nZSBvciBhcnJheSBvZiByYW5nZXMuIEJ5XG4gICAgZGVmYXVsdCwgdGhpcyBleHBlY3RzIHRoZSByYW5nZXMgdG8gYmUgX3NvcnRlZF8gKGJ5IHN0YXJ0XG4gICAgcG9zaXRpb24gYW5kLCBpZiB0d28gc3RhcnQgYXQgdGhlIHNhbWUgcG9zaXRpb24sXG4gICAgYHZhbHVlLnN0YXJ0U2lkZWApLiBZb3UgY2FuIHBhc3MgYHRydWVgIGFzIHNlY29uZCBhcmd1bWVudCB0b1xuICAgIGNhdXNlIHRoZSBtZXRob2QgdG8gc29ydCB0aGVtLlxuICAgICovXG4gICAgc3RhdGljIG9mKHJhbmdlcywgc29ydCA9IGZhbHNlKSB7XG4gICAgICAgIGxldCBidWlsZCA9IG5ldyBSYW5nZVNldEJ1aWxkZXIoKTtcbiAgICAgICAgZm9yIChsZXQgcmFuZ2Ugb2YgcmFuZ2VzIGluc3RhbmNlb2YgUmFuZ2UgPyBbcmFuZ2VzXSA6IHNvcnQgPyBsYXp5U29ydChyYW5nZXMpIDogcmFuZ2VzKVxuICAgICAgICAgICAgYnVpbGQuYWRkKHJhbmdlLmZyb20sIHJhbmdlLnRvLCByYW5nZS52YWx1ZSk7XG4gICAgICAgIHJldHVybiBidWlsZC5maW5pc2goKTtcbiAgICB9XG4gICAgLyoqXG4gICAgSm9pbiBhbiBhcnJheSBvZiByYW5nZSBzZXRzIGludG8gYSBzaW5nbGUgc2V0LlxuICAgICovXG4gICAgc3RhdGljIGpvaW4oc2V0cykge1xuICAgICAgICBpZiAoIXNldHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIFJhbmdlU2V0LmVtcHR5O1xuICAgICAgICBsZXQgcmVzdWx0ID0gc2V0c1tzZXRzLmxlbmd0aCAtIDFdO1xuICAgICAgICBmb3IgKGxldCBpID0gc2V0cy5sZW5ndGggLSAyOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgZm9yIChsZXQgbGF5ZXIgPSBzZXRzW2ldOyBsYXllciAhPSBSYW5nZVNldC5lbXB0eTsgbGF5ZXIgPSBsYXllci5uZXh0TGF5ZXIpXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFJhbmdlU2V0KGxheWVyLmNodW5rUG9zLCBsYXllci5jaHVuaywgcmVzdWx0LCBNYXRoLm1heChsYXllci5tYXhQb2ludCwgcmVzdWx0Lm1heFBvaW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG4vKipcblRoZSBlbXB0eSBzZXQgb2YgcmFuZ2VzLlxuKi9cblJhbmdlU2V0LmVtcHR5ID0gLypAX19QVVJFX18qL25ldyBSYW5nZVNldChbXSwgW10sIG51bGwsIC0xKTtcbmZ1bmN0aW9uIGxhenlTb3J0KHJhbmdlcykge1xuICAgIGlmIChyYW5nZXMubGVuZ3RoID4gMSlcbiAgICAgICAgZm9yIChsZXQgcHJldiA9IHJhbmdlc1swXSwgaSA9IDE7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjdXIgPSByYW5nZXNbaV07XG4gICAgICAgICAgICBpZiAoY21wUmFuZ2UocHJldiwgY3VyKSA+IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlcy5zbGljZSgpLnNvcnQoY21wUmFuZ2UpO1xuICAgICAgICAgICAgcHJldiA9IGN1cjtcbiAgICAgICAgfVxuICAgIHJldHVybiByYW5nZXM7XG59XG5SYW5nZVNldC5lbXB0eS5uZXh0TGF5ZXIgPSBSYW5nZVNldC5lbXB0eTtcbi8qKlxuQSByYW5nZSBzZXQgYnVpbGRlciBpcyBhIGRhdGEgc3RydWN0dXJlIHRoYXQgaGVscHMgYnVpbGQgdXAgYVxuW3JhbmdlIHNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5SYW5nZVNldCkgZGlyZWN0bHksIHdpdGhvdXQgZmlyc3QgYWxsb2NhdGluZ1xuYW4gYXJyYXkgb2YgW2BSYW5nZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuUmFuZ2UpIG9iamVjdHMuXG4qL1xuY2xhc3MgUmFuZ2VTZXRCdWlsZGVyIHtcbiAgICBmaW5pc2hDaHVuayhuZXdBcnJheXMpIHtcbiAgICAgICAgdGhpcy5jaHVua3MucHVzaChuZXcgQ2h1bmsodGhpcy5mcm9tLCB0aGlzLnRvLCB0aGlzLnZhbHVlLCB0aGlzLm1heFBvaW50KSk7XG4gICAgICAgIHRoaXMuY2h1bmtQb3MucHVzaCh0aGlzLmNodW5rU3RhcnQpO1xuICAgICAgICB0aGlzLmNodW5rU3RhcnQgPSAtMTtcbiAgICAgICAgdGhpcy5zZXRNYXhQb2ludCA9IE1hdGgubWF4KHRoaXMuc2V0TWF4UG9pbnQsIHRoaXMubWF4UG9pbnQpO1xuICAgICAgICB0aGlzLm1heFBvaW50ID0gLTE7XG4gICAgICAgIGlmIChuZXdBcnJheXMpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbSA9IFtdO1xuICAgICAgICAgICAgdGhpcy50byA9IFtdO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBlbXB0eSBidWlsZGVyLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2h1bmtzID0gW107XG4gICAgICAgIHRoaXMuY2h1bmtQb3MgPSBbXTtcbiAgICAgICAgdGhpcy5jaHVua1N0YXJ0ID0gLTE7XG4gICAgICAgIHRoaXMubGFzdCA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdEZyb20gPSAtMTAwMDAwMDAwMCAvKiBDLkZhciAqLztcbiAgICAgICAgdGhpcy5sYXN0VG8gPSAtMTAwMDAwMDAwMCAvKiBDLkZhciAqLztcbiAgICAgICAgdGhpcy5mcm9tID0gW107XG4gICAgICAgIHRoaXMudG8gPSBbXTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgICAgICB0aGlzLm1heFBvaW50ID0gLTE7XG4gICAgICAgIHRoaXMuc2V0TWF4UG9pbnQgPSAtMTtcbiAgICAgICAgdGhpcy5uZXh0TGF5ZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBBZGQgYSByYW5nZS4gUmFuZ2VzIHNob3VsZCBiZSBhZGRlZCBpbiBzb3J0ZWQgKGJ5IGBmcm9tYCBhbmRcbiAgICBgdmFsdWUuc3RhcnRTaWRlYCkgb3JkZXIuXG4gICAgKi9cbiAgICBhZGQoZnJvbSwgdG8sIHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5hZGRJbm5lcihmcm9tLCB0bywgdmFsdWUpKVxuICAgICAgICAgICAgKHRoaXMubmV4dExheWVyIHx8ICh0aGlzLm5leHRMYXllciA9IG5ldyBSYW5nZVNldEJ1aWxkZXIpKS5hZGQoZnJvbSwgdG8sIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBhZGRJbm5lcihmcm9tLCB0bywgdmFsdWUpIHtcbiAgICAgICAgbGV0IGRpZmYgPSBmcm9tIC0gdGhpcy5sYXN0VG8gfHwgdmFsdWUuc3RhcnRTaWRlIC0gdGhpcy5sYXN0LmVuZFNpZGU7XG4gICAgICAgIGlmIChkaWZmIDw9IDAgJiYgKGZyb20gLSB0aGlzLmxhc3RGcm9tIHx8IHZhbHVlLnN0YXJ0U2lkZSAtIHRoaXMubGFzdC5zdGFydFNpZGUpIDwgMClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJhbmdlcyBtdXN0IGJlIGFkZGVkIHNvcnRlZCBieSBgZnJvbWAgcG9zaXRpb24gYW5kIGBzdGFydFNpZGVgXCIpO1xuICAgICAgICBpZiAoZGlmZiA8IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmZyb20ubGVuZ3RoID09IDI1MCAvKiBDLkNodW5rU2l6ZSAqLylcbiAgICAgICAgICAgIHRoaXMuZmluaXNoQ2h1bmsodHJ1ZSk7XG4gICAgICAgIGlmICh0aGlzLmNodW5rU3RhcnQgPCAwKVxuICAgICAgICAgICAgdGhpcy5jaHVua1N0YXJ0ID0gZnJvbTtcbiAgICAgICAgdGhpcy5mcm9tLnB1c2goZnJvbSAtIHRoaXMuY2h1bmtTdGFydCk7XG4gICAgICAgIHRoaXMudG8ucHVzaCh0byAtIHRoaXMuY2h1bmtTdGFydCk7XG4gICAgICAgIHRoaXMubGFzdCA9IHZhbHVlO1xuICAgICAgICB0aGlzLmxhc3RGcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy5sYXN0VG8gPSB0bztcbiAgICAgICAgdGhpcy52YWx1ZS5wdXNoKHZhbHVlKTtcbiAgICAgICAgaWYgKHZhbHVlLnBvaW50KVxuICAgICAgICAgICAgdGhpcy5tYXhQb2ludCA9IE1hdGgubWF4KHRoaXMubWF4UG9pbnQsIHRvIC0gZnJvbSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFkZENodW5rKGZyb20sIGNodW5rKSB7XG4gICAgICAgIGlmICgoZnJvbSAtIHRoaXMubGFzdFRvIHx8IGNodW5rLnZhbHVlWzBdLnN0YXJ0U2lkZSAtIHRoaXMubGFzdC5lbmRTaWRlKSA8IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmZyb20ubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5maW5pc2hDaHVuayh0cnVlKTtcbiAgICAgICAgdGhpcy5zZXRNYXhQb2ludCA9IE1hdGgubWF4KHRoaXMuc2V0TWF4UG9pbnQsIGNodW5rLm1heFBvaW50KTtcbiAgICAgICAgdGhpcy5jaHVua3MucHVzaChjaHVuayk7XG4gICAgICAgIHRoaXMuY2h1bmtQb3MucHVzaChmcm9tKTtcbiAgICAgICAgbGV0IGxhc3QgPSBjaHVuay52YWx1ZS5sZW5ndGggLSAxO1xuICAgICAgICB0aGlzLmxhc3QgPSBjaHVuay52YWx1ZVtsYXN0XTtcbiAgICAgICAgdGhpcy5sYXN0RnJvbSA9IGNodW5rLmZyb21bbGFzdF0gKyBmcm9tO1xuICAgICAgICB0aGlzLmxhc3RUbyA9IGNodW5rLnRvW2xhc3RdICsgZnJvbTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmlzaCB0aGUgcmFuZ2Ugc2V0LiBSZXR1cm5zIHRoZSBuZXcgc2V0LiBUaGUgYnVpbGRlciBjYW4ndCBiZVxuICAgIHVzZWQgYW55bW9yZSBhZnRlciB0aGlzIGhhcyBiZWVuIGNhbGxlZC5cbiAgICAqL1xuICAgIGZpbmlzaCgpIHsgcmV0dXJuIHRoaXMuZmluaXNoSW5uZXIoUmFuZ2VTZXQuZW1wdHkpOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBmaW5pc2hJbm5lcihuZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLmZyb20ubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5maW5pc2hDaHVuayhmYWxzZSk7XG4gICAgICAgIGlmICh0aGlzLmNodW5rcy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICBsZXQgcmVzdWx0ID0gUmFuZ2VTZXQuY3JlYXRlKHRoaXMuY2h1bmtQb3MsIHRoaXMuY2h1bmtzLCB0aGlzLm5leHRMYXllciA/IHRoaXMubmV4dExheWVyLmZpbmlzaElubmVyKG5leHQpIDogbmV4dCwgdGhpcy5zZXRNYXhQb2ludCk7XG4gICAgICAgIHRoaXMuZnJvbSA9IG51bGw7IC8vIE1ha2Ugc3VyZSBmdXJ0aGVyIGBhZGRgIGNhbGxzIHByb2R1Y2UgZXJyb3JzXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gZmluZFNoYXJlZENodW5rcyhhLCBiLCB0ZXh0RGlmZikge1xuICAgIGxldCBpbkEgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChsZXQgc2V0IG9mIGEpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0LmNodW5rLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKHNldC5jaHVua1tpXS5tYXhQb2ludCA8PSAwKVxuICAgICAgICAgICAgICAgIGluQS5zZXQoc2V0LmNodW5rW2ldLCBzZXQuY2h1bmtQb3NbaV0pO1xuICAgIGxldCBzaGFyZWQgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChsZXQgc2V0IG9mIGIpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0LmNodW5rLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQga25vd24gPSBpbkEuZ2V0KHNldC5jaHVua1tpXSk7XG4gICAgICAgICAgICBpZiAoa25vd24gIT0gbnVsbCAmJiAodGV4dERpZmYgPyB0ZXh0RGlmZi5tYXBQb3Moa25vd24pIDoga25vd24pID09IHNldC5jaHVua1Bvc1tpXSAmJlxuICAgICAgICAgICAgICAgICEodGV4dERpZmYgPT09IG51bGwgfHwgdGV4dERpZmYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRleHREaWZmLnRvdWNoZXNSYW5nZShrbm93biwga25vd24gKyBzZXQuY2h1bmtbaV0ubGVuZ3RoKSkpXG4gICAgICAgICAgICAgICAgc2hhcmVkLmFkZChzZXQuY2h1bmtbaV0pO1xuICAgICAgICB9XG4gICAgcmV0dXJuIHNoYXJlZDtcbn1cbmNsYXNzIExheWVyQ3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihsYXllciwgc2tpcCwgbWluUG9pbnQsIHJhbmsgPSAwKSB7XG4gICAgICAgIHRoaXMubGF5ZXIgPSBsYXllcjtcbiAgICAgICAgdGhpcy5za2lwID0gc2tpcDtcbiAgICAgICAgdGhpcy5taW5Qb2ludCA9IG1pblBvaW50O1xuICAgICAgICB0aGlzLnJhbmsgPSByYW5rO1xuICAgIH1cbiAgICBnZXQgc3RhcnRTaWRlKCkgeyByZXR1cm4gdGhpcy52YWx1ZSA/IHRoaXMudmFsdWUuc3RhcnRTaWRlIDogMDsgfVxuICAgIGdldCBlbmRTaWRlKCkgeyByZXR1cm4gdGhpcy52YWx1ZSA/IHRoaXMudmFsdWUuZW5kU2lkZSA6IDA7IH1cbiAgICBnb3RvKHBvcywgc2lkZSA9IC0xMDAwMDAwMDAwIC8qIEMuRmFyICovKSB7XG4gICAgICAgIHRoaXMuY2h1bmtJbmRleCA9IHRoaXMucmFuZ2VJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuZ290b0lubmVyKHBvcywgc2lkZSwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ290b0lubmVyKHBvcywgc2lkZSwgZm9yd2FyZCkge1xuICAgICAgICB3aGlsZSAodGhpcy5jaHVua0luZGV4IDwgdGhpcy5sYXllci5jaHVuay5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5sYXllci5jaHVua1t0aGlzLmNodW5rSW5kZXhdO1xuICAgICAgICAgICAgaWYgKCEodGhpcy5za2lwICYmIHRoaXMuc2tpcC5oYXMobmV4dCkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyLmNodW5rRW5kKHRoaXMuY2h1bmtJbmRleCkgPCBwb3MgfHxcbiAgICAgICAgICAgICAgICBuZXh0Lm1heFBvaW50IDwgdGhpcy5taW5Qb2ludCkpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB0aGlzLmNodW5rSW5kZXgrKztcbiAgICAgICAgICAgIGZvcndhcmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jaHVua0luZGV4IDwgdGhpcy5sYXllci5jaHVuay5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCByYW5nZUluZGV4ID0gdGhpcy5sYXllci5jaHVua1t0aGlzLmNodW5rSW5kZXhdLmZpbmRJbmRleChwb3MgLSB0aGlzLmxheWVyLmNodW5rUG9zW3RoaXMuY2h1bmtJbmRleF0sIHNpZGUsIHRydWUpO1xuICAgICAgICAgICAgaWYgKCFmb3J3YXJkIHx8IHRoaXMucmFuZ2VJbmRleCA8IHJhbmdlSW5kZXgpXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSYW5nZUluZGV4KHJhbmdlSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgIH1cbiAgICBmb3J3YXJkKHBvcywgc2lkZSkge1xuICAgICAgICBpZiAoKHRoaXMudG8gLSBwb3MgfHwgdGhpcy5lbmRTaWRlIC0gc2lkZSkgPCAwKVxuICAgICAgICAgICAgdGhpcy5nb3RvSW5uZXIocG9zLCBzaWRlLCB0cnVlKTtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2h1bmtJbmRleCA9PSB0aGlzLmxheWVyLmNodW5rLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZnJvbSA9IHRoaXMudG8gPSAxMDAwMDAwMDAwIC8qIEMuRmFyICovO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGNodW5rUG9zID0gdGhpcy5sYXllci5jaHVua1Bvc1t0aGlzLmNodW5rSW5kZXhdLCBjaHVuayA9IHRoaXMubGF5ZXIuY2h1bmtbdGhpcy5jaHVua0luZGV4XTtcbiAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IGNodW5rUG9zICsgY2h1bmsuZnJvbVt0aGlzLnJhbmdlSW5kZXhdO1xuICAgICAgICAgICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgICAgICAgICAgdGhpcy50byA9IGNodW5rUG9zICsgY2h1bmsudG9bdGhpcy5yYW5nZUluZGV4XTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gY2h1bmsudmFsdWVbdGhpcy5yYW5nZUluZGV4XTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJhbmdlSW5kZXgodGhpcy5yYW5nZUluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWluUG9pbnQgPCAwIHx8IHRoaXMudmFsdWUucG9pbnQgJiYgdGhpcy50byAtIHRoaXMuZnJvbSA+PSB0aGlzLm1pblBvaW50KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRSYW5nZUluZGV4KGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA9PSB0aGlzLmxheWVyLmNodW5rW3RoaXMuY2h1bmtJbmRleF0udmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmNodW5rSW5kZXgrKztcbiAgICAgICAgICAgIGlmICh0aGlzLnNraXApIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5jaHVua0luZGV4IDwgdGhpcy5sYXllci5jaHVuay5sZW5ndGggJiYgdGhpcy5za2lwLmhhcyh0aGlzLmxheWVyLmNodW5rW3RoaXMuY2h1bmtJbmRleF0pKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNodW5rSW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmFuZ2VJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJhbmdlSW5kZXggPSBpbmRleDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZXh0Q2h1bmsoKSB7XG4gICAgICAgIHRoaXMuY2h1bmtJbmRleCsrO1xuICAgICAgICB0aGlzLnJhbmdlSW5kZXggPSAwO1xuICAgICAgICB0aGlzLm5leHQoKTtcbiAgICB9XG4gICAgY29tcGFyZShvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5mcm9tIC0gb3RoZXIuZnJvbSB8fCB0aGlzLnN0YXJ0U2lkZSAtIG90aGVyLnN0YXJ0U2lkZSB8fCB0aGlzLnJhbmsgLSBvdGhlci5yYW5rIHx8XG4gICAgICAgICAgICB0aGlzLnRvIC0gb3RoZXIudG8gfHwgdGhpcy5lbmRTaWRlIC0gb3RoZXIuZW5kU2lkZTtcbiAgICB9XG59XG5jbGFzcyBIZWFwQ3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihoZWFwKSB7XG4gICAgICAgIHRoaXMuaGVhcCA9IGhlYXA7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKHNldHMsIHNraXAgPSBudWxsLCBtaW5Qb2ludCA9IC0xKSB7XG4gICAgICAgIGxldCBoZWFwID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgY3VyID0gc2V0c1tpXTsgIWN1ci5pc0VtcHR5OyBjdXIgPSBjdXIubmV4dExheWVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1ci5tYXhQb2ludCA+PSBtaW5Qb2ludClcbiAgICAgICAgICAgICAgICAgICAgaGVhcC5wdXNoKG5ldyBMYXllckN1cnNvcihjdXIsIHNraXAsIG1pblBvaW50LCBpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhlYXAubGVuZ3RoID09IDEgPyBoZWFwWzBdIDogbmV3IEhlYXBDdXJzb3IoaGVhcCk7XG4gICAgfVxuICAgIGdldCBzdGFydFNpZGUoKSB7IHJldHVybiB0aGlzLnZhbHVlID8gdGhpcy52YWx1ZS5zdGFydFNpZGUgOiAwOyB9XG4gICAgZ290byhwb3MsIHNpZGUgPSAtMTAwMDAwMDAwMCAvKiBDLkZhciAqLykge1xuICAgICAgICBmb3IgKGxldCBjdXIgb2YgdGhpcy5oZWFwKVxuICAgICAgICAgICAgY3VyLmdvdG8ocG9zLCBzaWRlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuaGVhcC5sZW5ndGggPj4gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgICAgICBoZWFwQnViYmxlKHRoaXMuaGVhcCwgaSk7XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZm9yd2FyZChwb3MsIHNpZGUpIHtcbiAgICAgICAgZm9yIChsZXQgY3VyIG9mIHRoaXMuaGVhcClcbiAgICAgICAgICAgIGN1ci5mb3J3YXJkKHBvcywgc2lkZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmhlYXAubGVuZ3RoID4+IDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICAgICAgaGVhcEJ1YmJsZSh0aGlzLmhlYXAsIGkpO1xuICAgICAgICBpZiAoKHRoaXMudG8gLSBwb3MgfHwgdGhpcy52YWx1ZS5lbmRTaWRlIC0gc2lkZSkgPCAwKVxuICAgICAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGlmICh0aGlzLmhlYXAubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbSA9IHRoaXMudG8gPSAxMDAwMDAwMDAwIC8qIEMuRmFyICovO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJhbmsgPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0b3AgPSB0aGlzLmhlYXBbMF07XG4gICAgICAgICAgICB0aGlzLmZyb20gPSB0b3AuZnJvbTtcbiAgICAgICAgICAgIHRoaXMudG8gPSB0b3AudG87XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdG9wLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5yYW5rID0gdG9wLnJhbms7XG4gICAgICAgICAgICBpZiAodG9wLnZhbHVlKVxuICAgICAgICAgICAgICAgIHRvcC5uZXh0KCk7XG4gICAgICAgICAgICBoZWFwQnViYmxlKHRoaXMuaGVhcCwgMCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBoZWFwQnViYmxlKGhlYXAsIGluZGV4KSB7XG4gICAgZm9yIChsZXQgY3VyID0gaGVhcFtpbmRleF07Oykge1xuICAgICAgICBsZXQgY2hpbGRJbmRleCA9IChpbmRleCA8PCAxKSArIDE7XG4gICAgICAgIGlmIChjaGlsZEluZGV4ID49IGhlYXAubGVuZ3RoKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGxldCBjaGlsZCA9IGhlYXBbY2hpbGRJbmRleF07XG4gICAgICAgIGlmIChjaGlsZEluZGV4ICsgMSA8IGhlYXAubGVuZ3RoICYmIGNoaWxkLmNvbXBhcmUoaGVhcFtjaGlsZEluZGV4ICsgMV0pID49IDApIHtcbiAgICAgICAgICAgIGNoaWxkID0gaGVhcFtjaGlsZEluZGV4ICsgMV07XG4gICAgICAgICAgICBjaGlsZEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1ci5jb21wYXJlKGNoaWxkKSA8IDApXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgaGVhcFtjaGlsZEluZGV4XSA9IGN1cjtcbiAgICAgICAgaGVhcFtpbmRleF0gPSBjaGlsZDtcbiAgICAgICAgaW5kZXggPSBjaGlsZEluZGV4O1xuICAgIH1cbn1cbmNsYXNzIFNwYW5DdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKHNldHMsIHNraXAsIG1pblBvaW50KSB7XG4gICAgICAgIHRoaXMubWluUG9pbnQgPSBtaW5Qb2ludDtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmVUbyA9IFtdO1xuICAgICAgICB0aGlzLmFjdGl2ZVJhbmsgPSBbXTtcbiAgICAgICAgdGhpcy5taW5BY3RpdmUgPSAtMTtcbiAgICAgICAgLy8gQSBjdXJyZW50bHkgYWN0aXZlIHBvaW50IHJhbmdlLCBpZiBhbnlcbiAgICAgICAgdGhpcy5wb2ludCA9IG51bGw7XG4gICAgICAgIHRoaXMucG9pbnRGcm9tID0gMDtcbiAgICAgICAgdGhpcy5wb2ludFJhbmsgPSAwO1xuICAgICAgICB0aGlzLnRvID0gLTEwMDAwMDAwMDAgLyogQy5GYXIgKi87XG4gICAgICAgIHRoaXMuZW5kU2lkZSA9IDA7XG4gICAgICAgIC8vIFRoZSBhbW91bnQgb2Ygb3BlbiBhY3RpdmUgcmFuZ2VzIGF0IHRoZSBzdGFydCBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgIC8vIE5vdCBpbmNsdWRpbmcgcG9pbnRzLlxuICAgICAgICB0aGlzLm9wZW5TdGFydCA9IC0xO1xuICAgICAgICB0aGlzLmN1cnNvciA9IEhlYXBDdXJzb3IuZnJvbShzZXRzLCBza2lwLCBtaW5Qb2ludCk7XG4gICAgfVxuICAgIGdvdG8ocG9zLCBzaWRlID0gLTEwMDAwMDAwMDAgLyogQy5GYXIgKi8pIHtcbiAgICAgICAgdGhpcy5jdXJzb3IuZ290byhwb3MsIHNpZGUpO1xuICAgICAgICB0aGlzLmFjdGl2ZS5sZW5ndGggPSB0aGlzLmFjdGl2ZVRvLmxlbmd0aCA9IHRoaXMuYWN0aXZlUmFuay5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLm1pbkFjdGl2ZSA9IC0xO1xuICAgICAgICB0aGlzLnRvID0gcG9zO1xuICAgICAgICB0aGlzLmVuZFNpZGUgPSBzaWRlO1xuICAgICAgICB0aGlzLm9wZW5TdGFydCA9IC0xO1xuICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGZvcndhcmQocG9zLCBzaWRlKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLm1pbkFjdGl2ZSA+IC0xICYmICh0aGlzLmFjdGl2ZVRvW3RoaXMubWluQWN0aXZlXSAtIHBvcyB8fCB0aGlzLmFjdGl2ZVt0aGlzLm1pbkFjdGl2ZV0uZW5kU2lkZSAtIHNpZGUpIDwgMClcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQWN0aXZlKHRoaXMubWluQWN0aXZlKTtcbiAgICAgICAgdGhpcy5jdXJzb3IuZm9yd2FyZChwb3MsIHNpZGUpO1xuICAgIH1cbiAgICByZW1vdmVBY3RpdmUoaW5kZXgpIHtcbiAgICAgICAgcmVtb3ZlKHRoaXMuYWN0aXZlLCBpbmRleCk7XG4gICAgICAgIHJlbW92ZSh0aGlzLmFjdGl2ZVRvLCBpbmRleCk7XG4gICAgICAgIHJlbW92ZSh0aGlzLmFjdGl2ZVJhbmssIGluZGV4KTtcbiAgICAgICAgdGhpcy5taW5BY3RpdmUgPSBmaW5kTWluSW5kZXgodGhpcy5hY3RpdmUsIHRoaXMuYWN0aXZlVG8pO1xuICAgIH1cbiAgICBhZGRBY3RpdmUodHJhY2tPcGVuKSB7XG4gICAgICAgIGxldCBpID0gMCwgeyB2YWx1ZSwgdG8sIHJhbmsgfSA9IHRoaXMuY3Vyc29yO1xuICAgICAgICAvLyBPcmdhbml6ZSBhY3RpdmUgbWFya3MgYnkgcmFuayBmaXJzdCwgdGhlbiBieSBzaXplXG4gICAgICAgIHdoaWxlIChpIDwgdGhpcy5hY3RpdmVSYW5rLmxlbmd0aCAmJiAocmFuayAtIHRoaXMuYWN0aXZlUmFua1tpXSB8fCB0byAtIHRoaXMuYWN0aXZlVG9baV0pID4gMClcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgaW5zZXJ0KHRoaXMuYWN0aXZlLCBpLCB2YWx1ZSk7XG4gICAgICAgIGluc2VydCh0aGlzLmFjdGl2ZVRvLCBpLCB0byk7XG4gICAgICAgIGluc2VydCh0aGlzLmFjdGl2ZVJhbmssIGksIHJhbmspO1xuICAgICAgICBpZiAodHJhY2tPcGVuKVxuICAgICAgICAgICAgaW5zZXJ0KHRyYWNrT3BlbiwgaSwgdGhpcy5jdXJzb3IuZnJvbSk7XG4gICAgICAgIHRoaXMubWluQWN0aXZlID0gZmluZE1pbkluZGV4KHRoaXMuYWN0aXZlLCB0aGlzLmFjdGl2ZVRvKTtcbiAgICB9XG4gICAgLy8gQWZ0ZXIgY2FsbGluZyB0aGlzLCBpZiBgdGhpcy5wb2ludGAgIT0gbnVsbCwgdGhlIG5leHQgcmFuZ2UgaXMgYVxuICAgIC8vIHBvaW50LiBPdGhlcndpc2UsIGl0J3MgYSByZWd1bGFyIHJhbmdlLCBjb3ZlcmVkIGJ5IGB0aGlzLmFjdGl2ZWAuXG4gICAgbmV4dCgpIHtcbiAgICAgICAgbGV0IGZyb20gPSB0aGlzLnRvLCB3YXNQb2ludCA9IHRoaXMucG9pbnQ7XG4gICAgICAgIHRoaXMucG9pbnQgPSBudWxsO1xuICAgICAgICBsZXQgdHJhY2tPcGVuID0gdGhpcy5vcGVuU3RhcnQgPCAwID8gW10gOiBudWxsO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgYSA9IHRoaXMubWluQWN0aXZlO1xuICAgICAgICAgICAgaWYgKGEgPiAtMSAmJiAodGhpcy5hY3RpdmVUb1thXSAtIHRoaXMuY3Vyc29yLmZyb20gfHwgdGhpcy5hY3RpdmVbYV0uZW5kU2lkZSAtIHRoaXMuY3Vyc29yLnN0YXJ0U2lkZSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVG9bYV0gPiBmcm9tKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG8gPSB0aGlzLmFjdGl2ZVRvW2FdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZFNpZGUgPSB0aGlzLmFjdGl2ZVthXS5lbmRTaWRlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBY3RpdmUoYSk7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrT3BlbilcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKHRyYWNrT3BlbiwgYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghdGhpcy5jdXJzb3IudmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvID0gdGhpcy5lbmRTaWRlID0gMTAwMDAwMDAwMCAvKiBDLkZhciAqLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY3Vyc29yLmZyb20gPiBmcm9tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50byA9IHRoaXMuY3Vyc29yLmZyb207XG4gICAgICAgICAgICAgICAgdGhpcy5lbmRTaWRlID0gdGhpcy5jdXJzb3Iuc3RhcnRTaWRlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHRWYWwgPSB0aGlzLmN1cnNvci52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIW5leHRWYWwucG9pbnQpIHsgLy8gT3BlbmluZyBhIHJhbmdlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQWN0aXZlKHRyYWNrT3Blbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yLm5leHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAod2FzUG9pbnQgJiYgdGhpcy5jdXJzb3IudG8gPT0gdGhpcy50byAmJiB0aGlzLmN1cnNvci5mcm9tIDwgdGhpcy5jdXJzb3IudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGFueSBub24tZW1wdHkgcG9pbnRzIHRoYXQgZW5kIHByZWNpc2VseSBhdCB0aGUgZW5kIG9mIHRoZSBwcmV2IHBvaW50XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yLm5leHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7IC8vIE5ldyBwb2ludFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvaW50ID0gbmV4dFZhbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2ludEZyb20gPSB0aGlzLmN1cnNvci5mcm9tO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvaW50UmFuayA9IHRoaXMuY3Vyc29yLnJhbms7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG8gPSB0aGlzLmN1cnNvci50bztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRTaWRlID0gbmV4dFZhbC5lbmRTaWRlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9yd2FyZCh0aGlzLnRvLCB0aGlzLmVuZFNpZGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNrT3Blbikge1xuICAgICAgICAgICAgdGhpcy5vcGVuU3RhcnQgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRyYWNrT3Blbi5sZW5ndGggLSAxOyBpID49IDAgJiYgdHJhY2tPcGVuW2ldIDwgZnJvbTsgaS0tKVxuICAgICAgICAgICAgICAgIHRoaXMub3BlblN0YXJ0Kys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWN0aXZlRm9yUG9pbnQodG8pIHtcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmU7XG4gICAgICAgIGxldCBhY3RpdmUgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYWN0aXZlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVSYW5rW2ldIDwgdGhpcy5wb2ludFJhbmspXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVUb1tpXSA+IHRvIHx8IHRoaXMuYWN0aXZlVG9baV0gPT0gdG8gJiYgdGhpcy5hY3RpdmVbaV0uZW5kU2lkZSA+PSB0aGlzLnBvaW50LmVuZFNpZGUpXG4gICAgICAgICAgICAgICAgYWN0aXZlLnB1c2godGhpcy5hY3RpdmVbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY3RpdmUucmV2ZXJzZSgpO1xuICAgIH1cbiAgICBvcGVuRW5kKHRvKSB7XG4gICAgICAgIGxldCBvcGVuID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYWN0aXZlVG8ubGVuZ3RoIC0gMTsgaSA+PSAwICYmIHRoaXMuYWN0aXZlVG9baV0gPiB0bzsgaS0tKVxuICAgICAgICAgICAgb3BlbisrO1xuICAgICAgICByZXR1cm4gb3BlbjtcbiAgICB9XG59XG5mdW5jdGlvbiBjb21wYXJlKGEsIHN0YXJ0QSwgYiwgc3RhcnRCLCBsZW5ndGgsIGNvbXBhcmF0b3IpIHtcbiAgICBhLmdvdG8oc3RhcnRBKTtcbiAgICBiLmdvdG8oc3RhcnRCKTtcbiAgICBsZXQgZW5kQiA9IHN0YXJ0QiArIGxlbmd0aDtcbiAgICBsZXQgcG9zID0gc3RhcnRCLCBkUG9zID0gc3RhcnRCIC0gc3RhcnRBO1xuICAgIGxldCBib3VuZHMgPSAhIWNvbXBhcmF0b3IuYm91bmRDaGFuZ2U7XG4gICAgZm9yIChsZXQgYm91bmRDaGFuZ2UgPSBmYWxzZTs7KSB7XG4gICAgICAgIGxldCBkRW5kID0gKGEudG8gKyBkUG9zKSAtIGIudG8sIGRpZmYgPSBkRW5kIHx8IGEuZW5kU2lkZSAtIGIuZW5kU2lkZTtcbiAgICAgICAgbGV0IGVuZCA9IGRpZmYgPCAwID8gYS50byArIGRQb3MgOiBiLnRvLCBjbGlwRW5kID0gTWF0aC5taW4oZW5kLCBlbmRCKTtcbiAgICAgICAgbGV0IHBvaW50ID0gYS5wb2ludCB8fCBiLnBvaW50O1xuICAgICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgICAgIGlmICghKGEucG9pbnQgJiYgYi5wb2ludCAmJiBjbXBWYWwoYS5wb2ludCwgYi5wb2ludCkgJiZcbiAgICAgICAgICAgICAgICBzYW1lVmFsdWVzKGEuYWN0aXZlRm9yUG9pbnQoYS50byksIGIuYWN0aXZlRm9yUG9pbnQoYi50bykpKSlcbiAgICAgICAgICAgICAgICBjb21wYXJhdG9yLmNvbXBhcmVQb2ludChwb3MsIGNsaXBFbmQsIGEucG9pbnQsIGIucG9pbnQpO1xuICAgICAgICAgICAgYm91bmRDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChib3VuZENoYW5nZSlcbiAgICAgICAgICAgICAgICBjb21wYXJhdG9yLmJvdW5kQ2hhbmdlKHBvcyk7XG4gICAgICAgICAgICBpZiAoY2xpcEVuZCA+IHBvcyAmJiAhc2FtZVZhbHVlcyhhLmFjdGl2ZSwgYi5hY3RpdmUpKVxuICAgICAgICAgICAgICAgIGNvbXBhcmF0b3IuY29tcGFyZVJhbmdlKHBvcywgY2xpcEVuZCwgYS5hY3RpdmUsIGIuYWN0aXZlKTtcbiAgICAgICAgICAgIGlmIChib3VuZHMgJiYgY2xpcEVuZCA8IGVuZEIgJiYgKGRFbmQgfHwgYS5vcGVuRW5kKGVuZCkgIT0gYi5vcGVuRW5kKGVuZCkpKVxuICAgICAgICAgICAgICAgIGJvdW5kQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5kID4gZW5kQilcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBwb3MgPSBlbmQ7XG4gICAgICAgIGlmIChkaWZmIDw9IDApXG4gICAgICAgICAgICBhLm5leHQoKTtcbiAgICAgICAgaWYgKGRpZmYgPj0gMClcbiAgICAgICAgICAgIGIubmV4dCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNhbWVWYWx1ZXMoYSwgYikge1xuICAgIGlmIChhLmxlbmd0aCAhPSBiLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKylcbiAgICAgICAgaWYgKGFbaV0gIT0gYltpXSAmJiAhY21wVmFsKGFbaV0sIGJbaV0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gcmVtb3ZlKGFycmF5LCBpbmRleCkge1xuICAgIGZvciAobGV0IGkgPSBpbmRleCwgZSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPCBlOyBpKyspXG4gICAgICAgIGFycmF5W2ldID0gYXJyYXlbaSArIDFdO1xuICAgIGFycmF5LnBvcCgpO1xufVxuZnVuY3Rpb24gaW5zZXJ0KGFycmF5LCBpbmRleCwgdmFsdWUpIHtcbiAgICBmb3IgKGxldCBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+PSBpbmRleDsgaS0tKVxuICAgICAgICBhcnJheVtpICsgMV0gPSBhcnJheVtpXTtcbiAgICBhcnJheVtpbmRleF0gPSB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGZpbmRNaW5JbmRleCh2YWx1ZSwgYXJyYXkpIHtcbiAgICBsZXQgZm91bmQgPSAtMSwgZm91bmRQb3MgPSAxMDAwMDAwMDAwIC8qIEMuRmFyICovO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspXG4gICAgICAgIGlmICgoYXJyYXlbaV0gLSBmb3VuZFBvcyB8fCB2YWx1ZVtpXS5lbmRTaWRlIC0gdmFsdWVbZm91bmRdLmVuZFNpZGUpIDwgMCkge1xuICAgICAgICAgICAgZm91bmQgPSBpO1xuICAgICAgICAgICAgZm91bmRQb3MgPSBhcnJheVtpXTtcbiAgICAgICAgfVxuICAgIHJldHVybiBmb3VuZDtcbn1cblxuLyoqXG5Db3VudCB0aGUgY29sdW1uIHBvc2l0aW9uIGF0IHRoZSBnaXZlbiBvZmZzZXQgaW50byB0aGUgc3RyaW5nLFxudGFraW5nIGV4dGVuZGluZyBjaGFyYWN0ZXJzIGFuZCB0YWIgc2l6ZSBpbnRvIGFjY291bnQuXG4qL1xuZnVuY3Rpb24gY291bnRDb2x1bW4oc3RyaW5nLCB0YWJTaXplLCB0byA9IHN0cmluZy5sZW5ndGgpIHtcbiAgICBsZXQgbiA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0byAmJiBpIDwgc3RyaW5nLmxlbmd0aDspIHtcbiAgICAgICAgaWYgKHN0cmluZy5jaGFyQ29kZUF0KGkpID09IDkpIHtcbiAgICAgICAgICAgIG4gKz0gdGFiU2l6ZSAtIChuICUgdGFiU2l6ZSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuKys7XG4gICAgICAgICAgICBpID0gZmluZENsdXN0ZXJCcmVhayhzdHJpbmcsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuLyoqXG5GaW5kIHRoZSBvZmZzZXQgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgZ2l2ZW4gY29sdW1uIHBvc2l0aW9uIGluIGFcbnN0cmluZywgdGFraW5nIGV4dGVuZGluZyBjaGFyYWN0ZXJzIGFuZCB0YWIgc2l6ZSBpbnRvIGFjY291bnQuIEJ5XG5kZWZhdWx0LCB0aGUgc3RyaW5nIGxlbmd0aCBpcyByZXR1cm5lZCB3aGVuIGl0IGlzIHRvbyBzaG9ydCB0b1xucmVhY2ggdGhlIGNvbHVtbi4gUGFzcyBgc3RyaWN0YCB0cnVlIHRvIG1ha2UgaXQgcmV0dXJuIC0xIGluIHRoYXRcbnNpdHVhdGlvbi5cbiovXG5mdW5jdGlvbiBmaW5kQ29sdW1uKHN0cmluZywgY29sLCB0YWJTaXplLCBzdHJpY3QpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IDA7Oykge1xuICAgICAgICBpZiAobiA+PSBjb2wpXG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgaWYgKGkgPT0gc3RyaW5nLmxlbmd0aClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBuICs9IHN0cmluZy5jaGFyQ29kZUF0KGkpID09IDkgPyB0YWJTaXplIC0gKG4gJSB0YWJTaXplKSA6IDE7XG4gICAgICAgIGkgPSBmaW5kQ2x1c3RlckJyZWFrKHN0cmluZywgaSk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpY3QgPT09IHRydWUgPyAtMSA6IHN0cmluZy5sZW5ndGg7XG59XG5cbmV4cG9ydCB7IEFubm90YXRpb24sIEFubm90YXRpb25UeXBlLCBDaGFuZ2VEZXNjLCBDaGFuZ2VTZXQsIENoYXJDYXRlZ29yeSwgQ29tcGFydG1lbnQsIEVkaXRvclNlbGVjdGlvbiwgRWRpdG9yU3RhdGUsIEZhY2V0LCBMaW5lLCBNYXBNb2RlLCBQcmVjLCBSYW5nZSwgUmFuZ2VTZXQsIFJhbmdlU2V0QnVpbGRlciwgUmFuZ2VWYWx1ZSwgU2VsZWN0aW9uUmFuZ2UsIFN0YXRlRWZmZWN0LCBTdGF0ZUVmZmVjdFR5cGUsIFN0YXRlRmllbGQsIFRleHQsIFRyYW5zYWN0aW9uLCBjb2RlUG9pbnRBdCwgY29kZVBvaW50U2l6ZSwgY29tYmluZUNvbmZpZywgY291bnRDb2x1bW4sIGZpbmRDbHVzdGVyQnJlYWssIGZpbmRDb2x1bW4sIGZyb21Db2RlUG9pbnQgfTtcbiIsICJjb25zdCBDID0gXCJcXHUwMzdjXCJcbmNvbnN0IENPVU5UID0gdHlwZW9mIFN5bWJvbCA9PSBcInVuZGVmaW5lZFwiID8gXCJfX1wiICsgQyA6IFN5bWJvbC5mb3IoQylcbmNvbnN0IFNFVCA9IHR5cGVvZiBTeW1ib2wgPT0gXCJ1bmRlZmluZWRcIiA/IFwiX19zdHlsZVNldFwiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMWU4KSA6IFN5bWJvbChcInN0eWxlU2V0XCIpXG5jb25zdCB0b3AgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9XG5cbi8vIDo6IC0gU3R5bGUgbW9kdWxlcyBlbmNhcHN1bGF0ZSBhIHNldCBvZiBDU1MgcnVsZXMgZGVmaW5lZCBmcm9tXG4vLyBKYXZhU2NyaXB0LiBUaGVpciBkZWZpbml0aW9ucyBhcmUgb25seSBhdmFpbGFibGUgaW4gYSBnaXZlbiBET01cbi8vIHJvb3QgYWZ0ZXIgaXQgaGFzIGJlZW4gX21vdW50ZWRfIHRoZXJlIHdpdGggYFN0eWxlTW9kdWxlLm1vdW50YC5cbi8vXG4vLyBTdHlsZSBtb2R1bGVzIHNob3VsZCBiZSBjcmVhdGVkIG9uY2UgYW5kIHN0b3JlZCBzb21ld2hlcmUsIGFzXG4vLyBvcHBvc2VkIHRvIHJlLWNyZWF0aW5nIHRoZW0gZXZlcnkgdGltZSB5b3UgbmVlZCB0aGVtLiBUaGUgYW1vdW50IG9mXG4vLyBDU1MgcnVsZXMgZ2VuZXJhdGVkIGZvciBhIGdpdmVuIERPTSByb290IGlzIGJvdW5kZWQgYnkgdGhlIGFtb3VudFxuLy8gb2Ygc3R5bGUgbW9kdWxlcyB0aGF0IHdlcmUgdXNlZC4gU28gdG8gYXZvaWQgbGVha2luZyBydWxlcywgZG9uJ3Rcbi8vIGNyZWF0ZSB0aGVzZSBkeW5hbWljYWxseSwgYnV0IHRyZWF0IHRoZW0gYXMgb25lLXRpbWUgYWxsb2NhdGlvbnMuXG5leHBvcnQgY2xhc3MgU3R5bGVNb2R1bGUge1xuICAvLyA6OiAoT2JqZWN0PFN0eWxlPiwgP3tmaW5pc2g6ID8oc3RyaW5nKSBcdTIxOTIgc3RyaW5nfSlcbiAgLy8gQ3JlYXRlIGEgc3R5bGUgbW9kdWxlIGZyb20gdGhlIGdpdmVuIHNwZWMuXG4gIC8vXG4gIC8vIFdoZW4gYGZpbmlzaGAgaXMgZ2l2ZW4sIGl0IGlzIGNhbGxlZCBvbiByZWd1bGFyIChub24tYEBgKVxuICAvLyBzZWxlY3RvcnMgKGFmdGVyIGAmYCBleHBhbnNpb24pIHRvIGNvbXB1dGUgdGhlIGZpbmFsIHNlbGVjdG9yLlxuICBjb25zdHJ1Y3RvcihzcGVjLCBvcHRpb25zKSB7XG4gICAgdGhpcy5ydWxlcyA9IFtdXG4gICAgbGV0IHtmaW5pc2h9ID0gb3B0aW9ucyB8fCB7fVxuXG4gICAgZnVuY3Rpb24gc3BsaXRTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIC9eQC8udGVzdChzZWxlY3RvcikgPyBbc2VsZWN0b3JdIDogc2VsZWN0b3Iuc3BsaXQoLyxcXHMqLylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXIoc2VsZWN0b3JzLCBzcGVjLCB0YXJnZXQsIGlzS2V5ZnJhbWVzKSB7XG4gICAgICBsZXQgbG9jYWwgPSBbXSwgaXNBdCA9IC9eQChcXHcrKVxcYi8uZXhlYyhzZWxlY3RvcnNbMF0pLCBrZXlmcmFtZXMgPSBpc0F0ICYmIGlzQXRbMV0gPT0gXCJrZXlmcmFtZXNcIlxuICAgICAgaWYgKGlzQXQgJiYgc3BlYyA9PSBudWxsKSByZXR1cm4gdGFyZ2V0LnB1c2goc2VsZWN0b3JzWzBdICsgXCI7XCIpXG4gICAgICBmb3IgKGxldCBwcm9wIGluIHNwZWMpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gc3BlY1twcm9wXVxuICAgICAgICBpZiAoLyYvLnRlc3QocHJvcCkpIHtcbiAgICAgICAgICByZW5kZXIocHJvcC5zcGxpdCgvLFxccyovKS5tYXAocGFydCA9PiBzZWxlY3RvcnMubWFwKHNlbCA9PiBwYXJ0LnJlcGxhY2UoLyYvLCBzZWwpKSkucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSksXG4gICAgICAgICAgICAgICAgIHZhbHVlLCB0YXJnZXQpXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBpZiAoIWlzQXQpIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgKFwiICsgcHJvcCArIFwiKSBzaG91bGQgYmUgYSBwcmltaXRpdmUgdmFsdWUuXCIpXG4gICAgICAgICAgcmVuZGVyKHNwbGl0U2VsZWN0b3IocHJvcCksIHZhbHVlLCBsb2NhbCwga2V5ZnJhbWVzKVxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICBsb2NhbC5wdXNoKHByb3AucmVwbGFjZSgvXy4qLywgXCJcIikucmVwbGFjZSgvW0EtWl0vZywgbCA9PiBcIi1cIiArIGwudG9Mb3dlckNhc2UoKSkgKyBcIjogXCIgKyB2YWx1ZSArIFwiO1wiKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobG9jYWwubGVuZ3RoIHx8IGtleWZyYW1lcykge1xuICAgICAgICB0YXJnZXQucHVzaCgoZmluaXNoICYmICFpc0F0ICYmICFpc0tleWZyYW1lcyA/IHNlbGVjdG9ycy5tYXAoZmluaXNoKSA6IHNlbGVjdG9ycykuam9pbihcIiwgXCIpICtcbiAgICAgICAgICAgICAgICAgICAgXCIge1wiICsgbG9jYWwuam9pbihcIiBcIikgKyBcIn1cIilcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBwcm9wIGluIHNwZWMpIHJlbmRlcihzcGxpdFNlbGVjdG9yKHByb3ApLCBzcGVjW3Byb3BdLCB0aGlzLnJ1bGVzKVxuICB9XG5cbiAgLy8gOjogKCkgXHUyMTkyIHN0cmluZ1xuICAvLyBSZXR1cm5zIGEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIG1vZHVsZSdzIENTUyBydWxlcy5cbiAgZ2V0UnVsZXMoKSB7IHJldHVybiB0aGlzLnJ1bGVzLmpvaW4oXCJcXG5cIikgfVxuXG4gIC8vIDo6ICgpIFx1MjE5MiBzdHJpbmdcbiAgLy8gR2VuZXJhdGUgYSBuZXcgdW5pcXVlIENTUyBjbGFzcyBuYW1lLlxuICBzdGF0aWMgbmV3TmFtZSgpIHtcbiAgICBsZXQgaWQgPSB0b3BbQ09VTlRdIHx8IDFcbiAgICB0b3BbQ09VTlRdID0gaWQgKyAxXG4gICAgcmV0dXJuIEMgKyBpZC50b1N0cmluZygzNilcbiAgfVxuXG4gIC8vIDo6ICh1bmlvbjxEb2N1bWVudCwgU2hhZG93Um9vdD4sIHVuaW9uPFtTdHlsZU1vZHVsZV0sIFN0eWxlTW9kdWxlPiwgP3tub25jZTogP3N0cmluZ30pXG4gIC8vXG4gIC8vIE1vdW50IHRoZSBnaXZlbiBzZXQgb2YgbW9kdWxlcyBpbiB0aGUgZ2l2ZW4gRE9NIHJvb3QsIHdoaWNoIGVuc3VyZXNcbiAgLy8gdGhhdCB0aGUgQ1NTIHJ1bGVzIGRlZmluZWQgYnkgdGhlIG1vZHVsZSBhcmUgYXZhaWxhYmxlIGluIHRoYXRcbiAgLy8gY29udGV4dC5cbiAgLy9cbiAgLy8gUnVsZXMgYXJlIG9ubHkgYWRkZWQgdG8gdGhlIGRvY3VtZW50IG9uY2UgcGVyIHJvb3QuXG4gIC8vXG4gIC8vIFJ1bGUgb3JkZXIgd2lsbCBmb2xsb3cgdGhlIG9yZGVyIG9mIHRoZSBtb2R1bGVzLCBzbyB0aGF0IHJ1bGVzIGZyb21cbiAgLy8gbW9kdWxlcyBsYXRlciBpbiB0aGUgYXJyYXkgdGFrZSBwcmVjZWRlbmNlIG9mIHRob3NlIGZyb20gZWFybGllclxuICAvLyBtb2R1bGVzLiBJZiB5b3UgY2FsbCB0aGlzIGZ1bmN0aW9uIG11bHRpcGxlIHRpbWVzIGZvciB0aGUgc2FtZSByb290XG4gIC8vIGluIGEgd2F5IHRoYXQgY2hhbmdlcyB0aGUgb3JkZXIgb2YgYWxyZWFkeSBtb3VudGVkIG1vZHVsZXMsIHRoZSBvbGRcbiAgLy8gb3JkZXIgd2lsbCBiZSBjaGFuZ2VkLlxuICAvL1xuICAvLyBJZiBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IG5vbmNlIGlzIHByb3ZpZGVkLCBpdCBpcyBhZGRlZCB0b1xuICAvLyB0aGUgYDxzdHlsZT5gIHRhZyBnZW5lcmF0ZWQgYnkgdGhlIGxpYnJhcnkuXG4gIHN0YXRpYyBtb3VudChyb290LCBtb2R1bGVzLCBvcHRpb25zKSB7XG4gICAgbGV0IHNldCA9IHJvb3RbU0VUXSwgbm9uY2UgPSBvcHRpb25zICYmIG9wdGlvbnMubm9uY2VcbiAgICBpZiAoIXNldCkgc2V0ID0gbmV3IFN0eWxlU2V0KHJvb3QsIG5vbmNlKVxuICAgIGVsc2UgaWYgKG5vbmNlKSBzZXQuc2V0Tm9uY2Uobm9uY2UpXG4gICAgc2V0Lm1vdW50KEFycmF5LmlzQXJyYXkobW9kdWxlcykgPyBtb2R1bGVzIDogW21vZHVsZXNdLCByb290KVxuICB9XG59XG5cbmxldCBhZG9wdGVkU2V0ID0gbmV3IE1hcCAvLzxEb2N1bWVudCwgU3R5bGVTZXQ+XG5cbmNsYXNzIFN0eWxlU2V0IHtcbiAgY29uc3RydWN0b3Iocm9vdCwgbm9uY2UpIHtcbiAgICBsZXQgZG9jID0gcm9vdC5vd25lckRvY3VtZW50IHx8IHJvb3QsIHdpbiA9IGRvYy5kZWZhdWx0Vmlld1xuICAgIGlmICghcm9vdC5oZWFkICYmIHJvb3QuYWRvcHRlZFN0eWxlU2hlZXRzICYmIHdpbi5DU1NTdHlsZVNoZWV0KSB7XG4gICAgICBsZXQgYWRvcHRlZCA9IGFkb3B0ZWRTZXQuZ2V0KGRvYylcbiAgICAgIGlmIChhZG9wdGVkKSByZXR1cm4gcm9vdFtTRVRdID0gYWRvcHRlZFxuICAgICAgdGhpcy5zaGVldCA9IG5ldyB3aW4uQ1NTU3R5bGVTaGVldFxuICAgICAgYWRvcHRlZFNldC5zZXQoZG9jLCB0aGlzKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0eWxlVGFnID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKVxuICAgICAgaWYgKG5vbmNlKSB0aGlzLnN0eWxlVGFnLnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG5vbmNlKVxuICAgIH1cbiAgICB0aGlzLm1vZHVsZXMgPSBbXVxuICAgIHJvb3RbU0VUXSA9IHRoaXNcbiAgfVxuXG4gIG1vdW50KG1vZHVsZXMsIHJvb3QpIHtcbiAgICBsZXQgc2hlZXQgPSB0aGlzLnNoZWV0XG4gICAgbGV0IHBvcyA9IDAgLyogQ3VycmVudCBydWxlIG9mZnNldCAqLywgaiA9IDAgLyogSW5kZXggaW50byB0aGlzLm1vZHVsZXMgKi9cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBtb2QgPSBtb2R1bGVzW2ldLCBpbmRleCA9IHRoaXMubW9kdWxlcy5pbmRleE9mKG1vZClcbiAgICAgIGlmIChpbmRleCA8IGogJiYgaW5kZXggPiAtMSkgeyAvLyBPcmRlcmluZyBjb25mbGljdFxuICAgICAgICB0aGlzLm1vZHVsZXMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICBqLS1cbiAgICAgICAgaW5kZXggPSAtMVxuICAgICAgfVxuICAgICAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgICAgIHRoaXMubW9kdWxlcy5zcGxpY2UoaisrLCAwLCBtb2QpXG4gICAgICAgIGlmIChzaGVldCkgZm9yIChsZXQgayA9IDA7IGsgPCBtb2QucnVsZXMubGVuZ3RoOyBrKyspXG4gICAgICAgICAgc2hlZXQuaW5zZXJ0UnVsZShtb2QucnVsZXNba10sIHBvcysrKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2hpbGUgKGogPCBpbmRleCkgcG9zICs9IHRoaXMubW9kdWxlc1tqKytdLnJ1bGVzLmxlbmd0aFxuICAgICAgICBwb3MgKz0gbW9kLnJ1bGVzLmxlbmd0aFxuICAgICAgICBqKytcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2hlZXQpIHtcbiAgICAgIGlmIChyb290LmFkb3B0ZWRTdHlsZVNoZWV0cy5pbmRleE9mKHRoaXMuc2hlZXQpIDwgMClcbiAgICAgICAgcm9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbdGhpcy5zaGVldCwgLi4ucm9vdC5hZG9wdGVkU3R5bGVTaGVldHNdXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB0ZXh0ID0gXCJcIlxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1vZHVsZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHRleHQgKz0gdGhpcy5tb2R1bGVzW2ldLmdldFJ1bGVzKCkgKyBcIlxcblwiXG4gICAgICB0aGlzLnN0eWxlVGFnLnRleHRDb250ZW50ID0gdGV4dFxuICAgICAgbGV0IHRhcmdldCA9IHJvb3QuaGVhZCB8fCByb290XG4gICAgICBpZiAodGhpcy5zdHlsZVRhZy5wYXJlbnROb2RlICE9IHRhcmdldClcbiAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZSh0aGlzLnN0eWxlVGFnLCB0YXJnZXQuZmlyc3RDaGlsZClcbiAgICB9XG4gIH1cblxuICBzZXROb25jZShub25jZSkge1xuICAgIGlmICh0aGlzLnN0eWxlVGFnICYmIHRoaXMuc3R5bGVUYWcuZ2V0QXR0cmlidXRlKFwibm9uY2VcIikgIT0gbm9uY2UpXG4gICAgICB0aGlzLnN0eWxlVGFnLnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG5vbmNlKVxuICB9XG59XG5cbi8vIFN0eWxlOjpPYmplY3Q8dW5pb248U3R5bGUsc3RyaW5nPj5cbi8vXG4vLyBBIHN0eWxlIGlzIGFuIG9iamVjdCB0aGF0LCBpbiB0aGUgc2ltcGxlIGNhc2UsIG1hcHMgQ1NTIHByb3BlcnR5XG4vLyBuYW1lcyB0byBzdHJpbmdzIGhvbGRpbmcgdGhlaXIgdmFsdWVzLCBhcyBpbiBge2NvbG9yOiBcInJlZFwiLFxuLy8gZm9udFdlaWdodDogXCJib2xkXCJ9YC4gVGhlIHByb3BlcnR5IG5hbWVzIGNhbiBiZSBnaXZlbiBpblxuLy8gY2FtZWwtY2FzZVx1MjAxNHRoZSBsaWJyYXJ5IHdpbGwgaW5zZXJ0IGEgZGFzaCBiZWZvcmUgY2FwaXRhbCBsZXR0ZXJzXG4vLyB3aGVuIGNvbnZlcnRpbmcgdGhlbSB0byBDU1MuXG4vL1xuLy8gSWYgeW91IGluY2x1ZGUgYW4gdW5kZXJzY29yZSBpbiBhIHByb3BlcnR5IG5hbWUsIGl0IGFuZCBldmVyeXRoaW5nXG4vLyBhZnRlciBpdCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgb3V0cHV0LCB3aGljaCBjYW4gYmUgdXNlZnVsIHdoZW5cbi8vIHByb3ZpZGluZyBhIHByb3BlcnR5IG11bHRpcGxlIHRpbWVzLCBmb3IgYnJvd3NlciBjb21wYXRpYmlsaXR5XG4vLyByZWFzb25zLlxuLy9cbi8vIEEgcHJvcGVydHkgaW4gYSBzdHlsZSBvYmplY3QgY2FuIGFsc28gYmUgYSBzdWItc2VsZWN0b3IsIHdoaWNoXG4vLyBleHRlbmRzIHRoZSBjdXJyZW50IGNvbnRleHQgdG8gYWRkIGEgcHNldWRvLXNlbGVjdG9yIG9yIGEgY2hpbGRcbi8vIHNlbGVjdG9yLiBTdWNoIGEgcHJvcGVydHkgc2hvdWxkIGNvbnRhaW4gYSBgJmAgY2hhcmFjdGVyLCB3aGljaFxuLy8gd2lsbCBiZSByZXBsYWNlZCBieSB0aGUgY3VycmVudCBzZWxlY3Rvci4gRm9yIGV4YW1wbGUgYHtcIiY6YmVmb3JlXCI6XG4vLyB7Y29udGVudDogJ1wiaGlcIid9fWAuIFN1Yi1zZWxlY3RvcnMgYW5kIHJlZ3VsYXIgcHJvcGVydGllcyBjYW5cbi8vIGZyZWVseSBiZSBtaXhlZCBpbiBhIGdpdmVuIG9iamVjdC4gQW55IHByb3BlcnR5IGNvbnRhaW5pbmcgYSBgJmAgaXNcbi8vIGFzc3VtZWQgdG8gYmUgYSBzdWItc2VsZWN0b3IuXG4vL1xuLy8gRmluYWxseSwgYSBwcm9wZXJ0eSBjYW4gc3BlY2lmeSBhbiBALWJsb2NrIHRvIGJlIHdyYXBwZWQgYXJvdW5kIHRoZVxuLy8gc3R5bGVzIGRlZmluZWQgaW5zaWRlIHRoZSBvYmplY3QgdGhhdCdzIHRoZSBwcm9wZXJ0eSdzIHZhbHVlLiBGb3Jcbi8vIGV4YW1wbGUgdG8gY3JlYXRlIGEgbWVkaWEgcXVlcnkgeW91IGNhbiBkbyBge1wiQG1lZGlhIHNjcmVlbiBhbmRcbi8vIChtaW4td2lkdGg6IDQwMHB4KVwiOiB7Li4ufX1gLlxuIiwgImV4cG9ydCB2YXIgYmFzZSA9IHtcbiAgODogXCJCYWNrc3BhY2VcIixcbiAgOTogXCJUYWJcIixcbiAgMTA6IFwiRW50ZXJcIixcbiAgMTI6IFwiTnVtTG9ja1wiLFxuICAxMzogXCJFbnRlclwiLFxuICAxNjogXCJTaGlmdFwiLFxuICAxNzogXCJDb250cm9sXCIsXG4gIDE4OiBcIkFsdFwiLFxuICAyMDogXCJDYXBzTG9ja1wiLFxuICAyNzogXCJFc2NhcGVcIixcbiAgMzI6IFwiIFwiLFxuICAzMzogXCJQYWdlVXBcIixcbiAgMzQ6IFwiUGFnZURvd25cIixcbiAgMzU6IFwiRW5kXCIsXG4gIDM2OiBcIkhvbWVcIixcbiAgMzc6IFwiQXJyb3dMZWZ0XCIsXG4gIDM4OiBcIkFycm93VXBcIixcbiAgMzk6IFwiQXJyb3dSaWdodFwiLFxuICA0MDogXCJBcnJvd0Rvd25cIixcbiAgNDQ6IFwiUHJpbnRTY3JlZW5cIixcbiAgNDU6IFwiSW5zZXJ0XCIsXG4gIDQ2OiBcIkRlbGV0ZVwiLFxuICA1OTogXCI7XCIsXG4gIDYxOiBcIj1cIixcbiAgOTE6IFwiTWV0YVwiLFxuICA5MjogXCJNZXRhXCIsXG4gIDEwNjogXCIqXCIsXG4gIDEwNzogXCIrXCIsXG4gIDEwODogXCIsXCIsXG4gIDEwOTogXCItXCIsXG4gIDExMDogXCIuXCIsXG4gIDExMTogXCIvXCIsXG4gIDE0NDogXCJOdW1Mb2NrXCIsXG4gIDE0NTogXCJTY3JvbGxMb2NrXCIsXG4gIDE2MDogXCJTaGlmdFwiLFxuICAxNjE6IFwiU2hpZnRcIixcbiAgMTYyOiBcIkNvbnRyb2xcIixcbiAgMTYzOiBcIkNvbnRyb2xcIixcbiAgMTY0OiBcIkFsdFwiLFxuICAxNjU6IFwiQWx0XCIsXG4gIDE3MzogXCItXCIsXG4gIDE4NjogXCI7XCIsXG4gIDE4NzogXCI9XCIsXG4gIDE4ODogXCIsXCIsXG4gIDE4OTogXCItXCIsXG4gIDE5MDogXCIuXCIsXG4gIDE5MTogXCIvXCIsXG4gIDE5MjogXCJgXCIsXG4gIDIxOTogXCJbXCIsXG4gIDIyMDogXCJcXFxcXCIsXG4gIDIyMTogXCJdXCIsXG4gIDIyMjogXCInXCJcbn1cblxuZXhwb3J0IHZhciBzaGlmdCA9IHtcbiAgNDg6IFwiKVwiLFxuICA0OTogXCIhXCIsXG4gIDUwOiBcIkBcIixcbiAgNTE6IFwiI1wiLFxuICA1MjogXCIkXCIsXG4gIDUzOiBcIiVcIixcbiAgNTQ6IFwiXlwiLFxuICA1NTogXCImXCIsXG4gIDU2OiBcIipcIixcbiAgNTc6IFwiKFwiLFxuICA1OTogXCI6XCIsXG4gIDYxOiBcIitcIixcbiAgMTczOiBcIl9cIixcbiAgMTg2OiBcIjpcIixcbiAgMTg3OiBcIitcIixcbiAgMTg4OiBcIjxcIixcbiAgMTg5OiBcIl9cIixcbiAgMTkwOiBcIj5cIixcbiAgMTkxOiBcIj9cIixcbiAgMTkyOiBcIn5cIixcbiAgMjE5OiBcIntcIixcbiAgMjIwOiBcInxcIixcbiAgMjIxOiBcIn1cIixcbiAgMjIyOiBcIlxcXCJcIlxufVxuXG52YXIgbWFjID0gdHlwZW9mIG5hdmlnYXRvciAhPSBcInVuZGVmaW5lZFwiICYmIC9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKVxudmFyIGllID0gdHlwZW9mIG5hdmlnYXRvciAhPSBcInVuZGVmaW5lZFwiICYmIC9NU0lFIFxcZHxUcmlkZW50XFwvKD86WzctOV18XFxkezIsfSlcXC4uKnJ2OihcXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KVxuXG4vLyBGaWxsIGluIHRoZSBkaWdpdCBrZXlzXG5mb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIGJhc2VbNDggKyBpXSA9IGJhc2VbOTYgKyBpXSA9IFN0cmluZyhpKVxuXG4vLyBUaGUgZnVuY3Rpb24ga2V5c1xuZm9yICh2YXIgaSA9IDE7IGkgPD0gMjQ7IGkrKykgYmFzZVtpICsgMTExXSA9IFwiRlwiICsgaVxuXG4vLyBBbmQgdGhlIGFscGhhYmV0aWMga2V5c1xuZm9yICh2YXIgaSA9IDY1OyBpIDw9IDkwOyBpKyspIHtcbiAgYmFzZVtpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSArIDMyKVxuICBzaGlmdFtpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSlcbn1cblxuLy8gRm9yIGVhY2ggY29kZSB0aGF0IGRvZXNuJ3QgaGF2ZSBhIHNoaWZ0LWVxdWl2YWxlbnQsIGNvcHkgdGhlIGJhc2UgbmFtZVxuZm9yICh2YXIgY29kZSBpbiBiYXNlKSBpZiAoIXNoaWZ0Lmhhc093blByb3BlcnR5KGNvZGUpKSBzaGlmdFtjb2RlXSA9IGJhc2VbY29kZV1cblxuZXhwb3J0IGZ1bmN0aW9uIGtleU5hbWUoZXZlbnQpIHtcbiAgLy8gT24gbWFjT1MsIGtleXMgaGVsZCB3aXRoIFNoaWZ0IGFuZCBDbWQgZG9uJ3QgcmVmbGVjdCB0aGUgZWZmZWN0IG9mIFNoaWZ0IGluIGAua2V5YC5cbiAgLy8gT24gSUUsIHNoaWZ0IGVmZmVjdCBpcyBuZXZlciBpbmNsdWRlZCBpbiBgLmtleWAuXG4gIHZhciBpZ25vcmVLZXkgPSBtYWMgJiYgZXZlbnQubWV0YUtleSAmJiBldmVudC5zaGlmdEtleSAmJiAhZXZlbnQuY3RybEtleSAmJiAhZXZlbnQuYWx0S2V5IHx8XG4gICAgICBpZSAmJiBldmVudC5zaGlmdEtleSAmJiBldmVudC5rZXkgJiYgZXZlbnQua2V5Lmxlbmd0aCA9PSAxIHx8XG4gICAgICBldmVudC5rZXkgPT0gXCJVbmlkZW50aWZpZWRcIlxuICB2YXIgbmFtZSA9ICghaWdub3JlS2V5ICYmIGV2ZW50LmtleSkgfHxcbiAgICAoZXZlbnQuc2hpZnRLZXkgPyBzaGlmdCA6IGJhc2UpW2V2ZW50LmtleUNvZGVdIHx8XG4gICAgZXZlbnQua2V5IHx8IFwiVW5pZGVudGlmaWVkXCJcbiAgLy8gRWRnZSBzb21ldGltZXMgcHJvZHVjZXMgd3JvbmcgbmFtZXMgKElzc3VlICMzKVxuICBpZiAobmFtZSA9PSBcIkVzY1wiKSBuYW1lID0gXCJFc2NhcGVcIlxuICBpZiAobmFtZSA9PSBcIkRlbFwiKSBuYW1lID0gXCJEZWxldGVcIlxuICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL2lzc3Vlcy84ODYwNTcxL1xuICBpZiAobmFtZSA9PSBcIkxlZnRcIikgbmFtZSA9IFwiQXJyb3dMZWZ0XCJcbiAgaWYgKG5hbWUgPT0gXCJVcFwiKSBuYW1lID0gXCJBcnJvd1VwXCJcbiAgaWYgKG5hbWUgPT0gXCJSaWdodFwiKSBuYW1lID0gXCJBcnJvd1JpZ2h0XCJcbiAgaWYgKG5hbWUgPT0gXCJEb3duXCIpIG5hbWUgPSBcIkFycm93RG93blwiXG4gIHJldHVybiBuYW1lXG59XG4iLCAiaW1wb3J0IHsgUmFuZ2VTZXQsIE1hcE1vZGUsIFJhbmdlVmFsdWUsIGZpbmRDbHVzdGVyQnJlYWssIEVkaXRvclNlbGVjdGlvbiwgRmFjZXQsIFN0YXRlRWZmZWN0LCBDaGFuZ2VTZXQsIFRleHQsIGZpbmRDb2x1bW4sIENoYXJDYXRlZ29yeSwgRWRpdG9yU3RhdGUsIEFubm90YXRpb24sIFRyYW5zYWN0aW9uLCBQcmVjLCBjb2RlUG9pbnRBdCwgY29kZVBvaW50U2l6ZSwgY29tYmluZUNvbmZpZywgU3RhdGVGaWVsZCwgUmFuZ2VTZXRCdWlsZGVyLCBjb3VudENvbHVtbiB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IFN0eWxlTW9kdWxlIH0gZnJvbSAnc3R5bGUtbW9kJztcbmltcG9ydCB7IGtleU5hbWUsIGJhc2UsIHNoaWZ0IH0gZnJvbSAndzNjLWtleW5hbWUnO1xuaW1wb3J0IGVsdCBmcm9tICdjcmVsdCc7XG5cbmxldCBuYXYgPSB0eXBlb2YgbmF2aWdhdG9yICE9IFwidW5kZWZpbmVkXCIgPyBuYXZpZ2F0b3IgOiB7IHVzZXJBZ2VudDogXCJcIiwgdmVuZG9yOiBcIlwiLCBwbGF0Zm9ybTogXCJcIiB9O1xubGV0IGRvYyA9IHR5cGVvZiBkb2N1bWVudCAhPSBcInVuZGVmaW5lZFwiID8gZG9jdW1lbnQgOiB7IGRvY3VtZW50RWxlbWVudDogeyBzdHlsZToge30gfSB9O1xuY29uc3QgaWVfZWRnZSA9IC8qQF9fUFVSRV9fKi8vRWRnZVxcLyhcXGQrKS8uZXhlYyhuYXYudXNlckFnZW50KTtcbmNvbnN0IGllX3VwdG8xMCA9IC8qQF9fUFVSRV9fKi8vTVNJRSBcXGQvLnRlc3QobmF2LnVzZXJBZ2VudCk7XG5jb25zdCBpZV8xMXVwID0gLypAX19QVVJFX18qLy9UcmlkZW50XFwvKD86WzctOV18XFxkezIsfSlcXC4uKnJ2OihcXGQrKS8uZXhlYyhuYXYudXNlckFnZW50KTtcbmNvbnN0IGllID0gISEoaWVfdXB0bzEwIHx8IGllXzExdXAgfHwgaWVfZWRnZSk7XG5jb25zdCBnZWNrbyA9ICFpZSAmJiAvKkBfX1BVUkVfXyovL2dlY2tvXFwvKFxcZCspL2kudGVzdChuYXYudXNlckFnZW50KTtcbmNvbnN0IGNocm9tZSA9ICFpZSAmJiAvKkBfX1BVUkVfXyovL0Nocm9tZVxcLyhcXGQrKS8uZXhlYyhuYXYudXNlckFnZW50KTtcbmNvbnN0IHdlYmtpdCA9IFwid2Via2l0Rm9udFNtb290aGluZ1wiIGluIGRvYy5kb2N1bWVudEVsZW1lbnQuc3R5bGU7XG5jb25zdCBzYWZhcmkgPSAhaWUgJiYgLypAX19QVVJFX18qLy9BcHBsZSBDb21wdXRlci8udGVzdChuYXYudmVuZG9yKTtcbmNvbnN0IGlvcyA9IHNhZmFyaSAmJiAoLypAX19QVVJFX18qLy9Nb2JpbGVcXC9cXHcrLy50ZXN0KG5hdi51c2VyQWdlbnQpIHx8IG5hdi5tYXhUb3VjaFBvaW50cyA+IDIpO1xudmFyIGJyb3dzZXIgPSB7XG4gICAgbWFjOiBpb3MgfHwgLypAX19QVVJFX18qLy9NYWMvLnRlc3QobmF2LnBsYXRmb3JtKSxcbiAgICB3aW5kb3dzOiAvKkBfX1BVUkVfXyovL1dpbi8udGVzdChuYXYucGxhdGZvcm0pLFxuICAgIGxpbnV4OiAvKkBfX1BVUkVfXyovL0xpbnV4fFgxMS8udGVzdChuYXYucGxhdGZvcm0pLFxuICAgIGllLFxuICAgIGllX3ZlcnNpb246IGllX3VwdG8xMCA/IGRvYy5kb2N1bWVudE1vZGUgfHwgNiA6IGllXzExdXAgPyAraWVfMTF1cFsxXSA6IGllX2VkZ2UgPyAraWVfZWRnZVsxXSA6IDAsXG4gICAgZ2Vja28sXG4gICAgZ2Vja29fdmVyc2lvbjogZ2Vja28gPyArKC8qQF9fUFVSRV9fKi8vRmlyZWZveFxcLyhcXGQrKS8uZXhlYyhuYXYudXNlckFnZW50KSB8fCBbMCwgMF0pWzFdIDogMCxcbiAgICBjaHJvbWU6ICEhY2hyb21lLFxuICAgIGNocm9tZV92ZXJzaW9uOiBjaHJvbWUgPyArY2hyb21lWzFdIDogMCxcbiAgICBpb3MsXG4gICAgYW5kcm9pZDogLypAX19QVVJFX18qLy9BbmRyb2lkXFxiLy50ZXN0KG5hdi51c2VyQWdlbnQpLFxuICAgIHdlYmtpdCxcbiAgICB3ZWJraXRfdmVyc2lvbjogd2Via2l0ID8gKygvKkBfX1BVUkVfXyovL1xcYkFwcGxlV2ViS2l0XFwvKFxcZCspLy5leGVjKG5hdi51c2VyQWdlbnQpIHx8IFswLCAwXSlbMV0gOiAwLFxuICAgIHNhZmFyaSxcbiAgICBzYWZhcmlfdmVyc2lvbjogc2FmYXJpID8gKygvKkBfX1BVUkVfXyovL1xcYlZlcnNpb25cXC8oXFxkKyhcXC5cXGQrKT8pLy5leGVjKG5hdi51c2VyQWdlbnQpIHx8IFswLCAwXSlbMV0gOiAwLFxuICAgIHRhYlNpemU6IGRvYy5kb2N1bWVudEVsZW1lbnQuc3R5bGUudGFiU2l6ZSAhPSBudWxsID8gXCJ0YWItc2l6ZVwiIDogXCItbW96LXRhYi1zaXplXCJcbn07XG5cbmZ1bmN0aW9uIGNvbWJpbmVBdHRycyhzb3VyY2UsIHRhcmdldCkge1xuICAgIGZvciAobGV0IG5hbWUgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChuYW1lID09IFwiY2xhc3NcIiAmJiB0YXJnZXQuY2xhc3MpXG4gICAgICAgICAgICB0YXJnZXQuY2xhc3MgKz0gXCIgXCIgKyBzb3VyY2UuY2xhc3M7XG4gICAgICAgIGVsc2UgaWYgKG5hbWUgPT0gXCJzdHlsZVwiICYmIHRhcmdldC5zdHlsZSlcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZSArPSBcIjtcIiArIHNvdXJjZS5zdHlsZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gc291cmNlW25hbWVdO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuY29uc3Qgbm9BdHRycyA9IC8qQF9fUFVSRV9fKi9PYmplY3QuY3JlYXRlKG51bGwpO1xuZnVuY3Rpb24gYXR0cnNFcShhLCBiLCBpZ25vcmUpIHtcbiAgICBpZiAoYSA9PSBiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoIWEpXG4gICAgICAgIGEgPSBub0F0dHJzO1xuICAgIGlmICghYilcbiAgICAgICAgYiA9IG5vQXR0cnM7XG4gICAgbGV0IGtleXNBID0gT2JqZWN0LmtleXMoYSksIGtleXNCID0gT2JqZWN0LmtleXMoYik7XG4gICAgaWYgKGtleXNBLmxlbmd0aCAtIChpZ25vcmUgJiYga2V5c0EuaW5kZXhPZihpZ25vcmUpID4gLTEgPyAxIDogMCkgIT1cbiAgICAgICAga2V5c0IubGVuZ3RoIC0gKGlnbm9yZSAmJiBrZXlzQi5pbmRleE9mKGlnbm9yZSkgPiAtMSA/IDEgOiAwKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGtleSBvZiBrZXlzQSkge1xuICAgICAgICBpZiAoa2V5ICE9IGlnbm9yZSAmJiAoa2V5c0IuaW5kZXhPZihrZXkpID09IC0xIHx8IGFba2V5XSAhPT0gYltrZXldKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBzZXRBdHRycyhkb20sIGF0dHJzKSB7XG4gICAgZm9yIChsZXQgaSA9IGRvbS5hdHRyaWJ1dGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBuYW1lID0gZG9tLmF0dHJpYnV0ZXNbaV0ubmFtZTtcbiAgICAgICAgaWYgKGF0dHJzW25hbWVdID09IG51bGwpXG4gICAgICAgICAgICBkb20ucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgIH1cbiAgICBmb3IgKGxldCBuYW1lIGluIGF0dHJzKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IGF0dHJzW25hbWVdO1xuICAgICAgICBpZiAobmFtZSA9PSBcInN0eWxlXCIpXG4gICAgICAgICAgICBkb20uc3R5bGUuY3NzVGV4dCA9IHZhbHVlO1xuICAgICAgICBlbHNlIGlmIChkb20uZ2V0QXR0cmlidXRlKG5hbWUpICE9IHZhbHVlKVxuICAgICAgICAgICAgZG9tLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlQXR0cnMoZG9tLCBwcmV2LCBhdHRycykge1xuICAgIGxldCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgaWYgKHByZXYpXG4gICAgICAgIGZvciAobGV0IG5hbWUgaW4gcHJldilcbiAgICAgICAgICAgIGlmICghKGF0dHJzICYmIG5hbWUgaW4gYXR0cnMpKSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT0gXCJzdHlsZVwiKVxuICAgICAgICAgICAgICAgICAgICBkb20uc3R5bGUuY3NzVGV4dCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBkb20ucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgIGlmIChhdHRycylcbiAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBhdHRycylcbiAgICAgICAgICAgIGlmICghKHByZXYgJiYgcHJldltuYW1lXSA9PSBhdHRyc1tuYW1lXSkpIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSBcInN0eWxlXCIpXG4gICAgICAgICAgICAgICAgICAgIGRvbS5zdHlsZS5jc3NUZXh0ID0gYXR0cnNbbmFtZV07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBkb20uc2V0QXR0cmlidXRlKG5hbWUsIGF0dHJzW25hbWVdKTtcbiAgICAgICAgICAgIH1cbiAgICByZXR1cm4gY2hhbmdlZDtcbn1cbmZ1bmN0aW9uIGdldEF0dHJzKGRvbSkge1xuICAgIGxldCBhdHRycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb20uYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgYXR0ciA9IGRvbS5hdHRyaWJ1dGVzW2ldO1xuICAgICAgICBhdHRyc1thdHRyLm5hbWVdID0gYXR0ci52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGF0dHJzO1xufVxuXG4vKipcbldpZGdldHMgYWRkZWQgdG8gdGhlIGNvbnRlbnQgYXJlIGRlc2NyaWJlZCBieSBzdWJjbGFzc2VzIG9mIHRoaXNcbmNsYXNzLiBVc2luZyBhIGRlc2NyaXB0aW9uIG9iamVjdCBsaWtlIHRoYXQgbWFrZXMgaXQgcG9zc2libGUgdG9cbmRlbGF5IGNyZWF0aW5nIG9mIHRoZSBET00gc3RydWN0dXJlIGZvciBhIHdpZGdldCB1bnRpbCBpdCBpc1xubmVlZGVkLCBhbmQgdG8gYXZvaWQgcmVkcmF3aW5nIHdpZGdldHMgZXZlbiBpZiB0aGUgZGVjb3JhdGlvbnNcbnRoYXQgZGVmaW5lIHRoZW0gYXJlIHJlY3JlYXRlZC5cbiovXG5jbGFzcyBXaWRnZXRUeXBlIHtcbiAgICAvKipcbiAgICBDb21wYXJlIHRoaXMgaW5zdGFuY2UgdG8gYW5vdGhlciBpbnN0YW5jZSBvZiB0aGUgc2FtZSB0eXBlLlxuICAgIChUeXBlU2NyaXB0IGNhbid0IGV4cHJlc3MgdGhpcywgYnV0IG9ubHkgaW5zdGFuY2VzIG9mIHRoZSBzYW1lXG4gICAgc3BlY2lmaWMgY2xhc3Mgd2lsbCBiZSBwYXNzZWQgdG8gdGhpcyBtZXRob2QuKSBUaGlzIGlzIHVzZWQgdG9cbiAgICBhdm9pZCByZWRyYXdpbmcgd2lkZ2V0cyB3aGVuIHRoZXkgYXJlIHJlcGxhY2VkIGJ5IGEgbmV3XG4gICAgZGVjb3JhdGlvbiBvZiB0aGUgc2FtZSB0eXBlLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBqdXN0XG4gICAgcmV0dXJucyBgZmFsc2VgLCB3aGljaCB3aWxsIGNhdXNlIG5ldyBpbnN0YW5jZXMgb2YgdGhlIHdpZGdldCB0b1xuICAgIGFsd2F5cyBiZSByZWRyYXduLlxuICAgICovXG4gICAgZXEod2lkZ2V0KSB7IHJldHVybiBmYWxzZTsgfVxuICAgIC8qKlxuICAgIFVwZGF0ZSBhIERPTSBlbGVtZW50IGNyZWF0ZWQgYnkgYSB3aWRnZXQgb2YgdGhlIHNhbWUgdHlwZSAoYnV0XG4gICAgZGlmZmVyZW50LCBub24tYGVxYCBjb250ZW50KSB0byByZWZsZWN0IHRoaXMgd2lkZ2V0LiBNYXkgcmV0dXJuXG4gICAgdHJ1ZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGNvdWxkIHVwZGF0ZSwgZmFsc2UgdG8gaW5kaWNhdGUgaXRcbiAgICBjb3VsZG4ndCAoaW4gd2hpY2ggY2FzZSB0aGUgd2lkZ2V0IHdpbGwgYmUgcmVkcmF3bikuIFRoZSBkZWZhdWx0XG4gICAgaW1wbGVtZW50YXRpb24ganVzdCByZXR1cm5zIGZhbHNlLlxuICAgICovXG4gICAgdXBkYXRlRE9NKGRvbSwgdmlldykgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbXBhcmUob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT0gb3RoZXIgfHwgdGhpcy5jb25zdHJ1Y3RvciA9PSBvdGhlci5jb25zdHJ1Y3RvciAmJiB0aGlzLmVxKG90aGVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGVzdGltYXRlZCBoZWlnaHQgdGhpcyB3aWRnZXQgd2lsbCBoYXZlLCB0byBiZSB1c2VkIHdoZW5cbiAgICBlc3RpbWF0aW5nIHRoZSBoZWlnaHQgb2YgY29udGVudCB0aGF0IGhhc24ndCBiZWVuIGRyYXduLiBNYXlcbiAgICByZXR1cm4gLTEgdG8gaW5kaWNhdGUgeW91IGRvbid0IGtub3cuIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uXG4gICAgcmV0dXJucyAtMS5cbiAgICAqL1xuICAgIGdldCBlc3RpbWF0ZWRIZWlnaHQoKSB7IHJldHVybiAtMTsgfVxuICAgIC8qKlxuICAgIEZvciBpbmxpbmUgd2lkZ2V0cyB0aGF0IGFyZSBkaXNwbGF5ZWQgaW5saW5lIChhcyBvcHBvc2VkIHRvXG4gICAgYGlubGluZS1ibG9ja2ApIGFuZCBpbnRyb2R1Y2UgbGluZSBicmVha3MgKHRocm91Z2ggYDxicj5gIHRhZ3NcbiAgICBvciB0ZXh0dWFsIG5ld2xpbmVzKSwgdGhpcyBtdXN0IGluZGljYXRlIHRoZSBhbW91bnQgb2YgbGluZVxuICAgIGJyZWFrcyB0aGV5IGludHJvZHVjZS4gRGVmYXVsdHMgdG8gMC5cbiAgICAqL1xuICAgIGdldCBsaW5lQnJlYWtzKCkgeyByZXR1cm4gMDsgfVxuICAgIC8qKlxuICAgIENhbiBiZSB1c2VkIHRvIGNvbmZpZ3VyZSB3aGljaCBraW5kcyBvZiBldmVudHMgaW5zaWRlIHRoZSB3aWRnZXRcbiAgICBzaG91bGQgYmUgaWdub3JlZCBieSB0aGUgZWRpdG9yLiBUaGUgZGVmYXVsdCBpcyB0byBpZ25vcmUgYWxsXG4gICAgZXZlbnRzLlxuICAgICovXG4gICAgaWdub3JlRXZlbnQoZXZlbnQpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAvKipcbiAgICBPdmVycmlkZSB0aGUgd2F5IHNjcmVlbiBjb29yZGluYXRlcyBmb3IgcG9zaXRpb25zIGF0L2luIHRoZVxuICAgIHdpZGdldCBhcmUgZm91bmQuIGBwb3NgIHdpbGwgYmUgdGhlIG9mZnNldCBpbnRvIHRoZSB3aWRnZXQsIGFuZFxuICAgIGBzaWRlYCB0aGUgc2lkZSBvZiB0aGUgcG9zaXRpb24gdGhhdCBpcyBiZWluZyBxdWVyaWVkXHUyMDE0bGVzcyB0aGFuXG4gICAgemVybyBmb3IgYmVmb3JlLCBncmVhdGVyIHRoYW4gemVybyBmb3IgYWZ0ZXIsIGFuZCB6ZXJvIGZvclxuICAgIGRpcmVjdGx5IGF0IHRoYXQgcG9zaXRpb24uXG4gICAgKi9cbiAgICBjb29yZHNBdChkb20sIHBvcywgc2lkZSkgeyByZXR1cm4gbnVsbDsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGlzSGlkZGVuKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGdldCBlZGl0YWJsZSgpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgLyoqXG4gICAgVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgYW4gaW5zdGFuY2Ugb2YgdGhlIHdpZGdldCBpcyByZW1vdmVkXG4gICAgZnJvbSB0aGUgZWRpdG9yIHZpZXcuXG4gICAgKi9cbiAgICBkZXN0cm95KGRvbSkgeyB9XG59XG4vKipcblRoZSBkaWZmZXJlbnQgdHlwZXMgb2YgYmxvY2tzIHRoYXQgY2FuIG9jY3VyIGluIGFuIGVkaXRvciB2aWV3LlxuKi9cbnZhciBCbG9ja1R5cGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChCbG9ja1R5cGUpIHtcbiAgICAvKipcbiAgICBBIGxpbmUgb2YgdGV4dC5cbiAgICAqL1xuICAgIEJsb2NrVHlwZVtCbG9ja1R5cGVbXCJUZXh0XCJdID0gMF0gPSBcIlRleHRcIjtcbiAgICAvKipcbiAgICBBIGJsb2NrIHdpZGdldCBhc3NvY2lhdGVkIHdpdGggdGhlIHBvc2l0aW9uIGFmdGVyIGl0LlxuICAgICovXG4gICAgQmxvY2tUeXBlW0Jsb2NrVHlwZVtcIldpZGdldEJlZm9yZVwiXSA9IDFdID0gXCJXaWRnZXRCZWZvcmVcIjtcbiAgICAvKipcbiAgICBBIGJsb2NrIHdpZGdldCBhc3NvY2lhdGVkIHdpdGggdGhlIHBvc2l0aW9uIGJlZm9yZSBpdC5cbiAgICAqL1xuICAgIEJsb2NrVHlwZVtCbG9ja1R5cGVbXCJXaWRnZXRBZnRlclwiXSA9IDJdID0gXCJXaWRnZXRBZnRlclwiO1xuICAgIC8qKlxuICAgIEEgYmxvY2sgd2lkZ2V0IFtyZXBsYWNpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5EZWNvcmF0aW9uXnJlcGxhY2UpIGEgcmFuZ2Ugb2YgY29udGVudC5cbiAgICAqL1xuICAgIEJsb2NrVHlwZVtCbG9ja1R5cGVbXCJXaWRnZXRSYW5nZVwiXSA9IDNdID0gXCJXaWRnZXRSYW5nZVwiO1xucmV0dXJuIEJsb2NrVHlwZX0pKEJsb2NrVHlwZSB8fCAoQmxvY2tUeXBlID0ge30pKTtcbi8qKlxuQSBkZWNvcmF0aW9uIHByb3ZpZGVzIGluZm9ybWF0aW9uIG9uIGhvdyB0byBkcmF3IG9yIHN0eWxlIGEgcGllY2Vcbm9mIGNvbnRlbnQuIFlvdSdsbCB1c3VhbGx5IHVzZSBpdCB3cmFwcGVkIGluIGFcbltgUmFuZ2VgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlJhbmdlKSwgd2hpY2ggYWRkcyBhIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb24uXG5Abm9uYWJzdHJhY3RcbiovXG5jbGFzcyBEZWNvcmF0aW9uIGV4dGVuZHMgUmFuZ2VWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGFydFNpZGUsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZW5kU2lkZSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB3aWRnZXQsIFxuICAgIC8qKlxuICAgIFRoZSBjb25maWcgb2JqZWN0IHVzZWQgdG8gY3JlYXRlIHRoaXMgZGVjb3JhdGlvbi4gWW91IGNhblxuICAgIGluY2x1ZGUgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGluIHRoZXJlIHRvIHN0b3JlIG1ldGFkYXRhIGFib3V0XG4gICAgeW91ciBkZWNvcmF0aW9uLlxuICAgICovXG4gICAgc3BlYykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXJ0U2lkZSA9IHN0YXJ0U2lkZTtcbiAgICAgICAgdGhpcy5lbmRTaWRlID0gZW5kU2lkZTtcbiAgICAgICAgdGhpcy53aWRnZXQgPSB3aWRnZXQ7XG4gICAgICAgIHRoaXMuc3BlYyA9IHNwZWM7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGhlaWdodFJlbGV2YW50KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBtYXJrIGRlY29yYXRpb24sIHdoaWNoIGluZmx1ZW5jZXMgdGhlIHN0eWxpbmcgb2YgdGhlXG4gICAgY29udGVudCBpbiBpdHMgcmFuZ2UuIE5lc3RlZCBtYXJrIGRlY29yYXRpb25zIHdpbGwgY2F1c2UgbmVzdGVkXG4gICAgRE9NIGVsZW1lbnRzIHRvIGJlIGNyZWF0ZWQuIE5lc3Rpbmcgb3JkZXIgaXMgZGV0ZXJtaW5lZCBieVxuICAgIHByZWNlZGVuY2Ugb2YgdGhlIFtmYWNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXdeZGVjb3JhdGlvbnMpLCB3aXRoXG4gICAgdGhlIGhpZ2hlci1wcmVjZWRlbmNlIGRlY29yYXRpb25zIGNyZWF0aW5nIHRoZSBpbm5lciBET00gbm9kZXMuXG4gICAgU3VjaCBlbGVtZW50cyBhcmUgc3BsaXQgb24gbGluZSBib3VuZGFyaWVzIGFuZCBvbiB0aGUgYm91bmRhcmllc1xuICAgIG9mIGxvd2VyLXByZWNlZGVuY2UgZGVjb3JhdGlvbnMuXG4gICAgKi9cbiAgICBzdGF0aWMgbWFyayhzcGVjKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWFya0RlY29yYXRpb24oc3BlYyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHdpZGdldCBkZWNvcmF0aW9uLCB3aGljaCBkaXNwbGF5cyBhIERPTSBlbGVtZW50IGF0IHRoZVxuICAgIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgc3RhdGljIHdpZGdldChzcGVjKSB7XG4gICAgICAgIGxldCBzaWRlID0gTWF0aC5tYXgoLTEwMDAwLCBNYXRoLm1pbigxMDAwMCwgc3BlYy5zaWRlIHx8IDApKSwgYmxvY2sgPSAhIXNwZWMuYmxvY2s7XG4gICAgICAgIHNpZGUgKz0gKGJsb2NrICYmICFzcGVjLmlubGluZU9yZGVyKVxuICAgICAgICAgICAgPyAoc2lkZSA+IDAgPyAzMDAwMDAwMDAgLyogU2lkZS5CbG9ja0FmdGVyICovIDogLTQwMDAwMDAwMCAvKiBTaWRlLkJsb2NrQmVmb3JlICovKVxuICAgICAgICAgICAgOiAoc2lkZSA+IDAgPyAxMDAwMDAwMDAgLyogU2lkZS5JbmxpbmVBZnRlciAqLyA6IC0xMDAwMDAwMDAgLyogU2lkZS5JbmxpbmVCZWZvcmUgKi8pO1xuICAgICAgICByZXR1cm4gbmV3IFBvaW50RGVjb3JhdGlvbihzcGVjLCBzaWRlLCBzaWRlLCBibG9jaywgc3BlYy53aWRnZXQgfHwgbnVsbCwgZmFsc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSByZXBsYWNlIGRlY29yYXRpb24gd2hpY2ggcmVwbGFjZXMgdGhlIGdpdmVuIHJhbmdlIHdpdGhcbiAgICBhIHdpZGdldCwgb3Igc2ltcGx5IGhpZGVzIGl0LlxuICAgICovXG4gICAgc3RhdGljIHJlcGxhY2Uoc3BlYykge1xuICAgICAgICBsZXQgYmxvY2sgPSAhIXNwZWMuYmxvY2ssIHN0YXJ0U2lkZSwgZW5kU2lkZTtcbiAgICAgICAgaWYgKHNwZWMuaXNCbG9ja0dhcCkge1xuICAgICAgICAgICAgc3RhcnRTaWRlID0gLTUwMDAwMDAwMCAvKiBTaWRlLkdhcFN0YXJ0ICovO1xuICAgICAgICAgICAgZW5kU2lkZSA9IDQwMDAwMDAwMCAvKiBTaWRlLkdhcEVuZCAqLztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCB7IHN0YXJ0LCBlbmQgfSA9IGdldEluY2x1c2l2ZShzcGVjLCBibG9jayk7XG4gICAgICAgICAgICBzdGFydFNpZGUgPSAoc3RhcnQgPyAoYmxvY2sgPyAtMzAwMDAwMDAwIC8qIFNpZGUuQmxvY2tJbmNTdGFydCAqLyA6IC0xIC8qIFNpZGUuSW5saW5lSW5jU3RhcnQgKi8pIDogNTAwMDAwMDAwIC8qIFNpZGUuTm9uSW5jU3RhcnQgKi8pIC0gMTtcbiAgICAgICAgICAgIGVuZFNpZGUgPSAoZW5kID8gKGJsb2NrID8gMjAwMDAwMDAwIC8qIFNpZGUuQmxvY2tJbmNFbmQgKi8gOiAxIC8qIFNpZGUuSW5saW5lSW5jRW5kICovKSA6IC02MDAwMDAwMDAgLyogU2lkZS5Ob25JbmNFbmQgKi8pICsgMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFBvaW50RGVjb3JhdGlvbihzcGVjLCBzdGFydFNpZGUsIGVuZFNpZGUsIGJsb2NrLCBzcGVjLndpZGdldCB8fCBudWxsLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbGluZSBkZWNvcmF0aW9uLCB3aGljaCBjYW4gYWRkIERPTSBhdHRyaWJ1dGVzIHRvIHRoZVxuICAgIGxpbmUgc3RhcnRpbmcgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgc3RhdGljIGxpbmUoc3BlYykge1xuICAgICAgICByZXR1cm4gbmV3IExpbmVEZWNvcmF0aW9uKHNwZWMpO1xuICAgIH1cbiAgICAvKipcbiAgICBCdWlsZCBhIFtgRGVjb3JhdGlvblNldGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5EZWNvcmF0aW9uU2V0KSBmcm9tIHRoZSBnaXZlblxuICAgIGRlY29yYXRlZCByYW5nZSBvciByYW5nZXMuIElmIHRoZSByYW5nZXMgYXJlbid0IGFscmVhZHkgc29ydGVkLFxuICAgIHBhc3MgYHRydWVgIGZvciBgc29ydGAgdG8gbWFrZSB0aGUgbGlicmFyeSBzb3J0IHRoZW0gZm9yIHlvdS5cbiAgICAqL1xuICAgIHN0YXRpYyBzZXQob2YsIHNvcnQgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gUmFuZ2VTZXQub2Yob2YsIHNvcnQpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGhhc0hlaWdodCgpIHsgcmV0dXJuIHRoaXMud2lkZ2V0ID8gdGhpcy53aWRnZXQuZXN0aW1hdGVkSGVpZ2h0ID4gLTEgOiBmYWxzZTsgfVxufVxuLyoqXG5UaGUgZW1wdHkgc2V0IG9mIGRlY29yYXRpb25zLlxuKi9cbkRlY29yYXRpb24ubm9uZSA9IFJhbmdlU2V0LmVtcHR5O1xuY2xhc3MgTWFya0RlY29yYXRpb24gZXh0ZW5kcyBEZWNvcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIGxldCB7IHN0YXJ0LCBlbmQgfSA9IGdldEluY2x1c2l2ZShzcGVjKTtcbiAgICAgICAgc3VwZXIoc3RhcnQgPyAtMSAvKiBTaWRlLklubGluZUluY1N0YXJ0ICovIDogNTAwMDAwMDAwIC8qIFNpZGUuTm9uSW5jU3RhcnQgKi8sIGVuZCA/IDEgLyogU2lkZS5JbmxpbmVJbmNFbmQgKi8gOiAtNjAwMDAwMDAwIC8qIFNpZGUuTm9uSW5jRW5kICovLCBudWxsLCBzcGVjKTtcbiAgICAgICAgdGhpcy50YWdOYW1lID0gc3BlYy50YWdOYW1lIHx8IFwic3BhblwiO1xuICAgICAgICB0aGlzLmF0dHJzID0gc3BlYy5jbGFzcyAmJiBzcGVjLmF0dHJpYnV0ZXMgPyBjb21iaW5lQXR0cnMoc3BlYy5hdHRyaWJ1dGVzLCB7IGNsYXNzOiBzcGVjLmNsYXNzIH0pXG4gICAgICAgICAgICA6IHNwZWMuY2xhc3MgPyB7IGNsYXNzOiBzcGVjLmNsYXNzIH0gOiBzcGVjLmF0dHJpYnV0ZXMgfHwgbm9BdHRycztcbiAgICB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT0gb3RoZXIgfHwgb3RoZXIgaW5zdGFuY2VvZiBNYXJrRGVjb3JhdGlvbiAmJiB0aGlzLnRhZ05hbWUgPT0gb3RoZXIudGFnTmFtZSAmJiBhdHRyc0VxKHRoaXMuYXR0cnMsIG90aGVyLmF0dHJzKTtcbiAgICB9XG4gICAgcmFuZ2UoZnJvbSwgdG8gPSBmcm9tKSB7XG4gICAgICAgIGlmIChmcm9tID49IHRvKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJNYXJrIGRlY29yYXRpb25zIG1heSBub3QgYmUgZW1wdHlcIik7XG4gICAgICAgIHJldHVybiBzdXBlci5yYW5nZShmcm9tLCB0byk7XG4gICAgfVxufVxuTWFya0RlY29yYXRpb24ucHJvdG90eXBlLnBvaW50ID0gZmFsc2U7XG5jbGFzcyBMaW5lRGVjb3JhdGlvbiBleHRlbmRzIERlY29yYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHNwZWMpIHtcbiAgICAgICAgc3VwZXIoLTIwMDAwMDAwMCAvKiBTaWRlLkxpbmUgKi8sIC0yMDAwMDAwMDAgLyogU2lkZS5MaW5lICovLCBudWxsLCBzcGVjKTtcbiAgICB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyIGluc3RhbmNlb2YgTGluZURlY29yYXRpb24gJiZcbiAgICAgICAgICAgIHRoaXMuc3BlYy5jbGFzcyA9PSBvdGhlci5zcGVjLmNsYXNzICYmXG4gICAgICAgICAgICBhdHRyc0VxKHRoaXMuc3BlYy5hdHRyaWJ1dGVzLCBvdGhlci5zcGVjLmF0dHJpYnV0ZXMpO1xuICAgIH1cbiAgICByYW5nZShmcm9tLCB0byA9IGZyb20pIHtcbiAgICAgICAgaWYgKHRvICE9IGZyb20pXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkxpbmUgZGVjb3JhdGlvbiByYW5nZXMgbXVzdCBiZSB6ZXJvLWxlbmd0aFwiKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnJhbmdlKGZyb20sIHRvKTtcbiAgICB9XG59XG5MaW5lRGVjb3JhdGlvbi5wcm90b3R5cGUubWFwTW9kZSA9IE1hcE1vZGUuVHJhY2tCZWZvcmU7XG5MaW5lRGVjb3JhdGlvbi5wcm90b3R5cGUucG9pbnQgPSB0cnVlO1xuY2xhc3MgUG9pbnREZWNvcmF0aW9uIGV4dGVuZHMgRGVjb3JhdGlvbiB7XG4gICAgY29uc3RydWN0b3Ioc3BlYywgc3RhcnRTaWRlLCBlbmRTaWRlLCBibG9jaywgd2lkZ2V0LCBpc1JlcGxhY2UpIHtcbiAgICAgICAgc3VwZXIoc3RhcnRTaWRlLCBlbmRTaWRlLCB3aWRnZXQsIHNwZWMpO1xuICAgICAgICB0aGlzLmJsb2NrID0gYmxvY2s7XG4gICAgICAgIHRoaXMuaXNSZXBsYWNlID0gaXNSZXBsYWNlO1xuICAgICAgICB0aGlzLm1hcE1vZGUgPSAhYmxvY2sgPyBNYXBNb2RlLlRyYWNrRGVsIDogc3RhcnRTaWRlIDw9IDAgPyBNYXBNb2RlLlRyYWNrQmVmb3JlIDogTWFwTW9kZS5UcmFja0FmdGVyO1xuICAgIH1cbiAgICAvLyBPbmx5IHJlbGV2YW50IHdoZW4gdGhpcy5ibG9jayA9PSB0cnVlXG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0U2lkZSAhPSB0aGlzLmVuZFNpZGUgPyBCbG9ja1R5cGUuV2lkZ2V0UmFuZ2VcbiAgICAgICAgICAgIDogdGhpcy5zdGFydFNpZGUgPD0gMCA/IEJsb2NrVHlwZS5XaWRnZXRCZWZvcmUgOiBCbG9ja1R5cGUuV2lkZ2V0QWZ0ZXI7XG4gICAgfVxuICAgIGdldCBoZWlnaHRSZWxldmFudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2sgfHwgISF0aGlzLndpZGdldCAmJiAodGhpcy53aWRnZXQuZXN0aW1hdGVkSGVpZ2h0ID49IDUgfHwgdGhpcy53aWRnZXQubGluZUJyZWFrcyA+IDApO1xuICAgIH1cbiAgICBlcShvdGhlcikge1xuICAgICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBQb2ludERlY29yYXRpb24gJiZcbiAgICAgICAgICAgIHdpZGdldHNFcSh0aGlzLndpZGdldCwgb3RoZXIud2lkZ2V0KSAmJlxuICAgICAgICAgICAgdGhpcy5ibG9jayA9PSBvdGhlci5ibG9jayAmJlxuICAgICAgICAgICAgdGhpcy5zdGFydFNpZGUgPT0gb3RoZXIuc3RhcnRTaWRlICYmIHRoaXMuZW5kU2lkZSA9PSBvdGhlci5lbmRTaWRlO1xuICAgIH1cbiAgICByYW5nZShmcm9tLCB0byA9IGZyb20pIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZXBsYWNlICYmIChmcm9tID4gdG8gfHwgKGZyb20gPT0gdG8gJiYgdGhpcy5zdGFydFNpZGUgPiAwICYmIHRoaXMuZW5kU2lkZSA8PSAwKSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgcmFuZ2UgZm9yIHJlcGxhY2VtZW50IGRlY29yYXRpb25cIik7XG4gICAgICAgIGlmICghdGhpcy5pc1JlcGxhY2UgJiYgdG8gIT0gZnJvbSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiV2lkZ2V0IGRlY29yYXRpb25zIGNhbiBvbmx5IGhhdmUgemVyby1sZW5ndGggcmFuZ2VzXCIpO1xuICAgICAgICByZXR1cm4gc3VwZXIucmFuZ2UoZnJvbSwgdG8pO1xuICAgIH1cbn1cblBvaW50RGVjb3JhdGlvbi5wcm90b3R5cGUucG9pbnQgPSB0cnVlO1xuZnVuY3Rpb24gZ2V0SW5jbHVzaXZlKHNwZWMsIGJsb2NrID0gZmFsc2UpIHtcbiAgICBsZXQgeyBpbmNsdXNpdmVTdGFydDogc3RhcnQsIGluY2x1c2l2ZUVuZDogZW5kIH0gPSBzcGVjO1xuICAgIGlmIChzdGFydCA9PSBudWxsKVxuICAgICAgICBzdGFydCA9IHNwZWMuaW5jbHVzaXZlO1xuICAgIGlmIChlbmQgPT0gbnVsbClcbiAgICAgICAgZW5kID0gc3BlYy5pbmNsdXNpdmU7XG4gICAgcmV0dXJuIHsgc3RhcnQ6IHN0YXJ0ICE9PSBudWxsICYmIHN0YXJ0ICE9PSB2b2lkIDAgPyBzdGFydCA6IGJsb2NrLCBlbmQ6IGVuZCAhPT0gbnVsbCAmJiBlbmQgIT09IHZvaWQgMCA/IGVuZCA6IGJsb2NrIH07XG59XG5mdW5jdGlvbiB3aWRnZXRzRXEoYSwgYikge1xuICAgIHJldHVybiBhID09IGIgfHwgISEoYSAmJiBiICYmIGEuY29tcGFyZShiKSk7XG59XG5mdW5jdGlvbiBhZGRSYW5nZShmcm9tLCB0bywgcmFuZ2VzLCBtYXJnaW4gPSAwKSB7XG4gICAgbGV0IGxhc3QgPSByYW5nZXMubGVuZ3RoIC0gMTtcbiAgICBpZiAobGFzdCA+PSAwICYmIHJhbmdlc1tsYXN0XSArIG1hcmdpbiA+PSBmcm9tKVxuICAgICAgICByYW5nZXNbbGFzdF0gPSBNYXRoLm1heChyYW5nZXNbbGFzdF0sIHRvKTtcbiAgICBlbHNlXG4gICAgICAgIHJhbmdlcy5wdXNoKGZyb20sIHRvKTtcbn1cbi8qKlxuQSBibG9jayB3cmFwcGVyIGRlZmluZXMgYSBET00gbm9kZSB0aGF0IHdyYXBzIGxpbmVzIG9yIG90aGVyIGJsb2NrXG53cmFwcGVycyBhdCB0aGUgdG9wIG9mIHRoZSBkb2N1bWVudC4gSXQgYWZmZWN0cyBhbnkgbGluZSBvciBibG9ja1xud2lkZ2V0IHRoYXQgc3RhcnRzIGluc2lkZSBpdHMgcmFuZ2UsIGluY2x1ZGluZyBibG9ja3Mgc3RhcnRpbmdcbmRpcmVjdGx5IGF0IGBmcm9tYCBidXQgbm90IGluY2x1ZGluZyBgdG9gLlxuKi9cbmNsYXNzIEJsb2NrV3JhcHBlciBleHRlbmRzIFJhbmdlVmFsdWUge1xuICAgIGNvbnN0cnVjdG9yKHRhZ05hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50YWdOYW1lID0gdGFnTmFtZTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyID09IHRoaXMgfHxcbiAgICAgICAgICAgIG90aGVyIGluc3RhbmNlb2YgQmxvY2tXcmFwcGVyICYmIHRoaXMudGFnTmFtZSA9PSBvdGhlci50YWdOYW1lICYmIGF0dHJzRXEodGhpcy5hdHRyaWJ1dGVzLCBvdGhlci5hdHRyaWJ1dGVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgYmxvY2sgd3JhcHBlciBvYmplY3Qgd2l0aCB0aGUgZ2l2ZW4gdGFnIG5hbWUgYW5kXG4gICAgYXR0cmlidXRlcy5cbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoc3BlYykge1xuICAgICAgICByZXR1cm4gbmV3IEJsb2NrV3JhcHBlcihzcGVjLnRhZ05hbWUsIHNwZWMuYXR0cmlidXRlcyB8fCBub0F0dHJzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcmFuZ2Ugc2V0IGZyb20gdGhlIGdpdmVuIGJsb2NrIHdyYXBwZXIgcmFuZ2VzLlxuICAgICovXG4gICAgc3RhdGljIHNldChvZiwgc29ydCA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBSYW5nZVNldC5vZihvZiwgc29ydCk7XG4gICAgfVxufVxuQmxvY2tXcmFwcGVyLnByb3RvdHlwZS5zdGFydFNpZGUgPSBCbG9ja1dyYXBwZXIucHJvdG90eXBlLmVuZFNpZGUgPSAtMTtcblxuZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKHJvb3QpIHtcbiAgICBsZXQgdGFyZ2V0O1xuICAgIC8vIEJyb3dzZXJzIGRpZmZlciBvbiB3aGV0aGVyIHNoYWRvdyByb290cyBoYXZlIGEgZ2V0U2VsZWN0aW9uXG4gICAgLy8gbWV0aG9kLiBJZiBpdCBleGlzdHMsIHVzZSB0aGF0LCBvdGhlcndpc2UsIGNhbGwgaXQgb24gdGhlXG4gICAgLy8gZG9jdW1lbnQuXG4gICAgaWYgKHJvb3Qubm9kZVR5cGUgPT0gMTEpIHsgLy8gU2hhZG93IHJvb3RcbiAgICAgICAgdGFyZ2V0ID0gcm9vdC5nZXRTZWxlY3Rpb24gPyByb290IDogcm9vdC5vd25lckRvY3VtZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGFyZ2V0ID0gcm9vdDtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldC5nZXRTZWxlY3Rpb24oKTtcbn1cbmZ1bmN0aW9uIGNvbnRhaW5zKGRvbSwgbm9kZSkge1xuICAgIHJldHVybiBub2RlID8gZG9tID09IG5vZGUgfHwgZG9tLmNvbnRhaW5zKG5vZGUubm9kZVR5cGUgIT0gMSA/IG5vZGUucGFyZW50Tm9kZSA6IG5vZGUpIDogZmFsc2U7XG59XG5mdW5jdGlvbiBoYXNTZWxlY3Rpb24oZG9tLCBzZWxlY3Rpb24pIHtcbiAgICBpZiAoIXNlbGVjdGlvbi5hbmNob3JOb2RlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gRmlyZWZveCB3aWxsIHJhaXNlICdwZXJtaXNzaW9uIGRlbmllZCcgZXJyb3JzIHdoZW4gYWNjZXNzaW5nXG4gICAgICAgIC8vIHByb3BlcnRpZXMgb2YgYHNlbC5hbmNob3JOb2RlYCB3aGVuIGl0J3MgaW4gYSBnZW5lcmF0ZWQgQ1NTXG4gICAgICAgIC8vIGVsZW1lbnQuXG4gICAgICAgIHJldHVybiBjb250YWlucyhkb20sIHNlbGVjdGlvbi5hbmNob3JOb2RlKTtcbiAgICB9XG4gICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNsaWVudFJlY3RzRm9yKGRvbSkge1xuICAgIGlmIChkb20ubm9kZVR5cGUgPT0gMylcbiAgICAgICAgcmV0dXJuIHRleHRSYW5nZShkb20sIDAsIGRvbS5ub2RlVmFsdWUubGVuZ3RoKS5nZXRDbGllbnRSZWN0cygpO1xuICAgIGVsc2UgaWYgKGRvbS5ub2RlVHlwZSA9PSAxKVxuICAgICAgICByZXR1cm4gZG9tLmdldENsaWVudFJlY3RzKCk7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gW107XG59XG4vLyBTY2FucyBmb3J3YXJkIGFuZCBiYWNrd2FyZCB0aHJvdWdoIERPTSBwb3NpdGlvbnMgZXF1aXZhbGVudCB0byB0aGVcbi8vIGdpdmVuIG9uZSB0byBzZWUgaWYgdGhlIHR3byBhcmUgaW4gdGhlIHNhbWUgcGxhY2UgKGkuZS4gYWZ0ZXIgYVxuLy8gdGV4dCBub2RlIHZzIGF0IHRoZSBlbmQgb2YgdGhhdCB0ZXh0IG5vZGUpXG5mdW5jdGlvbiBpc0VxdWl2YWxlbnRQb3NpdGlvbihub2RlLCBvZmYsIHRhcmdldE5vZGUsIHRhcmdldE9mZikge1xuICAgIHJldHVybiB0YXJnZXROb2RlID8gKHNjYW5Gb3Iobm9kZSwgb2ZmLCB0YXJnZXROb2RlLCB0YXJnZXRPZmYsIC0xKSB8fFxuICAgICAgICBzY2FuRm9yKG5vZGUsIG9mZiwgdGFyZ2V0Tm9kZSwgdGFyZ2V0T2ZmLCAxKSkgOiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGRvbUluZGV4KG5vZGUpIHtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7OyBpbmRleCsrKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLnByZXZpb3VzU2libGluZztcbiAgICAgICAgaWYgKCFub2RlKVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzQmxvY2tFbGVtZW50KG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PSAxICYmIC9eKERJVnxQfExJfFVMfE9MfEJMT0NLUVVPVEV8RER8RFR8SFxcZHxTRUNUSU9OfFBSRSkkLy50ZXN0KG5vZGUubm9kZU5hbWUpO1xufVxuZnVuY3Rpb24gc2NhbkZvcihub2RlLCBvZmYsIHRhcmdldE5vZGUsIHRhcmdldE9mZiwgZGlyKSB7XG4gICAgZm9yICg7Oykge1xuICAgICAgICBpZiAobm9kZSA9PSB0YXJnZXROb2RlICYmIG9mZiA9PSB0YXJnZXRPZmYpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKG9mZiA9PSAoZGlyIDwgMCA/IDAgOiBtYXhPZmZzZXQobm9kZSkpKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlTmFtZSA9PSBcIkRJVlwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICBpZiAoIXBhcmVudCB8fCBwYXJlbnQubm9kZVR5cGUgIT0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBvZmYgPSBkb21JbmRleChub2RlKSArIChkaXIgPCAwID8gMCA6IDEpO1xuICAgICAgICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLmNoaWxkTm9kZXNbb2ZmICsgKGRpciA8IDAgPyAtMSA6IDApXTtcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgbm9kZS5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIG9mZiA9IGRpciA8IDAgPyBtYXhPZmZzZXQobm9kZSkgOiAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gbWF4T2Zmc2V0KG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PSAzID8gbm9kZS5ub2RlVmFsdWUubGVuZ3RoIDogbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDtcbn1cbmZ1bmN0aW9uIGZsYXR0ZW5SZWN0KHJlY3QsIGxlZnQpIHtcbiAgICBsZXQgeCA9IGxlZnQgPyByZWN0LmxlZnQgOiByZWN0LnJpZ2h0O1xuICAgIHJldHVybiB7IGxlZnQ6IHgsIHJpZ2h0OiB4LCB0b3A6IHJlY3QudG9wLCBib3R0b206IHJlY3QuYm90dG9tIH07XG59XG5mdW5jdGlvbiB3aW5kb3dSZWN0KHdpbikge1xuICAgIGxldCB2cCA9IHdpbi52aXN1YWxWaWV3cG9ydDtcbiAgICBpZiAodnApXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsZWZ0OiAwLCByaWdodDogdnAud2lkdGgsXG4gICAgICAgICAgICB0b3A6IDAsIGJvdHRvbTogdnAuaGVpZ2h0XG4gICAgICAgIH07XG4gICAgcmV0dXJuIHsgbGVmdDogMCwgcmlnaHQ6IHdpbi5pbm5lcldpZHRoLFxuICAgICAgICB0b3A6IDAsIGJvdHRvbTogd2luLmlubmVySGVpZ2h0IH07XG59XG5mdW5jdGlvbiBnZXRTY2FsZShlbHQsIHJlY3QpIHtcbiAgICBsZXQgc2NhbGVYID0gcmVjdC53aWR0aCAvIGVsdC5vZmZzZXRXaWR0aDtcbiAgICBsZXQgc2NhbGVZID0gcmVjdC5oZWlnaHQgLyBlbHQub2Zmc2V0SGVpZ2h0O1xuICAgIGlmIChzY2FsZVggPiAwLjk5NSAmJiBzY2FsZVggPCAxLjAwNSB8fCAhaXNGaW5pdGUoc2NhbGVYKSB8fCBNYXRoLmFicyhyZWN0LndpZHRoIC0gZWx0Lm9mZnNldFdpZHRoKSA8IDEpXG4gICAgICAgIHNjYWxlWCA9IDE7XG4gICAgaWYgKHNjYWxlWSA+IDAuOTk1ICYmIHNjYWxlWSA8IDEuMDA1IHx8ICFpc0Zpbml0ZShzY2FsZVkpIHx8IE1hdGguYWJzKHJlY3QuaGVpZ2h0IC0gZWx0Lm9mZnNldEhlaWdodCkgPCAxKVxuICAgICAgICBzY2FsZVkgPSAxO1xuICAgIHJldHVybiB7IHNjYWxlWCwgc2NhbGVZIH07XG59XG5mdW5jdGlvbiBzY3JvbGxSZWN0SW50b1ZpZXcoZG9tLCByZWN0LCBzaWRlLCB4LCB5LCB4TWFyZ2luLCB5TWFyZ2luLCBsdHIpIHtcbiAgICBsZXQgZG9jID0gZG9tLm93bmVyRG9jdW1lbnQsIHdpbiA9IGRvYy5kZWZhdWx0VmlldyB8fCB3aW5kb3c7XG4gICAgZm9yIChsZXQgY3VyID0gZG9tLCBzdG9wID0gZmFsc2U7IGN1ciAmJiAhc3RvcDspIHtcbiAgICAgICAgaWYgKGN1ci5ub2RlVHlwZSA9PSAxKSB7IC8vIEVsZW1lbnRcbiAgICAgICAgICAgIGxldCBib3VuZGluZywgdG9wID0gY3VyID09IGRvYy5ib2R5O1xuICAgICAgICAgICAgbGV0IHNjYWxlWCA9IDEsIHNjYWxlWSA9IDE7XG4gICAgICAgICAgICBpZiAodG9wKSB7XG4gICAgICAgICAgICAgICAgYm91bmRpbmcgPSB3aW5kb3dSZWN0KHdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoL14oZml4ZWR8c3RpY2t5KSQvLnRlc3QoZ2V0Q29tcHV0ZWRTdHlsZShjdXIpLnBvc2l0aW9uKSlcbiAgICAgICAgICAgICAgICAgICAgc3RvcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGN1ci5zY3JvbGxIZWlnaHQgPD0gY3VyLmNsaWVudEhlaWdodCAmJiBjdXIuc2Nyb2xsV2lkdGggPD0gY3VyLmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1ciA9IGN1ci5hc3NpZ25lZFNsb3QgfHwgY3VyLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgcmVjdCA9IGN1ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAoeyBzY2FsZVgsIHNjYWxlWSB9ID0gZ2V0U2NhbGUoY3VyLCByZWN0KSk7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHNjcm9sbGJhciB3aWR0aCBpc24ndCBpbmNsdWRlZCBpbiB0aGUgcmVjdGFuZ2xlXG4gICAgICAgICAgICAgICAgYm91bmRpbmcgPSB7IGxlZnQ6IHJlY3QubGVmdCwgcmlnaHQ6IHJlY3QubGVmdCArIGN1ci5jbGllbnRXaWR0aCAqIHNjYWxlWCxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiByZWN0LnRvcCwgYm90dG9tOiByZWN0LnRvcCArIGN1ci5jbGllbnRIZWlnaHQgKiBzY2FsZVkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBtb3ZlWCA9IDAsIG1vdmVZID0gMDtcbiAgICAgICAgICAgIGlmICh5ID09IFwibmVhcmVzdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlY3QudG9wIDwgYm91bmRpbmcudG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVZID0gcmVjdC50b3AgLSAoYm91bmRpbmcudG9wICsgeU1hcmdpbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaWRlID4gMCAmJiByZWN0LmJvdHRvbSA+IGJvdW5kaW5nLmJvdHRvbSArIG1vdmVZKVxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVkgPSByZWN0LmJvdHRvbSAtIGJvdW5kaW5nLmJvdHRvbSArIHlNYXJnaW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlY3QuYm90dG9tID4gYm91bmRpbmcuYm90dG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVZID0gcmVjdC5ib3R0b20gLSBib3VuZGluZy5ib3R0b20gKyB5TWFyZ2luO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA8IDAgJiYgKHJlY3QudG9wIC0gbW92ZVkpIDwgYm91bmRpbmcudG9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVkgPSByZWN0LnRvcCAtIChib3VuZGluZy50b3AgKyB5TWFyZ2luKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVjdEhlaWdodCA9IHJlY3QuYm90dG9tIC0gcmVjdC50b3AsIGJvdW5kaW5nSGVpZ2h0ID0gYm91bmRpbmcuYm90dG9tIC0gYm91bmRpbmcudG9wO1xuICAgICAgICAgICAgICAgIGxldCB0YXJnZXRUb3AgPSB5ID09IFwiY2VudGVyXCIgJiYgcmVjdEhlaWdodCA8PSBib3VuZGluZ0hlaWdodCA/IHJlY3QudG9wICsgcmVjdEhlaWdodCAvIDIgLSBib3VuZGluZ0hlaWdodCAvIDIgOlxuICAgICAgICAgICAgICAgICAgICB5ID09IFwic3RhcnRcIiB8fCB5ID09IFwiY2VudGVyXCIgJiYgc2lkZSA8IDAgPyByZWN0LnRvcCAtIHlNYXJnaW4gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdC5ib3R0b20gLSBib3VuZGluZ0hlaWdodCArIHlNYXJnaW47XG4gICAgICAgICAgICAgICAgbW92ZVkgPSB0YXJnZXRUb3AgLSBib3VuZGluZy50b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoeCA9PSBcIm5lYXJlc3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChyZWN0LmxlZnQgPCBib3VuZGluZy5sZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVYID0gcmVjdC5sZWZ0IC0gKGJvdW5kaW5nLmxlZnQgKyB4TWFyZ2luKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpZGUgPiAwICYmIHJlY3QucmlnaHQgPiBib3VuZGluZy5yaWdodCArIG1vdmVYKVxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVggPSByZWN0LnJpZ2h0IC0gYm91bmRpbmcucmlnaHQgKyB4TWFyZ2luO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZWN0LnJpZ2h0ID4gYm91bmRpbmcucmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbW92ZVggPSByZWN0LnJpZ2h0IC0gYm91bmRpbmcucmlnaHQgKyB4TWFyZ2luO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA8IDAgJiYgcmVjdC5sZWZ0IDwgYm91bmRpbmcubGVmdCArIG1vdmVYKVxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVggPSByZWN0LmxlZnQgLSAoYm91bmRpbmcubGVmdCArIHhNYXJnaW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB0YXJnZXRMZWZ0ID0geCA9PSBcImNlbnRlclwiID8gcmVjdC5sZWZ0ICsgKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpIC8gMiAtIChib3VuZGluZy5yaWdodCAtIGJvdW5kaW5nLmxlZnQpIC8gMiA6XG4gICAgICAgICAgICAgICAgICAgICh4ID09IFwic3RhcnRcIikgPT0gbHRyID8gcmVjdC5sZWZ0IC0geE1hcmdpbiA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWN0LnJpZ2h0IC0gKGJvdW5kaW5nLnJpZ2h0IC0gYm91bmRpbmcubGVmdCkgKyB4TWFyZ2luO1xuICAgICAgICAgICAgICAgIG1vdmVYID0gdGFyZ2V0TGVmdCAtIGJvdW5kaW5nLmxlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW92ZVggfHwgbW92ZVkpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbi5zY3JvbGxCeShtb3ZlWCwgbW92ZVkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vdmVkWCA9IDAsIG1vdmVkWSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3ZlWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0ID0gY3VyLnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ci5zY3JvbGxUb3AgKz0gbW92ZVkgLyBzY2FsZVk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlZFkgPSAoY3VyLnNjcm9sbFRvcCAtIHN0YXJ0KSAqIHNjYWxlWTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobW92ZVgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGFydCA9IGN1ci5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyLnNjcm9sbExlZnQgKz0gbW92ZVggLyBzY2FsZVg7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlZFggPSAoY3VyLnNjcm9sbExlZnQgLSBzdGFydCkgKiBzY2FsZVg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVjdCA9IHsgbGVmdDogcmVjdC5sZWZ0IC0gbW92ZWRYLCB0b3A6IHJlY3QudG9wIC0gbW92ZWRZLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IHJlY3QucmlnaHQgLSBtb3ZlZFgsIGJvdHRvbTogcmVjdC5ib3R0b20gLSBtb3ZlZFkgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vdmVkWCAmJiBNYXRoLmFicyhtb3ZlZFggLSBtb3ZlWCkgPCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IFwibmVhcmVzdFwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW92ZWRZICYmIE1hdGguYWJzKG1vdmVkWSAtIG1vdmVZKSA8IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gXCJuZWFyZXN0XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvcClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmIChyZWN0LnRvcCA8IGJvdW5kaW5nLnRvcCB8fCByZWN0LmJvdHRvbSA+IGJvdW5kaW5nLmJvdHRvbSB8fFxuICAgICAgICAgICAgICAgIHJlY3QubGVmdCA8IGJvdW5kaW5nLmxlZnQgfHwgcmVjdC5yaWdodCA+IGJvdW5kaW5nLnJpZ2h0KVxuICAgICAgICAgICAgICAgIHJlY3QgPSB7IGxlZnQ6IE1hdGgubWF4KHJlY3QubGVmdCwgYm91bmRpbmcubGVmdCksIHJpZ2h0OiBNYXRoLm1pbihyZWN0LnJpZ2h0LCBib3VuZGluZy5yaWdodCksXG4gICAgICAgICAgICAgICAgICAgIHRvcDogTWF0aC5tYXgocmVjdC50b3AsIGJvdW5kaW5nLnRvcCksIGJvdHRvbTogTWF0aC5taW4ocmVjdC5ib3R0b20sIGJvdW5kaW5nLmJvdHRvbSkgfTtcbiAgICAgICAgICAgIGN1ciA9IGN1ci5hc3NpZ25lZFNsb3QgfHwgY3VyLnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VyLm5vZGVUeXBlID09IDExKSB7IC8vIEEgc2hhZG93IHJvb3RcbiAgICAgICAgICAgIGN1ciA9IGN1ci5ob3N0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzY3JvbGxhYmxlUGFyZW50cyhkb20pIHtcbiAgICBsZXQgZG9jID0gZG9tLm93bmVyRG9jdW1lbnQsIHgsIHk7XG4gICAgZm9yIChsZXQgY3VyID0gZG9tLnBhcmVudE5vZGU7IGN1cjspIHtcbiAgICAgICAgaWYgKGN1ciA9PSBkb2MuYm9keSB8fCAoeCAmJiB5KSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VyLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgIGlmICgheSAmJiBjdXIuc2Nyb2xsSGVpZ2h0ID4gY3VyLmNsaWVudEhlaWdodClcbiAgICAgICAgICAgICAgICB5ID0gY3VyO1xuICAgICAgICAgICAgaWYgKCF4ICYmIGN1ci5zY3JvbGxXaWR0aCA+IGN1ci5jbGllbnRXaWR0aClcbiAgICAgICAgICAgICAgICB4ID0gY3VyO1xuICAgICAgICAgICAgY3VyID0gY3VyLmFzc2lnbmVkU2xvdCB8fCBjdXIucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXIubm9kZVR5cGUgPT0gMTEpIHtcbiAgICAgICAgICAgIGN1ciA9IGN1ci5ob3N0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgeCwgeSB9O1xufVxuY2xhc3MgRE9NU2VsZWN0aW9uU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFuY2hvck5vZGUgPSBudWxsO1xuICAgICAgICB0aGlzLmFuY2hvck9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMuZm9jdXNOb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5mb2N1c09mZnNldCA9IDA7XG4gICAgfVxuICAgIGVxKGRvbVNlbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hbmNob3JOb2RlID09IGRvbVNlbC5hbmNob3JOb2RlICYmIHRoaXMuYW5jaG9yT2Zmc2V0ID09IGRvbVNlbC5hbmNob3JPZmZzZXQgJiZcbiAgICAgICAgICAgIHRoaXMuZm9jdXNOb2RlID09IGRvbVNlbC5mb2N1c05vZGUgJiYgdGhpcy5mb2N1c09mZnNldCA9PSBkb21TZWwuZm9jdXNPZmZzZXQ7XG4gICAgfVxuICAgIHNldFJhbmdlKHJhbmdlKSB7XG4gICAgICAgIGxldCB7IGFuY2hvck5vZGUsIGZvY3VzTm9kZSB9ID0gcmFuZ2U7XG4gICAgICAgIC8vIENsaXAgb2Zmc2V0cyB0byBub2RlIHNpemUgdG8gYXZvaWQgY3Jhc2hlcyB3aGVuIFNhZmFyaSByZXBvcnRzIGJvZ3VzIG9mZnNldHMgKCMxMTUyKVxuICAgICAgICB0aGlzLnNldChhbmNob3JOb2RlLCBNYXRoLm1pbihyYW5nZS5hbmNob3JPZmZzZXQsIGFuY2hvck5vZGUgPyBtYXhPZmZzZXQoYW5jaG9yTm9kZSkgOiAwKSwgZm9jdXNOb2RlLCBNYXRoLm1pbihyYW5nZS5mb2N1c09mZnNldCwgZm9jdXNOb2RlID8gbWF4T2Zmc2V0KGZvY3VzTm9kZSkgOiAwKSk7XG4gICAgfVxuICAgIHNldChhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQsIGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQpIHtcbiAgICAgICAgdGhpcy5hbmNob3JOb2RlID0gYW5jaG9yTm9kZTtcbiAgICAgICAgdGhpcy5hbmNob3JPZmZzZXQgPSBhbmNob3JPZmZzZXQ7XG4gICAgICAgIHRoaXMuZm9jdXNOb2RlID0gZm9jdXNOb2RlO1xuICAgICAgICB0aGlzLmZvY3VzT2Zmc2V0ID0gZm9jdXNPZmZzZXQ7XG4gICAgfVxufVxubGV0IHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQgPSBudWxsO1xuLy8gU2FmYXJpIDI2IGJyZWFrcyBwcmV2ZW50U2Nyb2xsIHN1cHBvcnRcbmlmIChicm93c2VyLnNhZmFyaSAmJiBicm93c2VyLnNhZmFyaV92ZXJzaW9uID49IDI2KVxuICAgIHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQgPSBmYWxzZTtcbi8vIEZlYXR1cmUtZGV0ZWN0cyBzdXBwb3J0IGZvciAuZm9jdXMoe3ByZXZlbnRTY3JvbGw6IHRydWV9KSwgYW5kIHVzZXNcbi8vIGEgZmFsbGJhY2sga2x1ZGdlIHdoZW4gbm90IHN1cHBvcnRlZC5cbmZ1bmN0aW9uIGZvY3VzUHJldmVudFNjcm9sbChkb20pIHtcbiAgICBpZiAoZG9tLnNldEFjdGl2ZSlcbiAgICAgICAgcmV0dXJuIGRvbS5zZXRBY3RpdmUoKTsgLy8gaW4gSUVcbiAgICBpZiAocHJldmVudFNjcm9sbFN1cHBvcnRlZClcbiAgICAgICAgcmV0dXJuIGRvbS5mb2N1cyhwcmV2ZW50U2Nyb2xsU3VwcG9ydGVkKTtcbiAgICBsZXQgc3RhY2sgPSBbXTtcbiAgICBmb3IgKGxldCBjdXIgPSBkb207IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgc3RhY2sucHVzaChjdXIsIGN1ci5zY3JvbGxUb3AsIGN1ci5zY3JvbGxMZWZ0KTtcbiAgICAgICAgaWYgKGN1ciA9PSBjdXIub3duZXJEb2N1bWVudClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBkb20uZm9jdXMocHJldmVudFNjcm9sbFN1cHBvcnRlZCA9PSBudWxsID8ge1xuICAgICAgICBnZXQgcHJldmVudFNjcm9sbCgpIHtcbiAgICAgICAgICAgIHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQgPSB7IHByZXZlbnRTY3JvbGw6IHRydWUgfTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfSA6IHVuZGVmaW5lZCk7XG4gICAgaWYgKCFwcmV2ZW50U2Nyb2xsU3VwcG9ydGVkKSB7XG4gICAgICAgIHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7KSB7XG4gICAgICAgICAgICBsZXQgZWx0ID0gc3RhY2tbaSsrXSwgdG9wID0gc3RhY2tbaSsrXSwgbGVmdCA9IHN0YWNrW2krK107XG4gICAgICAgICAgICBpZiAoZWx0LnNjcm9sbFRvcCAhPSB0b3ApXG4gICAgICAgICAgICAgICAgZWx0LnNjcm9sbFRvcCA9IHRvcDtcbiAgICAgICAgICAgIGlmIChlbHQuc2Nyb2xsTGVmdCAhPSBsZWZ0KVxuICAgICAgICAgICAgICAgIGVsdC5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBzY3JhdGNoUmFuZ2U7XG5mdW5jdGlvbiB0ZXh0UmFuZ2Uobm9kZSwgZnJvbSwgdG8gPSBmcm9tKSB7XG4gICAgbGV0IHJhbmdlID0gc2NyYXRjaFJhbmdlIHx8IChzY3JhdGNoUmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpKTtcbiAgICByYW5nZS5zZXRFbmQobm9kZSwgdG8pO1xuICAgIHJhbmdlLnNldFN0YXJ0KG5vZGUsIGZyb20pO1xuICAgIHJldHVybiByYW5nZTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoS2V5KGVsdCwgbmFtZSwgY29kZSwgbW9kcykge1xuICAgIGxldCBvcHRpb25zID0geyBrZXk6IG5hbWUsIGNvZGU6IG5hbWUsIGtleUNvZGU6IGNvZGUsIHdoaWNoOiBjb2RlLCBjYW5jZWxhYmxlOiB0cnVlIH07XG4gICAgaWYgKG1vZHMpXG4gICAgICAgICh7IGFsdEtleTogb3B0aW9ucy5hbHRLZXksIGN0cmxLZXk6IG9wdGlvbnMuY3RybEtleSwgc2hpZnRLZXk6IG9wdGlvbnMuc2hpZnRLZXksIG1ldGFLZXk6IG9wdGlvbnMubWV0YUtleSB9ID0gbW9kcyk7XG4gICAgbGV0IGRvd24gPSBuZXcgS2V5Ym9hcmRFdmVudChcImtleWRvd25cIiwgb3B0aW9ucyk7XG4gICAgZG93bi5zeW50aGV0aWMgPSB0cnVlO1xuICAgIGVsdC5kaXNwYXRjaEV2ZW50KGRvd24pO1xuICAgIGxldCB1cCA9IG5ldyBLZXlib2FyZEV2ZW50KFwia2V5dXBcIiwgb3B0aW9ucyk7XG4gICAgdXAuc3ludGhldGljID0gdHJ1ZTtcbiAgICBlbHQuZGlzcGF0Y2hFdmVudCh1cCk7XG4gICAgcmV0dXJuIGRvd24uZGVmYXVsdFByZXZlbnRlZCB8fCB1cC5kZWZhdWx0UHJldmVudGVkO1xufVxuZnVuY3Rpb24gZ2V0Um9vdChub2RlKSB7XG4gICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUgJiYgKG5vZGUubm9kZVR5cGUgPT0gOSB8fCBub2RlLm5vZGVUeXBlID09IDExICYmIG5vZGUuaG9zdCkpXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgbm9kZSA9IG5vZGUuYXNzaWduZWRTbG90IHx8IG5vZGUucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBhdEVsZW1lbnRTdGFydChkb2MsIHNlbGVjdGlvbikge1xuICAgIGxldCBub2RlID0gc2VsZWN0aW9uLmZvY3VzTm9kZSwgb2Zmc2V0ID0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuICAgIGlmICghbm9kZSB8fCBzZWxlY3Rpb24uYW5jaG9yTm9kZSAhPSBub2RlIHx8IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQgIT0gb2Zmc2V0KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gU2FmYXJpIGNhbiByZXBvcnQgYm9ndXMgb2Zmc2V0cyAoIzExNTIpXG4gICAgb2Zmc2V0ID0gTWF0aC5taW4ob2Zmc2V0LCBtYXhPZmZzZXQobm9kZSkpO1xuICAgIGZvciAoOzspIHtcbiAgICAgICAgaWYgKG9mZnNldCkge1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBsZXQgcHJldiA9IG5vZGUuY2hpbGROb2Rlc1tvZmZzZXQgLSAxXTtcbiAgICAgICAgICAgIGlmIChwcmV2LmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIpXG4gICAgICAgICAgICAgICAgb2Zmc2V0LS07XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlID0gcHJldjtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBtYXhPZmZzZXQobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZSA9PSBkb2MpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2Zmc2V0ID0gZG9tSW5kZXgobm9kZSk7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTY3JvbGxlZFRvQm90dG9tKGVsdCkge1xuICAgIHJldHVybiBlbHQuc2Nyb2xsVG9wID4gTWF0aC5tYXgoMSwgZWx0LnNjcm9sbEhlaWdodCAtIGVsdC5jbGllbnRIZWlnaHQgLSA0KTtcbn1cbmZ1bmN0aW9uIHRleHROb2RlQmVmb3JlKHN0YXJ0Tm9kZSwgc3RhcnRPZmZzZXQpIHtcbiAgICBmb3IgKGxldCBub2RlID0gc3RhcnROb2RlLCBvZmZzZXQgPSBzdGFydE9mZnNldDs7KSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMgJiYgb2Zmc2V0ID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgbm9kZTogbm9kZSwgb2Zmc2V0OiBvZmZzZXQgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgb2Zmc2V0ID4gMCkge1xuICAgICAgICAgICAgaWYgKG5vZGUuY29udGVudEVkaXRhYmxlID09IFwiZmFsc2VcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLmNoaWxkTm9kZXNbb2Zmc2V0IC0gMV07XG4gICAgICAgICAgICBvZmZzZXQgPSBtYXhPZmZzZXQobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlICYmICFpc0Jsb2NrRWxlbWVudChub2RlKSkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gZG9tSW5kZXgobm9kZSk7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0ZXh0Tm9kZUFmdGVyKHN0YXJ0Tm9kZSwgc3RhcnRPZmZzZXQpIHtcbiAgICBmb3IgKGxldCBub2RlID0gc3RhcnROb2RlLCBvZmZzZXQgPSBzdGFydE9mZnNldDs7KSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMgJiYgb2Zmc2V0IDwgbm9kZS5ub2RlVmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyBub2RlOiBub2RlLCBvZmZzZXQ6IG9mZnNldCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiBvZmZzZXQgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUuY2hpbGROb2Rlc1tvZmZzZXRdO1xuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUgJiYgIWlzQmxvY2tFbGVtZW50KG5vZGUpKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBkb21JbmRleChub2RlKSArIDE7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5jbGFzcyBET01Qb3Mge1xuICAgIGNvbnN0cnVjdG9yKG5vZGUsIG9mZnNldCwgcHJlY2lzZSA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHRoaXMucHJlY2lzZSA9IHByZWNpc2U7XG4gICAgfVxuICAgIHN0YXRpYyBiZWZvcmUoZG9tLCBwcmVjaXNlKSB7IHJldHVybiBuZXcgRE9NUG9zKGRvbS5wYXJlbnROb2RlLCBkb21JbmRleChkb20pLCBwcmVjaXNlKTsgfVxuICAgIHN0YXRpYyBhZnRlcihkb20sIHByZWNpc2UpIHsgcmV0dXJuIG5ldyBET01Qb3MoZG9tLnBhcmVudE5vZGUsIGRvbUluZGV4KGRvbSkgKyAxLCBwcmVjaXNlKTsgfVxufVxuXG4vKipcblVzZWQgdG8gaW5kaWNhdGUgW3RleHQgZGlyZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy50ZXh0RGlyZWN0aW9uKS5cbiovXG52YXIgRGlyZWN0aW9uID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRGlyZWN0aW9uKSB7XG4gICAgLy8gKFRoZXNlIGFyZSBjaG9zZW4gdG8gbWF0Y2ggdGhlIGJhc2UgbGV2ZWxzLCBpbiBiaWRpIGFsZ29yaXRobVxuICAgIC8vIHRlcm1zLCBvZiBzcGFucyBpbiB0aGF0IGRpcmVjdGlvbi4pXG4gICAgLyoqXG4gICAgTGVmdC10by1yaWdodC5cbiAgICAqL1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJMVFJcIl0gPSAwXSA9IFwiTFRSXCI7XG4gICAgLyoqXG4gICAgUmlnaHQtdG8tbGVmdC5cbiAgICAqL1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJSVExcIl0gPSAxXSA9IFwiUlRMXCI7XG5yZXR1cm4gRGlyZWN0aW9ufSkoRGlyZWN0aW9uIHx8IChEaXJlY3Rpb24gPSB7fSkpO1xuY29uc3QgTFRSID0gRGlyZWN0aW9uLkxUUiwgUlRMID0gRGlyZWN0aW9uLlJUTDtcbi8vIERlY29kZSBhIHN0cmluZyB3aXRoIGVhY2ggdHlwZSBlbmNvZGVkIGFzIGxvZzIodHlwZSlcbmZ1bmN0aW9uIGRlYyhzdHIpIHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspXG4gICAgICAgIHJlc3VsdC5wdXNoKDEgPDwgK3N0cltpXSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIENoYXJhY3RlciB0eXBlcyBmb3IgY29kZXBvaW50cyAwIHRvIDB4ZjhcbmNvbnN0IExvd1R5cGVzID0gLypAX19QVVJFX18qL2RlYyhcIjg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4NjY2ODg4ODg4Nzg3ODMzMzMzMzMzMzM3ODg4ODg4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA4ODg4ODgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg3ODY2NjY4ODg4MDg4ODg4NjYzMzgwODg4MzA4ODg4ODAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwODAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA4XCIpO1xuLy8gQ2hhcmFjdGVyIHR5cGVzIGZvciBjb2RlcG9pbnRzIDB4NjAwIHRvIDB4NmY5XG5jb25zdCBBcmFiaWNUeXBlcyA9IC8qQF9fUFVSRV9fKi9kZWMoXCI0NDQ0NDQ4ODI2NjI3Mjg4OTk5OTk5OTk5OTkyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI5OTk5OTk5OTk5OTk5OTk5OTk5OTk0NDQ0NDQ0NDQ0NjQ0MjIyODIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyOTk5OTk5OTQ5OTk5OTk5MjI5OTg5OTk5MjIzMzMzMzMzMzMzXCIpO1xuY29uc3QgQnJhY2tldHMgPSAvKkBfX1BVUkVfXyovT2JqZWN0LmNyZWF0ZShudWxsKSwgQnJhY2tldFN0YWNrID0gW107XG4vLyBUaGVyZSdzIGEgbG90IG1vcmUgaW5cbi8vIGh0dHBzOi8vd3d3LnVuaWNvZGUub3JnL1B1YmxpYy9VQ0QvbGF0ZXN0L3VjZC9CaWRpQnJhY2tldHMudHh0LFxuLy8gd2hpY2ggYXJlIGxlZnQgb3V0IHRvIGtlZXAgY29kZSBzaXplIGRvd24uXG5mb3IgKGxldCBwIG9mIFtcIigpXCIsIFwiW11cIiwgXCJ7fVwiXSkge1xuICAgIGxldCBsID0gLypAX19QVVJFX18qL3AuY2hhckNvZGVBdCgwKSwgciA9IC8qQF9fUFVSRV9fKi9wLmNoYXJDb2RlQXQoMSk7XG4gICAgQnJhY2tldHNbbF0gPSByO1xuICAgIEJyYWNrZXRzW3JdID0gLWw7XG59XG5mdW5jdGlvbiBjaGFyVHlwZShjaCkge1xuICAgIHJldHVybiBjaCA8PSAweGY3ID8gTG93VHlwZXNbY2hdIDpcbiAgICAgICAgMHg1OTAgPD0gY2ggJiYgY2ggPD0gMHg1ZjQgPyAyIC8qIFQuUiAqLyA6XG4gICAgICAgICAgICAweDYwMCA8PSBjaCAmJiBjaCA8PSAweDZmOSA/IEFyYWJpY1R5cGVzW2NoIC0gMHg2MDBdIDpcbiAgICAgICAgICAgICAgICAweDZlZSA8PSBjaCAmJiBjaCA8PSAweDhhYyA/IDQgLyogVC5BTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIDB4MjAwMCA8PSBjaCAmJiBjaCA8PSAweDIwMGMgPyAyNTYgLyogVC5OSSAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAweGZiNTAgPD0gY2ggJiYgY2ggPD0gMHhmZGZmID8gNCAvKiBULkFMICovIDogMSAvKiBULkwgKi87XG59XG5jb25zdCBCaWRpUkUgPSAvW1xcdTA1OTAtXFx1MDVmNFxcdTA2MDAtXFx1MDZmZlxcdTA3MDAtXFx1MDhhY1xcdWZiNTAtXFx1ZmRmZl0vO1xuLyoqXG5SZXByZXNlbnRzIGEgY29udGlndW91cyByYW5nZSBvZiB0ZXh0IHRoYXQgaGFzIGEgc2luZ2xlIGRpcmVjdGlvblxuKGFzIGluIGxlZnQtdG8tcmlnaHQgb3IgcmlnaHQtdG8tbGVmdCkuXG4qL1xuY2xhc3MgQmlkaVNwYW4ge1xuICAgIC8qKlxuICAgIFRoZSBkaXJlY3Rpb24gb2YgdGhpcyBzcGFuLlxuICAgICovXG4gICAgZ2V0IGRpcigpIHsgcmV0dXJuIHRoaXMubGV2ZWwgJSAyID8gUlRMIDogTFRSOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgc3RhcnQgb2YgdGhlIHNwYW4gKHJlbGF0aXZlIHRvIHRoZSBzdGFydCBvZiB0aGUgbGluZSkuXG4gICAgKi9cbiAgICBmcm9tLCBcbiAgICAvKipcbiAgICBUaGUgZW5kIG9mIHRoZSBzcGFuLlxuICAgICovXG4gICAgdG8sIFxuICAgIC8qKlxuICAgIFRoZSBbXCJiaWRpXG4gICAgbGV2ZWxcIl0oaHR0cHM6Ly91bmljb2RlLm9yZy9yZXBvcnRzL3RyOS8jQmFzaWNfRGlzcGxheV9BbGdvcml0aG0pXG4gICAgb2YgdGhlIHNwYW4gKGluIHRoaXMgY29udGV4dCwgMCBtZWFuc1xuICAgIGxlZnQtdG8tcmlnaHQsIDEgbWVhbnMgcmlnaHQtdG8tbGVmdCwgMiBtZWFucyBsZWZ0LXRvLXJpZ2h0XG4gICAgbnVtYmVyIGluc2lkZSByaWdodC10by1sZWZ0IHRleHQpLlxuICAgICovXG4gICAgbGV2ZWwpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2lkZShlbmQsIGRpcikgeyByZXR1cm4gKHRoaXMuZGlyID09IGRpcikgPT0gZW5kID8gdGhpcy50byA6IHRoaXMuZnJvbTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZm9yd2FyZChmb3J3YXJkLCBkaXIpIHsgcmV0dXJuIGZvcndhcmQgPT0gKHRoaXMuZGlyID09IGRpcik7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBmaW5kKG9yZGVyLCBpbmRleCwgbGV2ZWwsIGFzc29jKSB7XG4gICAgICAgIGxldCBtYXliZSA9IC0xO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3BhbiA9IG9yZGVyW2ldO1xuICAgICAgICAgICAgaWYgKHNwYW4uZnJvbSA8PSBpbmRleCAmJiBzcGFuLnRvID49IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKHNwYW4ubGV2ZWwgPT0gbGV2ZWwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gbXVsdGlwbGUgc3BhbnMgbWF0Y2gsIGlmIGFzc29jICE9IDAsIHRha2UgdGhlIG9uZSB0aGF0XG4gICAgICAgICAgICAgICAgLy8gY292ZXJzIHRoYXQgc2lkZSwgb3RoZXJ3aXNlIHRha2UgdGhlIG9uZSB3aXRoIHRoZSBtaW5pbXVtXG4gICAgICAgICAgICAgICAgLy8gbGV2ZWwuXG4gICAgICAgICAgICAgICAgaWYgKG1heWJlIDwgMCB8fCAoYXNzb2MgIT0gMCA/IChhc3NvYyA8IDAgPyBzcGFuLmZyb20gPCBpbmRleCA6IHNwYW4udG8gPiBpbmRleCkgOiBvcmRlclttYXliZV0ubGV2ZWwgPiBzcGFuLmxldmVsKSlcbiAgICAgICAgICAgICAgICAgICAgbWF5YmUgPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXliZSA8IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZVwiKTtcbiAgICAgICAgcmV0dXJuIG1heWJlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzb2xhdGVzRXEoYSwgYikge1xuICAgIGlmIChhLmxlbmd0aCAhPSBiLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgaUEgPSBhW2ldLCBpQiA9IGJbaV07XG4gICAgICAgIGlmIChpQS5mcm9tICE9IGlCLmZyb20gfHwgaUEudG8gIT0gaUIudG8gfHwgaUEuZGlyZWN0aW9uICE9IGlCLmRpcmVjdGlvbiB8fCAhaXNvbGF0ZXNFcShpQS5pbm5lciwgaUIuaW5uZXIpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vIFJldXNlZCBhcnJheSBvZiBjaGFyYWN0ZXIgdHlwZXNcbmNvbnN0IHR5cGVzID0gW107XG4vLyBGaWxsIGluIHRoZSBjaGFyYWN0ZXIgdHlwZXMgKGluIGB0eXBlc2ApIGZyb20gYGZyb21gIHRvIGB0b2AgYW5kXG4vLyBhcHBseSBXIG5vcm1hbGl6YXRpb24gcnVsZXMuXG5mdW5jdGlvbiBjb21wdXRlQ2hhclR5cGVzKGxpbmUsIHJGcm9tLCByVG8sIGlzb2xhdGVzLCBvdXRlclR5cGUpIHtcbiAgICBmb3IgKGxldCBpSSA9IDA7IGlJIDw9IGlzb2xhdGVzLmxlbmd0aDsgaUkrKykge1xuICAgICAgICBsZXQgZnJvbSA9IGlJID8gaXNvbGF0ZXNbaUkgLSAxXS50byA6IHJGcm9tLCB0byA9IGlJIDwgaXNvbGF0ZXMubGVuZ3RoID8gaXNvbGF0ZXNbaUldLmZyb20gOiByVG87XG4gICAgICAgIGxldCBwcmV2VHlwZSA9IGlJID8gMjU2IC8qIFQuTkkgKi8gOiBvdXRlclR5cGU7XG4gICAgICAgIC8vIFcxLiBFeGFtaW5lIGVhY2ggbm9uLXNwYWNpbmcgbWFyayAoTlNNKSBpbiB0aGUgbGV2ZWwgcnVuLCBhbmRcbiAgICAgICAgLy8gY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBOU00gdG8gdGhlIHR5cGUgb2YgdGhlIHByZXZpb3VzXG4gICAgICAgIC8vIGNoYXJhY3Rlci4gSWYgdGhlIE5TTSBpcyBhdCB0aGUgc3RhcnQgb2YgdGhlIGxldmVsIHJ1biwgaXQgd2lsbFxuICAgICAgICAvLyBnZXQgdGhlIHR5cGUgb2Ygc29yLlxuICAgICAgICAvLyBXMi4gU2VhcmNoIGJhY2t3YXJkcyBmcm9tIGVhY2ggaW5zdGFuY2Ugb2YgYSBFdXJvcGVhbiBudW1iZXJcbiAgICAgICAgLy8gdW50aWwgdGhlIGZpcnN0IHN0cm9uZyB0eXBlIChSLCBMLCBBTCwgb3Igc29yKSBpcyBmb3VuZC4gSWYgYW5cbiAgICAgICAgLy8gQUwgaXMgZm91bmQsIGNoYW5nZSB0aGUgdHlwZSBvZiB0aGUgRXVyb3BlYW4gbnVtYmVyIHRvIEFyYWJpY1xuICAgICAgICAvLyBudW1iZXIuXG4gICAgICAgIC8vIFczLiBDaGFuZ2UgYWxsIEFMcyB0byBSLlxuICAgICAgICAvLyAoTGVmdCBhZnRlciB0aGlzOiBMLCBSLCBFTiwgQU4sIEVULCBDUywgTkkpXG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tLCBwcmV2ID0gcHJldlR5cGUsIHByZXZTdHJvbmcgPSBwcmV2VHlwZTsgaSA8IHRvOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB0eXBlID0gY2hhclR5cGUobGluZS5jaGFyQ29kZUF0KGkpKTtcbiAgICAgICAgICAgIGlmICh0eXBlID09IDUxMiAvKiBULk5TTSAqLylcbiAgICAgICAgICAgICAgICB0eXBlID0gcHJldjtcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gOCAvKiBULkVOICovICYmIHByZXZTdHJvbmcgPT0gNCAvKiBULkFMICovKVxuICAgICAgICAgICAgICAgIHR5cGUgPSAxNiAvKiBULkFOICovO1xuICAgICAgICAgICAgdHlwZXNbaV0gPSB0eXBlID09IDQgLyogVC5BTCAqLyA/IDIgLyogVC5SICovIDogdHlwZTtcbiAgICAgICAgICAgIGlmICh0eXBlICYgNyAvKiBULlN0cm9uZyAqLylcbiAgICAgICAgICAgICAgICBwcmV2U3Ryb25nID0gdHlwZTtcbiAgICAgICAgICAgIHByZXYgPSB0eXBlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFc1LiBBIHNlcXVlbmNlIG9mIEV1cm9wZWFuIHRlcm1pbmF0b3JzIGFkamFjZW50IHRvIEV1cm9wZWFuXG4gICAgICAgIC8vIG51bWJlcnMgY2hhbmdlcyB0byBhbGwgRXVyb3BlYW4gbnVtYmVycy5cbiAgICAgICAgLy8gVzYuIE90aGVyd2lzZSwgc2VwYXJhdG9ycyBhbmQgdGVybWluYXRvcnMgY2hhbmdlIHRvIE90aGVyXG4gICAgICAgIC8vIE5ldXRyYWwuXG4gICAgICAgIC8vIFc3LiBTZWFyY2ggYmFja3dhcmRzIGZyb20gZWFjaCBpbnN0YW5jZSBvZiBhIEV1cm9wZWFuIG51bWJlclxuICAgICAgICAvLyB1bnRpbCB0aGUgZmlyc3Qgc3Ryb25nIHR5cGUgKFIsIEwsIG9yIHNvcikgaXMgZm91bmQuIElmIGFuIEwgaXNcbiAgICAgICAgLy8gZm91bmQsIHRoZW4gY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBFdXJvcGVhbiBudW1iZXIgdG8gTC5cbiAgICAgICAgLy8gKExlZnQgYWZ0ZXIgdGhpczogTCwgUiwgRU4rQU4sIE5JKVxuICAgICAgICBmb3IgKGxldCBpID0gZnJvbSwgcHJldiA9IHByZXZUeXBlLCBwcmV2U3Ryb25nID0gcHJldlR5cGU7IGkgPCB0bzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2ldO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gMTI4IC8qIFQuQ1MgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA8IHRvIC0gMSAmJiBwcmV2ID09IHR5cGVzW2kgKyAxXSAmJiAocHJldiAmIDI0IC8qIFQuTnVtICovKSlcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHR5cGVzW2ldID0gcHJldjtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHR5cGVzW2ldID0gMjU2IC8qIFQuTkkgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IDY0IC8qIFQuRVQgKi8pIHtcbiAgICAgICAgICAgICAgICBsZXQgZW5kID0gaSArIDE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGVuZCA8IHRvICYmIHR5cGVzW2VuZF0gPT0gNjQgLyogVC5FVCAqLylcbiAgICAgICAgICAgICAgICAgICAgZW5kKys7XG4gICAgICAgICAgICAgICAgbGV0IHJlcGxhY2UgPSAoaSAmJiBwcmV2ID09IDggLyogVC5FTiAqLykgfHwgKGVuZCA8IHJUbyAmJiB0eXBlc1tlbmRdID09IDggLyogVC5FTiAqLykgPyAocHJldlN0cm9uZyA9PSAxIC8qIFQuTCAqLyA/IDEgLyogVC5MICovIDogOCAvKiBULkVOICovKSA6IDI1NiAvKiBULk5JICovO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpOyBqIDwgZW5kOyBqKyspXG4gICAgICAgICAgICAgICAgICAgIHR5cGVzW2pdID0gcmVwbGFjZTtcbiAgICAgICAgICAgICAgICBpID0gZW5kIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gOCAvKiBULkVOICovICYmIHByZXZTdHJvbmcgPT0gMSAvKiBULkwgKi8pIHtcbiAgICAgICAgICAgICAgICB0eXBlc1tpXSA9IDEgLyogVC5MICovO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldiA9IHR5cGU7XG4gICAgICAgICAgICBpZiAodHlwZSAmIDcgLyogVC5TdHJvbmcgKi8pXG4gICAgICAgICAgICAgICAgcHJldlN0cm9uZyA9IHR5cGU7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBQcm9jZXNzIGJyYWNrZXRzIHRocm91Z2hvdXQgYSBydW4gc2VxdWVuY2UuXG5mdW5jdGlvbiBwcm9jZXNzQnJhY2tldFBhaXJzKGxpbmUsIHJGcm9tLCByVG8sIGlzb2xhdGVzLCBvdXRlclR5cGUpIHtcbiAgICBsZXQgb3Bwb3NpdGVUeXBlID0gb3V0ZXJUeXBlID09IDEgLyogVC5MICovID8gMiAvKiBULlIgKi8gOiAxIC8qIFQuTCAqLztcbiAgICBmb3IgKGxldCBpSSA9IDAsIHNJID0gMCwgY29udGV4dCA9IDA7IGlJIDw9IGlzb2xhdGVzLmxlbmd0aDsgaUkrKykge1xuICAgICAgICBsZXQgZnJvbSA9IGlJID8gaXNvbGF0ZXNbaUkgLSAxXS50byA6IHJGcm9tLCB0byA9IGlJIDwgaXNvbGF0ZXMubGVuZ3RoID8gaXNvbGF0ZXNbaUldLmZyb20gOiByVG87XG4gICAgICAgIC8vIE4wLiBQcm9jZXNzIGJyYWNrZXQgcGFpcnMgaW4gYW4gaXNvbGF0aW5nIHJ1biBzZXF1ZW5jZVxuICAgICAgICAvLyBzZXF1ZW50aWFsbHkgaW4gdGhlIGxvZ2ljYWwgb3JkZXIgb2YgdGhlIHRleHQgcG9zaXRpb25zIG9mIHRoZVxuICAgICAgICAvLyBvcGVuaW5nIHBhaXJlZCBicmFja2V0cyB1c2luZyB0aGUgbG9naWMgZ2l2ZW4gYmVsb3cuIFdpdGhpbiB0aGlzXG4gICAgICAgIC8vIHNjb3BlLCBiaWRpcmVjdGlvbmFsIHR5cGVzIEVOIGFuZCBBTiBhcmUgdHJlYXRlZCBhcyBSLlxuICAgICAgICBmb3IgKGxldCBpID0gZnJvbSwgY2gsIGJyLCB0eXBlOyBpIDwgdG87IGkrKykge1xuICAgICAgICAgICAgLy8gS2VlcHMgW3N0YXJ0SW5kZXgsIHR5cGUsIHN0cm9uZ1NlZW5dIHRyaXBsZXMgZm9yIGVhY2ggb3BlblxuICAgICAgICAgICAgLy8gYnJhY2tldCBvbiBCcmFja2V0U3RhY2suXG4gICAgICAgICAgICBpZiAoYnIgPSBCcmFja2V0c1tjaCA9IGxpbmUuY2hhckNvZGVBdChpKV0pIHtcbiAgICAgICAgICAgICAgICBpZiAoYnIgPCAwKSB7IC8vIENsb3NpbmcgYnJhY2tldFxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzSiA9IHNJIC0gMzsgc0ogPj0gMDsgc0ogLT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEJyYWNrZXRTdGFja1tzSiArIDFdID09IC1icikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmbGFncyA9IEJyYWNrZXRTdGFja1tzSiArIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0eXBlID0gKGZsYWdzICYgMiAvKiBCcmFja2V0ZWQuRW1iZWRJbnNpZGUgKi8pID8gb3V0ZXJUeXBlIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIShmbGFncyAmIDQgLyogQnJhY2tldGVkLk9wcG9zaXRlSW5zaWRlICovKSA/IDAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZsYWdzICYgMSAvKiBCcmFja2V0ZWQuT3Bwb3NpdGVCZWZvcmUgKi8pID8gb3Bwb3NpdGVUeXBlIDogb3V0ZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlc1tpXSA9IHR5cGVzW0JyYWNrZXRTdGFja1tzSl1dID0gdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzSSA9IHNKO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKEJyYWNrZXRTdGFjay5sZW5ndGggPT0gMTg5IC8qIEJyYWNrZXRlZC5NYXhEZXB0aCAqLykge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEJyYWNrZXRTdGFja1tzSSsrXSA9IGk7XG4gICAgICAgICAgICAgICAgICAgIEJyYWNrZXRTdGFja1tzSSsrXSA9IGNoO1xuICAgICAgICAgICAgICAgICAgICBCcmFja2V0U3RhY2tbc0krK10gPSBjb250ZXh0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCh0eXBlID0gdHlwZXNbaV0pID09IDIgLyogVC5SICovIHx8IHR5cGUgPT0gMSAvKiBULkwgKi8pIHtcbiAgICAgICAgICAgICAgICBsZXQgZW1iZWQgPSB0eXBlID09IG91dGVyVHlwZTtcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gZW1iZWQgPyAwIDogMSAvKiBCcmFja2V0ZWQuT3Bwb3NpdGVCZWZvcmUgKi87XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc0ogPSBzSSAtIDM7IHNKID49IDA7IHNKIC09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ciA9IEJyYWNrZXRTdGFja1tzSiArIDJdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VyICYgMiAvKiBCcmFja2V0ZWQuRW1iZWRJbnNpZGUgKi8pXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVtYmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBCcmFja2V0U3RhY2tbc0ogKyAyXSB8PSAyIC8qIEJyYWNrZXRlZC5FbWJlZEluc2lkZSAqLztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXIgJiA0IC8qIEJyYWNrZXRlZC5PcHBvc2l0ZUluc2lkZSAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIEJyYWNrZXRTdGFja1tzSiArIDJdIHw9IDQgLyogQnJhY2tldGVkLk9wcG9zaXRlSW5zaWRlICovO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gcHJvY2Vzc05ldXRyYWxzKHJGcm9tLCByVG8sIGlzb2xhdGVzLCBvdXRlclR5cGUpIHtcbiAgICBmb3IgKGxldCBpSSA9IDAsIHByZXYgPSBvdXRlclR5cGU7IGlJIDw9IGlzb2xhdGVzLmxlbmd0aDsgaUkrKykge1xuICAgICAgICBsZXQgZnJvbSA9IGlJID8gaXNvbGF0ZXNbaUkgLSAxXS50byA6IHJGcm9tLCB0byA9IGlJIDwgaXNvbGF0ZXMubGVuZ3RoID8gaXNvbGF0ZXNbaUldLmZyb20gOiByVG87XG4gICAgICAgIC8vIE4xLiBBIHNlcXVlbmNlIG9mIG5ldXRyYWxzIHRha2VzIHRoZSBkaXJlY3Rpb24gb2YgdGhlXG4gICAgICAgIC8vIHN1cnJvdW5kaW5nIHN0cm9uZyB0ZXh0IGlmIHRoZSB0ZXh0IG9uIGJvdGggc2lkZXMgaGFzIHRoZSBzYW1lXG4gICAgICAgIC8vIGRpcmVjdGlvbi4gRXVyb3BlYW4gYW5kIEFyYWJpYyBudW1iZXJzIGFjdCBhcyBpZiB0aGV5IHdlcmUgUiBpblxuICAgICAgICAvLyB0ZXJtcyBvZiB0aGVpciBpbmZsdWVuY2Ugb24gbmV1dHJhbHMuIFN0YXJ0LW9mLWxldmVsLXJ1biAoc29yKVxuICAgICAgICAvLyBhbmQgZW5kLW9mLWxldmVsLXJ1biAoZW9yKSBhcmUgdXNlZCBhdCBsZXZlbCBydW4gYm91bmRhcmllcy5cbiAgICAgICAgLy8gTjIuIEFueSByZW1haW5pbmcgbmV1dHJhbHMgdGFrZSB0aGUgZW1iZWRkaW5nIGRpcmVjdGlvbi5cbiAgICAgICAgLy8gKExlZnQgYWZ0ZXIgdGhpczogTCwgUiwgRU4rQU4pXG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87KSB7XG4gICAgICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2ldO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gMjU2IC8qIFQuTkkgKi8pIHtcbiAgICAgICAgICAgICAgICBsZXQgZW5kID0gaSArIDE7XG4gICAgICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW5kID09IHRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaUkgPT0gaXNvbGF0ZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gaXNvbGF0ZXNbaUkrK10udG87XG4gICAgICAgICAgICAgICAgICAgICAgICB0byA9IGlJIDwgaXNvbGF0ZXMubGVuZ3RoID8gaXNvbGF0ZXNbaUldLmZyb20gOiByVG87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZXNbZW5kXSA9PSAyNTYgLyogVC5OSSAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgYmVmb3JlTCA9IHByZXYgPT0gMSAvKiBULkwgKi87XG4gICAgICAgICAgICAgICAgbGV0IGFmdGVyTCA9IChlbmQgPCByVG8gPyB0eXBlc1tlbmRdIDogb3V0ZXJUeXBlKSA9PSAxIC8qIFQuTCAqLztcbiAgICAgICAgICAgICAgICBsZXQgcmVwbGFjZSA9IGJlZm9yZUwgPT0gYWZ0ZXJMID8gKGJlZm9yZUwgPyAxIC8qIFQuTCAqLyA6IDIgLyogVC5SICovKSA6IG91dGVyVHlwZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gZW5kLCBqSSA9IGlJLCBmcm9tSiA9IGpJID8gaXNvbGF0ZXNbakkgLSAxXS50byA6IHJGcm9tOyBqID4gaTspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGogPT0gZnJvbUopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGogPSBpc29sYXRlc1stLWpJXS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUogPSBqSSA/IGlzb2xhdGVzW2pJIC0gMV0udG8gOiByRnJvbTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0eXBlc1stLWpdID0gcmVwbGFjZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSA9IGVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXYgPSB0eXBlO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIEZpbmQgdGhlIGNvbnRpZ3VvdXMgcmFuZ2VzIG9mIGNoYXJhY3RlciB0eXBlcyBpbiBhIGdpdmVuIHJhbmdlLCBhbmRcbi8vIGVtaXQgc3BhbnMgZm9yIHRoZW0uIEZsaXAgdGhlIG9yZGVyIG9mIHRoZSBzcGFucyBhcyBhcHByb3ByaWF0ZVxuLy8gYmFzZWQgb24gdGhlIGxldmVsLCBhbmQgY2FsbCB0aHJvdWdoIHRvIGNvbXB1dGUgdGhlIHNwYW5zIGZvclxuLy8gaXNvbGF0ZXMgYXQgdGhlIHByb3BlciBwb2ludC5cbmZ1bmN0aW9uIGVtaXRTcGFucyhsaW5lLCBmcm9tLCB0bywgbGV2ZWwsIGJhc2VMZXZlbCwgaXNvbGF0ZXMsIG9yZGVyKSB7XG4gICAgbGV0IG91clR5cGUgPSBsZXZlbCAlIDIgPyAyIC8qIFQuUiAqLyA6IDEgLyogVC5MICovO1xuICAgIGlmICgobGV2ZWwgJSAyKSA9PSAoYmFzZUxldmVsICUgMikpIHsgLy8gU2FtZSBkaXIgYXMgYmFzZSBkaXJlY3Rpb24sIGRvbid0IGZsaXBcbiAgICAgICAgZm9yIChsZXQgaUNoID0gZnJvbSwgaUkgPSAwOyBpQ2ggPCB0bzspIHtcbiAgICAgICAgICAgIC8vIFNjYW4gYSBzZWN0aW9uIG9mIGNoYXJhY3RlcnMgaW4gZGlyZWN0aW9uIG91clR5cGUsIHVubGVzc1xuICAgICAgICAgICAgLy8gdGhlcmUncyBhbm90aGVyIHR5cGUgb2YgY2hhciByaWdodCBhZnRlciBpQ2gsIGluIHdoaWNoIGNhc2VcbiAgICAgICAgICAgIC8vIHdlIHNjYW4gYSBzZWN0aW9uIG9mIG90aGVyIGNoYXJhY3RlcnMgKHdoaWNoLCBpZiBvdXJUeXBlID09XG4gICAgICAgICAgICAvLyBULkwsIG1heSBjb250YWluIGJvdGggVC5SIGFuZCBULkFOIGNoYXJzKS5cbiAgICAgICAgICAgIGxldCBzYW1lRGlyID0gdHJ1ZSwgaXNOdW0gPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChpSSA9PSBpc29sYXRlcy5sZW5ndGggfHwgaUNoIDwgaXNvbGF0ZXNbaUldLmZyb20pIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHR5cGVzW2lDaF07XG4gICAgICAgICAgICAgICAgaWYgKG5leHQgIT0gb3VyVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBzYW1lRGlyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlzTnVtID0gbmV4dCA9PSAxNiAvKiBULkFOICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEhvbGRzIGFuIGFycmF5IG9mIGlzb2xhdGVzIHRvIHBhc3MgdG8gYSByZWN1cnNpdmUgY2FsbCBpZiB3ZVxuICAgICAgICAgICAgLy8gbXVzdCByZWN1cnNlICh0byBkaXN0aW5ndWlzaCBULkFOIGluc2lkZSBhbiBSVEwgc2VjdGlvbiBpblxuICAgICAgICAgICAgLy8gTFRSIHRleHQpLCBudWxsIGlmIHdlIGNhbiBlbWl0IGRpcmVjdGx5XG4gICAgICAgICAgICBsZXQgcmVjdXJzZSA9ICFzYW1lRGlyICYmIG91clR5cGUgPT0gMSAvKiBULkwgKi8gPyBbXSA6IG51bGw7XG4gICAgICAgICAgICBsZXQgbG9jYWxMZXZlbCA9IHNhbWVEaXIgPyBsZXZlbCA6IGxldmVsICsgMTtcbiAgICAgICAgICAgIGxldCBpU2NhbiA9IGlDaDtcbiAgICAgICAgICAgIHJ1bjogZm9yICg7Oykge1xuICAgICAgICAgICAgICAgIGlmIChpSSA8IGlzb2xhdGVzLmxlbmd0aCAmJiBpU2NhbiA9PSBpc29sYXRlc1tpSV0uZnJvbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOdW0pXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBydW47XG4gICAgICAgICAgICAgICAgICAgIGxldCBpc28gPSBpc29sYXRlc1tpSV07XG4gICAgICAgICAgICAgICAgICAgIC8vIFNjYW4gYWhlYWQgdG8gdmVyaWZ5IHRoYXQgdGhlcmUgaXMgYW5vdGhlciBjaGFyIGluIHRoaXMgZGlyIGFmdGVyIHRoZSBpc29sYXRlKHMpXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2FtZURpcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHVwdG8gPSBpc28udG8sIGpJID0gaUkgKyAxOzspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXB0byA9PSB0bylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgcnVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqSSA8IGlzb2xhdGVzLmxlbmd0aCAmJiBpc29sYXRlc1tqSV0uZnJvbSA9PSB1cHRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHRvID0gaXNvbGF0ZXNbakkrK10udG87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZXNbdXB0b10gPT0gb3VyVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgcnVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlJKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWN1cnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNlLnB1c2goaXNvKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc28uZnJvbSA+IGlDaClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbihpQ2gsIGlzby5mcm9tLCBsb2NhbExldmVsKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlyU3dhcCA9IChpc28uZGlyZWN0aW9uID09IExUUikgIT0gIShsb2NhbExldmVsICUgMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlU2VjdGlvbk9yZGVyKGxpbmUsIGRpclN3YXAgPyBsZXZlbCArIDEgOiBsZXZlbCwgYmFzZUxldmVsLCBpc28uaW5uZXIsIGlzby5mcm9tLCBpc28udG8sIG9yZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlDaCA9IGlzby50bztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpU2NhbiA9IGlzby50bztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaVNjYW4gPT0gdG8gfHwgKHNhbWVEaXIgPyB0eXBlc1tpU2Nhbl0gIT0gb3VyVHlwZSA6IHR5cGVzW2lTY2FuXSA9PSBvdXJUeXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlTY2FuKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlY3Vyc2UpXG4gICAgICAgICAgICAgICAgZW1pdFNwYW5zKGxpbmUsIGlDaCwgaVNjYW4sIGxldmVsICsgMSwgYmFzZUxldmVsLCByZWN1cnNlLCBvcmRlcik7XG4gICAgICAgICAgICBlbHNlIGlmIChpQ2ggPCBpU2NhbilcbiAgICAgICAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbihpQ2gsIGlTY2FuLCBsb2NhbExldmVsKSk7XG4gICAgICAgICAgICBpQ2ggPSBpU2NhbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gSXRlcmF0ZSBpbiByZXZlcnNlIHRvIGZsaXAgdGhlIHNwYW4gb3JkZXIuIFNhbWUgY29kZSBhZ2FpbiwgYnV0XG4gICAgICAgIC8vIGdvaW5nIGZyb20gdGhlIGJhY2sgb2YgdGhlIHNlY3Rpb24gdG8gdGhlIGZyb250XG4gICAgICAgIGZvciAobGV0IGlDaCA9IHRvLCBpSSA9IGlzb2xhdGVzLmxlbmd0aDsgaUNoID4gZnJvbTspIHtcbiAgICAgICAgICAgIGxldCBzYW1lRGlyID0gdHJ1ZSwgaXNOdW0gPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghaUkgfHwgaUNoID4gaXNvbGF0ZXNbaUkgLSAxXS50bykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gdHlwZXNbaUNoIC0gMV07XG4gICAgICAgICAgICAgICAgaWYgKG5leHQgIT0gb3VyVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBzYW1lRGlyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlzTnVtID0gbmV4dCA9PSAxNiAvKiBULkFOICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByZWN1cnNlID0gIXNhbWVEaXIgJiYgb3VyVHlwZSA9PSAxIC8qIFQuTCAqLyA/IFtdIDogbnVsbDtcbiAgICAgICAgICAgIGxldCBsb2NhbExldmVsID0gc2FtZURpciA/IGxldmVsIDogbGV2ZWwgKyAxO1xuICAgICAgICAgICAgbGV0IGlTY2FuID0gaUNoO1xuICAgICAgICAgICAgcnVuOiBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgaWYgKGlJICYmIGlTY2FuID09IGlzb2xhdGVzW2lJIC0gMV0udG8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTnVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgcnVuO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaXNvID0gaXNvbGF0ZXNbLS1pSV07XG4gICAgICAgICAgICAgICAgICAgIC8vIFNjYW4gYWhlYWQgdG8gdmVyaWZ5IHRoYXQgdGhlcmUgaXMgYW5vdGhlciBjaGFyIGluIHRoaXMgZGlyIGFmdGVyIHRoZSBpc29sYXRlKHMpXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2FtZURpcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHVwdG8gPSBpc28uZnJvbSwgakkgPSBpSTs7KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwdG8gPT0gZnJvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgcnVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqSSAmJiBpc29sYXRlc1tqSSAtIDFdLnRvID09IHVwdG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwdG8gPSBpc29sYXRlc1stLWpJXS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVzW3VwdG8gLSAxXSA9PSBvdXJUeXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBydW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3Vyc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2UucHVzaChpc28pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzby50byA8IGlDaClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3Bhbihpc28udG8sIGlDaCwgbG9jYWxMZXZlbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpclN3YXAgPSAoaXNvLmRpcmVjdGlvbiA9PSBMVFIpICE9ICEobG9jYWxMZXZlbCAlIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZVNlY3Rpb25PcmRlcihsaW5lLCBkaXJTd2FwID8gbGV2ZWwgKyAxIDogbGV2ZWwsIGJhc2VMZXZlbCwgaXNvLmlubmVyLCBpc28uZnJvbSwgaXNvLnRvLCBvcmRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpQ2ggPSBpc28uZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpU2NhbiA9IGlzby5mcm9tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpU2NhbiA9PSBmcm9tIHx8IChzYW1lRGlyID8gdHlwZXNbaVNjYW4gLSAxXSAhPSBvdXJUeXBlIDogdHlwZXNbaVNjYW4gLSAxXSA9PSBvdXJUeXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlTY2FuLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlY3Vyc2UpXG4gICAgICAgICAgICAgICAgZW1pdFNwYW5zKGxpbmUsIGlTY2FuLCBpQ2gsIGxldmVsICsgMSwgYmFzZUxldmVsLCByZWN1cnNlLCBvcmRlcik7XG4gICAgICAgICAgICBlbHNlIGlmIChpU2NhbiA8IGlDaClcbiAgICAgICAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbihpU2NhbiwgaUNoLCBsb2NhbExldmVsKSk7XG4gICAgICAgICAgICBpQ2ggPSBpU2NhbjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXB1dGVTZWN0aW9uT3JkZXIobGluZSwgbGV2ZWwsIGJhc2VMZXZlbCwgaXNvbGF0ZXMsIGZyb20sIHRvLCBvcmRlcikge1xuICAgIGxldCBvdXRlclR5cGUgPSAobGV2ZWwgJSAyID8gMiAvKiBULlIgKi8gOiAxIC8qIFQuTCAqLyk7XG4gICAgY29tcHV0ZUNoYXJUeXBlcyhsaW5lLCBmcm9tLCB0bywgaXNvbGF0ZXMsIG91dGVyVHlwZSk7XG4gICAgcHJvY2Vzc0JyYWNrZXRQYWlycyhsaW5lLCBmcm9tLCB0bywgaXNvbGF0ZXMsIG91dGVyVHlwZSk7XG4gICAgcHJvY2Vzc05ldXRyYWxzKGZyb20sIHRvLCBpc29sYXRlcywgb3V0ZXJUeXBlKTtcbiAgICBlbWl0U3BhbnMobGluZSwgZnJvbSwgdG8sIGxldmVsLCBiYXNlTGV2ZWwsIGlzb2xhdGVzLCBvcmRlcik7XG59XG5mdW5jdGlvbiBjb21wdXRlT3JkZXIobGluZSwgZGlyZWN0aW9uLCBpc29sYXRlcykge1xuICAgIGlmICghbGluZSlcbiAgICAgICAgcmV0dXJuIFtuZXcgQmlkaVNwYW4oMCwgMCwgZGlyZWN0aW9uID09IFJUTCA/IDEgOiAwKV07XG4gICAgaWYgKGRpcmVjdGlvbiA9PSBMVFIgJiYgIWlzb2xhdGVzLmxlbmd0aCAmJiAhQmlkaVJFLnRlc3QobGluZSkpXG4gICAgICAgIHJldHVybiB0cml2aWFsT3JkZXIobGluZS5sZW5ndGgpO1xuICAgIGlmIChpc29sYXRlcy5sZW5ndGgpXG4gICAgICAgIHdoaWxlIChsaW5lLmxlbmd0aCA+IHR5cGVzLmxlbmd0aClcbiAgICAgICAgICAgIHR5cGVzW3R5cGVzLmxlbmd0aF0gPSAyNTYgLyogVC5OSSAqLzsgLy8gTWFrZSBzdXJlIHR5cGVzIGFycmF5IGhhcyBubyBnYXBzXG4gICAgbGV0IG9yZGVyID0gW10sIGxldmVsID0gZGlyZWN0aW9uID09IExUUiA/IDAgOiAxO1xuICAgIGNvbXB1dGVTZWN0aW9uT3JkZXIobGluZSwgbGV2ZWwsIGxldmVsLCBpc29sYXRlcywgMCwgbGluZS5sZW5ndGgsIG9yZGVyKTtcbiAgICByZXR1cm4gb3JkZXI7XG59XG5mdW5jdGlvbiB0cml2aWFsT3JkZXIobGVuZ3RoKSB7XG4gICAgcmV0dXJuIFtuZXcgQmlkaVNwYW4oMCwgbGVuZ3RoLCAwKV07XG59XG5sZXQgbW92ZWRPdmVyID0gXCJcIjtcbi8vIFRoaXMgaW1wbGVtZW50YXRpb24gbW92ZXMgc3RyaWN0bHkgdmlzdWFsbHksIHdpdGhvdXQgY29uY2VybiBmb3IgYVxuLy8gdHJhdmVyc2FsIHZpc2l0aW5nIGV2ZXJ5IGxvZ2ljYWwgcG9zaXRpb24gaW4gdGhlIHN0cmluZy4gSXQgd2lsbFxuLy8gc3RpbGwgZG8gc28gZm9yIHNpbXBsZSBpbnB1dCwgYnV0IHNpdHVhdGlvbnMgbGlrZSBtdWx0aXBsZSBpc29sYXRlc1xuLy8gd2l0aCB0aGUgc2FtZSBsZXZlbCBuZXh0IHRvIGVhY2ggb3RoZXIsIG9yIHRleHQgZ29pbmcgYWdhaW5zdCB0aGVcbi8vIG1haW4gZGlyIGF0IHRoZSBlbmQgb2YgdGhlIGxpbmUsIHdpbGwgbWFrZSBzb21lIHBvc2l0aW9uc1xuLy8gdW5yZWFjaGFibGUgd2l0aCB0aGlzIG1vdGlvbi4gRWFjaCB2aXNpYmxlIGN1cnNvciBwb3NpdGlvbiB3aWxsXG4vLyBjb3JyZXNwb25kIHRvIHRoZSBsb3dlci1sZXZlbCBiaWRpIHNwYW4gdGhhdCB0b3VjaGVzIGl0LlxuLy9cbi8vIFRoZSBhbHRlcm5hdGl2ZSB3b3VsZCBiZSB0byBzb2x2ZSBhbiBvcmRlciBnbG9iYWxseSBmb3IgYSBnaXZlblxuLy8gbGluZSwgbWFraW5nIHN1cmUgdGhhdCBpdCBpbmNsdWRlcyBldmVyeSBwb3NpdGlvbiwgYnV0IHRoYXQgd291bGRcbi8vIHJlcXVpcmUgYXNzb2NpYXRpbmcgbm9uLWNhbm9uaWNhbCAoaGlnaGVyIGJpZGkgc3BhbiBsZXZlbClcbi8vIHBvc2l0aW9ucyB3aXRoIGEgZ2l2ZW4gdmlzdWFsIHBvc2l0aW9uLCB3aGljaCBpcyBsaWtlbHkgdG8gY29uZnVzZVxuLy8gcGVvcGxlLiAoQW5kIHdvdWxkIGdlbmVyYWxseSBiZSBhIGxvdCBtb3JlIGNvbXBsaWNhdGVkLilcbmZ1bmN0aW9uIG1vdmVWaXN1YWxseShsaW5lLCBvcmRlciwgZGlyLCBzdGFydCwgZm9yd2FyZCkge1xuICAgIHZhciBfYTtcbiAgICBsZXQgc3RhcnRJbmRleCA9IHN0YXJ0LmhlYWQgLSBsaW5lLmZyb207XG4gICAgbGV0IHNwYW5JID0gQmlkaVNwYW4uZmluZChvcmRlciwgc3RhcnRJbmRleCwgKF9hID0gc3RhcnQuYmlkaUxldmVsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAtMSwgc3RhcnQuYXNzb2MpO1xuICAgIGxldCBzcGFuID0gb3JkZXJbc3BhbkldLCBzcGFuRW5kID0gc3Bhbi5zaWRlKGZvcndhcmQsIGRpcik7XG4gICAgLy8gRW5kIG9mIHNwYW5cbiAgICBpZiAoc3RhcnRJbmRleCA9PSBzcGFuRW5kKSB7XG4gICAgICAgIGxldCBuZXh0SSA9IHNwYW5JICs9IGZvcndhcmQgPyAxIDogLTE7XG4gICAgICAgIGlmIChuZXh0SSA8IDAgfHwgbmV4dEkgPj0gb3JkZXIubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHNwYW4gPSBvcmRlcltzcGFuSSA9IG5leHRJXTtcbiAgICAgICAgc3RhcnRJbmRleCA9IHNwYW4uc2lkZSghZm9yd2FyZCwgZGlyKTtcbiAgICAgICAgc3BhbkVuZCA9IHNwYW4uc2lkZShmb3J3YXJkLCBkaXIpO1xuICAgIH1cbiAgICBsZXQgbmV4dEluZGV4ID0gZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIHN0YXJ0SW5kZXgsIHNwYW4uZm9yd2FyZChmb3J3YXJkLCBkaXIpKTtcbiAgICBpZiAobmV4dEluZGV4IDwgc3Bhbi5mcm9tIHx8IG5leHRJbmRleCA+IHNwYW4udG8pXG4gICAgICAgIG5leHRJbmRleCA9IHNwYW5FbmQ7XG4gICAgbW92ZWRPdmVyID0gbGluZS50ZXh0LnNsaWNlKE1hdGgubWluKHN0YXJ0SW5kZXgsIG5leHRJbmRleCksIE1hdGgubWF4KHN0YXJ0SW5kZXgsIG5leHRJbmRleCkpO1xuICAgIGxldCBuZXh0U3BhbiA9IHNwYW5JID09IChmb3J3YXJkID8gb3JkZXIubGVuZ3RoIC0gMSA6IDApID8gbnVsbCA6IG9yZGVyW3NwYW5JICsgKGZvcndhcmQgPyAxIDogLTEpXTtcbiAgICBpZiAobmV4dFNwYW4gJiYgbmV4dEluZGV4ID09IHNwYW5FbmQgJiYgbmV4dFNwYW4ubGV2ZWwgKyAoZm9yd2FyZCA/IDAgOiAxKSA8IHNwYW4ubGV2ZWwpXG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKG5leHRTcGFuLnNpZGUoIWZvcndhcmQsIGRpcikgKyBsaW5lLmZyb20sIG5leHRTcGFuLmZvcndhcmQoZm9yd2FyZCwgZGlyKSA/IDEgOiAtMSwgbmV4dFNwYW4ubGV2ZWwpO1xuICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKG5leHRJbmRleCArIGxpbmUuZnJvbSwgc3Bhbi5mb3J3YXJkKGZvcndhcmQsIGRpcikgPyAtMSA6IDEsIHNwYW4ubGV2ZWwpO1xufVxuZnVuY3Rpb24gYXV0b0RpcmVjdGlvbih0ZXh0LCBmcm9tLCB0bykge1xuICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87IGkrKykge1xuICAgICAgICBsZXQgdHlwZSA9IGNoYXJUeXBlKHRleHQuY2hhckNvZGVBdChpKSk7XG4gICAgICAgIGlmICh0eXBlID09IDEgLyogVC5MICovKVxuICAgICAgICAgICAgcmV0dXJuIExUUjtcbiAgICAgICAgaWYgKHR5cGUgPT0gMiAvKiBULlIgKi8gfHwgdHlwZSA9PSA0IC8qIFQuQUwgKi8pXG4gICAgICAgICAgICByZXR1cm4gUlRMO1xuICAgIH1cbiAgICByZXR1cm4gTFRSO1xufVxuXG5jb25zdCBjbGlja0FkZHNTZWxlY3Rpb25SYW5nZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGRyYWdNb3Zlc1NlbGVjdGlvbiQxID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgbW91c2VTZWxlY3Rpb25TdHlsZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGV4Y2VwdGlvblNpbmsgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCB1cGRhdGVMaXN0ZW5lciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGlucHV0SGFuZGxlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGZvY3VzQ2hhbmdlRWZmZWN0ID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgY2xpcGJvYXJkSW5wdXRGaWx0ZXIgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBjbGlwYm9hcmRPdXRwdXRGaWx0ZXIgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBwZXJMaW5lVGV4dERpcmVjdGlvbiA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuc29tZSh4ID0+IHgpXG59KTtcbmNvbnN0IG5hdGl2ZVNlbGVjdGlvbkhpZGRlbiA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuc29tZSh4ID0+IHgpXG59KTtcbmNvbnN0IHNjcm9sbEhhbmRsZXIgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jbGFzcyBTY3JvbGxUYXJnZXQge1xuICAgIGNvbnN0cnVjdG9yKHJhbmdlLCB5ID0gXCJuZWFyZXN0XCIsIHggPSBcIm5lYXJlc3RcIiwgeU1hcmdpbiA9IDUsIHhNYXJnaW4gPSA1LCBcbiAgICAvLyBUaGlzIGRhdGEgc3RydWN0dXJlIGlzIGFidXNlZCB0byBhbHNvIHN0b3JlIHByZWNpc2Ugc2Nyb2xsXG4gICAgLy8gc25hcHNob3RzLCBpbnN0ZWFkIG9mIGEgYHNjcm9sbEludG9WaWV3YCByZXF1ZXN0LiBXaGVuIHRoaXNcbiAgICAvLyBmbGFnIGlzIGB0cnVlYCwgYHJhbmdlYCBwb2ludHMgYXQgYSBwb3NpdGlvbiBpbiB0aGUgcmVmZXJlbmNlXG4gICAgLy8gbGluZSwgYHlNYXJnaW5gIGhvbGRzIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIHRvcCBvZiB0aGF0XG4gICAgLy8gbGluZSBhbmQgdGhlIHRvcCBvZiB0aGUgZWRpdG9yLCBhbmQgYHhNYXJnaW5gIGhvbGRzIHRoZVxuICAgIC8vIGVkaXRvcidzIGBzY3JvbGxMZWZ0YC5cbiAgICBpc1NuYXBzaG90ID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5yYW5nZSA9IHJhbmdlO1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnlNYXJnaW4gPSB5TWFyZ2luO1xuICAgICAgICB0aGlzLnhNYXJnaW4gPSB4TWFyZ2luO1xuICAgICAgICB0aGlzLmlzU25hcHNob3QgPSBpc1NuYXBzaG90O1xuICAgIH1cbiAgICBtYXAoY2hhbmdlcykge1xuICAgICAgICByZXR1cm4gY2hhbmdlcy5lbXB0eSA/IHRoaXMgOlxuICAgICAgICAgICAgbmV3IFNjcm9sbFRhcmdldCh0aGlzLnJhbmdlLm1hcChjaGFuZ2VzKSwgdGhpcy55LCB0aGlzLngsIHRoaXMueU1hcmdpbiwgdGhpcy54TWFyZ2luLCB0aGlzLmlzU25hcHNob3QpO1xuICAgIH1cbiAgICBjbGlwKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhbmdlLnRvIDw9IHN0YXRlLmRvYy5sZW5ndGggPyB0aGlzIDpcbiAgICAgICAgICAgIG5ldyBTY3JvbGxUYXJnZXQoRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihzdGF0ZS5kb2MubGVuZ3RoKSwgdGhpcy55LCB0aGlzLngsIHRoaXMueU1hcmdpbiwgdGhpcy54TWFyZ2luLCB0aGlzLmlzU25hcHNob3QpO1xuICAgIH1cbn1cbmNvbnN0IHNjcm9sbEludG9WaWV3ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSh7IG1hcDogKHQsIGNoKSA9PiB0Lm1hcChjaCkgfSk7XG5jb25zdCBzZXRFZGl0Q29udGV4dEZvcm1hdHRpbmcgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG4vKipcbkxvZyBvciByZXBvcnQgYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbiBpbiBjbGllbnQgY29kZS4gU2hvdWxkXG5wcm9iYWJseSBvbmx5IGJlIHVzZWQgYnkgZXh0ZW5zaW9uIGNvZGUgdGhhdCBhbGxvd3MgY2xpZW50IGNvZGUgdG9cbnByb3ZpZGUgZnVuY3Rpb25zLCBhbmQgY2FsbHMgdGhvc2UgZnVuY3Rpb25zIGluIGEgY29udGV4dCB3aGVyZSBhblxuZXhjZXB0aW9uIGNhbid0IGJlIHByb3BhZ2F0ZWQgdG8gY2FsbGluZyBjb2RlIGluIGEgcmVhc29uYWJsZSB3YXlcbihmb3IgZXhhbXBsZSB3aGVuIGluIGFuIGV2ZW50IGhhbmRsZXIpLlxuXG5FaXRoZXIgY2FsbHMgYSBoYW5kbGVyIHJlZ2lzdGVyZWQgd2l0aFxuW2BFZGl0b3JWaWV3LmV4Y2VwdGlvblNpbmtgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15leGNlcHRpb25TaW5rKSxcbmB3aW5kb3cub25lcnJvcmAsIGlmIGRlZmluZWQsIG9yIGBjb25zb2xlLmVycm9yYCAoaW4gd2hpY2ggY2FzZVxuaXQnbGwgcGFzcyBgY29udGV4dGAsIHdoZW4gZ2l2ZW4sIGFzIGZpcnN0IGFyZ3VtZW50KS5cbiovXG5mdW5jdGlvbiBsb2dFeGNlcHRpb24oc3RhdGUsIGV4Y2VwdGlvbiwgY29udGV4dCkge1xuICAgIGxldCBoYW5kbGVyID0gc3RhdGUuZmFjZXQoZXhjZXB0aW9uU2luayk7XG4gICAgaWYgKGhhbmRsZXIubGVuZ3RoKVxuICAgICAgICBoYW5kbGVyWzBdKGV4Y2VwdGlvbik7XG4gICAgZWxzZSBpZiAod2luZG93Lm9uZXJyb3IgJiYgd2luZG93Lm9uZXJyb3IoU3RyaW5nKGV4Y2VwdGlvbiksIGNvbnRleHQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBleGNlcHRpb24pKSA7XG4gICAgZWxzZSBpZiAoY29udGV4dClcbiAgICAgICAgY29uc29sZS5lcnJvcihjb250ZXh0ICsgXCI6XCIsIGV4Y2VwdGlvbik7XG4gICAgZWxzZVxuICAgICAgICBjb25zb2xlLmVycm9yKGV4Y2VwdGlvbik7XG59XG5jb25zdCBlZGl0YWJsZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoeyBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlc1swXSA6IHRydWUgfSk7XG5sZXQgbmV4dFBsdWdpbklEID0gMDtcbmNvbnN0IHZpZXdQbHVnaW4gPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKHBsdWdpbnMpIHtcbiAgICAgICAgcmV0dXJuIHBsdWdpbnMuZmlsdGVyKChwLCBpKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGk7IGorKylcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luc1tqXS5wbHVnaW4gPT0gcC5wbHVnaW4pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9XG59KTtcbi8qKlxuVmlldyBwbHVnaW5zIGFzc29jaWF0ZSBzdGF0ZWZ1bCB2YWx1ZXMgd2l0aCBhIHZpZXcuIFRoZXkgY2FuXG5pbmZsdWVuY2UgdGhlIHdheSB0aGUgY29udGVudCBpcyBkcmF3biwgYW5kIGFyZSBub3RpZmllZCBvZiB0aGluZ3NcbnRoYXQgaGFwcGVuIGluIHRoZSB2aWV3LiBUaGV5IG9wdGlvbmFsbHkgdGFrZSBhbiBhcmd1bWVudCwgaW5cbndoaWNoIGNhc2UgeW91IG5lZWQgdG8gY2FsbCBbYG9mYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LlZpZXdQbHVnaW4ub2YpIHRvIGNyZWF0ZVxuYW4gZXh0ZW5zaW9uIGZvciB0aGUgcGx1Z2luLiBXaGVuIHRoZSBhcmd1bWVudCB0eXBlIGlzIHVuZGVmaW5lZCxcbnlvdSBjYW4gdXNlIHRoZSBwbHVnaW4gaW5zdGFuY2UgYXMgYW4gZXh0ZW5zaW9uIGRpcmVjdGx5LlxuKi9cbmNsYXNzIFZpZXdQbHVnaW4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgaWQsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY3JlYXRlLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGRvbUV2ZW50SGFuZGxlcnMsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZG9tRXZlbnRPYnNlcnZlcnMsIGJ1aWxkRXh0ZW5zaW9ucykge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuY3JlYXRlID0gY3JlYXRlO1xuICAgICAgICB0aGlzLmRvbUV2ZW50SGFuZGxlcnMgPSBkb21FdmVudEhhbmRsZXJzO1xuICAgICAgICB0aGlzLmRvbUV2ZW50T2JzZXJ2ZXJzID0gZG9tRXZlbnRPYnNlcnZlcnM7XG4gICAgICAgIHRoaXMuYmFzZUV4dGVuc2lvbnMgPSBidWlsZEV4dGVuc2lvbnModGhpcyk7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uID0gdGhpcy5iYXNlRXh0ZW5zaW9ucy5jb25jYXQodmlld1BsdWdpbi5vZih7IHBsdWdpbjogdGhpcywgYXJnOiB1bmRlZmluZWQgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gZXh0ZW5zaW9uIGZvciB0aGlzIHBsdWdpbiB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudC5cbiAgICAqL1xuICAgIG9mKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRXh0ZW5zaW9ucy5jb25jYXQodmlld1BsdWdpbi5vZih7IHBsdWdpbjogdGhpcywgYXJnIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVmaW5lIGEgcGx1Z2luIGZyb20gYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgdGhlXG4gICAgcGx1Z2luJ3MgdmFsdWUsIGdpdmVuIGFuIGVkaXRvciB2aWV3LlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZShjcmVhdGUsIHNwZWMpIHtcbiAgICAgICAgY29uc3QgeyBldmVudEhhbmRsZXJzLCBldmVudE9ic2VydmVycywgcHJvdmlkZSwgZGVjb3JhdGlvbnM6IGRlY28gfSA9IHNwZWMgfHwge307XG4gICAgICAgIHJldHVybiBuZXcgVmlld1BsdWdpbihuZXh0UGx1Z2luSUQrKywgY3JlYXRlLCBldmVudEhhbmRsZXJzLCBldmVudE9ic2VydmVycywgcGx1Z2luID0+IHtcbiAgICAgICAgICAgIGxldCBleHQgPSBbXTtcbiAgICAgICAgICAgIGlmIChkZWNvKVxuICAgICAgICAgICAgICAgIGV4dC5wdXNoKGRlY29yYXRpb25zLm9mKHZpZXcgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGx1Z2luSW5zdCA9IHZpZXcucGx1Z2luKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwbHVnaW5JbnN0ID8gZGVjbyhwbHVnaW5JbnN0KSA6IERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpZiAocHJvdmlkZSlcbiAgICAgICAgICAgICAgICBleHQucHVzaChwcm92aWRlKHBsdWdpbikpO1xuICAgICAgICAgICAgcmV0dXJuIGV4dDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHBsdWdpbiBmb3IgYSBjbGFzcyB3aG9zZSBjb25zdHJ1Y3RvciB0YWtlcyBhIHNpbmdsZVxuICAgIGVkaXRvciB2aWV3IGFzIGFyZ3VtZW50LlxuICAgICovXG4gICAgc3RhdGljIGZyb21DbGFzcyhjbHMsIHNwZWMpIHtcbiAgICAgICAgcmV0dXJuIFZpZXdQbHVnaW4uZGVmaW5lKCh2aWV3LCBhcmcpID0+IG5ldyBjbHModmlldywgYXJnKSwgc3BlYyk7XG4gICAgfVxufVxuY2xhc3MgUGx1Z2luSW5zdGFuY2Uge1xuICAgIGNvbnN0cnVjdG9yKHNwZWMpIHtcbiAgICAgICAgdGhpcy5zcGVjID0gc3BlYztcbiAgICAgICAgLy8gV2hlbiBzdGFydGluZyBhbiB1cGRhdGUsIGFsbCBwbHVnaW5zIGhhdmUgdGhpcyBmaWVsZCBzZXQgdG8gdGhlXG4gICAgICAgIC8vIHVwZGF0ZSBvYmplY3QsIGluZGljYXRpbmcgdGhleSBuZWVkIHRvIGJlIHVwZGF0ZWQuIFdoZW4gZmluaXNoZWRcbiAgICAgICAgLy8gdXBkYXRpbmcsIGl0IGlzIHNldCB0byBgbnVsbGAuIFJldHJpZXZpbmcgYSBwbHVnaW4gdGhhdCBuZWVkcyB0b1xuICAgICAgICAvLyBiZSB1cGRhdGVkIHdpdGggYHZpZXcucGx1Z2luYCBmb3JjZXMgYW4gZWFnZXIgdXBkYXRlLlxuICAgICAgICB0aGlzLm11c3RVcGRhdGUgPSBudWxsO1xuICAgICAgICAvLyBUaGlzIGlzIG51bGwgd2hlbiB0aGUgcGx1Z2luIGlzIGluaXRpYWxseSBjcmVhdGVkLCBidXRcbiAgICAgICAgLy8gaW5pdGlhbGl6ZWQgb24gdGhlIGZpcnN0IHVwZGF0ZS5cbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgfVxuICAgIGdldCBwbHVnaW4oKSB7IHJldHVybiB0aGlzLnNwZWMgJiYgdGhpcy5zcGVjLnBsdWdpbjsgfVxuICAgIHVwZGF0ZSh2aWV3KSB7XG4gICAgICAgIGlmICghdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3BlYykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnNwZWMucGx1Z2luLmNyZWF0ZSh2aWV3LCB0aGlzLnNwZWMuYXJnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHZpZXcuc3RhdGUsIGUsIFwiQ29kZU1pcnJvciBwbHVnaW4gY3Jhc2hlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWFjdGl2YXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMubXVzdFVwZGF0ZSkge1xuICAgICAgICAgICAgbGV0IHVwZGF0ZSA9IHRoaXMubXVzdFVwZGF0ZTtcbiAgICAgICAgICAgIHRoaXMubXVzdFVwZGF0ZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZS51cGRhdGUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dFeGNlcHRpb24odXBkYXRlLnN0YXRlLCBlLCBcIkNvZGVNaXJyb3IgcGx1Z2luIGNyYXNoZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlLmRlc3Ryb3kpXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYWN0aXZhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGRlc3Ryb3kodmlldykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICgoX2EgPSB0aGlzLnZhbHVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGVzdHJveSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHZpZXcuc3RhdGUsIGUsIFwiQ29kZU1pcnJvciBwbHVnaW4gY3Jhc2hlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLnNwZWMgPSB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICB9XG59XG5jb25zdCBlZGl0b3JBdHRyaWJ1dGVzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgY29udGVudEF0dHJpYnV0ZXMgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG4vLyBQcm92aWRlIGRlY29yYXRpb25zXG5jb25zdCBkZWNvcmF0aW9ucyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGJsb2NrV3JhcHBlcnMgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBvdXRlckRlY29yYXRpb25zID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgYXRvbWljUmFuZ2VzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgYmlkaUlzb2xhdGVkUmFuZ2VzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuZnVuY3Rpb24gZ2V0SXNvbGF0ZWRSYW5nZXModmlldywgbGluZSkge1xuICAgIGxldCBpc29sYXRlcyA9IHZpZXcuc3RhdGUuZmFjZXQoYmlkaUlzb2xhdGVkUmFuZ2VzKTtcbiAgICBpZiAoIWlzb2xhdGVzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGlzb2xhdGVzO1xuICAgIGxldCBzZXRzID0gaXNvbGF0ZXMubWFwKGkgPT4gaSBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gaSh2aWV3KSA6IGkpO1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBSYW5nZVNldC5zcGFucyhzZXRzLCBsaW5lLmZyb20sIGxpbmUudG8sIHtcbiAgICAgICAgcG9pbnQoKSB7IH0sXG4gICAgICAgIHNwYW4oZnJvbURvYywgdG9Eb2MsIGFjdGl2ZSwgb3Blbikge1xuICAgICAgICAgICAgbGV0IGZyb20gPSBmcm9tRG9jIC0gbGluZS5mcm9tLCB0byA9IHRvRG9jIC0gbGluZS5mcm9tO1xuICAgICAgICAgICAgbGV0IGxldmVsID0gcmVzdWx0O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGFjdGl2ZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSwgb3Blbi0tKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbiA9IGFjdGl2ZVtpXS5zcGVjLmJpZGlJc29sYXRlLCB1cGRhdGU7XG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBhdXRvRGlyZWN0aW9uKGxpbmUudGV4dCwgZnJvbSwgdG8pO1xuICAgICAgICAgICAgICAgIGlmIChvcGVuID4gMCAmJiBsZXZlbC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgKHVwZGF0ZSA9IGxldmVsW2xldmVsLmxlbmd0aCAtIDFdKS50byA9PSBmcm9tICYmIHVwZGF0ZS5kaXJlY3Rpb24gPT0gZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZS50byA9IHRvO1xuICAgICAgICAgICAgICAgICAgICBsZXZlbCA9IHVwZGF0ZS5pbm5lcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhZGQgPSB7IGZyb20sIHRvLCBkaXJlY3Rpb24sIGlubmVyOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICBsZXZlbC5wdXNoKGFkZCk7XG4gICAgICAgICAgICAgICAgICAgIGxldmVsID0gYWRkLmlubmVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5jb25zdCBzY3JvbGxNYXJnaW5zID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuZnVuY3Rpb24gZ2V0U2Nyb2xsTWFyZ2lucyh2aWV3KSB7XG4gICAgbGV0IGxlZnQgPSAwLCByaWdodCA9IDAsIHRvcCA9IDAsIGJvdHRvbSA9IDA7XG4gICAgZm9yIChsZXQgc291cmNlIG9mIHZpZXcuc3RhdGUuZmFjZXQoc2Nyb2xsTWFyZ2lucykpIHtcbiAgICAgICAgbGV0IG0gPSBzb3VyY2Uodmlldyk7XG4gICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgICBpZiAobS5sZWZ0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgbGVmdCA9IE1hdGgubWF4KGxlZnQsIG0ubGVmdCk7XG4gICAgICAgICAgICBpZiAobS5yaWdodCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIHJpZ2h0ID0gTWF0aC5tYXgocmlnaHQsIG0ucmlnaHQpO1xuICAgICAgICAgICAgaWYgKG0udG9wICE9IG51bGwpXG4gICAgICAgICAgICAgICAgdG9wID0gTWF0aC5tYXgodG9wLCBtLnRvcCk7XG4gICAgICAgICAgICBpZiAobS5ib3R0b20gIT0gbnVsbClcbiAgICAgICAgICAgICAgICBib3R0b20gPSBNYXRoLm1heChib3R0b20sIG0uYm90dG9tKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBsZWZ0LCByaWdodCwgdG9wLCBib3R0b20gfTtcbn1cbmNvbnN0IHN0eWxlTW9kdWxlID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY2xhc3MgQ2hhbmdlZFJhbmdlIHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tQSwgdG9BLCBmcm9tQiwgdG9CKSB7XG4gICAgICAgIHRoaXMuZnJvbUEgPSBmcm9tQTtcbiAgICAgICAgdGhpcy50b0EgPSB0b0E7XG4gICAgICAgIHRoaXMuZnJvbUIgPSBmcm9tQjtcbiAgICAgICAgdGhpcy50b0IgPSB0b0I7XG4gICAgfVxuICAgIGpvaW4ob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VkUmFuZ2UoTWF0aC5taW4odGhpcy5mcm9tQSwgb3RoZXIuZnJvbUEpLCBNYXRoLm1heCh0aGlzLnRvQSwgb3RoZXIudG9BKSwgTWF0aC5taW4odGhpcy5mcm9tQiwgb3RoZXIuZnJvbUIpLCBNYXRoLm1heCh0aGlzLnRvQiwgb3RoZXIudG9CKSk7XG4gICAgfVxuICAgIGFkZFRvU2V0KHNldCkge1xuICAgICAgICBsZXQgaSA9IHNldC5sZW5ndGgsIG1lID0gdGhpcztcbiAgICAgICAgZm9yICg7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCByYW5nZSA9IHNldFtpIC0gMV07XG4gICAgICAgICAgICBpZiAocmFuZ2UuZnJvbUEgPiBtZS50b0EpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAocmFuZ2UudG9BIDwgbWUuZnJvbUEpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBtZSA9IG1lLmpvaW4ocmFuZ2UpO1xuICAgICAgICAgICAgc2V0LnNwbGljZShpIC0gMSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0LnNwbGljZShpLCAwLCBtZSk7XG4gICAgICAgIHJldHVybiBzZXQ7XG4gICAgfVxuICAgIC8vIEV4dGVuZCBhIHNldCB0byBjb3ZlciBhbGwgdGhlIGNvbnRlbnQgaW4gYHJhbmdlc2AsIHdoaWNoIGlzIGFcbiAgICAvLyBmbGF0IGFycmF5IHdpdGggZWFjaCBwYWlyIG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGZyb21CL3RvQlxuICAgIC8vIHBvc2l0aW9ucy4gVGhlc2UgcGFpcnMgYXJlIGdlbmVyYXRlZCBpbiB1bmNoYW5nZWQgcmFuZ2VzLCBzbyB0aGVcbiAgICAvLyBvZmZzZXQgYmV0d2VlbiBkb2MgQSBhbmQgZG9jIEIgaXMgdGhlIHNhbWUgZm9yIHRoZWlyIHN0YXJ0IGFuZFxuICAgIC8vIGVuZCBwb2ludHMuXG4gICAgc3RhdGljIGV4dGVuZFdpdGhSYW5nZXMoZGlmZiwgcmFuZ2VzKSB7XG4gICAgICAgIGlmIChyYW5nZXMubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gZGlmZjtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBkSSA9IDAsIHJJID0gMCwgb2ZmID0gMDs7KSB7XG4gICAgICAgICAgICBsZXQgbmV4dEQgPSBkSSA8IGRpZmYubGVuZ3RoID8gZGlmZltkSV0uZnJvbUIgOiAxZTk7XG4gICAgICAgICAgICBsZXQgbmV4dFIgPSBySSA8IHJhbmdlcy5sZW5ndGggPyByYW5nZXNbckldIDogMWU5O1xuICAgICAgICAgICAgbGV0IGZyb21CID0gTWF0aC5taW4obmV4dEQsIG5leHRSKTtcbiAgICAgICAgICAgIGlmIChmcm9tQiA9PSAxZTkpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBsZXQgZnJvbUEgPSBmcm9tQiArIG9mZiwgdG9CID0gZnJvbUIsIHRvQSA9IGZyb21BO1xuICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgIGlmIChySSA8IHJhbmdlcy5sZW5ndGggJiYgcmFuZ2VzW3JJXSA8PSB0b0IpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVuZCA9IHJhbmdlc1tySSArIDFdO1xuICAgICAgICAgICAgICAgICAgICBySSArPSAyO1xuICAgICAgICAgICAgICAgICAgICB0b0IgPSBNYXRoLm1heCh0b0IsIGVuZCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBkSTsgaSA8IGRpZmYubGVuZ3RoICYmIGRpZmZbaV0uZnJvbUIgPD0gdG9COyBpKyspXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmYgPSBkaWZmW2ldLnRvQSAtIGRpZmZbaV0udG9CO1xuICAgICAgICAgICAgICAgICAgICB0b0EgPSBNYXRoLm1heCh0b0EsIGVuZCArIG9mZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRJIDwgZGlmZi5sZW5ndGggJiYgZGlmZltkSV0uZnJvbUIgPD0gdG9CKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gZGlmZltkSSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdG9CID0gTWF0aC5tYXgodG9CLCBuZXh0LnRvQik7XG4gICAgICAgICAgICAgICAgICAgIHRvQSA9IE1hdGgubWF4KHRvQSwgbmV4dC50b0EpO1xuICAgICAgICAgICAgICAgICAgICBvZmYgPSBuZXh0LnRvQSAtIG5leHQudG9CO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IENoYW5nZWRSYW5nZShmcm9tQSwgdG9BLCBmcm9tQiwgdG9CKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG4vKipcblZpZXcgW3BsdWdpbnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5WaWV3UGx1Z2luKSBhcmUgZ2l2ZW4gaW5zdGFuY2VzIG9mIHRoaXNcbmNsYXNzLCB3aGljaCBkZXNjcmliZSB3aGF0IGhhcHBlbmVkLCB3aGVuZXZlciB0aGUgdmlldyBpcyB1cGRhdGVkLlxuKi9cbmNsYXNzIFZpZXdVcGRhdGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBlZGl0b3IgdmlldyB0aGF0IHRoZSB1cGRhdGUgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICAgICovXG4gICAgdmlldywgXG4gICAgLyoqXG4gICAgVGhlIG5ldyBlZGl0b3Igc3RhdGUuXG4gICAgKi9cbiAgICBzdGF0ZSwgXG4gICAgLyoqXG4gICAgVGhlIHRyYW5zYWN0aW9ucyBpbnZvbHZlZCBpbiB0aGUgdXBkYXRlLiBNYXkgYmUgZW1wdHkuXG4gICAgKi9cbiAgICB0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9ucyA9IHRyYW5zYWN0aW9ucztcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmZsYWdzID0gMDtcbiAgICAgICAgdGhpcy5zdGFydFN0YXRlID0gdmlldy5zdGF0ZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gQ2hhbmdlU2V0LmVtcHR5KHRoaXMuc3RhcnRTdGF0ZS5kb2MubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgdHIgb2YgdHJhbnNhY3Rpb25zKVxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VzID0gdGhpcy5jaGFuZ2VzLmNvbXBvc2UodHIuY2hhbmdlcyk7XG4gICAgICAgIGxldCBjaGFuZ2VkUmFuZ2VzID0gW107XG4gICAgICAgIHRoaXMuY2hhbmdlcy5pdGVyQ2hhbmdlZFJhbmdlcygoZnJvbUEsIHRvQSwgZnJvbUIsIHRvQikgPT4gY2hhbmdlZFJhbmdlcy5wdXNoKG5ldyBDaGFuZ2VkUmFuZ2UoZnJvbUEsIHRvQSwgZnJvbUIsIHRvQikpKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkUmFuZ2VzID0gY2hhbmdlZFJhbmdlcztcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKHZpZXcsIHN0YXRlLCB0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWaWV3VXBkYXRlKHZpZXcsIHN0YXRlLCB0cmFuc2FjdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICBUZWxscyB5b3Ugd2hldGhlciB0aGUgW3ZpZXdwb3J0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy52aWV3cG9ydCkgb3JcbiAgICBbdmlzaWJsZSByYW5nZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnZpc2libGVSYW5nZXMpIGNoYW5nZWQgaW4gdGhpc1xuICAgIHVwZGF0ZS5cbiAgICAqL1xuICAgIGdldCB2aWV3cG9ydENoYW5nZWQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5mbGFncyAmIDQgLyogVXBkYXRlRmxhZy5WaWV3cG9ydCAqLykgPiAwO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRydWUgd2hlblxuICAgIFtgdmlld3BvcnRDaGFuZ2VkYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LlZpZXdVcGRhdGUudmlld3BvcnRDaGFuZ2VkKSBpcyB0cnVlXG4gICAgYW5kIHRoZSB2aWV3cG9ydCBjaGFuZ2UgaXMgbm90IGp1c3QgdGhlIHJlc3VsdCBvZiBtYXBwaW5nIGl0IGluXG4gICAgcmVzcG9uc2UgdG8gZG9jdW1lbnQgY2hhbmdlcy5cbiAgICAqL1xuICAgIGdldCB2aWV3cG9ydE1vdmVkKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZmxhZ3MgJiA4IC8qIFVwZGF0ZUZsYWcuVmlld3BvcnRNb3ZlZCAqLykgPiAwO1xuICAgIH1cbiAgICAvKipcbiAgICBJbmRpY2F0ZXMgd2hldGhlciB0aGUgaGVpZ2h0IG9mIGEgYmxvY2sgZWxlbWVudCBpbiB0aGUgZWRpdG9yXG4gICAgY2hhbmdlZCBpbiB0aGlzIHVwZGF0ZS5cbiAgICAqL1xuICAgIGdldCBoZWlnaHRDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZmxhZ3MgJiAyIC8qIFVwZGF0ZUZsYWcuSGVpZ2h0ICovKSA+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdHJ1ZSB3aGVuIHRoZSBkb2N1bWVudCB3YXMgbW9kaWZpZWQgb3IgdGhlIHNpemUgb2YgdGhlXG4gICAgZWRpdG9yLCBvciBlbGVtZW50cyB3aXRoaW4gdGhlIGVkaXRvciwgY2hhbmdlZC5cbiAgICAqL1xuICAgIGdldCBnZW9tZXRyeUNoYW5nZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY0NoYW5nZWQgfHwgKHRoaXMuZmxhZ3MgJiAoMTYgLyogVXBkYXRlRmxhZy5HZW9tZXRyeSAqLyB8IDIgLyogVXBkYXRlRmxhZy5IZWlnaHQgKi8pKSA+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIFRydWUgd2hlbiB0aGlzIHVwZGF0ZSBpbmRpY2F0ZXMgYSBmb2N1cyBjaGFuZ2UuXG4gICAgKi9cbiAgICBnZXQgZm9jdXNDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZmxhZ3MgJiAxIC8qIFVwZGF0ZUZsYWcuRm9jdXMgKi8pID4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGUgZG9jdW1lbnQgY2hhbmdlZCBpbiB0aGlzIHVwZGF0ZS5cbiAgICAqL1xuICAgIGdldCBkb2NDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuY2hhbmdlcy5lbXB0eTtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGUgc2VsZWN0aW9uIHdhcyBleHBsaWNpdGx5IHNldCBpbiB0aGlzIHVwZGF0ZS5cbiAgICAqL1xuICAgIGdldCBzZWxlY3Rpb25TZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9ucy5zb21lKHRyID0+IHRyLnNlbGVjdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGVtcHR5KCkgeyByZXR1cm4gdGhpcy5mbGFncyA9PSAwICYmIHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aCA9PSAwOyB9XG59XG5cbmNvbnN0IG5vQ2hpbGRyZW4gPSBbXTtcbmNsYXNzIFRpbGUge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgbGVuZ3RoLCBmbGFncyA9IDApIHtcbiAgICAgICAgdGhpcy5kb20gPSBkb207XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLmZsYWdzID0gZmxhZ3M7XG4gICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICAgICAgZG9tLmNtVGlsZSA9IHRoaXM7XG4gICAgfVxuICAgIGdldCBicmVha0FmdGVyKCkgeyByZXR1cm4gKHRoaXMuZmxhZ3MgJiAxIC8qIFRpbGVGbGFnLkJyZWFrQWZ0ZXIgKi8pOyB9XG4gICAgZ2V0IGNoaWxkcmVuKCkgeyByZXR1cm4gbm9DaGlsZHJlbjsgfVxuICAgIGlzV2lkZ2V0KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBnZXQgaXNIaWRkZW4oKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGlzQ29tcG9zaXRlKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpc0xpbmUoKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGlzVGV4dCgpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgaXNCbG9jaygpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgZ2V0IGRvbUF0dHJzKCkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHN5bmModHJhY2spIHtcbiAgICAgICAgdGhpcy5mbGFncyB8PSAyIC8qIFRpbGVGbGFnLlN5bmNlZCAqLztcbiAgICAgICAgaWYgKHRoaXMuZmxhZ3MgJiA0IC8qIFRpbGVGbGFnLkF0dHJzRGlydHkgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuZmxhZ3MgJj0gfjQgLyogVGlsZUZsYWcuQXR0cnNEaXJ0eSAqLztcbiAgICAgICAgICAgIGxldCBhdHRycyA9IHRoaXMuZG9tQXR0cnM7XG4gICAgICAgICAgICBpZiAoYXR0cnMpXG4gICAgICAgICAgICAgICAgc2V0QXR0cnModGhpcy5kb20sIGF0dHJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IubmFtZSArICh0aGlzLmNoaWxkcmVuLmxlbmd0aCA/IGAoJHt0aGlzLmNoaWxkcmVufSlgIDogXCJcIikgKyAodGhpcy5icmVha0FmdGVyID8gXCIjXCIgOiBcIlwiKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHsgdGhpcy5wYXJlbnQgPSBudWxsOyB9XG4gICAgc2V0RE9NKGRvbSkge1xuICAgICAgICB0aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgZG9tLmNtVGlsZSA9IHRoaXM7XG4gICAgfVxuICAgIGdldCBwb3NBdFN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5wb3NCZWZvcmUodGhpcykgOiAwO1xuICAgIH1cbiAgICBnZXQgcG9zQXRFbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc0F0U3RhcnQgKyB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgcG9zQmVmb3JlKHRpbGUsIHN0YXJ0ID0gdGhpcy5wb3NBdFN0YXJ0KSB7XG4gICAgICAgIGxldCBwb3MgPSBzdGFydDtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbikge1xuICAgICAgICAgICAgaWYgKGNoaWxkID09IHRpbGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgICAgICAgIHBvcyArPSBjaGlsZC5sZW5ndGggKyBjaGlsZC5icmVha0FmdGVyO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBjaGlsZCBpbiBwb3NCZWZvcmVcIik7XG4gICAgfVxuICAgIHBvc0FmdGVyKHRpbGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zQmVmb3JlKHRpbGUpICsgdGlsZS5sZW5ndGg7XG4gICAgfVxuICAgIGNvdmVycyhzaWRlKSB7IHJldHVybiB0cnVlOyB9XG4gICAgY29vcmRzSW4ocG9zLCBzaWRlKSB7IHJldHVybiBudWxsOyB9XG4gICAgZG9tUG9zRm9yKG9mZiwgc2lkZSkge1xuICAgICAgICBsZXQgaW5kZXggPSBkb21JbmRleCh0aGlzLmRvbSk7XG4gICAgICAgIGxldCBhZnRlciA9IHRoaXMubGVuZ3RoID8gb2ZmID4gMCA6IHNpZGUgPiAwO1xuICAgICAgICByZXR1cm4gbmV3IERPTVBvcyh0aGlzLnBhcmVudC5kb20sIGluZGV4ICsgKGFmdGVyID8gMSA6IDApLCBvZmYgPT0gMCB8fCBvZmYgPT0gdGhpcy5sZW5ndGgpO1xuICAgIH1cbiAgICBtYXJrRGlydHkoYXR0cnMpIHtcbiAgICAgICAgdGhpcy5mbGFncyAmPSB+MiAvKiBUaWxlRmxhZy5TeW5jZWQgKi87XG4gICAgICAgIGlmIChhdHRycylcbiAgICAgICAgICAgIHRoaXMuZmxhZ3MgfD0gNCAvKiBUaWxlRmxhZy5BdHRyc0RpcnR5ICovO1xuICAgICAgICBpZiAodGhpcy5wYXJlbnQgJiYgKHRoaXMucGFyZW50LmZsYWdzICYgMiAvKiBUaWxlRmxhZy5TeW5jZWQgKi8pKVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubWFya0RpcnR5KGZhbHNlKTtcbiAgICB9XG4gICAgZ2V0IG92ZXJyaWRlRE9NVGV4dCgpIHsgcmV0dXJuIG51bGw7IH1cbiAgICBnZXQgcm9vdCgpIHtcbiAgICAgICAgZm9yIChsZXQgdCA9IHRoaXM7IHQ7IHQgPSB0LnBhcmVudClcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgRG9jVGlsZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQoZG9tKSB7XG4gICAgICAgIHJldHVybiBkb20uY21UaWxlO1xuICAgIH1cbn1cbmNsYXNzIENvbXBvc2l0ZVRpbGUgZXh0ZW5kcyBUaWxlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20pIHtcbiAgICAgICAgc3VwZXIoZG9tLCAwKTtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4gPSBbXTtcbiAgICB9XG4gICAgaXNDb21wb3NpdGUoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgZ2V0IGNoaWxkcmVuKCkgeyByZXR1cm4gdGhpcy5fY2hpbGRyZW47IH1cbiAgICBnZXQgbGFzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGggPyB0aGlzLmNoaWxkcmVuW3RoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMV0gOiBudWxsOyB9XG4gICAgYXBwZW5kKGNoaWxkKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICAgIGNoaWxkLnBhcmVudCA9IHRoaXM7XG4gICAgfVxuICAgIHN5bmModHJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuZmxhZ3MgJiAyIC8qIFRpbGVGbGFnLlN5bmNlZCAqLylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc3VwZXIuc3luYyh0cmFjayk7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmRvbSwgcHJldiA9IG51bGwsIG5leHQ7XG4gICAgICAgIGxldCB0cmFja2luZyA9ICh0cmFjayA9PT0gbnVsbCB8fCB0cmFjayA9PT0gdm9pZCAwID8gdm9pZCAwIDogdHJhY2subm9kZSkgPT0gcGFyZW50ID8gdHJhY2sgOiBudWxsO1xuICAgICAgICBsZXQgbGVuZ3RoID0gMDtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbikge1xuICAgICAgICAgICAgY2hpbGQuc3luYyh0cmFjayk7XG4gICAgICAgICAgICBsZW5ndGggKz0gY2hpbGQubGVuZ3RoICsgY2hpbGQuYnJlYWtBZnRlcjtcbiAgICAgICAgICAgIG5leHQgPSBwcmV2ID8gcHJldi5uZXh0U2libGluZyA6IHBhcmVudC5maXJzdENoaWxkO1xuICAgICAgICAgICAgaWYgKHRyYWNraW5nICYmIG5leHQgIT0gY2hpbGQuZG9tKVxuICAgICAgICAgICAgICAgIHRyYWNraW5nLndyaXR0ZW4gPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGNoaWxkLmRvbS5wYXJlbnROb2RlID09IHBhcmVudCkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChuZXh0ICYmIG5leHQgIT0gY2hpbGQuZG9tKVxuICAgICAgICAgICAgICAgICAgICBuZXh0ID0gcm0kMShuZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQuZG9tLCBuZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXYgPSBjaGlsZC5kb207XG4gICAgICAgIH1cbiAgICAgICAgbmV4dCA9IHByZXYgPyBwcmV2Lm5leHRTaWJsaW5nIDogcGFyZW50LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmICh0cmFja2luZyAmJiBuZXh0KVxuICAgICAgICAgICAgdHJhY2tpbmcud3JpdHRlbiA9IHRydWU7XG4gICAgICAgIHdoaWxlIChuZXh0KVxuICAgICAgICAgICAgbmV4dCA9IHJtJDEobmV4dCk7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgIH1cbn1cbi8vIFJlbW92ZSBhIERPTSBub2RlIGFuZCByZXR1cm4gaXRzIG5leHQgc2libGluZy5cbmZ1bmN0aW9uIHJtJDEoZG9tKSB7XG4gICAgbGV0IG5leHQgPSBkb20ubmV4dFNpYmxpbmc7XG4gICAgZG9tLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZG9tKTtcbiAgICByZXR1cm4gbmV4dDtcbn1cbi8vIFRoZSB0b3AtbGV2ZWwgdGlsZS4gSXRzIGRvbSBwcm9wZXJ0eSBlcXVhbHMgdmlldy5jb250ZW50RE9NLlxuY2xhc3MgRG9jVGlsZSBleHRlbmRzIENvbXBvc2l0ZVRpbGUge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIGRvbSkge1xuICAgICAgICBzdXBlcihkb20pO1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgIH1cbiAgICBvd25zKHRpbGUpIHtcbiAgICAgICAgZm9yICg7IHRpbGU7IHRpbGUgPSB0aWxlLnBhcmVudClcbiAgICAgICAgICAgIGlmICh0aWxlID09IHRoaXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaXNCbG9jaygpIHsgcmV0dXJuIHRydWU7IH1cbiAgICBuZWFyZXN0KGRvbSkge1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAoIWRvbSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGxldCB0aWxlID0gVGlsZS5nZXQoZG9tKTtcbiAgICAgICAgICAgIGlmICh0aWxlICYmIHRoaXMub3ducyh0aWxlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZTtcbiAgICAgICAgICAgIGRvbSA9IGRvbS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJsb2NrVGlsZXMoZikge1xuICAgICAgICBmb3IgKGxldCBzdGFjayA9IFtdLCBjdXIgPSB0aGlzLCBpID0gMCwgcG9zID0gMDs7KSB7XG4gICAgICAgICAgICBpZiAoaSA9PSBjdXIuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdGFjay5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjdXIgPSBjdXIucGFyZW50O1xuICAgICAgICAgICAgICAgIGlmIChjdXIuYnJlYWtBZnRlcilcbiAgICAgICAgICAgICAgICAgICAgcG9zKys7XG4gICAgICAgICAgICAgICAgaSA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBjdXIuY2hpbGRyZW5baSsrXTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCBpbnN0YW5jZW9mIEJsb2NrV3JhcHBlclRpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChpKTtcbiAgICAgICAgICAgICAgICAgICAgY3VyID0gbmV4dDtcbiAgICAgICAgICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kID0gcG9zICsgbmV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBmKG5leHQsIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IGVuZCArIG5leHQuYnJlYWtBZnRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRmluZCB0aGUgYmxvY2sgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLiBJZiBzaWRlIDwgLTEsIG1ha2Ugc3VyZSB0b1xuICAgIC8vIHN0YXkgYmVmb3JlIGJsb2NrIHdpZGdldHMgYXQgdGhhdCBwb3NpdGlvbiwgaWYgc2lkZSA+IDEsIGFmdGVyXG4gICAgLy8gc3VjaCB3aWRnZXRzICh1c2VkIGZvciBzZWxlY3Rpb24gZHJhd2luZywgd2hpY2ggbmVlZHMgdG8gYmUgYWJsZVxuICAgIC8vIHRvIGdldCBjb29yZGluYXRlcyBmb3IgcG9zaXRpb25zIHRoYXQgYXJlbid0IHZhbGlkIGN1cnNvciBwb3NpdGlvbnMpLlxuICAgIHJlc29sdmVCbG9jayhwb3MsIHNpZGUpIHtcbiAgICAgICAgbGV0IGJlZm9yZSwgYmVmb3JlT2ZmID0gLTEsIGFmdGVyLCBhZnRlck9mZiA9IC0xO1xuICAgICAgICB0aGlzLmJsb2NrVGlsZXMoKHRpbGUsIG9mZikgPT4ge1xuICAgICAgICAgICAgbGV0IGVuZCA9IG9mZiArIHRpbGUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHBvcyA+PSBvZmYgJiYgcG9zIDw9IGVuZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aWxlLmlzV2lkZ2V0KCkgJiYgc2lkZSA+PSAtMSAmJiBzaWRlIDw9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUuZmxhZ3MgJiAzMiAvKiBUaWxlRmxhZy5BZnRlciAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGlsZS5mbGFncyAmIDE2IC8qIFRpbGVGbGFnLkJlZm9yZSAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChvZmYgPCBwb3MgfHwgcG9zID09IGVuZCAmJiAoc2lkZSA8IC0xID8gdGlsZS5sZW5ndGggOiB0aWxlLmNvdmVycygxKSkpICYmXG4gICAgICAgICAgICAgICAgICAgICghYmVmb3JlIHx8ICF0aWxlLmlzV2lkZ2V0KCkgJiYgYmVmb3JlLmlzV2lkZ2V0KCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZSA9IHRpbGU7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZU9mZiA9IHBvcyAtIG9mZjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChlbmQgPiBwb3MgfHwgcG9zID09IG9mZiAmJiAoc2lkZSA+IDEgPyB0aWxlLmxlbmd0aCA6IHRpbGUuY292ZXJzKC0xKSkpICYmXG4gICAgICAgICAgICAgICAgICAgICghYWZ0ZXIgfHwgIXRpbGUuaXNXaWRnZXQoKSAmJiBhZnRlci5pc1dpZGdldCgpKSkge1xuICAgICAgICAgICAgICAgICAgICBhZnRlciA9IHRpbGU7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVyT2ZmID0gcG9zIC0gb2ZmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghYmVmb3JlICYmICFhZnRlcilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHRpbGUgYXQgcG9zaXRpb24gXCIgKyBwb3MpO1xuICAgICAgICByZXR1cm4gYmVmb3JlICYmIHNpZGUgPCAwIHx8ICFhZnRlciA/IHsgdGlsZTogYmVmb3JlLCBvZmZzZXQ6IGJlZm9yZU9mZiB9IDogeyB0aWxlOiBhZnRlciwgb2Zmc2V0OiBhZnRlck9mZiB9O1xuICAgIH1cbn1cbmNsYXNzIEJsb2NrV3JhcHBlclRpbGUgZXh0ZW5kcyBDb21wb3NpdGVUaWxlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIHdyYXBwZXIpIHtcbiAgICAgICAgc3VwZXIoZG9tKTtcbiAgICAgICAgdGhpcy53cmFwcGVyID0gd3JhcHBlcjtcbiAgICB9XG4gICAgaXNCbG9jaygpIHsgcmV0dXJuIHRydWU7IH1cbiAgICBjb3ZlcnMoc2lkZSkge1xuICAgICAgICBpZiAoIXRoaXMuY2hpbGRyZW4ubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gc2lkZSA8IDAgPyB0aGlzLmNoaWxkcmVuWzBdLmNvdmVycygtMSkgOiB0aGlzLmxhc3RDaGlsZC5jb3ZlcnMoMSk7XG4gICAgfVxuICAgIGdldCBkb21BdHRycygpIHsgcmV0dXJuIHRoaXMud3JhcHBlci5hdHRyaWJ1dGVzOyB9XG4gICAgc3RhdGljIG9mKHdyYXBwZXIsIGRvbSkge1xuICAgICAgICBsZXQgdGlsZSA9IG5ldyBCbG9ja1dyYXBwZXJUaWxlKGRvbSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHdyYXBwZXIudGFnTmFtZSksIHdyYXBwZXIpO1xuICAgICAgICBpZiAoIWRvbSlcbiAgICAgICAgICAgIHRpbGUuZmxhZ3MgfD0gNCAvKiBUaWxlRmxhZy5BdHRyc0RpcnR5ICovO1xuICAgICAgICByZXR1cm4gdGlsZTtcbiAgICB9XG59XG5jbGFzcyBMaW5lVGlsZSBleHRlbmRzIENvbXBvc2l0ZVRpbGUge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgYXR0cnMpIHtcbiAgICAgICAgc3VwZXIoZG9tKTtcbiAgICAgICAgdGhpcy5hdHRycyA9IGF0dHJzO1xuICAgIH1cbiAgICBpc0xpbmUoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgc3RhdGljIHN0YXJ0KGF0dHJzLCBkb20sIGtlZXBBdHRycykge1xuICAgICAgICBsZXQgbGluZSA9IG5ldyBMaW5lVGlsZShkb20gfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgYXR0cnMpO1xuICAgICAgICBpZiAoIWRvbSB8fCAha2VlcEF0dHJzKVxuICAgICAgICAgICAgbGluZS5mbGFncyB8PSA0IC8qIFRpbGVGbGFnLkF0dHJzRGlydHkgKi87XG4gICAgICAgIHJldHVybiBsaW5lO1xuICAgIH1cbiAgICBnZXQgZG9tQXR0cnMoKSB7IHJldHVybiB0aGlzLmF0dHJzOyB9XG4gICAgLy8gRmluZCB0aGUgdGlsZSBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBwb3NpdGlvbiBpbiB0aGlzIGxpbmUuXG4gICAgcmVzb2x2ZUlubGluZShwb3MsIHNpZGUsIGZvckNvb3Jkcykge1xuICAgICAgICBsZXQgYmVmb3JlID0gbnVsbCwgYmVmb3JlT2ZmID0gLTEsIGFmdGVyID0gbnVsbCwgYWZ0ZXJPZmYgPSAtMTtcbiAgICAgICAgZnVuY3Rpb24gc2Nhbih0aWxlLCBwb3MpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBvZmYgPSAwOyBpIDwgdGlsZS5jaGlsZHJlbi5sZW5ndGggJiYgb2ZmIDw9IHBvczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gdGlsZS5jaGlsZHJlbltpXSwgZW5kID0gb2ZmICsgY2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChlbmQgPj0gcG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5pc0NvbXBvc2l0ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FuKGNoaWxkLCBwb3MgLSBvZmYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCghYWZ0ZXIgfHwgYWZ0ZXIuaXNIaWRkZW4gJiYgKHNpZGUgPiAwIHx8IGZvckNvb3JkcyAmJiBvblNhbWVMaW5lKGFmdGVyLCBjaGlsZCkpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKGVuZCA+IHBvcyB8fCAoY2hpbGQuZmxhZ3MgJiAzMiAvKiBUaWxlRmxhZy5BZnRlciAqLykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZnRlciA9IGNoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJPZmYgPSBwb3MgLSBvZmY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob2ZmIDwgcG9zIHx8IChjaGlsZC5mbGFncyAmIDE2IC8qIFRpbGVGbGFnLkJlZm9yZSAqLykgJiYgIWNoaWxkLmlzSGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmUgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZU9mZiA9IHBvcyAtIG9mZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvZmYgPSBlbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2Nhbih0aGlzLCBwb3MpO1xuICAgICAgICBsZXQgdGFyZ2V0ID0gKChzaWRlIDwgMCA/IGJlZm9yZSA6IGFmdGVyKSB8fCBiZWZvcmUgfHwgYWZ0ZXIpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0ID8geyB0aWxlOiB0YXJnZXQsIG9mZnNldDogdGFyZ2V0ID09IGJlZm9yZSA/IGJlZm9yZU9mZiA6IGFmdGVyT2ZmIH0gOiBudWxsO1xuICAgIH1cbiAgICBjb29yZHNJbihwb3MsIHNpZGUpIHtcbiAgICAgICAgbGV0IGZvdW5kID0gdGhpcy5yZXNvbHZlSW5saW5lKHBvcywgc2lkZSwgdHJ1ZSk7XG4gICAgICAgIGlmICghZm91bmQpXG4gICAgICAgICAgICByZXR1cm4gZmFsbGJhY2tSZWN0KHRoaXMpO1xuICAgICAgICByZXR1cm4gZm91bmQudGlsZS5jb29yZHNJbihNYXRoLm1heCgwLCBmb3VuZC5vZmZzZXQpLCBzaWRlKTtcbiAgICB9XG4gICAgZG9tSW4ocG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCBmb3VuZCA9IHRoaXMucmVzb2x2ZUlubGluZShwb3MsIHNpZGUpO1xuICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgIGxldCB7IHRpbGUsIG9mZnNldCB9ID0gZm91bmQ7XG4gICAgICAgICAgICBpZiAodGhpcy5kb20uY29udGFpbnModGlsZS5kb20pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRpbGUuaXNUZXh0KCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRE9NUG9zKHRpbGUuZG9tLCBNYXRoLm1pbih0aWxlLmRvbS5ub2RlVmFsdWUubGVuZ3RoLCBvZmZzZXQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZS5kb21Qb3NGb3Iob2Zmc2V0LCB0aWxlLmZsYWdzICYgMTYgLyogVGlsZUZsYWcuQmVmb3JlICovID8gMSA6IHRpbGUuZmxhZ3MgJiAzMiAvKiBUaWxlRmxhZy5BZnRlciAqLyA/IC0xIDogc2lkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gZm91bmQudGlsZS5wYXJlbnQsIHNhdyA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yIChsZXQgY2ggb2YgcGFyZW50LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNhdylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBET01Qb3MoY2guZG9tLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoY2ggPT0gZm91bmQudGlsZSkge1xuICAgICAgICAgICAgICAgICAgICBzYXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IERPTVBvcyh0aGlzLmRvbSwgMCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZmFsbGJhY2tSZWN0KHRpbGUpIHtcbiAgICBsZXQgbGFzdCA9IHRpbGUuZG9tLmxhc3RDaGlsZDtcbiAgICBpZiAoIWxhc3QpXG4gICAgICAgIHJldHVybiB0aWxlLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgcmVjdHMgPSBjbGllbnRSZWN0c0ZvcihsYXN0KTtcbiAgICByZXR1cm4gcmVjdHNbcmVjdHMubGVuZ3RoIC0gMV0gfHwgbnVsbDtcbn1cbmZ1bmN0aW9uIG9uU2FtZUxpbmUoYSwgYikge1xuICAgIGxldCBwb3NBID0gYS5jb29yZHNJbigwLCAxKSwgcG9zQiA9IGIuY29vcmRzSW4oMCwgMSk7XG4gICAgcmV0dXJuIHBvc0EgJiYgcG9zQiAmJiBwb3NCLnRvcCA8IHBvc0EuYm90dG9tO1xufVxuY2xhc3MgTWFya1RpbGUgZXh0ZW5kcyBDb21wb3NpdGVUaWxlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIG1hcmspIHtcbiAgICAgICAgc3VwZXIoZG9tKTtcbiAgICAgICAgdGhpcy5tYXJrID0gbWFyaztcbiAgICB9XG4gICAgZ2V0IGRvbUF0dHJzKCkgeyByZXR1cm4gdGhpcy5tYXJrLmF0dHJzOyB9XG4gICAgc3RhdGljIG9mKG1hcmssIGRvbSkge1xuICAgICAgICBsZXQgdGlsZSA9IG5ldyBNYXJrVGlsZShkb20gfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChtYXJrLnRhZ05hbWUpLCBtYXJrKTtcbiAgICAgICAgaWYgKCFkb20pXG4gICAgICAgICAgICB0aWxlLmZsYWdzIHw9IDQgLyogVGlsZUZsYWcuQXR0cnNEaXJ0eSAqLztcbiAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfVxufVxuY2xhc3MgVGV4dFRpbGUgZXh0ZW5kcyBUaWxlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIHRleHQpIHtcbiAgICAgICAgc3VwZXIoZG9tLCB0ZXh0Lmxlbmd0aCk7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgfVxuICAgIHN5bmModHJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuZmxhZ3MgJiAyIC8qIFRpbGVGbGFnLlN5bmNlZCAqLylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc3VwZXIuc3luYyh0cmFjayk7XG4gICAgICAgIGlmICh0aGlzLmRvbS5ub2RlVmFsdWUgIT0gdGhpcy50ZXh0KSB7XG4gICAgICAgICAgICBpZiAodHJhY2sgJiYgdHJhY2subm9kZSA9PSB0aGlzLmRvbSlcbiAgICAgICAgICAgICAgICB0cmFjay53cml0dGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZG9tLm5vZGVWYWx1ZSA9IHRoaXMudGV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc1RleHQoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnRleHQpOyB9XG4gICAgY29vcmRzSW4ocG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCBsZW5ndGggPSB0aGlzLmRvbS5ub2RlVmFsdWUubGVuZ3RoO1xuICAgICAgICBpZiAocG9zID4gbGVuZ3RoKVxuICAgICAgICAgICAgcG9zID0gbGVuZ3RoO1xuICAgICAgICBsZXQgZnJvbSA9IHBvcywgdG8gPSBwb3MsIGZsYXR0ZW4gPSAwO1xuICAgICAgICBpZiAocG9zID09IDAgJiYgc2lkZSA8IDAgfHwgcG9zID09IGxlbmd0aCAmJiBzaWRlID49IDApIHtcbiAgICAgICAgICAgIGlmICghKGJyb3dzZXIuY2hyb21lIHx8IGJyb3dzZXIuZ2Vja28pKSB7IC8vIFRoZXNlIGJyb3dzZXJzIHJlbGlhYmx5IHJldHVybiB2YWxpZCByZWN0YW5nbGVzIGZvciBlbXB0eSByYW5nZXNcbiAgICAgICAgICAgICAgICBpZiAocG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb20tLTtcbiAgICAgICAgICAgICAgICAgICAgZmxhdHRlbiA9IDE7XG4gICAgICAgICAgICAgICAgfSAvLyBGSVhNRSB0aGlzIGlzIHdyb25nIGluIFJUTCB0ZXh0XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodG8gPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdG8rKztcbiAgICAgICAgICAgICAgICAgICAgZmxhdHRlbiA9IC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzaWRlIDwgMClcbiAgICAgICAgICAgICAgICBmcm9tLS07XG4gICAgICAgICAgICBlbHNlIGlmICh0byA8IGxlbmd0aClcbiAgICAgICAgICAgICAgICB0bysrO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZWN0cyA9IHRleHRSYW5nZSh0aGlzLmRvbSwgZnJvbSwgdG8pLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgIGlmICghcmVjdHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCByZWN0ID0gcmVjdHNbKGZsYXR0ZW4gPyBmbGF0dGVuIDwgMCA6IHNpZGUgPj0gMCkgPyAwIDogcmVjdHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChicm93c2VyLnNhZmFyaSAmJiAhZmxhdHRlbiAmJiByZWN0LndpZHRoID09IDApXG4gICAgICAgICAgICByZWN0ID0gQXJyYXkucHJvdG90eXBlLmZpbmQuY2FsbChyZWN0cywgciA9PiByLndpZHRoKSB8fCByZWN0O1xuICAgICAgICByZXR1cm4gZmxhdHRlbiA/IGZsYXR0ZW5SZWN0KHJlY3QsIGZsYXR0ZW4gPCAwKSA6IHJlY3QgfHwgbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIG9mKHRleHQsIGRvbSkge1xuICAgICAgICBsZXQgdGlsZSA9IG5ldyBUZXh0VGlsZShkb20gfHwgZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCksIHRleHQpO1xuICAgICAgICBpZiAoIWRvbSlcbiAgICAgICAgICAgIHRpbGUuZmxhZ3MgfD0gMiAvKiBUaWxlRmxhZy5TeW5jZWQgKi87XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgIH1cbn1cbmNsYXNzIFdpZGdldFRpbGUgZXh0ZW5kcyBUaWxlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIGxlbmd0aCwgd2lkZ2V0LCBmbGFncykge1xuICAgICAgICBzdXBlcihkb20sIGxlbmd0aCwgZmxhZ3MpO1xuICAgICAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcbiAgICB9XG4gICAgaXNXaWRnZXQoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgZ2V0IGlzSGlkZGVuKCkgeyByZXR1cm4gdGhpcy53aWRnZXQuaXNIaWRkZW47IH1cbiAgICBjb3ZlcnMoc2lkZSkge1xuICAgICAgICBpZiAodGhpcy5mbGFncyAmIDQ4IC8qIFRpbGVGbGFnLlBvaW50V2lkZ2V0ICovKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gKHRoaXMuZmxhZ3MgJiAoc2lkZSA8IDAgPyA2NCAvKiBUaWxlRmxhZy5JbmNTdGFydCAqLyA6IDEyOCAvKiBUaWxlRmxhZy5JbmNFbmQgKi8pKSA+IDA7XG4gICAgfVxuICAgIGNvb3Jkc0luKHBvcywgc2lkZSkgeyByZXR1cm4gdGhpcy5jb29yZHNJbldpZGdldChwb3MsIHNpZGUsIGZhbHNlKTsgfVxuICAgIGNvb3Jkc0luV2lkZ2V0KHBvcywgc2lkZSwgYmxvY2spIHtcbiAgICAgICAgbGV0IGN1c3RvbSA9IHRoaXMud2lkZ2V0LmNvb3Jkc0F0KHRoaXMuZG9tLCBwb3MsIHNpZGUpO1xuICAgICAgICBpZiAoY3VzdG9tKVxuICAgICAgICAgICAgcmV0dXJuIGN1c3RvbTtcbiAgICAgICAgaWYgKGJsb2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gZmxhdHRlblJlY3QodGhpcy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHRoaXMubGVuZ3RoID8gcG9zID09IDAgOiBzaWRlIDw9IDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IHJlY3RzID0gdGhpcy5kb20uZ2V0Q2xpZW50UmVjdHMoKSwgcmVjdCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIXJlY3RzLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGxldCBmcm9tQmFjayA9ICh0aGlzLmZsYWdzICYgMTYgLyogVGlsZUZsYWcuQmVmb3JlICovKSA/IHRydWUgOiAodGhpcy5mbGFncyAmIDMyIC8qIFRpbGVGbGFnLkFmdGVyICovKSA/IGZhbHNlIDogcG9zID4gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBmcm9tQmFjayA/IHJlY3RzLmxlbmd0aCAtIDEgOiAwOzsgaSArPSAoZnJvbUJhY2sgPyAtMSA6IDEpKSB7XG4gICAgICAgICAgICAgICAgcmVjdCA9IHJlY3RzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPiAwID8gaSA9PSAwIDogaSA9PSByZWN0cy5sZW5ndGggLSAxIHx8IHJlY3QudG9wIDwgcmVjdC5ib3R0b20pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZsYXR0ZW5SZWN0KHJlY3QsICFmcm9tQmFjayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG92ZXJyaWRlRE9NVGV4dCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBUZXh0LmVtcHR5O1xuICAgICAgICBsZXQgeyByb290IH0gPSB0aGlzO1xuICAgICAgICBpZiAoIXJvb3QpXG4gICAgICAgICAgICByZXR1cm4gVGV4dC5lbXB0eTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5wb3NBdFN0YXJ0O1xuICAgICAgICByZXR1cm4gcm9vdC52aWV3LnN0YXRlLmRvYy5zbGljZShzdGFydCwgc3RhcnQgKyB0aGlzLmxlbmd0aCk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy53aWRnZXQuZGVzdHJveSh0aGlzLmRvbSk7XG4gICAgfVxuICAgIHN0YXRpYyBvZih3aWRnZXQsIHZpZXcsIGxlbmd0aCwgZmxhZ3MsIGRvbSkge1xuICAgICAgICBpZiAoIWRvbSkge1xuICAgICAgICAgICAgZG9tID0gd2lkZ2V0LnRvRE9NKHZpZXcpO1xuICAgICAgICAgICAgaWYgKCF3aWRnZXQuZWRpdGFibGUpXG4gICAgICAgICAgICAgICAgZG9tLmNvbnRlbnRFZGl0YWJsZSA9IFwiZmFsc2VcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFdpZGdldFRpbGUoZG9tLCBsZW5ndGgsIHdpZGdldCwgZmxhZ3MpO1xuICAgIH1cbn1cbi8vIFRoZXNlIGFyZSBkcmF3biBhcm91bmQgdW5lZGl0YWJsZSB3aWRnZXRzIHRvIGF2b2lkIGEgbnVtYmVyIG9mXG4vLyBicm93c2VyIGJ1Z3MgdGhhdCBzaG93IHVwIHdoZW4gdGhlIGN1cnNvciBpcyBkaXJlY3RseSBuZXh0IHRvXG4vLyB1bmVkaXRhYmxlIGlubGluZSBjb250ZW50LlxuY2xhc3MgV2lkZ2V0QnVmZmVyVGlsZSBleHRlbmRzIFRpbGUge1xuICAgIGNvbnN0cnVjdG9yKGZsYWdzKSB7XG4gICAgICAgIGxldCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICBpbWcuY2xhc3NOYW1lID0gXCJjbS13aWRnZXRCdWZmZXJcIjtcbiAgICAgICAgaW1nLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgc3VwZXIoaW1nLCAwLCBmbGFncyk7XG4gICAgfVxuICAgIGdldCBpc0hpZGRlbigpIHsgcmV0dXJuIHRydWU7IH1cbiAgICBnZXQgb3ZlcnJpZGVET01UZXh0KCkgeyByZXR1cm4gVGV4dC5lbXB0eTsgfVxuICAgIGNvb3Jkc0luKHBvcykgeyByZXR1cm4gdGhpcy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IH1cbn1cbi8vIFJlcHJlc2VudHMgYSBwb3NpdGlvbiBpbiB0aGUgdGlsZSB0cmVlLlxuY2xhc3MgVGlsZVBvaW50ZXIge1xuICAgIGNvbnN0cnVjdG9yKHRvcCkge1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5iZWZvcmVCcmVhayA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBhcmVudHMgPSBbXTtcbiAgICAgICAgdGhpcy50aWxlID0gdG9wO1xuICAgIH1cbiAgICAvLyBBZHZhbmNlIGJ5IHRoZSBnaXZlbiBkaXN0YW5jZS4gSWYgc2lkZSBpcyAtMSwgc3RvcCBsZWF2aW5nIG9yXG4gICAgLy8gZW50ZXJpbmcgdGlsZXMsIG9yIHNraXBwaW5nIHplcm8tbGVuZ3RoIHRpbGVzLCBvbmNlIHRoZSBkaXN0YW5jZVxuICAgIC8vIGhhcyBiZWVuIHRyYXZlcnNlZC4gV2hlbiBzaWRlIGlzIDEsIGxlYXZlLCBlbnRlciwgb3Igc2tpcFxuICAgIC8vIGV2ZXJ5dGhpbmcgYXQgdGhlIGVuZCBwb3NpdGlvbi5cbiAgICBhZHZhbmNlKGRpc3QsIHNpZGUsIHdhbGtlcikge1xuICAgICAgICBsZXQgeyB0aWxlLCBpbmRleCwgYmVmb3JlQnJlYWssIHBhcmVudHMgfSA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChkaXN0IHx8IHNpZGUgPiAwKSB7XG4gICAgICAgICAgICBpZiAoIXRpbGUuaXNDb21wb3NpdGUoKSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSB0aWxlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBiZWZvcmVCcmVhayA9ICEhdGlsZS5icmVha0FmdGVyO1xuICAgICAgICAgICAgICAgICAgICAoeyB0aWxlLCBpbmRleCB9ID0gcGFyZW50cy5wb3AoKSk7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFkaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRha2UgPSBNYXRoLm1pbihkaXN0LCB0aWxlLmxlbmd0aCAtIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdhbGtlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhbGtlci5za2lwKHRpbGUsIGluZGV4LCBpbmRleCArIHRha2UpO1xuICAgICAgICAgICAgICAgICAgICBkaXN0IC09IHRha2U7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ICs9IHRha2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYmVmb3JlQnJlYWspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWRpc3QpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmICh3YWxrZXIpXG4gICAgICAgICAgICAgICAgICAgIHdhbGtlci5icmVhaygpO1xuICAgICAgICAgICAgICAgIGRpc3QtLTtcbiAgICAgICAgICAgICAgICBiZWZvcmVCcmVhayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXggPT0gdGlsZS5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWRpc3QgJiYgIXBhcmVudHMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBpZiAod2Fsa2VyKVxuICAgICAgICAgICAgICAgICAgICB3YWxrZXIubGVhdmUodGlsZSk7XG4gICAgICAgICAgICAgICAgYmVmb3JlQnJlYWsgPSAhIXRpbGUuYnJlYWtBZnRlcjtcbiAgICAgICAgICAgICAgICAoeyB0aWxlLCBpbmRleCB9ID0gcGFyZW50cy5wb3AoKSk7XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gdGlsZS5jaGlsZHJlbltpbmRleF0sIGJyayA9IG5leHQuYnJlYWtBZnRlcjtcbiAgICAgICAgICAgICAgICBpZiAoKHNpZGUgPiAwID8gbmV4dC5sZW5ndGggPD0gZGlzdCA6IG5leHQubGVuZ3RoIDwgZGlzdCkgJiZcbiAgICAgICAgICAgICAgICAgICAgKCF3YWxrZXIgfHwgd2Fsa2VyLnNraXAobmV4dCwgMCwgbmV4dC5sZW5ndGgpICE9PSBmYWxzZSB8fCAhbmV4dC5pc0NvbXBvc2l0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlQnJlYWsgPSAhIWJyaztcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgZGlzdCAtPSBuZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaCh7IHRpbGUsIGluZGV4IH0pO1xuICAgICAgICAgICAgICAgICAgICB0aWxlID0gbmV4dDtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAod2Fsa2VyICYmIG5leHQuaXNDb21wb3NpdGUoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhbGtlci5lbnRlcihuZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aWxlID0gdGlsZTtcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLmJlZm9yZUJyZWFrID0gYmVmb3JlQnJlYWs7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXQgcm9vdCgpIHsgcmV0dXJuICh0aGlzLnBhcmVudHMubGVuZ3RoID8gdGhpcy5wYXJlbnRzWzBdLnRpbGUgOiB0aGlzLnRpbGUpOyB9XG59XG5cbi8vIFVzZWQgdG8gdHJhY2sgb3BlbiBibG9jayB3cmFwcGVyc1xuY2xhc3MgT3BlbldyYXBwZXIge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvLCB3cmFwcGVyLCByYW5rKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy53cmFwcGVyID0gd3JhcHBlcjtcbiAgICAgICAgdGhpcy5yYW5rID0gcmFuaztcbiAgICB9XG59XG4vLyBUaGlzIGNsYXNzIGJ1aWxkcyB1cCBhIG5ldyBkb2N1bWVudCB0aWxlIHVzaW5nIGlucHV0IGZyb20gZWl0aGVyXG4vLyBpdGVyYXRpb24gb3ZlciB0aGUgb2xkIHRyZWUgb3IgaXRlcmF0aW9uIG92ZXIgdGhlIGRvY3VtZW50ICtcbi8vIGRlY29yYXRpb25zLiBUaGUgYWRkKiBtZXRob2RzIGVtaXQgZWxlbWVudHMgaW50byB0aGUgdGlsZVxuLy8gc3RydWN0dXJlLiBUbyBhdm9pZCBhd2t3YXJkIHN5bmNocm9uaXphdGlvbiBpc3N1ZXMsIG1hcmtzIGFuZCBibG9ja1xuLy8gd3JhcHBlcnMgYXJlIHRyZWF0ZWQgYXMgYmVsb25naW5nIHRvIHRvIHRoZWlyIGNvbnRlbnQsIHJhdGhlciB0aGFuXG4vLyBvcGVuZWQvY2xvc2VkIGluZGVwZW5kZW50bHkuXG4vL1xuLy8gQWxsIGNvbXBvc2l0ZSB0aWxlcyB0aGF0IGFyZSB0b3VjaGVkIGJ5IGNoYW5nZXMgYXJlIHJlYnVpbHQsXG4vLyByZXVzaW5nIGFzIG11Y2ggb2YgdGhlIG9sZCB0cmVlIChlaXRoZXIgd2hvbGUgbm9kZXMgb3IganVzdCBET01cbi8vIGVsZW1lbnRzKSBhcyBwb3NzaWJsZS4gVGhlIG5ldyB0cmVlIGlzIGJ1aWx0IHdpdGhvdXQgdGhlIFN5bmNlZFxuLy8gZmxhZywgYW5kIHRoZW4gc3luY2VkIChkdXJpbmcgd2hpY2ggRE9NIHBhcmVudC9jaGlsZCByZWxhdGlvbnMgYXJlXG4vLyBmaXhlZCB1cCwgdGV4dCBub2RlcyBmaWxsZWQgaW4sIGFuZCBhdHRyaWJ1dGVzIGFkZGVkKSBpbiBhIHNlY29uZFxuLy8gcGhhc2UuXG5jbGFzcyBUaWxlQnVpbGRlciB7XG4gICAgY29uc3RydWN0b3IoY2FjaGUsIHJvb3QsIGJsb2NrV3JhcHBlcnMpIHtcbiAgICAgICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuICAgICAgICB0aGlzLnJvb3QgPSByb290O1xuICAgICAgICB0aGlzLmJsb2NrV3JhcHBlcnMgPSBibG9ja1dyYXBwZXJzO1xuICAgICAgICB0aGlzLmN1ckxpbmUgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RCbG9jayA9IG51bGw7XG4gICAgICAgIHRoaXMuYWZ0ZXJXaWRnZXQgPSBudWxsO1xuICAgICAgICB0aGlzLnBvcyA9IDA7XG4gICAgICAgIHRoaXMud3JhcHBlcnMgPSBbXTtcbiAgICAgICAgdGhpcy53cmFwcGVyUG9zID0gMDtcbiAgICB9XG4gICAgYWRkVGV4dCh0ZXh0LCBtYXJrcywgb3BlblN0YXJ0LCB0aWxlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5mbHVzaEJ1ZmZlcigpO1xuICAgICAgICBsZXQgcGFyZW50ID0gdGhpcy5lbnN1cmVNYXJrcyhtYXJrcywgb3BlblN0YXJ0KTtcbiAgICAgICAgbGV0IHByZXYgPSBwYXJlbnQubGFzdENoaWxkO1xuICAgICAgICBpZiAocHJldiAmJiBwcmV2LmlzVGV4dCgpICYmICEocHJldi5mbGFncyAmIDggLyogVGlsZUZsYWcuQ29tcG9zaXRpb24gKi8pKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlLnJldXNlZC5zZXQocHJldiwgMiAvKiBSZXVzZWQuRE9NICovKTtcbiAgICAgICAgICAgIGxldCB0aWxlID0gcGFyZW50LmNoaWxkcmVuW3BhcmVudC5jaGlsZHJlbi5sZW5ndGggLSAxXSA9IG5ldyBUZXh0VGlsZShwcmV2LmRvbSwgcHJldi50ZXh0ICsgdGV4dCk7XG4gICAgICAgICAgICB0aWxlLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmQodGlsZSB8fCBUZXh0VGlsZS5vZih0ZXh0LCAoX2EgPSB0aGlzLmNhY2hlLmZpbmQoVGV4dFRpbGUpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZG9tKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wb3MgKz0gdGV4dC5sZW5ndGg7XG4gICAgICAgIHRoaXMuYWZ0ZXJXaWRnZXQgPSBudWxsO1xuICAgIH1cbiAgICBhZGRDb21wb3NpdGlvbihjb21wb3NpdGlvbiwgY29udGV4dCkge1xuICAgICAgICBsZXQgbGluZSA9IHRoaXMuY3VyTGluZTtcbiAgICAgICAgaWYgKGxpbmUuZG9tICE9IGNvbnRleHQubGluZS5kb20pIHtcbiAgICAgICAgICAgIGxpbmUuc2V0RE9NKHRoaXMuY2FjaGUucmV1c2VkLmhhcyhjb250ZXh0LmxpbmUpID8gZnJlZU5vZGUoY29udGV4dC5saW5lLmRvbSkgOiBjb250ZXh0LmxpbmUuZG9tKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUucmV1c2VkLnNldChjb250ZXh0LmxpbmUsIDIgLyogUmV1c2VkLkRPTSAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGhlYWQgPSBsaW5lO1xuICAgICAgICBmb3IgKGxldCBpID0gY29udGV4dC5tYXJrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IG1hcmsgPSBjb250ZXh0Lm1hcmtzW2ldO1xuICAgICAgICAgICAgbGV0IGxhc3QgPSBoZWFkLmxhc3RDaGlsZDtcbiAgICAgICAgICAgIGlmIChsYXN0IGluc3RhbmNlb2YgTWFya1RpbGUgJiYgbGFzdC5tYXJrLmVxKG1hcmsubWFyaykpIHtcbiAgICAgICAgICAgICAgICBpZiAobGFzdC5kb20gIT0gbWFyay5kb20pXG4gICAgICAgICAgICAgICAgICAgIGxhc3Quc2V0RE9NKGZyZWVOb2RlKG1hcmsuZG9tKSk7XG4gICAgICAgICAgICAgICAgaGVhZCA9IGxhc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYWNoZS5yZXVzZWQuZ2V0KG1hcmspKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlID0gVGlsZS5nZXQobWFyay5kb20pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGlsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGUuc2V0RE9NKGZyZWVOb2RlKG1hcmsuZG9tKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBudyA9IE1hcmtUaWxlLm9mKG1hcmsubWFyaywgbWFyay5kb20pO1xuICAgICAgICAgICAgICAgIGhlYWQuYXBwZW5kKG53KTtcbiAgICAgICAgICAgICAgICBoZWFkID0gbnc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNhY2hlLnJldXNlZC5zZXQobWFyaywgMiAvKiBSZXVzZWQuRE9NICovKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgb2xkVGlsZSA9IFRpbGUuZ2V0KGNvbXBvc2l0aW9uLnRleHQpO1xuICAgICAgICBpZiAob2xkVGlsZSlcbiAgICAgICAgICAgIHRoaXMuY2FjaGUucmV1c2VkLnNldChvbGRUaWxlLCAyIC8qIFJldXNlZC5ET00gKi8pO1xuICAgICAgICBsZXQgdGV4dCA9IG5ldyBUZXh0VGlsZShjb21wb3NpdGlvbi50ZXh0LCBjb21wb3NpdGlvbi50ZXh0Lm5vZGVWYWx1ZSk7XG4gICAgICAgIHRleHQuZmxhZ3MgfD0gOCAvKiBUaWxlRmxhZy5Db21wb3NpdGlvbiAqLztcbiAgICAgICAgaGVhZC5hcHBlbmQodGV4dCk7XG4gICAgfVxuICAgIGFkZElubGluZVdpZGdldCh3aWRnZXQsIG1hcmtzLCBvcGVuU3RhcnQpIHtcbiAgICAgICAgLy8gQWRqYWNlbnQgc2FtZS1zaWRlLWZhY2luZyBub24tcmVwbGFjaW5nIHdpZGdldHMgZG9uJ3QgbmVlZCBidWZmZXJzIGJldHdlZW4gdGhlbVxuICAgICAgICBsZXQgbm9TcGFjZSA9IHRoaXMuYWZ0ZXJXaWRnZXQgJiYgKHdpZGdldC5mbGFncyAmIDQ4IC8qIFRpbGVGbGFnLlBvaW50V2lkZ2V0ICovKSAmJlxuICAgICAgICAgICAgKHRoaXMuYWZ0ZXJXaWRnZXQuZmxhZ3MgJiA0OCAvKiBUaWxlRmxhZy5Qb2ludFdpZGdldCAqLykgPT0gKHdpZGdldC5mbGFncyAmIDQ4IC8qIFRpbGVGbGFnLlBvaW50V2lkZ2V0ICovKTtcbiAgICAgICAgaWYgKCFub1NwYWNlKVxuICAgICAgICAgICAgdGhpcy5mbHVzaEJ1ZmZlcigpO1xuICAgICAgICBsZXQgcGFyZW50ID0gdGhpcy5lbnN1cmVNYXJrcyhtYXJrcywgb3BlblN0YXJ0KTtcbiAgICAgICAgaWYgKCFub1NwYWNlICYmICEod2lkZ2V0LmZsYWdzICYgMTYgLyogVGlsZUZsYWcuQmVmb3JlICovKSlcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmQodGhpcy5nZXRCdWZmZXIoMSkpO1xuICAgICAgICBwYXJlbnQuYXBwZW5kKHdpZGdldCk7XG4gICAgICAgIHRoaXMucG9zICs9IHdpZGdldC5sZW5ndGg7XG4gICAgICAgIHRoaXMuYWZ0ZXJXaWRnZXQgPSB3aWRnZXQ7XG4gICAgfVxuICAgIGFkZE1hcmsodGlsZSwgbWFya3MsIG9wZW5TdGFydCkge1xuICAgICAgICB0aGlzLmZsdXNoQnVmZmVyKCk7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmVuc3VyZU1hcmtzKG1hcmtzLCBvcGVuU3RhcnQpO1xuICAgICAgICBwYXJlbnQuYXBwZW5kKHRpbGUpO1xuICAgICAgICB0aGlzLnBvcyArPSB0aWxlLmxlbmd0aDtcbiAgICAgICAgdGhpcy5hZnRlcldpZGdldCA9IG51bGw7XG4gICAgfVxuICAgIGFkZEJsb2NrV2lkZ2V0KHdpZGdldCkge1xuICAgICAgICB0aGlzLmdldEJsb2NrUG9zKCkuYXBwZW5kKHdpZGdldCk7XG4gICAgICAgIHRoaXMucG9zICs9IHdpZGdldC5sZW5ndGg7XG4gICAgICAgIHRoaXMubGFzdEJsb2NrID0gd2lkZ2V0O1xuICAgICAgICB0aGlzLmVuZExpbmUoKTtcbiAgICB9XG4gICAgY29udGludWVXaWRnZXQobGVuZ3RoKSB7XG4gICAgICAgIGxldCB3aWRnZXQgPSB0aGlzLmFmdGVyV2lkZ2V0IHx8IHRoaXMubGFzdEJsb2NrO1xuICAgICAgICB3aWRnZXQubGVuZ3RoICs9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5wb3MgKz0gbGVuZ3RoO1xuICAgIH1cbiAgICBhZGRMaW5lU3RhcnQoYXR0cnMsIGRvbSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICghYXR0cnMpXG4gICAgICAgICAgICBhdHRycyA9IGxpbmVCYXNlQXR0cnM7XG4gICAgICAgIGxldCB0aWxlID0gTGluZVRpbGUuc3RhcnQoYXR0cnMsIGRvbSB8fCAoKF9hID0gdGhpcy5jYWNoZS5maW5kKExpbmVUaWxlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRvbSksICEhZG9tKTtcbiAgICAgICAgdGhpcy5nZXRCbG9ja1BvcygpLmFwcGVuZCh0aGlzLmxhc3RCbG9jayA9IHRoaXMuY3VyTGluZSA9IHRpbGUpO1xuICAgIH1cbiAgICBhZGRMaW5lKHRpbGUpIHtcbiAgICAgICAgdGhpcy5nZXRCbG9ja1BvcygpLmFwcGVuZCh0aWxlKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gdGlsZS5sZW5ndGg7XG4gICAgICAgIHRoaXMubGFzdEJsb2NrID0gdGlsZTtcbiAgICAgICAgdGhpcy5lbmRMaW5lKCk7XG4gICAgfVxuICAgIGFkZEJyZWFrKCkge1xuICAgICAgICB0aGlzLmxhc3RCbG9jay5mbGFncyB8PSAxIC8qIFRpbGVGbGFnLkJyZWFrQWZ0ZXIgKi87XG4gICAgICAgIHRoaXMuZW5kTGluZSgpO1xuICAgICAgICB0aGlzLnBvcysrO1xuICAgIH1cbiAgICBhZGRMaW5lU3RhcnRJZk5vdENvdmVyZWQoYXR0cnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJsb2NrUG9zQ292ZXJlZCgpKVxuICAgICAgICAgICAgdGhpcy5hZGRMaW5lU3RhcnQoYXR0cnMpO1xuICAgIH1cbiAgICBlbnN1cmVMaW5lKGF0dHJzKSB7XG4gICAgICAgIGlmICghdGhpcy5jdXJMaW5lKVxuICAgICAgICAgICAgdGhpcy5hZGRMaW5lU3RhcnQoYXR0cnMpO1xuICAgIH1cbiAgICBlbnN1cmVNYXJrcyhtYXJrcywgb3BlblN0YXJ0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMuY3VyTGluZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IG1hcmtzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgbWFyayA9IG1hcmtzW2ldLCBsYXN0O1xuICAgICAgICAgICAgaWYgKG9wZW5TdGFydCA+IDAgJiYgKGxhc3QgPSBwYXJlbnQubGFzdENoaWxkKSAmJiBsYXN0IGluc3RhbmNlb2YgTWFya1RpbGUgJiYgbGFzdC5tYXJrLmVxKG1hcmspKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50ID0gbGFzdDtcbiAgICAgICAgICAgICAgICBvcGVuU3RhcnQtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB0aWxlID0gTWFya1RpbGUub2YobWFyaywgKF9hID0gdGhpcy5jYWNoZS5maW5kKE1hcmtUaWxlLCBtID0+IG0ubWFyay5lcShtYXJrKSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kb20pO1xuICAgICAgICAgICAgICAgIHBhcmVudC5hcHBlbmQodGlsZSk7XG4gICAgICAgICAgICAgICAgcGFyZW50ID0gdGlsZTtcbiAgICAgICAgICAgICAgICBvcGVuU3RhcnQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuICAgIGVuZExpbmUoKSB7XG4gICAgICAgIGlmICh0aGlzLmN1ckxpbmUpIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hCdWZmZXIoKTtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gdGhpcy5jdXJMaW5lLmxhc3RDaGlsZDtcbiAgICAgICAgICAgIGlmICghbGFzdCB8fCAhaGFzQ29udGVudCh0aGlzLmN1ckxpbmUsIGZhbHNlKSB8fFxuICAgICAgICAgICAgICAgIGxhc3QuZG9tLm5vZGVOYW1lICE9IFwiQlJcIiAmJiBsYXN0LmlzV2lkZ2V0KCkgJiYgIShicm93c2VyLmlvcyAmJiBoYXNDb250ZW50KHRoaXMuY3VyTGluZSwgdHJ1ZSkpKVxuICAgICAgICAgICAgICAgIHRoaXMuY3VyTGluZS5hcHBlbmQodGhpcy5jYWNoZS5maW5kV2lkZ2V0KEJyZWFrV2lkZ2V0LCAwLCAzMiAvKiBUaWxlRmxhZy5BZnRlciAqLykgfHxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFdpZGdldFRpbGUoQnJlYWtXaWRnZXQudG9ET00oKSwgMCwgQnJlYWtXaWRnZXQsIDMyIC8qIFRpbGVGbGFnLkFmdGVyICovKSk7XG4gICAgICAgICAgICB0aGlzLmN1ckxpbmUgPSB0aGlzLmFmdGVyV2lkZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVCbG9ja1dyYXBwZXJzKCkge1xuICAgICAgICBpZiAodGhpcy53cmFwcGVyUG9zID4gdGhpcy5wb3MgKyAxMDAwMCAvKiBDLldyYXBwZXJSZXNldCAqLykge1xuICAgICAgICAgICAgdGhpcy5ibG9ja1dyYXBwZXJzLmdvdG8odGhpcy5wb3MpO1xuICAgICAgICAgICAgdGhpcy53cmFwcGVycy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLndyYXBwZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICAgICAgaWYgKHRoaXMud3JhcHBlcnNbaV0udG8gPCB0aGlzLnBvcylcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBwZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgZm9yIChsZXQgY3VyID0gdGhpcy5ibG9ja1dyYXBwZXJzOyBjdXIudmFsdWUgJiYgY3VyLmZyb20gPD0gdGhpcy5wb3M7IGN1ci5uZXh0KCkpXG4gICAgICAgICAgICBpZiAoY3VyLnRvID49IHRoaXMucG9zKSB7XG4gICAgICAgICAgICAgICAgbGV0IHdyYXAgPSBuZXcgT3BlbldyYXBwZXIoY3VyLmZyb20sIGN1ci50bywgY3VyLnZhbHVlLCBjdXIucmFuayksIGkgPSB0aGlzLndyYXBwZXJzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaSA+IDAgJiYgKHRoaXMud3JhcHBlcnNbaSAtIDFdLnJhbmsgLSB3cmFwLnJhbmsgfHwgdGhpcy53cmFwcGVyc1tpIC0gMV0udG8gLSB3cmFwLnRvKSA8IDApXG4gICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBwZXJzLnNwbGljZShpLCAwLCB3cmFwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgdGhpcy53cmFwcGVyUG9zID0gdGhpcy5wb3M7XG4gICAgfVxuICAgIGdldEJsb2NrUG9zKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMudXBkYXRlQmxvY2tXcmFwcGVycygpO1xuICAgICAgICBsZXQgcGFyZW50ID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKGxldCB3cmFwIG9mIHRoaXMud3JhcHBlcnMpIHtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gcGFyZW50Lmxhc3RDaGlsZDtcbiAgICAgICAgICAgIGlmICh3cmFwLmZyb20gPCB0aGlzLnBvcyAmJiBsYXN0IGluc3RhbmNlb2YgQmxvY2tXcmFwcGVyVGlsZSAmJiBsYXN0LndyYXBwZXIuZXEod3JhcC53cmFwcGVyKSkge1xuICAgICAgICAgICAgICAgIHBhcmVudCA9IGxhc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgdGlsZSA9IEJsb2NrV3JhcHBlclRpbGUub2Yod3JhcC53cmFwcGVyLCAoX2EgPSB0aGlzLmNhY2hlLmZpbmQoQmxvY2tXcmFwcGVyVGlsZSwgdCA9PiB0LndyYXBwZXIuZXEod3JhcC53cmFwcGVyKSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kb20pO1xuICAgICAgICAgICAgICAgIHBhcmVudC5hcHBlbmQodGlsZSk7XG4gICAgICAgICAgICAgICAgcGFyZW50ID0gdGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgIH1cbiAgICBibG9ja1Bvc0NvdmVyZWQoKSB7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5sYXN0QmxvY2s7XG4gICAgICAgIHJldHVybiBsYXN0ICE9IG51bGwgJiYgIWxhc3QuYnJlYWtBZnRlciAmJiAoIWxhc3QuaXNXaWRnZXQoKSB8fCAobGFzdC5mbGFncyAmICgzMiAvKiBUaWxlRmxhZy5BZnRlciAqLyB8IDEyOCAvKiBUaWxlRmxhZy5JbmNFbmQgKi8pKSA+IDApO1xuICAgIH1cbiAgICBnZXRCdWZmZXIoc2lkZSkge1xuICAgICAgICBsZXQgZmxhZ3MgPSAyIC8qIFRpbGVGbGFnLlN5bmNlZCAqLyB8IChzaWRlIDwgMCA/IDE2IC8qIFRpbGVGbGFnLkJlZm9yZSAqLyA6IDMyIC8qIFRpbGVGbGFnLkFmdGVyICovKTtcbiAgICAgICAgbGV0IGZvdW5kID0gdGhpcy5jYWNoZS5maW5kKFdpZGdldEJ1ZmZlclRpbGUsIHVuZGVmaW5lZCwgMSAvKiBSZXVzZWQuRnVsbCAqLyk7XG4gICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgIGZvdW5kLmZsYWdzID0gZmxhZ3M7XG4gICAgICAgIHJldHVybiBmb3VuZCB8fCBuZXcgV2lkZ2V0QnVmZmVyVGlsZShmbGFncyk7XG4gICAgfVxuICAgIGZsdXNoQnVmZmVyKCkge1xuICAgICAgICBpZiAodGhpcy5hZnRlcldpZGdldCAmJiAhKHRoaXMuYWZ0ZXJXaWRnZXQuZmxhZ3MgJiAzMiAvKiBUaWxlRmxhZy5BZnRlciAqLykpIHtcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJXaWRnZXQucGFyZW50LmFwcGVuZCh0aGlzLmdldEJ1ZmZlcigtMSkpO1xuICAgICAgICAgICAgdGhpcy5hZnRlcldpZGdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBIZWxwcyBnZXR0aW5nIGVmZmljaWVudCBhY2Nlc3MgdG8gdGhlIGRvY3VtZW50IHRleHQuXG5jbGFzcyBUZXh0U3RyZWFtIHtcbiAgICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAgICAgdGhpcy5za2lwQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnRleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLnRleHRPZmYgPSAwO1xuICAgICAgICB0aGlzLmN1cnNvciA9IGRvYy5pdGVyKCk7XG4gICAgfVxuICAgIHNraXAobGVuKSB7XG4gICAgICAgIC8vIEFkdmFuY2UgdGhlIGl0ZXJhdG9yIHBhc3QgdGhlIHJlcGxhY2VkIGNvbnRlbnRcbiAgICAgICAgaWYgKHRoaXMudGV4dE9mZiArIGxlbiA8PSB0aGlzLnRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnRleHRPZmYgKz0gbGVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5za2lwQ291bnQgKz0gbGVuIC0gKHRoaXMudGV4dC5sZW5ndGggLSB0aGlzLnRleHRPZmYpO1xuICAgICAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMudGV4dE9mZiA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV4dChtYXhMZW4pIHtcbiAgICAgICAgaWYgKHRoaXMudGV4dE9mZiA9PSB0aGlzLnRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgeyB2YWx1ZSwgbGluZUJyZWFrLCBkb25lIH0gPSB0aGlzLmN1cnNvci5uZXh0KHRoaXMuc2tpcENvdW50KTtcbiAgICAgICAgICAgIHRoaXMuc2tpcENvdW50ID0gMDtcbiAgICAgICAgICAgIGlmIChkb25lKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJhbiBvdXQgb2YgdGV4dCBjb250ZW50IHdoZW4gZHJhd2luZyBpbmxpbmUgdmlld3NcIik7XG4gICAgICAgICAgICB0aGlzLnRleHQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnRleHRPZmYgPSBNYXRoLm1pbihtYXhMZW4sIHZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gbGluZUJyZWFrID8gbnVsbCA6IHZhbHVlLnNsaWNlKDAsIGxlbik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGVuZCA9IE1hdGgubWluKHRoaXMudGV4dC5sZW5ndGgsIHRoaXMudGV4dE9mZiArIG1heExlbik7XG4gICAgICAgIGxldCBjaGFycyA9IHRoaXMudGV4dC5zbGljZSh0aGlzLnRleHRPZmYsIGVuZCk7XG4gICAgICAgIHRoaXMudGV4dE9mZiA9IGVuZDtcbiAgICAgICAgcmV0dXJuIGNoYXJzO1xuICAgIH1cbn1cbi8vIEFzc2lnbiB0aGUgdGlsZSBjbGFzc2VzIGJ1Y2tldCBudW1iZXJzIGZvciBjYWNoaW5nLlxuY29uc3QgYnVja2V0cyA9IFtXaWRnZXRUaWxlLCBMaW5lVGlsZSwgVGV4dFRpbGUsIE1hcmtUaWxlLCBXaWRnZXRCdWZmZXJUaWxlLCBCbG9ja1dyYXBwZXJUaWxlLCBEb2NUaWxlXTtcbmZvciAobGV0IGkgPSAwOyBpIDwgYnVja2V0cy5sZW5ndGg7IGkrKylcbiAgICBidWNrZXRzW2ldLmJ1Y2tldCA9IGk7XG4vLyBMZWFmIHRpbGVzIGFuZCBsaW5lIHRpbGVzIG1heSBiZSByZXVzZWQgaW4gdGhlaXIgZW50aXJldHkuIEFsbFxuLy8gb3RoZXJzIHdpbGwgZ2V0IG5ldyB0aWxlcyBhbGxvY2F0ZWQsIHVzaW5nIHRoZSBvbGQgRE9NIHdoZW5cbi8vIHBvc3NpYmxlLlxuY2xhc3MgVGlsZUNhY2hlIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIC8vIEJ1Y2tldHMgYXJlIGNpcmN1bGFyIGJ1ZmZlcnMsIHVzaW5nIGBpbmRleGAgYXMgdGhlIGN1cnJlbnRcbiAgICAgICAgLy8gcG9zaXRpb24uXG4gICAgICAgIHRoaXMuYnVja2V0cyA9IGJ1Y2tldHMubWFwKCgpID0+IFtdKTtcbiAgICAgICAgdGhpcy5pbmRleCA9IGJ1Y2tldHMubWFwKCgpID0+IDApO1xuICAgICAgICB0aGlzLnJldXNlZCA9IG5ldyBNYXA7XG4gICAgfVxuICAgIC8vIFB1dCBhIHRpbGUgaW4gdGhlIGNhY2hlLlxuICAgIGFkZCh0aWxlKSB7XG4gICAgICAgIGxldCBpID0gdGlsZS5jb25zdHJ1Y3Rvci5idWNrZXQsIGJ1Y2tldCA9IHRoaXMuYnVja2V0c1tpXTtcbiAgICAgICAgaWYgKGJ1Y2tldC5sZW5ndGggPCA2IC8qIEMuQnVja2V0ICovKVxuICAgICAgICAgICAgYnVja2V0LnB1c2godGlsZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGJ1Y2tldFt0aGlzLmluZGV4W2ldID0gKHRoaXMuaW5kZXhbaV0gKyAxKSAlIDYgLyogQy5CdWNrZXQgKi9dID0gdGlsZTtcbiAgICB9XG4gICAgZmluZChjbHMsIHRlc3QsIHR5cGUgPSAyIC8qIFJldXNlZC5ET00gKi8pIHtcbiAgICAgICAgbGV0IGkgPSBjbHMuYnVja2V0O1xuICAgICAgICBsZXQgYnVja2V0ID0gdGhpcy5idWNrZXRzW2ldLCBvZmYgPSB0aGlzLmluZGV4W2ldO1xuICAgICAgICBmb3IgKGxldCBqID0gYnVja2V0Lmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgICAvLyBMb29rIGF0IHRoZSBtb3N0IHJlY2VudGx5IGFkZGVkIGl0ZW1zIGZpcnN0IChsYXN0LWluLCBmaXJzdC1vdXQpXG4gICAgICAgICAgICBsZXQgaW5kZXggPSAoaiArIG9mZikgJSBidWNrZXQubGVuZ3RoLCB0aWxlID0gYnVja2V0W2luZGV4XTtcbiAgICAgICAgICAgIGlmICgoIXRlc3QgfHwgdGVzdCh0aWxlKSkgJiYgIXRoaXMucmV1c2VkLmhhcyh0aWxlKSkge1xuICAgICAgICAgICAgICAgIGJ1Y2tldC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IG9mZilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleFtpXS0tO1xuICAgICAgICAgICAgICAgIHRoaXMucmV1c2VkLnNldCh0aWxlLCB0eXBlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZmluZFdpZGdldCh3aWRnZXQsIGxlbmd0aCwgZmxhZ3MpIHtcbiAgICAgICAgbGV0IHdpZGdldHMgPSB0aGlzLmJ1Y2tldHNbMF07XG4gICAgICAgIGlmICh3aWRnZXRzLmxlbmd0aClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBwYXNzID0gMDs7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpID09IHdpZGdldHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXNzKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHBhc3MgPSAxO1xuICAgICAgICAgICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHRpbGUgPSB3aWRnZXRzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5yZXVzZWQuaGFzKHRpbGUpICYmXG4gICAgICAgICAgICAgICAgICAgIChwYXNzID09IDAgPyB0aWxlLndpZGdldC5jb21wYXJlKHdpZGdldClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGlsZS53aWRnZXQuY29uc3RydWN0b3IgPT0gd2lkZ2V0LmNvbnN0cnVjdG9yICYmIHdpZGdldC51cGRhdGVET00odGlsZS5kb20sIHRoaXMudmlldykpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZGdldHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHRoaXMuaW5kZXhbMF0pXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4WzBdLS07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWxlLndpZGdldCA9PSB3aWRnZXQgJiYgdGlsZS5sZW5ndGggPT0gbGVuZ3RoICYmICh0aWxlLmZsYWdzICYgKDQ5NiAvKiBUaWxlRmxhZy5XaWRnZXQgKi8gfCAxIC8qIFRpbGVGbGFnLkJyZWFrQWZ0ZXIgKi8pKSA9PSBmbGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXVzZWQuc2V0KHRpbGUsIDEgLyogUmV1c2VkLkZ1bGwgKi8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJldXNlZC5zZXQodGlsZSwgMiAvKiBSZXVzZWQuRE9NICovKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgV2lkZ2V0VGlsZSh0aWxlLmRvbSwgbGVuZ3RoLCB3aWRnZXQsICh0aWxlLmZsYWdzICYgfig0OTYgLyogVGlsZUZsYWcuV2lkZ2V0ICovIHwgMSAvKiBUaWxlRmxhZy5CcmVha0FmdGVyICovKSkgfCBmbGFncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHJldXNlKHRpbGUpIHtcbiAgICAgICAgdGhpcy5yZXVzZWQuc2V0KHRpbGUsIDEgLyogUmV1c2VkLkZ1bGwgKi8pO1xuICAgICAgICByZXR1cm4gdGlsZTtcbiAgICB9XG4gICAgbWF5YmVSZXVzZSh0aWxlLCB0eXBlID0gMiAvKiBSZXVzZWQuRE9NICovKSB7XG4gICAgICAgIGlmICh0aGlzLnJldXNlZC5oYXModGlsZSkpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJldXNlZC5zZXQodGlsZSwgdHlwZSk7XG4gICAgICAgIHJldHVybiB0aWxlLmRvbTtcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5idWNrZXRzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgdGhpcy5idWNrZXRzW2ldLmxlbmd0aCA9IHRoaXMuaW5kZXhbaV0gPSAwO1xuICAgIH1cbn1cbi8vIFRoaXMgY2xhc3Mgb3JnYW5pemVzIGEgcGFzcyBvdmVyIHRoZSBkb2N1bWVudCwgZ3VpZGVkIGJ5IHRoZSBhcnJheVxuLy8gb2YgcmVwbGFjZWQgcmFuZ2VzLiBGb3IgcmFuZ2VzIHRoYXQgaGF2ZW4ndCBjaGFuZ2VkLCBpdCBpdGVyYXRlc1xuLy8gdGhlIG9sZCB0cmVlIGFuZCBjb3BpZXMgaXRzIGNvbnRlbnQgaW50byB0aGUgbmV3IGRvY3VtZW50LiBGb3Jcbi8vIGNoYW5nZWQgcmFuZ2VzLCBpdCBydW5zIGEgZGVjb3JhdGlvbiBpdGVyYXRvciB0byBndWlkZSBnZW5lcmF0aW9uXG4vLyBvZiBjb250ZW50LlxuY2xhc3MgVGlsZVVwZGF0ZSB7XG4gICAgY29uc3RydWN0b3Iodmlldywgb2xkLCBibG9ja1dyYXBwZXJzLCBkZWNvcmF0aW9ucywgZGlzYWxsb3dCbG9ja0VmZmVjdHNGb3IpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IGRlY29yYXRpb25zO1xuICAgICAgICB0aGlzLmRpc2FsbG93QmxvY2tFZmZlY3RzRm9yID0gZGlzYWxsb3dCbG9ja0VmZmVjdHNGb3I7XG4gICAgICAgIHRoaXMub3BlbldpZGdldCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9wZW5NYXJrcyA9IDA7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBuZXcgVGlsZUNhY2hlKHZpZXcpO1xuICAgICAgICB0aGlzLnRleHQgPSBuZXcgVGV4dFN0cmVhbSh2aWV3LnN0YXRlLmRvYyk7XG4gICAgICAgIHRoaXMuYnVpbGRlciA9IG5ldyBUaWxlQnVpbGRlcih0aGlzLmNhY2hlLCBuZXcgRG9jVGlsZSh2aWV3LCB2aWV3LmNvbnRlbnRET00pLCBSYW5nZVNldC5pdGVyKGJsb2NrV3JhcHBlcnMpKTtcbiAgICAgICAgdGhpcy5jYWNoZS5yZXVzZWQuc2V0KG9sZCwgMiAvKiBSZXVzZWQuRE9NICovKTtcbiAgICAgICAgdGhpcy5vbGQgPSBuZXcgVGlsZVBvaW50ZXIob2xkKTtcbiAgICAgICAgdGhpcy5yZXVzZVdhbGtlciA9IHtcbiAgICAgICAgICAgIHNraXA6ICh0aWxlLCBmcm9tLCB0bykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuYWRkKHRpbGUpO1xuICAgICAgICAgICAgICAgIGlmICh0aWxlLmlzQ29tcG9zaXRlKCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnRlcjogdGlsZSA9PiB0aGlzLmNhY2hlLmFkZCh0aWxlKSxcbiAgICAgICAgICAgIGxlYXZlOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICBicmVhazogKCkgPT4geyB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJ1bihjaGFuZ2VzLCBjb21wb3NpdGlvbikge1xuICAgICAgICBsZXQgY29tcG9zaXRpb25Db250ZXh0ID0gY29tcG9zaXRpb24gJiYgdGhpcy5nZXRDb21wb3NpdGlvbkNvbnRleHQoY29tcG9zaXRpb24udGV4dCk7XG4gICAgICAgIGZvciAobGV0IHBvc0EgPSAwLCBwb3NCID0gMCwgaSA9IDA7Oykge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBpIDwgY2hhbmdlcy5sZW5ndGggPyBjaGFuZ2VzW2krK10gOiBudWxsO1xuICAgICAgICAgICAgbGV0IHNraXBBID0gbmV4dCA/IG5leHQuZnJvbUEgOiB0aGlzLm9sZC5yb290Lmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChza2lwQSA+IHBvc0EpIHtcbiAgICAgICAgICAgICAgICBsZXQgbGVuID0gc2tpcEEgLSBwb3NBO1xuICAgICAgICAgICAgICAgIHRoaXMucHJlc2VydmUobGVuLCAhaSwgIW5leHQpO1xuICAgICAgICAgICAgICAgIHBvc0EgPSBza2lwQTtcbiAgICAgICAgICAgICAgICBwb3NCICs9IGxlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbmV4dClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIC8vIENvbXBvc2l0aW9ucyBuZWVkIHRvIGJlIGhhbmRsZWQgc3BlY2lhbGx5LCBmb3JjaW5nIHRoZVxuICAgICAgICAgICAgLy8gZm9jdXNlZCB0ZXh0IG5vZGUgYW5kIGl0cyBwYXJlbnQgbm9kZXMgdG8gcmVtYWluIHN0YWJsZSBhdFxuICAgICAgICAgICAgLy8gdGhhdCBwb2ludCBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICAgICAgICBpZiAoY29tcG9zaXRpb24gJiYgbmV4dC5mcm9tQSA8PSBjb21wb3NpdGlvbi5yYW5nZS5mcm9tQSAmJiBuZXh0LnRvQSA+PSBjb21wb3NpdGlvbi5yYW5nZS50b0EpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcndhcmQobmV4dC5mcm9tQSwgY29tcG9zaXRpb24ucmFuZ2UuZnJvbUEsIGNvbXBvc2l0aW9uLnJhbmdlLmZyb21BIDwgY29tcG9zaXRpb24ucmFuZ2UudG9BID8gMSA6IC0xKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQocG9zQiwgY29tcG9zaXRpb24ucmFuZ2UuZnJvbUIpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuY2xlYXIoKTsgLy8gTXVzdCBub3QgcmV1c2UgRE9NIGFjcm9zcyBjb21wb3NpdGlvblxuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5hZGRDb21wb3NpdGlvbihjb21wb3NpdGlvbiwgY29tcG9zaXRpb25Db250ZXh0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHQuc2tpcChjb21wb3NpdGlvbi5yYW5nZS50b0IgLSBjb21wb3NpdGlvbi5yYW5nZS5mcm9tQik7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3J3YXJkKGNvbXBvc2l0aW9uLnJhbmdlLmZyb21BLCBuZXh0LnRvQSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KGNvbXBvc2l0aW9uLnJhbmdlLnRvQiwgbmV4dC50b0IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3J3YXJkKG5leHQuZnJvbUEsIG5leHQudG9BKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQocG9zQiwgbmV4dC50b0IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zQiA9IG5leHQudG9CO1xuICAgICAgICAgICAgcG9zQSA9IG5leHQudG9BO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJ1aWxkZXIuY3VyTGluZSlcbiAgICAgICAgICAgIHRoaXMuYnVpbGRlci5lbmRMaW5lKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1aWxkZXIucm9vdDtcbiAgICB9XG4gICAgcHJlc2VydmUobGVuZ3RoLCBpbmNTdGFydCwgaW5jRW5kKSB7XG4gICAgICAgIGxldCBhY3RpdmVNYXJrcyA9IGdldE1hcmtzKHRoaXMub2xkKSwgb3Blbk1hcmtzID0gdGhpcy5vcGVuTWFya3M7XG4gICAgICAgIHRoaXMub2xkLmFkdmFuY2UobGVuZ3RoLCBpbmNFbmQgPyAxIDogLTEsIHtcbiAgICAgICAgICAgIHNraXA6ICh0aWxlLCBmcm9tLCB0bykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aWxlLmlzV2lkZ2V0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3BlbldpZGdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmNvbnRpbnVlV2lkZ2V0KHRvIC0gZnJvbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2lkZ2V0ID0gdG8gPiAwIHx8IGZyb20gPCB0aWxlLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gV2lkZ2V0VGlsZS5vZih0aWxlLndpZGdldCwgdGhpcy52aWV3LCB0byAtIGZyb20sIHRpbGUuZmxhZ3MgJiA0OTYgLyogVGlsZUZsYWcuV2lkZ2V0ICovLCB0aGlzLmNhY2hlLm1heWJlUmV1c2UodGlsZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmNhY2hlLnJldXNlKHRpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpZGdldC5mbGFncyAmIDI1NiAvKiBUaWxlRmxhZy5CbG9jayAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldC5mbGFncyAmPSB+MSAvKiBUaWxlRmxhZy5CcmVha0FmdGVyICovO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5hZGRCbG9ja1dpZGdldCh3aWRnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmVuc3VyZUxpbmUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmFkZElubGluZVdpZGdldCh3aWRnZXQsIGFjdGl2ZU1hcmtzLCBvcGVuTWFya3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5NYXJrcyA9IGFjdGl2ZU1hcmtzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aWxlLmlzVGV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5lbnN1cmVMaW5lKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZyb20gJiYgdG8gPT0gdGlsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5hZGRUZXh0KHRpbGUudGV4dCwgYWN0aXZlTWFya3MsIG9wZW5NYXJrcywgdGhpcy5jYWNoZS5yZXVzZSh0aWxlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLmFkZCh0aWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5hZGRUZXh0KHRpbGUudGV4dC5zbGljZShmcm9tLCB0byksIGFjdGl2ZU1hcmtzLCBvcGVuTWFya3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9wZW5NYXJrcyA9IGFjdGl2ZU1hcmtzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGlsZS5pc0xpbmUoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aWxlLmZsYWdzICY9IH4xIC8qIFRpbGVGbGFnLkJyZWFrQWZ0ZXIgKi87XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUucmV1c2VkLnNldCh0aWxlLCAxIC8qIFJldXNlZC5GdWxsICovKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmFkZExpbmUodGlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRpbGUgaW5zdGFuY2VvZiBXaWRnZXRCdWZmZXJUaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuYWRkKHRpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aWxlIGluc3RhbmNlb2YgTWFya1RpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmVuc3VyZUxpbmUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5hZGRNYXJrKHRpbGUsIGFjdGl2ZU1hcmtzLCBvcGVuTWFya3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLnJldXNlZC5zZXQodGlsZSwgMSAvKiBSZXVzZWQuRnVsbCAqLyk7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5NYXJrcyA9IGFjdGl2ZU1hcmtzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuV2lkZ2V0ID0gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW50ZXI6ICh0aWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRpbGUuaXNMaW5lKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmFkZExpbmVTdGFydCh0aWxlLmF0dHJzLCB0aGlzLmNhY2hlLm1heWJlUmV1c2UodGlsZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZS5hZGQodGlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWxlIGluc3RhbmNlb2YgTWFya1RpbGUpXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVNYXJrcy51bnNoaWZ0KHRpbGUubWFyayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMub3BlbldpZGdldCA9IGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxlYXZlOiAodGlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aWxlLmlzTGluZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVNYXJrcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVNYXJrcy5sZW5ndGggPSBvcGVuTWFya3MgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aWxlIGluc3RhbmNlb2YgTWFya1RpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlTWFya3Muc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgb3Blbk1hcmtzID0gTWF0aC5taW4ob3Blbk1hcmtzLCBhY3RpdmVNYXJrcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBicmVhazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5hZGRCcmVhaygpO1xuICAgICAgICAgICAgICAgIHRoaXMub3BlbldpZGdldCA9IGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGV4dC5za2lwKGxlbmd0aCk7XG4gICAgfVxuICAgIGVtaXQoZnJvbSwgdG8pIHtcbiAgICAgICAgbGV0IHBlbmRpbmdMaW5lQXR0cnMgPSBudWxsO1xuICAgICAgICBsZXQgYiA9IHRoaXMuYnVpbGRlciwgbWFya0NvdW50ID0gMDtcbiAgICAgICAgbGV0IG9wZW5FbmQgPSBSYW5nZVNldC5zcGFucyh0aGlzLmRlY29yYXRpb25zLCBmcm9tLCB0bywge1xuICAgICAgICAgICAgcG9pbnQ6IChmcm9tLCB0bywgZGVjbywgYWN0aXZlLCBvcGVuU3RhcnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRlY28gaW5zdGFuY2VvZiBQb2ludERlY29yYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzYWxsb3dCbG9ja0VmZmVjdHNGb3JbaW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVjby5ibG9jaylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJsb2NrIGRlY29yYXRpb25zIG1heSBub3QgYmUgc3BlY2lmaWVkIHZpYSBwbHVnaW5zXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvID4gdGhpcy52aWV3LnN0YXRlLmRvYy5saW5lQXQoZnJvbSkudG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJEZWNvcmF0aW9ucyB0aGF0IHJlcGxhY2UgbGluZSBicmVha3MgbWF5IG5vdCBiZSBzcGVjaWZpZWQgdmlhIHBsdWdpbnNcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWFya0NvdW50ID0gYWN0aXZlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5TdGFydCA+IGFjdGl2ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGIuY29udGludWVXaWRnZXQodG8gLSBmcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3aWRnZXQgPSBkZWNvLndpZGdldCB8fCAoZGVjby5ibG9jayA/IE51bGxXaWRnZXQuYmxvY2sgOiBOdWxsV2lkZ2V0LmlubGluZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmxhZ3MgPSB3aWRnZXRGbGFncyhkZWNvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aWxlID0gdGhpcy5jYWNoZS5maW5kV2lkZ2V0KHdpZGdldCwgdG8gLSBmcm9tLCBmbGFncykgfHwgV2lkZ2V0VGlsZS5vZih3aWRnZXQsIHRoaXMudmlldywgdG8gLSBmcm9tLCBmbGFncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVjby5ibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWNvLnN0YXJ0U2lkZSA+IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuYWRkTGluZVN0YXJ0SWZOb3RDb3ZlcmVkKHBlbmRpbmdMaW5lQXR0cnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuYWRkQmxvY2tXaWRnZXQodGlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLmVuc3VyZUxpbmUocGVuZGluZ0xpbmVBdHRycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5hZGRJbmxpbmVXaWRnZXQodGlsZSwgYWN0aXZlLCBvcGVuU3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdMaW5lQXR0cnMgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0xpbmVBdHRycyA9IGFkZExpbmVEZWNvKHBlbmRpbmdMaW5lQXR0cnMsIGRlY28pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodG8gPiBmcm9tKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHQuc2tpcCh0byAtIGZyb20pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNwYW46IChmcm9tLCB0bywgYWN0aXZlLCBvcGVuU3RhcnQpID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwb3MgPSBmcm9tOyBwb3MgPCB0bzspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJzID0gdGhpcy50ZXh0Lm5leHQoTWF0aC5taW4oNTEyIC8qIEMuQ2h1bmsgKi8sIHRvIC0gcG9zKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFycyA9PSBudWxsKSB7IC8vIExpbmUgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgIGIuYWRkTGluZVN0YXJ0SWZOb3RDb3ZlcmVkKHBlbmRpbmdMaW5lQXR0cnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYi5hZGRCcmVhaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiLmVuc3VyZUxpbmUocGVuZGluZ0xpbmVBdHRycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiLmFkZFRleHQoY2hhcnMsIGFjdGl2ZSwgb3BlblN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyArPSBjaGFycy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0xpbmVBdHRycyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYi5hZGRMaW5lU3RhcnRJZk5vdENvdmVyZWQocGVuZGluZ0xpbmVBdHRycyk7XG4gICAgICAgIHRoaXMub3BlbldpZGdldCA9IG9wZW5FbmQgPiBtYXJrQ291bnQ7XG4gICAgICAgIHRoaXMub3Blbk1hcmtzID0gb3BlbkVuZDtcbiAgICB9XG4gICAgZm9yd2FyZChmcm9tLCB0bywgc2lkZSA9IDEpIHtcbiAgICAgICAgaWYgKHRvIC0gZnJvbSA8PSAxMCkge1xuICAgICAgICAgICAgdGhpcy5vbGQuYWR2YW5jZSh0byAtIGZyb20sIHNpZGUsIHRoaXMucmV1c2VXYWxrZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vbGQuYWR2YW5jZSg1LCAtMSwgdGhpcy5yZXVzZVdhbGtlcik7XG4gICAgICAgICAgICB0aGlzLm9sZC5hZHZhbmNlKHRvIC0gZnJvbSAtIDEwLCAtMSk7XG4gICAgICAgICAgICB0aGlzLm9sZC5hZHZhbmNlKDUsIHNpZGUsIHRoaXMucmV1c2VXYWxrZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldENvbXBvc2l0aW9uQ29udGV4dCh0ZXh0KSB7XG4gICAgICAgIGxldCBtYXJrcyA9IFtdLCBsaW5lID0gbnVsbDtcbiAgICAgICAgZm9yIChsZXQgcGFyZW50ID0gdGV4dC5wYXJlbnROb2RlOzsgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIGxldCB0aWxlID0gVGlsZS5nZXQocGFyZW50KTtcbiAgICAgICAgICAgIGlmIChwYXJlbnQgPT0gdGhpcy52aWV3LmNvbnRlbnRET00pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAodGlsZSBpbnN0YW5jZW9mIE1hcmtUaWxlKVxuICAgICAgICAgICAgICAgIG1hcmtzLnB1c2godGlsZSk7XG4gICAgICAgICAgICBlbHNlIGlmICh0aWxlID09PSBudWxsIHx8IHRpbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRpbGUuaXNMaW5lKCkpXG4gICAgICAgICAgICAgICAgbGluZSA9IHRpbGU7XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJlbnQubm9kZU5hbWUgPT0gXCJESVZcIiAmJiAhbGluZSAmJiBwYXJlbnQgIT0gdGhpcy52aWV3LmNvbnRlbnRET00pXG4gICAgICAgICAgICAgICAgbGluZSA9IG5ldyBMaW5lVGlsZShwYXJlbnQsIGxpbmVCYXNlQXR0cnMpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1hcmtzLnB1c2goTWFya1RpbGUub2YobmV3IE1hcmtEZWNvcmF0aW9uKHsgdGFnTmFtZTogcGFyZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIGF0dHJpYnV0ZXM6IGdldEF0dHJzKHBhcmVudCkgfSksIHBhcmVudCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGxpbmU6IGxpbmUsIG1hcmtzIH07XG4gICAgfVxufVxuZnVuY3Rpb24gaGFzQ29udGVudCh0aWxlLCByZXF1aXJlVGV4dCkge1xuICAgIGxldCBzY2FuID0gKHRpbGUpID0+IHtcbiAgICAgICAgZm9yIChsZXQgY2ggb2YgdGlsZS5jaGlsZHJlbilcbiAgICAgICAgICAgIGlmICgocmVxdWlyZVRleHQgPyBjaC5pc1RleHQoKSA6IGNoLmxlbmd0aCkgfHwgc2NhbihjaCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIHJldHVybiBzY2FuKHRpbGUpO1xufVxuZnVuY3Rpb24gd2lkZ2V0RmxhZ3MoZGVjbykge1xuICAgIGxldCBmbGFncyA9IGRlY28uaXNSZXBsYWNlID8gKGRlY28uc3RhcnRTaWRlIDwgMCA/IDY0IC8qIFRpbGVGbGFnLkluY1N0YXJ0ICovIDogMCkgfCAoZGVjby5lbmRTaWRlID4gMCA/IDEyOCAvKiBUaWxlRmxhZy5JbmNFbmQgKi8gOiAwKVxuICAgICAgICA6IChkZWNvLnN0YXJ0U2lkZSA+IDAgPyAzMiAvKiBUaWxlRmxhZy5BZnRlciAqLyA6IDE2IC8qIFRpbGVGbGFnLkJlZm9yZSAqLyk7XG4gICAgaWYgKGRlY28uYmxvY2spXG4gICAgICAgIGZsYWdzIHw9IDI1NiAvKiBUaWxlRmxhZy5CbG9jayAqLztcbiAgICByZXR1cm4gZmxhZ3M7XG59XG5jb25zdCBsaW5lQmFzZUF0dHJzID0geyBjbGFzczogXCJjbS1saW5lXCIgfTtcbmZ1bmN0aW9uIGFkZExpbmVEZWNvKHZhbHVlLCBkZWNvKSB7XG4gICAgbGV0IGF0dHJzID0gZGVjby5zcGVjLmF0dHJpYnV0ZXMsIGNscyA9IGRlY28uc3BlYy5jbGFzcztcbiAgICBpZiAoIWF0dHJzICYmICFjbHMpXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICBpZiAoIXZhbHVlKVxuICAgICAgICB2YWx1ZSA9IHsgY2xhc3M6IFwiY20tbGluZVwiIH07XG4gICAgaWYgKGF0dHJzKVxuICAgICAgICBjb21iaW5lQXR0cnMoYXR0cnMsIHZhbHVlKTtcbiAgICBpZiAoY2xzKVxuICAgICAgICB2YWx1ZS5jbGFzcyArPSBcIiBcIiArIGNscztcbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBnZXRNYXJrcyhwdHIpIHtcbiAgICBsZXQgZm91bmQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gcHRyLnBhcmVudHMubGVuZ3RoOyBpID4gMTsgaS0tKSB7XG4gICAgICAgIGxldCB0aWxlID0gaSA9PSBwdHIucGFyZW50cy5sZW5ndGggPyBwdHIudGlsZSA6IHB0ci5wYXJlbnRzW2ldLnRpbGU7XG4gICAgICAgIGlmICh0aWxlIGluc3RhbmNlb2YgTWFya1RpbGUpXG4gICAgICAgICAgICBmb3VuZC5wdXNoKHRpbGUubWFyayk7XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbn1cbmZ1bmN0aW9uIGZyZWVOb2RlKG5vZGUpIHtcbiAgICBsZXQgdGlsZSA9IFRpbGUuZ2V0KG5vZGUpO1xuICAgIGlmICh0aWxlKVxuICAgICAgICB0aWxlLnNldERPTShub2RlLmNsb25lTm9kZSgpKTtcbiAgICByZXR1cm4gbm9kZTtcbn1cbmNsYXNzIE51bGxXaWRnZXQgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICBjb25zdHJ1Y3Rvcih0YWcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50YWcgPSB0YWc7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7IHJldHVybiBvdGhlci50YWcgPT0gdGhpcy50YWc7IH1cbiAgICB0b0RPTSgpIHsgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy50YWcpOyB9XG4gICAgdXBkYXRlRE9NKGVsdCkgeyByZXR1cm4gZWx0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT0gdGhpcy50YWc7IH1cbiAgICBnZXQgaXNIaWRkZW4oKSB7IHJldHVybiB0cnVlOyB9XG59XG5OdWxsV2lkZ2V0LmlubGluZSA9IC8qQF9fUFVSRV9fKi9uZXcgTnVsbFdpZGdldChcInNwYW5cIik7XG5OdWxsV2lkZ2V0LmJsb2NrID0gLypAX19QVVJFX18qL25ldyBOdWxsV2lkZ2V0KFwiZGl2XCIpO1xuY29uc3QgQnJlYWtXaWRnZXQgPSAvKkBfX1BVUkVfXyovbmV3IGNsYXNzIGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgdG9ET00oKSB7IHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIik7IH1cbiAgICBnZXQgaXNIaWRkZW4oKSB7IHJldHVybiB0cnVlOyB9XG4gICAgZ2V0IGVkaXRhYmxlKCkgeyByZXR1cm4gdHJ1ZTsgfVxufTtcblxuY2xhc3MgRG9jVmlldyB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gW107XG4gICAgICAgIHRoaXMuYmxvY2tXcmFwcGVycyA9IFtdO1xuICAgICAgICB0aGlzLmR5bmFtaWNEZWNvcmF0aW9uTWFwID0gW2ZhbHNlXTtcbiAgICAgICAgdGhpcy5kb21DaGFuZ2VkID0gbnVsbDtcbiAgICAgICAgdGhpcy5oYXNDb21wb3NpdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMuZWRpdENvbnRleHRGb3JtYXR0aW5nID0gRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICB0aGlzLmxhc3RDb21wb3NpdGlvbkFmdGVyQ3Vyc29yID0gZmFsc2U7XG4gICAgICAgIC8vIFRyYWNrIGEgbWluaW11bSB3aWR0aCBmb3IgdGhlIGVkaXRvci4gV2hlbiBtZWFzdXJpbmcgc2l6ZXMgaW5cbiAgICAgICAgLy8gbWVhc3VyZVZpc2libGVMaW5lSGVpZ2h0cywgdGhpcyBpcyB1cGRhdGVkIHRvIHBvaW50IGF0IHRoZSB3aWR0aFxuICAgICAgICAvLyBvZiBhIGdpdmVuIGVsZW1lbnQgYW5kIGl0cyBleHRlbnQgaW4gdGhlIGRvY3VtZW50LiBXaGVuIGEgY2hhbmdlXG4gICAgICAgIC8vIGhhcHBlbnMgaW4gdGhhdCByYW5nZSwgdGhlc2UgYXJlIHJlc2V0LiBUaGF0IHdheSwgb25jZSB3ZSd2ZSBzZWVuXG4gICAgICAgIC8vIGEgbGluZS9lbGVtZW50IG9mIGEgZ2l2ZW4gbGVuZ3RoLCB3ZSBrZWVwIHRoZSBlZGl0b3Igd2lkZSBlbm91Z2hcbiAgICAgICAgLy8gdG8gZml0IGF0IGxlYXN0IHRoYXQgZWxlbWVudCwgdW50aWwgaXQgaXMgY2hhbmdlZCwgYXQgd2hpY2ggcG9pbnRcbiAgICAgICAgLy8gd2UgZm9yZ2V0IGl0IGFnYWluLlxuICAgICAgICB0aGlzLm1pbldpZHRoID0gMDtcbiAgICAgICAgdGhpcy5taW5XaWR0aEZyb20gPSAwO1xuICAgICAgICB0aGlzLm1pbldpZHRoVG8gPSAwO1xuICAgICAgICAvLyBUcmFjayB3aGV0aGVyIHRoZSBET00gc2VsZWN0aW9uIHdhcyBzZXQgaW4gYSBsb3NzeSB3YXksIHNvIHRoYXRcbiAgICAgICAgLy8gd2UgZG9uJ3QgbWVzcyBpdCB1cCB3aGVuIHJlYWRpbmcgaXQgYmFjayBpdFxuICAgICAgICB0aGlzLmltcHJlY2lzZUFuY2hvciA9IG51bGw7XG4gICAgICAgIHRoaXMuaW1wcmVjaXNlSGVhZCA9IG51bGw7XG4gICAgICAgIHRoaXMuZm9yY2VTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgLy8gVXNlZCBieSB0aGUgcmVzaXplIG9ic2VydmVyIHRvIGlnbm9yZSByZXNpemVzIHRoYXQgd2UgY2F1c2VkXG4gICAgICAgIC8vIG91cnNlbHZlc1xuICAgICAgICB0aGlzLmxhc3RVcGRhdGUgPSBEYXRlLm5vdygpO1xuICAgICAgICB0aGlzLnVwZGF0ZURlY28oKTtcbiAgICAgICAgdGhpcy50aWxlID0gbmV3IERvY1RpbGUodmlldywgdmlldy5jb250ZW50RE9NKTtcbiAgICAgICAgdGhpcy51cGRhdGVJbm5lcihbbmV3IENoYW5nZWRSYW5nZSgwLCAwLCAwLCB2aWV3LnN0YXRlLmRvYy5sZW5ndGgpXSwgbnVsbCk7XG4gICAgfVxuICAgIC8vIFVwZGF0ZSB0aGUgZG9jdW1lbnQgdmlldyB0byBhIGdpdmVuIHN0YXRlLlxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgY2hhbmdlZFJhbmdlcyA9IHVwZGF0ZS5jaGFuZ2VkUmFuZ2VzO1xuICAgICAgICBpZiAodGhpcy5taW5XaWR0aCA+IDAgJiYgY2hhbmdlZFJhbmdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICghY2hhbmdlZFJhbmdlcy5ldmVyeSgoeyBmcm9tQSwgdG9BIH0pID0+IHRvQSA8IHRoaXMubWluV2lkdGhGcm9tIHx8IGZyb21BID4gdGhpcy5taW5XaWR0aFRvKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWluV2lkdGggPSB0aGlzLm1pbldpZHRoRnJvbSA9IHRoaXMubWluV2lkdGhUbyA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1pbldpZHRoRnJvbSA9IHVwZGF0ZS5jaGFuZ2VzLm1hcFBvcyh0aGlzLm1pbldpZHRoRnJvbSwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5taW5XaWR0aFRvID0gdXBkYXRlLmNoYW5nZXMubWFwUG9zKHRoaXMubWluV2lkdGhUbywgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVFZGl0Q29udGV4dEZvcm1hdHRpbmcodXBkYXRlKTtcbiAgICAgICAgbGV0IHJlYWRDb21wb3NpdGlvbkF0ID0gLTE7XG4gICAgICAgIGlmICh0aGlzLnZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPj0gMCAmJiAhdGhpcy52aWV3Lm9ic2VydmVyLmVkaXRDb250ZXh0KSB7XG4gICAgICAgICAgICBpZiAoKF9hID0gdGhpcy5kb21DaGFuZ2VkKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubmV3U2VsKVxuICAgICAgICAgICAgICAgIHJlYWRDb21wb3NpdGlvbkF0ID0gdGhpcy5kb21DaGFuZ2VkLm5ld1NlbC5oZWFkO1xuICAgICAgICAgICAgZWxzZSBpZiAoIXRvdWNoZXNDb21wb3NpdGlvbih1cGRhdGUuY2hhbmdlcywgdGhpcy5oYXNDb21wb3NpdGlvbikgJiYgIXVwZGF0ZS5zZWxlY3Rpb25TZXQpXG4gICAgICAgICAgICAgICAgcmVhZENvbXBvc2l0aW9uQXQgPSB1cGRhdGUuc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29tcG9zaXRpb24gPSByZWFkQ29tcG9zaXRpb25BdCA+IC0xID8gZmluZENvbXBvc2l0aW9uUmFuZ2UodGhpcy52aWV3LCB1cGRhdGUuY2hhbmdlcywgcmVhZENvbXBvc2l0aW9uQXQpIDogbnVsbDtcbiAgICAgICAgdGhpcy5kb21DaGFuZ2VkID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ29tcG9zaXRpb24pIHtcbiAgICAgICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSB0aGlzLmhhc0NvbXBvc2l0aW9uO1xuICAgICAgICAgICAgY2hhbmdlZFJhbmdlcyA9IG5ldyBDaGFuZ2VkUmFuZ2UoZnJvbSwgdG8sIHVwZGF0ZS5jaGFuZ2VzLm1hcFBvcyhmcm9tLCAtMSksIHVwZGF0ZS5jaGFuZ2VzLm1hcFBvcyh0bywgMSkpXG4gICAgICAgICAgICAgICAgLmFkZFRvU2V0KGNoYW5nZWRSYW5nZXMuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYXNDb21wb3NpdGlvbiA9IGNvbXBvc2l0aW9uID8geyBmcm9tOiBjb21wb3NpdGlvbi5yYW5nZS5mcm9tQiwgdG86IGNvbXBvc2l0aW9uLnJhbmdlLnRvQiB9IDogbnVsbDtcbiAgICAgICAgLy8gV2hlbiB0aGUgRE9NIG5vZGVzIGFyb3VuZCB0aGUgc2VsZWN0aW9uIGFyZSBtb3ZlZCB0byBhbm90aGVyXG4gICAgICAgIC8vIHBhcmVudCwgQ2hyb21lIHNvbWV0aW1lcyByZXBvcnRzIGEgZGlmZmVyZW50IHNlbGVjdGlvbiB0aHJvdWdoXG4gICAgICAgIC8vIGdldFNlbGVjdGlvbiB0aGFuIHRoZSBvbmUgdGhhdCBpdCBhY3R1YWxseSBzaG93cyB0byB0aGUgdXNlci5cbiAgICAgICAgLy8gVGhpcyBmb3JjZXMgYSBzZWxlY3Rpb24gdXBkYXRlIHdoZW4gbGluZXMgYXJlIGpvaW5lZCB0byB3b3JrXG4gICAgICAgIC8vIGFyb3VuZCB0aGF0LiBJc3N1ZSAjNTRcbiAgICAgICAgaWYgKChicm93c2VyLmllIHx8IGJyb3dzZXIuY2hyb21lKSAmJiAhY29tcG9zaXRpb24gJiYgdXBkYXRlICYmXG4gICAgICAgICAgICB1cGRhdGUuc3RhdGUuZG9jLmxpbmVzICE9IHVwZGF0ZS5zdGFydFN0YXRlLmRvYy5saW5lcylcbiAgICAgICAgICAgIHRoaXMuZm9yY2VTZWxlY3Rpb24gPSB0cnVlO1xuICAgICAgICBsZXQgcHJldkRlY28gPSB0aGlzLmRlY29yYXRpb25zLCBwcmV2V3JhcHBlcnMgPSB0aGlzLmJsb2NrV3JhcHBlcnM7XG4gICAgICAgIHRoaXMudXBkYXRlRGVjbygpO1xuICAgICAgICBsZXQgZGVjb0RpZmYgPSBmaW5kQ2hhbmdlZERlY28ocHJldkRlY28sIHRoaXMuZGVjb3JhdGlvbnMsIHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgaWYgKGRlY29EaWZmLmxlbmd0aClcbiAgICAgICAgICAgIGNoYW5nZWRSYW5nZXMgPSBDaGFuZ2VkUmFuZ2UuZXh0ZW5kV2l0aFJhbmdlcyhjaGFuZ2VkUmFuZ2VzLCBkZWNvRGlmZik7XG4gICAgICAgIGxldCBibG9ja0RpZmYgPSBmaW5kQ2hhbmdlZFdyYXBwZXJzKHByZXZXcmFwcGVycywgdGhpcy5ibG9ja1dyYXBwZXJzLCB1cGRhdGUuY2hhbmdlcyk7XG4gICAgICAgIGlmIChibG9ja0RpZmYubGVuZ3RoKVxuICAgICAgICAgICAgY2hhbmdlZFJhbmdlcyA9IENoYW5nZWRSYW5nZS5leHRlbmRXaXRoUmFuZ2VzKGNoYW5nZWRSYW5nZXMsIGJsb2NrRGlmZik7XG4gICAgICAgIGlmIChjb21wb3NpdGlvbiAmJiAhY2hhbmdlZFJhbmdlcy5zb21lKHIgPT4gci5mcm9tQSA8PSBjb21wb3NpdGlvbi5yYW5nZS5mcm9tQSAmJiByLnRvQSA+PSBjb21wb3NpdGlvbi5yYW5nZS50b0EpKVxuICAgICAgICAgICAgY2hhbmdlZFJhbmdlcyA9IGNvbXBvc2l0aW9uLnJhbmdlLmFkZFRvU2V0KGNoYW5nZWRSYW5nZXMuc2xpY2UoKSk7XG4gICAgICAgIGlmICgodGhpcy50aWxlLmZsYWdzICYgMiAvKiBUaWxlRmxhZy5TeW5jZWQgKi8pICYmIGNoYW5nZWRSYW5nZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW5uZXIoY2hhbmdlZFJhbmdlcywgY29tcG9zaXRpb24pO1xuICAgICAgICAgICAgaWYgKHVwZGF0ZS50cmFuc2FjdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHRoaXMubGFzdFVwZGF0ZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBVc2VkIGJ5IHVwZGF0ZSBhbmQgdGhlIGNvbnN0cnVjdG9yIGRvIHBlcmZvcm0gdGhlIGFjdHVhbCBET01cbiAgICAvLyB1cGRhdGVcbiAgICB1cGRhdGVJbm5lcihjaGFuZ2VzLCBjb21wb3NpdGlvbikge1xuICAgICAgICB0aGlzLnZpZXcudmlld1N0YXRlLm11c3RNZWFzdXJlQ29udGVudCA9IHRydWU7XG4gICAgICAgIGxldCB7IG9ic2VydmVyIH0gPSB0aGlzLnZpZXc7XG4gICAgICAgIG9ic2VydmVyLmlnbm9yZSgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29tcG9zaXRpb24gfHwgY2hhbmdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgb2xkVGlsZSA9IHRoaXMudGlsZTtcbiAgICAgICAgICAgICAgICBsZXQgYnVpbGRlciA9IG5ldyBUaWxlVXBkYXRlKHRoaXMudmlldywgb2xkVGlsZSwgdGhpcy5ibG9ja1dyYXBwZXJzLCB0aGlzLmRlY29yYXRpb25zLCB0aGlzLmR5bmFtaWNEZWNvcmF0aW9uTWFwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGUgPSBidWlsZGVyLnJ1bihjaGFuZ2VzLCBjb21wb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgZGVzdHJveURyb3BwZWQob2xkVGlsZSwgYnVpbGRlci5jYWNoZS5yZXVzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTG9jayB0aGUgaGVpZ2h0IGR1cmluZyByZWRyYXdpbmcsIHNpbmNlIENocm9tZSBzb21ldGltZXNcbiAgICAgICAgICAgIC8vIG1lc3NlcyB3aXRoIHRoZSBzY3JvbGwgcG9zaXRpb24gZHVyaW5nIERPTSBtdXRhdGlvbiAodGhvdWdoXG4gICAgICAgICAgICAvLyBubyByZWxheW91dCBpcyB0cmlnZ2VyZWQgYW5kIEkgY2Fubm90IGltYWdpbmUgaG93IGl0IGNhblxuICAgICAgICAgICAgLy8gcmVjb21wdXRlIHRoZSBzY3JvbGwgcG9zaXRpb24gd2l0aG91dCBhIGxheW91dClcbiAgICAgICAgICAgIHRoaXMudGlsZS5kb20uc3R5bGUuaGVpZ2h0ID0gdGhpcy52aWV3LnZpZXdTdGF0ZS5jb250ZW50SGVpZ2h0IC8gdGhpcy52aWV3LnNjYWxlWSArIFwicHhcIjtcbiAgICAgICAgICAgIHRoaXMudGlsZS5kb20uc3R5bGUuZmxleEJhc2lzID0gdGhpcy5taW5XaWR0aCA/IHRoaXMubWluV2lkdGggKyBcInB4XCIgOiBcIlwiO1xuICAgICAgICAgICAgLy8gQ2hyb21lIHdpbGwgc29tZXRpbWVzLCB3aGVuIERPTSBtdXRhdGlvbnMgb2NjdXIgZGlyZWN0bHlcbiAgICAgICAgICAgIC8vIGFyb3VuZCB0aGUgc2VsZWN0aW9uLCBnZXQgY29uZnVzZWQgYW5kIHJlcG9ydCBhIGRpZmZlcmVudFxuICAgICAgICAgICAgLy8gc2VsZWN0aW9uIGZyb20gdGhlIG9uZSBpdCBkaXNwbGF5cyAoaXNzdWUgIzIxOCkuIFRoaXMgdHJpZXNcbiAgICAgICAgICAgIC8vIHRvIGRldGVjdCB0aGF0IHNpdHVhdGlvbi5cbiAgICAgICAgICAgIGxldCB0cmFjayA9IGJyb3dzZXIuY2hyb21lIHx8IGJyb3dzZXIuaW9zID8geyBub2RlOiBvYnNlcnZlci5zZWxlY3Rpb25SYW5nZS5mb2N1c05vZGUsIHdyaXR0ZW46IGZhbHNlIH0gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnRpbGUuc3luYyh0cmFjayk7XG4gICAgICAgICAgICBpZiAodHJhY2sgJiYgKHRyYWNrLndyaXR0ZW4gfHwgb2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2UuZm9jdXNOb2RlICE9IHRyYWNrLm5vZGUgfHwgIXRoaXMudGlsZS5kb20uY29udGFpbnModHJhY2subm9kZSkpKVxuICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VTZWxlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy50aWxlLmRvbS5zdHlsZS5oZWlnaHQgPSBcIlwiO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGdhcHMgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMudmlldy52aWV3cG9ydC5mcm9tIHx8IHRoaXMudmlldy52aWV3cG9ydC50byA8IHRoaXMudmlldy5zdGF0ZS5kb2MubGVuZ3RoKVxuICAgICAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy50aWxlLmNoaWxkcmVuKVxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5pc1dpZGdldCgpICYmIGNoaWxkLndpZGdldCBpbnN0YW5jZW9mIEJsb2NrR2FwV2lkZ2V0KVxuICAgICAgICAgICAgICAgICAgICBnYXBzLnB1c2goY2hpbGQuZG9tKTtcbiAgICAgICAgb2JzZXJ2ZXIudXBkYXRlR2FwcyhnYXBzKTtcbiAgICB9XG4gICAgdXBkYXRlRWRpdENvbnRleHRGb3JtYXR0aW5nKHVwZGF0ZSkge1xuICAgICAgICB0aGlzLmVkaXRDb250ZXh0Rm9ybWF0dGluZyA9IHRoaXMuZWRpdENvbnRleHRGb3JtYXR0aW5nLm1hcCh1cGRhdGUuY2hhbmdlcyk7XG4gICAgICAgIGZvciAobGV0IHRyIG9mIHVwZGF0ZS50cmFuc2FjdGlvbnMpXG4gICAgICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgdHIuZWZmZWN0cylcbiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0LmlzKHNldEVkaXRDb250ZXh0Rm9ybWF0dGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dEZvcm1hdHRpbmcgPSBlZmZlY3QudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTeW5jIHRoZSBET00gc2VsZWN0aW9uIHRvIHRoaXMuc3RhdGUuc2VsZWN0aW9uXG4gICAgdXBkYXRlU2VsZWN0aW9uKG11c3RSZWFkID0gZmFsc2UsIGZyb21Qb2ludGVyID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKG11c3RSZWFkIHx8ICF0aGlzLnZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2UuZm9jdXNOb2RlKVxuICAgICAgICAgICAgdGhpcy52aWV3Lm9ic2VydmVyLnJlYWRTZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICBsZXQgeyBkb20gfSA9IHRoaXMudGlsZTtcbiAgICAgICAgbGV0IGFjdGl2ZUVsdCA9IHRoaXMudmlldy5yb290LmFjdGl2ZUVsZW1lbnQsIGZvY3VzZWQgPSBhY3RpdmVFbHQgPT0gZG9tO1xuICAgICAgICBsZXQgc2VsZWN0aW9uTm90Rm9jdXMgPSAhZm9jdXNlZCAmJiAhKHRoaXMudmlldy5zdGF0ZS5mYWNldChlZGl0YWJsZSkgfHwgZG9tLnRhYkluZGV4ID4gLTEpICYmXG4gICAgICAgICAgICBoYXNTZWxlY3Rpb24oZG9tLCB0aGlzLnZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2UpICYmICEoYWN0aXZlRWx0ICYmIGRvbS5jb250YWlucyhhY3RpdmVFbHQpKTtcbiAgICAgICAgaWYgKCEoZm9jdXNlZCB8fCBmcm9tUG9pbnRlciB8fCBzZWxlY3Rpb25Ob3RGb2N1cykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBmb3JjZSA9IHRoaXMuZm9yY2VTZWxlY3Rpb247XG4gICAgICAgIHRoaXMuZm9yY2VTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgbGV0IG1haW4gPSB0aGlzLnZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4sIGFuY2hvciwgaGVhZDtcbiAgICAgICAgaWYgKG1haW4uZW1wdHkpIHtcbiAgICAgICAgICAgIGhlYWQgPSBhbmNob3IgPSB0aGlzLmlubGluZURPTU5lYXJQb3MobWFpbi5hbmNob3IsIG1haW4uYXNzb2MgfHwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoZWFkID0gdGhpcy5pbmxpbmVET01OZWFyUG9zKG1haW4uaGVhZCwgbWFpbi5oZWFkID09IG1haW4uZnJvbSA/IDEgOiAtMSk7XG4gICAgICAgICAgICBhbmNob3IgPSB0aGlzLmlubGluZURPTU5lYXJQb3MobWFpbi5hbmNob3IsIG1haW4uYW5jaG9yID09IG1haW4uZnJvbSA/IDEgOiAtMSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWx3YXlzIHJlc2V0IG9uIEZpcmVmb3ggd2hlbiBuZXh0IHRvIGFuIHVuZWRpdGFibGUgbm9kZSB0b1xuICAgICAgICAvLyBhdm9pZCBpbnZpc2libGUgY3Vyc29yIGJ1Z3MgKCMxMTEpXG4gICAgICAgIGlmIChicm93c2VyLmdlY2tvICYmIG1haW4uZW1wdHkgJiYgIXRoaXMuaGFzQ29tcG9zaXRpb24gJiYgYmV0d2VlblVuZWRpdGFibGUoYW5jaG9yKSkge1xuICAgICAgICAgICAgbGV0IGR1bW15ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7XG4gICAgICAgICAgICB0aGlzLnZpZXcub2JzZXJ2ZXIuaWdub3JlKCgpID0+IGFuY2hvci5ub2RlLmluc2VydEJlZm9yZShkdW1teSwgYW5jaG9yLm5vZGUuY2hpbGROb2Rlc1thbmNob3Iub2Zmc2V0XSB8fCBudWxsKSk7XG4gICAgICAgICAgICBhbmNob3IgPSBoZWFkID0gbmV3IERPTVBvcyhkdW1teSwgMCk7XG4gICAgICAgICAgICBmb3JjZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRvbVNlbCA9IHRoaXMudmlldy5vYnNlcnZlci5zZWxlY3Rpb25SYW5nZTtcbiAgICAgICAgLy8gSWYgdGhlIHNlbGVjdGlvbiBpcyBhbHJlYWR5IGhlcmUsIG9yIGluIGFuIGVxdWl2YWxlbnQgcG9zaXRpb24sIGRvbid0IHRvdWNoIGl0XG4gICAgICAgIGlmIChmb3JjZSB8fCAhZG9tU2VsLmZvY3VzTm9kZSB8fCAoIWlzRXF1aXZhbGVudFBvc2l0aW9uKGFuY2hvci5ub2RlLCBhbmNob3Iub2Zmc2V0LCBkb21TZWwuYW5jaG9yTm9kZSwgZG9tU2VsLmFuY2hvck9mZnNldCkgfHxcbiAgICAgICAgICAgICFpc0VxdWl2YWxlbnRQb3NpdGlvbihoZWFkLm5vZGUsIGhlYWQub2Zmc2V0LCBkb21TZWwuZm9jdXNOb2RlLCBkb21TZWwuZm9jdXNPZmZzZXQpKSAmJiAhdGhpcy5zdXBwcmVzc1dpZGdldEN1cnNvckNoYW5nZShkb21TZWwsIG1haW4pKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcub2JzZXJ2ZXIuaWdub3JlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBDaHJvbWUgQW5kcm9pZCB3aWxsIGhpZGUgdGhlIHZpcnR1YWwga2V5Ym9hcmQgd2hlbiB0YXBwaW5nXG4gICAgICAgICAgICAgICAgLy8gaW5zaWRlIGFuIHVuZWRpdGFibGUgbm9kZSwgYW5kIG5vdCBicmluZyBpdCBiYWNrIHdoZW4gd2VcbiAgICAgICAgICAgICAgICAvLyBtb3ZlIHRoZSBjdXJzb3IgdG8gaXRzIHByb3BlciBwb3NpdGlvbi4gVGhpcyB0cmllcyB0b1xuICAgICAgICAgICAgICAgIC8vIHJlc3RvcmUgdGhlIGtleWJvYXJkIGJ5IGN5Y2xpbmcgZm9jdXMuXG4gICAgICAgICAgICAgICAgaWYgKGJyb3dzZXIuYW5kcm9pZCAmJiBicm93c2VyLmNocm9tZSAmJiBkb20uY29udGFpbnMoZG9tU2VsLmZvY3VzTm9kZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgaW5VbmVkaXRhYmxlKGRvbVNlbC5mb2N1c05vZGUsIGRvbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgZG9tLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHJhd1NlbCA9IGdldFNlbGVjdGlvbih0aGlzLnZpZXcucm9vdCk7XG4gICAgICAgICAgICAgICAgaWYgKCFyYXdTZWwpIDtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtYWluLmVtcHR5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdvcmsgYXJvdW5kIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE2MTIwNzZcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJyb3dzZXIuZ2Vja28pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXh0VG8gPSBuZXh0VG9VbmVkaXRhYmxlKGFuY2hvci5ub2RlLCBhbmNob3Iub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0VG8gJiYgbmV4dFRvICE9ICgxIC8qIE5leHRUby5CZWZvcmUgKi8gfCAyIC8qIE5leHRUby5BZnRlciAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dCA9IChuZXh0VG8gPT0gMSAvKiBOZXh0VG8uQmVmb3JlICovID8gdGV4dE5vZGVCZWZvcmUgOiB0ZXh0Tm9kZUFmdGVyKShhbmNob3Iubm9kZSwgYW5jaG9yLm9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvciA9IG5ldyBET01Qb3ModGV4dC5ub2RlLCB0ZXh0Lm9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmF3U2VsLmNvbGxhcHNlKGFuY2hvci5ub2RlLCBhbmNob3Iub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1haW4uYmlkaUxldmVsICE9IG51bGwgJiYgcmF3U2VsLmNhcmV0QmlkaUxldmVsICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICByYXdTZWwuY2FyZXRCaWRpTGV2ZWwgPSBtYWluLmJpZGlMZXZlbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmF3U2VsLmV4dGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTZWxlY3Rpb24uZXh0ZW5kIGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBhbiAnaW52ZXJ0ZWQnIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyAob25lIHdoZXJlIHRoZSBmb2N1cyBpcyBiZWZvcmUgdGhlIGFuY2hvciksIGJ1dCBub3QgYWxsXG4gICAgICAgICAgICAgICAgICAgIC8vIGJyb3dzZXJzIHN1cHBvcnQgaXQgeWV0LlxuICAgICAgICAgICAgICAgICAgICByYXdTZWwuY29sbGFwc2UoYW5jaG9yLm5vZGUsIGFuY2hvci5vZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBTYWZhcmkgd2lsbCBpZ25vcmUgdGhlIGNhbGwgYWJvdmUgd2hlbiB0aGUgZWRpdG9yIGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGhpZGRlbiwgYW5kIHRoZW4gcmFpc2UgYW4gZXJyb3Igb24gdGhlIGNhbGwgdG8gZXh0ZW5kXG4gICAgICAgICAgICAgICAgICAgIC8vICgjOTQwKS5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhd1NlbC5leHRlbmQoaGVhZC5ub2RlLCBoZWFkLm9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJpbWl0aXZlIChJRSkgd2F5XG4gICAgICAgICAgICAgICAgICAgIGxldCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYWluLmFuY2hvciA+IG1haW4uaGVhZClcbiAgICAgICAgICAgICAgICAgICAgICAgIFthbmNob3IsIGhlYWRdID0gW2hlYWQsIGFuY2hvcl07XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLnNldEVuZChoZWFkLm5vZGUsIGhlYWQub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQoYW5jaG9yLm5vZGUsIGFuY2hvci5vZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICByYXdTZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJhd1NlbC5hZGRSYW5nZShyYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb25Ob3RGb2N1cyAmJiB0aGlzLnZpZXcucm9vdC5hY3RpdmVFbGVtZW50ID09IGRvbSkge1xuICAgICAgICAgICAgICAgICAgICBkb20uYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlRWx0KVxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWx0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnZpZXcub2JzZXJ2ZXIuc2V0U2VsZWN0aW9uUmFuZ2UoYW5jaG9yLCBoZWFkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmltcHJlY2lzZUFuY2hvciA9IGFuY2hvci5wcmVjaXNlID8gbnVsbCA6IG5ldyBET01Qb3MoZG9tU2VsLmFuY2hvck5vZGUsIGRvbVNlbC5hbmNob3JPZmZzZXQpO1xuICAgICAgICB0aGlzLmltcHJlY2lzZUhlYWQgPSBoZWFkLnByZWNpc2UgPyBudWxsIDogbmV3IERPTVBvcyhkb21TZWwuZm9jdXNOb2RlLCBkb21TZWwuZm9jdXNPZmZzZXQpO1xuICAgIH1cbiAgICAvLyBJZiBhIHplcm8tbGVuZ3RoIHdpZGdldCBpcyBpbnNlcnRlZCBuZXh0IHRvIHRoZSBjdXJzb3IgZHVyaW5nXG4gICAgLy8gY29tcG9zaXRpb24sIGF2b2lkIG1vdmluZyBpdCBhY3Jvc3MgaXQgYW5kIGRpc3J1cHRpbmcgdGhlXG4gICAgLy8gY29tcG9zaXRpb24uXG4gICAgc3VwcHJlc3NXaWRnZXRDdXJzb3JDaGFuZ2Uoc2VsLCBjdXJzb3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzQ29tcG9zaXRpb24gJiYgY3Vyc29yLmVtcHR5ICYmXG4gICAgICAgICAgICBpc0VxdWl2YWxlbnRQb3NpdGlvbihzZWwuZm9jdXNOb2RlLCBzZWwuZm9jdXNPZmZzZXQsIHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KSAmJlxuICAgICAgICAgICAgdGhpcy5wb3NGcm9tRE9NKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCkgPT0gY3Vyc29yLmhlYWQ7XG4gICAgfVxuICAgIGVuZm9yY2VDdXJzb3JBc3NvYygpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ29tcG9zaXRpb24pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCB7IHZpZXcgfSA9IHRoaXMsIGN1cnNvciA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW47XG4gICAgICAgIGxldCBzZWwgPSBnZXRTZWxlY3Rpb24odmlldy5yb290KTtcbiAgICAgICAgbGV0IHsgYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0IH0gPSB2aWV3Lm9ic2VydmVyLnNlbGVjdGlvblJhbmdlO1xuICAgICAgICBpZiAoIXNlbCB8fCAhY3Vyc29yLmVtcHR5IHx8ICFjdXJzb3IuYXNzb2MgfHwgIXNlbC5tb2RpZnkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBsaW5lID0gdGhpcy5saW5lQXQoY3Vyc29yLmhlYWQsIGN1cnNvci5hc3NvYyk7XG4gICAgICAgIGlmICghbGluZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGxpbmVTdGFydCA9IGxpbmUucG9zQXRTdGFydDtcbiAgICAgICAgaWYgKGN1cnNvci5oZWFkID09IGxpbmVTdGFydCB8fCBjdXJzb3IuaGVhZCA9PSBsaW5lU3RhcnQgKyBsaW5lLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGJlZm9yZSA9IHRoaXMuY29vcmRzQXQoY3Vyc29yLmhlYWQsIC0xKSwgYWZ0ZXIgPSB0aGlzLmNvb3Jkc0F0KGN1cnNvci5oZWFkLCAxKTtcbiAgICAgICAgaWYgKCFiZWZvcmUgfHwgIWFmdGVyIHx8IGJlZm9yZS5ib3R0b20gPiBhZnRlci50b3ApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBkb20gPSB0aGlzLmRvbUF0UG9zKGN1cnNvci5oZWFkICsgY3Vyc29yLmFzc29jLCBjdXJzb3IuYXNzb2MpO1xuICAgICAgICBzZWwuY29sbGFwc2UoZG9tLm5vZGUsIGRvbS5vZmZzZXQpO1xuICAgICAgICBzZWwubW9kaWZ5KFwibW92ZVwiLCBjdXJzb3IuYXNzb2MgPCAwID8gXCJmb3J3YXJkXCIgOiBcImJhY2t3YXJkXCIsIFwibGluZWJvdW5kYXJ5XCIpO1xuICAgICAgICAvLyBUaGlzIGNhbiBnbyB3cm9uZyBpbiBjb3JuZXIgY2FzZXMgbGlrZSBzaW5nbGUtY2hhcmFjdGVyIGxpbmVzLFxuICAgICAgICAvLyBzbyBjaGVjayBhbmQgcmVzZXQgaWYgbmVjZXNzYXJ5LlxuICAgICAgICB2aWV3Lm9ic2VydmVyLnJlYWRTZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICBsZXQgbmV3UmFuZ2UgPSB2aWV3Lm9ic2VydmVyLnNlbGVjdGlvblJhbmdlO1xuICAgICAgICBpZiAodmlldy5kb2NWaWV3LnBvc0Zyb21ET00obmV3UmFuZ2UuYW5jaG9yTm9kZSwgbmV3UmFuZ2UuYW5jaG9yT2Zmc2V0KSAhPSBjdXJzb3IuZnJvbSlcbiAgICAgICAgICAgIHNlbC5jb2xsYXBzZShhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQpO1xuICAgIH1cbiAgICBwb3NGcm9tRE9NKG5vZGUsIG9mZnNldCkge1xuICAgICAgICBsZXQgdGlsZSA9IHRoaXMudGlsZS5uZWFyZXN0KG5vZGUpO1xuICAgICAgICBpZiAoIXRpbGUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlLmRvbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihub2RlKSAmIDIgLyogUFJFQ0VESU5HICovID8gMCA6IHRoaXMudmlldy5zdGF0ZS5kb2MubGVuZ3RoO1xuICAgICAgICBsZXQgc3RhcnQgPSB0aWxlLnBvc0F0U3RhcnQ7XG4gICAgICAgIGlmICh0aWxlLmlzQ29tcG9zaXRlKCkpIHtcbiAgICAgICAgICAgIGxldCBhZnRlcjtcbiAgICAgICAgICAgIGlmIChub2RlID09IHRpbGUuZG9tKSB7XG4gICAgICAgICAgICAgICAgYWZ0ZXIgPSB0aWxlLmRvbS5jaGlsZE5vZGVzW29mZnNldF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgYmlhcyA9IG1heE9mZnNldChub2RlKSA9PSAwID8gMCA6IG9mZnNldCA9PSAwID8gLTEgOiAxO1xuICAgICAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudCA9PSB0aWxlLmRvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmlhcyA9PSAwICYmIHBhcmVudC5maXJzdENoaWxkICE9IHBhcmVudC5sYXN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlID09IHBhcmVudC5maXJzdENoaWxkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpYXMgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaWFzID0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBub2RlID0gcGFyZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYmlhcyA8IDApXG4gICAgICAgICAgICAgICAgICAgIGFmdGVyID0gbm9kZTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGFmdGVyID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhZnRlciA9PSB0aWxlLmRvbS5maXJzdENoaWxkKVxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFydDtcbiAgICAgICAgICAgIHdoaWxlIChhZnRlciAmJiAhVGlsZS5nZXQoYWZ0ZXIpKVxuICAgICAgICAgICAgICAgIGFmdGVyID0gYWZ0ZXIubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAoIWFmdGVyKVxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFydCArIHRpbGUubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IHN0YXJ0OzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gdGlsZS5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuZG9tID09IGFmdGVyKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgICAgICAgICAgIHBvcyArPSBjaGlsZC5sZW5ndGggKyBjaGlsZC5icmVha0FmdGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRpbGUuaXNUZXh0KCkpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlID09IHRpbGUuZG9tID8gc3RhcnQgKyBvZmZzZXQgOiBzdGFydCArIChvZmZzZXQgPyB0aWxlLmxlbmd0aCA6IDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXJ0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGRvbUF0UG9zKHBvcywgc2lkZSkge1xuICAgICAgICBsZXQgeyB0aWxlLCBvZmZzZXQgfSA9IHRoaXMudGlsZS5yZXNvbHZlQmxvY2socG9zLCBzaWRlKTtcbiAgICAgICAgaWYgKHRpbGUuaXNXaWRnZXQoKSlcbiAgICAgICAgICAgIHJldHVybiB0aWxlLmRvbVBvc0Zvcihwb3MsIHNpZGUpO1xuICAgICAgICByZXR1cm4gdGlsZS5kb21JbihvZmZzZXQsIHNpZGUpO1xuICAgIH1cbiAgICBpbmxpbmVET01OZWFyUG9zKHBvcywgc2lkZSkge1xuICAgICAgICBsZXQgYmVmb3JlLCBiZWZvcmVPZmYgPSAtMSwgYmVmb3JlQmFkID0gZmFsc2U7XG4gICAgICAgIGxldCBhZnRlciwgYWZ0ZXJPZmYgPSAtMSwgYWZ0ZXJCYWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50aWxlLmJsb2NrVGlsZXMoKHRpbGUsIG9mZikgPT4ge1xuICAgICAgICAgICAgaWYgKHRpbGUuaXNXaWRnZXQoKSkge1xuICAgICAgICAgICAgICAgIGlmICgodGlsZS5mbGFncyAmIDMyIC8qIFRpbGVGbGFnLkFmdGVyICovKSAmJiBvZmYgPj0gcG9zKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAodGlsZS5mbGFncyAmIDE2IC8qIFRpbGVGbGFnLkJlZm9yZSAqLylcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlQmFkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBlbmQgPSBvZmYgKyB0aWxlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAob2ZmIDw9IHBvcykge1xuICAgICAgICAgICAgICAgICAgICBiZWZvcmUgPSB0aWxlO1xuICAgICAgICAgICAgICAgICAgICBiZWZvcmVPZmYgPSBwb3MgLSBvZmY7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZUJhZCA9IGVuZCA8IHBvcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVuZCA+PSBwb3MgJiYgIWFmdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVyID0gdGlsZTtcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJPZmYgPSBwb3MgLSBvZmY7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVyQmFkID0gb2ZmID4gcG9zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob2ZmID4gcG9zICYmIGFmdGVyKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghYmVmb3JlICYmICFhZnRlcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvbUF0UG9zKHBvcywgc2lkZSk7XG4gICAgICAgIGlmIChiZWZvcmVCYWQgJiYgYWZ0ZXIpXG4gICAgICAgICAgICBiZWZvcmUgPSBudWxsO1xuICAgICAgICBlbHNlIGlmIChhZnRlckJhZCAmJiBiZWZvcmUpXG4gICAgICAgICAgICBhZnRlciA9IG51bGw7XG4gICAgICAgIHJldHVybiBiZWZvcmUgJiYgc2lkZSA8IDAgfHwgIWFmdGVyID8gYmVmb3JlLmRvbUluKGJlZm9yZU9mZiwgc2lkZSkgOiBhZnRlci5kb21JbihhZnRlck9mZiwgc2lkZSk7XG4gICAgfVxuICAgIGNvb3Jkc0F0KHBvcywgc2lkZSkge1xuICAgICAgICBsZXQgeyB0aWxlLCBvZmZzZXQgfSA9IHRoaXMudGlsZS5yZXNvbHZlQmxvY2socG9zLCBzaWRlKTtcbiAgICAgICAgaWYgKHRpbGUuaXNXaWRnZXQoKSkge1xuICAgICAgICAgICAgaWYgKHRpbGUud2lkZ2V0IGluc3RhbmNlb2YgQmxvY2tHYXBXaWRnZXQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGlsZS5jb29yZHNJbldpZGdldChvZmZzZXQsIHNpZGUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aWxlLmNvb3Jkc0luKG9mZnNldCwgc2lkZSk7XG4gICAgfVxuICAgIGxpbmVBdChwb3MsIHNpZGUpIHtcbiAgICAgICAgbGV0IHsgdGlsZSB9ID0gdGhpcy50aWxlLnJlc29sdmVCbG9jayhwb3MsIHNpZGUpO1xuICAgICAgICByZXR1cm4gdGlsZS5pc0xpbmUoKSA/IHRpbGUgOiBudWxsO1xuICAgIH1cbiAgICBjb29yZHNGb3JDaGFyKHBvcykge1xuICAgICAgICBsZXQgeyB0aWxlLCBvZmZzZXQgfSA9IHRoaXMudGlsZS5yZXNvbHZlQmxvY2socG9zLCAxKTtcbiAgICAgICAgaWYgKCF0aWxlLmlzTGluZSgpKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGZ1bmN0aW9uIHNjYW4odGlsZSwgb2Zmc2V0KSB7XG4gICAgICAgICAgICBpZiAodGlsZS5pc0NvbXBvc2l0ZSgpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY2ggb2YgdGlsZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2gubGVuZ3RoID49IG9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gc2NhbihjaCwgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0IC09IGNoLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldCA8IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aWxlLmlzVGV4dCgpICYmIG9mZnNldCA8IHRpbGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVuZCA9IGZpbmRDbHVzdGVyQnJlYWsodGlsZS50ZXh0LCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgIGlmIChlbmQgPT0gb2Zmc2V0KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICBsZXQgcmVjdHMgPSB0ZXh0UmFuZ2UodGlsZS5kb20sIG9mZnNldCwgZW5kKS5nZXRDbGllbnRSZWN0cygpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlY3QgPSByZWN0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gcmVjdHMubGVuZ3RoIC0gMSB8fCByZWN0LnRvcCA8IHJlY3QuYm90dG9tICYmIHJlY3QubGVmdCA8IHJlY3QucmlnaHQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2Nhbih0aWxlLCBvZmZzZXQpO1xuICAgIH1cbiAgICBtZWFzdXJlVmlzaWJsZUxpbmVIZWlnaHRzKHZpZXdwb3J0KSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXSwgeyBmcm9tLCB0byB9ID0gdmlld3BvcnQ7XG4gICAgICAgIGxldCBjb250ZW50V2lkdGggPSB0aGlzLnZpZXcuY29udGVudERPTS5jbGllbnRXaWR0aDtcbiAgICAgICAgbGV0IGlzV2lkZXIgPSBjb250ZW50V2lkdGggPiBNYXRoLm1heCh0aGlzLnZpZXcuc2Nyb2xsRE9NLmNsaWVudFdpZHRoLCB0aGlzLm1pbldpZHRoKSArIDE7XG4gICAgICAgIGxldCB3aWRlc3QgPSAtMSwgbHRyID0gdGhpcy52aWV3LnRleHREaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxUUjtcbiAgICAgICAgbGV0IHNwYWNlQWJvdmUgPSAwO1xuICAgICAgICBsZXQgc2NhbiA9ICh0aWxlLCBwb3MsIG1lYXN1cmVCb3VuZHMpID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGlsZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPiB0bylcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gdGlsZS5jaGlsZHJlbltpXSwgZW5kID0gcG9zICsgY2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGxldCBjaGlsZFJlY3QgPSBjaGlsZC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHsgaGVpZ2h0IH0gPSBjaGlsZFJlY3Q7XG4gICAgICAgICAgICAgICAgaWYgKG1lYXN1cmVCb3VuZHMgJiYgIWkpXG4gICAgICAgICAgICAgICAgICAgIHNwYWNlQWJvdmUgKz0gY2hpbGRSZWN0LnRvcCAtIG1lYXN1cmVCb3VuZHMudG9wO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIEJsb2NrV3JhcHBlclRpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZCA+IGZyb20pXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FuKGNoaWxkLCBwb3MsIGNoaWxkUmVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBvcyA+PSBmcm9tKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGFjZUFib3ZlID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKC1zcGFjZUFib3ZlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaGVpZ2h0ICsgc3BhY2VBYm92ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYWNlQWJvdmUgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNXaWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3QgPSBjaGlsZC5kb20ubGFzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlY3RzID0gbGFzdCA/IGNsaWVudFJlY3RzRm9yKGxhc3QpIDogW107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlY3QgPSByZWN0c1tyZWN0cy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2lkdGggPSBsdHIgPyByZWN0LnJpZ2h0IC0gY2hpbGRSZWN0LmxlZnQgOiBjaGlsZFJlY3QucmlnaHQgLSByZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpZHRoID4gd2lkZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGVzdCA9IHdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbldpZHRoID0gY29udGVudFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbldpZHRoRnJvbSA9IHBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5taW5XaWR0aFRvID0gZW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVhc3VyZUJvdW5kcyAmJiBpID09IHRpbGUuY2hpbGRyZW4ubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgICAgICAgc3BhY2VBYm92ZSArPSBtZWFzdXJlQm91bmRzLmJvdHRvbSAtIGNoaWxkUmVjdC5ib3R0b207XG4gICAgICAgICAgICAgICAgcG9zID0gZW5kICsgY2hpbGQuYnJlYWtBZnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc2Nhbih0aGlzLnRpbGUsIDAsIG51bGwpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICB0ZXh0RGlyZWN0aW9uQXQocG9zKSB7XG4gICAgICAgIGxldCB7IHRpbGUgfSA9IHRoaXMudGlsZS5yZXNvbHZlQmxvY2socG9zLCAxKTtcbiAgICAgICAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUodGlsZS5kb20pLmRpcmVjdGlvbiA9PSBcInJ0bFwiID8gRGlyZWN0aW9uLlJUTCA6IERpcmVjdGlvbi5MVFI7XG4gICAgfVxuICAgIG1lYXN1cmVUZXh0U2l6ZSgpIHtcbiAgICAgICAgbGV0IGxpbmVNZWFzdXJlID0gdGhpcy50aWxlLmJsb2NrVGlsZXModGlsZSA9PiB7XG4gICAgICAgICAgICBpZiAodGlsZS5pc0xpbmUoKSAmJiB0aWxlLmNoaWxkcmVuLmxlbmd0aCAmJiB0aWxlLmxlbmd0aCA8PSAyMCkge1xuICAgICAgICAgICAgICAgIGxldCB0b3RhbFdpZHRoID0gMCwgdGV4dEhlaWdodDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiB0aWxlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hpbGQuaXNUZXh0KCkgfHwgL1teIC1+XS8udGVzdChjaGlsZC50ZXh0KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZWN0cyA9IGNsaWVudFJlY3RzRm9yKGNoaWxkLmRvbSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWN0cy5sZW5ndGggIT0gMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsV2lkdGggKz0gcmVjdHNbMF0ud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHRleHRIZWlnaHQgPSByZWN0c1swXS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0b3RhbFdpZHRoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluZUhlaWdodDogdGlsZS5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhcldpZHRoOiB0b3RhbFdpZHRoIC8gdGlsZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0SGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobGluZU1lYXN1cmUpXG4gICAgICAgICAgICByZXR1cm4gbGluZU1lYXN1cmU7XG4gICAgICAgIC8vIElmIG5vIHdvcmthYmxlIGxpbmUgZXhpc3RzLCBmb3JjZSBhIGxheW91dCBvZiBhIG1lYXN1cmFibGUgZWxlbWVudFxuICAgICAgICBsZXQgZHVtbXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCBsaW5lSGVpZ2h0LCBjaGFyV2lkdGgsIHRleHRIZWlnaHQ7XG4gICAgICAgIGR1bW15LmNsYXNzTmFtZSA9IFwiY20tbGluZVwiO1xuICAgICAgICBkdW1teS5zdHlsZS53aWR0aCA9IFwiOTk5OTlweFwiO1xuICAgICAgICBkdW1teS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgZHVtbXkudGV4dENvbnRlbnQgPSBcImFiYyBkZWYgZ2hpIGprbCBtbm8gcHFyIHN0dVwiO1xuICAgICAgICB0aGlzLnZpZXcub2JzZXJ2ZXIuaWdub3JlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGlsZS5kb20uYXBwZW5kQ2hpbGQoZHVtbXkpO1xuICAgICAgICAgICAgbGV0IHJlY3QgPSBjbGllbnRSZWN0c0ZvcihkdW1teS5maXJzdENoaWxkKVswXTtcbiAgICAgICAgICAgIGxpbmVIZWlnaHQgPSBkdW1teS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgICAgICAgICBjaGFyV2lkdGggPSByZWN0ICYmIHJlY3Qud2lkdGggPyByZWN0LndpZHRoIC8gMjcgOiA3O1xuICAgICAgICAgICAgdGV4dEhlaWdodCA9IHJlY3QgJiYgcmVjdC5oZWlnaHQgPyByZWN0LmhlaWdodCA6IGxpbmVIZWlnaHQ7XG4gICAgICAgICAgICBkdW1teS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IGxpbmVIZWlnaHQsIGNoYXJXaWR0aCwgdGV4dEhlaWdodCB9O1xuICAgIH1cbiAgICBjb21wdXRlQmxvY2tHYXBEZWNvKCkge1xuICAgICAgICBsZXQgZGVjbyA9IFtdLCB2cyA9IHRoaXMudmlldy52aWV3U3RhdGU7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IDAsIGkgPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGkgPT0gdnMudmlld3BvcnRzLmxlbmd0aCA/IG51bGwgOiB2cy52aWV3cG9ydHNbaV07XG4gICAgICAgICAgICBsZXQgZW5kID0gbmV4dCA/IG5leHQuZnJvbSAtIDEgOiB0aGlzLnZpZXcuc3RhdGUuZG9jLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChlbmQgPiBwb3MpIHtcbiAgICAgICAgICAgICAgICBsZXQgaGVpZ2h0ID0gKHZzLmxpbmVCbG9ja0F0KGVuZCkuYm90dG9tIC0gdnMubGluZUJsb2NrQXQocG9zKS50b3ApIC8gdGhpcy52aWV3LnNjYWxlWTtcbiAgICAgICAgICAgICAgICBkZWNvLnB1c2goRGVjb3JhdGlvbi5yZXBsYWNlKHtcbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0OiBuZXcgQmxvY2tHYXBXaWRnZXQoaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgYmxvY2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNCbG9ja0dhcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KS5yYW5nZShwb3MsIGVuZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFuZXh0KVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgcG9zID0gbmV4dC50byArIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24uc2V0KGRlY28pO1xuICAgIH1cbiAgICB1cGRhdGVEZWNvKCkge1xuICAgICAgICBsZXQgaSA9IDE7XG4gICAgICAgIGxldCBhbGxEZWNvID0gdGhpcy52aWV3LnN0YXRlLmZhY2V0KGRlY29yYXRpb25zKS5tYXAoZCA9PiB7XG4gICAgICAgICAgICBsZXQgZHluYW1pYyA9IHRoaXMuZHluYW1pY0RlY29yYXRpb25NYXBbaSsrXSA9IHR5cGVvZiBkID09IFwiZnVuY3Rpb25cIjtcbiAgICAgICAgICAgIHJldHVybiBkeW5hbWljID8gZCh0aGlzLnZpZXcpIDogZDtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBkeW5hbWljT3V0ZXIgPSBmYWxzZSwgb3V0ZXJEZWNvID0gdGhpcy52aWV3LnN0YXRlLmZhY2V0KG91dGVyRGVjb3JhdGlvbnMpLm1hcCgoZCwgaSkgPT4ge1xuICAgICAgICAgICAgbGV0IGR5bmFtaWMgPSB0eXBlb2YgZCA9PSBcImZ1bmN0aW9uXCI7XG4gICAgICAgICAgICBpZiAoZHluYW1pYylcbiAgICAgICAgICAgICAgICBkeW5hbWljT3V0ZXIgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGR5bmFtaWMgPyBkKHRoaXMudmlldykgOiBkO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG91dGVyRGVjby5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY0RlY29yYXRpb25NYXBbaSsrXSA9IGR5bmFtaWNPdXRlcjtcbiAgICAgICAgICAgIGFsbERlY28ucHVzaChSYW5nZVNldC5qb2luKG91dGVyRGVjbykpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSBbXG4gICAgICAgICAgICB0aGlzLmVkaXRDb250ZXh0Rm9ybWF0dGluZyxcbiAgICAgICAgICAgIC4uLmFsbERlY28sXG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVCbG9ja0dhcERlY28oKSxcbiAgICAgICAgICAgIHRoaXMudmlldy52aWV3U3RhdGUubGluZUdhcERlY29cbiAgICAgICAgXTtcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmRlY29yYXRpb25zLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY0RlY29yYXRpb25NYXBbaSsrXSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJsb2NrV3JhcHBlcnMgPSB0aGlzLnZpZXcuc3RhdGUuZmFjZXQoYmxvY2tXcmFwcGVycykubWFwKHYgPT4gdHlwZW9mIHYgPT0gXCJmdW5jdGlvblwiID8gdih0aGlzLnZpZXcpIDogdik7XG4gICAgfVxuICAgIHNjcm9sbEludG9WaWV3KHRhcmdldCkge1xuICAgICAgICBpZiAodGFyZ2V0LmlzU25hcHNob3QpIHtcbiAgICAgICAgICAgIGxldCByZWYgPSB0aGlzLnZpZXcudmlld1N0YXRlLmxpbmVCbG9ja0F0KHRhcmdldC5yYW5nZS5oZWFkKTtcbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxET00uc2Nyb2xsVG9wID0gcmVmLnRvcCAtIHRhcmdldC55TWFyZ2luO1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbERPTS5zY3JvbGxMZWZ0ID0gdGFyZ2V0LnhNYXJnaW47XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaGFuZGxlciBvZiB0aGlzLnZpZXcuc3RhdGUuZmFjZXQoc2Nyb2xsSGFuZGxlcikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIodGhpcy52aWV3LCB0YXJnZXQucmFuZ2UsIHRhcmdldCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2dFeGNlcHRpb24odGhpcy52aWV3LnN0YXRlLCBlLCBcInNjcm9sbCBoYW5kbGVyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCB7IHJhbmdlIH0gPSB0YXJnZXQ7XG4gICAgICAgIGxldCByZWN0ID0gdGhpcy5jb29yZHNBdChyYW5nZS5oZWFkLCByYW5nZS5lbXB0eSA/IHJhbmdlLmFzc29jIDogcmFuZ2UuaGVhZCA+IHJhbmdlLmFuY2hvciA/IC0xIDogMSksIG90aGVyO1xuICAgICAgICBpZiAoIXJlY3QpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICghcmFuZ2UuZW1wdHkgJiYgKG90aGVyID0gdGhpcy5jb29yZHNBdChyYW5nZS5hbmNob3IsIHJhbmdlLmFuY2hvciA+IHJhbmdlLmhlYWQgPyAtMSA6IDEpKSlcbiAgICAgICAgICAgIHJlY3QgPSB7IGxlZnQ6IE1hdGgubWluKHJlY3QubGVmdCwgb3RoZXIubGVmdCksIHRvcDogTWF0aC5taW4ocmVjdC50b3AsIG90aGVyLnRvcCksXG4gICAgICAgICAgICAgICAgcmlnaHQ6IE1hdGgubWF4KHJlY3QucmlnaHQsIG90aGVyLnJpZ2h0KSwgYm90dG9tOiBNYXRoLm1heChyZWN0LmJvdHRvbSwgb3RoZXIuYm90dG9tKSB9O1xuICAgICAgICBsZXQgbWFyZ2lucyA9IGdldFNjcm9sbE1hcmdpbnModGhpcy52aWV3KTtcbiAgICAgICAgbGV0IHRhcmdldFJlY3QgPSB7XG4gICAgICAgICAgICBsZWZ0OiByZWN0LmxlZnQgLSBtYXJnaW5zLmxlZnQsIHRvcDogcmVjdC50b3AgLSBtYXJnaW5zLnRvcCxcbiAgICAgICAgICAgIHJpZ2h0OiByZWN0LnJpZ2h0ICsgbWFyZ2lucy5yaWdodCwgYm90dG9tOiByZWN0LmJvdHRvbSArIG1hcmdpbnMuYm90dG9tXG4gICAgICAgIH07XG4gICAgICAgIGxldCB7IG9mZnNldFdpZHRoLCBvZmZzZXRIZWlnaHQgfSA9IHRoaXMudmlldy5zY3JvbGxET007XG4gICAgICAgIHNjcm9sbFJlY3RJbnRvVmlldyh0aGlzLnZpZXcuc2Nyb2xsRE9NLCB0YXJnZXRSZWN0LCByYW5nZS5oZWFkIDwgcmFuZ2UuYW5jaG9yID8gLTEgOiAxLCB0YXJnZXQueCwgdGFyZ2V0LnksIE1hdGgubWF4KE1hdGgubWluKHRhcmdldC54TWFyZ2luLCBvZmZzZXRXaWR0aCksIC1vZmZzZXRXaWR0aCksIE1hdGgubWF4KE1hdGgubWluKHRhcmdldC55TWFyZ2luLCBvZmZzZXRIZWlnaHQpLCAtb2Zmc2V0SGVpZ2h0KSwgdGhpcy52aWV3LnRleHREaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxUUik7XG4gICAgfVxuICAgIGxpbmVIYXNXaWRnZXQocG9zKSB7XG4gICAgICAgIGxldCBzY2FuID0gKGNoaWxkKSA9PiBjaGlsZC5pc1dpZGdldCgpIHx8IGNoaWxkLmNoaWxkcmVuLnNvbWUoc2Nhbik7XG4gICAgICAgIHJldHVybiBzY2FuKHRoaXMudGlsZS5yZXNvbHZlQmxvY2socG9zLCAxKS50aWxlKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgZGVzdHJveURyb3BwZWQodGhpcy50aWxlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXN0cm95RHJvcHBlZCh0aWxlLCByZXVzZWQpIHtcbiAgICBsZXQgciA9IHJldXNlZCA9PT0gbnVsbCB8fCByZXVzZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJldXNlZC5nZXQodGlsZSk7XG4gICAgaWYgKHIgIT0gMSAvKiBSZXVzZWQuRnVsbCAqLykge1xuICAgICAgICBpZiAociA9PSBudWxsKVxuICAgICAgICAgICAgdGlsZS5kZXN0cm95KCk7XG4gICAgICAgIGZvciAobGV0IGNoIG9mIHRpbGUuY2hpbGRyZW4pXG4gICAgICAgICAgICBkZXN0cm95RHJvcHBlZChjaCwgcmV1c2VkKTtcbiAgICB9XG59XG5mdW5jdGlvbiBiZXR3ZWVuVW5lZGl0YWJsZShwb3MpIHtcbiAgICByZXR1cm4gcG9zLm5vZGUubm9kZVR5cGUgPT0gMSAmJiBwb3Mubm9kZS5maXJzdENoaWxkICYmXG4gICAgICAgIChwb3Mub2Zmc2V0ID09IDAgfHwgcG9zLm5vZGUuY2hpbGROb2Rlc1twb3Mub2Zmc2V0IC0gMV0uY29udGVudEVkaXRhYmxlID09IFwiZmFsc2VcIikgJiZcbiAgICAgICAgKHBvcy5vZmZzZXQgPT0gcG9zLm5vZGUuY2hpbGROb2Rlcy5sZW5ndGggfHwgcG9zLm5vZGUuY2hpbGROb2Rlc1twb3Mub2Zmc2V0XS5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiKTtcbn1cbmZ1bmN0aW9uIGZpbmRDb21wb3NpdGlvbk5vZGUodmlldywgaGVhZFBvcykge1xuICAgIGxldCBzZWwgPSB2aWV3Lm9ic2VydmVyLnNlbGVjdGlvblJhbmdlO1xuICAgIGlmICghc2VsLmZvY3VzTm9kZSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHRleHRCZWZvcmUgPSB0ZXh0Tm9kZUJlZm9yZShzZWwuZm9jdXNOb2RlLCBzZWwuZm9jdXNPZmZzZXQpO1xuICAgIGxldCB0ZXh0QWZ0ZXIgPSB0ZXh0Tm9kZUFmdGVyKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCk7XG4gICAgbGV0IHRleHROb2RlID0gdGV4dEJlZm9yZSB8fCB0ZXh0QWZ0ZXI7XG4gICAgaWYgKHRleHRBZnRlciAmJiB0ZXh0QmVmb3JlICYmIHRleHRBZnRlci5ub2RlICE9IHRleHRCZWZvcmUubm9kZSkge1xuICAgICAgICBsZXQgdGlsZUFmdGVyID0gVGlsZS5nZXQodGV4dEFmdGVyLm5vZGUpO1xuICAgICAgICBpZiAoIXRpbGVBZnRlciB8fCB0aWxlQWZ0ZXIuaXNUZXh0KCkgJiYgdGlsZUFmdGVyLnRleHQgIT0gdGV4dEFmdGVyLm5vZGUubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICB0ZXh0Tm9kZSA9IHRleHRBZnRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2aWV3LmRvY1ZpZXcubGFzdENvbXBvc2l0aW9uQWZ0ZXJDdXJzb3IpIHtcbiAgICAgICAgICAgIGxldCB0aWxlQmVmb3JlID0gVGlsZS5nZXQodGV4dEJlZm9yZS5ub2RlKTtcbiAgICAgICAgICAgIGlmICghKCF0aWxlQmVmb3JlIHx8IHRpbGVCZWZvcmUuaXNUZXh0KCkgJiYgdGlsZUJlZm9yZS50ZXh0ICE9IHRleHRCZWZvcmUubm9kZS5ub2RlVmFsdWUpKVxuICAgICAgICAgICAgICAgIHRleHROb2RlID0gdGV4dEFmdGVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZpZXcuZG9jVmlldy5sYXN0Q29tcG9zaXRpb25BZnRlckN1cnNvciA9IHRleHROb2RlICE9IHRleHRCZWZvcmU7XG4gICAgaWYgKCF0ZXh0Tm9kZSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGZyb20gPSBoZWFkUG9zIC0gdGV4dE5vZGUub2Zmc2V0O1xuICAgIHJldHVybiB7IGZyb20sIHRvOiBmcm9tICsgdGV4dE5vZGUubm9kZS5ub2RlVmFsdWUubGVuZ3RoLCBub2RlOiB0ZXh0Tm9kZS5ub2RlIH07XG59XG5mdW5jdGlvbiBmaW5kQ29tcG9zaXRpb25SYW5nZSh2aWV3LCBjaGFuZ2VzLCBoZWFkUG9zKSB7XG4gICAgbGV0IGZvdW5kID0gZmluZENvbXBvc2l0aW9uTm9kZSh2aWV3LCBoZWFkUG9zKTtcbiAgICBpZiAoIWZvdW5kKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgeyBub2RlOiB0ZXh0Tm9kZSwgZnJvbSwgdG8gfSA9IGZvdW5kLCB0ZXh0ID0gdGV4dE5vZGUubm9kZVZhbHVlO1xuICAgIC8vIERvbid0IHRyeSB0byBwcmVzZXJ2ZSBtdWx0aS1saW5lIGNvbXBvc2l0aW9uc1xuICAgIGlmICgvW1xcblxccl0vLnRlc3QodGV4dCkpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGlmICh2aWV3LnN0YXRlLmRvYy5zbGljZVN0cmluZyhmb3VuZC5mcm9tLCBmb3VuZC50bykgIT0gdGV4dClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGludiA9IGNoYW5nZXMuaW52ZXJ0ZWREZXNjO1xuICAgIHJldHVybiB7IHJhbmdlOiBuZXcgQ2hhbmdlZFJhbmdlKGludi5tYXBQb3MoZnJvbSksIGludi5tYXBQb3ModG8pLCBmcm9tLCB0byksIHRleHQ6IHRleHROb2RlIH07XG59XG5mdW5jdGlvbiBuZXh0VG9VbmVkaXRhYmxlKG5vZGUsIG9mZnNldCkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlICE9IDEpXG4gICAgICAgIHJldHVybiAwO1xuICAgIHJldHVybiAob2Zmc2V0ICYmIG5vZGUuY2hpbGROb2Rlc1tvZmZzZXQgLSAxXS5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiID8gMSAvKiBOZXh0VG8uQmVmb3JlICovIDogMCkgfFxuICAgICAgICAob2Zmc2V0IDwgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCAmJiBub2RlLmNoaWxkTm9kZXNbb2Zmc2V0XS5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiID8gMiAvKiBOZXh0VG8uQWZ0ZXIgKi8gOiAwKTtcbn1cbmxldCBEZWNvcmF0aW9uQ29tcGFyYXRvciQxID0gY2xhc3MgRGVjb3JhdGlvbkNvbXBhcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNoYW5nZXMgPSBbXTtcbiAgICB9XG4gICAgY29tcGFyZVJhbmdlKGZyb20sIHRvKSB7IGFkZFJhbmdlKGZyb20sIHRvLCB0aGlzLmNoYW5nZXMpOyB9XG4gICAgY29tcGFyZVBvaW50KGZyb20sIHRvKSB7IGFkZFJhbmdlKGZyb20sIHRvLCB0aGlzLmNoYW5nZXMpOyB9XG4gICAgYm91bmRDaGFuZ2UocG9zKSB7IGFkZFJhbmdlKHBvcywgcG9zLCB0aGlzLmNoYW5nZXMpOyB9XG59O1xuZnVuY3Rpb24gZmluZENoYW5nZWREZWNvKGEsIGIsIGRpZmYpIHtcbiAgICBsZXQgY29tcCA9IG5ldyBEZWNvcmF0aW9uQ29tcGFyYXRvciQxO1xuICAgIFJhbmdlU2V0LmNvbXBhcmUoYSwgYiwgZGlmZiwgY29tcCk7XG4gICAgcmV0dXJuIGNvbXAuY2hhbmdlcztcbn1cbmNsYXNzIFdyYXBwZXJDb21wYXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gW107XG4gICAgfVxuICAgIGNvbXBhcmVSYW5nZShmcm9tLCB0bykgeyBhZGRSYW5nZShmcm9tLCB0bywgdGhpcy5jaGFuZ2VzKTsgfVxuICAgIGNvbXBhcmVQb2ludCgpIHsgfVxuICAgIGJvdW5kQ2hhbmdlKHBvcykgeyBhZGRSYW5nZShwb3MsIHBvcywgdGhpcy5jaGFuZ2VzKTsgfVxufVxuZnVuY3Rpb24gZmluZENoYW5nZWRXcmFwcGVycyhhLCBiLCBkaWZmKSB7XG4gICAgbGV0IGNvbXAgPSBuZXcgV3JhcHBlckNvbXBhcmF0b3I7XG4gICAgUmFuZ2VTZXQuY29tcGFyZShhLCBiLCBkaWZmLCBjb21wKTtcbiAgICByZXR1cm4gY29tcC5jaGFuZ2VzO1xufVxuZnVuY3Rpb24gaW5VbmVkaXRhYmxlKG5vZGUsIGluc2lkZSkge1xuICAgIGZvciAobGV0IGN1ciA9IG5vZGU7IGN1ciAmJiBjdXIgIT0gaW5zaWRlOyBjdXIgPSBjdXIuYXNzaWduZWRTbG90IHx8IGN1ci5wYXJlbnROb2RlKSB7XG4gICAgICAgIGlmIChjdXIubm9kZVR5cGUgPT0gMSAmJiBjdXIuY29udGVudEVkaXRhYmxlID09ICdmYWxzZScpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHRvdWNoZXNDb21wb3NpdGlvbihjaGFuZ2VzLCBjb21wb3NpdGlvbikge1xuICAgIGxldCB0b3VjaGVkID0gZmFsc2U7XG4gICAgaWYgKGNvbXBvc2l0aW9uKVxuICAgICAgICBjaGFuZ2VzLml0ZXJDaGFuZ2VkUmFuZ2VzKChmcm9tLCB0bykgPT4ge1xuICAgICAgICAgICAgaWYgKGZyb20gPCBjb21wb3NpdGlvbi50byAmJiB0byA+IGNvbXBvc2l0aW9uLmZyb20pXG4gICAgICAgICAgICAgICAgdG91Y2hlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIHJldHVybiB0b3VjaGVkO1xufVxuY2xhc3MgQmxvY2tHYXBXaWRnZXQgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcihoZWlnaHQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuICAgIHRvRE9NKCkge1xuICAgICAgICBsZXQgZWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZWx0LmNsYXNzTmFtZSA9IFwiY20tZ2FwXCI7XG4gICAgICAgIHRoaXMudXBkYXRlRE9NKGVsdCk7XG4gICAgICAgIHJldHVybiBlbHQ7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7IHJldHVybiBvdGhlci5oZWlnaHQgPT0gdGhpcy5oZWlnaHQ7IH1cbiAgICB1cGRhdGVET00oZWx0KSB7XG4gICAgICAgIGVsdC5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArIFwicHhcIjtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGdldCBlZGl0YWJsZSgpIHsgcmV0dXJuIHRydWU7IH1cbiAgICBnZXQgZXN0aW1hdGVkSGVpZ2h0KCkgeyByZXR1cm4gdGhpcy5oZWlnaHQ7IH1cbiAgICBpZ25vcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG59XG5cbmZ1bmN0aW9uIGdyb3VwQXQoc3RhdGUsIHBvcywgYmlhcyA9IDEpIHtcbiAgICBsZXQgY2F0ZWdvcml6ZSA9IHN0YXRlLmNoYXJDYXRlZ29yaXplcihwb3MpO1xuICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpLCBsaW5lUG9zID0gcG9zIC0gbGluZS5mcm9tO1xuICAgIGlmIChsaW5lLmxlbmd0aCA9PSAwKVxuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MpO1xuICAgIGlmIChsaW5lUG9zID09IDApXG4gICAgICAgIGJpYXMgPSAxO1xuICAgIGVsc2UgaWYgKGxpbmVQb3MgPT0gbGluZS5sZW5ndGgpXG4gICAgICAgIGJpYXMgPSAtMTtcbiAgICBsZXQgZnJvbSA9IGxpbmVQb3MsIHRvID0gbGluZVBvcztcbiAgICBpZiAoYmlhcyA8IDApXG4gICAgICAgIGZyb20gPSBmaW5kQ2x1c3RlckJyZWFrKGxpbmUudGV4dCwgbGluZVBvcywgZmFsc2UpO1xuICAgIGVsc2VcbiAgICAgICAgdG8gPSBmaW5kQ2x1c3RlckJyZWFrKGxpbmUudGV4dCwgbGluZVBvcyk7XG4gICAgbGV0IGNhdCA9IGNhdGVnb3JpemUobGluZS50ZXh0LnNsaWNlKGZyb20sIHRvKSk7XG4gICAgd2hpbGUgKGZyb20gPiAwKSB7XG4gICAgICAgIGxldCBwcmV2ID0gZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIGZyb20sIGZhbHNlKTtcbiAgICAgICAgaWYgKGNhdGVnb3JpemUobGluZS50ZXh0LnNsaWNlKHByZXYsIGZyb20pKSAhPSBjYXQpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZnJvbSA9IHByZXY7XG4gICAgfVxuICAgIHdoaWxlICh0byA8IGxpbmUubGVuZ3RoKSB7XG4gICAgICAgIGxldCBuZXh0ID0gZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIHRvKTtcbiAgICAgICAgaWYgKGNhdGVnb3JpemUobGluZS50ZXh0LnNsaWNlKHRvLCBuZXh0KSkgIT0gY2F0KVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIHRvID0gbmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5yYW5nZShmcm9tICsgbGluZS5mcm9tLCB0byArIGxpbmUuZnJvbSk7XG59XG5mdW5jdGlvbiBwb3NBdENvb3Jkc0ltcHJlY2lzZSh2aWV3LCBjb250ZW50UmVjdCwgYmxvY2ssIHgsIHkpIHtcbiAgICBsZXQgaW50byA9IE1hdGgucm91bmQoKHggLSBjb250ZW50UmVjdC5sZWZ0KSAqIHZpZXcuZGVmYXVsdENoYXJhY3RlcldpZHRoKTtcbiAgICBpZiAodmlldy5saW5lV3JhcHBpbmcgJiYgYmxvY2suaGVpZ2h0ID4gdmlldy5kZWZhdWx0TGluZUhlaWdodCAqIDEuNSkge1xuICAgICAgICBsZXQgdGV4dEhlaWdodCA9IHZpZXcudmlld1N0YXRlLmhlaWdodE9yYWNsZS50ZXh0SGVpZ2h0O1xuICAgICAgICBsZXQgbGluZSA9IE1hdGguZmxvb3IoKHkgLSBibG9jay50b3AgLSAodmlldy5kZWZhdWx0TGluZUhlaWdodCAtIHRleHRIZWlnaHQpICogMC41KSAvIHRleHRIZWlnaHQpO1xuICAgICAgICBpbnRvICs9IGxpbmUgKiB2aWV3LnZpZXdTdGF0ZS5oZWlnaHRPcmFjbGUubGluZUxlbmd0aDtcbiAgICB9XG4gICAgbGV0IGNvbnRlbnQgPSB2aWV3LnN0YXRlLnNsaWNlRG9jKGJsb2NrLmZyb20sIGJsb2NrLnRvKTtcbiAgICByZXR1cm4gYmxvY2suZnJvbSArIGZpbmRDb2x1bW4oY29udGVudCwgaW50bywgdmlldy5zdGF0ZS50YWJTaXplKTtcbn1cbmZ1bmN0aW9uIGJsb2NrQXQodmlldywgcG9zLCBzaWRlKSB7XG4gICAgbGV0IGxpbmUgPSB2aWV3LmxpbmVCbG9ja0F0KHBvcyk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobGluZS50eXBlKSkge1xuICAgICAgICBsZXQgYmVzdDtcbiAgICAgICAgZm9yIChsZXQgbCBvZiBsaW5lLnR5cGUpIHtcbiAgICAgICAgICAgIGlmIChsLmZyb20gPiBwb3MpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAobC50byA8IHBvcylcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChsLmZyb20gPCBwb3MgJiYgbC50byA+IHBvcylcbiAgICAgICAgICAgICAgICByZXR1cm4gbDtcbiAgICAgICAgICAgIGlmICghYmVzdCB8fCAobC50eXBlID09IEJsb2NrVHlwZS5UZXh0ICYmIChiZXN0LnR5cGUgIT0gbC50eXBlIHx8IChzaWRlIDwgMCA/IGwuZnJvbSA8IHBvcyA6IGwudG8gPiBwb3MpKSkpXG4gICAgICAgICAgICAgICAgYmVzdCA9IGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJlc3QgfHwgbGluZTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmU7XG59XG5mdW5jdGlvbiBtb3ZlVG9MaW5lQm91bmRhcnkodmlldywgc3RhcnQsIGZvcndhcmQsIGluY2x1ZGVXcmFwKSB7XG4gICAgbGV0IGxpbmUgPSBibG9ja0F0KHZpZXcsIHN0YXJ0LmhlYWQsIHN0YXJ0LmFzc29jIHx8IC0xKTtcbiAgICBsZXQgY29vcmRzID0gIWluY2x1ZGVXcmFwIHx8IGxpbmUudHlwZSAhPSBCbG9ja1R5cGUuVGV4dCB8fCAhKHZpZXcubGluZVdyYXBwaW5nIHx8IGxpbmUud2lkZ2V0TGluZUJyZWFrcykgPyBudWxsXG4gICAgICAgIDogdmlldy5jb29yZHNBdFBvcyhzdGFydC5hc3NvYyA8IDAgJiYgc3RhcnQuaGVhZCA+IGxpbmUuZnJvbSA/IHN0YXJ0LmhlYWQgLSAxIDogc3RhcnQuaGVhZCk7XG4gICAgaWYgKGNvb3Jkcykge1xuICAgICAgICBsZXQgZWRpdG9yUmVjdCA9IHZpZXcuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgZGlyZWN0aW9uID0gdmlldy50ZXh0RGlyZWN0aW9uQXQobGluZS5mcm9tKTtcbiAgICAgICAgbGV0IHBvcyA9IHZpZXcucG9zQXRDb29yZHMoeyB4OiBmb3J3YXJkID09IChkaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxUUikgPyBlZGl0b3JSZWN0LnJpZ2h0IC0gMSA6IGVkaXRvclJlY3QubGVmdCArIDEsXG4gICAgICAgICAgICB5OiAoY29vcmRzLnRvcCArIGNvb3Jkcy5ib3R0b20pIC8gMiB9KTtcbiAgICAgICAgaWYgKHBvcyAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocG9zLCBmb3J3YXJkID8gLTEgOiAxKTtcbiAgICB9XG4gICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IoZm9yd2FyZCA/IGxpbmUudG8gOiBsaW5lLmZyb20sIGZvcndhcmQgPyAtMSA6IDEpO1xufVxuZnVuY3Rpb24gbW92ZUJ5Q2hhcih2aWV3LCBzdGFydCwgZm9yd2FyZCwgYnkpIHtcbiAgICBsZXQgbGluZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdChzdGFydC5oZWFkKSwgc3BhbnMgPSB2aWV3LmJpZGlTcGFucyhsaW5lKTtcbiAgICBsZXQgZGlyZWN0aW9uID0gdmlldy50ZXh0RGlyZWN0aW9uQXQobGluZS5mcm9tKTtcbiAgICBmb3IgKGxldCBjdXIgPSBzdGFydCwgY2hlY2sgPSBudWxsOzspIHtcbiAgICAgICAgbGV0IG5leHQgPSBtb3ZlVmlzdWFsbHkobGluZSwgc3BhbnMsIGRpcmVjdGlvbiwgY3VyLCBmb3J3YXJkKSwgY2hhciA9IG1vdmVkT3ZlcjtcbiAgICAgICAgaWYgKCFuZXh0KSB7XG4gICAgICAgICAgICBpZiAobGluZS5udW1iZXIgPT0gKGZvcndhcmQgPyB2aWV3LnN0YXRlLmRvYy5saW5lcyA6IDEpKVxuICAgICAgICAgICAgICAgIHJldHVybiBjdXI7XG4gICAgICAgICAgICBjaGFyID0gXCJcXG5cIjtcbiAgICAgICAgICAgIGxpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lKGxpbmUubnVtYmVyICsgKGZvcndhcmQgPyAxIDogLTEpKTtcbiAgICAgICAgICAgIHNwYW5zID0gdmlldy5iaWRpU3BhbnMobGluZSk7XG4gICAgICAgICAgICBuZXh0ID0gdmlldy52aXN1YWxMaW5lU2lkZShsaW5lLCAhZm9yd2FyZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjaGVjaykge1xuICAgICAgICAgICAgaWYgKCFieSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIGNoZWNrID0gYnkoY2hhcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWNoZWNrKGNoYXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VyO1xuICAgICAgICB9XG4gICAgICAgIGN1ciA9IG5leHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gYnlHcm91cCh2aWV3LCBwb3MsIHN0YXJ0KSB7XG4gICAgbGV0IGNhdGVnb3JpemUgPSB2aWV3LnN0YXRlLmNoYXJDYXRlZ29yaXplcihwb3MpO1xuICAgIGxldCBjYXQgPSBjYXRlZ29yaXplKHN0YXJ0KTtcbiAgICByZXR1cm4gKG5leHQpID0+IHtcbiAgICAgICAgbGV0IG5leHRDYXQgPSBjYXRlZ29yaXplKG5leHQpO1xuICAgICAgICBpZiAoY2F0ID09IENoYXJDYXRlZ29yeS5TcGFjZSlcbiAgICAgICAgICAgIGNhdCA9IG5leHRDYXQ7XG4gICAgICAgIHJldHVybiBjYXQgPT0gbmV4dENhdDtcbiAgICB9O1xufVxuZnVuY3Rpb24gbW92ZVZlcnRpY2FsbHkodmlldywgc3RhcnQsIGZvcndhcmQsIGRpc3RhbmNlKSB7XG4gICAgbGV0IHN0YXJ0UG9zID0gc3RhcnQuaGVhZCwgZGlyID0gZm9yd2FyZCA/IDEgOiAtMTtcbiAgICBpZiAoc3RhcnRQb3MgPT0gKGZvcndhcmQgPyB2aWV3LnN0YXRlLmRvYy5sZW5ndGggOiAwKSlcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3Ioc3RhcnRQb3MsIHN0YXJ0LmFzc29jKTtcbiAgICBsZXQgZ29hbCA9IHN0YXJ0LmdvYWxDb2x1bW4sIHN0YXJ0WTtcbiAgICBsZXQgcmVjdCA9IHZpZXcuY29udGVudERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgc3RhcnRDb29yZHMgPSB2aWV3LmNvb3Jkc0F0UG9zKHN0YXJ0UG9zLCBzdGFydC5hc3NvYyB8fCAtMSksIGRvY1RvcCA9IHZpZXcuZG9jdW1lbnRUb3A7XG4gICAgaWYgKHN0YXJ0Q29vcmRzKSB7XG4gICAgICAgIGlmIChnb2FsID09IG51bGwpXG4gICAgICAgICAgICBnb2FsID0gc3RhcnRDb29yZHMubGVmdCAtIHJlY3QubGVmdDtcbiAgICAgICAgc3RhcnRZID0gZGlyIDwgMCA/IHN0YXJ0Q29vcmRzLnRvcCA6IHN0YXJ0Q29vcmRzLmJvdHRvbTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBsaW5lID0gdmlldy52aWV3U3RhdGUubGluZUJsb2NrQXQoc3RhcnRQb3MpO1xuICAgICAgICBpZiAoZ29hbCA9PSBudWxsKVxuICAgICAgICAgICAgZ29hbCA9IE1hdGgubWluKHJlY3QucmlnaHQgLSByZWN0LmxlZnQsIHZpZXcuZGVmYXVsdENoYXJhY3RlcldpZHRoICogKHN0YXJ0UG9zIC0gbGluZS5mcm9tKSk7XG4gICAgICAgIHN0YXJ0WSA9IChkaXIgPCAwID8gbGluZS50b3AgOiBsaW5lLmJvdHRvbSkgKyBkb2NUb3A7XG4gICAgfVxuICAgIGxldCByZXNvbHZlZEdvYWwgPSByZWN0LmxlZnQgKyBnb2FsO1xuICAgIGxldCBkaXN0ID0gZGlzdGFuY2UgIT09IG51bGwgJiYgZGlzdGFuY2UgIT09IHZvaWQgMCA/IGRpc3RhbmNlIDogKHZpZXcudmlld1N0YXRlLmhlaWdodE9yYWNsZS50ZXh0SGVpZ2h0ID4+IDEpO1xuICAgIGxldCBwb3MgPSBwb3NBdENvb3Jkcyh2aWV3LCB7IHg6IHJlc29sdmVkR29hbCwgeTogc3RhcnRZICsgZGlzdCAqIGRpciB9LCBmYWxzZSwgZGlyKTtcbiAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MucG9zLCBwb3MuYXNzb2MsIHVuZGVmaW5lZCwgZ29hbCk7XG59XG5mdW5jdGlvbiBza2lwQXRvbWljUmFuZ2VzKGF0b21zLCBwb3MsIGJpYXMpIHtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGxldCBtb3ZlZCA9IDA7XG4gICAgICAgIGZvciAobGV0IHNldCBvZiBhdG9tcykge1xuICAgICAgICAgICAgc2V0LmJldHdlZW4ocG9zIC0gMSwgcG9zICsgMSwgKGZyb20sIHRvLCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPiBmcm9tICYmIHBvcyA8IHRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzaWRlID0gbW92ZWQgfHwgYmlhcyB8fCAocG9zIC0gZnJvbSA8IHRvIC0gcG9zID8gLTEgOiAxKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gc2lkZSA8IDAgPyBmcm9tIDogdG87XG4gICAgICAgICAgICAgICAgICAgIG1vdmVkID0gc2lkZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1vdmVkKVxuICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG59XG5mdW5jdGlvbiBza2lwQXRvbXNGb3JTZWxlY3Rpb24oYXRvbXMsIHNlbCkge1xuICAgIGxldCByYW5nZXMgPSBudWxsO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgcmFuZ2UgPSBzZWwucmFuZ2VzW2ldLCB1cGRhdGVkID0gbnVsbDtcbiAgICAgICAgaWYgKHJhbmdlLmVtcHR5KSB7XG4gICAgICAgICAgICBsZXQgcG9zID0gc2tpcEF0b21pY1JhbmdlcyhhdG9tcywgcmFuZ2UuZnJvbSwgMCk7XG4gICAgICAgICAgICBpZiAocG9zICE9IHJhbmdlLmZyb20pXG4gICAgICAgICAgICAgICAgdXBkYXRlZCA9IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocG9zLCAtMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IHNraXBBdG9taWNSYW5nZXMoYXRvbXMsIHJhbmdlLmZyb20sIC0xKTtcbiAgICAgICAgICAgIGxldCB0byA9IHNraXBBdG9taWNSYW5nZXMoYXRvbXMsIHJhbmdlLnRvLCAxKTtcbiAgICAgICAgICAgIGlmIChmcm9tICE9IHJhbmdlLmZyb20gfHwgdG8gIT0gcmFuZ2UudG8pXG4gICAgICAgICAgICAgICAgdXBkYXRlZCA9IEVkaXRvclNlbGVjdGlvbi5yYW5nZShyYW5nZS5mcm9tID09IHJhbmdlLmFuY2hvciA/IGZyb20gOiB0bywgcmFuZ2UuZnJvbSA9PSByYW5nZS5oZWFkID8gZnJvbSA6IHRvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlZCkge1xuICAgICAgICAgICAgaWYgKCFyYW5nZXMpXG4gICAgICAgICAgICAgICAgcmFuZ2VzID0gc2VsLnJhbmdlcy5zbGljZSgpO1xuICAgICAgICAgICAgcmFuZ2VzW2ldID0gdXBkYXRlZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmFuZ2VzID8gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShyYW5nZXMsIHNlbC5tYWluSW5kZXgpIDogc2VsO1xufVxuZnVuY3Rpb24gc2tpcEF0b21zKHZpZXcsIG9sZFBvcywgcG9zKSB7XG4gICAgbGV0IG5ld1BvcyA9IHNraXBBdG9taWNSYW5nZXModmlldy5zdGF0ZS5mYWNldChhdG9taWNSYW5nZXMpLm1hcChmID0+IGYodmlldykpLCBwb3MuZnJvbSwgb2xkUG9zLmhlYWQgPiBwb3MuZnJvbSA/IC0xIDogMSk7XG4gICAgcmV0dXJuIG5ld1BvcyA9PSBwb3MuZnJvbSA/IHBvcyA6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IobmV3UG9zLCBuZXdQb3MgPCBwb3MuZnJvbSA/IDEgOiAtMSk7XG59XG5jbGFzcyBQb3NBc3NvYyB7XG4gICAgY29uc3RydWN0b3IocG9zLCBhc3NvYykge1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5hc3NvYyA9IGFzc29jO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHBvc0F0Q29vcmRzKHZpZXcsIGNvb3JkcywgcHJlY2lzZSwgc2NhblkpIHtcbiAgICBsZXQgY29udGVudCA9IHZpZXcuY29udGVudERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgZG9jVG9wID0gY29udGVudC50b3AgKyB2aWV3LnZpZXdTdGF0ZS5wYWRkaW5nVG9wO1xuICAgIGxldCB7IHgsIHkgfSA9IGNvb3JkcywgeU9mZnNldCA9IHkgLSBkb2NUb3AsIGJsb2NrO1xuICAgIC8vIEZpcnN0IGZpbmQgdGhlIGJsb2NrIGF0IHRoZSBnaXZlbiBZIHBvc2l0aW9uLCBpZiBhbnkuIElmIHNjYW5ZIGlzXG4gICAgLy8gZ2l2ZW4gKHVzZWQgZm9yIHZlcnRpY2FsIGN1cnNvciBtb3Rpb24pLCB0cnkgdG8gc2tpcCB3aWRnZXRzIGFuZFxuICAgIC8vIGxpbmUgcGFkZGluZy5cbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGlmICh5T2Zmc2V0IDwgMClcbiAgICAgICAgICAgIHJldHVybiBuZXcgUG9zQXNzb2MoMCwgMSk7XG4gICAgICAgIGlmICh5T2Zmc2V0ID4gdmlldy52aWV3U3RhdGUuZG9jSGVpZ2h0KVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQb3NBc3NvYyh2aWV3LnN0YXRlLmRvYy5sZW5ndGgsIC0xKTtcbiAgICAgICAgYmxvY2sgPSB2aWV3LmVsZW1lbnRBdEhlaWdodCh5T2Zmc2V0KTtcbiAgICAgICAgaWYgKHNjYW5ZID09IG51bGwpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgaWYgKGJsb2NrLnR5cGUgPT0gQmxvY2tUeXBlLlRleHQpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgd2UgYXJlbid0IGxhbmRpbmcgdGhlIHRvcC9ib3R0b20gcGFkZGluZyBvZiB0aGUgbGluZVxuICAgICAgICAgICAgbGV0IHJlY3QgPSB2aWV3LmRvY1ZpZXcuY29vcmRzQXQoc2NhblkgPCAwID8gYmxvY2suZnJvbSA6IGJsb2NrLnRvLCBzY2FuWSk7XG4gICAgICAgICAgICBpZiAocmVjdCAmJiAoc2NhblkgPCAwID8gcmVjdC50b3AgPD0geU9mZnNldCArIGRvY1RvcCA6IHJlY3QuYm90dG9tID49IHlPZmZzZXQgKyBkb2NUb3ApKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGxldCBoYWxmTGluZSA9IHZpZXcudmlld1N0YXRlLmhlaWdodE9yYWNsZS50ZXh0SGVpZ2h0IC8gMjtcbiAgICAgICAgeU9mZnNldCA9IHNjYW5ZID4gMCA/IGJsb2NrLmJvdHRvbSArIGhhbGZMaW5lIDogYmxvY2sudG9wIC0gaGFsZkxpbmU7XG4gICAgfVxuICAgIC8vIElmIG91dHNpZGUgdGhlIHZpZXdwb3J0LCByZXR1cm4gbnVsbCBpZiBwcmVjaXNlPT10cnVlLCBhblxuICAgIC8vIGVzdGltYXRlIG90aGVyd2lzZS5cbiAgICBpZiAodmlldy52aWV3cG9ydC5mcm9tID49IGJsb2NrLnRvIHx8IHZpZXcudmlld3BvcnQudG8gPD0gYmxvY2suZnJvbSkge1xuICAgICAgICBpZiAocHJlY2lzZSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoYmxvY2sudHlwZSA9PSBCbG9ja1R5cGUuVGV4dCkge1xuICAgICAgICAgICAgbGV0IHBvcyA9IHBvc0F0Q29vcmRzSW1wcmVjaXNlKHZpZXcsIGNvbnRlbnQsIGJsb2NrLCB4LCB5KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUG9zQXNzb2MocG9zLCBwb3MgPT0gYmxvY2suZnJvbSA/IDEgOiAtMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJsb2NrLnR5cGUgIT0gQmxvY2tUeXBlLlRleHQpXG4gICAgICAgIHJldHVybiB5T2Zmc2V0IDwgKGJsb2NrLnRvcCArIGJsb2NrLmJvdHRvbSkgLyAyID8gbmV3IFBvc0Fzc29jKGJsb2NrLmZyb20sIDEpIDogbmV3IFBvc0Fzc29jKGJsb2NrLnRvLCAtMSk7XG4gICAgLy8gSGVyZSB3ZSBrbm93IHdlJ3JlIGluIGEgbGluZSwgc28gcnVuIHRoZSBsb2dpYyBmb3IgaW5saW5lIGxheW91dFxuICAgIGxldCBsaW5lID0gdmlldy5kb2NWaWV3LmxpbmVBdChibG9jay5mcm9tLCAyKTtcbiAgICBpZiAoIWxpbmUgfHwgbGluZS5sZW5ndGggIT0gYmxvY2subGVuZ3RoKVxuICAgICAgICBsaW5lID0gdmlldy5kb2NWaWV3LmxpbmVBdChibG9jay5mcm9tLCAtMik7XG4gICAgcmV0dXJuIHBvc0F0Q29vcmRzSW5saW5lKHZpZXcsIGxpbmUsIGJsb2NrLmZyb20sIHgsIHkpO1xufVxuLy8gU2NhbiB0aHJvdWdoIHRoZSByZWN0YW5nbGVzIGZvciB0aGUgY29udGVudCBvZiBhIHRpbGUsIGZpbmRpbmcgdGhlXG4vLyBvbmUgY2xvc2VzdCB0byB0aGUgZ2l2ZW4gY29vcmRpbmF0ZXMsIHByZWZlcmluZyBjbG9zZW5lc3MgaW4gWSBvdmVyXG4vLyBjbG9zZW5lc3MgaW4gWC5cbi8vXG4vLyBJZiB0aGlzIGlzIGEgdGV4dCB0aWxlLCBnbyBjaGFyYWN0ZXItYnktY2hhcmFjdGVyLiBGb3IgbGluZSBvciBtYXJrXG4vLyB0aWxlcywgY2hlY2sgZWFjaCBub24tcG9pbnQtd2lkZ2V0IGNoaWxkLCBhbmQgZGVzY2VuZCB0ZXh0IG9yIG1hcmtcbi8vIHRpbGVzIHdpdGggYSByZWN1cnNpdmUgY2FsbC5cbi8vXG4vLyBGb3Igbm9uLXdyYXBwZWQsIHB1cmVseSBsZWZ0LXRvLXJpZ2h0IHRleHQsIHRoaXMgY291bGQgdXNlIGEgYmluYXJ5XG4vLyBzZWFyY2guIEJ1dCBiZWNhdXNlIHRoaXMgc2VlbXMgdG8gYmUgZmFzdCBlbm91Z2gsIGZvciBob3cgb2Z0ZW4gaXRcbi8vIGlzIGNhbGxlZCwgdGhlcmUncyBub3QgY3VycmVudGx5IGEgc3BlY2lhbGl6ZWQgaW1wbGVtZW50YXRpb24gZm9yXG4vLyB0aGF0LlxuZnVuY3Rpb24gcG9zQXRDb29yZHNJbmxpbmUodmlldywgdGlsZSwgb2Zmc2V0LCB4LCB5KSB7XG4gICAgbGV0IGNsb3Nlc3QgPSAtMSwgY2xvc2VzdFJlY3QgPSBudWxsO1xuICAgIGxldCBkeENsb3Nlc3QgPSAxZTksIGR5Q2xvc2VzdCA9IDFlOTtcbiAgICBsZXQgcm93VG9wID0geSwgcm93Qm90ID0geTtcbiAgICBsZXQgY2hlY2tSZWN0cyA9IChyZWN0cywgaW5kZXgpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJlY3QgPSByZWN0c1tpXTtcbiAgICAgICAgICAgIGlmIChyZWN0LnRvcCA9PSByZWN0LmJvdHRvbSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGxldCBkeCA9IHJlY3QubGVmdCA+IHggPyByZWN0LmxlZnQgLSB4IDogcmVjdC5yaWdodCA8IHggPyB4IC0gcmVjdC5yaWdodCA6IDA7XG4gICAgICAgICAgICBsZXQgZHkgPSByZWN0LnRvcCA+IHkgPyByZWN0LnRvcCAtIHkgOiByZWN0LmJvdHRvbSA8IHkgPyB5IC0gcmVjdC5ib3R0b20gOiAwO1xuICAgICAgICAgICAgaWYgKHJlY3QudG9wIDw9IHJvd0JvdCAmJiByZWN0LmJvdHRvbSA+PSByb3dUb3ApIHtcbiAgICAgICAgICAgICAgICAvLyBSZWN0YW5nbGUgaXMgaW4gdGhlIGN1cnJlbnQgcm93XG4gICAgICAgICAgICAgICAgcm93VG9wID0gTWF0aC5taW4ocmVjdC50b3AsIHJvd1RvcCk7XG4gICAgICAgICAgICAgICAgcm93Qm90ID0gTWF0aC5tYXgocmVjdC5ib3R0b20sIHJvd0JvdCk7XG4gICAgICAgICAgICAgICAgZHkgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNsb3Nlc3QgPCAwIHx8IChkeSAtIGR5Q2xvc2VzdCB8fCBkeCAtIGR4Q2xvc2VzdCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNsb3Nlc3QgPj0gMCAmJiBkeUNsb3Nlc3QgJiYgZHhDbG9zZXN0IDwgZHggJiZcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdFJlY3QudG9wIDw9IHJvd0JvdCAtIDIgJiYgY2xvc2VzdFJlY3QuYm90dG9tID49IHJvd1RvcCArIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0cm9hY3RpdmVseSBzZXQgZHkgdG8gMCBpZiB0aGUgY3VycmVudCBtYXRjaCBpcyBpbiB0aGlzIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgZHlDbG9zZXN0ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNsb3Nlc3QgPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgZHhDbG9zZXN0ID0gZHg7XG4gICAgICAgICAgICAgICAgICAgIGR5Q2xvc2VzdCA9IGR5O1xuICAgICAgICAgICAgICAgICAgICBjbG9zZXN0UmVjdCA9IHJlY3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAodGlsZS5pc1RleHQoKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbGUubGVuZ3RoOykge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBmaW5kQ2x1c3RlckJyZWFrKHRpbGUudGV4dCwgaSk7XG4gICAgICAgICAgICBjaGVja1JlY3RzKHRleHRSYW5nZSh0aWxlLmRvbSwgaSwgbmV4dCkuZ2V0Q2xpZW50UmVjdHMoKSwgaSk7XG4gICAgICAgICAgICBpZiAoIWR4Q2xvc2VzdCAmJiAhZHlDbG9zZXN0KVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaSA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFmdGVyID0gKHggPiAoY2xvc2VzdFJlY3QubGVmdCArIGNsb3Nlc3RSZWN0LnJpZ2h0KSAvIDIpID09IChkaXJBdCh2aWV3LCBjbG9zZXN0ICsgb2Zmc2V0KSA9PSBEaXJlY3Rpb24uTFRSKTtcbiAgICAgICAgcmV0dXJuIGFmdGVyID8gbmV3IFBvc0Fzc29jKG9mZnNldCArIGZpbmRDbHVzdGVyQnJlYWsodGlsZS50ZXh0LCBjbG9zZXN0KSwgLTEpIDogbmV3IFBvc0Fzc29jKG9mZnNldCArIGNsb3Nlc3QsIDEpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCF0aWxlLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBuZXcgUG9zQXNzb2Mob2Zmc2V0LCAxKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aWxlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aWxlLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLmZsYWdzICYgNDggLyogVGlsZUZsYWcuUG9pbnRXaWRnZXQgKi8pXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBsZXQgcmVjdHMgPSAoY2hpbGQuZG9tLm5vZGVUeXBlID09IDEgPyBjaGlsZC5kb20gOiB0ZXh0UmFuZ2UoY2hpbGQuZG9tLCAwLCBjaGlsZC5sZW5ndGgpKS5nZXRDbGllbnRSZWN0cygpO1xuICAgICAgICAgICAgY2hlY2tSZWN0cyhyZWN0cywgaSk7XG4gICAgICAgICAgICBpZiAoIWR4Q2xvc2VzdCAmJiAhZHlDbG9zZXN0KVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpbm5lciA9IHRpbGUuY2hpbGRyZW5bY2xvc2VzdF0sIGlubmVyT2ZmID0gdGlsZS5wb3NCZWZvcmUoaW5uZXIsIG9mZnNldCk7XG4gICAgICAgIGlmIChpbm5lci5pc0NvbXBvc2l0ZSgpIHx8IGlubmVyLmlzVGV4dCgpKVxuICAgICAgICAgICAgcmV0dXJuIHBvc0F0Q29vcmRzSW5saW5lKHZpZXcsIGlubmVyLCBpbm5lck9mZiwgTWF0aC5tYXgoY2xvc2VzdFJlY3QubGVmdCwgTWF0aC5taW4oY2xvc2VzdFJlY3QucmlnaHQsIHgpKSwgeSk7XG4gICAgICAgIGxldCBhZnRlciA9ICh4ID4gKGNsb3Nlc3RSZWN0LmxlZnQgKyBjbG9zZXN0UmVjdC5yaWdodCkgLyAyKSA9PSAoZGlyQXQodmlldywgY2xvc2VzdCArIG9mZnNldCkgPT0gRGlyZWN0aW9uLkxUUik7XG4gICAgICAgIHJldHVybiBhZnRlciA/IG5ldyBQb3NBc3NvYyhpbm5lck9mZiArIGlubmVyLmxlbmd0aCwgLTEpIDogbmV3IFBvc0Fzc29jKGlubmVyT2ZmLCAxKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkaXJBdCh2aWV3LCBwb3MpIHtcbiAgICBsZXQgbGluZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdChwb3MpLCBzcGFucyA9IHZpZXcuYmlkaVNwYW5zKGxpbmUpO1xuICAgIHJldHVybiBzcGFuc1tCaWRpU3Bhbi5maW5kKHZpZXcuYmlkaVNwYW5zKGxpbmUpLCBwb3MgLSBsaW5lLmZyb20sIC0xLCAxKV0uZGlyO1xufVxuXG5jb25zdCBMaW5lQnJlYWtQbGFjZWhvbGRlciA9IFwiXFx1ZmZmZlwiO1xuY2xhc3MgRE9NUmVhZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwb2ludHMsIHZpZXcpIHtcbiAgICAgICAgdGhpcy5wb2ludHMgPSBwb2ludHM7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMudGV4dCA9IFwiXCI7XG4gICAgICAgIHRoaXMubGluZVNlcGFyYXRvciA9IHZpZXcuc3RhdGUuZmFjZXQoRWRpdG9yU3RhdGUubGluZVNlcGFyYXRvcik7XG4gICAgfVxuICAgIGFwcGVuZCh0ZXh0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSB0ZXh0O1xuICAgIH1cbiAgICBsaW5lQnJlYWsoKSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBMaW5lQnJlYWtQbGFjZWhvbGRlcjtcbiAgICB9XG4gICAgcmVhZFJhbmdlKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgaWYgKCFzdGFydClcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBsZXQgcGFyZW50ID0gc3RhcnQucGFyZW50Tm9kZTtcbiAgICAgICAgZm9yIChsZXQgY3VyID0gc3RhcnQ7Oykge1xuICAgICAgICAgICAgdGhpcy5maW5kUG9pbnRCZWZvcmUocGFyZW50LCBjdXIpO1xuICAgICAgICAgICAgbGV0IG9sZExlbiA9IHRoaXMudGV4dC5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLnJlYWROb2RlKGN1cik7XG4gICAgICAgICAgICBsZXQgdGlsZSA9IFRpbGUuZ2V0KGN1ciksIG5leHQgPSBjdXIubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAobmV4dCA9PSBlbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHRpbGUgPT09IG51bGwgfHwgdGlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGlsZS5icmVha0FmdGVyKSAmJiAhbmV4dCAmJiBwYXJlbnQgIT0gdGhpcy52aWV3LmNvbnRlbnRET00pXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGluZUJyZWFrKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbmV4dFRpbGUgPSBUaWxlLmdldChuZXh0KTtcbiAgICAgICAgICAgIGlmICgodGlsZSAmJiBuZXh0VGlsZSA/IHRpbGUuYnJlYWtBZnRlciA6XG4gICAgICAgICAgICAgICAgKHRpbGUgPyB0aWxlLmJyZWFrQWZ0ZXIgOiBpc0Jsb2NrRWxlbWVudChjdXIpKSB8fFxuICAgICAgICAgICAgICAgICAgICAoaXNCbG9ja0VsZW1lbnQobmV4dCkgJiYgKGN1ci5ub2RlTmFtZSAhPSBcIkJSXCIgfHwgKHRpbGUgPT09IG51bGwgfHwgdGlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGlsZS5pc1dpZGdldCgpKSkgJiYgdGhpcy50ZXh0Lmxlbmd0aCA+IG9sZExlbikpICYmXG4gICAgICAgICAgICAgICAgIWlzRW1wdHlUb0VuZChuZXh0LCBlbmQpKVxuICAgICAgICAgICAgICAgIHRoaXMubGluZUJyZWFrKCk7XG4gICAgICAgICAgICBjdXIgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmluZFBvaW50QmVmb3JlKHBhcmVudCwgZW5kKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlYWRUZXh0Tm9kZShub2RlKSB7XG4gICAgICAgIGxldCB0ZXh0ID0gbm9kZS5ub2RlVmFsdWU7XG4gICAgICAgIGZvciAobGV0IHBvaW50IG9mIHRoaXMucG9pbnRzKVxuICAgICAgICAgICAgaWYgKHBvaW50Lm5vZGUgPT0gbm9kZSlcbiAgICAgICAgICAgICAgICBwb2ludC5wb3MgPSB0aGlzLnRleHQubGVuZ3RoICsgTWF0aC5taW4ocG9pbnQub2Zmc2V0LCB0ZXh0Lmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IG9mZiA9IDAsIHJlID0gdGhpcy5saW5lU2VwYXJhdG9yID8gbnVsbCA6IC9cXHJcXG4/fFxcbi9nOzspIHtcbiAgICAgICAgICAgIGxldCBuZXh0QnJlYWsgPSAtMSwgYnJlYWtTaXplID0gMSwgbTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmVTZXBhcmF0b3IpIHtcbiAgICAgICAgICAgICAgICBuZXh0QnJlYWsgPSB0ZXh0LmluZGV4T2YodGhpcy5saW5lU2VwYXJhdG9yLCBvZmYpO1xuICAgICAgICAgICAgICAgIGJyZWFrU2l6ZSA9IHRoaXMubGluZVNlcGFyYXRvci5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtID0gcmUuZXhlYyh0ZXh0KSkge1xuICAgICAgICAgICAgICAgIG5leHRCcmVhayA9IG0uaW5kZXg7XG4gICAgICAgICAgICAgICAgYnJlYWtTaXplID0gbVswXS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFwcGVuZCh0ZXh0LnNsaWNlKG9mZiwgbmV4dEJyZWFrIDwgMCA/IHRleHQubGVuZ3RoIDogbmV4dEJyZWFrKSk7XG4gICAgICAgICAgICBpZiAobmV4dEJyZWFrIDwgMClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHRoaXMubGluZUJyZWFrKCk7XG4gICAgICAgICAgICBpZiAoYnJlYWtTaXplID4gMSlcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwb2ludCBvZiB0aGlzLnBvaW50cylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50Lm5vZGUgPT0gbm9kZSAmJiBwb2ludC5wb3MgPiB0aGlzLnRleHQubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQucG9zIC09IGJyZWFrU2l6ZSAtIDE7XG4gICAgICAgICAgICBvZmYgPSBuZXh0QnJlYWsgKyBicmVha1NpemU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVhZE5vZGUobm9kZSkge1xuICAgICAgICBsZXQgdGlsZSA9IFRpbGUuZ2V0KG5vZGUpO1xuICAgICAgICBsZXQgZnJvbVZpZXcgPSB0aWxlICYmIHRpbGUub3ZlcnJpZGVET01UZXh0O1xuICAgICAgICBpZiAoZnJvbVZpZXcgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5maW5kUG9pbnRJbnNpZGUobm9kZSwgZnJvbVZpZXcubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBmcm9tVmlldy5pdGVyKCk7ICFpLm5leHQoKS5kb25lOykge1xuICAgICAgICAgICAgICAgIGlmIChpLmxpbmVCcmVhaylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lQnJlYWsoKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kKGkudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykge1xuICAgICAgICAgICAgdGhpcy5yZWFkVGV4dE5vZGUobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZS5ub2RlTmFtZSA9PSBcIkJSXCIpIHtcbiAgICAgICAgICAgIGlmIChub2RlLm5leHRTaWJsaW5nKVxuICAgICAgICAgICAgICAgIHRoaXMubGluZUJyZWFrKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRSYW5nZShub2RlLmZpcnN0Q2hpbGQsIG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmRQb2ludEJlZm9yZShub2RlLCBuZXh0KSB7XG4gICAgICAgIGZvciAobGV0IHBvaW50IG9mIHRoaXMucG9pbnRzKVxuICAgICAgICAgICAgaWYgKHBvaW50Lm5vZGUgPT0gbm9kZSAmJiBub2RlLmNoaWxkTm9kZXNbcG9pbnQub2Zmc2V0XSA9PSBuZXh0KVxuICAgICAgICAgICAgICAgIHBvaW50LnBvcyA9IHRoaXMudGV4dC5sZW5ndGg7XG4gICAgfVxuICAgIGZpbmRQb2ludEluc2lkZShub2RlLCBsZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgcG9pbnQgb2YgdGhpcy5wb2ludHMpXG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAzID8gcG9pbnQubm9kZSA9PSBub2RlIDogbm9kZS5jb250YWlucyhwb2ludC5ub2RlKSlcbiAgICAgICAgICAgICAgICBwb2ludC5wb3MgPSB0aGlzLnRleHQubGVuZ3RoICsgKGlzQXRFbmQobm9kZSwgcG9pbnQubm9kZSwgcG9pbnQub2Zmc2V0KSA/IGxlbmd0aCA6IDApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzQXRFbmQocGFyZW50LCBub2RlLCBvZmZzZXQpIHtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGlmICghbm9kZSB8fCBvZmZzZXQgPCBtYXhPZmZzZXQobm9kZSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChub2RlID09IHBhcmVudClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBvZmZzZXQgPSBkb21JbmRleChub2RlKSArIDE7XG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNFbXB0eVRvRW5kKG5vZGUsIGVuZCkge1xuICAgIGxldCB3aWRnZXRzO1xuICAgIGZvciAoOzsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgaWYgKG5vZGUgPT0gZW5kIHx8ICFub2RlKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGxldCB2aWV3ID0gVGlsZS5nZXQobm9kZSk7XG4gICAgICAgIGlmICghKHZpZXcgPT09IG51bGwgfHwgdmlldyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmlldy5pc1dpZGdldCgpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHZpZXcpXG4gICAgICAgICAgICAod2lkZ2V0cyB8fCAod2lkZ2V0cyA9IFtdKSkucHVzaCh2aWV3KTtcbiAgICB9XG4gICAgaWYgKHdpZGdldHMpXG4gICAgICAgIGZvciAobGV0IHcgb2Ygd2lkZ2V0cykge1xuICAgICAgICAgICAgbGV0IG92ZXJyaWRlID0gdy5vdmVycmlkZURPTVRleHQ7XG4gICAgICAgICAgICBpZiAob3ZlcnJpZGUgPT09IG51bGwgfHwgb3ZlcnJpZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG92ZXJyaWRlLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmNsYXNzIERPTVBvaW50IHtcbiAgICBjb25zdHJ1Y3Rvcihub2RlLCBvZmZzZXQpIHtcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHRoaXMucG9zID0gLTE7XG4gICAgfVxufVxuXG5jbGFzcyBET01DaGFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIHN0YXJ0LCBlbmQsIHR5cGVPdmVyKSB7XG4gICAgICAgIHRoaXMudHlwZU92ZXIgPSB0eXBlT3ZlcjtcbiAgICAgICAgdGhpcy5ib3VuZHMgPSBudWxsO1xuICAgICAgICB0aGlzLnRleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLmRvbUNoYW5nZWQgPSBzdGFydCA+IC0xO1xuICAgICAgICBsZXQgeyBpbXByZWNpc2VIZWFkOiBpSGVhZCwgaW1wcmVjaXNlQW5jaG9yOiBpQW5jaG9yIH0gPSB2aWV3LmRvY1ZpZXc7XG4gICAgICAgIGlmICh2aWV3LnN0YXRlLnJlYWRPbmx5ICYmIHN0YXJ0ID4gLTEpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZSBjaGFuZ2VzIHdoZW4gdGhlIGVkaXRvciBpcyByZWFkLW9ubHlcbiAgICAgICAgICAgIHRoaXMubmV3U2VsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGFydCA+IC0xICYmICh0aGlzLmJvdW5kcyA9IGRvbUJvdW5kc0Fyb3VuZCh2aWV3LmRvY1ZpZXcudGlsZSwgc3RhcnQsIGVuZCwgMCkpKSB7XG4gICAgICAgICAgICBsZXQgc2VsUG9pbnRzID0gaUhlYWQgfHwgaUFuY2hvciA/IFtdIDogc2VsZWN0aW9uUG9pbnRzKHZpZXcpO1xuICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBET01SZWFkZXIoc2VsUG9pbnRzLCB2aWV3KTtcbiAgICAgICAgICAgIHJlYWRlci5yZWFkUmFuZ2UodGhpcy5ib3VuZHMuc3RhcnRET00sIHRoaXMuYm91bmRzLmVuZERPTSk7XG4gICAgICAgICAgICB0aGlzLnRleHQgPSByZWFkZXIudGV4dDtcbiAgICAgICAgICAgIHRoaXMubmV3U2VsID0gc2VsZWN0aW9uRnJvbVBvaW50cyhzZWxQb2ludHMsIHRoaXMuYm91bmRzLmZyb20pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRvbVNlbCA9IHZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2U7XG4gICAgICAgICAgICBsZXQgaGVhZCA9IGlIZWFkICYmIGlIZWFkLm5vZGUgPT0gZG9tU2VsLmZvY3VzTm9kZSAmJiBpSGVhZC5vZmZzZXQgPT0gZG9tU2VsLmZvY3VzT2Zmc2V0IHx8XG4gICAgICAgICAgICAgICAgIWNvbnRhaW5zKHZpZXcuY29udGVudERPTSwgZG9tU2VsLmZvY3VzTm9kZSlcbiAgICAgICAgICAgICAgICA/IHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZFxuICAgICAgICAgICAgICAgIDogdmlldy5kb2NWaWV3LnBvc0Zyb21ET00oZG9tU2VsLmZvY3VzTm9kZSwgZG9tU2VsLmZvY3VzT2Zmc2V0KTtcbiAgICAgICAgICAgIGxldCBhbmNob3IgPSBpQW5jaG9yICYmIGlBbmNob3Iubm9kZSA9PSBkb21TZWwuYW5jaG9yTm9kZSAmJiBpQW5jaG9yLm9mZnNldCA9PSBkb21TZWwuYW5jaG9yT2Zmc2V0IHx8XG4gICAgICAgICAgICAgICAgIWNvbnRhaW5zKHZpZXcuY29udGVudERPTSwgZG9tU2VsLmFuY2hvck5vZGUpXG4gICAgICAgICAgICAgICAgPyB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmFuY2hvclxuICAgICAgICAgICAgICAgIDogdmlldy5kb2NWaWV3LnBvc0Zyb21ET00oZG9tU2VsLmFuY2hvck5vZGUsIGRvbVNlbC5hbmNob3JPZmZzZXQpO1xuICAgICAgICAgICAgLy8gaU9TIHdpbGwgcmVmdXNlIHRvIHNlbGVjdCB0aGUgYmxvY2sgZ2FwcyB3aGVuIGRvaW5nXG4gICAgICAgICAgICAvLyBzZWxlY3QtYWxsLlxuICAgICAgICAgICAgLy8gQ2hyb21lIHdpbGwgcHV0IHRoZSBzZWxlY3Rpb24gKmluc2lkZSogdGhlbSwgY29uZnVzaW5nXG4gICAgICAgICAgICAvLyBwb3NGcm9tRE9NXG4gICAgICAgICAgICBsZXQgdnAgPSB2aWV3LnZpZXdwb3J0O1xuICAgICAgICAgICAgaWYgKChicm93c2VyLmlvcyB8fCBicm93c2VyLmNocm9tZSkgJiYgdmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbi5lbXB0eSAmJiBoZWFkICE9IGFuY2hvciAmJlxuICAgICAgICAgICAgICAgICh2cC5mcm9tID4gMCB8fCB2cC50byA8IHZpZXcuc3RhdGUuZG9jLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IE1hdGgubWluKGhlYWQsIGFuY2hvciksIHRvID0gTWF0aC5tYXgoaGVhZCwgYW5jaG9yKTtcbiAgICAgICAgICAgICAgICBsZXQgb2ZmRnJvbSA9IHZwLmZyb20gLSBmcm9tLCBvZmZUbyA9IHZwLnRvIC0gdG87XG4gICAgICAgICAgICAgICAgaWYgKChvZmZGcm9tID09IDAgfHwgb2ZmRnJvbSA9PSAxIHx8IGZyb20gPT0gMCkgJiYgKG9mZlRvID09IDAgfHwgb2ZmVG8gPT0gLTEgfHwgdG8gPT0gdmlldy5zdGF0ZS5kb2MubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gdmlldy5zdGF0ZS5kb2MubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID4gLTEgJiYgdmlldy5zdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICAgICAgdGhpcy5uZXdTZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5yZXBsYWNlUmFuZ2UoRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGFuY2hvciwgaGVhZCkpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMubmV3U2VsID0gRWRpdG9yU2VsZWN0aW9uLnNpbmdsZShhbmNob3IsIGhlYWQpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZG9tQm91bmRzQXJvdW5kKHRpbGUsIGZyb20sIHRvLCBvZmZzZXQpIHtcbiAgICBpZiAodGlsZS5pc0NvbXBvc2l0ZSgpKSB7XG4gICAgICAgIGxldCBmcm9tSSA9IC0xLCBmcm9tU3RhcnQgPSAtMSwgdG9JID0gLTEsIHRvRW5kID0gLTE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBwb3MgPSBvZmZzZXQsIHByZXZFbmQgPSBvZmZzZXQ7IGkgPCB0aWxlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aWxlLmNoaWxkcmVuW2ldLCBlbmQgPSBwb3MgKyBjaGlsZC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAocG9zIDwgZnJvbSAmJiBlbmQgPiB0bylcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9tQm91bmRzQXJvdW5kKGNoaWxkLCBmcm9tLCB0bywgcG9zKTtcbiAgICAgICAgICAgIGlmIChlbmQgPj0gZnJvbSAmJiBmcm9tSSA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGZyb21JID0gaTtcbiAgICAgICAgICAgICAgICBmcm9tU3RhcnQgPSBwb3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9zID4gdG8gJiYgY2hpbGQuZG9tLnBhcmVudE5vZGUgPT0gdGlsZS5kb20pIHtcbiAgICAgICAgICAgICAgICB0b0kgPSBpO1xuICAgICAgICAgICAgICAgIHRvRW5kID0gcHJldkVuZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZFbmQgPSBlbmQ7XG4gICAgICAgICAgICBwb3MgPSBlbmQgKyBjaGlsZC5icmVha0FmdGVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZyb206IGZyb21TdGFydCwgdG86IHRvRW5kIDwgMCA/IG9mZnNldCArIHRpbGUubGVuZ3RoIDogdG9FbmQsXG4gICAgICAgICAgICBzdGFydERPTTogKGZyb21JID8gdGlsZS5jaGlsZHJlbltmcm9tSSAtIDFdLmRvbS5uZXh0U2libGluZyA6IG51bGwpIHx8IHRpbGUuZG9tLmZpcnN0Q2hpbGQsXG4gICAgICAgICAgICBlbmRET006IHRvSSA8IHRpbGUuY2hpbGRyZW4ubGVuZ3RoICYmIHRvSSA+PSAwID8gdGlsZS5jaGlsZHJlblt0b0ldLmRvbSA6IG51bGwgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGlsZS5pc1RleHQoKSkge1xuICAgICAgICByZXR1cm4geyBmcm9tOiBvZmZzZXQsIHRvOiBvZmZzZXQgKyB0aWxlLmxlbmd0aCwgc3RhcnRET006IHRpbGUuZG9tLCBlbmRET006IHRpbGUuZG9tLm5leHRTaWJsaW5nIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5mdW5jdGlvbiBhcHBseURPTUNoYW5nZSh2aWV3LCBkb21DaGFuZ2UpIHtcbiAgICBsZXQgY2hhbmdlO1xuICAgIGxldCB7IG5ld1NlbCB9ID0gZG9tQ2hhbmdlLCBzZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgIGxldCBsYXN0S2V5ID0gdmlldy5pbnB1dFN0YXRlLmxhc3RLZXlUaW1lID4gRGF0ZS5ub3coKSAtIDEwMCA/IHZpZXcuaW5wdXRTdGF0ZS5sYXN0S2V5Q29kZSA6IC0xO1xuICAgIGlmIChkb21DaGFuZ2UuYm91bmRzKSB7XG4gICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSBkb21DaGFuZ2UuYm91bmRzO1xuICAgICAgICBsZXQgcHJlZmVycmVkUG9zID0gc2VsLmZyb20sIHByZWZlcnJlZFNpZGUgPSBudWxsO1xuICAgICAgICAvLyBQcmVmZXIgYW5jaG9yaW5nIHRvIGVuZCB3aGVuIEJhY2tzcGFjZSBpcyBwcmVzc2VkIChvciwgb25cbiAgICAgICAgLy8gQW5kcm9pZCwgd2hlbiBzb21ldGhpbmcgd2FzIGRlbGV0ZWQpXG4gICAgICAgIGlmIChsYXN0S2V5ID09PSA4IHx8IGJyb3dzZXIuYW5kcm9pZCAmJiBkb21DaGFuZ2UudGV4dC5sZW5ndGggPCB0byAtIGZyb20pIHtcbiAgICAgICAgICAgIHByZWZlcnJlZFBvcyA9IHNlbC50bztcbiAgICAgICAgICAgIHByZWZlcnJlZFNpZGUgPSBcImVuZFwiO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkaWZmID0gZmluZERpZmYodmlldy5zdGF0ZS5kb2Muc2xpY2VTdHJpbmcoZnJvbSwgdG8sIExpbmVCcmVha1BsYWNlaG9sZGVyKSwgZG9tQ2hhbmdlLnRleHQsIHByZWZlcnJlZFBvcyAtIGZyb20sIHByZWZlcnJlZFNpZGUpO1xuICAgICAgICBpZiAoZGlmZikge1xuICAgICAgICAgICAgLy8gQ2hyb21lIGluc2VydHMgdHdvIG5ld2xpbmVzIHdoZW4gcHJlc3Npbmcgc2hpZnQtZW50ZXIgYXQgdGhlXG4gICAgICAgICAgICAvLyBlbmQgb2YgYSBsaW5lLiBEb21DaGFuZ2UgZHJvcHMgb25lIG9mIHRob3NlLlxuICAgICAgICAgICAgaWYgKGJyb3dzZXIuY2hyb21lICYmIGxhc3RLZXkgPT0gMTMgJiZcbiAgICAgICAgICAgICAgICBkaWZmLnRvQiA9PSBkaWZmLmZyb20gKyAyICYmIGRvbUNoYW5nZS50ZXh0LnNsaWNlKGRpZmYuZnJvbSwgZGlmZi50b0IpID09IExpbmVCcmVha1BsYWNlaG9sZGVyICsgTGluZUJyZWFrUGxhY2Vob2xkZXIpXG4gICAgICAgICAgICAgICAgZGlmZi50b0ItLTtcbiAgICAgICAgICAgIGNoYW5nZSA9IHsgZnJvbTogZnJvbSArIGRpZmYuZnJvbSwgdG86IGZyb20gKyBkaWZmLnRvQSxcbiAgICAgICAgICAgICAgICBpbnNlcnQ6IFRleHQub2YoZG9tQ2hhbmdlLnRleHQuc2xpY2UoZGlmZi5mcm9tLCBkaWZmLnRvQikuc3BsaXQoTGluZUJyZWFrUGxhY2Vob2xkZXIpKSB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG5ld1NlbCAmJiAoIXZpZXcuaGFzRm9jdXMgJiYgdmlldy5zdGF0ZS5mYWNldChlZGl0YWJsZSkgfHwgc2FtZVNlbFBvcyhuZXdTZWwsIHNlbCkpKSB7XG4gICAgICAgIG5ld1NlbCA9IG51bGw7XG4gICAgfVxuICAgIGlmICghY2hhbmdlICYmICFuZXdTZWwpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIWNoYW5nZSAmJiBkb21DaGFuZ2UudHlwZU92ZXIgJiYgIXNlbC5lbXB0eSAmJiBuZXdTZWwgJiYgbmV3U2VsLm1haW4uZW1wdHkpIHtcbiAgICAgICAgLy8gSGV1cmlzdGljIHRvIG5vdGljZSB0eXBpbmcgb3ZlciBhIHNlbGVjdGVkIGNoYXJhY3RlclxuICAgICAgICBjaGFuZ2UgPSB7IGZyb206IHNlbC5mcm9tLCB0bzogc2VsLnRvLCBpbnNlcnQ6IHZpZXcuc3RhdGUuZG9jLnNsaWNlKHNlbC5mcm9tLCBzZWwudG8pIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKChicm93c2VyLm1hYyB8fCBicm93c2VyLmFuZHJvaWQpICYmIGNoYW5nZSAmJiBjaGFuZ2UuZnJvbSA9PSBjaGFuZ2UudG8gJiYgY2hhbmdlLmZyb20gPT0gc2VsLmhlYWQgLSAxICYmXG4gICAgICAgIC9eXFwuID8kLy50ZXN0KGNoYW5nZS5pbnNlcnQudG9TdHJpbmcoKSkgJiYgdmlldy5jb250ZW50RE9NLmdldEF0dHJpYnV0ZShcImF1dG9jb3JyZWN0XCIpID09IFwib2ZmXCIpIHtcbiAgICAgICAgLy8gRGV0ZWN0IGluc2VydC1wZXJpb2Qtb24tZG91YmxlLXNwYWNlIE1hYyBhbmQgQW5kcm9pZCBiZWhhdmlvcixcbiAgICAgICAgLy8gYW5kIHRyYW5zZm9ybSBpdCBpbnRvIGEgcmVndWxhciBzcGFjZSBpbnNlcnQuXG4gICAgICAgIGlmIChuZXdTZWwgJiYgY2hhbmdlLmluc2VydC5sZW5ndGggPT0gMilcbiAgICAgICAgICAgIG5ld1NlbCA9IEVkaXRvclNlbGVjdGlvbi5zaW5nbGUobmV3U2VsLm1haW4uYW5jaG9yIC0gMSwgbmV3U2VsLm1haW4uaGVhZCAtIDEpO1xuICAgICAgICBjaGFuZ2UgPSB7IGZyb206IGNoYW5nZS5mcm9tLCB0bzogY2hhbmdlLnRvLCBpbnNlcnQ6IFRleHQub2YoW2NoYW5nZS5pbnNlcnQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIiBcIildKSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChjaGFuZ2UgJiYgY2hhbmdlLmZyb20gPj0gc2VsLmZyb20gJiYgY2hhbmdlLnRvIDw9IHNlbC50byAmJlxuICAgICAgICAoY2hhbmdlLmZyb20gIT0gc2VsLmZyb20gfHwgY2hhbmdlLnRvICE9IHNlbC50bykgJiZcbiAgICAgICAgKHNlbC50byAtIHNlbC5mcm9tKSAtIChjaGFuZ2UudG8gLSBjaGFuZ2UuZnJvbSkgPD0gNCkge1xuICAgICAgICAvLyBJZiB0aGUgY2hhbmdlIGlzIGluc2lkZSB0aGUgc2VsZWN0aW9uIGFuZCBjb3ZlcnMgbW9zdCBvZiBpdCxcbiAgICAgICAgLy8gYXNzdW1lIGl0IGlzIGEgc2VsZWN0aW9uIHJlcGxhY2UgKHdpdGggaWRlbnRpY2FsIGNoYXJhY3RlcnMgYXRcbiAgICAgICAgLy8gdGhlIHN0YXJ0L2VuZCBub3QgaW5jbHVkZWQgaW4gdGhlIGRpZmYpXG4gICAgICAgIGNoYW5nZSA9IHtcbiAgICAgICAgICAgIGZyb206IHNlbC5mcm9tLCB0bzogc2VsLnRvLFxuICAgICAgICAgICAgaW5zZXJ0OiB2aWV3LnN0YXRlLmRvYy5zbGljZShzZWwuZnJvbSwgY2hhbmdlLmZyb20pLmFwcGVuZChjaGFuZ2UuaW5zZXJ0KS5hcHBlbmQodmlldy5zdGF0ZS5kb2Muc2xpY2UoY2hhbmdlLnRvLCBzZWwudG8pKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh2aWV3LnN0YXRlLmRvYy5saW5lQXQoc2VsLmZyb20pLnRvIDwgc2VsLnRvICYmIHZpZXcuZG9jVmlldy5saW5lSGFzV2lkZ2V0KHNlbC50bykgJiZcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLmluc2VydGluZ1RleHRBdCA+IERhdGUubm93KCkgLSA1MCkge1xuICAgICAgICAvLyBGb3IgYSBjcm9zcy1saW5lIGluc2VydGlvbiwgQ2hyb21lIGFuZCBTYWZhcmkgd2lsbCBjcnVkZWx5IHRha2VcbiAgICAgICAgLy8gdGhlIHRleHQgb2YgdGhlIGxpbmUgYWZ0ZXIgdGhlIHNlbGVjdGlvbiwgZmxhdHRlbmluZyBhbnlcbiAgICAgICAgLy8gd2lkZ2V0cywgYW5kIG1vdmUgaXQgaW50byB0aGUgam9pbmVkIGxpbmUuIFRoaXMgdHJpZXMgdG8gZGV0ZWN0XG4gICAgICAgIC8vIHN1Y2ggYSBzaXR1YXRpb24sIGFuZCByZXBsYWNlcyB0aGUgY2hhbmdlIHdpdGggYSBzZWxlY3Rpb25cbiAgICAgICAgLy8gcmVwbGFjZSBvZiB0aGUgdGV4dCBwcm92aWRlZCBieSB0aGUgYmVmb3JlaW5wdXQgZXZlbnQuXG4gICAgICAgIGNoYW5nZSA9IHtcbiAgICAgICAgICAgIGZyb206IHNlbC5mcm9tLCB0bzogc2VsLnRvLFxuICAgICAgICAgICAgaW5zZXJ0OiB2aWV3LnN0YXRlLnRvVGV4dCh2aWV3LmlucHV0U3RhdGUuaW5zZXJ0aW5nVGV4dClcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYnJvd3Nlci5jaHJvbWUgJiYgY2hhbmdlICYmIGNoYW5nZS5mcm9tID09IGNoYW5nZS50byAmJiBjaGFuZ2UuZnJvbSA9PSBzZWwuaGVhZCAmJlxuICAgICAgICBjaGFuZ2UuaW5zZXJ0LnRvU3RyaW5nKCkgPT0gXCJcXG4gXCIgJiYgdmlldy5saW5lV3JhcHBpbmcpIHtcbiAgICAgICAgLy8gSW4gQ2hyb21lLCBpZiB5b3UgaW5zZXJ0IGEgc3BhY2UgYXQgdGhlIHN0YXJ0IG9mIGEgd3JhcHBlZFxuICAgICAgICAvLyBsaW5lLCBpdCB3aWxsIGFjdHVhbGx5IGluc2VydCBhIG5ld2xpbmUgYW5kIGEgc3BhY2UsIGNhdXNpbmcgYVxuICAgICAgICAvLyBib2d1cyBuZXcgbGluZSB0byBiZSBjcmVhdGVkIGluIENvZGVNaXJyb3IgKCM5NjgpXG4gICAgICAgIGlmIChuZXdTZWwpXG4gICAgICAgICAgICBuZXdTZWwgPSBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKG5ld1NlbC5tYWluLmFuY2hvciAtIDEsIG5ld1NlbC5tYWluLmhlYWQgLSAxKTtcbiAgICAgICAgY2hhbmdlID0geyBmcm9tOiBzZWwuZnJvbSwgdG86IHNlbC50bywgaW5zZXJ0OiBUZXh0Lm9mKFtcIiBcIl0pIH07XG4gICAgfVxuICAgIGlmIChjaGFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIGFwcGx5RE9NQ2hhbmdlSW5uZXIodmlldywgY2hhbmdlLCBuZXdTZWwsIGxhc3RLZXkpO1xuICAgIH1cbiAgICBlbHNlIGlmIChuZXdTZWwgJiYgIXNhbWVTZWxQb3MobmV3U2VsLCBzZWwpKSB7XG4gICAgICAgIGxldCBzY3JvbGxJbnRvVmlldyA9IGZhbHNlLCB1c2VyRXZlbnQgPSBcInNlbGVjdFwiO1xuICAgICAgICBpZiAodmlldy5pbnB1dFN0YXRlLmxhc3RTZWxlY3Rpb25UaW1lID4gRGF0ZS5ub3coKSAtIDUwKSB7XG4gICAgICAgICAgICBpZiAodmlldy5pbnB1dFN0YXRlLmxhc3RTZWxlY3Rpb25PcmlnaW4gPT0gXCJzZWxlY3RcIilcbiAgICAgICAgICAgICAgICBzY3JvbGxJbnRvVmlldyA9IHRydWU7XG4gICAgICAgICAgICB1c2VyRXZlbnQgPSB2aWV3LmlucHV0U3RhdGUubGFzdFNlbGVjdGlvbk9yaWdpbjtcbiAgICAgICAgICAgIGlmICh1c2VyRXZlbnQgPT0gXCJzZWxlY3QucG9pbnRlclwiKVxuICAgICAgICAgICAgICAgIG5ld1NlbCA9IHNraXBBdG9tc0ZvclNlbGVjdGlvbih2aWV3LnN0YXRlLmZhY2V0KGF0b21pY1JhbmdlcykubWFwKGYgPT4gZih2aWV3KSksIG5ld1NlbCk7XG4gICAgICAgIH1cbiAgICAgICAgdmlldy5kaXNwYXRjaCh7IHNlbGVjdGlvbjogbmV3U2VsLCBzY3JvbGxJbnRvVmlldywgdXNlckV2ZW50IH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBhcHBseURPTUNoYW5nZUlubmVyKHZpZXcsIGNoYW5nZSwgbmV3U2VsLCBsYXN0S2V5ID0gLTEpIHtcbiAgICBpZiAoYnJvd3Nlci5pb3MgJiYgdmlldy5pbnB1dFN0YXRlLmZsdXNoSU9TS2V5KGNoYW5nZSkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGxldCBzZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgIC8vIEFuZHJvaWQgYnJvd3NlcnMgZG9uJ3QgZmlyZSByZWFzb25hYmxlIGtleSBldmVudHMgZm9yIGVudGVyLFxuICAgIC8vIGJhY2tzcGFjZSwgb3IgZGVsZXRlLiBTbyB0aGlzIGRldGVjdHMgY2hhbmdlcyB0aGF0IGxvb2sgbGlrZVxuICAgIC8vIHRoZXkncmUgY2F1c2VkIGJ5IHRob3NlIGtleXMsIGFuZCByZWludGVycHJldHMgdGhlbSBhcyBrZXlcbiAgICAvLyBldmVudHMuIChTb21lIG9mIHRoZXNlIGtleXMgYXJlIGFsc28gaGFuZGxlZCBieSBiZWZvcmVpbnB1dFxuICAgIC8vIGV2ZW50cyBhbmQgdGhlIHBlbmRpbmdBbmRyb2lkS2V5IG1lY2hhbmlzbSwgYnV0IHRoYXQncyBub3RcbiAgICAvLyByZWxpYWJsZSBpbiBhbGwgc2l0dWF0aW9ucy4pXG4gICAgaWYgKGJyb3dzZXIuYW5kcm9pZCAmJlxuICAgICAgICAoKGNoYW5nZS50byA9PSBzZWwudG8gJiZcbiAgICAgICAgICAgIC8vIEdCb2FyZCB3aWxsIHNvbWV0aW1lcyByZW1vdmUgYSBzcGFjZSBpdCBqdXN0IGluc2VydGVkXG4gICAgICAgICAgICAvLyBhZnRlciBhIGNvbXBsZXRpb24gd2hlbiB5b3UgcHJlc3MgZW50ZXJcbiAgICAgICAgICAgIChjaGFuZ2UuZnJvbSA9PSBzZWwuZnJvbSB8fCBjaGFuZ2UuZnJvbSA9PSBzZWwuZnJvbSAtIDEgJiYgdmlldy5zdGF0ZS5zbGljZURvYyhjaGFuZ2UuZnJvbSwgc2VsLmZyb20pID09IFwiIFwiKSAmJlxuICAgICAgICAgICAgY2hhbmdlLmluc2VydC5sZW5ndGggPT0gMSAmJiBjaGFuZ2UuaW5zZXJ0LmxpbmVzID09IDIgJiZcbiAgICAgICAgICAgIGRpc3BhdGNoS2V5KHZpZXcuY29udGVudERPTSwgXCJFbnRlclwiLCAxMykpIHx8XG4gICAgICAgICAgICAoKGNoYW5nZS5mcm9tID09IHNlbC5mcm9tIC0gMSAmJiBjaGFuZ2UudG8gPT0gc2VsLnRvICYmIGNoYW5nZS5pbnNlcnQubGVuZ3RoID09IDAgfHxcbiAgICAgICAgICAgICAgICBsYXN0S2V5ID09IDggJiYgY2hhbmdlLmluc2VydC5sZW5ndGggPCBjaGFuZ2UudG8gLSBjaGFuZ2UuZnJvbSAmJiBjaGFuZ2UudG8gPiBzZWwuaGVhZCkgJiZcbiAgICAgICAgICAgICAgICBkaXNwYXRjaEtleSh2aWV3LmNvbnRlbnRET00sIFwiQmFja3NwYWNlXCIsIDgpKSB8fFxuICAgICAgICAgICAgKGNoYW5nZS5mcm9tID09IHNlbC5mcm9tICYmIGNoYW5nZS50byA9PSBzZWwudG8gKyAxICYmIGNoYW5nZS5pbnNlcnQubGVuZ3RoID09IDAgJiZcbiAgICAgICAgICAgICAgICBkaXNwYXRjaEtleSh2aWV3LmNvbnRlbnRET00sIFwiRGVsZXRlXCIsIDQ2KSkpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBsZXQgdGV4dCA9IGNoYW5nZS5pbnNlcnQudG9TdHJpbmcoKTtcbiAgICBpZiAodmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA+PSAwKVxuICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nKys7XG4gICAgbGV0IGRlZmF1bHRUcjtcbiAgICBsZXQgZGVmYXVsdEluc2VydCA9ICgpID0+IGRlZmF1bHRUciB8fCAoZGVmYXVsdFRyID0gYXBwbHlEZWZhdWx0SW5zZXJ0KHZpZXcsIGNoYW5nZSwgbmV3U2VsKSk7XG4gICAgaWYgKCF2aWV3LnN0YXRlLmZhY2V0KGlucHV0SGFuZGxlcikuc29tZShoID0+IGgodmlldywgY2hhbmdlLmZyb20sIGNoYW5nZS50bywgdGV4dCwgZGVmYXVsdEluc2VydCkpKVxuICAgICAgICB2aWV3LmRpc3BhdGNoKGRlZmF1bHRJbnNlcnQoKSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBhcHBseURlZmF1bHRJbnNlcnQodmlldywgY2hhbmdlLCBuZXdTZWwpIHtcbiAgICBsZXQgdHIsIHN0YXJ0U3RhdGUgPSB2aWV3LnN0YXRlLCBzZWwgPSBzdGFydFN0YXRlLnNlbGVjdGlvbi5tYWluLCBpbkF0b21pYyA9IC0xO1xuICAgIGlmIChjaGFuZ2UuZnJvbSA9PSBjaGFuZ2UudG8gJiYgY2hhbmdlLmZyb20gPCBzZWwuZnJvbSB8fCBjaGFuZ2UuZnJvbSA+IHNlbC50bykge1xuICAgICAgICBsZXQgc2lkZSA9IGNoYW5nZS5mcm9tIDwgc2VsLmZyb20gPyAtMSA6IDEsIHBvcyA9IHNpZGUgPCAwID8gc2VsLmZyb20gOiBzZWwudG87XG4gICAgICAgIGxldCBtb3ZlZCA9IHNraXBBdG9taWNSYW5nZXMoc3RhcnRTdGF0ZS5mYWNldChhdG9taWNSYW5nZXMpLm1hcChmID0+IGYodmlldykpLCBwb3MsIHNpZGUpO1xuICAgICAgICBpZiAoY2hhbmdlLmZyb20gPT0gbW92ZWQpXG4gICAgICAgICAgICBpbkF0b21pYyA9IG1vdmVkO1xuICAgIH1cbiAgICBpZiAoaW5BdG9taWMgPiAtMSkge1xuICAgICAgICB0ciA9IHtcbiAgICAgICAgICAgIGNoYW5nZXM6IGNoYW5nZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbjogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihjaGFuZ2UuZnJvbSArIGNoYW5nZS5pbnNlcnQubGVuZ3RoLCAtMSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY2hhbmdlLmZyb20gPj0gc2VsLmZyb20gJiYgY2hhbmdlLnRvIDw9IHNlbC50byAmJiBjaGFuZ2UudG8gLSBjaGFuZ2UuZnJvbSA+PSAoc2VsLnRvIC0gc2VsLmZyb20pIC8gMyAmJlxuICAgICAgICAoIW5ld1NlbCB8fCBuZXdTZWwubWFpbi5lbXB0eSAmJiBuZXdTZWwubWFpbi5mcm9tID09IGNoYW5nZS5mcm9tICsgY2hhbmdlLmluc2VydC5sZW5ndGgpICYmXG4gICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPCAwKSB7XG4gICAgICAgIGxldCBiZWZvcmUgPSBzZWwuZnJvbSA8IGNoYW5nZS5mcm9tID8gc3RhcnRTdGF0ZS5zbGljZURvYyhzZWwuZnJvbSwgY2hhbmdlLmZyb20pIDogXCJcIjtcbiAgICAgICAgbGV0IGFmdGVyID0gc2VsLnRvID4gY2hhbmdlLnRvID8gc3RhcnRTdGF0ZS5zbGljZURvYyhjaGFuZ2UudG8sIHNlbC50bykgOiBcIlwiO1xuICAgICAgICB0ciA9IHN0YXJ0U3RhdGUucmVwbGFjZVNlbGVjdGlvbih2aWV3LnN0YXRlLnRvVGV4dChiZWZvcmUgKyBjaGFuZ2UuaW5zZXJ0LnNsaWNlU3RyaW5nKDAsIHVuZGVmaW5lZCwgdmlldy5zdGF0ZS5saW5lQnJlYWspICsgYWZ0ZXIpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBjaGFuZ2VzID0gc3RhcnRTdGF0ZS5jaGFuZ2VzKGNoYW5nZSk7XG4gICAgICAgIGxldCBtYWluU2VsID0gbmV3U2VsICYmIG5ld1NlbC5tYWluLnRvIDw9IGNoYW5nZXMubmV3TGVuZ3RoID8gbmV3U2VsLm1haW4gOiB1bmRlZmluZWQ7XG4gICAgICAgIC8vIFRyeSB0byBhcHBseSBhIGNvbXBvc2l0aW9uIGNoYW5nZSB0byBhbGwgY3Vyc29yc1xuICAgICAgICBpZiAoc3RhcnRTdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLmxlbmd0aCA+IDEgJiYgKHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPj0gMCB8fCB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25QZW5kaW5nQ2hhbmdlKSAmJlxuICAgICAgICAgICAgY2hhbmdlLnRvIDw9IHNlbC50byArIDEwICYmIGNoYW5nZS50byA+PSBzZWwudG8gLSAxMCkge1xuICAgICAgICAgICAgbGV0IHJlcGxhY2VkID0gdmlldy5zdGF0ZS5zbGljZURvYyhjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKTtcbiAgICAgICAgICAgIGxldCBjb21wb3NpdGlvblJhbmdlLCBjb21wb3NpdGlvbiA9IG5ld1NlbCAmJiBmaW5kQ29tcG9zaXRpb25Ob2RlKHZpZXcsIG5ld1NlbC5tYWluLmhlYWQpO1xuICAgICAgICAgICAgaWYgKGNvbXBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRMZW4gPSBjaGFuZ2UuaW5zZXJ0Lmxlbmd0aCAtIChjaGFuZ2UudG8gLSBjaGFuZ2UuZnJvbSk7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRpb25SYW5nZSA9IHsgZnJvbTogY29tcG9zaXRpb24uZnJvbSwgdG86IGNvbXBvc2l0aW9uLnRvIC0gZExlbiB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRpb25SYW5nZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdChzZWwuaGVhZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gc2VsLnRvIC0gY2hhbmdlLnRvO1xuICAgICAgICAgICAgdHIgPSBzdGFydFN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZS5mcm9tID09IHNlbC5mcm9tICYmIHJhbmdlLnRvID09IHNlbC50bylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlcywgcmFuZ2U6IG1haW5TZWwgfHwgcmFuZ2UubWFwKGNoYW5nZXMpIH07XG4gICAgICAgICAgICAgICAgbGV0IHRvID0gcmFuZ2UudG8gLSBvZmZzZXQsIGZyb20gPSB0byAtIHJlcGxhY2VkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAodmlldy5zdGF0ZS5zbGljZURvYyhmcm9tLCB0bykgIT0gcmVwbGFjZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgLy8gVW5mb3J0dW5hdGVseSwgdGhlcmUncyBubyB3YXkgdG8gbWFrZSBtdWx0aXBsZVxuICAgICAgICAgICAgICAgICAgICAvLyBjaGFuZ2VzIGluIHRoZSBzYW1lIG5vZGUgd29yayB3aXRob3V0IGFib3J0aW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbXBvc2l0aW9uLCBzbyBjdXJzb3JzIGluIHRoZSBjb21wb3NpdGlvbiByYW5nZSBhcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlZC5cbiAgICAgICAgICAgICAgICAgICAgdG8gPj0gY29tcG9zaXRpb25SYW5nZS5mcm9tICYmIGZyb20gPD0gY29tcG9zaXRpb25SYW5nZS50bylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2UgfTtcbiAgICAgICAgICAgICAgICBsZXQgcmFuZ2VDaGFuZ2VzID0gc3RhcnRTdGF0ZS5jaGFuZ2VzKHsgZnJvbSwgdG8sIGluc2VydDogY2hhbmdlLmluc2VydCB9KSwgc2VsT2ZmID0gcmFuZ2UudG8gLSBzZWwudG87XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlczogcmFuZ2VDaGFuZ2VzLFxuICAgICAgICAgICAgICAgICAgICByYW5nZTogIW1haW5TZWwgPyByYW5nZS5tYXAocmFuZ2VDaGFuZ2VzKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoTWF0aC5tYXgoMCwgbWFpblNlbC5hbmNob3IgKyBzZWxPZmYpLCBNYXRoLm1heCgwLCBtYWluU2VsLmhlYWQgKyBzZWxPZmYpKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyID0ge1xuICAgICAgICAgICAgICAgIGNoYW5nZXMsXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBtYWluU2VsICYmIHN0YXJ0U3RhdGUuc2VsZWN0aW9uLnJlcGxhY2VSYW5nZShtYWluU2VsKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgdXNlckV2ZW50ID0gXCJpbnB1dC50eXBlXCI7XG4gICAgaWYgKHZpZXcuY29tcG9zaW5nIHx8XG4gICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvblBlbmRpbmdDaGFuZ2UgJiYgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uRW5kZWRBdCA+IERhdGUubm93KCkgLSA1MCkge1xuICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25QZW5kaW5nQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgIHVzZXJFdmVudCArPSBcIi5jb21wb3NlXCI7XG4gICAgICAgIGlmICh2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSkge1xuICAgICAgICAgICAgdXNlckV2ZW50ICs9IFwiLnN0YXJ0XCI7XG4gICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdGFydFN0YXRlLnVwZGF0ZSh0ciwgeyB1c2VyRXZlbnQsIHNjcm9sbEludG9WaWV3OiB0cnVlIH0pO1xufVxuZnVuY3Rpb24gZmluZERpZmYoYSwgYiwgcHJlZmVycmVkUG9zLCBwcmVmZXJyZWRTaWRlKSB7XG4gICAgbGV0IG1pbkxlbiA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCk7XG4gICAgbGV0IGZyb20gPSAwO1xuICAgIHdoaWxlIChmcm9tIDwgbWluTGVuICYmIGEuY2hhckNvZGVBdChmcm9tKSA9PSBiLmNoYXJDb2RlQXQoZnJvbSkpXG4gICAgICAgIGZyb20rKztcbiAgICBpZiAoZnJvbSA9PSBtaW5MZW4gJiYgYS5sZW5ndGggPT0gYi5sZW5ndGgpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCB0b0EgPSBhLmxlbmd0aCwgdG9CID0gYi5sZW5ndGg7XG4gICAgd2hpbGUgKHRvQSA+IDAgJiYgdG9CID4gMCAmJiBhLmNoYXJDb2RlQXQodG9BIC0gMSkgPT0gYi5jaGFyQ29kZUF0KHRvQiAtIDEpKSB7XG4gICAgICAgIHRvQS0tO1xuICAgICAgICB0b0ItLTtcbiAgICB9XG4gICAgaWYgKHByZWZlcnJlZFNpZGUgPT0gXCJlbmRcIikge1xuICAgICAgICBsZXQgYWRqdXN0ID0gTWF0aC5tYXgoMCwgZnJvbSAtIE1hdGgubWluKHRvQSwgdG9CKSk7XG4gICAgICAgIHByZWZlcnJlZFBvcyAtPSB0b0EgKyBhZGp1c3QgLSBmcm9tO1xuICAgIH1cbiAgICBpZiAodG9BIDwgZnJvbSAmJiBhLmxlbmd0aCA8IGIubGVuZ3RoKSB7XG4gICAgICAgIGxldCBtb3ZlID0gcHJlZmVycmVkUG9zIDw9IGZyb20gJiYgcHJlZmVycmVkUG9zID49IHRvQSA/IGZyb20gLSBwcmVmZXJyZWRQb3MgOiAwO1xuICAgICAgICBmcm9tIC09IG1vdmU7XG4gICAgICAgIHRvQiA9IGZyb20gKyAodG9CIC0gdG9BKTtcbiAgICAgICAgdG9BID0gZnJvbTtcbiAgICB9XG4gICAgZWxzZSBpZiAodG9CIDwgZnJvbSkge1xuICAgICAgICBsZXQgbW92ZSA9IHByZWZlcnJlZFBvcyA8PSBmcm9tICYmIHByZWZlcnJlZFBvcyA+PSB0b0IgPyBmcm9tIC0gcHJlZmVycmVkUG9zIDogMDtcbiAgICAgICAgZnJvbSAtPSBtb3ZlO1xuICAgICAgICB0b0EgPSBmcm9tICsgKHRvQSAtIHRvQik7XG4gICAgICAgIHRvQiA9IGZyb207XG4gICAgfVxuICAgIHJldHVybiB7IGZyb20sIHRvQSwgdG9CIH07XG59XG5mdW5jdGlvbiBzZWxlY3Rpb25Qb2ludHModmlldykge1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBpZiAodmlldy5yb290LmFjdGl2ZUVsZW1lbnQgIT0gdmlldy5jb250ZW50RE9NKVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIGxldCB7IGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCwgZm9jdXNOb2RlLCBmb2N1c09mZnNldCB9ID0gdmlldy5vYnNlcnZlci5zZWxlY3Rpb25SYW5nZTtcbiAgICBpZiAoYW5jaG9yTm9kZSkge1xuICAgICAgICByZXN1bHQucHVzaChuZXcgRE9NUG9pbnQoYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0KSk7XG4gICAgICAgIGlmIChmb2N1c05vZGUgIT0gYW5jaG9yTm9kZSB8fCBmb2N1c09mZnNldCAhPSBhbmNob3JPZmZzZXQpXG4gICAgICAgICAgICByZXN1bHQucHVzaChuZXcgRE9NUG9pbnQoZm9jdXNOb2RlLCBmb2N1c09mZnNldCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gc2VsZWN0aW9uRnJvbVBvaW50cyhwb2ludHMsIGJhc2UpIHtcbiAgICBpZiAocG9pbnRzLmxlbmd0aCA9PSAwKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgYW5jaG9yID0gcG9pbnRzWzBdLnBvcywgaGVhZCA9IHBvaW50cy5sZW5ndGggPT0gMiA/IHBvaW50c1sxXS5wb3MgOiBhbmNob3I7XG4gICAgcmV0dXJuIGFuY2hvciA+IC0xICYmIGhlYWQgPiAtMSA/IEVkaXRvclNlbGVjdGlvbi5zaW5nbGUoYW5jaG9yICsgYmFzZSwgaGVhZCArIGJhc2UpIDogbnVsbDtcbn1cbmZ1bmN0aW9uIHNhbWVTZWxQb3Moc2VsZWN0aW9uLCByYW5nZSkge1xuICAgIHJldHVybiByYW5nZS5oZWFkID09IHNlbGVjdGlvbi5tYWluLmhlYWQgJiYgcmFuZ2UuYW5jaG9yID09IHNlbGVjdGlvbi5tYWluLmFuY2hvcjtcbn1cblxuY2xhc3MgSW5wdXRTdGF0ZSB7XG4gICAgc2V0U2VsZWN0aW9uT3JpZ2luKG9yaWdpbikge1xuICAgICAgICB0aGlzLmxhc3RTZWxlY3Rpb25PcmlnaW4gPSBvcmlnaW47XG4gICAgICAgIHRoaXMubGFzdFNlbGVjdGlvblRpbWUgPSBEYXRlLm5vdygpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMubGFzdEtleUNvZGUgPSAwO1xuICAgICAgICB0aGlzLmxhc3RLZXlUaW1lID0gMDtcbiAgICAgICAgdGhpcy5sYXN0VG91Y2hUaW1lID0gMDtcbiAgICAgICAgdGhpcy5sYXN0Rm9jdXNUaW1lID0gMDtcbiAgICAgICAgdGhpcy5sYXN0U2Nyb2xsVG9wID0gMDtcbiAgICAgICAgdGhpcy5sYXN0U2Nyb2xsTGVmdCA9IDA7XG4gICAgICAgIC8vIE9uIGlPUywgc29tZSBrZXlzIG5lZWQgdG8gaGF2ZSB0aGVpciBkZWZhdWx0IGJlaGF2aW9yIGhhcHBlblxuICAgICAgICAvLyAoYWZ0ZXIgd2hpY2ggd2UgcmV0cm9hY3RpdmVseSBoYW5kbGUgdGhlbSBhbmQgcmVzZXQgdGhlIERPTSkgdG9cbiAgICAgICAgLy8gYXZvaWQgbWVzc2luZyB1cCB0aGUgdmlydHVhbCBrZXlib2FyZCBzdGF0ZS5cbiAgICAgICAgdGhpcy5wZW5kaW5nSU9TS2V5ID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgV2hlbiBlbmFibGVkICg+LTEpLCB0YWIgcHJlc3NlcyBhcmUgbm90IGdpdmVuIHRvIGtleSBoYW5kbGVycyxcbiAgICAgICAgbGVhdmluZyB0aGUgYnJvd3NlcidzIGRlZmF1bHQgYmVoYXZpb3IuIElmID4wLCB0aGUgbW9kZSBleHBpcmVzXG4gICAgICAgIGF0IHRoYXQgdGltZXN0YW1wLCBhbmQgYW55IG90aGVyIGtleXByZXNzIGNsZWFycyBpdC5cbiAgICAgICAgRXNjIGVuYWJsZXMgdGVtcG9yYXJ5IHRhYiBmb2N1cyBtb2RlIGZvciB0d28gc2Vjb25kcyB3aGVuIG5vdFxuICAgICAgICBvdGhlcndpc2UgaGFuZGxlZC5cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YWJGb2N1c01vZGUgPSAtMTtcbiAgICAgICAgdGhpcy5sYXN0U2VsZWN0aW9uT3JpZ2luID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0U2VsZWN0aW9uVGltZSA9IDA7XG4gICAgICAgIHRoaXMubGFzdENvbnRleHRNZW51ID0gMDtcbiAgICAgICAgdGhpcy5zY3JvbGxIYW5kbGVycyA9IFtdO1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgLy8gLTEgbWVhbnMgbm90IGluIGEgY29tcG9zaXRpb24uIE90aGVyd2lzZSwgdGhpcyBjb3VudHMgdGhlIG51bWJlclxuICAgICAgICAvLyBvZiBjaGFuZ2VzIG1hZGUgZHVyaW5nIHRoZSBjb21wb3NpdGlvbi4gVGhlIGNvdW50IGlzIHVzZWQgdG9cbiAgICAgICAgLy8gYXZvaWQgdHJlYXRpbmcgdGhlIHN0YXJ0IHN0YXRlIG9mIHRoZSBjb21wb3NpdGlvbiwgYmVmb3JlIGFueVxuICAgICAgICAvLyBjaGFuZ2VzIGhhdmUgYmVlbiBtYWRlLCBhcyBwYXJ0IG9mIHRoZSBjb21wb3NpdGlvbi5cbiAgICAgICAgdGhpcy5jb21wb3NpbmcgPSAtMTtcbiAgICAgICAgLy8gVHJhY2tzIHdoZXRoZXIgdGhlIG5leHQgY2hhbmdlIHNob3VsZCBiZSBtYXJrZWQgYXMgc3RhcnRpbmcgdGhlXG4gICAgICAgIC8vIGNvbXBvc2l0aW9uIChudWxsIG1lYW5zIG5vIGNvbXBvc2l0aW9uLCB0cnVlIG1lYW5zIG5leHQgaXMgdGhlXG4gICAgICAgIC8vIGZpcnN0LCBmYWxzZSBtZWFucyBmaXJzdCBoYXMgYWxyZWFkeSBiZWVuIG1hcmtlZCBmb3IgdGhpc1xuICAgICAgICAvLyBjb21wb3NpdGlvbilcbiAgICAgICAgdGhpcy5jb21wb3NpdGlvbkZpcnN0Q2hhbmdlID0gbnVsbDtcbiAgICAgICAgLy8gRW5kIHRpbWUgb2YgdGhlIHByZXZpb3VzIGNvbXBvc2l0aW9uXG4gICAgICAgIHRoaXMuY29tcG9zaXRpb25FbmRlZEF0ID0gMDtcbiAgICAgICAgLy8gVXNlZCBpbiBhIGtsdWRnZSB0byBkZXRlY3Qgd2hlbiBhbiBFbnRlciBrZXlwcmVzcyBzaG91bGQgYmVcbiAgICAgICAgLy8gY29uc2lkZXJlZCBwYXJ0IG9mIHRoZSBjb21wb3NpdGlvbiBvbiBTYWZhcmksIHdoaWNoIGZpcmVzIGV2ZW50c1xuICAgICAgICAvLyBpbiB0aGUgd3Jvbmcgb3JkZXJcbiAgICAgICAgdGhpcy5jb21wb3NpdGlvblBlbmRpbmdLZXkgPSBmYWxzZTtcbiAgICAgICAgLy8gVXNlZCB0byBjYXRlZ29yaXplIGNoYW5nZXMgYXMgcGFydCBvZiBhIGNvbXBvc2l0aW9uLCBldmVuIHdoZW5cbiAgICAgICAgLy8gdGhlIG11dGF0aW9uIGV2ZW50cyBmaXJlIHNob3J0bHkgYWZ0ZXIgdGhlIGNvbXBvc2l0aW9uZW5kIGV2ZW50XG4gICAgICAgIHRoaXMuY29tcG9zaXRpb25QZW5kaW5nQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgIC8vIFNldCBieSBiZWZvcmVpbnB1dCwgdXNlZCBpbiBET00gY2hhbmdlIHJlYWRlclxuICAgICAgICB0aGlzLmluc2VydGluZ1RleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLmluc2VydGluZ1RleHRBdCA9IDA7XG4gICAgICAgIHRoaXMubW91c2VTZWxlY3Rpb24gPSBudWxsO1xuICAgICAgICAvLyBXaGVuIGEgZHJhZyBmcm9tIHRoZSBlZGl0b3IgaXMgYWN0aXZlLCB0aGlzIHBvaW50cyBhdCB0aGUgcmFuZ2VcbiAgICAgICAgLy8gYmVpbmcgZHJhZ2dlZC5cbiAgICAgICAgdGhpcy5kcmFnZ2VkQ29udGVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnQgPSB0aGlzLmhhbmRsZUV2ZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubm90aWZpZWRGb2N1c2VkID0gdmlldy5oYXNGb2N1cztcbiAgICAgICAgLy8gT24gU2FmYXJpIGFkZGluZyBhbiBpbnB1dCBldmVudCBoYW5kbGVyIHNvbWVob3cgcHJldmVudHMgYW5cbiAgICAgICAgLy8gaXNzdWUgd2hlcmUgdGhlIGNvbXBvc2l0aW9uIHZhbmlzaGVzIHdoZW4geW91IHByZXNzIGVudGVyLlxuICAgICAgICBpZiAoYnJvd3Nlci5zYWZhcmkpXG4gICAgICAgICAgICB2aWV3LmNvbnRlbnRET00uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IG51bGwpO1xuICAgICAgICBpZiAoYnJvd3Nlci5nZWNrbylcbiAgICAgICAgICAgIGZpcmVmb3hDb3B5Q3V0SGFjayh2aWV3LmNvbnRlbnRET00ub3duZXJEb2N1bWVudCk7XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICghZXZlbnRCZWxvbmdzVG9FZGl0b3IodGhpcy52aWV3LCBldmVudCkgfHwgdGhpcy5pZ25vcmVEdXJpbmdDb21wb3NpdGlvbihldmVudCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChldmVudC50eXBlID09IFwia2V5ZG93blwiICYmIHRoaXMua2V5ZG93bihldmVudCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLnZpZXcudXBkYXRlU3RhdGUgIT0gMCAvKiBVcGRhdGVTdGF0ZS5JZGxlICovKVxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB0aGlzLnJ1bkhhbmRsZXJzKGV2ZW50LnR5cGUsIGV2ZW50KSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMucnVuSGFuZGxlcnMoZXZlbnQudHlwZSwgZXZlbnQpO1xuICAgIH1cbiAgICBydW5IYW5kbGVycyh0eXBlLCBldmVudCkge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzW3R5cGVdO1xuICAgICAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IG9ic2VydmVyIG9mIGhhbmRsZXJzLm9ic2VydmVycylcbiAgICAgICAgICAgICAgICBvYnNlcnZlcih0aGlzLnZpZXcsIGV2ZW50KTtcbiAgICAgICAgICAgIGZvciAobGV0IGhhbmRsZXIgb2YgaGFuZGxlcnMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIodGhpcy52aWV3LCBldmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVuc3VyZUhhbmRsZXJzKHBsdWdpbnMpIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gY29tcHV0ZUhhbmRsZXJzKHBsdWdpbnMpLCBwcmV2ID0gdGhpcy5oYW5kbGVycywgZG9tID0gdGhpcy52aWV3LmNvbnRlbnRET007XG4gICAgICAgIGZvciAobGV0IHR5cGUgaW4gaGFuZGxlcnMpXG4gICAgICAgICAgICBpZiAodHlwZSAhPSBcInNjcm9sbFwiKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhc3NpdmUgPSAhaGFuZGxlcnNbdHlwZV0uaGFuZGxlcnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGxldCBleGlzdHMgPSBwcmV2W3R5cGVdO1xuICAgICAgICAgICAgICAgIGlmIChleGlzdHMgJiYgcGFzc2l2ZSAhPSAhZXhpc3RzLmhhbmRsZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBkb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCB0aGlzLmhhbmRsZUV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RzID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFleGlzdHMpXG4gICAgICAgICAgICAgICAgICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIHRoaXMuaGFuZGxlRXZlbnQsIHsgcGFzc2l2ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgdHlwZSBpbiBwcmV2KVxuICAgICAgICAgICAgaWYgKHR5cGUgIT0gXCJzY3JvbGxcIiAmJiAhaGFuZGxlcnNbdHlwZV0pXG4gICAgICAgICAgICAgICAgZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgdGhpcy5oYW5kbGVFdmVudCk7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBoYW5kbGVycztcbiAgICB9XG4gICAga2V5ZG93bihldmVudCkge1xuICAgICAgICAvLyBNdXN0IGFsd2F5cyBydW4sIGV2ZW4gaWYgYSBjdXN0b20gaGFuZGxlciBoYW5kbGVkIHRoZSBldmVudFxuICAgICAgICB0aGlzLmxhc3RLZXlDb2RlID0gZXZlbnQua2V5Q29kZTtcbiAgICAgICAgdGhpcy5sYXN0S2V5VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDkgJiYgdGhpcy50YWJGb2N1c01vZGUgPiAtMSAmJiAoIXRoaXMudGFiRm9jdXNNb2RlIHx8IERhdGUubm93KCkgPD0gdGhpcy50YWJGb2N1c01vZGUpKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmICh0aGlzLnRhYkZvY3VzTW9kZSA+IDAgJiYgZXZlbnQua2V5Q29kZSAhPSAyNyAmJiBtb2RpZmllckNvZGVzLmluZGV4T2YoZXZlbnQua2V5Q29kZSkgPCAwKVxuICAgICAgICAgICAgdGhpcy50YWJGb2N1c01vZGUgPSAtMTtcbiAgICAgICAgLy8gQ2hyb21lIGZvciBBbmRyb2lkIHVzdWFsbHkgZG9lc24ndCBmaXJlIHByb3BlciBrZXkgZXZlbnRzLCBidXRcbiAgICAgICAgLy8gb2NjYXNpb25hbGx5IGRvZXMsIHVzdWFsbHkgc3Vycm91bmRlZCBieSBhIGJ1bmNoIG9mIGNvbXBsaWNhdGVkXG4gICAgICAgIC8vIGNvbXBvc2l0aW9uIGNoYW5nZXMuIFdoZW4gYW4gZW50ZXIgb3IgYmFja3NwYWNlIGtleSBldmVudCBpc1xuICAgICAgICAvLyBzZWVuLCBob2xkIG9mZiBvbiBoYW5kbGluZyBET00gZXZlbnRzIGZvciBhIGJpdCwgYW5kIHRoZW5cbiAgICAgICAgLy8gZGlzcGF0Y2ggaXQuXG4gICAgICAgIGlmIChicm93c2VyLmFuZHJvaWQgJiYgYnJvd3Nlci5jaHJvbWUgJiYgIWV2ZW50LnN5bnRoZXRpYyAmJlxuICAgICAgICAgICAgKGV2ZW50LmtleUNvZGUgPT0gMTMgfHwgZXZlbnQua2V5Q29kZSA9PSA4KSkge1xuICAgICAgICAgICAgdGhpcy52aWV3Lm9ic2VydmVyLmRlbGF5QW5kcm9pZEtleShldmVudC5rZXksIGV2ZW50LmtleUNvZGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJldmVudGluZyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiBFbnRlciBvbiBpT1MgbWFrZXMgdGhlXG4gICAgICAgIC8vIHZpcnR1YWwga2V5Ym9hcmQgZ2V0IHN0dWNrIGluIHRoZSB3cm9uZyAobG93ZXJjYXNlKVxuICAgICAgICAvLyBzdGF0ZS4gU28gd2UgbGV0IGl0IGdvIHRocm91Z2gsIGFuZCB0aGVuLCBpblxuICAgICAgICAvLyBhcHBseURPTUNoYW5nZSwgbm90aWZ5IGtleSBoYW5kbGVycyBvZiBpdCBhbmQgcmVzZXQgdG9cbiAgICAgICAgLy8gdGhlIHN0YXRlIHRoZXkgcHJvZHVjZS5cbiAgICAgICAgbGV0IHBlbmRpbmc7XG4gICAgICAgIGlmIChicm93c2VyLmlvcyAmJiAhZXZlbnQuc3ludGhldGljICYmICFldmVudC5hbHRLZXkgJiYgIWV2ZW50Lm1ldGFLZXkgJiZcbiAgICAgICAgICAgICgocGVuZGluZyA9IFBlbmRpbmdLZXlzLmZpbmQoa2V5ID0+IGtleS5rZXlDb2RlID09IGV2ZW50LmtleUNvZGUpKSAmJiAhZXZlbnQuY3RybEtleSB8fFxuICAgICAgICAgICAgICAgIEVtYWNzeVBlbmRpbmdLZXlzLmluZGV4T2YoZXZlbnQua2V5KSA+IC0xICYmIGV2ZW50LmN0cmxLZXkgJiYgIWV2ZW50LnNoaWZ0S2V5KSkge1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nSU9TS2V5ID0gcGVuZGluZyB8fCBldmVudDtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5mbHVzaElPU0tleSgpLCAyNTApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgIT0gMjI5KVxuICAgICAgICAgICAgdGhpcy52aWV3Lm9ic2VydmVyLmZvcmNlRmx1c2goKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmbHVzaElPU0tleShjaGFuZ2UpIHtcbiAgICAgICAgbGV0IGtleSA9IHRoaXMucGVuZGluZ0lPU0tleTtcbiAgICAgICAgaWYgKCFrZXkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIFRoaXMgbG9va3MgbGlrZSBhbiBhdXRvY29ycmVjdGlvbiBiZWZvcmUgRW50ZXJcbiAgICAgICAgaWYgKGtleS5rZXkgPT0gXCJFbnRlclwiICYmIGNoYW5nZSAmJiBjaGFuZ2UuZnJvbSA8IGNoYW5nZS50byAmJiAvXlxcUyskLy50ZXN0KGNoYW5nZS5pbnNlcnQudG9TdHJpbmcoKSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHRoaXMucGVuZGluZ0lPU0tleSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIGRpc3BhdGNoS2V5KHRoaXMudmlldy5jb250ZW50RE9NLCBrZXkua2V5LCBrZXkua2V5Q29kZSwga2V5IGluc3RhbmNlb2YgS2V5Ym9hcmRFdmVudCA/IGtleSA6IHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGlnbm9yZUR1cmluZ0NvbXBvc2l0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmICghL15rZXkvLnRlc3QoZXZlbnQudHlwZSkgfHwgZXZlbnQuc3ludGhldGljKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5jb21wb3NpbmcgPiAwKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIC8vIFNlZSBodHRwczovL3d3dy5zdHVtLmRlLzIwMTYvMDYvMjQvaGFuZGxpbmctaW1lLWV2ZW50cy1pbi1qYXZhc2NyaXB0Ly5cbiAgICAgICAgLy8gT24gc29tZSBpbnB1dCBtZXRob2QgZWRpdG9ycyAoSU1FcyksIHRoZSBFbnRlciBrZXkgaXMgdXNlZCB0b1xuICAgICAgICAvLyBjb25maXJtIGNoYXJhY3RlciBzZWxlY3Rpb24uIE9uIFNhZmFyaSwgd2hlbiBFbnRlciBpcyBwcmVzc2VkLFxuICAgICAgICAvLyBjb21wb3NpdGlvbmVuZCBhbmQga2V5ZG93biBldmVudHMgYXJlIHNvbWV0aW1lcyBlbWl0dGVkIGluIHRoZVxuICAgICAgICAvLyB3cm9uZyBvcmRlci4gVGhlIGtleSBldmVudCBzaG91bGQgc3RpbGwgYmUgaWdub3JlZCwgZXZlbiB3aGVuXG4gICAgICAgIC8vIGl0IGhhcHBlbnMgYWZ0ZXIgdGhlIGNvbXBvc2l0aW9uZW5kIGV2ZW50LlxuICAgICAgICBpZiAoYnJvd3Nlci5zYWZhcmkgJiYgIWJyb3dzZXIuaW9zICYmIHRoaXMuY29tcG9zaXRpb25QZW5kaW5nS2V5ICYmIERhdGUubm93KCkgLSB0aGlzLmNvbXBvc2l0aW9uRW5kZWRBdCA8IDEwMCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb3NpdGlvblBlbmRpbmdLZXkgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc3RhcnRNb3VzZVNlbGVjdGlvbihtb3VzZVNlbGVjdGlvbikge1xuICAgICAgICBpZiAodGhpcy5tb3VzZVNlbGVjdGlvbilcbiAgICAgICAgICAgIHRoaXMubW91c2VTZWxlY3Rpb24uZGVzdHJveSgpO1xuICAgICAgICB0aGlzLm1vdXNlU2VsZWN0aW9uID0gbW91c2VTZWxlY3Rpb247XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgdGhpcy52aWV3Lm9ic2VydmVyLnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICBpZiAodGhpcy5tb3VzZVNlbGVjdGlvbilcbiAgICAgICAgICAgIHRoaXMubW91c2VTZWxlY3Rpb24udXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgIGlmICh0aGlzLmRyYWdnZWRDb250ZW50ICYmIHVwZGF0ZS5kb2NDaGFuZ2VkKVxuICAgICAgICAgICAgdGhpcy5kcmFnZ2VkQ29udGVudCA9IHRoaXMuZHJhZ2dlZENvbnRlbnQubWFwKHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgaWYgKHVwZGF0ZS50cmFuc2FjdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5sYXN0S2V5Q29kZSA9IHRoaXMubGFzdFNlbGVjdGlvblRpbWUgPSAwO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5tb3VzZVNlbGVjdGlvbilcbiAgICAgICAgICAgIHRoaXMubW91c2VTZWxlY3Rpb24uZGVzdHJveSgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGJpbmRIYW5kbGVyKHBsdWdpbiwgaGFuZGxlcikge1xuICAgIHJldHVybiAodmlldywgZXZlbnQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwocGx1Z2luLCBldmVudCwgdmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxvZ0V4Y2VwdGlvbih2aWV3LnN0YXRlLCBlKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjb21wdXRlSGFuZGxlcnMocGx1Z2lucykge1xuICAgIGxldCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZ1bmN0aW9uIHJlY29yZCh0eXBlKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRbdHlwZV0gfHwgKHJlc3VsdFt0eXBlXSA9IHsgb2JzZXJ2ZXJzOiBbXSwgaGFuZGxlcnM6IFtdIH0pO1xuICAgIH1cbiAgICBmb3IgKGxldCBwbHVnaW4gb2YgcGx1Z2lucykge1xuICAgICAgICBsZXQgc3BlYyA9IHBsdWdpbi5zcGVjLCBoYW5kbGVycyA9IHNwZWMgJiYgc3BlYy5wbHVnaW4uZG9tRXZlbnRIYW5kbGVycywgb2JzZXJ2ZXJzID0gc3BlYyAmJiBzcGVjLnBsdWdpbi5kb21FdmVudE9ic2VydmVycztcbiAgICAgICAgaWYgKGhhbmRsZXJzKVxuICAgICAgICAgICAgZm9yIChsZXQgdHlwZSBpbiBoYW5kbGVycykge1xuICAgICAgICAgICAgICAgIGxldCBmID0gaGFuZGxlcnNbdHlwZV07XG4gICAgICAgICAgICAgICAgaWYgKGYpXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZCh0eXBlKS5oYW5kbGVycy5wdXNoKGJpbmRIYW5kbGVyKHBsdWdpbi52YWx1ZSwgZikpO1xuICAgICAgICAgICAgfVxuICAgICAgICBpZiAob2JzZXJ2ZXJzKVxuICAgICAgICAgICAgZm9yIChsZXQgdHlwZSBpbiBvYnNlcnZlcnMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZiA9IG9ic2VydmVyc1t0eXBlXTtcbiAgICAgICAgICAgICAgICBpZiAoZilcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkKHR5cGUpLm9ic2VydmVycy5wdXNoKGJpbmRIYW5kbGVyKHBsdWdpbi52YWx1ZSwgZikpO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCB0eXBlIGluIGhhbmRsZXJzKVxuICAgICAgICByZWNvcmQodHlwZSkuaGFuZGxlcnMucHVzaChoYW5kbGVyc1t0eXBlXSk7XG4gICAgZm9yIChsZXQgdHlwZSBpbiBvYnNlcnZlcnMpXG4gICAgICAgIHJlY29yZCh0eXBlKS5vYnNlcnZlcnMucHVzaChvYnNlcnZlcnNbdHlwZV0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5jb25zdCBQZW5kaW5nS2V5cyA9IFtcbiAgICB7IGtleTogXCJCYWNrc3BhY2VcIiwga2V5Q29kZTogOCwgaW5wdXRUeXBlOiBcImRlbGV0ZUNvbnRlbnRCYWNrd2FyZFwiIH0sXG4gICAgeyBrZXk6IFwiRW50ZXJcIiwga2V5Q29kZTogMTMsIGlucHV0VHlwZTogXCJpbnNlcnRQYXJhZ3JhcGhcIiB9LFxuICAgIHsga2V5OiBcIkVudGVyXCIsIGtleUNvZGU6IDEzLCBpbnB1dFR5cGU6IFwiaW5zZXJ0TGluZUJyZWFrXCIgfSxcbiAgICB7IGtleTogXCJEZWxldGVcIiwga2V5Q29kZTogNDYsIGlucHV0VHlwZTogXCJkZWxldGVDb250ZW50Rm9yd2FyZFwiIH1cbl07XG5jb25zdCBFbWFjc3lQZW5kaW5nS2V5cyA9IFwiZHRoa29cIjtcbi8vIEtleSBjb2RlcyBmb3IgbW9kaWZpZXIga2V5c1xuY29uc3QgbW9kaWZpZXJDb2RlcyA9IFsxNiwgMTcsIDE4LCAyMCwgOTEsIDkyLCAyMjQsIDIyNV07XG5jb25zdCBkcmFnU2Nyb2xsTWFyZ2luID0gNjtcbmZ1bmN0aW9uIGRyYWdTY3JvbGxTcGVlZChkaXN0KSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIGRpc3QpICogMC43ICsgODtcbn1cbmZ1bmN0aW9uIGRpc3QoYSwgYikge1xuICAgIHJldHVybiBNYXRoLm1heChNYXRoLmFicyhhLmNsaWVudFggLSBiLmNsaWVudFgpLCBNYXRoLmFicyhhLmNsaWVudFkgLSBiLmNsaWVudFkpKTtcbn1cbmNsYXNzIE1vdXNlU2VsZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3LCBzdGFydEV2ZW50LCBzdHlsZSwgbXVzdFNlbGVjdCkge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLnN0YXJ0RXZlbnQgPSBzdGFydEV2ZW50O1xuICAgICAgICB0aGlzLnN0eWxlID0gc3R5bGU7XG4gICAgICAgIHRoaXMubXVzdFNlbGVjdCA9IG11c3RTZWxlY3Q7XG4gICAgICAgIHRoaXMuc2Nyb2xsU3BlZWQgPSB7IHg6IDAsIHk6IDAgfTtcbiAgICAgICAgdGhpcy5zY3JvbGxpbmcgPSAtMTtcbiAgICAgICAgdGhpcy5sYXN0RXZlbnQgPSBzdGFydEV2ZW50O1xuICAgICAgICB0aGlzLnNjcm9sbFBhcmVudHMgPSBzY3JvbGxhYmxlUGFyZW50cyh2aWV3LmNvbnRlbnRET00pO1xuICAgICAgICB0aGlzLmF0b21zID0gdmlldy5zdGF0ZS5mYWNldChhdG9taWNSYW5nZXMpLm1hcChmID0+IGYodmlldykpO1xuICAgICAgICBsZXQgZG9jID0gdmlldy5jb250ZW50RE9NLm93bmVyRG9jdW1lbnQ7XG4gICAgICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMubW92ZSA9IHRoaXMubW92ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMudXAgPSB0aGlzLnVwLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmV4dGVuZCA9IHN0YXJ0RXZlbnQuc2hpZnRLZXk7XG4gICAgICAgIHRoaXMubXVsdGlwbGUgPSB2aWV3LnN0YXRlLmZhY2V0KEVkaXRvclN0YXRlLmFsbG93TXVsdGlwbGVTZWxlY3Rpb25zKSAmJiBhZGRzU2VsZWN0aW9uUmFuZ2Uodmlldywgc3RhcnRFdmVudCk7XG4gICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBpc0luUHJpbWFyeVNlbGVjdGlvbih2aWV3LCBzdGFydEV2ZW50KSAmJiBnZXRDbGlja1R5cGUoc3RhcnRFdmVudCkgPT0gMSA/IG51bGwgOiBmYWxzZTtcbiAgICB9XG4gICAgc3RhcnQoZXZlbnQpIHtcbiAgICAgICAgLy8gV2hlbiBjbGlja2luZyBvdXRzaWRlIG9mIHRoZSBzZWxlY3Rpb24sIGltbWVkaWF0ZWx5IGFwcGx5IHRoZVxuICAgICAgICAvLyBlZmZlY3Qgb2Ygc3RhcnRpbmcgdGhlIHNlbGVjdGlvblxuICAgICAgICBpZiAodGhpcy5kcmFnZ2luZyA9PT0gZmFsc2UpXG4gICAgICAgICAgICB0aGlzLnNlbGVjdChldmVudCk7XG4gICAgfVxuICAgIG1vdmUoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbnMgPT0gMClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHRoaXMuZHJhZ2dpbmcgfHwgdGhpcy5kcmFnZ2luZyA9PSBudWxsICYmIGRpc3QodGhpcy5zdGFydEV2ZW50LCBldmVudCkgPCAxMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5sYXN0RXZlbnQgPSBldmVudCk7XG4gICAgICAgIGxldCBzeCA9IDAsIHN5ID0gMDtcbiAgICAgICAgbGV0IGxlZnQgPSAwLCB0b3AgPSAwLCByaWdodCA9IHRoaXMudmlldy53aW4uaW5uZXJXaWR0aCwgYm90dG9tID0gdGhpcy52aWV3Lndpbi5pbm5lckhlaWdodDtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsUGFyZW50cy54KVxuICAgICAgICAgICAgKHsgbGVmdCwgcmlnaHQgfSA9IHRoaXMuc2Nyb2xsUGFyZW50cy54LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsUGFyZW50cy55KVxuICAgICAgICAgICAgKHsgdG9wLCBib3R0b20gfSA9IHRoaXMuc2Nyb2xsUGFyZW50cy55LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgICAgICAgbGV0IG1hcmdpbnMgPSBnZXRTY3JvbGxNYXJnaW5zKHRoaXMudmlldyk7XG4gICAgICAgIGlmIChldmVudC5jbGllbnRYIC0gbWFyZ2lucy5sZWZ0IDw9IGxlZnQgKyBkcmFnU2Nyb2xsTWFyZ2luKVxuICAgICAgICAgICAgc3ggPSAtZHJhZ1Njcm9sbFNwZWVkKGxlZnQgLSBldmVudC5jbGllbnRYKTtcbiAgICAgICAgZWxzZSBpZiAoZXZlbnQuY2xpZW50WCArIG1hcmdpbnMucmlnaHQgPj0gcmlnaHQgLSBkcmFnU2Nyb2xsTWFyZ2luKVxuICAgICAgICAgICAgc3ggPSBkcmFnU2Nyb2xsU3BlZWQoZXZlbnQuY2xpZW50WCAtIHJpZ2h0KTtcbiAgICAgICAgaWYgKGV2ZW50LmNsaWVudFkgLSBtYXJnaW5zLnRvcCA8PSB0b3AgKyBkcmFnU2Nyb2xsTWFyZ2luKVxuICAgICAgICAgICAgc3kgPSAtZHJhZ1Njcm9sbFNwZWVkKHRvcCAtIGV2ZW50LmNsaWVudFkpO1xuICAgICAgICBlbHNlIGlmIChldmVudC5jbGllbnRZICsgbWFyZ2lucy5ib3R0b20gPj0gYm90dG9tIC0gZHJhZ1Njcm9sbE1hcmdpbilcbiAgICAgICAgICAgIHN5ID0gZHJhZ1Njcm9sbFNwZWVkKGV2ZW50LmNsaWVudFkgLSBib3R0b20pO1xuICAgICAgICB0aGlzLnNldFNjcm9sbFNwZWVkKHN4LCBzeSk7XG4gICAgfVxuICAgIHVwKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmRyYWdnaW5nID09IG51bGwpXG4gICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLmxhc3RFdmVudCk7XG4gICAgICAgIGlmICghdGhpcy5kcmFnZ2luZylcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnNldFNjcm9sbFNwZWVkKDAsIDApO1xuICAgICAgICBsZXQgZG9jID0gdGhpcy52aWV3LmNvbnRlbnRET00ub3duZXJEb2N1bWVudDtcbiAgICAgICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5tb3ZlKTtcbiAgICAgICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMudXApO1xuICAgICAgICB0aGlzLnZpZXcuaW5wdXRTdGF0ZS5tb3VzZVNlbGVjdGlvbiA9IHRoaXMudmlldy5pbnB1dFN0YXRlLmRyYWdnZWRDb250ZW50ID0gbnVsbDtcbiAgICB9XG4gICAgc2V0U2Nyb2xsU3BlZWQoc3gsIHN5KSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsU3BlZWQgPSB7IHg6IHN4LCB5OiBzeSB9O1xuICAgICAgICBpZiAoc3ggfHwgc3kpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbGluZyA8IDApXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxpbmcgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLnNjcm9sbCgpLCA1MCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5zY3JvbGxpbmcgPiAtMSkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNjcm9sbGluZyk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbGluZyA9IC0xO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNjcm9sbCgpIHtcbiAgICAgICAgbGV0IHsgeCwgeSB9ID0gdGhpcy5zY3JvbGxTcGVlZDtcbiAgICAgICAgaWYgKHggJiYgdGhpcy5zY3JvbGxQYXJlbnRzLngpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cy54LnNjcm9sbExlZnQgKz0geDtcbiAgICAgICAgICAgIHggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICh5ICYmIHRoaXMuc2Nyb2xsUGFyZW50cy55KSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFBhcmVudHMueS5zY3JvbGxUb3AgKz0geTtcbiAgICAgICAgICAgIHkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICh4IHx8IHkpXG4gICAgICAgICAgICB0aGlzLnZpZXcud2luLnNjcm9sbEJ5KHgsIHkpO1xuICAgICAgICBpZiAodGhpcy5kcmFnZ2luZyA9PT0gZmFsc2UpXG4gICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLmxhc3RFdmVudCk7XG4gICAgfVxuICAgIHNlbGVjdChldmVudCkge1xuICAgICAgICBsZXQgeyB2aWV3IH0gPSB0aGlzLCBzZWxlY3Rpb24gPSBza2lwQXRvbXNGb3JTZWxlY3Rpb24odGhpcy5hdG9tcywgdGhpcy5zdHlsZS5nZXQoZXZlbnQsIHRoaXMuZXh0ZW5kLCB0aGlzLm11bHRpcGxlKSk7XG4gICAgICAgIGlmICh0aGlzLm11c3RTZWxlY3QgfHwgIXNlbGVjdGlvbi5lcSh2aWV3LnN0YXRlLnNlbGVjdGlvbiwgdGhpcy5kcmFnZ2luZyA9PT0gZmFsc2UpKVxuICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgdXNlckV2ZW50OiBcInNlbGVjdC5wb2ludGVyXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLm11c3RTZWxlY3QgPSBmYWxzZTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBpZiAodXBkYXRlLnRyYW5zYWN0aW9ucy5zb21lKHRyID0+IHRyLmlzVXNlckV2ZW50KFwiaW5wdXQudHlwZVwiKSkpXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgZWxzZSBpZiAodGhpcy5zdHlsZS51cGRhdGUodXBkYXRlKSlcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zZWxlY3QodGhpcy5sYXN0RXZlbnQpLCAyMCk7XG4gICAgfVxufVxuZnVuY3Rpb24gYWRkc1NlbGVjdGlvblJhbmdlKHZpZXcsIGV2ZW50KSB7XG4gICAgbGV0IGZhY2V0ID0gdmlldy5zdGF0ZS5mYWNldChjbGlja0FkZHNTZWxlY3Rpb25SYW5nZSk7XG4gICAgcmV0dXJuIGZhY2V0Lmxlbmd0aCA/IGZhY2V0WzBdKGV2ZW50KSA6IGJyb3dzZXIubWFjID8gZXZlbnQubWV0YUtleSA6IGV2ZW50LmN0cmxLZXk7XG59XG5mdW5jdGlvbiBkcmFnTW92ZXNTZWxlY3Rpb24odmlldywgZXZlbnQpIHtcbiAgICBsZXQgZmFjZXQgPSB2aWV3LnN0YXRlLmZhY2V0KGRyYWdNb3Zlc1NlbGVjdGlvbiQxKTtcbiAgICByZXR1cm4gZmFjZXQubGVuZ3RoID8gZmFjZXRbMF0oZXZlbnQpIDogYnJvd3Nlci5tYWMgPyAhZXZlbnQuYWx0S2V5IDogIWV2ZW50LmN0cmxLZXk7XG59XG5mdW5jdGlvbiBpc0luUHJpbWFyeVNlbGVjdGlvbih2aWV3LCBldmVudCkge1xuICAgIGxldCB7IG1haW4gfSA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uO1xuICAgIGlmIChtYWluLmVtcHR5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gT24gYm91bmRhcnkgY2xpY2tzLCBjaGVjayB3aGV0aGVyIHRoZSBjb29yZGluYXRlcyBhcmUgaW5zaWRlIHRoZVxuICAgIC8vIHNlbGVjdGlvbidzIGNsaWVudCByZWN0YW5nbGVzXG4gICAgbGV0IHNlbCA9IGdldFNlbGVjdGlvbih2aWV3LnJvb3QpO1xuICAgIGlmICghc2VsIHx8IHNlbC5yYW5nZUNvdW50ID09IDApXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGxldCByZWN0cyA9IHNlbC5nZXRSYW5nZUF0KDApLmdldENsaWVudFJlY3RzKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgcmVjdCA9IHJlY3RzW2ldO1xuICAgICAgICBpZiAocmVjdC5sZWZ0IDw9IGV2ZW50LmNsaWVudFggJiYgcmVjdC5yaWdodCA+PSBldmVudC5jbGllbnRYICYmXG4gICAgICAgICAgICByZWN0LnRvcCA8PSBldmVudC5jbGllbnRZICYmIHJlY3QuYm90dG9tID49IGV2ZW50LmNsaWVudFkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZXZlbnRCZWxvbmdzVG9FZGl0b3IodmlldywgZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LmJ1YmJsZXMpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgbm9kZSA9IGV2ZW50LnRhcmdldCwgdGlsZTsgbm9kZSAhPSB2aWV3LmNvbnRlbnRET007IG5vZGUgPSBub2RlLnBhcmVudE5vZGUpXG4gICAgICAgIGlmICghbm9kZSB8fCBub2RlLm5vZGVUeXBlID09IDExIHx8XG4gICAgICAgICAgICAoKHRpbGUgPSBUaWxlLmdldChub2RlKSkgJiYgdGlsZS5pc1dpZGdldCgpICYmICF0aWxlLmlzSGlkZGVuICYmIHRpbGUud2lkZ2V0Lmlnbm9yZUV2ZW50KGV2ZW50KSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG5jb25zdCBoYW5kbGVycyA9IC8qQF9fUFVSRV9fKi9PYmplY3QuY3JlYXRlKG51bGwpO1xuY29uc3Qgb2JzZXJ2ZXJzID0gLypAX19QVVJFX18qL09iamVjdC5jcmVhdGUobnVsbCk7XG4vLyBUaGlzIGlzIHZlcnkgY3J1ZGUsIGJ1dCB1bmZvcnR1bmF0ZWx5IGJvdGggdGhlc2UgYnJvd3NlcnMgX3ByZXRlbmRfXG4vLyB0aGF0IHRoZXkgaGF2ZSBhIGNsaXBib2FyZCBBUElcdTIwMTRhbGwgdGhlIG9iamVjdHMgYW5kIG1ldGhvZHMgYXJlXG4vLyB0aGVyZSwgdGhleSBqdXN0IGRvbid0IHdvcmssIGFuZCB0aGV5IGFyZSBoYXJkIHRvIHRlc3QuXG5jb25zdCBicm9rZW5DbGlwYm9hcmRBUEkgPSAoYnJvd3Nlci5pZSAmJiBicm93c2VyLmllX3ZlcnNpb24gPCAxNSkgfHxcbiAgICAoYnJvd3Nlci5pb3MgJiYgYnJvd3Nlci53ZWJraXRfdmVyc2lvbiA8IDYwNCk7XG5mdW5jdGlvbiBjYXB0dXJlUGFzdGUodmlldykge1xuICAgIGxldCBwYXJlbnQgPSB2aWV3LmRvbS5wYXJlbnROb2RlO1xuICAgIGlmICghcGFyZW50KVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IHRhcmdldCA9IHBhcmVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIikpO1xuICAgIHRhcmdldC5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IC0xMDAwMHB4OyB0b3A6IDEwcHhcIjtcbiAgICB0YXJnZXQuZm9jdXMoKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdmlldy5mb2N1cygpO1xuICAgICAgICB0YXJnZXQucmVtb3ZlKCk7XG4gICAgICAgIGRvUGFzdGUodmlldywgdGFyZ2V0LnZhbHVlKTtcbiAgICB9LCA1MCk7XG59XG5mdW5jdGlvbiB0ZXh0RmlsdGVyKHN0YXRlLCBmYWNldCwgdGV4dCkge1xuICAgIGZvciAobGV0IGZpbHRlciBvZiBzdGF0ZS5mYWNldChmYWNldCkpXG4gICAgICAgIHRleHQgPSBmaWx0ZXIodGV4dCwgc3RhdGUpO1xuICAgIHJldHVybiB0ZXh0O1xufVxuZnVuY3Rpb24gZG9QYXN0ZSh2aWV3LCBpbnB1dCkge1xuICAgIGlucHV0ID0gdGV4dEZpbHRlcih2aWV3LnN0YXRlLCBjbGlwYm9hcmRJbnB1dEZpbHRlciwgaW5wdXQpO1xuICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3LCBjaGFuZ2VzLCBpID0gMSwgdGV4dCA9IHN0YXRlLnRvVGV4dChpbnB1dCk7XG4gICAgbGV0IGJ5TGluZSA9IHRleHQubGluZXMgPT0gc3RhdGUuc2VsZWN0aW9uLnJhbmdlcy5sZW5ndGg7XG4gICAgbGV0IGxpbmV3aXNlID0gbGFzdExpbmV3aXNlQ29weSAhPSBudWxsICYmIHN0YXRlLnNlbGVjdGlvbi5yYW5nZXMuZXZlcnkociA9PiByLmVtcHR5KSAmJiBsYXN0TGluZXdpc2VDb3B5ID09IHRleHQudG9TdHJpbmcoKTtcbiAgICBpZiAobGluZXdpc2UpIHtcbiAgICAgICAgbGV0IGxhc3RMaW5lID0gLTE7XG4gICAgICAgIGNoYW5nZXMgPSBzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChyYW5nZS5mcm9tKTtcbiAgICAgICAgICAgIGlmIChsaW5lLmZyb20gPT0gbGFzdExpbmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2UgfTtcbiAgICAgICAgICAgIGxhc3RMaW5lID0gbGluZS5mcm9tO1xuICAgICAgICAgICAgbGV0IGluc2VydCA9IHN0YXRlLnRvVGV4dCgoYnlMaW5lID8gdGV4dC5saW5lKGkrKykudGV4dCA6IGlucHV0KSArIHN0YXRlLmxpbmVCcmVhayk7XG4gICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiB7IGZyb206IGxpbmUuZnJvbSwgaW5zZXJ0IH0sXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuZnJvbSArIGluc2VydC5sZW5ndGgpIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChieUxpbmUpIHtcbiAgICAgICAgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSB0ZXh0LmxpbmUoaSsrKTtcbiAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgZnJvbTogcmFuZ2UuZnJvbSwgdG86IHJhbmdlLnRvLCBpbnNlcnQ6IGxpbmUudGV4dCB9LFxuICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHJhbmdlLmZyb20gKyBsaW5lLmxlbmd0aCkgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjaGFuZ2VzID0gc3RhdGUucmVwbGFjZVNlbGVjdGlvbih0ZXh0KTtcbiAgICB9XG4gICAgdmlldy5kaXNwYXRjaChjaGFuZ2VzLCB7XG4gICAgICAgIHVzZXJFdmVudDogXCJpbnB1dC5wYXN0ZVwiLFxuICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZVxuICAgIH0pO1xufVxub2JzZXJ2ZXJzLnNjcm9sbCA9IHZpZXcgPT4ge1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2Nyb2xsVG9wID0gdmlldy5zY3JvbGxET00uc2Nyb2xsVG9wO1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2Nyb2xsTGVmdCA9IHZpZXcuc2Nyb2xsRE9NLnNjcm9sbExlZnQ7XG59O1xuaGFuZGxlcnMua2V5ZG93biA9ICh2aWV3LCBldmVudCkgPT4ge1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5zZXRTZWxlY3Rpb25PcmlnaW4oXCJzZWxlY3RcIik7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMjcgJiYgdmlldy5pbnB1dFN0YXRlLnRhYkZvY3VzTW9kZSAhPSAwKVxuICAgICAgICB2aWV3LmlucHV0U3RhdGUudGFiRm9jdXNNb2RlID0gRGF0ZS5ub3coKSArIDIwMDA7XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbm9ic2VydmVycy50b3VjaHN0YXJ0ID0gKHZpZXcsIGUpID0+IHtcbiAgICB2aWV3LmlucHV0U3RhdGUubGFzdFRvdWNoVGltZSA9IERhdGUubm93KCk7XG4gICAgdmlldy5pbnB1dFN0YXRlLnNldFNlbGVjdGlvbk9yaWdpbihcInNlbGVjdC5wb2ludGVyXCIpO1xufTtcbm9ic2VydmVycy50b3VjaG1vdmUgPSB2aWV3ID0+IHtcbiAgICB2aWV3LmlucHV0U3RhdGUuc2V0U2VsZWN0aW9uT3JpZ2luKFwic2VsZWN0LnBvaW50ZXJcIik7XG59O1xuaGFuZGxlcnMubW91c2Vkb3duID0gKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgdmlldy5vYnNlcnZlci5mbHVzaCgpO1xuICAgIGlmICh2aWV3LmlucHV0U3RhdGUubGFzdFRvdWNoVGltZSA+IERhdGUubm93KCkgLSAyMDAwKVxuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIElnbm9yZSB0b3VjaCBpbnRlcmFjdGlvblxuICAgIGxldCBzdHlsZSA9IG51bGw7XG4gICAgZm9yIChsZXQgbWFrZVN0eWxlIG9mIHZpZXcuc3RhdGUuZmFjZXQobW91c2VTZWxlY3Rpb25TdHlsZSkpIHtcbiAgICAgICAgc3R5bGUgPSBtYWtlU3R5bGUodmlldywgZXZlbnQpO1xuICAgICAgICBpZiAoc3R5bGUpXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKCFzdHlsZSAmJiBldmVudC5idXR0b24gPT0gMClcbiAgICAgICAgc3R5bGUgPSBiYXNpY01vdXNlU2VsZWN0aW9uKHZpZXcsIGV2ZW50KTtcbiAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgbGV0IG11c3RGb2N1cyA9ICF2aWV3Lmhhc0ZvY3VzO1xuICAgICAgICB2aWV3LmlucHV0U3RhdGUuc3RhcnRNb3VzZVNlbGVjdGlvbihuZXcgTW91c2VTZWxlY3Rpb24odmlldywgZXZlbnQsIHN0eWxlLCBtdXN0Rm9jdXMpKTtcbiAgICAgICAgaWYgKG11c3RGb2N1cylcbiAgICAgICAgICAgIHZpZXcub2JzZXJ2ZXIuaWdub3JlKCgpID0+IHtcbiAgICAgICAgICAgICAgICBmb2N1c1ByZXZlbnRTY3JvbGwodmlldy5jb250ZW50RE9NKTtcbiAgICAgICAgICAgICAgICBsZXQgYWN0aXZlID0gdmlldy5yb290LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSAmJiAhYWN0aXZlLmNvbnRhaW5zKHZpZXcuY29udGVudERPTSkpXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZS5ibHVyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgbGV0IG1vdXNlU2VsID0gdmlldy5pbnB1dFN0YXRlLm1vdXNlU2VsZWN0aW9uO1xuICAgICAgICBpZiAobW91c2VTZWwpIHtcbiAgICAgICAgICAgIG1vdXNlU2VsLnN0YXJ0KGV2ZW50KTtcbiAgICAgICAgICAgIHJldHVybiBtb3VzZVNlbC5kcmFnZ2luZyA9PT0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5zZXRTZWxlY3Rpb25PcmlnaW4oXCJzZWxlY3QucG9pbnRlclwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbmZ1bmN0aW9uIHJhbmdlRm9yQ2xpY2sodmlldywgcG9zLCBiaWFzLCB0eXBlKSB7XG4gICAgaWYgKHR5cGUgPT0gMSkgeyAvLyBTaW5nbGUgY2xpY2tcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocG9zLCBiaWFzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PSAyKSB7IC8vIERvdWJsZSBjbGlja1xuICAgICAgICByZXR1cm4gZ3JvdXBBdCh2aWV3LnN0YXRlLCBwb3MsIGJpYXMpO1xuICAgIH1cbiAgICBlbHNlIHsgLy8gVHJpcGxlIGNsaWNrXG4gICAgICAgIGxldCB2aXN1YWwgPSB2aWV3LmRvY1ZpZXcubGluZUF0KHBvcywgYmlhcyksIGxpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQodmlzdWFsID8gdmlzdWFsLnBvc0F0RW5kIDogcG9zKTtcbiAgICAgICAgbGV0IGZyb20gPSB2aXN1YWwgPyB2aXN1YWwucG9zQXRTdGFydCA6IGxpbmUuZnJvbSwgdG8gPSB2aXN1YWwgPyB2aXN1YWwucG9zQXRFbmQgOiBsaW5lLnRvO1xuICAgICAgICBpZiAodG8gPCB2aWV3LnN0YXRlLmRvYy5sZW5ndGggJiYgdG8gPT0gbGluZS50bylcbiAgICAgICAgICAgIHRvKys7XG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoZnJvbSwgdG8pO1xuICAgIH1cbn1cbmNvbnN0IEJhZE1vdXNlRGV0YWlsID0gYnJvd3Nlci5pZSAmJiBicm93c2VyLmllX3ZlcnNpb24gPD0gMTE7XG5sZXQgbGFzdE1vdXNlRG93biA9IG51bGwsIGxhc3RNb3VzZURvd25Db3VudCA9IDAsIGxhc3RNb3VzZURvd25UaW1lID0gMDtcbmZ1bmN0aW9uIGdldENsaWNrVHlwZShldmVudCkge1xuICAgIGlmICghQmFkTW91c2VEZXRhaWwpXG4gICAgICAgIHJldHVybiBldmVudC5kZXRhaWw7XG4gICAgbGV0IGxhc3QgPSBsYXN0TW91c2VEb3duLCBsYXN0VGltZSA9IGxhc3RNb3VzZURvd25UaW1lO1xuICAgIGxhc3RNb3VzZURvd24gPSBldmVudDtcbiAgICBsYXN0TW91c2VEb3duVGltZSA9IERhdGUubm93KCk7XG4gICAgcmV0dXJuIGxhc3RNb3VzZURvd25Db3VudCA9ICFsYXN0IHx8IChsYXN0VGltZSA+IERhdGUubm93KCkgLSA0MDAgJiYgTWF0aC5hYnMobGFzdC5jbGllbnRYIC0gZXZlbnQuY2xpZW50WCkgPCAyICYmXG4gICAgICAgIE1hdGguYWJzKGxhc3QuY2xpZW50WSAtIGV2ZW50LmNsaWVudFkpIDwgMikgPyAobGFzdE1vdXNlRG93bkNvdW50ICsgMSkgJSAzIDogMTtcbn1cbmZ1bmN0aW9uIGJhc2ljTW91c2VTZWxlY3Rpb24odmlldywgZXZlbnQpIHtcbiAgICBsZXQgc3RhcnQgPSB2aWV3LnBvc0FuZFNpZGVBdENvb3Jkcyh7IHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfSwgZmFsc2UpLCB0eXBlID0gZ2V0Q2xpY2tUeXBlKGV2ZW50KTtcbiAgICBsZXQgc3RhcnRTZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbjtcbiAgICByZXR1cm4ge1xuICAgICAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICBzdGFydC5wb3MgPSB1cGRhdGUuY2hhbmdlcy5tYXBQb3Moc3RhcnQucG9zKTtcbiAgICAgICAgICAgICAgICBzdGFydFNlbCA9IHN0YXJ0U2VsLm1hcCh1cGRhdGUuY2hhbmdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldChldmVudCwgZXh0ZW5kLCBtdWx0aXBsZSkge1xuICAgICAgICAgICAgbGV0IGN1ciA9IHZpZXcucG9zQW5kU2lkZUF0Q29vcmRzKHsgeDogZXZlbnQuY2xpZW50WCwgeTogZXZlbnQuY2xpZW50WSB9LCBmYWxzZSksIHJlbW92ZWQ7XG4gICAgICAgICAgICBsZXQgcmFuZ2UgPSByYW5nZUZvckNsaWNrKHZpZXcsIGN1ci5wb3MsIGN1ci5hc3NvYywgdHlwZSk7XG4gICAgICAgICAgICBpZiAoc3RhcnQucG9zICE9IGN1ci5wb3MgJiYgIWV4dGVuZCkge1xuICAgICAgICAgICAgICAgIGxldCBzdGFydFJhbmdlID0gcmFuZ2VGb3JDbGljayh2aWV3LCBzdGFydC5wb3MsIHN0YXJ0LmFzc29jLCB0eXBlKTtcbiAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IE1hdGgubWluKHN0YXJ0UmFuZ2UuZnJvbSwgcmFuZ2UuZnJvbSksIHRvID0gTWF0aC5tYXgoc3RhcnRSYW5nZS50bywgcmFuZ2UudG8pO1xuICAgICAgICAgICAgICAgIHJhbmdlID0gZnJvbSA8IHJhbmdlLmZyb20gPyBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoZnJvbSwgdG8pIDogRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHRvLCBmcm9tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleHRlbmQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0U2VsLnJlcGxhY2VSYW5nZShzdGFydFNlbC5tYWluLmV4dGVuZChyYW5nZS5mcm9tLCByYW5nZS50bykpO1xuICAgICAgICAgICAgZWxzZSBpZiAobXVsdGlwbGUgJiYgdHlwZSA9PSAxICYmIHN0YXJ0U2VsLnJhbmdlcy5sZW5ndGggPiAxICYmIChyZW1vdmVkID0gcmVtb3ZlUmFuZ2VBcm91bmQoc3RhcnRTZWwsIGN1ci5wb3MpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlZDtcbiAgICAgICAgICAgIGVsc2UgaWYgKG11bHRpcGxlKVxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFydFNlbC5hZGRSYW5nZShyYW5nZSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jcmVhdGUoW3JhbmdlXSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gcmVtb3ZlUmFuZ2VBcm91bmQoc2VsLCBwb3MpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IHNlbC5yYW5nZXNbaV07XG4gICAgICAgIGlmIChmcm9tIDw9IHBvcyAmJiB0byA+PSBwb3MpXG4gICAgICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShzZWwucmFuZ2VzLnNsaWNlKDAsIGkpLmNvbmNhdChzZWwucmFuZ2VzLnNsaWNlKGkgKyAxKSksIHNlbC5tYWluSW5kZXggPT0gaSA/IDAgOiBzZWwubWFpbkluZGV4IC0gKHNlbC5tYWluSW5kZXggPiBpID8gMSA6IDApKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5oYW5kbGVycy5kcmFnc3RhcnQgPSAodmlldywgZXZlbnQpID0+IHtcbiAgICBsZXQgeyBzZWxlY3Rpb246IHsgbWFpbjogcmFuZ2UgfSB9ID0gdmlldy5zdGF0ZTtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmRyYWdnYWJsZSkge1xuICAgICAgICBsZXQgdGlsZSA9IHZpZXcuZG9jVmlldy50aWxlLm5lYXJlc3QoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgaWYgKHRpbGUgJiYgdGlsZS5pc1dpZGdldCgpKSB7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IHRpbGUucG9zQXRTdGFydCwgdG8gPSBmcm9tICsgdGlsZS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoZnJvbSA+PSByYW5nZS50byB8fCB0byA8PSByYW5nZS5mcm9tKVxuICAgICAgICAgICAgICAgIHJhbmdlID0gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGZyb20sIHRvKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgeyBpbnB1dFN0YXRlIH0gPSB2aWV3O1xuICAgIGlmIChpbnB1dFN0YXRlLm1vdXNlU2VsZWN0aW9uKVxuICAgICAgICBpbnB1dFN0YXRlLm1vdXNlU2VsZWN0aW9uLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICBpbnB1dFN0YXRlLmRyYWdnZWRDb250ZW50ID0gcmFuZ2U7XG4gICAgaWYgKGV2ZW50LmRhdGFUcmFuc2Zlcikge1xuICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YShcIlRleHRcIiwgdGV4dEZpbHRlcih2aWV3LnN0YXRlLCBjbGlwYm9hcmRPdXRwdXRGaWx0ZXIsIHZpZXcuc3RhdGUuc2xpY2VEb2MocmFuZ2UuZnJvbSwgcmFuZ2UudG8pKSk7XG4gICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gXCJjb3B5TW92ZVwiO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuaGFuZGxlcnMuZHJhZ2VuZCA9IHZpZXcgPT4ge1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5kcmFnZ2VkQ29udGVudCA9IG51bGw7XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbmZ1bmN0aW9uIGRyb3BUZXh0KHZpZXcsIGV2ZW50LCB0ZXh0LCBkaXJlY3QpIHtcbiAgICB0ZXh0ID0gdGV4dEZpbHRlcih2aWV3LnN0YXRlLCBjbGlwYm9hcmRJbnB1dEZpbHRlciwgdGV4dCk7XG4gICAgaWYgKCF0ZXh0KVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IGRyb3BQb3MgPSB2aWV3LnBvc0F0Q29vcmRzKHsgeDogZXZlbnQuY2xpZW50WCwgeTogZXZlbnQuY2xpZW50WSB9LCBmYWxzZSk7XG4gICAgbGV0IHsgZHJhZ2dlZENvbnRlbnQgfSA9IHZpZXcuaW5wdXRTdGF0ZTtcbiAgICBsZXQgZGVsID0gZGlyZWN0ICYmIGRyYWdnZWRDb250ZW50ICYmIGRyYWdNb3Zlc1NlbGVjdGlvbih2aWV3LCBldmVudClcbiAgICAgICAgPyB7IGZyb206IGRyYWdnZWRDb250ZW50LmZyb20sIHRvOiBkcmFnZ2VkQ29udGVudC50byB9IDogbnVsbDtcbiAgICBsZXQgaW5zID0geyBmcm9tOiBkcm9wUG9zLCBpbnNlcnQ6IHRleHQgfTtcbiAgICBsZXQgY2hhbmdlcyA9IHZpZXcuc3RhdGUuY2hhbmdlcyhkZWwgPyBbZGVsLCBpbnNdIDogaW5zKTtcbiAgICB2aWV3LmZvY3VzKCk7XG4gICAgdmlldy5kaXNwYXRjaCh7XG4gICAgICAgIGNoYW5nZXMsXG4gICAgICAgIHNlbGVjdGlvbjogeyBhbmNob3I6IGNoYW5nZXMubWFwUG9zKGRyb3BQb3MsIC0xKSwgaGVhZDogY2hhbmdlcy5tYXBQb3MoZHJvcFBvcywgMSkgfSxcbiAgICAgICAgdXNlckV2ZW50OiBkZWwgPyBcIm1vdmUuZHJvcFwiIDogXCJpbnB1dC5kcm9wXCJcbiAgICB9KTtcbiAgICB2aWV3LmlucHV0U3RhdGUuZHJhZ2dlZENvbnRlbnQgPSBudWxsO1xufVxuaGFuZGxlcnMuZHJvcCA9ICh2aWV3LCBldmVudCkgPT4ge1xuICAgIGlmICghZXZlbnQuZGF0YVRyYW5zZmVyKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHZpZXcuc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGxldCBmaWxlcyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcztcbiAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoKSB7IC8vIEZvciBhIGZpbGUgZHJvcCwgcmVhZCB0aGUgZmlsZSdzIHRleHQuXG4gICAgICAgIGxldCB0ZXh0ID0gQXJyYXkoZmlsZXMubGVuZ3RoKSwgcmVhZCA9IDA7XG4gICAgICAgIGxldCBmaW5pc2hGaWxlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCsrcmVhZCA9PSBmaWxlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgZHJvcFRleHQodmlldywgZXZlbnQsIHRleHQuZmlsdGVyKHMgPT4gcyAhPSBudWxsKS5qb2luKHZpZXcuc3RhdGUubGluZUJyZWFrKSwgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXI7XG4gICAgICAgICAgICByZWFkZXIub25lcnJvciA9IGZpbmlzaEZpbGU7XG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghL1tcXHgwMC1cXHgwOFxceDBlLVxceDFmXXsyfS8udGVzdChyZWFkZXIucmVzdWx0KSlcbiAgICAgICAgICAgICAgICAgICAgdGV4dFtpXSA9IHJlYWRlci5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgZmluaXNoRmlsZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCB0ZXh0ID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJUZXh0XCIpO1xuICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgICAgZHJvcFRleHQodmlldywgZXZlbnQsIHRleHQsIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbmhhbmRsZXJzLnBhc3RlID0gKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgaWYgKHZpZXcuc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIHZpZXcub2JzZXJ2ZXIuZmx1c2goKTtcbiAgICBsZXQgZGF0YSA9IGJyb2tlbkNsaXBib2FyZEFQSSA/IG51bGwgOiBldmVudC5jbGlwYm9hcmREYXRhO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICAgIGRvUGFzdGUodmlldywgZGF0YS5nZXREYXRhKFwidGV4dC9wbGFpblwiKSB8fCBkYXRhLmdldERhdGEoXCJ0ZXh0L3VyaS1saXN0XCIpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjYXB0dXJlUGFzdGUodmlldyk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59O1xuZnVuY3Rpb24gY2FwdHVyZUNvcHkodmlldywgdGV4dCkge1xuICAgIC8vIFRoZSBleHRyYSB3cmFwcGVyIGlzIHNvbWVob3cgbmVjZXNzYXJ5IG9uIElFL0VkZ2UgdG8gcHJldmVudCB0aGVcbiAgICAvLyBjb250ZW50IGZyb20gYmVpbmcgbWFuZ2xlZCB3aGVuIGl0IGlzIHB1dCBvbnRvIHRoZSBjbGlwYm9hcmRcbiAgICBsZXQgcGFyZW50ID0gdmlldy5kb20ucGFyZW50Tm9kZTtcbiAgICBpZiAoIXBhcmVudClcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCB0YXJnZXQgPSBwYXJlbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpKTtcbiAgICB0YXJnZXQuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246IGZpeGVkOyBsZWZ0OiAtMTAwMDBweDsgdG9wOiAxMHB4XCI7XG4gICAgdGFyZ2V0LnZhbHVlID0gdGV4dDtcbiAgICB0YXJnZXQuZm9jdXMoKTtcbiAgICB0YXJnZXQuc2VsZWN0aW9uRW5kID0gdGV4dC5sZW5ndGg7XG4gICAgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0ID0gMDtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGFyZ2V0LnJlbW92ZSgpO1xuICAgICAgICB2aWV3LmZvY3VzKCk7XG4gICAgfSwgNTApO1xufVxuZnVuY3Rpb24gY29waWVkUmFuZ2Uoc3RhdGUpIHtcbiAgICBsZXQgY29udGVudCA9IFtdLCByYW5nZXMgPSBbXSwgbGluZXdpc2UgPSBmYWxzZTtcbiAgICBmb3IgKGxldCByYW5nZSBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKVxuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KSB7XG4gICAgICAgICAgICBjb250ZW50LnB1c2goc3RhdGUuc2xpY2VEb2MocmFuZ2UuZnJvbSwgcmFuZ2UudG8pKTtcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKHJhbmdlKTtcbiAgICAgICAgfVxuICAgIGlmICghY29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgLy8gTm90aGluZyBzZWxlY3RlZCwgZG8gYSBsaW5lLXdpc2UgY29weVxuICAgICAgICBsZXQgdXB0byA9IC0xO1xuICAgICAgICBmb3IgKGxldCB7IGZyb20gfSBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IHN0YXRlLmRvYy5saW5lQXQoZnJvbSk7XG4gICAgICAgICAgICBpZiAobGluZS5udW1iZXIgPiB1cHRvKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKGxpbmUudGV4dCk7XG4gICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2goeyBmcm9tOiBsaW5lLmZyb20sIHRvOiBNYXRoLm1pbihzdGF0ZS5kb2MubGVuZ3RoLCBsaW5lLnRvICsgMSkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cHRvID0gbGluZS5udW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXdpc2UgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4geyB0ZXh0OiB0ZXh0RmlsdGVyKHN0YXRlLCBjbGlwYm9hcmRPdXRwdXRGaWx0ZXIsIGNvbnRlbnQuam9pbihzdGF0ZS5saW5lQnJlYWspKSwgcmFuZ2VzLCBsaW5ld2lzZSB9O1xufVxubGV0IGxhc3RMaW5ld2lzZUNvcHkgPSBudWxsO1xuaGFuZGxlcnMuY29weSA9IGhhbmRsZXJzLmN1dCA9ICh2aWV3LCBldmVudCkgPT4ge1xuICAgIC8vIElmIHRoZSBET00gc2VsZWN0aW9uIGlzIG91dHNpZGUgdGhpcyBlZGl0b3IsIGRvbid0IGludGVyY2VwdC5cbiAgICAvLyBUaGlzIGhhcHBlbnMgd2hlbiBhIHBhcmVudCBlZGl0b3IgKGxpa2UgUHJvc2VNaXJyb3IpIHNlbGVjdHMgY29udGVudCB0aGF0XG4gICAgLy8gc3BhbnMgbXVsdGlwbGUgZWxlbWVudHMgaW5jbHVkaW5nIHRoaXMgQ29kZU1pcnJvci4gVGhlIGNvcHkgZXZlbnQgbWF5XG4gICAgLy8gYnViYmxlIHRocm91Z2ggQ29kZU1pcnJvciAoZS5nLiB3aGVuIENvZGVNaXJyb3IgaXMgdGhlIGZpcnN0IG9yIHRoZSBsYXN0XG4gICAgLy8gZWxlbWVudCBpbiB0aGUgc2VsZWN0aW9uKSwgYnV0IHdlIHNob3VsZCBsZXQgdGhlIHBhcmVudCBoYW5kbGUgaXQuXG4gICAgbGV0IGRvbVNlbCA9IGdldFNlbGVjdGlvbih2aWV3LnJvb3QpO1xuICAgIGlmIChkb21TZWwgJiYgIWhhc1NlbGVjdGlvbih2aWV3LmNvbnRlbnRET00sIGRvbVNlbCkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgeyB0ZXh0LCByYW5nZXMsIGxpbmV3aXNlIH0gPSBjb3BpZWRSYW5nZSh2aWV3LnN0YXRlKTtcbiAgICBpZiAoIXRleHQgJiYgIWxpbmV3aXNlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGFzdExpbmV3aXNlQ29weSA9IGxpbmV3aXNlID8gdGV4dCA6IG51bGw7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT0gXCJjdXRcIiAmJiAhdmlldy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7XG4gICAgICAgICAgICBjaGFuZ2VzOiByYW5nZXMsXG4gICAgICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZSxcbiAgICAgICAgICAgIHVzZXJFdmVudDogXCJkZWxldGUuY3V0XCJcbiAgICAgICAgfSk7XG4gICAgbGV0IGRhdGEgPSBicm9rZW5DbGlwYm9hcmRBUEkgPyBudWxsIDogZXZlbnQuY2xpcGJvYXJkRGF0YTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgICBkYXRhLmNsZWFyRGF0YSgpO1xuICAgICAgICBkYXRhLnNldERhdGEoXCJ0ZXh0L3BsYWluXCIsIHRleHQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNhcHR1cmVDb3B5KHZpZXcsIHRleHQpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcbmNvbnN0IGlzRm9jdXNDaGFuZ2UgPSAvKkBfX1BVUkVfXyovQW5ub3RhdGlvbi5kZWZpbmUoKTtcbmZ1bmN0aW9uIGZvY3VzQ2hhbmdlVHJhbnNhY3Rpb24oc3RhdGUsIGZvY3VzKSB7XG4gICAgbGV0IGVmZmVjdHMgPSBbXTtcbiAgICBmb3IgKGxldCBnZXRFZmZlY3Qgb2Ygc3RhdGUuZmFjZXQoZm9jdXNDaGFuZ2VFZmZlY3QpKSB7XG4gICAgICAgIGxldCBlZmZlY3QgPSBnZXRFZmZlY3Qoc3RhdGUsIGZvY3VzKTtcbiAgICAgICAgaWYgKGVmZmVjdClcbiAgICAgICAgICAgIGVmZmVjdHMucHVzaChlZmZlY3QpO1xuICAgIH1cbiAgICByZXR1cm4gZWZmZWN0cy5sZW5ndGggPyBzdGF0ZS51cGRhdGUoeyBlZmZlY3RzLCBhbm5vdGF0aW9uczogaXNGb2N1c0NoYW5nZS5vZih0cnVlKSB9KSA6IG51bGw7XG59XG5mdW5jdGlvbiB1cGRhdGVGb3JGb2N1c0NoYW5nZSh2aWV3KSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGxldCBmb2N1cyA9IHZpZXcuaGFzRm9jdXM7XG4gICAgICAgIGlmIChmb2N1cyAhPSB2aWV3LmlucHV0U3RhdGUubm90aWZpZWRGb2N1c2VkKSB7XG4gICAgICAgICAgICBsZXQgdHIgPSBmb2N1c0NoYW5nZVRyYW5zYWN0aW9uKHZpZXcuc3RhdGUsIGZvY3VzKTtcbiAgICAgICAgICAgIGlmICh0cilcbiAgICAgICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHRyKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB2aWV3LnVwZGF0ZShbXSk7XG4gICAgICAgIH1cbiAgICB9LCAxMCk7XG59XG5vYnNlcnZlcnMuZm9jdXMgPSB2aWV3ID0+IHtcbiAgICB2aWV3LmlucHV0U3RhdGUubGFzdEZvY3VzVGltZSA9IERhdGUubm93KCk7XG4gICAgLy8gV2hlbiBmb2N1c2luZyByZXNldCB0aGUgc2Nyb2xsIHBvc2l0aW9uLCBtb3ZlIGl0IGJhY2sgdG8gd2hlcmUgaXQgd2FzXG4gICAgaWYgKCF2aWV3LnNjcm9sbERPTS5zY3JvbGxUb3AgJiYgKHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2Nyb2xsVG9wIHx8IHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2Nyb2xsTGVmdCkpIHtcbiAgICAgICAgdmlldy5zY3JvbGxET00uc2Nyb2xsVG9wID0gdmlldy5pbnB1dFN0YXRlLmxhc3RTY3JvbGxUb3A7XG4gICAgICAgIHZpZXcuc2Nyb2xsRE9NLnNjcm9sbExlZnQgPSB2aWV3LmlucHV0U3RhdGUubGFzdFNjcm9sbExlZnQ7XG4gICAgfVxuICAgIHVwZGF0ZUZvckZvY3VzQ2hhbmdlKHZpZXcpO1xufTtcbm9ic2VydmVycy5ibHVyID0gdmlldyA9PiB7XG4gICAgdmlldy5vYnNlcnZlci5jbGVhclNlbGVjdGlvblJhbmdlKCk7XG4gICAgdXBkYXRlRm9yRm9jdXNDaGFuZ2Uodmlldyk7XG59O1xub2JzZXJ2ZXJzLmNvbXBvc2l0aW9uc3RhcnQgPSBvYnNlcnZlcnMuY29tcG9zaXRpb251cGRhdGUgPSB2aWV3ID0+IHtcbiAgICBpZiAodmlldy5vYnNlcnZlci5lZGl0Q29udGV4dClcbiAgICAgICAgcmV0dXJuOyAvLyBDb21wb3NpdGlvbiBoYW5kbGVkIGJ5IGVkaXQgY29udGV4dFxuICAgIGlmICh2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9PSBudWxsKVxuICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9IHRydWU7XG4gICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPCAwKSB7XG4gICAgICAgIC8vIEZJWE1FIHBvc3NpYmx5IHNldCBhIHRpbWVvdXQgdG8gY2xlYXIgaXQgYWdhaW4gb24gQW5kcm9pZFxuICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID0gMDtcbiAgICB9XG59O1xub2JzZXJ2ZXJzLmNvbXBvc2l0aW9uZW5kID0gdmlldyA9PiB7XG4gICAgaWYgKHZpZXcub2JzZXJ2ZXIuZWRpdENvbnRleHQpXG4gICAgICAgIHJldHVybjsgLy8gQ29tcG9zaXRpb24gaGFuZGxlZCBieSBlZGl0IGNvbnRleHRcbiAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID0gLTE7XG4gICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uRW5kZWRBdCA9IERhdGUubm93KCk7XG4gICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uUGVuZGluZ0tleSA9IHRydWU7XG4gICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uUGVuZGluZ0NoYW5nZSA9IHZpZXcub2JzZXJ2ZXIucGVuZGluZ1JlY29yZHMoKS5sZW5ndGggPiAwO1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvbkZpcnN0Q2hhbmdlID0gbnVsbDtcbiAgICBpZiAoYnJvd3Nlci5jaHJvbWUgJiYgYnJvd3Nlci5hbmRyb2lkKSB7XG4gICAgICAgIC8vIERlbGF5IGZsdXNoaW5nIGZvciBhIGJpdCBvbiBBbmRyb2lkIGJlY2F1c2UgaXQnbGwgb2Z0ZW4gZmlyZSBhXG4gICAgICAgIC8vIGJ1bmNoIG9mIGNvbnRyYWRpY3RvcnkgY2hhbmdlcyBpbiBhIHJvdyBhdCBlbmQgb2YgY29tcG9zaXRvblxuICAgICAgICB2aWV3Lm9ic2VydmVyLmZsdXNoU29vbigpO1xuICAgIH1cbiAgICBlbHNlIGlmICh2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25QZW5kaW5nQ2hhbmdlKSB7XG4gICAgICAgIC8vIElmIHdlIGZvdW5kIHBlbmRpbmcgcmVjb3Jkcywgc2NoZWR1bGUgYSBmbHVzaC5cbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB2aWV3Lm9ic2VydmVyLmZsdXNoKCkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBtYWtlIHN1cmUgdGhhdCwgaWYgbm8gY2hhbmdlcyBjb21lIGluIHNvb24sIHRoZVxuICAgICAgICAvLyBjb21wb3NpdGlvbiB2aWV3IGlzIGNsZWFyZWQuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPCAwICYmIHZpZXcuZG9jVmlldy5oYXNDb21wb3NpdGlvbilcbiAgICAgICAgICAgICAgICB2aWV3LnVwZGF0ZShbXSk7XG4gICAgICAgIH0sIDUwKTtcbiAgICB9XG59O1xub2JzZXJ2ZXJzLmNvbnRleHRtZW51ID0gdmlldyA9PiB7XG4gICAgdmlldy5pbnB1dFN0YXRlLmxhc3RDb250ZXh0TWVudSA9IERhdGUubm93KCk7XG59O1xuaGFuZGxlcnMuYmVmb3JlaW5wdXQgPSAodmlldywgZXZlbnQpID0+IHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGlmIChldmVudC5pbnB1dFR5cGUgPT0gXCJpbnNlcnRUZXh0XCIgfHwgZXZlbnQuaW5wdXRUeXBlID09IFwiaW5zZXJ0Q29tcG9zaXRpb25UZXh0XCIpIHtcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLmluc2VydGluZ1RleHQgPSBldmVudC5kYXRhO1xuICAgICAgICB2aWV3LmlucHV0U3RhdGUuaW5zZXJ0aW5nVGV4dEF0ID0gRGF0ZS5ub3coKTtcbiAgICB9XG4gICAgLy8gSW4gRWRpdENvbnRleHQgbW9kZSwgd2UgbXVzdCBoYW5kbGUgaW5zZXJ0UmVwbGFjZW1lbnRUZXh0IGV2ZW50c1xuICAgIC8vIGRpcmVjdGx5LCB0byBtYWtlIHNwZWxsIGNoZWNraW5nIGNvcnJlY3Rpb25zIHdvcmtcbiAgICBpZiAoZXZlbnQuaW5wdXRUeXBlID09IFwiaW5zZXJ0UmVwbGFjZW1lbnRUZXh0XCIgJiYgdmlldy5vYnNlcnZlci5lZGl0Q29udGV4dCkge1xuICAgICAgICBsZXQgdGV4dCA9IChfYSA9IGV2ZW50LmRhdGFUcmFuc2ZlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpLCByYW5nZXMgPSBldmVudC5nZXRUYXJnZXRSYW5nZXMoKTtcbiAgICAgICAgaWYgKHRleHQgJiYgcmFuZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHIgPSByYW5nZXNbMF07XG4gICAgICAgICAgICBsZXQgZnJvbSA9IHZpZXcucG9zQXRET00oci5zdGFydENvbnRhaW5lciwgci5zdGFydE9mZnNldCksIHRvID0gdmlldy5wb3NBdERPTShyLmVuZENvbnRhaW5lciwgci5lbmRPZmZzZXQpO1xuICAgICAgICAgICAgYXBwbHlET01DaGFuZ2VJbm5lcih2aWV3LCB7IGZyb20sIHRvLCBpbnNlcnQ6IHZpZXcuc3RhdGUudG9UZXh0KHRleHQpIH0sIG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQmVjYXVzZSBDaHJvbWUgQW5kcm9pZCBkb2Vzbid0IGZpcmUgdXNlZnVsIGtleSBldmVudHMsIHVzZVxuICAgIC8vIGJlZm9yZWlucHV0IHRvIGRldGVjdCBiYWNrc3BhY2UgKGFuZCBwb3NzaWJseSBlbnRlciBhbmQgZGVsZXRlLFxuICAgIC8vIGJ1dCB0aG9zZSB1c3VhbGx5IGRvbid0IGV2ZW4gc2VlbSB0byBmaXJlIGJlZm9yZWlucHV0IGV2ZW50cyBhdFxuICAgIC8vIHRoZSBtb21lbnQpIGFuZCBmYWtlIGEga2V5IGV2ZW50IGZvciBpdC5cbiAgICAvL1xuICAgIC8vIChwcmV2ZW50RGVmYXVsdCBvbiBiZWZvcmVpbnB1dCwgdGhvdWdoIHN1cHBvcnRlZCBpbiB0aGUgc3BlYyxcbiAgICAvLyBzZWVtcyB0byBkbyBub3RoaW5nIGF0IGFsbCBvbiBDaHJvbWUpLlxuICAgIGxldCBwZW5kaW5nO1xuICAgIGlmIChicm93c2VyLmNocm9tZSAmJiBicm93c2VyLmFuZHJvaWQgJiYgKHBlbmRpbmcgPSBQZW5kaW5nS2V5cy5maW5kKGtleSA9PiBrZXkuaW5wdXRUeXBlID09IGV2ZW50LmlucHV0VHlwZSkpKSB7XG4gICAgICAgIHZpZXcub2JzZXJ2ZXIuZGVsYXlBbmRyb2lkS2V5KHBlbmRpbmcua2V5LCBwZW5kaW5nLmtleUNvZGUpO1xuICAgICAgICBpZiAocGVuZGluZy5rZXkgPT0gXCJCYWNrc3BhY2VcIiB8fCBwZW5kaW5nLmtleSA9PSBcIkRlbGV0ZVwiKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnRWaWV3SGVpZ2h0ID0gKChfYiA9IHdpbmRvdy52aXN1YWxWaWV3cG9ydCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmhlaWdodCkgfHwgMDtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAvLyBCYWNrc3BhY2luZyBuZWFyIHVuZWRpdGFibGUgbm9kZXMgb24gQ2hyb21lIEFuZHJvaWQgc29tZXRpbWVzXG4gICAgICAgICAgICAgICAgLy8gY2xvc2VzIHRoZSB2aXJ0dWFsIGtleWJvYXJkLiBUaGlzIHRyaWVzIHRvIGNydWRlbHkgZGV0ZWN0XG4gICAgICAgICAgICAgICAgLy8gdGhhdCBhbmQgcmVmb2N1cyB0byBnZXQgaXQgYmFjay5cbiAgICAgICAgICAgICAgICBpZiAoKCgoX2EgPSB3aW5kb3cudmlzdWFsVmlld3BvcnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5oZWlnaHQpIHx8IDApID4gc3RhcnRWaWV3SGVpZ2h0ICsgMTAgJiYgdmlldy5oYXNGb2N1cykge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmNvbnRlbnRET00uYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYnJvd3Nlci5pb3MgJiYgZXZlbnQuaW5wdXRUeXBlID09IFwiZGVsZXRlQ29udGVudEZvcndhcmRcIikge1xuICAgICAgICAvLyBGb3Igc29tZSByZWFzb24sIERPTSBjaGFuZ2VzIChhbmQgYmVmb3JlaW5wdXQpIGhhcHBlbiBfYmVmb3JlX1xuICAgICAgICAvLyB0aGUga2V5IGV2ZW50IGZvciBjdHJsLWQgb24gaU9TIHdoZW4gdXNpbmcgYW4gZXh0ZXJuYWxcbiAgICAgICAgLy8ga2V5Ym9hcmQuXG4gICAgICAgIHZpZXcub2JzZXJ2ZXIuZmx1c2hTb29uKCk7XG4gICAgfVxuICAgIC8vIFNhZmFyaSB3aWxsIG9jY2FzaW9uYWxseSBmb3JnZXQgdG8gZmlyZSBjb21wb3NpdGlvbmVuZCBhdCB0aGUgZW5kIG9mIGEgZGVhZC1rZXkgY29tcG9zaXRpb25cbiAgICBpZiAoYnJvd3Nlci5zYWZhcmkgJiYgZXZlbnQuaW5wdXRUeXBlID09IFwiaW5zZXJ0VGV4dFwiICYmIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPj0gMCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG9ic2VydmVycy5jb21wb3NpdGlvbmVuZCh2aWV3LCBldmVudCksIDIwKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbmNvbnN0IGFwcGxpZWRGaXJlZm94SGFjayA9IC8qQF9fUFVSRV9fKi9uZXcgU2V0O1xuLy8gSW4gRmlyZWZveCwgd2hlbiBjdXQvY29weSBoYW5kbGVycyBhcmUgYWRkZWQgdG8gdGhlIGRvY3VtZW50LCB0aGF0XG4vLyBzb21laG93IGF2b2lkcyBhIGJ1ZyB3aGVyZSB0aG9zZSBldmVudHMgYXJlbid0IGZpcmVkIHdoZW4gdGhlXG4vLyBzZWxlY3Rpb24gaXMgZW1wdHkuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vY29kZW1pcnJvci9kZXYvaXNzdWVzLzEwODJcbi8vIGFuZCBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD05OTU5NjFcbmZ1bmN0aW9uIGZpcmVmb3hDb3B5Q3V0SGFjayhkb2MpIHtcbiAgICBpZiAoIWFwcGxpZWRGaXJlZm94SGFjay5oYXMoZG9jKSkge1xuICAgICAgICBhcHBsaWVkRmlyZWZveEhhY2suYWRkKGRvYyk7XG4gICAgICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKFwiY29weVwiLCAoKSA9PiB7IH0pO1xuICAgICAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcihcImN1dFwiLCAoKSA9PiB7IH0pO1xuICAgIH1cbn1cblxuY29uc3Qgd3JhcHBpbmdXaGl0ZVNwYWNlID0gW1wicHJlLXdyYXBcIiwgXCJub3JtYWxcIiwgXCJwcmUtbGluZVwiLCBcImJyZWFrLXNwYWNlc1wiXTtcbi8vIFVzZWQgdG8gdHJhY2ssIGR1cmluZyB1cGRhdGVIZWlnaHQsIGlmIGFueSBhY3R1YWwgaGVpZ2h0cyBjaGFuZ2VkXG5sZXQgaGVpZ2h0Q2hhbmdlRmxhZyA9IGZhbHNlO1xuZnVuY3Rpb24gY2xlYXJIZWlnaHRDaGFuZ2VGbGFnKCkgeyBoZWlnaHRDaGFuZ2VGbGFnID0gZmFsc2U7IH1cbmNsYXNzIEhlaWdodE9yYWNsZSB7XG4gICAgY29uc3RydWN0b3IobGluZVdyYXBwaW5nKSB7XG4gICAgICAgIHRoaXMubGluZVdyYXBwaW5nID0gbGluZVdyYXBwaW5nO1xuICAgICAgICB0aGlzLmRvYyA9IFRleHQuZW1wdHk7XG4gICAgICAgIHRoaXMuaGVpZ2h0U2FtcGxlcyA9IHt9O1xuICAgICAgICB0aGlzLmxpbmVIZWlnaHQgPSAxNDsgLy8gVGhlIGhlaWdodCBvZiBhbiBlbnRpcmUgbGluZSAobGluZS1oZWlnaHQpXG4gICAgICAgIHRoaXMuY2hhcldpZHRoID0gNztcbiAgICAgICAgdGhpcy50ZXh0SGVpZ2h0ID0gMTQ7IC8vIFRoZSBoZWlnaHQgb2YgdGhlIGFjdHVhbCBmb250IChmb250LXNpemUpXG4gICAgICAgIHRoaXMubGluZUxlbmd0aCA9IDMwO1xuICAgIH1cbiAgICBoZWlnaHRGb3JHYXAoZnJvbSwgdG8pIHtcbiAgICAgICAgbGV0IGxpbmVzID0gdGhpcy5kb2MubGluZUF0KHRvKS5udW1iZXIgLSB0aGlzLmRvYy5saW5lQXQoZnJvbSkubnVtYmVyICsgMTtcbiAgICAgICAgaWYgKHRoaXMubGluZVdyYXBwaW5nKVxuICAgICAgICAgICAgbGluZXMgKz0gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKCgodG8gLSBmcm9tKSAtIChsaW5lcyAqIHRoaXMubGluZUxlbmd0aCAqIDAuNSkpIC8gdGhpcy5saW5lTGVuZ3RoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVIZWlnaHQgKiBsaW5lcztcbiAgICB9XG4gICAgaGVpZ2h0Rm9yTGluZShsZW5ndGgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxpbmVXcmFwcGluZylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpbmVIZWlnaHQ7XG4gICAgICAgIGxldCBsaW5lcyA9IDEgKyBNYXRoLm1heCgwLCBNYXRoLmNlaWwoKGxlbmd0aCAtIHRoaXMubGluZUxlbmd0aCkgLyBNYXRoLm1heCgxLCB0aGlzLmxpbmVMZW5ndGggLSA1KSkpO1xuICAgICAgICByZXR1cm4gbGluZXMgKiB0aGlzLmxpbmVIZWlnaHQ7XG4gICAgfVxuICAgIHNldERvYyhkb2MpIHsgdGhpcy5kb2MgPSBkb2M7IHJldHVybiB0aGlzOyB9XG4gICAgbXVzdFJlZnJlc2hGb3JXcmFwcGluZyh3aGl0ZVNwYWNlKSB7XG4gICAgICAgIHJldHVybiAod3JhcHBpbmdXaGl0ZVNwYWNlLmluZGV4T2Yod2hpdGVTcGFjZSkgPiAtMSkgIT0gdGhpcy5saW5lV3JhcHBpbmc7XG4gICAgfVxuICAgIG11c3RSZWZyZXNoRm9ySGVpZ2h0cyhsaW5lSGVpZ2h0cykge1xuICAgICAgICBsZXQgbmV3SGVpZ2h0ID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZUhlaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBoID0gbGluZUhlaWdodHNbaV07XG4gICAgICAgICAgICBpZiAoaCA8IDApIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghdGhpcy5oZWlnaHRTYW1wbGVzW01hdGguZmxvb3IoaCAqIDEwKV0pIHsgLy8gUm91bmQgdG8gLjEgcGl4ZWxzXG4gICAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlaWdodFNhbXBsZXNbTWF0aC5mbG9vcihoICogMTApXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld0hlaWdodDtcbiAgICB9XG4gICAgcmVmcmVzaCh3aGl0ZVNwYWNlLCBsaW5lSGVpZ2h0LCBjaGFyV2lkdGgsIHRleHRIZWlnaHQsIGxpbmVMZW5ndGgsIGtub3duSGVpZ2h0cykge1xuICAgICAgICBsZXQgbGluZVdyYXBwaW5nID0gd3JhcHBpbmdXaGl0ZVNwYWNlLmluZGV4T2Yod2hpdGVTcGFjZSkgPiAtMTtcbiAgICAgICAgbGV0IGNoYW5nZWQgPSBNYXRoLmFicyhsaW5lSGVpZ2h0IC0gdGhpcy5saW5lSGVpZ2h0KSA+IDAuMyB8fCB0aGlzLmxpbmVXcmFwcGluZyAhPSBsaW5lV3JhcHBpbmcgfHxcbiAgICAgICAgICAgIE1hdGguYWJzKGNoYXJXaWR0aCAtIHRoaXMuY2hhcldpZHRoKSA+IDAuMTtcbiAgICAgICAgdGhpcy5saW5lV3JhcHBpbmcgPSBsaW5lV3JhcHBpbmc7XG4gICAgICAgIHRoaXMubGluZUhlaWdodCA9IGxpbmVIZWlnaHQ7XG4gICAgICAgIHRoaXMuY2hhcldpZHRoID0gY2hhcldpZHRoO1xuICAgICAgICB0aGlzLnRleHRIZWlnaHQgPSB0ZXh0SGVpZ2h0O1xuICAgICAgICB0aGlzLmxpbmVMZW5ndGggPSBsaW5lTGVuZ3RoO1xuICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5oZWlnaHRTYW1wbGVzID0ge307XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtub3duSGVpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBoID0ga25vd25IZWlnaHRzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChoIDwgMClcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHRTYW1wbGVzW01hdGguZmxvb3IoaCAqIDEwKV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGFuZ2VkO1xuICAgIH1cbn1cbi8vIFRoaXMgb2JqZWN0IGlzIHVzZWQgYnkgYHVwZGF0ZUhlaWdodGAgdG8gbWFrZSBET00gbWVhc3VyZW1lbnRzXG4vLyBhcnJpdmUgYXQgdGhlIHJpZ2h0IG5vZGVzLiBUaGUgYGhlaWdodHNgIGFycmF5IGlzIGEgc2VxdWVuY2Ugb2Zcbi8vIGJsb2NrIGhlaWdodHMsIHN0YXJ0aW5nIGZyb20gcG9zaXRpb24gYGZyb21gLlxuY2xhc3MgTWVhc3VyZWRIZWlnaHRzIHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tLCBoZWlnaHRzKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMuaGVpZ2h0cyA9IGhlaWdodHM7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIH1cbiAgICBnZXQgbW9yZSgpIHsgcmV0dXJuIHRoaXMuaW5kZXggPCB0aGlzLmhlaWdodHMubGVuZ3RoOyB9XG59XG4vKipcblJlY29yZCB1c2VkIHRvIHJlcHJlc2VudCBpbmZvcm1hdGlvbiBhYm91dCBhIGJsb2NrLWxldmVsIGVsZW1lbnRcbmluIHRoZSBlZGl0b3Igdmlldy5cbiovXG5jbGFzcyBCbG9ja0luZm8ge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHN0YXJ0IG9mIHRoZSBlbGVtZW50IGluIHRoZSBkb2N1bWVudC5cbiAgICAqL1xuICAgIGZyb20sIFxuICAgIC8qKlxuICAgIFRoZSBsZW5ndGggb2YgdGhlIGVsZW1lbnQuXG4gICAgKi9cbiAgICBsZW5ndGgsIFxuICAgIC8qKlxuICAgIFRoZSB0b3AgcG9zaXRpb24gb2YgdGhlIGVsZW1lbnQgKHJlbGF0aXZlIHRvIHRoZSB0b3Agb2YgdGhlXG4gICAgZG9jdW1lbnQpLlxuICAgICovXG4gICAgdG9wLCBcbiAgICAvKipcbiAgICBJdHMgaGVpZ2h0LlxuICAgICovXG4gICAgaGVpZ2h0LCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWwgV2VpcmQgcGFja2VkIGZpZWxkIHRoYXQgaG9sZHMgYW4gYXJyYXkgb2YgY2hpbGRyZW5cbiAgICBmb3IgY29tcG9zaXRlIGJsb2NrcywgYSBkZWNvcmF0aW9uIGZvciBibG9jayB3aWRnZXRzLCBhbmQgYVxuICAgIG51bWJlciBpbmRpY2F0aW5nIHRoZSBhbW91bnQgb2Ygd2lkZ2V0LWNyZWF0ZWQgbGluZSBicmVha3MgZm9yXG4gICAgdGV4dCBibG9ja3MuXG4gICAgKi9cbiAgICBfY29udGVudCkge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy50b3AgPSB0b3A7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLl9jb250ZW50ID0gX2NvbnRlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSB0eXBlIG9mIGVsZW1lbnQgdGhpcyBpcy4gV2hlbiBxdWVyeWluZyBsaW5lcywgdGhpcyBtYXkgYmVcbiAgICBhbiBhcnJheSBvZiBhbGwgdGhlIGJsb2NrcyB0aGF0IG1ha2UgdXAgdGhlIGxpbmUuXG4gICAgKi9cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLl9jb250ZW50ID09IFwibnVtYmVyXCIgPyBCbG9ja1R5cGUuVGV4dCA6XG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KHRoaXMuX2NvbnRlbnQpID8gdGhpcy5fY29udGVudCA6IHRoaXMuX2NvbnRlbnQudHlwZTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGVuZCBvZiB0aGUgZWxlbWVudCBhcyBhIGRvY3VtZW50IHBvc2l0aW9uLlxuICAgICovXG4gICAgZ2V0IHRvKCkgeyByZXR1cm4gdGhpcy5mcm9tICsgdGhpcy5sZW5ndGg7IH1cbiAgICAvKipcbiAgICBUaGUgYm90dG9tIHBvc2l0aW9uIG9mIHRoZSBlbGVtZW50LlxuICAgICovXG4gICAgZ2V0IGJvdHRvbSgpIHsgcmV0dXJuIHRoaXMudG9wICsgdGhpcy5oZWlnaHQ7IH1cbiAgICAvKipcbiAgICBJZiB0aGlzIGlzIGEgd2lkZ2V0IGJsb2NrLCB0aGlzIHdpbGwgcmV0dXJuIHRoZSB3aWRnZXRcbiAgICBhc3NvY2lhdGVkIHdpdGggaXQuXG4gICAgKi9cbiAgICBnZXQgd2lkZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udGVudCBpbnN0YW5jZW9mIFBvaW50RGVjb3JhdGlvbiA/IHRoaXMuX2NvbnRlbnQud2lkZ2V0IDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgSWYgdGhpcyBpcyBhIHRleHRibG9jaywgdGhpcyBob2xkcyB0aGUgbnVtYmVyIG9mIGxpbmUgYnJlYWtzXG4gICAgdGhhdCBhcHBlYXIgaW4gd2lkZ2V0cyBpbnNpZGUgdGhlIGJsb2NrLlxuICAgICovXG4gICAgZ2V0IHdpZGdldExpbmVCcmVha3MoKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5fY29udGVudCA9PSBcIm51bWJlclwiID8gdGhpcy5fY29udGVudCA6IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgam9pbihvdGhlcikge1xuICAgICAgICBsZXQgY29udGVudCA9IChBcnJheS5pc0FycmF5KHRoaXMuX2NvbnRlbnQpID8gdGhpcy5fY29udGVudCA6IFt0aGlzXSlcbiAgICAgICAgICAgIC5jb25jYXQoQXJyYXkuaXNBcnJheShvdGhlci5fY29udGVudCkgPyBvdGhlci5fY29udGVudCA6IFtvdGhlcl0pO1xuICAgICAgICByZXR1cm4gbmV3IEJsb2NrSW5mbyh0aGlzLmZyb20sIHRoaXMubGVuZ3RoICsgb3RoZXIubGVuZ3RoLCB0aGlzLnRvcCwgdGhpcy5oZWlnaHQgKyBvdGhlci5oZWlnaHQsIGNvbnRlbnQpO1xuICAgIH1cbn1cbnZhciBRdWVyeVR5cGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChRdWVyeVR5cGUpIHtcbiAgICBRdWVyeVR5cGVbUXVlcnlUeXBlW1wiQnlQb3NcIl0gPSAwXSA9IFwiQnlQb3NcIjtcbiAgICBRdWVyeVR5cGVbUXVlcnlUeXBlW1wiQnlIZWlnaHRcIl0gPSAxXSA9IFwiQnlIZWlnaHRcIjtcbiAgICBRdWVyeVR5cGVbUXVlcnlUeXBlW1wiQnlQb3NOb0hlaWdodFwiXSA9IDJdID0gXCJCeVBvc05vSGVpZ2h0XCI7XG5yZXR1cm4gUXVlcnlUeXBlfSkoUXVlcnlUeXBlIHx8IChRdWVyeVR5cGUgPSB7fSkpO1xuY29uc3QgRXBzaWxvbiA9IDFlLTM7XG5jbGFzcyBIZWlnaHRNYXAge1xuICAgIGNvbnN0cnVjdG9yKGxlbmd0aCwgLy8gVGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIGNvdmVyZWRcbiAgICBoZWlnaHQsIC8vIEhlaWdodCBvZiB0aGlzIHBhcnQgb2YgdGhlIGRvY3VtZW50XG4gICAgZmxhZ3MgPSAyIC8qIEZsYWcuT3V0ZGF0ZWQgKi8pIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLmZsYWdzID0gZmxhZ3M7XG4gICAgfVxuICAgIGdldCBvdXRkYXRlZCgpIHsgcmV0dXJuICh0aGlzLmZsYWdzICYgMiAvKiBGbGFnLk91dGRhdGVkICovKSA+IDA7IH1cbiAgICBzZXQgb3V0ZGF0ZWQodmFsdWUpIHsgdGhpcy5mbGFncyA9ICh2YWx1ZSA/IDIgLyogRmxhZy5PdXRkYXRlZCAqLyA6IDApIHwgKHRoaXMuZmxhZ3MgJiB+MiAvKiBGbGFnLk91dGRhdGVkICovKTsgfVxuICAgIHNldEhlaWdodChoZWlnaHQpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVpZ2h0ICE9IGhlaWdodCkge1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuaGVpZ2h0IC0gaGVpZ2h0KSA+IEVwc2lsb24pXG4gICAgICAgICAgICAgICAgaGVpZ2h0Q2hhbmdlRmxhZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBCYXNlIGNhc2UgaXMgdG8gcmVwbGFjZSBhIGxlYWYgbm9kZSwgd2hpY2ggc2ltcGx5IGJ1aWxkcyBhIHRyZWVcbiAgICAvLyBmcm9tIHRoZSBuZXcgbm9kZXMgYW5kIHJldHVybnMgdGhhdCAoSGVpZ2h0TWFwQnJhbmNoIGFuZFxuICAgIC8vIEhlaWdodE1hcEdhcCBvdmVycmlkZSB0aGlzIHRvIGFjdHVhbGx5IHVzZSBmcm9tL3RvKVxuICAgIHJlcGxhY2UoX2Zyb20sIF90bywgbm9kZXMpIHtcbiAgICAgICAgcmV0dXJuIEhlaWdodE1hcC5vZihub2Rlcyk7XG4gICAgfVxuICAgIC8vIEFnYWluLCB0aGVzZSBhcmUgYmFzZSBjYXNlcywgYW5kIGFyZSBvdmVycmlkZGVuIGZvciBicmFuY2ggYW5kIGdhcCBub2Rlcy5cbiAgICBkZWNvbXBvc2VMZWZ0KF90bywgcmVzdWx0KSB7IHJlc3VsdC5wdXNoKHRoaXMpOyB9XG4gICAgZGVjb21wb3NlUmlnaHQoX2Zyb20sIHJlc3VsdCkgeyByZXN1bHQucHVzaCh0aGlzKTsgfVxuICAgIGFwcGx5Q2hhbmdlcyhkZWNvcmF0aW9ucywgb2xkRG9jLCBvcmFjbGUsIGNoYW5nZXMpIHtcbiAgICAgICAgbGV0IG1lID0gdGhpcywgZG9jID0gb3JhY2xlLmRvYztcbiAgICAgICAgZm9yIChsZXQgaSA9IGNoYW5nZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCB7IGZyb21BLCB0b0EsIGZyb21CLCB0b0IgfSA9IGNoYW5nZXNbaV07XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBtZS5saW5lQXQoZnJvbUEsIFF1ZXJ5VHlwZS5CeVBvc05vSGVpZ2h0LCBvcmFjbGUuc2V0RG9jKG9sZERvYyksIDAsIDApO1xuICAgICAgICAgICAgbGV0IGVuZCA9IHN0YXJ0LnRvID49IHRvQSA/IHN0YXJ0IDogbWUubGluZUF0KHRvQSwgUXVlcnlUeXBlLkJ5UG9zTm9IZWlnaHQsIG9yYWNsZSwgMCwgMCk7XG4gICAgICAgICAgICB0b0IgKz0gZW5kLnRvIC0gdG9BO1xuICAgICAgICAgICAgdG9BID0gZW5kLnRvO1xuICAgICAgICAgICAgd2hpbGUgKGkgPiAwICYmIHN0YXJ0LmZyb20gPD0gY2hhbmdlc1tpIC0gMV0udG9BKSB7XG4gICAgICAgICAgICAgICAgZnJvbUEgPSBjaGFuZ2VzW2kgLSAxXS5mcm9tQTtcbiAgICAgICAgICAgICAgICBmcm9tQiA9IGNoYW5nZXNbaSAtIDFdLmZyb21CO1xuICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbUEgPCBzdGFydC5mcm9tKVxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IG1lLmxpbmVBdChmcm9tQSwgUXVlcnlUeXBlLkJ5UG9zTm9IZWlnaHQsIG9yYWNsZSwgMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmcm9tQiArPSBzdGFydC5mcm9tIC0gZnJvbUE7XG4gICAgICAgICAgICBmcm9tQSA9IHN0YXJ0LmZyb207XG4gICAgICAgICAgICBsZXQgbm9kZXMgPSBOb2RlQnVpbGRlci5idWlsZChvcmFjbGUuc2V0RG9jKGRvYyksIGRlY29yYXRpb25zLCBmcm9tQiwgdG9CKTtcbiAgICAgICAgICAgIG1lID0gcmVwbGFjZShtZSwgbWUucmVwbGFjZShmcm9tQSwgdG9BLCBub2RlcykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZS51cGRhdGVIZWlnaHQob3JhY2xlLCAwKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkgeyByZXR1cm4gbmV3IEhlaWdodE1hcFRleHQoMCwgMCwgMCk7IH1cbiAgICAvLyBub2RlcyB1c2VzIG51bGwgdmFsdWVzIHRvIGluZGljYXRlIHRoZSBwb3NpdGlvbiBvZiBsaW5lIGJyZWFrcy5cbiAgICAvLyBUaGVyZSBhcmUgbmV2ZXIgbGluZSBicmVha3MgYXQgdGhlIHN0YXJ0IG9yIGVuZCBvZiB0aGUgYXJyYXksIG9yXG4gICAgLy8gdHdvIGxpbmUgYnJlYWtzIG5leHQgdG8gZWFjaCBvdGhlciwgYW5kIHRoZSBhcnJheSBpc24ndCBhbGxvd2VkXG4gICAgLy8gdG8gYmUgZW1wdHkgKHNhbWUgcmVzdHJpY3Rpb25zIGFzIHJldHVybiB2YWx1ZSBmcm9tIHRoZSBidWlsZGVyKS5cbiAgICBzdGF0aWMgb2Yobm9kZXMpIHtcbiAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA9PSAxKVxuICAgICAgICAgICAgcmV0dXJuIG5vZGVzWzBdO1xuICAgICAgICBsZXQgaSA9IDAsIGogPSBub2Rlcy5sZW5ndGgsIGJlZm9yZSA9IDAsIGFmdGVyID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaWYgKGkgPT0gaikge1xuICAgICAgICAgICAgICAgIGlmIChiZWZvcmUgPiBhZnRlciAqIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNwbGl0ID0gbm9kZXNbaSAtIDFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3BsaXQuYnJlYWspXG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoLS1pLCAxLCBzcGxpdC5sZWZ0LCBudWxsLCBzcGxpdC5yaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzLnNwbGljZSgtLWksIDEsIHNwbGl0LmxlZnQsIHNwbGl0LnJpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgaiArPSAxICsgc3BsaXQuYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZSAtPSBzcGxpdC5zaXplO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhZnRlciA+IGJlZm9yZSAqIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNwbGl0ID0gbm9kZXNbal07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGxpdC5icmVhaylcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzLnNwbGljZShqLCAxLCBzcGxpdC5sZWZ0LCBudWxsLCBzcGxpdC5yaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzLnNwbGljZShqLCAxLCBzcGxpdC5sZWZ0LCBzcGxpdC5yaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGogKz0gMiArIHNwbGl0LmJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBhZnRlciAtPSBzcGxpdC5zaXplO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYmVmb3JlIDwgYWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IG5vZGVzW2krK107XG4gICAgICAgICAgICAgICAgaWYgKG5leHQpXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZSArPSBuZXh0LnNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IG5vZGVzWy0tal07XG4gICAgICAgICAgICAgICAgaWYgKG5leHQpXG4gICAgICAgICAgICAgICAgICAgIGFmdGVyICs9IG5leHQuc2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgYnJrID0gMDtcbiAgICAgICAgaWYgKG5vZGVzW2kgLSAxXSA9PSBudWxsKSB7XG4gICAgICAgICAgICBicmsgPSAxO1xuICAgICAgICAgICAgaS0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGVzW2ldID09IG51bGwpIHtcbiAgICAgICAgICAgIGJyayA9IDE7XG4gICAgICAgICAgICBqKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBIZWlnaHRNYXBCcmFuY2goSGVpZ2h0TWFwLm9mKG5vZGVzLnNsaWNlKDAsIGkpKSwgYnJrLCBIZWlnaHRNYXAub2Yobm9kZXMuc2xpY2UoaikpKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZXBsYWNlKG9sZCwgdmFsKSB7XG4gICAgaWYgKG9sZCA9PSB2YWwpXG4gICAgICAgIHJldHVybiBvbGQ7XG4gICAgaWYgKG9sZC5jb25zdHJ1Y3RvciAhPSB2YWwuY29uc3RydWN0b3IpXG4gICAgICAgIGhlaWdodENoYW5nZUZsYWcgPSB0cnVlO1xuICAgIHJldHVybiB2YWw7XG59XG5IZWlnaHRNYXAucHJvdG90eXBlLnNpemUgPSAxO1xuY29uc3QgU3BhY2VEZWNvID0gLypAX19QVVJFX18qL0RlY29yYXRpb24ucmVwbGFjZSh7fSk7XG5jbGFzcyBIZWlnaHRNYXBCbG9jayBleHRlbmRzIEhlaWdodE1hcCB7XG4gICAgY29uc3RydWN0b3IobGVuZ3RoLCBoZWlnaHQsIGRlY28pIHtcbiAgICAgICAgc3VwZXIobGVuZ3RoLCBoZWlnaHQpO1xuICAgICAgICB0aGlzLmRlY28gPSBkZWNvO1xuICAgICAgICB0aGlzLnNwYWNlQWJvdmUgPSAwO1xuICAgIH1cbiAgICBtYWluQmxvY2sodG9wLCBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9ja0luZm8ob2Zmc2V0LCB0aGlzLmxlbmd0aCwgdG9wICsgdGhpcy5zcGFjZUFib3ZlLCB0aGlzLmhlaWdodCAtIHRoaXMuc3BhY2VBYm92ZSwgdGhpcy5kZWNvIHx8IDApO1xuICAgIH1cbiAgICBibG9ja0F0KGhlaWdodCwgX29yYWNsZSwgdG9wLCBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2VBYm92ZSAmJiBoZWlnaHQgPCB0b3AgKyB0aGlzLnNwYWNlQWJvdmUgPyBuZXcgQmxvY2tJbmZvKG9mZnNldCwgMCwgdG9wLCB0aGlzLnNwYWNlQWJvdmUsIFNwYWNlRGVjbylcbiAgICAgICAgICAgIDogdGhpcy5tYWluQmxvY2sodG9wLCBvZmZzZXQpO1xuICAgIH1cbiAgICBsaW5lQXQoX3ZhbHVlLCBfdHlwZSwgb3JhY2xlLCB0b3AsIG9mZnNldCkge1xuICAgICAgICBsZXQgbWFpbiA9IHRoaXMubWFpbkJsb2NrKHRvcCwgb2Zmc2V0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2VBYm92ZSA/IHRoaXMuYmxvY2tBdCgwLCBvcmFjbGUsIHRvcCwgb2Zmc2V0KS5qb2luKG1haW4pIDogbWFpbjtcbiAgICB9XG4gICAgZm9yRWFjaExpbmUoZnJvbSwgdG8sIG9yYWNsZSwgdG9wLCBvZmZzZXQsIGYpIHtcbiAgICAgICAgaWYgKGZyb20gPD0gb2Zmc2V0ICsgdGhpcy5sZW5ndGggJiYgdG8gPj0gb2Zmc2V0KVxuICAgICAgICAgICAgZih0aGlzLmxpbmVBdCgwLCBRdWVyeVR5cGUuQnlQb3MsIG9yYWNsZSwgdG9wLCBvZmZzZXQpKTtcbiAgICB9XG4gICAgc2V0TWVhc3VyZWRIZWlnaHQobWVhc3VyZWQpIHtcbiAgICAgICAgbGV0IG5leHQgPSBtZWFzdXJlZC5oZWlnaHRzW21lYXN1cmVkLmluZGV4KytdO1xuICAgICAgICBpZiAobmV4dCA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3BhY2VBYm92ZSA9IC1uZXh0O1xuICAgICAgICAgICAgbmV4dCA9IG1lYXN1cmVkLmhlaWdodHNbbWVhc3VyZWQuaW5kZXgrK107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNwYWNlQWJvdmUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0SGVpZ2h0KG5leHQpO1xuICAgIH1cbiAgICB1cGRhdGVIZWlnaHQob3JhY2xlLCBvZmZzZXQgPSAwLCBfZm9yY2UgPSBmYWxzZSwgbWVhc3VyZWQpIHtcbiAgICAgICAgaWYgKG1lYXN1cmVkICYmIG1lYXN1cmVkLmZyb20gPD0gb2Zmc2V0ICYmIG1lYXN1cmVkLm1vcmUpXG4gICAgICAgICAgICB0aGlzLnNldE1lYXN1cmVkSGVpZ2h0KG1lYXN1cmVkKTtcbiAgICAgICAgdGhpcy5vdXRkYXRlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiBgYmxvY2soJHt0aGlzLmxlbmd0aH0pYDsgfVxufVxuY2xhc3MgSGVpZ2h0TWFwVGV4dCBleHRlbmRzIEhlaWdodE1hcEJsb2NrIHtcbiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIGhlaWdodCwgYWJvdmUpIHtcbiAgICAgICAgc3VwZXIobGVuZ3RoLCBoZWlnaHQsIG51bGwpO1xuICAgICAgICB0aGlzLmNvbGxhcHNlZCA9IDA7IC8vIEFtb3VudCBvZiBjb2xsYXBzZWQgY29udGVudCBpbiB0aGUgbGluZVxuICAgICAgICB0aGlzLndpZGdldEhlaWdodCA9IDA7IC8vIE1heGltdW0gaW5saW5lIHdpZGdldCBoZWlnaHRcbiAgICAgICAgdGhpcy5icmVha3MgPSAwOyAvLyBOdW1iZXIgb2Ygd2lkZ2V0LWludHJvZHVjZWQgbGluZSBicmVha3Mgb24gdGhlIGxpbmVcbiAgICAgICAgdGhpcy5zcGFjZUFib3ZlID0gYWJvdmU7XG4gICAgfVxuICAgIG1haW5CbG9jayh0b3AsIG9mZnNldCkge1xuICAgICAgICByZXR1cm4gbmV3IEJsb2NrSW5mbyhvZmZzZXQsIHRoaXMubGVuZ3RoLCB0b3AgKyB0aGlzLnNwYWNlQWJvdmUsIHRoaXMuaGVpZ2h0IC0gdGhpcy5zcGFjZUFib3ZlLCB0aGlzLmJyZWFrcyk7XG4gICAgfVxuICAgIHJlcGxhY2UoX2Zyb20sIF90bywgbm9kZXMpIHtcbiAgICAgICAgbGV0IG5vZGUgPSBub2Rlc1swXTtcbiAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA9PSAxICYmIChub2RlIGluc3RhbmNlb2YgSGVpZ2h0TWFwVGV4dCB8fCBub2RlIGluc3RhbmNlb2YgSGVpZ2h0TWFwR2FwICYmIChub2RlLmZsYWdzICYgNCAvKiBGbGFnLlNpbmdsZUxpbmUgKi8pKSAmJlxuICAgICAgICAgICAgTWF0aC5hYnModGhpcy5sZW5ndGggLSBub2RlLmxlbmd0aCkgPCAxMCkge1xuICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIZWlnaHRNYXBHYXApXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5ldyBIZWlnaHRNYXBUZXh0KG5vZGUubGVuZ3RoLCB0aGlzLmhlaWdodCwgdGhpcy5zcGFjZUFib3ZlKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBub2RlLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICAgICAgICAgICAgaWYgKCF0aGlzLm91dGRhdGVkKVxuICAgICAgICAgICAgICAgIG5vZGUub3V0ZGF0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIEhlaWdodE1hcC5vZihub2Rlcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlSGVpZ2h0KG9yYWNsZSwgb2Zmc2V0ID0gMCwgZm9yY2UgPSBmYWxzZSwgbWVhc3VyZWQpIHtcbiAgICAgICAgaWYgKG1lYXN1cmVkICYmIG1lYXN1cmVkLmZyb20gPD0gb2Zmc2V0ICYmIG1lYXN1cmVkLm1vcmUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TWVhc3VyZWRIZWlnaHQobWVhc3VyZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZvcmNlIHx8IHRoaXMub3V0ZGF0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3BhY2VBYm92ZSA9IDA7XG4gICAgICAgICAgICB0aGlzLnNldEhlaWdodChNYXRoLm1heCh0aGlzLndpZGdldEhlaWdodCwgb3JhY2xlLmhlaWdodEZvckxpbmUodGhpcy5sZW5ndGggLSB0aGlzLmNvbGxhcHNlZCkpICtcbiAgICAgICAgICAgICAgICB0aGlzLmJyZWFrcyAqIG9yYWNsZS5saW5lSGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm91dGRhdGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBsaW5lKCR7dGhpcy5sZW5ndGh9JHt0aGlzLmNvbGxhcHNlZCA/IC10aGlzLmNvbGxhcHNlZCA6IFwiXCJ9JHt0aGlzLndpZGdldEhlaWdodCA/IFwiOlwiICsgdGhpcy53aWRnZXRIZWlnaHQgOiBcIlwifSlgO1xuICAgIH1cbn1cbmNsYXNzIEhlaWdodE1hcEdhcCBleHRlbmRzIEhlaWdodE1hcCB7XG4gICAgY29uc3RydWN0b3IobGVuZ3RoKSB7IHN1cGVyKGxlbmd0aCwgMCk7IH1cbiAgICBoZWlnaHRNZXRyaWNzKG9yYWNsZSwgb2Zmc2V0KSB7XG4gICAgICAgIGxldCBmaXJzdExpbmUgPSBvcmFjbGUuZG9jLmxpbmVBdChvZmZzZXQpLm51bWJlciwgbGFzdExpbmUgPSBvcmFjbGUuZG9jLmxpbmVBdChvZmZzZXQgKyB0aGlzLmxlbmd0aCkubnVtYmVyO1xuICAgICAgICBsZXQgbGluZXMgPSBsYXN0TGluZSAtIGZpcnN0TGluZSArIDE7XG4gICAgICAgIGxldCBwZXJMaW5lLCBwZXJDaGFyID0gMDtcbiAgICAgICAgaWYgKG9yYWNsZS5saW5lV3JhcHBpbmcpIHtcbiAgICAgICAgICAgIGxldCB0b3RhbFBlckxpbmUgPSBNYXRoLm1pbih0aGlzLmhlaWdodCwgb3JhY2xlLmxpbmVIZWlnaHQgKiBsaW5lcyk7XG4gICAgICAgICAgICBwZXJMaW5lID0gdG90YWxQZXJMaW5lIC8gbGluZXM7XG4gICAgICAgICAgICBpZiAodGhpcy5sZW5ndGggPiBsaW5lcyArIDEpXG4gICAgICAgICAgICAgICAgcGVyQ2hhciA9ICh0aGlzLmhlaWdodCAtIHRvdGFsUGVyTGluZSkgLyAodGhpcy5sZW5ndGggLSBsaW5lcyAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVyTGluZSA9IHRoaXMuaGVpZ2h0IC8gbGluZXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZmlyc3RMaW5lLCBsYXN0TGluZSwgcGVyTGluZSwgcGVyQ2hhciB9O1xuICAgIH1cbiAgICBibG9ja0F0KGhlaWdodCwgb3JhY2xlLCB0b3AsIG9mZnNldCkge1xuICAgICAgICBsZXQgeyBmaXJzdExpbmUsIGxhc3RMaW5lLCBwZXJMaW5lLCBwZXJDaGFyIH0gPSB0aGlzLmhlaWdodE1ldHJpY3Mob3JhY2xlLCBvZmZzZXQpO1xuICAgICAgICBpZiAob3JhY2xlLmxpbmVXcmFwcGluZykge1xuICAgICAgICAgICAgbGV0IGd1ZXNzID0gb2Zmc2V0ICsgKGhlaWdodCA8IG9yYWNsZS5saW5lSGVpZ2h0ID8gMFxuICAgICAgICAgICAgICAgIDogTWF0aC5yb3VuZChNYXRoLm1heCgwLCBNYXRoLm1pbigxLCAoaGVpZ2h0IC0gdG9wKSAvIHRoaXMuaGVpZ2h0KSkgKiB0aGlzLmxlbmd0aCkpO1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBvcmFjbGUuZG9jLmxpbmVBdChndWVzcyksIGxpbmVIZWlnaHQgPSBwZXJMaW5lICsgbGluZS5sZW5ndGggKiBwZXJDaGFyO1xuICAgICAgICAgICAgbGV0IGxpbmVUb3AgPSBNYXRoLm1heCh0b3AsIGhlaWdodCAtIGxpbmVIZWlnaHQgLyAyKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvY2tJbmZvKGxpbmUuZnJvbSwgbGluZS5sZW5ndGgsIGxpbmVUb3AsIGxpbmVIZWlnaHQsIDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihsYXN0TGluZSAtIGZpcnN0TGluZSwgTWF0aC5mbG9vcigoaGVpZ2h0IC0gdG9wKSAvIHBlckxpbmUpKSk7XG4gICAgICAgICAgICBsZXQgeyBmcm9tLCBsZW5ndGggfSA9IG9yYWNsZS5kb2MubGluZShmaXJzdExpbmUgKyBsaW5lKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvY2tJbmZvKGZyb20sIGxlbmd0aCwgdG9wICsgcGVyTGluZSAqIGxpbmUsIHBlckxpbmUsIDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxpbmVBdCh2YWx1ZSwgdHlwZSwgb3JhY2xlLCB0b3AsIG9mZnNldCkge1xuICAgICAgICBpZiAodHlwZSA9PSBRdWVyeVR5cGUuQnlIZWlnaHQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ibG9ja0F0KHZhbHVlLCBvcmFjbGUsIHRvcCwgb2Zmc2V0KTtcbiAgICAgICAgaWYgKHR5cGUgPT0gUXVlcnlUeXBlLkJ5UG9zTm9IZWlnaHQpIHtcbiAgICAgICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSBvcmFjbGUuZG9jLmxpbmVBdCh2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJsb2NrSW5mbyhmcm9tLCB0byAtIGZyb20sIDAsIDAsIDApO1xuICAgICAgICB9XG4gICAgICAgIGxldCB7IGZpcnN0TGluZSwgcGVyTGluZSwgcGVyQ2hhciB9ID0gdGhpcy5oZWlnaHRNZXRyaWNzKG9yYWNsZSwgb2Zmc2V0KTtcbiAgICAgICAgbGV0IGxpbmUgPSBvcmFjbGUuZG9jLmxpbmVBdCh2YWx1ZSksIGxpbmVIZWlnaHQgPSBwZXJMaW5lICsgbGluZS5sZW5ndGggKiBwZXJDaGFyO1xuICAgICAgICBsZXQgbGluZXNBYm92ZSA9IGxpbmUubnVtYmVyIC0gZmlyc3RMaW5lO1xuICAgICAgICBsZXQgbGluZVRvcCA9IHRvcCArIHBlckxpbmUgKiBsaW5lc0Fib3ZlICsgcGVyQ2hhciAqIChsaW5lLmZyb20gLSBvZmZzZXQgLSBsaW5lc0Fib3ZlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9ja0luZm8obGluZS5mcm9tLCBsaW5lLmxlbmd0aCwgTWF0aC5tYXgodG9wLCBNYXRoLm1pbihsaW5lVG9wLCB0b3AgKyB0aGlzLmhlaWdodCAtIGxpbmVIZWlnaHQpKSwgbGluZUhlaWdodCwgMCk7XG4gICAgfVxuICAgIGZvckVhY2hMaW5lKGZyb20sIHRvLCBvcmFjbGUsIHRvcCwgb2Zmc2V0LCBmKSB7XG4gICAgICAgIGZyb20gPSBNYXRoLm1heChmcm9tLCBvZmZzZXQpO1xuICAgICAgICB0byA9IE1hdGgubWluKHRvLCBvZmZzZXQgKyB0aGlzLmxlbmd0aCk7XG4gICAgICAgIGxldCB7IGZpcnN0TGluZSwgcGVyTGluZSwgcGVyQ2hhciB9ID0gdGhpcy5oZWlnaHRNZXRyaWNzKG9yYWNsZSwgb2Zmc2V0KTtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gZnJvbSwgbGluZVRvcCA9IHRvcDsgcG9zIDw9IHRvOykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBvcmFjbGUuZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICAgICAgaWYgKHBvcyA9PSBmcm9tKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxpbmVzQWJvdmUgPSBsaW5lLm51bWJlciAtIGZpcnN0TGluZTtcbiAgICAgICAgICAgICAgICBsaW5lVG9wICs9IHBlckxpbmUgKiBsaW5lc0Fib3ZlICsgcGVyQ2hhciAqIChmcm9tIC0gb2Zmc2V0IC0gbGluZXNBYm92ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbGluZUhlaWdodCA9IHBlckxpbmUgKyBwZXJDaGFyICogbGluZS5sZW5ndGg7XG4gICAgICAgICAgICBmKG5ldyBCbG9ja0luZm8obGluZS5mcm9tLCBsaW5lLmxlbmd0aCwgbGluZVRvcCwgbGluZUhlaWdodCwgMCkpO1xuICAgICAgICAgICAgbGluZVRvcCArPSBsaW5lSGVpZ2h0O1xuICAgICAgICAgICAgcG9zID0gbGluZS50byArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVwbGFjZShmcm9tLCB0bywgbm9kZXMpIHtcbiAgICAgICAgbGV0IGFmdGVyID0gdGhpcy5sZW5ndGggLSB0bztcbiAgICAgICAgaWYgKGFmdGVyID4gMCkge1xuICAgICAgICAgICAgbGV0IGxhc3QgPSBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmIChsYXN0IGluc3RhbmNlb2YgSGVpZ2h0TWFwR2FwKVxuICAgICAgICAgICAgICAgIG5vZGVzW25vZGVzLmxlbmd0aCAtIDFdID0gbmV3IEhlaWdodE1hcEdhcChsYXN0Lmxlbmd0aCArIGFmdGVyKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG51bGwsIG5ldyBIZWlnaHRNYXBHYXAoYWZ0ZXIgLSAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZyb20gPiAwKSB7XG4gICAgICAgICAgICBsZXQgZmlyc3QgPSBub2Rlc1swXTtcbiAgICAgICAgICAgIGlmIChmaXJzdCBpbnN0YW5jZW9mIEhlaWdodE1hcEdhcClcbiAgICAgICAgICAgICAgICBub2Rlc1swXSA9IG5ldyBIZWlnaHRNYXBHYXAoZnJvbSArIGZpcnN0Lmxlbmd0aCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbm9kZXMudW5zaGlmdChuZXcgSGVpZ2h0TWFwR2FwKGZyb20gLSAxKSwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEhlaWdodE1hcC5vZihub2Rlcyk7XG4gICAgfVxuICAgIGRlY29tcG9zZUxlZnQodG8sIHJlc3VsdCkge1xuICAgICAgICByZXN1bHQucHVzaChuZXcgSGVpZ2h0TWFwR2FwKHRvIC0gMSksIG51bGwpO1xuICAgIH1cbiAgICBkZWNvbXBvc2VSaWdodChmcm9tLCByZXN1bHQpIHtcbiAgICAgICAgcmVzdWx0LnB1c2gobnVsbCwgbmV3IEhlaWdodE1hcEdhcCh0aGlzLmxlbmd0aCAtIGZyb20gLSAxKSk7XG4gICAgfVxuICAgIHVwZGF0ZUhlaWdodChvcmFjbGUsIG9mZnNldCA9IDAsIGZvcmNlID0gZmFsc2UsIG1lYXN1cmVkKSB7XG4gICAgICAgIGxldCBlbmQgPSBvZmZzZXQgKyB0aGlzLmxlbmd0aDtcbiAgICAgICAgaWYgKG1lYXN1cmVkICYmIG1lYXN1cmVkLmZyb20gPD0gb2Zmc2V0ICsgdGhpcy5sZW5ndGggJiYgbWVhc3VyZWQubW9yZSkge1xuICAgICAgICAgICAgLy8gRmlsbCBpbiBwYXJ0IG9mIHRoaXMgZ2FwIHdpdGggbWVhc3VyZWQgbGluZXMuIFdlIGtub3cgdGhlcmVcbiAgICAgICAgICAgIC8vIGNhbid0IGJlIHdpZGdldHMgb3IgY29sbGFwc2VkIHJhbmdlcyBpbiB0aG9zZSBsaW5lcywgYmVjYXVzZVxuICAgICAgICAgICAgLy8gdGhleSB3b3VsZCBhbHJlYWR5IGhhdmUgYmVlbiBhZGRlZCB0byB0aGUgaGVpZ2h0bWFwIChnYXBzXG4gICAgICAgICAgICAvLyBvbmx5IGNvbnRhaW4gcGxhaW4gdGV4dCkuXG4gICAgICAgICAgICBsZXQgbm9kZXMgPSBbXSwgcG9zID0gTWF0aC5tYXgob2Zmc2V0LCBtZWFzdXJlZC5mcm9tKSwgc2luZ2xlSGVpZ2h0ID0gLTE7XG4gICAgICAgICAgICBpZiAobWVhc3VyZWQuZnJvbSA+IG9mZnNldClcbiAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG5ldyBIZWlnaHRNYXBHYXAobWVhc3VyZWQuZnJvbSAtIG9mZnNldCAtIDEpLnVwZGF0ZUhlaWdodChvcmFjbGUsIG9mZnNldCkpO1xuICAgICAgICAgICAgd2hpbGUgKHBvcyA8PSBlbmQgJiYgbWVhc3VyZWQubW9yZSkge1xuICAgICAgICAgICAgICAgIGxldCBsZW4gPSBvcmFjbGUuZG9jLmxpbmVBdChwb3MpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAobm9kZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG51bGwpO1xuICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSBtZWFzdXJlZC5oZWlnaHRzW21lYXN1cmVkLmluZGV4KytdLCBhYm92ZSA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGhlaWdodCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYWJvdmUgPSAtaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSBtZWFzdXJlZC5oZWlnaHRzW21lYXN1cmVkLmluZGV4KytdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2luZ2xlSGVpZ2h0ID09IC0xKVxuICAgICAgICAgICAgICAgICAgICBzaW5nbGVIZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoTWF0aC5hYnMoaGVpZ2h0IC0gc2luZ2xlSGVpZ2h0KSA+PSBFcHNpbG9uKVxuICAgICAgICAgICAgICAgICAgICBzaW5nbGVIZWlnaHQgPSAtMjtcbiAgICAgICAgICAgICAgICBsZXQgbGluZSA9IG5ldyBIZWlnaHRNYXBUZXh0KGxlbiwgaGVpZ2h0LCBhYm92ZSk7XG4gICAgICAgICAgICAgICAgbGluZS5vdXRkYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICAgICAgcG9zICs9IGxlbiArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9zIDw9IGVuZClcbiAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG51bGwsIG5ldyBIZWlnaHRNYXBHYXAoZW5kIC0gcG9zKS51cGRhdGVIZWlnaHQob3JhY2xlLCBwb3MpKTtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBIZWlnaHRNYXAub2Yobm9kZXMpO1xuICAgICAgICAgICAgaWYgKHNpbmdsZUhlaWdodCA8IDAgfHwgTWF0aC5hYnMocmVzdWx0LmhlaWdodCAtIHRoaXMuaGVpZ2h0KSA+PSBFcHNpbG9uIHx8XG4gICAgICAgICAgICAgICAgTWF0aC5hYnMoc2luZ2xlSGVpZ2h0IC0gdGhpcy5oZWlnaHRNZXRyaWNzKG9yYWNsZSwgb2Zmc2V0KS5wZXJMaW5lKSA+PSBFcHNpbG9uKVxuICAgICAgICAgICAgICAgIGhlaWdodENoYW5nZUZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2UodGhpcywgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmb3JjZSB8fCB0aGlzLm91dGRhdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldEhlaWdodChvcmFjbGUuaGVpZ2h0Rm9yR2FwKG9mZnNldCwgb2Zmc2V0ICsgdGhpcy5sZW5ndGgpKTtcbiAgICAgICAgICAgIHRoaXMub3V0ZGF0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiBgZ2FwKCR7dGhpcy5sZW5ndGh9KWA7IH1cbn1cbmNsYXNzIEhlaWdodE1hcEJyYW5jaCBleHRlbmRzIEhlaWdodE1hcCB7XG4gICAgY29uc3RydWN0b3IobGVmdCwgYnJrLCByaWdodCkge1xuICAgICAgICBzdXBlcihsZWZ0Lmxlbmd0aCArIGJyayArIHJpZ2h0Lmxlbmd0aCwgbGVmdC5oZWlnaHQgKyByaWdodC5oZWlnaHQsIGJyayB8IChsZWZ0Lm91dGRhdGVkIHx8IHJpZ2h0Lm91dGRhdGVkID8gMiAvKiBGbGFnLk91dGRhdGVkICovIDogMCkpO1xuICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0O1xuICAgICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7XG4gICAgICAgIHRoaXMuc2l6ZSA9IGxlZnQuc2l6ZSArIHJpZ2h0LnNpemU7XG4gICAgfVxuICAgIGdldCBicmVhaygpIHsgcmV0dXJuIHRoaXMuZmxhZ3MgJiAxIC8qIEZsYWcuQnJlYWsgKi87IH1cbiAgICBibG9ja0F0KGhlaWdodCwgb3JhY2xlLCB0b3AsIG9mZnNldCkge1xuICAgICAgICBsZXQgbWlkID0gdG9wICsgdGhpcy5sZWZ0LmhlaWdodDtcbiAgICAgICAgcmV0dXJuIGhlaWdodCA8IG1pZCA/IHRoaXMubGVmdC5ibG9ja0F0KGhlaWdodCwgb3JhY2xlLCB0b3AsIG9mZnNldClcbiAgICAgICAgICAgIDogdGhpcy5yaWdodC5ibG9ja0F0KGhlaWdodCwgb3JhY2xlLCBtaWQsIG9mZnNldCArIHRoaXMubGVmdC5sZW5ndGggKyB0aGlzLmJyZWFrKTtcbiAgICB9XG4gICAgbGluZUF0KHZhbHVlLCB0eXBlLCBvcmFjbGUsIHRvcCwgb2Zmc2V0KSB7XG4gICAgICAgIGxldCByaWdodFRvcCA9IHRvcCArIHRoaXMubGVmdC5oZWlnaHQsIHJpZ2h0T2Zmc2V0ID0gb2Zmc2V0ICsgdGhpcy5sZWZ0Lmxlbmd0aCArIHRoaXMuYnJlYWs7XG4gICAgICAgIGxldCBsZWZ0ID0gdHlwZSA9PSBRdWVyeVR5cGUuQnlIZWlnaHQgPyB2YWx1ZSA8IHJpZ2h0VG9wIDogdmFsdWUgPCByaWdodE9mZnNldDtcbiAgICAgICAgbGV0IGJhc2UgPSBsZWZ0ID8gdGhpcy5sZWZ0LmxpbmVBdCh2YWx1ZSwgdHlwZSwgb3JhY2xlLCB0b3AsIG9mZnNldClcbiAgICAgICAgICAgIDogdGhpcy5yaWdodC5saW5lQXQodmFsdWUsIHR5cGUsIG9yYWNsZSwgcmlnaHRUb3AsIHJpZ2h0T2Zmc2V0KTtcbiAgICAgICAgaWYgKHRoaXMuYnJlYWsgfHwgKGxlZnQgPyBiYXNlLnRvIDwgcmlnaHRPZmZzZXQgOiBiYXNlLmZyb20gPiByaWdodE9mZnNldCkpXG4gICAgICAgICAgICByZXR1cm4gYmFzZTtcbiAgICAgICAgbGV0IHN1YlF1ZXJ5ID0gdHlwZSA9PSBRdWVyeVR5cGUuQnlQb3NOb0hlaWdodCA/IFF1ZXJ5VHlwZS5CeVBvc05vSGVpZ2h0IDogUXVlcnlUeXBlLkJ5UG9zO1xuICAgICAgICBpZiAobGVmdClcbiAgICAgICAgICAgIHJldHVybiBiYXNlLmpvaW4odGhpcy5yaWdodC5saW5lQXQocmlnaHRPZmZzZXQsIHN1YlF1ZXJ5LCBvcmFjbGUsIHJpZ2h0VG9wLCByaWdodE9mZnNldCkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmxpbmVBdChyaWdodE9mZnNldCwgc3ViUXVlcnksIG9yYWNsZSwgdG9wLCBvZmZzZXQpLmpvaW4oYmFzZSk7XG4gICAgfVxuICAgIGZvckVhY2hMaW5lKGZyb20sIHRvLCBvcmFjbGUsIHRvcCwgb2Zmc2V0LCBmKSB7XG4gICAgICAgIGxldCByaWdodFRvcCA9IHRvcCArIHRoaXMubGVmdC5oZWlnaHQsIHJpZ2h0T2Zmc2V0ID0gb2Zmc2V0ICsgdGhpcy5sZWZ0Lmxlbmd0aCArIHRoaXMuYnJlYWs7XG4gICAgICAgIGlmICh0aGlzLmJyZWFrKSB7XG4gICAgICAgICAgICBpZiAoZnJvbSA8IHJpZ2h0T2Zmc2V0KVxuICAgICAgICAgICAgICAgIHRoaXMubGVmdC5mb3JFYWNoTGluZShmcm9tLCB0bywgb3JhY2xlLCB0b3AsIG9mZnNldCwgZik7XG4gICAgICAgICAgICBpZiAodG8gPj0gcmlnaHRPZmZzZXQpXG4gICAgICAgICAgICAgICAgdGhpcy5yaWdodC5mb3JFYWNoTGluZShmcm9tLCB0bywgb3JhY2xlLCByaWdodFRvcCwgcmlnaHRPZmZzZXQsIGYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG1pZCA9IHRoaXMubGluZUF0KHJpZ2h0T2Zmc2V0LCBRdWVyeVR5cGUuQnlQb3MsIG9yYWNsZSwgdG9wLCBvZmZzZXQpO1xuICAgICAgICAgICAgaWYgKGZyb20gPCBtaWQuZnJvbSlcbiAgICAgICAgICAgICAgICB0aGlzLmxlZnQuZm9yRWFjaExpbmUoZnJvbSwgbWlkLmZyb20gLSAxLCBvcmFjbGUsIHRvcCwgb2Zmc2V0LCBmKTtcbiAgICAgICAgICAgIGlmIChtaWQudG8gPj0gZnJvbSAmJiBtaWQuZnJvbSA8PSB0bylcbiAgICAgICAgICAgICAgICBmKG1pZCk7XG4gICAgICAgICAgICBpZiAodG8gPiBtaWQudG8pXG4gICAgICAgICAgICAgICAgdGhpcy5yaWdodC5mb3JFYWNoTGluZShtaWQudG8gKyAxLCB0bywgb3JhY2xlLCByaWdodFRvcCwgcmlnaHRPZmZzZXQsIGYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcGxhY2UoZnJvbSwgdG8sIG5vZGVzKSB7XG4gICAgICAgIGxldCByaWdodFN0YXJ0ID0gdGhpcy5sZWZ0Lmxlbmd0aCArIHRoaXMuYnJlYWs7XG4gICAgICAgIGlmICh0byA8IHJpZ2h0U3RhcnQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlZCh0aGlzLmxlZnQucmVwbGFjZShmcm9tLCB0bywgbm9kZXMpLCB0aGlzLnJpZ2h0KTtcbiAgICAgICAgaWYgKGZyb20gPiB0aGlzLmxlZnQubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZWQodGhpcy5sZWZ0LCB0aGlzLnJpZ2h0LnJlcGxhY2UoZnJvbSAtIHJpZ2h0U3RhcnQsIHRvIC0gcmlnaHRTdGFydCwgbm9kZXMpKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBpZiAoZnJvbSA+IDApXG4gICAgICAgICAgICB0aGlzLmRlY29tcG9zZUxlZnQoZnJvbSwgcmVzdWx0KTtcbiAgICAgICAgbGV0IGxlZnQgPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBub2RlIG9mIG5vZGVzKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9kZSk7XG4gICAgICAgIGlmIChmcm9tID4gMClcbiAgICAgICAgICAgIG1lcmdlR2FwcyhyZXN1bHQsIGxlZnQgLSAxKTtcbiAgICAgICAgaWYgKHRvIDwgdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCByaWdodCA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLmRlY29tcG9zZVJpZ2h0KHRvLCByZXN1bHQpO1xuICAgICAgICAgICAgbWVyZ2VHYXBzKHJlc3VsdCwgcmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBIZWlnaHRNYXAub2YocmVzdWx0KTtcbiAgICB9XG4gICAgZGVjb21wb3NlTGVmdCh0bywgcmVzdWx0KSB7XG4gICAgICAgIGxldCBsZWZ0ID0gdGhpcy5sZWZ0Lmxlbmd0aDtcbiAgICAgICAgaWYgKHRvIDw9IGxlZnQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmRlY29tcG9zZUxlZnQodG8sIHJlc3VsdCk7XG4gICAgICAgIHJlc3VsdC5wdXNoKHRoaXMubGVmdCk7XG4gICAgICAgIGlmICh0aGlzLmJyZWFrKSB7XG4gICAgICAgICAgICBsZWZ0Kys7XG4gICAgICAgICAgICBpZiAodG8gPj0gbGVmdClcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG8gPiBsZWZ0KVxuICAgICAgICAgICAgdGhpcy5yaWdodC5kZWNvbXBvc2VMZWZ0KHRvIC0gbGVmdCwgcmVzdWx0KTtcbiAgICB9XG4gICAgZGVjb21wb3NlUmlnaHQoZnJvbSwgcmVzdWx0KSB7XG4gICAgICAgIGxldCBsZWZ0ID0gdGhpcy5sZWZ0Lmxlbmd0aCwgcmlnaHQgPSBsZWZ0ICsgdGhpcy5icmVhaztcbiAgICAgICAgaWYgKGZyb20gPj0gcmlnaHQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5kZWNvbXBvc2VSaWdodChmcm9tIC0gcmlnaHQsIHJlc3VsdCk7XG4gICAgICAgIGlmIChmcm9tIDwgbGVmdClcbiAgICAgICAgICAgIHRoaXMubGVmdC5kZWNvbXBvc2VSaWdodChmcm9tLCByZXN1bHQpO1xuICAgICAgICBpZiAodGhpcy5icmVhayAmJiBmcm9tIDwgcmlnaHQpXG4gICAgICAgICAgICByZXN1bHQucHVzaChudWxsKTtcbiAgICAgICAgcmVzdWx0LnB1c2godGhpcy5yaWdodCk7XG4gICAgfVxuICAgIGJhbGFuY2VkKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIGlmIChsZWZ0LnNpemUgPiAyICogcmlnaHQuc2l6ZSB8fCByaWdodC5zaXplID4gMiAqIGxlZnQuc2l6ZSlcbiAgICAgICAgICAgIHJldHVybiBIZWlnaHRNYXAub2YodGhpcy5icmVhayA/IFtsZWZ0LCBudWxsLCByaWdodF0gOiBbbGVmdCwgcmlnaHRdKTtcbiAgICAgICAgdGhpcy5sZWZ0ID0gcmVwbGFjZSh0aGlzLmxlZnQsIGxlZnQpO1xuICAgICAgICB0aGlzLnJpZ2h0ID0gcmVwbGFjZSh0aGlzLnJpZ2h0LCByaWdodCk7XG4gICAgICAgIHRoaXMuc2V0SGVpZ2h0KGxlZnQuaGVpZ2h0ICsgcmlnaHQuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5vdXRkYXRlZCA9IGxlZnQub3V0ZGF0ZWQgfHwgcmlnaHQub3V0ZGF0ZWQ7XG4gICAgICAgIHRoaXMuc2l6ZSA9IGxlZnQuc2l6ZSArIHJpZ2h0LnNpemU7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVmdC5sZW5ndGggKyB0aGlzLmJyZWFrICsgcmlnaHQubGVuZ3RoO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdXBkYXRlSGVpZ2h0KG9yYWNsZSwgb2Zmc2V0ID0gMCwgZm9yY2UgPSBmYWxzZSwgbWVhc3VyZWQpIHtcbiAgICAgICAgbGV0IHsgbGVmdCwgcmlnaHQgfSA9IHRoaXMsIHJpZ2h0U3RhcnQgPSBvZmZzZXQgKyBsZWZ0Lmxlbmd0aCArIHRoaXMuYnJlYWssIHJlYmFsYW5jZSA9IG51bGw7XG4gICAgICAgIGlmIChtZWFzdXJlZCAmJiBtZWFzdXJlZC5mcm9tIDw9IG9mZnNldCArIGxlZnQubGVuZ3RoICYmIG1lYXN1cmVkLm1vcmUpXG4gICAgICAgICAgICByZWJhbGFuY2UgPSBsZWZ0ID0gbGVmdC51cGRhdGVIZWlnaHQob3JhY2xlLCBvZmZzZXQsIGZvcmNlLCBtZWFzdXJlZCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxlZnQudXBkYXRlSGVpZ2h0KG9yYWNsZSwgb2Zmc2V0LCBmb3JjZSk7XG4gICAgICAgIGlmIChtZWFzdXJlZCAmJiBtZWFzdXJlZC5mcm9tIDw9IHJpZ2h0U3RhcnQgKyByaWdodC5sZW5ndGggJiYgbWVhc3VyZWQubW9yZSlcbiAgICAgICAgICAgIHJlYmFsYW5jZSA9IHJpZ2h0ID0gcmlnaHQudXBkYXRlSGVpZ2h0KG9yYWNsZSwgcmlnaHRTdGFydCwgZm9yY2UsIG1lYXN1cmVkKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmlnaHQudXBkYXRlSGVpZ2h0KG9yYWNsZSwgcmlnaHRTdGFydCwgZm9yY2UpO1xuICAgICAgICBpZiAocmViYWxhbmNlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZWQobGVmdCwgcmlnaHQpO1xuICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMubGVmdC5oZWlnaHQgKyB0aGlzLnJpZ2h0LmhlaWdodDtcbiAgICAgICAgdGhpcy5vdXRkYXRlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiB0aGlzLmxlZnQgKyAodGhpcy5icmVhayA/IFwiIFwiIDogXCItXCIpICsgdGhpcy5yaWdodDsgfVxufVxuZnVuY3Rpb24gbWVyZ2VHYXBzKG5vZGVzLCBhcm91bmQpIHtcbiAgICBsZXQgYmVmb3JlLCBhZnRlcjtcbiAgICBpZiAobm9kZXNbYXJvdW5kXSA9PSBudWxsICYmXG4gICAgICAgIChiZWZvcmUgPSBub2Rlc1thcm91bmQgLSAxXSkgaW5zdGFuY2VvZiBIZWlnaHRNYXBHYXAgJiZcbiAgICAgICAgKGFmdGVyID0gbm9kZXNbYXJvdW5kICsgMV0pIGluc3RhbmNlb2YgSGVpZ2h0TWFwR2FwKVxuICAgICAgICBub2Rlcy5zcGxpY2UoYXJvdW5kIC0gMSwgMywgbmV3IEhlaWdodE1hcEdhcChiZWZvcmUubGVuZ3RoICsgMSArIGFmdGVyLmxlbmd0aCkpO1xufVxuY29uc3QgcmVsZXZhbnRXaWRnZXRIZWlnaHQgPSA1O1xuY2xhc3MgTm9kZUJ1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKHBvcywgb3JhY2xlKSB7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLm9yYWNsZSA9IG9yYWNsZTtcbiAgICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgICAgICB0aGlzLmxpbmVTdGFydCA9IC0xO1xuICAgICAgICB0aGlzLmxpbmVFbmQgPSAtMTtcbiAgICAgICAgdGhpcy5jb3ZlcmluZyA9IG51bGw7XG4gICAgICAgIHRoaXMud3JpdHRlblRvID0gcG9zO1xuICAgIH1cbiAgICBnZXQgaXNDb3ZlcmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3ZlcmluZyAmJiB0aGlzLm5vZGVzW3RoaXMubm9kZXMubGVuZ3RoIC0gMV0gPT0gdGhpcy5jb3ZlcmluZztcbiAgICB9XG4gICAgc3BhbihfZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKHRoaXMubGluZVN0YXJ0ID4gLTEpIHtcbiAgICAgICAgICAgIGxldCBlbmQgPSBNYXRoLm1pbih0bywgdGhpcy5saW5lRW5kKSwgbGFzdCA9IHRoaXMubm9kZXNbdGhpcy5ub2Rlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmIChsYXN0IGluc3RhbmNlb2YgSGVpZ2h0TWFwVGV4dClcbiAgICAgICAgICAgICAgICBsYXN0Lmxlbmd0aCArPSBlbmQgLSB0aGlzLnBvcztcbiAgICAgICAgICAgIGVsc2UgaWYgKGVuZCA+IHRoaXMucG9zIHx8ICF0aGlzLmlzQ292ZXJlZClcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV3IEhlaWdodE1hcFRleHQoZW5kIC0gdGhpcy5wb3MsIC0xLCAwKSk7XG4gICAgICAgICAgICB0aGlzLndyaXR0ZW5UbyA9IGVuZDtcbiAgICAgICAgICAgIGlmICh0byA+IGVuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZXMucHVzaChudWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXR0ZW5UbysrO1xuICAgICAgICAgICAgICAgIHRoaXMubGluZVN0YXJ0ID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wb3MgPSB0bztcbiAgICB9XG4gICAgcG9pbnQoZnJvbSwgdG8sIGRlY28pIHtcbiAgICAgICAgaWYgKGZyb20gPCB0byB8fCBkZWNvLmhlaWdodFJlbGV2YW50KSB7XG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gZGVjby53aWRnZXQgPyBkZWNvLndpZGdldC5lc3RpbWF0ZWRIZWlnaHQgOiAwO1xuICAgICAgICAgICAgbGV0IGJyZWFrcyA9IGRlY28ud2lkZ2V0ID8gZGVjby53aWRnZXQubGluZUJyZWFrcyA6IDA7XG4gICAgICAgICAgICBpZiAoaGVpZ2h0IDwgMClcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSB0aGlzLm9yYWNsZS5saW5lSGVpZ2h0O1xuICAgICAgICAgICAgbGV0IGxlbiA9IHRvIC0gZnJvbTtcbiAgICAgICAgICAgIGlmIChkZWNvLmJsb2NrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRCbG9jayhuZXcgSGVpZ2h0TWFwQmxvY2sobGVuLCBoZWlnaHQsIGRlY28pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxlbiB8fCBicmVha3MgfHwgaGVpZ2h0ID49IHJlbGV2YW50V2lkZ2V0SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRMaW5lRGVjbyhoZWlnaHQsIGJyZWFrcywgbGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0byA+IGZyb20pIHtcbiAgICAgICAgICAgIHRoaXMuc3Bhbihmcm9tLCB0byk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubGluZUVuZCA+IC0xICYmIHRoaXMubGluZUVuZCA8IHRoaXMucG9zKVxuICAgICAgICAgICAgdGhpcy5saW5lRW5kID0gdGhpcy5vcmFjbGUuZG9jLmxpbmVBdCh0aGlzLnBvcykudG87XG4gICAgfVxuICAgIGVudGVyTGluZSgpIHtcbiAgICAgICAgaWYgKHRoaXMubGluZVN0YXJ0ID4gLTEpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSB0aGlzLm9yYWNsZS5kb2MubGluZUF0KHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5saW5lU3RhcnQgPSBmcm9tO1xuICAgICAgICB0aGlzLmxpbmVFbmQgPSB0bztcbiAgICAgICAgaWYgKHRoaXMud3JpdHRlblRvIDwgZnJvbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMud3JpdHRlblRvIDwgZnJvbSAtIDEgfHwgdGhpcy5ub2Rlc1t0aGlzLm5vZGVzLmxlbmd0aCAtIDFdID09IG51bGwpXG4gICAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKHRoaXMuYmxhbmtDb250ZW50KHRoaXMud3JpdHRlblRvLCBmcm9tIC0gMSkpO1xuICAgICAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvcyA+IGZyb20pXG4gICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV3IEhlaWdodE1hcFRleHQodGhpcy5wb3MgLSBmcm9tLCAtMSwgMCkpO1xuICAgICAgICB0aGlzLndyaXR0ZW5UbyA9IHRoaXMucG9zO1xuICAgIH1cbiAgICBibGFua0NvbnRlbnQoZnJvbSwgdG8pIHtcbiAgICAgICAgbGV0IGdhcCA9IG5ldyBIZWlnaHRNYXBHYXAodG8gLSBmcm9tKTtcbiAgICAgICAgaWYgKHRoaXMub3JhY2xlLmRvYy5saW5lQXQoZnJvbSkudG8gPT0gdG8pXG4gICAgICAgICAgICBnYXAuZmxhZ3MgfD0gNCAvKiBGbGFnLlNpbmdsZUxpbmUgKi87XG4gICAgICAgIHJldHVybiBnYXA7XG4gICAgfVxuICAgIGVuc3VyZUxpbmUoKSB7XG4gICAgICAgIHRoaXMuZW50ZXJMaW5lKCk7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5ub2Rlcy5sZW5ndGggPyB0aGlzLm5vZGVzW3RoaXMubm9kZXMubGVuZ3RoIC0gMV0gOiBudWxsO1xuICAgICAgICBpZiAobGFzdCBpbnN0YW5jZW9mIEhlaWdodE1hcFRleHQpXG4gICAgICAgICAgICByZXR1cm4gbGFzdDtcbiAgICAgICAgbGV0IGxpbmUgPSBuZXcgSGVpZ2h0TWFwVGV4dCgwLCAtMSwgMCk7XG4gICAgICAgIHRoaXMubm9kZXMucHVzaChsaW5lKTtcbiAgICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfVxuICAgIGFkZEJsb2NrKGJsb2NrKSB7XG4gICAgICAgIHRoaXMuZW50ZXJMaW5lKCk7XG4gICAgICAgIGxldCBkZWNvID0gYmxvY2suZGVjbztcbiAgICAgICAgaWYgKGRlY28gJiYgZGVjby5zdGFydFNpZGUgPiAwICYmICF0aGlzLmlzQ292ZXJlZClcbiAgICAgICAgICAgIHRoaXMuZW5zdXJlTGluZSgpO1xuICAgICAgICB0aGlzLm5vZGVzLnB1c2goYmxvY2spO1xuICAgICAgICB0aGlzLndyaXR0ZW5UbyA9IHRoaXMucG9zID0gdGhpcy5wb3MgKyBibG9jay5sZW5ndGg7XG4gICAgICAgIGlmIChkZWNvICYmIGRlY28uZW5kU2lkZSA+IDApXG4gICAgICAgICAgICB0aGlzLmNvdmVyaW5nID0gYmxvY2s7XG4gICAgfVxuICAgIGFkZExpbmVEZWNvKGhlaWdodCwgYnJlYWtzLCBsZW5ndGgpIHtcbiAgICAgICAgbGV0IGxpbmUgPSB0aGlzLmVuc3VyZUxpbmUoKTtcbiAgICAgICAgbGluZS5sZW5ndGggKz0gbGVuZ3RoO1xuICAgICAgICBsaW5lLmNvbGxhcHNlZCArPSBsZW5ndGg7XG4gICAgICAgIGxpbmUud2lkZ2V0SGVpZ2h0ID0gTWF0aC5tYXgobGluZS53aWRnZXRIZWlnaHQsIGhlaWdodCk7XG4gICAgICAgIGxpbmUuYnJlYWtzICs9IGJyZWFrcztcbiAgICAgICAgdGhpcy53cml0dGVuVG8gPSB0aGlzLnBvcyA9IHRoaXMucG9zICsgbGVuZ3RoO1xuICAgIH1cbiAgICBmaW5pc2goZnJvbSkge1xuICAgICAgICBsZXQgbGFzdCA9IHRoaXMubm9kZXMubGVuZ3RoID09IDAgPyBudWxsIDogdGhpcy5ub2Rlc1t0aGlzLm5vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAodGhpcy5saW5lU3RhcnQgPiAtMSAmJiAhKGxhc3QgaW5zdGFuY2VvZiBIZWlnaHRNYXBUZXh0KSAmJiAhdGhpcy5pc0NvdmVyZWQpXG4gICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV3IEhlaWdodE1hcFRleHQoMCwgLTEsIDApKTtcbiAgICAgICAgZWxzZSBpZiAodGhpcy53cml0dGVuVG8gPCB0aGlzLnBvcyB8fCBsYXN0ID09IG51bGwpXG4gICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2godGhpcy5ibGFua0NvbnRlbnQodGhpcy53cml0dGVuVG8sIHRoaXMucG9zKSk7XG4gICAgICAgIGxldCBwb3MgPSBmcm9tO1xuICAgICAgICBmb3IgKGxldCBub2RlIG9mIHRoaXMubm9kZXMpIHtcbiAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSGVpZ2h0TWFwVGV4dClcbiAgICAgICAgICAgICAgICBub2RlLnVwZGF0ZUhlaWdodCh0aGlzLm9yYWNsZSwgcG9zKTtcbiAgICAgICAgICAgIHBvcyArPSBub2RlID8gbm9kZS5sZW5ndGggOiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVzO1xuICAgIH1cbiAgICAvLyBBbHdheXMgY2FsbGVkIHdpdGggYSByZWdpb24gdGhhdCBvbiBib3RoIHNpZGVzIGVpdGhlciBzdHJldGNoZXNcbiAgICAvLyB0byBhIGxpbmUgYnJlYWsgb3IgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gICAgLy8gVGhlIHJldHVybmVkIGFycmF5IHVzZXMgbnVsbCB0byBpbmRpY2F0ZSBsaW5lIGJyZWFrcywgYnV0IG5ldmVyXG4gICAgLy8gc3RhcnRzIG9yIGVuZHMgaW4gYSBsaW5lIGJyZWFrLCBvciBoYXMgbXVsdGlwbGUgbGluZSBicmVha3MgbmV4dFxuICAgIC8vIHRvIGVhY2ggb3RoZXIuXG4gICAgc3RhdGljIGJ1aWxkKG9yYWNsZSwgZGVjb3JhdGlvbnMsIGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBidWlsZGVyID0gbmV3IE5vZGVCdWlsZGVyKGZyb20sIG9yYWNsZSk7XG4gICAgICAgIFJhbmdlU2V0LnNwYW5zKGRlY29yYXRpb25zLCBmcm9tLCB0bywgYnVpbGRlciwgMCk7XG4gICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaChmcm9tKTtcbiAgICB9XG59XG5mdW5jdGlvbiBoZWlnaHRSZWxldmFudERlY29DaGFuZ2VzKGEsIGIsIGRpZmYpIHtcbiAgICBsZXQgY29tcCA9IG5ldyBEZWNvcmF0aW9uQ29tcGFyYXRvcjtcbiAgICBSYW5nZVNldC5jb21wYXJlKGEsIGIsIGRpZmYsIGNvbXAsIDApO1xuICAgIHJldHVybiBjb21wLmNoYW5nZXM7XG59XG5jbGFzcyBEZWNvcmF0aW9uQ29tcGFyYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IFtdO1xuICAgIH1cbiAgICBjb21wYXJlUmFuZ2UoKSB7IH1cbiAgICBjb21wYXJlUG9pbnQoZnJvbSwgdG8sIGEsIGIpIHtcbiAgICAgICAgaWYgKGZyb20gPCB0byB8fCBhICYmIGEuaGVpZ2h0UmVsZXZhbnQgfHwgYiAmJiBiLmhlaWdodFJlbGV2YW50KVxuICAgICAgICAgICAgYWRkUmFuZ2UoZnJvbSwgdG8sIHRoaXMuY2hhbmdlcywgNSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB2aXNpYmxlUGl4ZWxSYW5nZShkb20sIHBhZGRpbmdUb3ApIHtcbiAgICBsZXQgcmVjdCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgZG9jID0gZG9tLm93bmVyRG9jdW1lbnQsIHdpbiA9IGRvYy5kZWZhdWx0VmlldyB8fCB3aW5kb3c7XG4gICAgbGV0IGxlZnQgPSBNYXRoLm1heCgwLCByZWN0LmxlZnQpLCByaWdodCA9IE1hdGgubWluKHdpbi5pbm5lcldpZHRoLCByZWN0LnJpZ2h0KTtcbiAgICBsZXQgdG9wID0gTWF0aC5tYXgoMCwgcmVjdC50b3ApLCBib3R0b20gPSBNYXRoLm1pbih3aW4uaW5uZXJIZWlnaHQsIHJlY3QuYm90dG9tKTtcbiAgICBmb3IgKGxldCBwYXJlbnQgPSBkb20ucGFyZW50Tm9kZTsgcGFyZW50ICYmIHBhcmVudCAhPSBkb2MuYm9keTspIHtcbiAgICAgICAgaWYgKHBhcmVudC5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgICAgICBsZXQgZWx0ID0gcGFyZW50O1xuICAgICAgICAgICAgbGV0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWx0KTtcbiAgICAgICAgICAgIGlmICgoZWx0LnNjcm9sbEhlaWdodCA+IGVsdC5jbGllbnRIZWlnaHQgfHwgZWx0LnNjcm9sbFdpZHRoID4gZWx0LmNsaWVudFdpZHRoKSAmJlxuICAgICAgICAgICAgICAgIHN0eWxlLm92ZXJmbG93ICE9IFwidmlzaWJsZVwiKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudFJlY3QgPSBlbHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgbGVmdCA9IE1hdGgubWF4KGxlZnQsIHBhcmVudFJlY3QubGVmdCk7XG4gICAgICAgICAgICAgICAgcmlnaHQgPSBNYXRoLm1pbihyaWdodCwgcGFyZW50UmVjdC5yaWdodCk7XG4gICAgICAgICAgICAgICAgdG9wID0gTWF0aC5tYXgodG9wLCBwYXJlbnRSZWN0LnRvcCk7XG4gICAgICAgICAgICAgICAgYm90dG9tID0gTWF0aC5taW4ocGFyZW50ID09IGRvbS5wYXJlbnROb2RlID8gd2luLmlubmVySGVpZ2h0IDogYm90dG9tLCBwYXJlbnRSZWN0LmJvdHRvbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQgPSBzdHlsZS5wb3NpdGlvbiA9PSBcImFic29sdXRlXCIgfHwgc3R5bGUucG9zaXRpb24gPT0gXCJmaXhlZFwiID8gZWx0Lm9mZnNldFBhcmVudCA6IGVsdC5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhcmVudC5ub2RlVHlwZSA9PSAxMSkgeyAvLyBTaGFkb3cgcm9vdFxuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50Lmhvc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBsZWZ0OiBsZWZ0IC0gcmVjdC5sZWZ0LCByaWdodDogTWF0aC5tYXgobGVmdCwgcmlnaHQpIC0gcmVjdC5sZWZ0LFxuICAgICAgICB0b3A6IHRvcCAtIChyZWN0LnRvcCArIHBhZGRpbmdUb3ApLCBib3R0b206IE1hdGgubWF4KHRvcCwgYm90dG9tKSAtIChyZWN0LnRvcCArIHBhZGRpbmdUb3ApIH07XG59XG5mdW5jdGlvbiBpbldpbmRvdyhlbHQpIHtcbiAgICBsZXQgcmVjdCA9IGVsdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgd2luID0gZWx0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93O1xuICAgIHJldHVybiByZWN0LmxlZnQgPCB3aW4uaW5uZXJXaWR0aCAmJiByZWN0LnJpZ2h0ID4gMCAmJlxuICAgICAgICByZWN0LnRvcCA8IHdpbi5pbm5lckhlaWdodCAmJiByZWN0LmJvdHRvbSA+IDA7XG59XG5mdW5jdGlvbiBmdWxsUGl4ZWxSYW5nZShkb20sIHBhZGRpbmdUb3ApIHtcbiAgICBsZXQgcmVjdCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4geyBsZWZ0OiAwLCByaWdodDogcmVjdC5yaWdodCAtIHJlY3QubGVmdCxcbiAgICAgICAgdG9wOiBwYWRkaW5nVG9wLCBib3R0b206IHJlY3QuYm90dG9tIC0gKHJlY3QudG9wICsgcGFkZGluZ1RvcCkgfTtcbn1cbi8vIExpbmUgZ2FwcyBhcmUgcGxhY2Vob2xkZXIgd2lkZ2V0cyB1c2VkIHRvIGhpZGUgcGllY2VzIG9mIG92ZXJsb25nXG4vLyBsaW5lcyB3aXRoaW4gdGhlIHZpZXdwb3J0LCBhcyBhIGtsdWRnZSB0byBrZWVwIHRoZSBlZGl0b3Jcbi8vIHJlc3BvbnNpdmUgd2hlbiBhIHJpZGljdWxvdXNseSBsb25nIGxpbmUgaXMgbG9hZGVkIGludG8gaXQuXG5jbGFzcyBMaW5lR2FwIHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bywgc2l6ZSwgZGlzcGxheVNpemUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICB0aGlzLmRpc3BsYXlTaXplID0gZGlzcGxheVNpemU7XG4gICAgfVxuICAgIHN0YXRpYyBzYW1lKGEsIGIpIHtcbiAgICAgICAgaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBnQSA9IGFbaV0sIGdCID0gYltpXTtcbiAgICAgICAgICAgIGlmIChnQS5mcm9tICE9IGdCLmZyb20gfHwgZ0EudG8gIT0gZ0IudG8gfHwgZ0Euc2l6ZSAhPSBnQi5zaXplKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZHJhdyh2aWV3U3RhdGUsIHdyYXBwaW5nKSB7XG4gICAgICAgIHJldHVybiBEZWNvcmF0aW9uLnJlcGxhY2Uoe1xuICAgICAgICAgICAgd2lkZ2V0OiBuZXcgTGluZUdhcFdpZGdldCh0aGlzLmRpc3BsYXlTaXplICogKHdyYXBwaW5nID8gdmlld1N0YXRlLnNjYWxlWSA6IHZpZXdTdGF0ZS5zY2FsZVgpLCB3cmFwcGluZylcbiAgICAgICAgfSkucmFuZ2UodGhpcy5mcm9tLCB0aGlzLnRvKTtcbiAgICB9XG59XG5jbGFzcyBMaW5lR2FwV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgY29uc3RydWN0b3Ioc2l6ZSwgdmVydGljYWwpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgdGhpcy52ZXJ0aWNhbCA9IHZlcnRpY2FsO1xuICAgIH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gb3RoZXIuc2l6ZSA9PSB0aGlzLnNpemUgJiYgb3RoZXIudmVydGljYWwgPT0gdGhpcy52ZXJ0aWNhbDsgfVxuICAgIHRvRE9NKCkge1xuICAgICAgICBsZXQgZWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaWYgKHRoaXMudmVydGljYWwpIHtcbiAgICAgICAgICAgIGVsdC5zdHlsZS5oZWlnaHQgPSB0aGlzLnNpemUgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbHQuc3R5bGUud2lkdGggPSB0aGlzLnNpemUgKyBcInB4XCI7XG4gICAgICAgICAgICBlbHQuc3R5bGUuaGVpZ2h0ID0gXCIycHhcIjtcbiAgICAgICAgICAgIGVsdC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWx0O1xuICAgIH1cbiAgICBnZXQgZXN0aW1hdGVkSGVpZ2h0KCkgeyByZXR1cm4gdGhpcy52ZXJ0aWNhbCA/IHRoaXMuc2l6ZSA6IC0xOyB9XG59XG5jbGFzcyBWaWV3U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgLy8gVGhlc2UgYXJlIGNvbnRlbnRET00tbG9jYWwgY29vcmRpbmF0ZXNcbiAgICAgICAgdGhpcy5waXhlbFZpZXdwb3J0ID0geyBsZWZ0OiAwLCByaWdodDogd2luZG93LmlubmVyV2lkdGgsIHRvcDogMCwgYm90dG9tOiAwIH07XG4gICAgICAgIHRoaXMuaW5WaWV3ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wYWRkaW5nVG9wID0gMDsgLy8gUGFkZGluZyBhYm92ZSB0aGUgZG9jdW1lbnQsIHNjYWxlZFxuICAgICAgICB0aGlzLnBhZGRpbmdCb3R0b20gPSAwOyAvLyBQYWRkaW5nIGJlbG93IHRoZSBkb2N1bWVudCwgc2NhbGVkXG4gICAgICAgIHRoaXMuY29udGVudERPTVdpZHRoID0gMDsgLy8gY29udGVudERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aFxuICAgICAgICB0aGlzLmNvbnRlbnRET01IZWlnaHQgPSAwOyAvLyBjb250ZW50RE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodFxuICAgICAgICB0aGlzLmVkaXRvckhlaWdodCA9IDA7IC8vIHNjcm9sbERPTS5jbGllbnRIZWlnaHQsIHVuc2NhbGVkXG4gICAgICAgIHRoaXMuZWRpdG9yV2lkdGggPSAwOyAvLyBzY3JvbGxET00uY2xpZW50V2lkdGgsIHVuc2NhbGVkXG4gICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gMDsgLy8gTGFzdCBzZWVuIHNjcm9sbERPTS5zY3JvbGxUb3AsIHNjYWxlZFxuICAgICAgICB0aGlzLnNjcm9sbGVkVG9Cb3R0b20gPSBmYWxzZTtcbiAgICAgICAgLy8gVGhlIENTUy10cmFuc2Zvcm1hdGlvbiBzY2FsZSBvZiB0aGUgZWRpdG9yICh0cmFuc2Zvcm1lZCBzaXplIC9cbiAgICAgICAgLy8gY29uY3JldGUgc2l6ZSlcbiAgICAgICAgdGhpcy5zY2FsZVggPSAxO1xuICAgICAgICB0aGlzLnNjYWxlWSA9IDE7XG4gICAgICAgIC8vIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiAoZG9jdW1lbnQtcmVsYXRpdmUpIHRvIHdoaWNoIHRvIGFuY2hvciB0aGVcbiAgICAgICAgLy8gc2Nyb2xsIHBvc2l0aW9uLiAtMSBtZWFucyBhbmNob3IgdG8gdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gICAgICAgIHRoaXMuc2Nyb2xsQW5jaG9yUG9zID0gMDtcbiAgICAgICAgLy8gVGhlIGhlaWdodCBhdCB0aGUgYW5jaG9yIHBvc2l0aW9uLiBTZXQgYnkgdGhlIERPTSB1cGRhdGUgcGhhc2UuXG4gICAgICAgIC8vIC0xIG1lYW5zIG5vIGhlaWdodCBhdmFpbGFibGUuXG4gICAgICAgIHRoaXMuc2Nyb2xsQW5jaG9ySGVpZ2h0ID0gLTE7XG4gICAgICAgIC8vIFNlZSBWUC5NYXhET01IZWlnaHRcbiAgICAgICAgdGhpcy5zY2FsZXIgPSBJZFNjYWxlcjtcbiAgICAgICAgdGhpcy5zY3JvbGxUYXJnZXQgPSBudWxsO1xuICAgICAgICAvLyBCcmllZmx5IHNldCB0byB0cnVlIHdoZW4gcHJpbnRpbmcsIHRvIGRpc2FibGUgdmlld3BvcnQgbGltaXRpbmdcbiAgICAgICAgdGhpcy5wcmludGluZyA9IGZhbHNlO1xuICAgICAgICAvLyBGbGFnIHNldCB3aGVuIGVkaXRvciBjb250ZW50IHdhcyByZWRyYXduLCBzbyB0aGF0IHRoZSBuZXh0XG4gICAgICAgIC8vIG1lYXN1cmUgc3RhZ2Uga25vd3MgaXQgbXVzdCByZWFkIERPTSBsYXlvdXRcbiAgICAgICAgdGhpcy5tdXN0TWVhc3VyZUNvbnRlbnQgPSB0cnVlO1xuICAgICAgICB0aGlzLmRlZmF1bHRUZXh0RGlyZWN0aW9uID0gRGlyZWN0aW9uLkxUUjtcbiAgICAgICAgdGhpcy52aXNpYmxlUmFuZ2VzID0gW107XG4gICAgICAgIC8vIEN1cnNvciAnYXNzb2MnIGlzIG9ubHkgc2lnbmlmaWNhbnQgd2hlbiB0aGUgY3Vyc29yIGlzIG9uIGEgbGluZVxuICAgICAgICAvLyB3cmFwIHBvaW50LCB3aGVyZSBpdCBtdXN0IHN0aWNrIHRvIHRoZSBjaGFyYWN0ZXIgdGhhdCBpdCBpc1xuICAgICAgICAvLyBhc3NvY2lhdGVkIHdpdGguIFNpbmNlIGJyb3dzZXJzIGRvbid0IHByb3ZpZGUgYSByZWFzb25hYmxlXG4gICAgICAgIC8vIGludGVyZmFjZSB0byBzZXQgb3IgcXVlcnkgdGhpcywgd2hlbiBhIHNlbGVjdGlvbiBpcyBzZXQgdGhhdFxuICAgICAgICAvLyBtaWdodCBjYXVzZSB0aGlzIHRvIGJlIHNpZ25pZmljYW50LCB0aGlzIGZsYWcgaXMgc2V0LiBUaGUgbmV4dFxuICAgICAgICAvLyBtZWFzdXJlIHBoYXNlIHdpbGwgY2hlY2sgd2hldGhlciB0aGUgY3Vyc29yIGlzIG9uIGEgbGluZS13cmFwcGluZ1xuICAgICAgICAvLyBib3VuZGFyeSBhbmQsIGlmIHNvLCByZXNldCBpdCB0byBtYWtlIHN1cmUgaXQgaXMgcG9zaXRpb25lZCBpblxuICAgICAgICAvLyB0aGUgcmlnaHQgcGxhY2UuXG4gICAgICAgIHRoaXMubXVzdEVuZm9yY2VDdXJzb3JBc3NvYyA9IGZhbHNlO1xuICAgICAgICBsZXQgZ3Vlc3NXcmFwcGluZyA9IHN0YXRlLmZhY2V0KGNvbnRlbnRBdHRyaWJ1dGVzKS5zb21lKHYgPT4gdHlwZW9mIHYgIT0gXCJmdW5jdGlvblwiICYmIHYuY2xhc3MgPT0gXCJjbS1saW5lV3JhcHBpbmdcIik7XG4gICAgICAgIHRoaXMuaGVpZ2h0T3JhY2xlID0gbmV3IEhlaWdodE9yYWNsZShndWVzc1dyYXBwaW5nKTtcbiAgICAgICAgdGhpcy5zdGF0ZURlY28gPSBzdGF0aWNEZWNvKHN0YXRlKTtcbiAgICAgICAgdGhpcy5oZWlnaHRNYXAgPSBIZWlnaHRNYXAuZW1wdHkoKS5hcHBseUNoYW5nZXModGhpcy5zdGF0ZURlY28sIFRleHQuZW1wdHksIHRoaXMuaGVpZ2h0T3JhY2xlLnNldERvYyhzdGF0ZS5kb2MpLCBbbmV3IENoYW5nZWRSYW5nZSgwLCAwLCAwLCBzdGF0ZS5kb2MubGVuZ3RoKV0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykge1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydCA9IHRoaXMuZ2V0Vmlld3BvcnQoMCwgbnVsbCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMudXBkYXRlRm9yVmlld3BvcnQoKSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0TGluZXMoKTtcbiAgICAgICAgdGhpcy5saW5lR2FwcyA9IHRoaXMuZW5zdXJlTGluZUdhcHMoW10pO1xuICAgICAgICB0aGlzLmxpbmVHYXBEZWNvID0gRGVjb3JhdGlvbi5zZXQodGhpcy5saW5lR2Fwcy5tYXAoZ2FwID0+IGdhcC5kcmF3KHRoaXMsIGZhbHNlKSkpO1xuICAgICAgICB0aGlzLmNvbXB1dGVWaXNpYmxlUmFuZ2VzKCk7XG4gICAgfVxuICAgIHVwZGF0ZUZvclZpZXdwb3J0KCkge1xuICAgICAgICBsZXQgdmlld3BvcnRzID0gW3RoaXMudmlld3BvcnRdLCB7IG1haW4gfSA9IHRoaXMuc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSAxOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBwb3MgPSBpID8gbWFpbi5oZWFkIDogbWFpbi5hbmNob3I7XG4gICAgICAgICAgICBpZiAoIXZpZXdwb3J0cy5zb21lKCh7IGZyb20sIHRvIH0pID0+IHBvcyA+PSBmcm9tICYmIHBvcyA8PSB0bykpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gdGhpcy5saW5lQmxvY2tBdChwb3MpO1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0cy5wdXNoKG5ldyBWaWV3cG9ydChmcm9tLCB0bykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudmlld3BvcnRzID0gdmlld3BvcnRzLnNvcnQoKGEsIGIpID0+IGEuZnJvbSAtIGIuZnJvbSk7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVNjYWxlcigpO1xuICAgIH1cbiAgICB1cGRhdGVTY2FsZXIoKSB7XG4gICAgICAgIGxldCBzY2FsZXIgPSB0aGlzLnNjYWxlcjtcbiAgICAgICAgdGhpcy5zY2FsZXIgPSB0aGlzLmhlaWdodE1hcC5oZWlnaHQgPD0gNzAwMDAwMCAvKiBWUC5NYXhET01IZWlnaHQgKi8gPyBJZFNjYWxlciA6XG4gICAgICAgICAgICBuZXcgQmlnU2NhbGVyKHRoaXMuaGVpZ2h0T3JhY2xlLCB0aGlzLmhlaWdodE1hcCwgdGhpcy52aWV3cG9ydHMpO1xuICAgICAgICByZXR1cm4gc2NhbGVyLmVxKHRoaXMuc2NhbGVyKSA/IDAgOiAyIC8qIFVwZGF0ZUZsYWcuSGVpZ2h0ICovO1xuICAgIH1cbiAgICB1cGRhdGVWaWV3cG9ydExpbmVzKCkge1xuICAgICAgICB0aGlzLnZpZXdwb3J0TGluZXMgPSBbXTtcbiAgICAgICAgdGhpcy5oZWlnaHRNYXAuZm9yRWFjaExpbmUodGhpcy52aWV3cG9ydC5mcm9tLCB0aGlzLnZpZXdwb3J0LnRvLCB0aGlzLmhlaWdodE9yYWNsZS5zZXREb2ModGhpcy5zdGF0ZS5kb2MpLCAwLCAwLCBibG9jayA9PiB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0TGluZXMucHVzaChzY2FsZUJsb2NrKGJsb2NrLCB0aGlzLnNjYWxlcikpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSwgc2Nyb2xsVGFyZ2V0ID0gbnVsbCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gdXBkYXRlLnN0YXRlO1xuICAgICAgICBsZXQgcHJldkRlY28gPSB0aGlzLnN0YXRlRGVjbztcbiAgICAgICAgdGhpcy5zdGF0ZURlY28gPSBzdGF0aWNEZWNvKHRoaXMuc3RhdGUpO1xuICAgICAgICBsZXQgY29udGVudENoYW5nZXMgPSB1cGRhdGUuY2hhbmdlZFJhbmdlcztcbiAgICAgICAgbGV0IGhlaWdodENoYW5nZXMgPSBDaGFuZ2VkUmFuZ2UuZXh0ZW5kV2l0aFJhbmdlcyhjb250ZW50Q2hhbmdlcywgaGVpZ2h0UmVsZXZhbnREZWNvQ2hhbmdlcyhwcmV2RGVjbywgdGhpcy5zdGF0ZURlY28sIHVwZGF0ZSA/IHVwZGF0ZS5jaGFuZ2VzIDogQ2hhbmdlU2V0LmVtcHR5KHRoaXMuc3RhdGUuZG9jLmxlbmd0aCkpKTtcbiAgICAgICAgbGV0IHByZXZIZWlnaHQgPSB0aGlzLmhlaWdodE1hcC5oZWlnaHQ7XG4gICAgICAgIGxldCBzY3JvbGxBbmNob3IgPSB0aGlzLnNjcm9sbGVkVG9Cb3R0b20gPyBudWxsIDogdGhpcy5zY3JvbGxBbmNob3JBdCh0aGlzLnNjcm9sbFRvcCk7XG4gICAgICAgIGNsZWFySGVpZ2h0Q2hhbmdlRmxhZygpO1xuICAgICAgICB0aGlzLmhlaWdodE1hcCA9IHRoaXMuaGVpZ2h0TWFwLmFwcGx5Q2hhbmdlcyh0aGlzLnN0YXRlRGVjbywgdXBkYXRlLnN0YXJ0U3RhdGUuZG9jLCB0aGlzLmhlaWdodE9yYWNsZS5zZXREb2ModGhpcy5zdGF0ZS5kb2MpLCBoZWlnaHRDaGFuZ2VzKTtcbiAgICAgICAgaWYgKHRoaXMuaGVpZ2h0TWFwLmhlaWdodCAhPSBwcmV2SGVpZ2h0IHx8IGhlaWdodENoYW5nZUZsYWcpXG4gICAgICAgICAgICB1cGRhdGUuZmxhZ3MgfD0gMiAvKiBVcGRhdGVGbGFnLkhlaWdodCAqLztcbiAgICAgICAgaWYgKHNjcm9sbEFuY2hvcikge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxBbmNob3JQb3MgPSB1cGRhdGUuY2hhbmdlcy5tYXBQb3Moc2Nyb2xsQW5jaG9yLmZyb20sIC0xKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQW5jaG9ySGVpZ2h0ID0gc2Nyb2xsQW5jaG9yLnRvcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQW5jaG9yUG9zID0gLTE7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbEFuY2hvckhlaWdodCA9IHByZXZIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHZpZXdwb3J0ID0gaGVpZ2h0Q2hhbmdlcy5sZW5ndGggPyB0aGlzLm1hcFZpZXdwb3J0KHRoaXMudmlld3BvcnQsIHVwZGF0ZS5jaGFuZ2VzKSA6IHRoaXMudmlld3BvcnQ7XG4gICAgICAgIGlmIChzY3JvbGxUYXJnZXQgJiYgKHNjcm9sbFRhcmdldC5yYW5nZS5oZWFkIDwgdmlld3BvcnQuZnJvbSB8fCBzY3JvbGxUYXJnZXQucmFuZ2UuaGVhZCA+IHZpZXdwb3J0LnRvKSB8fFxuICAgICAgICAgICAgIXRoaXMudmlld3BvcnRJc0FwcHJvcHJpYXRlKHZpZXdwb3J0KSlcbiAgICAgICAgICAgIHZpZXdwb3J0ID0gdGhpcy5nZXRWaWV3cG9ydCgwLCBzY3JvbGxUYXJnZXQpO1xuICAgICAgICBsZXQgdmlld3BvcnRDaGFuZ2UgPSB2aWV3cG9ydC5mcm9tICE9IHRoaXMudmlld3BvcnQuZnJvbSB8fCB2aWV3cG9ydC50byAhPSB0aGlzLnZpZXdwb3J0LnRvO1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgICAgIHVwZGF0ZS5mbGFncyB8PSB0aGlzLnVwZGF0ZUZvclZpZXdwb3J0KCk7XG4gICAgICAgIGlmICh2aWV3cG9ydENoYW5nZSB8fCAhdXBkYXRlLmNoYW5nZXMuZW1wdHkgfHwgKHVwZGF0ZS5mbGFncyAmIDIgLyogVXBkYXRlRmxhZy5IZWlnaHQgKi8pKVxuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydExpbmVzKCk7XG4gICAgICAgIGlmICh0aGlzLmxpbmVHYXBzLmxlbmd0aCB8fCB0aGlzLnZpZXdwb3J0LnRvIC0gdGhpcy52aWV3cG9ydC5mcm9tID4gKDIwMDAgLyogTEcuTWFyZ2luICovIDw8IDEpKVxuICAgICAgICAgICAgdGhpcy51cGRhdGVMaW5lR2Fwcyh0aGlzLmVuc3VyZUxpbmVHYXBzKHRoaXMubWFwTGluZUdhcHModGhpcy5saW5lR2FwcywgdXBkYXRlLmNoYW5nZXMpKSk7XG4gICAgICAgIHVwZGF0ZS5mbGFncyB8PSB0aGlzLmNvbXB1dGVWaXNpYmxlUmFuZ2VzKHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgaWYgKHNjcm9sbFRhcmdldClcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVGFyZ2V0ID0gc2Nyb2xsVGFyZ2V0O1xuICAgICAgICBpZiAoIXRoaXMubXVzdEVuZm9yY2VDdXJzb3JBc3NvYyAmJiAodXBkYXRlLnNlbGVjdGlvblNldCB8fCB1cGRhdGUuZm9jdXNDaGFuZ2VkKSAmJiB1cGRhdGUudmlldy5saW5lV3JhcHBpbmcgJiZcbiAgICAgICAgICAgIHVwZGF0ZS5zdGF0ZS5zZWxlY3Rpb24ubWFpbi5lbXB0eSAmJiB1cGRhdGUuc3RhdGUuc2VsZWN0aW9uLm1haW4uYXNzb2MgJiZcbiAgICAgICAgICAgICF1cGRhdGUuc3RhdGUuZmFjZXQobmF0aXZlU2VsZWN0aW9uSGlkZGVuKSlcbiAgICAgICAgICAgIHRoaXMubXVzdEVuZm9yY2VDdXJzb3JBc3NvYyA9IHRydWU7XG4gICAgfVxuICAgIG1lYXN1cmUodmlldykge1xuICAgICAgICBsZXQgZG9tID0gdmlldy5jb250ZW50RE9NLCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvbSk7XG4gICAgICAgIGxldCBvcmFjbGUgPSB0aGlzLmhlaWdodE9yYWNsZTtcbiAgICAgICAgbGV0IHdoaXRlU3BhY2UgPSBzdHlsZS53aGl0ZVNwYWNlO1xuICAgICAgICB0aGlzLmRlZmF1bHRUZXh0RGlyZWN0aW9uID0gc3R5bGUuZGlyZWN0aW9uID09IFwicnRsXCIgPyBEaXJlY3Rpb24uUlRMIDogRGlyZWN0aW9uLkxUUjtcbiAgICAgICAgbGV0IHJlZnJlc2ggPSB0aGlzLmhlaWdodE9yYWNsZS5tdXN0UmVmcmVzaEZvcldyYXBwaW5nKHdoaXRlU3BhY2UpIHx8IHRoaXMubXVzdE1lYXN1cmVDb250ZW50O1xuICAgICAgICBsZXQgZG9tUmVjdCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IG1lYXN1cmVDb250ZW50ID0gcmVmcmVzaCB8fCB0aGlzLm11c3RNZWFzdXJlQ29udGVudCB8fCB0aGlzLmNvbnRlbnRET01IZWlnaHQgIT0gZG9tUmVjdC5oZWlnaHQ7XG4gICAgICAgIHRoaXMuY29udGVudERPTUhlaWdodCA9IGRvbVJlY3QuaGVpZ2h0O1xuICAgICAgICB0aGlzLm11c3RNZWFzdXJlQ29udGVudCA9IGZhbHNlO1xuICAgICAgICBsZXQgcmVzdWx0ID0gMCwgYmlhcyA9IDA7XG4gICAgICAgIGlmIChkb21SZWN0LndpZHRoICYmIGRvbVJlY3QuaGVpZ2h0KSB7XG4gICAgICAgICAgICBsZXQgeyBzY2FsZVgsIHNjYWxlWSB9ID0gZ2V0U2NhbGUoZG9tLCBkb21SZWN0KTtcbiAgICAgICAgICAgIGlmIChzY2FsZVggPiAuMDA1ICYmIE1hdGguYWJzKHRoaXMuc2NhbGVYIC0gc2NhbGVYKSA+IC4wMDUgfHxcbiAgICAgICAgICAgICAgICBzY2FsZVkgPiAuMDA1ICYmIE1hdGguYWJzKHRoaXMuc2NhbGVZIC0gc2NhbGVZKSA+IC4wMDUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjYWxlWCA9IHNjYWxlWDtcbiAgICAgICAgICAgICAgICB0aGlzLnNjYWxlWSA9IHNjYWxlWTtcbiAgICAgICAgICAgICAgICByZXN1bHQgfD0gMTYgLyogVXBkYXRlRmxhZy5HZW9tZXRyeSAqLztcbiAgICAgICAgICAgICAgICByZWZyZXNoID0gbWVhc3VyZUNvbnRlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFZlcnRpY2FsIHBhZGRpbmdcbiAgICAgICAgbGV0IHBhZGRpbmdUb3AgPSAocGFyc2VJbnQoc3R5bGUucGFkZGluZ1RvcCkgfHwgMCkgKiB0aGlzLnNjYWxlWTtcbiAgICAgICAgbGV0IHBhZGRpbmdCb3R0b20gPSAocGFyc2VJbnQoc3R5bGUucGFkZGluZ0JvdHRvbSkgfHwgMCkgKiB0aGlzLnNjYWxlWTtcbiAgICAgICAgaWYgKHRoaXMucGFkZGluZ1RvcCAhPSBwYWRkaW5nVG9wIHx8IHRoaXMucGFkZGluZ0JvdHRvbSAhPSBwYWRkaW5nQm90dG9tKSB7XG4gICAgICAgICAgICB0aGlzLnBhZGRpbmdUb3AgPSBwYWRkaW5nVG9wO1xuICAgICAgICAgICAgdGhpcy5wYWRkaW5nQm90dG9tID0gcGFkZGluZ0JvdHRvbTtcbiAgICAgICAgICAgIHJlc3VsdCB8PSAxNiAvKiBVcGRhdGVGbGFnLkdlb21ldHJ5ICovIHwgMiAvKiBVcGRhdGVGbGFnLkhlaWdodCAqLztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5lZGl0b3JXaWR0aCAhPSB2aWV3LnNjcm9sbERPTS5jbGllbnRXaWR0aCkge1xuICAgICAgICAgICAgaWYgKG9yYWNsZS5saW5lV3JhcHBpbmcpXG4gICAgICAgICAgICAgICAgbWVhc3VyZUNvbnRlbnQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5lZGl0b3JXaWR0aCA9IHZpZXcuc2Nyb2xsRE9NLmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgcmVzdWx0IHw9IDE2IC8qIFVwZGF0ZUZsYWcuR2VvbWV0cnkgKi87XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNjcm9sbFRvcCA9IHZpZXcuc2Nyb2xsRE9NLnNjcm9sbFRvcCAqIHRoaXMuc2NhbGVZO1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxUb3AgIT0gc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbEFuY2hvckhlaWdodCA9IC0xO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY3JvbGxlZFRvQm90dG9tID0gaXNTY3JvbGxlZFRvQm90dG9tKHZpZXcuc2Nyb2xsRE9NKTtcbiAgICAgICAgLy8gUGl4ZWwgdmlld3BvcnRcbiAgICAgICAgbGV0IHBpeGVsVmlld3BvcnQgPSAodGhpcy5wcmludGluZyA/IGZ1bGxQaXhlbFJhbmdlIDogdmlzaWJsZVBpeGVsUmFuZ2UpKGRvbSwgdGhpcy5wYWRkaW5nVG9wKTtcbiAgICAgICAgbGV0IGRUb3AgPSBwaXhlbFZpZXdwb3J0LnRvcCAtIHRoaXMucGl4ZWxWaWV3cG9ydC50b3AsIGRCb3R0b20gPSBwaXhlbFZpZXdwb3J0LmJvdHRvbSAtIHRoaXMucGl4ZWxWaWV3cG9ydC5ib3R0b207XG4gICAgICAgIHRoaXMucGl4ZWxWaWV3cG9ydCA9IHBpeGVsVmlld3BvcnQ7XG4gICAgICAgIGxldCBpblZpZXcgPSB0aGlzLnBpeGVsVmlld3BvcnQuYm90dG9tID4gdGhpcy5waXhlbFZpZXdwb3J0LnRvcCAmJiB0aGlzLnBpeGVsVmlld3BvcnQucmlnaHQgPiB0aGlzLnBpeGVsVmlld3BvcnQubGVmdDtcbiAgICAgICAgaWYgKGluVmlldyAhPSB0aGlzLmluVmlldykge1xuICAgICAgICAgICAgdGhpcy5pblZpZXcgPSBpblZpZXc7XG4gICAgICAgICAgICBpZiAoaW5WaWV3KVxuICAgICAgICAgICAgICAgIG1lYXN1cmVDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaW5WaWV3ICYmICF0aGlzLnNjcm9sbFRhcmdldCAmJiAhaW5XaW5kb3codmlldy5kb20pKVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIGxldCBjb250ZW50V2lkdGggPSBkb21SZWN0LndpZHRoO1xuICAgICAgICBpZiAodGhpcy5jb250ZW50RE9NV2lkdGggIT0gY29udGVudFdpZHRoIHx8IHRoaXMuZWRpdG9ySGVpZ2h0ICE9IHZpZXcuc2Nyb2xsRE9NLmNsaWVudEhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50RE9NV2lkdGggPSBkb21SZWN0LndpZHRoO1xuICAgICAgICAgICAgdGhpcy5lZGl0b3JIZWlnaHQgPSB2aWV3LnNjcm9sbERPTS5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICByZXN1bHQgfD0gMTYgLyogVXBkYXRlRmxhZy5HZW9tZXRyeSAqLztcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVhc3VyZUNvbnRlbnQpIHtcbiAgICAgICAgICAgIGxldCBsaW5lSGVpZ2h0cyA9IHZpZXcuZG9jVmlldy5tZWFzdXJlVmlzaWJsZUxpbmVIZWlnaHRzKHRoaXMudmlld3BvcnQpO1xuICAgICAgICAgICAgaWYgKG9yYWNsZS5tdXN0UmVmcmVzaEZvckhlaWdodHMobGluZUhlaWdodHMpKVxuICAgICAgICAgICAgICAgIHJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHJlZnJlc2ggfHwgb3JhY2xlLmxpbmVXcmFwcGluZyAmJiBNYXRoLmFicyhjb250ZW50V2lkdGggLSB0aGlzLmNvbnRlbnRET01XaWR0aCkgPiBvcmFjbGUuY2hhcldpZHRoKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgbGluZUhlaWdodCwgY2hhcldpZHRoLCB0ZXh0SGVpZ2h0IH0gPSB2aWV3LmRvY1ZpZXcubWVhc3VyZVRleHRTaXplKCk7XG4gICAgICAgICAgICAgICAgcmVmcmVzaCA9IGxpbmVIZWlnaHQgPiAwICYmIG9yYWNsZS5yZWZyZXNoKHdoaXRlU3BhY2UsIGxpbmVIZWlnaHQsIGNoYXJXaWR0aCwgdGV4dEhlaWdodCwgTWF0aC5tYXgoNSwgY29udGVudFdpZHRoIC8gY2hhcldpZHRoKSwgbGluZUhlaWdodHMpO1xuICAgICAgICAgICAgICAgIGlmIChyZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuZG9jVmlldy5taW5XaWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCB8PSAxNiAvKiBVcGRhdGVGbGFnLkdlb21ldHJ5ICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkVG9wID4gMCAmJiBkQm90dG9tID4gMClcbiAgICAgICAgICAgICAgICBiaWFzID0gTWF0aC5tYXgoZFRvcCwgZEJvdHRvbSk7XG4gICAgICAgICAgICBlbHNlIGlmIChkVG9wIDwgMCAmJiBkQm90dG9tIDwgMClcbiAgICAgICAgICAgICAgICBiaWFzID0gTWF0aC5taW4oZFRvcCwgZEJvdHRvbSk7XG4gICAgICAgICAgICBjbGVhckhlaWdodENoYW5nZUZsYWcoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHZwIG9mIHRoaXMudmlld3BvcnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGhlaWdodHMgPSB2cC5mcm9tID09IHRoaXMudmlld3BvcnQuZnJvbSA/IGxpbmVIZWlnaHRzIDogdmlldy5kb2NWaWV3Lm1lYXN1cmVWaXNpYmxlTGluZUhlaWdodHModnApO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0TWFwID0gKHJlZnJlc2ggPyBIZWlnaHRNYXAuZW1wdHkoKS5hcHBseUNoYW5nZXModGhpcy5zdGF0ZURlY28sIFRleHQuZW1wdHksIHRoaXMuaGVpZ2h0T3JhY2xlLCBbbmV3IENoYW5nZWRSYW5nZSgwLCAwLCAwLCB2aWV3LnN0YXRlLmRvYy5sZW5ndGgpXSkgOiB0aGlzLmhlaWdodE1hcCkudXBkYXRlSGVpZ2h0KG9yYWNsZSwgMCwgcmVmcmVzaCwgbmV3IE1lYXN1cmVkSGVpZ2h0cyh2cC5mcm9tLCBoZWlnaHRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGVpZ2h0Q2hhbmdlRmxhZylcbiAgICAgICAgICAgICAgICByZXN1bHQgfD0gMiAvKiBVcGRhdGVGbGFnLkhlaWdodCAqLztcbiAgICAgICAgfVxuICAgICAgICBsZXQgdmlld3BvcnRDaGFuZ2UgPSAhdGhpcy52aWV3cG9ydElzQXBwcm9wcmlhdGUodGhpcy52aWV3cG9ydCwgYmlhcykgfHxcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVGFyZ2V0ICYmICh0aGlzLnNjcm9sbFRhcmdldC5yYW5nZS5oZWFkIDwgdGhpcy52aWV3cG9ydC5mcm9tIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUYXJnZXQucmFuZ2UuaGVhZCA+IHRoaXMudmlld3BvcnQudG8pO1xuICAgICAgICBpZiAodmlld3BvcnRDaGFuZ2UpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiAyIC8qIFVwZGF0ZUZsYWcuSGVpZ2h0ICovKVxuICAgICAgICAgICAgICAgIHJlc3VsdCB8PSB0aGlzLnVwZGF0ZVNjYWxlcigpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydCA9IHRoaXMuZ2V0Vmlld3BvcnQoYmlhcywgdGhpcy5zY3JvbGxUYXJnZXQpO1xuICAgICAgICAgICAgcmVzdWx0IHw9IHRoaXMudXBkYXRlRm9yVmlld3BvcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHJlc3VsdCAmIDIgLyogVXBkYXRlRmxhZy5IZWlnaHQgKi8pIHx8IHZpZXdwb3J0Q2hhbmdlKVxuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydExpbmVzKCk7XG4gICAgICAgIGlmICh0aGlzLmxpbmVHYXBzLmxlbmd0aCB8fCB0aGlzLnZpZXdwb3J0LnRvIC0gdGhpcy52aWV3cG9ydC5mcm9tID4gKDIwMDAgLyogTEcuTWFyZ2luICovIDw8IDEpKVxuICAgICAgICAgICAgdGhpcy51cGRhdGVMaW5lR2Fwcyh0aGlzLmVuc3VyZUxpbmVHYXBzKHJlZnJlc2ggPyBbXSA6IHRoaXMubGluZUdhcHMsIHZpZXcpKTtcbiAgICAgICAgcmVzdWx0IHw9IHRoaXMuY29tcHV0ZVZpc2libGVSYW5nZXMoKTtcbiAgICAgICAgaWYgKHRoaXMubXVzdEVuZm9yY2VDdXJzb3JBc3NvYykge1xuICAgICAgICAgICAgdGhpcy5tdXN0RW5mb3JjZUN1cnNvckFzc29jID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIGRvbmUgaW4gdGhlIHJlYWQgc3RhZ2UsIGJlY2F1c2UgbW92aW5nIHRoZSBzZWxlY3Rpb25cbiAgICAgICAgICAgIC8vIHRvIGEgbGluZSBlbmQgaXMgZ29pbmcgdG8gdHJpZ2dlciBhIGxheW91dCBhbnl3YXksIHNvIGl0XG4gICAgICAgICAgICAvLyBjYW4ndCBiZSBhIHB1cmUgd3JpdGUuIEl0IHNob3VsZCBiZSByYXJlIHRoYXQgaXQgZG9lcyBhbnlcbiAgICAgICAgICAgIC8vIHdyaXRpbmcuXG4gICAgICAgICAgICB2aWV3LmRvY1ZpZXcuZW5mb3JjZUN1cnNvckFzc29jKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZ2V0IHZpc2libGVUb3AoKSB7IHJldHVybiB0aGlzLnNjYWxlci5mcm9tRE9NKHRoaXMucGl4ZWxWaWV3cG9ydC50b3ApOyB9XG4gICAgZ2V0IHZpc2libGVCb3R0b20oKSB7IHJldHVybiB0aGlzLnNjYWxlci5mcm9tRE9NKHRoaXMucGl4ZWxWaWV3cG9ydC5ib3R0b20pOyB9XG4gICAgZ2V0Vmlld3BvcnQoYmlhcywgc2Nyb2xsVGFyZ2V0KSB7XG4gICAgICAgIC8vIFRoaXMgd2lsbCBkaXZpZGUgVlAuTWFyZ2luIGJldHdlZW4gdGhlIHRvcCBhbmQgdGhlXG4gICAgICAgIC8vIGJvdHRvbSwgZGVwZW5kaW5nIG9uIHRoZSBiaWFzICh0aGUgY2hhbmdlIGluIHZpZXdwb3J0IHBvc2l0aW9uXG4gICAgICAgIC8vIHNpbmNlIHRoZSBsYXN0IHVwZGF0ZSkuIEl0J2xsIGhvbGQgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxXG4gICAgICAgIGxldCBtYXJnaW5Ub3AgPSAwLjUgLSBNYXRoLm1heCgtMC41LCBNYXRoLm1pbigwLjUsIGJpYXMgLyAxMDAwIC8qIFZQLk1hcmdpbiAqLyAvIDIpKTtcbiAgICAgICAgbGV0IG1hcCA9IHRoaXMuaGVpZ2h0TWFwLCBvcmFjbGUgPSB0aGlzLmhlaWdodE9yYWNsZTtcbiAgICAgICAgbGV0IHsgdmlzaWJsZVRvcCwgdmlzaWJsZUJvdHRvbSB9ID0gdGhpcztcbiAgICAgICAgbGV0IHZpZXdwb3J0ID0gbmV3IFZpZXdwb3J0KG1hcC5saW5lQXQodmlzaWJsZVRvcCAtIG1hcmdpblRvcCAqIDEwMDAgLyogVlAuTWFyZ2luICovLCBRdWVyeVR5cGUuQnlIZWlnaHQsIG9yYWNsZSwgMCwgMCkuZnJvbSwgbWFwLmxpbmVBdCh2aXNpYmxlQm90dG9tICsgKDEgLSBtYXJnaW5Ub3ApICogMTAwMCAvKiBWUC5NYXJnaW4gKi8sIFF1ZXJ5VHlwZS5CeUhlaWdodCwgb3JhY2xlLCAwLCAwKS50byk7XG4gICAgICAgIC8vIElmIHNjcm9sbFRhcmdldCBpcyBnaXZlbiwgbWFrZSBzdXJlIHRoZSB2aWV3cG9ydCBpbmNsdWRlcyB0aGF0IHBvc2l0aW9uXG4gICAgICAgIGlmIChzY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgICAgIGxldCB7IGhlYWQgfSA9IHNjcm9sbFRhcmdldC5yYW5nZTtcbiAgICAgICAgICAgIGlmIChoZWFkIDwgdmlld3BvcnQuZnJvbSB8fCBoZWFkID4gdmlld3BvcnQudG8pIHtcbiAgICAgICAgICAgICAgICBsZXQgdmlld0hlaWdodCA9IE1hdGgubWluKHRoaXMuZWRpdG9ySGVpZ2h0LCB0aGlzLnBpeGVsVmlld3BvcnQuYm90dG9tIC0gdGhpcy5waXhlbFZpZXdwb3J0LnRvcCk7XG4gICAgICAgICAgICAgICAgbGV0IGJsb2NrID0gbWFwLmxpbmVBdChoZWFkLCBRdWVyeVR5cGUuQnlQb3MsIG9yYWNsZSwgMCwgMCksIHRvcFBvcztcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsVGFyZ2V0LnkgPT0gXCJjZW50ZXJcIilcbiAgICAgICAgICAgICAgICAgICAgdG9wUG9zID0gKGJsb2NrLnRvcCArIGJsb2NrLmJvdHRvbSkgLyAyIC0gdmlld0hlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2Nyb2xsVGFyZ2V0LnkgPT0gXCJzdGFydFwiIHx8IHNjcm9sbFRhcmdldC55ID09IFwibmVhcmVzdFwiICYmIGhlYWQgPCB2aWV3cG9ydC5mcm9tKVxuICAgICAgICAgICAgICAgICAgICB0b3BQb3MgPSBibG9jay50b3A7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0b3BQb3MgPSBibG9jay5ib3R0b20gLSB2aWV3SGVpZ2h0O1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0ID0gbmV3IFZpZXdwb3J0KG1hcC5saW5lQXQodG9wUG9zIC0gMTAwMCAvKiBWUC5NYXJnaW4gKi8gLyAyLCBRdWVyeVR5cGUuQnlIZWlnaHQsIG9yYWNsZSwgMCwgMCkuZnJvbSwgbWFwLmxpbmVBdCh0b3BQb3MgKyB2aWV3SGVpZ2h0ICsgMTAwMCAvKiBWUC5NYXJnaW4gKi8gLyAyLCBRdWVyeVR5cGUuQnlIZWlnaHQsIG9yYWNsZSwgMCwgMCkudG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2aWV3cG9ydDtcbiAgICB9XG4gICAgbWFwVmlld3BvcnQodmlld3BvcnQsIGNoYW5nZXMpIHtcbiAgICAgICAgbGV0IGZyb20gPSBjaGFuZ2VzLm1hcFBvcyh2aWV3cG9ydC5mcm9tLCAtMSksIHRvID0gY2hhbmdlcy5tYXBQb3Modmlld3BvcnQudG8sIDEpO1xuICAgICAgICByZXR1cm4gbmV3IFZpZXdwb3J0KHRoaXMuaGVpZ2h0TWFwLmxpbmVBdChmcm9tLCBRdWVyeVR5cGUuQnlQb3MsIHRoaXMuaGVpZ2h0T3JhY2xlLCAwLCAwKS5mcm9tLCB0aGlzLmhlaWdodE1hcC5saW5lQXQodG8sIFF1ZXJ5VHlwZS5CeVBvcywgdGhpcy5oZWlnaHRPcmFjbGUsIDAsIDApLnRvKTtcbiAgICB9XG4gICAgLy8gQ2hlY2tzIGlmIGEgZ2l2ZW4gdmlld3BvcnQgY292ZXJzIHRoZSB2aXNpYmxlIHBhcnQgb2YgdGhlXG4gICAgLy8gZG9jdW1lbnQgYW5kIG5vdCB0b28gbXVjaCBiZXlvbmQgdGhhdC5cbiAgICB2aWV3cG9ydElzQXBwcm9wcmlhdGUoeyBmcm9tLCB0byB9LCBiaWFzID0gMCkge1xuICAgICAgICBpZiAoIXRoaXMuaW5WaWV3KVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGxldCB7IHRvcCB9ID0gdGhpcy5oZWlnaHRNYXAubGluZUF0KGZyb20sIFF1ZXJ5VHlwZS5CeVBvcywgdGhpcy5oZWlnaHRPcmFjbGUsIDAsIDApO1xuICAgICAgICBsZXQgeyBib3R0b20gfSA9IHRoaXMuaGVpZ2h0TWFwLmxpbmVBdCh0bywgUXVlcnlUeXBlLkJ5UG9zLCB0aGlzLmhlaWdodE9yYWNsZSwgMCwgMCk7XG4gICAgICAgIGxldCB7IHZpc2libGVUb3AsIHZpc2libGVCb3R0b20gfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoZnJvbSA9PSAwIHx8IHRvcCA8PSB2aXNpYmxlVG9wIC0gTWF0aC5tYXgoMTAgLyogVlAuTWluQ292ZXJNYXJnaW4gKi8sIE1hdGgubWluKC1iaWFzLCAyNTAgLyogVlAuTWF4Q292ZXJNYXJnaW4gKi8pKSkgJiZcbiAgICAgICAgICAgICh0byA9PSB0aGlzLnN0YXRlLmRvYy5sZW5ndGggfHxcbiAgICAgICAgICAgICAgICBib3R0b20gPj0gdmlzaWJsZUJvdHRvbSArIE1hdGgubWF4KDEwIC8qIFZQLk1pbkNvdmVyTWFyZ2luICovLCBNYXRoLm1pbihiaWFzLCAyNTAgLyogVlAuTWF4Q292ZXJNYXJnaW4gKi8pKSkgJiZcbiAgICAgICAgICAgICh0b3AgPiB2aXNpYmxlVG9wIC0gMiAqIDEwMDAgLyogVlAuTWFyZ2luICovICYmIGJvdHRvbSA8IHZpc2libGVCb3R0b20gKyAyICogMTAwMCAvKiBWUC5NYXJnaW4gKi8pO1xuICAgIH1cbiAgICBtYXBMaW5lR2FwcyhnYXBzLCBjaGFuZ2VzKSB7XG4gICAgICAgIGlmICghZ2Fwcy5sZW5ndGggfHwgY2hhbmdlcy5lbXB0eSlcbiAgICAgICAgICAgIHJldHVybiBnYXBzO1xuICAgICAgICBsZXQgbWFwcGVkID0gW107XG4gICAgICAgIGZvciAobGV0IGdhcCBvZiBnYXBzKVxuICAgICAgICAgICAgaWYgKCFjaGFuZ2VzLnRvdWNoZXNSYW5nZShnYXAuZnJvbSwgZ2FwLnRvKSlcbiAgICAgICAgICAgICAgICBtYXBwZWQucHVzaChuZXcgTGluZUdhcChjaGFuZ2VzLm1hcFBvcyhnYXAuZnJvbSksIGNoYW5nZXMubWFwUG9zKGdhcC50byksIGdhcC5zaXplLCBnYXAuZGlzcGxheVNpemUpKTtcbiAgICAgICAgcmV0dXJuIG1hcHBlZDtcbiAgICB9XG4gICAgLy8gQ29tcHV0ZXMgcG9zaXRpb25zIGluIHRoZSB2aWV3cG9ydCB3aGVyZSB0aGUgc3RhcnQgb3IgZW5kIG9mIGFcbiAgICAvLyBsaW5lIHNob3VsZCBiZSBoaWRkZW4sIHRyeWluZyB0byByZXVzZSBleGlzdGluZyBsaW5lIGdhcHMgd2hlblxuICAgIC8vIGFwcHJvcHJpYXRlIHRvIGF2b2lkIHVubmVjY2VzYXJ5IHJlZHJhd3MuXG4gICAgLy8gVXNlcyBjcnVkZSBjaGFyYWN0ZXItY291bnRpbmcgZm9yIHRoZSBwb3NpdGlvbmluZyBhbmQgc2l6aW5nLFxuICAgIC8vIHNpbmNlIGFjdHVhbCBET00gY29vcmRpbmF0ZXMgYXJlbid0IGFsd2F5cyBhdmFpbGFibGUgYW5kXG4gICAgLy8gcHJlZGljdGFibGUuIFJlbGllcyBvbiBnZW5lcm91cyBtYXJnaW5zIChzZWUgTEcuTWFyZ2luKSB0byBoaWRlXG4gICAgLy8gdGhlIGFydGlmYWN0cyB0aGlzIG1pZ2h0IHByb2R1Y2UgZnJvbSB0aGUgdXNlci5cbiAgICBlbnN1cmVMaW5lR2FwcyhjdXJyZW50LCBtYXlNZWFzdXJlKSB7XG4gICAgICAgIGxldCB3cmFwcGluZyA9IHRoaXMuaGVpZ2h0T3JhY2xlLmxpbmVXcmFwcGluZztcbiAgICAgICAgbGV0IG1hcmdpbiA9IHdyYXBwaW5nID8gMTAwMDAgLyogTEcuTWFyZ2luV3JhcCAqLyA6IDIwMDAgLyogTEcuTWFyZ2luICovLCBoYWxmTWFyZ2luID0gbWFyZ2luID4+IDEsIGRvdWJsZU1hcmdpbiA9IG1hcmdpbiA8PCAxO1xuICAgICAgICAvLyBUaGUgbm9uLXdyYXBwaW5nIGxvZ2ljIHdvbid0IHdvcmsgYXQgYWxsIGluIHByZWRvbWluYW50bHkgcmlnaHQtdG8tbGVmdCB0ZXh0LlxuICAgICAgICBpZiAodGhpcy5kZWZhdWx0VGV4dERpcmVjdGlvbiAhPSBEaXJlY3Rpb24uTFRSICYmICF3cmFwcGluZylcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgbGV0IGdhcHMgPSBbXTtcbiAgICAgICAgbGV0IGFkZEdhcCA9IChmcm9tLCB0bywgbGluZSwgc3RydWN0dXJlKSA9PiB7XG4gICAgICAgICAgICBpZiAodG8gLSBmcm9tIDwgaGFsZk1hcmdpbilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBsZXQgc2VsID0gdGhpcy5zdGF0ZS5zZWxlY3Rpb24ubWFpbiwgYXZvaWQgPSBbc2VsLmZyb21dO1xuICAgICAgICAgICAgaWYgKCFzZWwuZW1wdHkpXG4gICAgICAgICAgICAgICAgYXZvaWQucHVzaChzZWwudG8pO1xuICAgICAgICAgICAgZm9yIChsZXQgcG9zIG9mIGF2b2lkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBvcyA+IGZyb20gJiYgcG9zIDwgdG8pIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkR2FwKGZyb20sIHBvcyAtIDEwIC8qIExHLlNlbGVjdGlvbk1hcmdpbiAqLywgbGluZSwgc3RydWN0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkR2FwKHBvcyArIDEwIC8qIExHLlNlbGVjdGlvbk1hcmdpbiAqLywgdG8sIGxpbmUsIHN0cnVjdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZ2FwID0gZmluZChjdXJyZW50LCBnYXAgPT4gZ2FwLmZyb20gPj0gbGluZS5mcm9tICYmIGdhcC50byA8PSBsaW5lLnRvICYmXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMoZ2FwLmZyb20gLSBmcm9tKSA8IGhhbGZNYXJnaW4gJiYgTWF0aC5hYnMoZ2FwLnRvIC0gdG8pIDwgaGFsZk1hcmdpbiAmJlxuICAgICAgICAgICAgICAgICFhdm9pZC5zb21lKHBvcyA9PiBnYXAuZnJvbSA8IHBvcyAmJiBnYXAudG8gPiBwb3MpKTtcbiAgICAgICAgICAgIGlmICghZ2FwKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBzY3JvbGxpbmcgZG93biwgc25hcCBnYXAgZW5kcyB0byBsaW5lIHN0YXJ0cyB0byBhdm9pZCBzaGlmdHMgaW4gd3JhcHBpbmdcbiAgICAgICAgICAgICAgICBpZiAodG8gPCBsaW5lLnRvICYmIG1heU1lYXN1cmUgJiYgd3JhcHBpbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgbWF5TWVhc3VyZS52aXNpYmxlUmFuZ2VzLnNvbWUociA9PiByLmZyb20gPD0gdG8gJiYgci50byA+PSB0bykpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmVTdGFydCA9IG1heU1lYXN1cmUubW92ZVRvTGluZUJvdW5kYXJ5KEVkaXRvclNlbGVjdGlvbi5jdXJzb3IodG8pLCBmYWxzZSwgdHJ1ZSkuaGVhZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVTdGFydCA+IGZyb20pXG4gICAgICAgICAgICAgICAgICAgICAgICB0byA9IGxpbmVTdGFydDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHNpemUgPSB0aGlzLmdhcFNpemUobGluZSwgZnJvbSwgdG8sIHN0cnVjdHVyZSk7XG4gICAgICAgICAgICAgICAgbGV0IGRpc3BsYXlTaXplID0gd3JhcHBpbmcgfHwgc2l6ZSA8IDIwMDAwMDAgLyogVlAuTWF4SG9yaXpHYXAgKi8gPyBzaXplIDogMjAwMDAwMCAvKiBWUC5NYXhIb3JpekdhcCAqLztcbiAgICAgICAgICAgICAgICBnYXAgPSBuZXcgTGluZUdhcChmcm9tLCB0bywgc2l6ZSwgZGlzcGxheVNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2Fwcy5wdXNoKGdhcCk7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBjaGVja0xpbmUgPSAobGluZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGxpbmUubGVuZ3RoIDwgZG91YmxlTWFyZ2luIHx8IGxpbmUudHlwZSAhPSBCbG9ja1R5cGUuVGV4dClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBsZXQgc3RydWN0dXJlID0gbGluZVN0cnVjdHVyZShsaW5lLmZyb20sIGxpbmUudG8sIHRoaXMuc3RhdGVEZWNvKTtcbiAgICAgICAgICAgIGlmIChzdHJ1Y3R1cmUudG90YWwgPCBkb3VibGVNYXJnaW4pXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IHRhcmdldCA9IHRoaXMuc2Nyb2xsVGFyZ2V0ID8gdGhpcy5zY3JvbGxUYXJnZXQucmFuZ2UuaGVhZCA6IG51bGw7XG4gICAgICAgICAgICBsZXQgdmlld0Zyb20sIHZpZXdUbztcbiAgICAgICAgICAgIGlmICh3cmFwcGluZykge1xuICAgICAgICAgICAgICAgIGxldCBtYXJnaW5IZWlnaHQgPSAobWFyZ2luIC8gdGhpcy5oZWlnaHRPcmFjbGUubGluZUxlbmd0aCkgKiB0aGlzLmhlaWdodE9yYWNsZS5saW5lSGVpZ2h0O1xuICAgICAgICAgICAgICAgIGxldCB0b3AsIGJvdDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldEZyYWMgPSBmaW5kRnJhY3Rpb24oc3RydWN0dXJlLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3BhY2VGcmFjID0gKCh0aGlzLnZpc2libGVCb3R0b20gLSB0aGlzLnZpc2libGVUb3ApIC8gMiArIG1hcmdpbkhlaWdodCkgLyBsaW5lLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gdGFyZ2V0RnJhYyAtIHNwYWNlRnJhYztcbiAgICAgICAgICAgICAgICAgICAgYm90ID0gdGFyZ2V0RnJhYyArIHNwYWNlRnJhYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9ICh0aGlzLnZpc2libGVUb3AgLSBsaW5lLnRvcCAtIG1hcmdpbkhlaWdodCkgLyBsaW5lLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYm90ID0gKHRoaXMudmlzaWJsZUJvdHRvbSAtIGxpbmUudG9wICsgbWFyZ2luSGVpZ2h0KSAvIGxpbmUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aWV3RnJvbSA9IGZpbmRQb3NpdGlvbihzdHJ1Y3R1cmUsIHRvcCk7XG4gICAgICAgICAgICAgICAgdmlld1RvID0gZmluZFBvc2l0aW9uKHN0cnVjdHVyZSwgYm90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB0b3RhbFdpZHRoID0gc3RydWN0dXJlLnRvdGFsICogdGhpcy5oZWlnaHRPcmFjbGUuY2hhcldpZHRoO1xuICAgICAgICAgICAgICAgIGxldCBtYXJnaW5XaWR0aCA9IG1hcmdpbiAqIHRoaXMuaGVpZ2h0T3JhY2xlLmNoYXJXaWR0aDtcbiAgICAgICAgICAgICAgICBsZXQgaG9yaXpPZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgIGlmICh0b3RhbFdpZHRoID4gMjAwMDAwMCAvKiBWUC5NYXhIb3JpekdhcCAqLylcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgb2xkIG9mIGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGQuZnJvbSA+PSBsaW5lLmZyb20gJiYgb2xkLmZyb20gPCBsaW5lLnRvICYmIG9sZC5zaXplICE9IG9sZC5kaXNwbGF5U2l6ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZC5mcm9tICogdGhpcy5oZWlnaHRPcmFjbGUuY2hhcldpZHRoICsgaG9yaXpPZmZzZXQgPCB0aGlzLnBpeGVsVmlld3BvcnQubGVmdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3Jpek9mZnNldCA9IG9sZC5zaXplIC0gb2xkLmRpc3BsYXlTaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHB4TGVmdCA9IHRoaXMucGl4ZWxWaWV3cG9ydC5sZWZ0ICsgaG9yaXpPZmZzZXQsIHB4UmlnaHQgPSB0aGlzLnBpeGVsVmlld3BvcnQucmlnaHQgKyBob3Jpek9mZnNldDtcbiAgICAgICAgICAgICAgICBsZXQgbGVmdCwgcmlnaHQ7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRGcmFjID0gZmluZEZyYWN0aW9uKHN0cnVjdHVyZSwgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNwYWNlRnJhYyA9ICgocHhSaWdodCAtIHB4TGVmdCkgLyAyICsgbWFyZ2luV2lkdGgpIC8gdG90YWxXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHRhcmdldEZyYWMgLSBzcGFjZUZyYWM7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gdGFyZ2V0RnJhYyArIHNwYWNlRnJhYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSAocHhMZWZ0IC0gbWFyZ2luV2lkdGgpIC8gdG90YWxXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSAocHhSaWdodCArIG1hcmdpbldpZHRoKSAvIHRvdGFsV2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZpZXdGcm9tID0gZmluZFBvc2l0aW9uKHN0cnVjdHVyZSwgbGVmdCk7XG4gICAgICAgICAgICAgICAgdmlld1RvID0gZmluZFBvc2l0aW9uKHN0cnVjdHVyZSwgcmlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZpZXdGcm9tID4gbGluZS5mcm9tKVxuICAgICAgICAgICAgICAgIGFkZEdhcChsaW5lLmZyb20sIHZpZXdGcm9tLCBsaW5lLCBzdHJ1Y3R1cmUpO1xuICAgICAgICAgICAgaWYgKHZpZXdUbyA8IGxpbmUudG8pXG4gICAgICAgICAgICAgICAgYWRkR2FwKHZpZXdUbywgbGluZS50bywgbGluZSwgc3RydWN0dXJlKTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgbGluZSBvZiB0aGlzLnZpZXdwb3J0TGluZXMpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGxpbmUudHlwZSkpXG4gICAgICAgICAgICAgICAgbGluZS50eXBlLmZvckVhY2goY2hlY2tMaW5lKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjaGVja0xpbmUobGluZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhcHM7XG4gICAgfVxuICAgIGdhcFNpemUobGluZSwgZnJvbSwgdG8sIHN0cnVjdHVyZSkge1xuICAgICAgICBsZXQgZnJhY3Rpb24gPSBmaW5kRnJhY3Rpb24oc3RydWN0dXJlLCB0bykgLSBmaW5kRnJhY3Rpb24oc3RydWN0dXJlLCBmcm9tKTtcbiAgICAgICAgaWYgKHRoaXMuaGVpZ2h0T3JhY2xlLmxpbmVXcmFwcGluZykge1xuICAgICAgICAgICAgcmV0dXJuIGxpbmUuaGVpZ2h0ICogZnJhY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3RydWN0dXJlLnRvdGFsICogdGhpcy5oZWlnaHRPcmFjbGUuY2hhcldpZHRoICogZnJhY3Rpb247XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlTGluZUdhcHMoZ2Fwcykge1xuICAgICAgICBpZiAoIUxpbmVHYXAuc2FtZShnYXBzLCB0aGlzLmxpbmVHYXBzKSkge1xuICAgICAgICAgICAgdGhpcy5saW5lR2FwcyA9IGdhcHM7XG4gICAgICAgICAgICB0aGlzLmxpbmVHYXBEZWNvID0gRGVjb3JhdGlvbi5zZXQoZ2Fwcy5tYXAoZ2FwID0+IGdhcC5kcmF3KHRoaXMsIHRoaXMuaGVpZ2h0T3JhY2xlLmxpbmVXcmFwcGluZykpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wdXRlVmlzaWJsZVJhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGxldCBkZWNvID0gdGhpcy5zdGF0ZURlY287XG4gICAgICAgIGlmICh0aGlzLmxpbmVHYXBzLmxlbmd0aClcbiAgICAgICAgICAgIGRlY28gPSBkZWNvLmNvbmNhdCh0aGlzLmxpbmVHYXBEZWNvKTtcbiAgICAgICAgbGV0IHJhbmdlcyA9IFtdO1xuICAgICAgICBSYW5nZVNldC5zcGFucyhkZWNvLCB0aGlzLnZpZXdwb3J0LmZyb20sIHRoaXMudmlld3BvcnQudG8sIHtcbiAgICAgICAgICAgIHNwYW4oZnJvbSwgdG8pIHsgcmFuZ2VzLnB1c2goeyBmcm9tLCB0byB9KTsgfSxcbiAgICAgICAgICAgIHBvaW50KCkgeyB9XG4gICAgICAgIH0sIDIwKTtcbiAgICAgICAgbGV0IGNoYW5nZWQgPSAwO1xuICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aCAhPSB0aGlzLnZpc2libGVSYW5nZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjaGFuZ2VkID0gOCAvKiBVcGRhdGVGbGFnLlZpZXdwb3J0TW92ZWQgKi8gfCA0IC8qIFVwZGF0ZUZsYWcuVmlld3BvcnQgKi87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGggJiYgIShjaGFuZ2VkICYgOCAvKiBVcGRhdGVGbGFnLlZpZXdwb3J0TW92ZWQgKi8pOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgb2xkID0gdGhpcy52aXNpYmxlUmFuZ2VzW2ldLCBudyA9IHJhbmdlc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAob2xkLmZyb20gIT0gbncuZnJvbSB8fCBvbGQudG8gIT0gbncudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCB8PSA0IC8qIFVwZGF0ZUZsYWcuVmlld3BvcnQgKi87XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGNoYW5nZXMgJiYgY2hhbmdlcy5tYXBQb3Mob2xkLmZyb20sIC0xKSA9PSBudy5mcm9tICYmIGNoYW5nZXMubWFwUG9zKG9sZC50bywgMSkgPT0gbncudG8pKVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCB8PSA4IC8qIFVwZGF0ZUZsYWcuVmlld3BvcnRNb3ZlZCAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52aXNpYmxlUmFuZ2VzID0gcmFuZ2VzO1xuICAgICAgICByZXR1cm4gY2hhbmdlZDtcbiAgICB9XG4gICAgbGluZUJsb2NrQXQocG9zKSB7XG4gICAgICAgIHJldHVybiAocG9zID49IHRoaXMudmlld3BvcnQuZnJvbSAmJiBwb3MgPD0gdGhpcy52aWV3cG9ydC50byAmJlxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydExpbmVzLmZpbmQoYiA9PiBiLmZyb20gPD0gcG9zICYmIGIudG8gPj0gcG9zKSkgfHxcbiAgICAgICAgICAgIHNjYWxlQmxvY2sodGhpcy5oZWlnaHRNYXAubGluZUF0KHBvcywgUXVlcnlUeXBlLkJ5UG9zLCB0aGlzLmhlaWdodE9yYWNsZSwgMCwgMCksIHRoaXMuc2NhbGVyKTtcbiAgICB9XG4gICAgbGluZUJsb2NrQXRIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiAoaGVpZ2h0ID49IHRoaXMudmlld3BvcnRMaW5lc1swXS50b3AgJiYgaGVpZ2h0IDw9IHRoaXMudmlld3BvcnRMaW5lc1t0aGlzLnZpZXdwb3J0TGluZXMubGVuZ3RoIC0gMV0uYm90dG9tICYmXG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0TGluZXMuZmluZChsID0+IGwudG9wIDw9IGhlaWdodCAmJiBsLmJvdHRvbSA+PSBoZWlnaHQpKSB8fFxuICAgICAgICAgICAgc2NhbGVCbG9jayh0aGlzLmhlaWdodE1hcC5saW5lQXQodGhpcy5zY2FsZXIuZnJvbURPTShoZWlnaHQpLCBRdWVyeVR5cGUuQnlIZWlnaHQsIHRoaXMuaGVpZ2h0T3JhY2xlLCAwLCAwKSwgdGhpcy5zY2FsZXIpO1xuICAgIH1cbiAgICBzY3JvbGxBbmNob3JBdChzY3JvbGxUb3ApIHtcbiAgICAgICAgbGV0IGJsb2NrID0gdGhpcy5saW5lQmxvY2tBdEhlaWdodChzY3JvbGxUb3AgKyA4KTtcbiAgICAgICAgcmV0dXJuIGJsb2NrLmZyb20gPj0gdGhpcy52aWV3cG9ydC5mcm9tIHx8IHRoaXMudmlld3BvcnRMaW5lc1swXS50b3AgLSBzY3JvbGxUb3AgPiAyMDAgPyBibG9jayA6IHRoaXMudmlld3BvcnRMaW5lc1swXTtcbiAgICB9XG4gICAgZWxlbWVudEF0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICByZXR1cm4gc2NhbGVCbG9jayh0aGlzLmhlaWdodE1hcC5ibG9ja0F0KHRoaXMuc2NhbGVyLmZyb21ET00oaGVpZ2h0KSwgdGhpcy5oZWlnaHRPcmFjbGUsIDAsIDApLCB0aGlzLnNjYWxlcik7XG4gICAgfVxuICAgIGdldCBkb2NIZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjYWxlci50b0RPTSh0aGlzLmhlaWdodE1hcC5oZWlnaHQpO1xuICAgIH1cbiAgICBnZXQgY29udGVudEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jSGVpZ2h0ICsgdGhpcy5wYWRkaW5nVG9wICsgdGhpcy5wYWRkaW5nQm90dG9tO1xuICAgIH1cbn1cbmNsYXNzIFZpZXdwb3J0IHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bykge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgfVxufVxuZnVuY3Rpb24gbGluZVN0cnVjdHVyZShmcm9tLCB0bywgc3RhdGVEZWNvKSB7XG4gICAgbGV0IHJhbmdlcyA9IFtdLCBwb3MgPSBmcm9tLCB0b3RhbCA9IDA7XG4gICAgUmFuZ2VTZXQuc3BhbnMoc3RhdGVEZWNvLCBmcm9tLCB0bywge1xuICAgICAgICBzcGFuKCkgeyB9LFxuICAgICAgICBwb2ludChmcm9tLCB0bykge1xuICAgICAgICAgICAgaWYgKGZyb20gPiBwb3MpIHtcbiAgICAgICAgICAgICAgICByYW5nZXMucHVzaCh7IGZyb206IHBvcywgdG86IGZyb20gfSk7XG4gICAgICAgICAgICAgICAgdG90YWwgKz0gZnJvbSAtIHBvcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyA9IHRvO1xuICAgICAgICB9XG4gICAgfSwgMjApOyAvLyBXZSdyZSBvbmx5IGludGVyZXN0ZWQgaW4gY29sbGFwc2VkIHJhbmdlcyBvZiBhIHNpZ25pZmljYW50IHNpemVcbiAgICBpZiAocG9zIDwgdG8pIHtcbiAgICAgICAgcmFuZ2VzLnB1c2goeyBmcm9tOiBwb3MsIHRvIH0pO1xuICAgICAgICB0b3RhbCArPSB0byAtIHBvcztcbiAgICB9XG4gICAgcmV0dXJuIHsgdG90YWwsIHJhbmdlcyB9O1xufVxuZnVuY3Rpb24gZmluZFBvc2l0aW9uKHsgdG90YWwsIHJhbmdlcyB9LCByYXRpbykge1xuICAgIGlmIChyYXRpbyA8PSAwKVxuICAgICAgICByZXR1cm4gcmFuZ2VzWzBdLmZyb207XG4gICAgaWYgKHJhdGlvID49IDEpXG4gICAgICAgIHJldHVybiByYW5nZXNbcmFuZ2VzLmxlbmd0aCAtIDFdLnRvO1xuICAgIGxldCBkaXN0ID0gTWF0aC5mbG9vcih0b3RhbCAqIHJhdGlvKTtcbiAgICBmb3IgKGxldCBpID0gMDs7IGkrKykge1xuICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gcmFuZ2VzW2ldLCBzaXplID0gdG8gLSBmcm9tO1xuICAgICAgICBpZiAoZGlzdCA8PSBzaXplKVxuICAgICAgICAgICAgcmV0dXJuIGZyb20gKyBkaXN0O1xuICAgICAgICBkaXN0IC09IHNpemU7XG4gICAgfVxufVxuZnVuY3Rpb24gZmluZEZyYWN0aW9uKHN0cnVjdHVyZSwgcG9zKSB7XG4gICAgbGV0IGNvdW50ZWQgPSAwO1xuICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiBzdHJ1Y3R1cmUucmFuZ2VzKSB7XG4gICAgICAgIGlmIChwb3MgPD0gdG8pIHtcbiAgICAgICAgICAgIGNvdW50ZWQgKz0gcG9zIC0gZnJvbTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNvdW50ZWQgKz0gdG8gLSBmcm9tO1xuICAgIH1cbiAgICByZXR1cm4gY291bnRlZCAvIHN0cnVjdHVyZS50b3RhbDtcbn1cbmZ1bmN0aW9uIGZpbmQoYXJyYXksIGYpIHtcbiAgICBmb3IgKGxldCB2YWwgb2YgYXJyYXkpXG4gICAgICAgIGlmIChmKHZhbCkpXG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vLyBEb24ndCBzY2FsZSB3aGVuIHRoZSBkb2N1bWVudCBoZWlnaHQgaXMgd2l0aGluIHRoZSByYW5nZSBvZiB3aGF0XG4vLyB0aGUgRE9NIGNhbiBoYW5kbGUuXG5jb25zdCBJZFNjYWxlciA9IHtcbiAgICB0b0RPTShuKSB7IHJldHVybiBuOyB9LFxuICAgIGZyb21ET00obikgeyByZXR1cm4gbjsgfSxcbiAgICBzY2FsZTogMSxcbiAgICBlcShvdGhlcikgeyByZXR1cm4gb3RoZXIgPT0gdGhpczsgfVxufTtcbmZ1bmN0aW9uIHN0YXRpY0RlY28oc3RhdGUpIHtcbiAgICBsZXQgZGVjbyA9IHN0YXRlLmZhY2V0KGRlY29yYXRpb25zKS5maWx0ZXIoZCA9PiB0eXBlb2YgZCAhPSBcImZ1bmN0aW9uXCIpO1xuICAgIGxldCBvdXRlciA9IHN0YXRlLmZhY2V0KG91dGVyRGVjb3JhdGlvbnMpLmZpbHRlcihkID0+IHR5cGVvZiBkICE9IFwiZnVuY3Rpb25cIik7XG4gICAgaWYgKG91dGVyLmxlbmd0aClcbiAgICAgICAgZGVjby5wdXNoKFJhbmdlU2V0LmpvaW4ob3V0ZXIpKTtcbiAgICByZXR1cm4gZGVjbztcbn1cbi8vIFdoZW4gdGhlIGhlaWdodCBpcyB0b28gYmlnICg+IFZQLk1heERPTUhlaWdodCksIHNjYWxlIGRvd24gdGhlXG4vLyByZWdpb25zIG91dHNpZGUgdGhlIHZpZXdwb3J0cyBzbyB0aGF0IHRoZSB0b3RhbCBoZWlnaHQgaXNcbi8vIFZQLk1heERPTUhlaWdodC5cbmNsYXNzIEJpZ1NjYWxlciB7XG4gICAgY29uc3RydWN0b3Iob3JhY2xlLCBoZWlnaHRNYXAsIHZpZXdwb3J0cykge1xuICAgICAgICBsZXQgdnBIZWlnaHQgPSAwLCBiYXNlID0gMCwgZG9tQmFzZSA9IDA7XG4gICAgICAgIHRoaXMudmlld3BvcnRzID0gdmlld3BvcnRzLm1hcCgoeyBmcm9tLCB0byB9KSA9PiB7XG4gICAgICAgICAgICBsZXQgdG9wID0gaGVpZ2h0TWFwLmxpbmVBdChmcm9tLCBRdWVyeVR5cGUuQnlQb3MsIG9yYWNsZSwgMCwgMCkudG9wO1xuICAgICAgICAgICAgbGV0IGJvdHRvbSA9IGhlaWdodE1hcC5saW5lQXQodG8sIFF1ZXJ5VHlwZS5CeVBvcywgb3JhY2xlLCAwLCAwKS5ib3R0b207XG4gICAgICAgICAgICB2cEhlaWdodCArPSBib3R0b20gLSB0b3A7XG4gICAgICAgICAgICByZXR1cm4geyBmcm9tLCB0bywgdG9wLCBib3R0b20sIGRvbVRvcDogMCwgZG9tQm90dG9tOiAwIH07XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNjYWxlID0gKDcwMDAwMDAgLyogVlAuTWF4RE9NSGVpZ2h0ICovIC0gdnBIZWlnaHQpIC8gKGhlaWdodE1hcC5oZWlnaHQgLSB2cEhlaWdodCk7XG4gICAgICAgIGZvciAobGV0IG9iaiBvZiB0aGlzLnZpZXdwb3J0cykge1xuICAgICAgICAgICAgb2JqLmRvbVRvcCA9IGRvbUJhc2UgKyAob2JqLnRvcCAtIGJhc2UpICogdGhpcy5zY2FsZTtcbiAgICAgICAgICAgIGRvbUJhc2UgPSBvYmouZG9tQm90dG9tID0gb2JqLmRvbVRvcCArIChvYmouYm90dG9tIC0gb2JqLnRvcCk7XG4gICAgICAgICAgICBiYXNlID0gb2JqLmJvdHRvbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b0RPTShuKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBiYXNlID0gMCwgZG9tQmFzZSA9IDA7OyBpKyspIHtcbiAgICAgICAgICAgIGxldCB2cCA9IGkgPCB0aGlzLnZpZXdwb3J0cy5sZW5ndGggPyB0aGlzLnZpZXdwb3J0c1tpXSA6IG51bGw7XG4gICAgICAgICAgICBpZiAoIXZwIHx8IG4gPCB2cC50b3ApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvbUJhc2UgKyAobiAtIGJhc2UpICogdGhpcy5zY2FsZTtcbiAgICAgICAgICAgIGlmIChuIDw9IHZwLmJvdHRvbSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdnAuZG9tVG9wICsgKG4gLSB2cC50b3ApO1xuICAgICAgICAgICAgYmFzZSA9IHZwLmJvdHRvbTtcbiAgICAgICAgICAgIGRvbUJhc2UgPSB2cC5kb21Cb3R0b207XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnJvbURPTShuKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBiYXNlID0gMCwgZG9tQmFzZSA9IDA7OyBpKyspIHtcbiAgICAgICAgICAgIGxldCB2cCA9IGkgPCB0aGlzLnZpZXdwb3J0cy5sZW5ndGggPyB0aGlzLnZpZXdwb3J0c1tpXSA6IG51bGw7XG4gICAgICAgICAgICBpZiAoIXZwIHx8IG4gPCB2cC5kb21Ub3ApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJhc2UgKyAobiAtIGRvbUJhc2UpIC8gdGhpcy5zY2FsZTtcbiAgICAgICAgICAgIGlmIChuIDw9IHZwLmRvbUJvdHRvbSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdnAudG9wICsgKG4gLSB2cC5kb21Ub3ApO1xuICAgICAgICAgICAgYmFzZSA9IHZwLmJvdHRvbTtcbiAgICAgICAgICAgIGRvbUJhc2UgPSB2cC5kb21Cb3R0b207XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBCaWdTY2FsZXIpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5zY2FsZSA9PSBvdGhlci5zY2FsZSAmJiB0aGlzLnZpZXdwb3J0cy5sZW5ndGggPT0gb3RoZXIudmlld3BvcnRzLmxlbmd0aCAmJlxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydHMuZXZlcnkoKHZwLCBpKSA9PiB2cC5mcm9tID09IG90aGVyLnZpZXdwb3J0c1tpXS5mcm9tICYmIHZwLnRvID09IG90aGVyLnZpZXdwb3J0c1tpXS50byk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2NhbGVCbG9jayhibG9jaywgc2NhbGVyKSB7XG4gICAgaWYgKHNjYWxlci5zY2FsZSA9PSAxKVxuICAgICAgICByZXR1cm4gYmxvY2s7XG4gICAgbGV0IGJUb3AgPSBzY2FsZXIudG9ET00oYmxvY2sudG9wKSwgYkJvdHRvbSA9IHNjYWxlci50b0RPTShibG9jay5ib3R0b20pO1xuICAgIHJldHVybiBuZXcgQmxvY2tJbmZvKGJsb2NrLmZyb20sIGJsb2NrLmxlbmd0aCwgYlRvcCwgYkJvdHRvbSAtIGJUb3AsIEFycmF5LmlzQXJyYXkoYmxvY2suX2NvbnRlbnQpID8gYmxvY2suX2NvbnRlbnQubWFwKGIgPT4gc2NhbGVCbG9jayhiLCBzY2FsZXIpKSA6IGJsb2NrLl9jb250ZW50KTtcbn1cblxuY29uc3QgdGhlbWUgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHsgY29tYmluZTogc3RycyA9PiBzdHJzLmpvaW4oXCIgXCIpIH0pO1xuY29uc3QgZGFya1RoZW1lID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7IGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuaW5kZXhPZih0cnVlKSA+IC0xIH0pO1xuY29uc3QgYmFzZVRoZW1lSUQgPSAvKkBfX1BVUkVfXyovU3R5bGVNb2R1bGUubmV3TmFtZSgpLCBiYXNlTGlnaHRJRCA9IC8qQF9fUFVSRV9fKi9TdHlsZU1vZHVsZS5uZXdOYW1lKCksIGJhc2VEYXJrSUQgPSAvKkBfX1BVUkVfXyovU3R5bGVNb2R1bGUubmV3TmFtZSgpO1xuY29uc3QgbGlnaHREYXJrSURzID0geyBcIiZsaWdodFwiOiBcIi5cIiArIGJhc2VMaWdodElELCBcIiZkYXJrXCI6IFwiLlwiICsgYmFzZURhcmtJRCB9O1xuZnVuY3Rpb24gYnVpbGRUaGVtZShtYWluLCBzcGVjLCBzY29wZXMpIHtcbiAgICByZXR1cm4gbmV3IFN0eWxlTW9kdWxlKHNwZWMsIHtcbiAgICAgICAgZmluaXNoKHNlbCkge1xuICAgICAgICAgICAgcmV0dXJuIC8mLy50ZXN0KHNlbCkgPyBzZWwucmVwbGFjZSgvJlxcdyovLCBtID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobSA9PSBcIiZcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1haW47XG4gICAgICAgICAgICAgICAgaWYgKCFzY29wZXMgfHwgIXNjb3Blc1ttXSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYFVuc3VwcG9ydGVkIHNlbGVjdG9yOiAke219YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjb3Blc1ttXTtcbiAgICAgICAgICAgIH0pIDogbWFpbiArIFwiIFwiICsgc2VsO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5jb25zdCBiYXNlVGhlbWUkMSA9IC8qQF9fUFVSRV9fKi9idWlsZFRoZW1lKFwiLlwiICsgYmFzZVRoZW1lSUQsIHtcbiAgICBcIiZcIjoge1xuICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZSAhaW1wb3J0YW50XCIsXG4gICAgICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gICAgICAgIFwiJi5jbS1mb2N1c2VkXCI6IHtcbiAgICAgICAgICAgIC8vIFByb3ZpZGUgYSBzaW1wbGUgZGVmYXVsdCBvdXRsaW5lIHRvIG1ha2Ugc3VyZSBhIGZvY3VzZWRcbiAgICAgICAgICAgIC8vIGVkaXRvciBpcyB2aXN1YWxseSBkaXN0aW5jdC4gQ2FuJ3QgbGVhdmUgdGhlIGRlZmF1bHQgYmVoYXZpb3JcbiAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhhdCB3aWxsIGFwcGx5IHRvIHRoZSBjb250ZW50IGVsZW1lbnQsIHdoaWNoIGlzXG4gICAgICAgICAgICAvLyBpbnNpZGUgdGhlIHNjcm9sbGFibGUgY29udGFpbmVyIGFuZCBkb2Vzbid0IGluY2x1ZGUgdGhlXG4gICAgICAgICAgICAvLyBndXR0ZXJzLiBXZSBhbHNvIGNhbid0IHVzZSBhbiAnYXV0bycgb3V0bGluZSwgc2luY2UgdGhvc2VcbiAgICAgICAgICAgIC8vIGFyZSwgZm9yIHNvbWUgcmVhc29uLCBkcmF3biBiZWhpbmQgdGhlIGVsZW1lbnQgY29udGVudCwgd2hpY2hcbiAgICAgICAgICAgIC8vIHdpbGwgY2F1c2UgdGhpbmdzIGxpa2UgdGhlIGFjdGl2ZSBsaW5lIGJhY2tncm91bmQgdG8gY292ZXJcbiAgICAgICAgICAgIC8vIHRoZSBvdXRsaW5lICgjMjk3KS5cbiAgICAgICAgICAgIG91dGxpbmU6IFwiMXB4IGRvdHRlZCAjMjEyMTIxXCJcbiAgICAgICAgfSxcbiAgICAgICAgZGlzcGxheTogXCJmbGV4ICFpbXBvcnRhbnRcIixcbiAgICAgICAgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIlxuICAgIH0sXG4gICAgXCIuY20tc2Nyb2xsZXJcIjoge1xuICAgICAgICBkaXNwbGF5OiBcImZsZXggIWltcG9ydGFudFwiLFxuICAgICAgICBhbGlnbkl0ZW1zOiBcImZsZXgtc3RhcnQgIWltcG9ydGFudFwiLFxuICAgICAgICBmb250RmFtaWx5OiBcIm1vbm9zcGFjZVwiLFxuICAgICAgICBsaW5lSGVpZ2h0OiAxLjQsXG4gICAgICAgIGhlaWdodDogXCIxMDAlXCIsXG4gICAgICAgIG92ZXJmbG93WDogXCJhdXRvXCIsXG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgIHpJbmRleDogMCxcbiAgICAgICAgb3ZlcmZsb3dBbmNob3I6IFwibm9uZVwiLFxuICAgIH0sXG4gICAgXCIuY20tY29udGVudFwiOiB7XG4gICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgZmxleEdyb3c6IDIsXG4gICAgICAgIGZsZXhTaHJpbms6IDAsXG4gICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIixcbiAgICAgICAgd2hpdGVTcGFjZTogXCJwcmVcIixcbiAgICAgICAgd29yZFdyYXA6IFwibm9ybWFsXCIsIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2RlbWlycm9yL2Rldi9pc3N1ZXMvNDU2XG4gICAgICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gICAgICAgIG1pbkhlaWdodDogXCIxMDAlXCIsXG4gICAgICAgIHBhZGRpbmc6IFwiNHB4IDBcIixcbiAgICAgICAgb3V0bGluZTogXCJub25lXCIsXG4gICAgICAgIFwiJltjb250ZW50ZWRpdGFibGU9dHJ1ZV1cIjoge1xuICAgICAgICAgICAgV2Via2l0VXNlck1vZGlmeTogXCJyZWFkLXdyaXRlLXBsYWludGV4dC1vbmx5XCIsXG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwiLmNtLWxpbmVXcmFwcGluZ1wiOiB7XG4gICAgICAgIHdoaXRlU3BhY2VfZmFsbGJhY2s6IFwicHJlLXdyYXBcIiwgLy8gRm9yIElFXG4gICAgICAgIHdoaXRlU3BhY2U6IFwiYnJlYWstc3BhY2VzXCIsXG4gICAgICAgIHdvcmRCcmVhazogXCJicmVhay13b3JkXCIsIC8vIEZvciBTYWZhcmksIHdoaWNoIGRvZXNuJ3Qgc3VwcG9ydCBvdmVyZmxvdy13cmFwOiBhbnl3aGVyZVxuICAgICAgICBvdmVyZmxvd1dyYXA6IFwiYW55d2hlcmVcIixcbiAgICAgICAgZmxleFNocmluazogMVxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLWNvbnRlbnRcIjogeyBjYXJldENvbG9yOiBcImJsYWNrXCIgfSxcbiAgICBcIiZkYXJrIC5jbS1jb250ZW50XCI6IHsgY2FyZXRDb2xvcjogXCJ3aGl0ZVwiIH0sXG4gICAgXCIuY20tbGluZVwiOiB7XG4gICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIixcbiAgICAgICAgcGFkZGluZzogXCIwIDJweCAwIDZweFwiXG4gICAgfSxcbiAgICBcIi5jbS1sYXllclwiOiB7XG4gICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgY29udGFpbjogXCJzaXplIHN0eWxlXCIsXG4gICAgICAgIFwiJiA+ICpcIjoge1xuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIlxuICAgICAgICB9XG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tc2VsZWN0aW9uQmFja2dyb3VuZFwiOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IFwiI2Q5ZDlkOVwiXG4gICAgfSxcbiAgICBcIiZkYXJrIC5jbS1zZWxlY3Rpb25CYWNrZ3JvdW5kXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZDogXCIjMjIyXCJcbiAgICB9LFxuICAgIFwiJmxpZ2h0LmNtLWZvY3VzZWQgPiAuY20tc2Nyb2xsZXIgPiAuY20tc2VsZWN0aW9uTGF5ZXIgLmNtLXNlbGVjdGlvbkJhY2tncm91bmRcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBcIiNkN2Q0ZjBcIlxuICAgIH0sXG4gICAgXCImZGFyay5jbS1mb2N1c2VkID4gLmNtLXNjcm9sbGVyID4gLmNtLXNlbGVjdGlvbkxheWVyIC5jbS1zZWxlY3Rpb25CYWNrZ3JvdW5kXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZDogXCIjMjMzXCJcbiAgICB9LFxuICAgIFwiLmNtLWN1cnNvckxheWVyXCI6IHtcbiAgICAgICAgcG9pbnRlckV2ZW50czogXCJub25lXCJcbiAgICB9LFxuICAgIFwiJi5jbS1mb2N1c2VkID4gLmNtLXNjcm9sbGVyID4gLmNtLWN1cnNvckxheWVyXCI6IHtcbiAgICAgICAgYW5pbWF0aW9uOiBcInN0ZXBzKDEpIGNtLWJsaW5rIDEuMnMgaW5maW5pdGVcIlxuICAgIH0sXG4gICAgLy8gVHdvIGFuaW1hdGlvbnMgZGVmaW5lZCBzbyB0aGF0IHdlIGNhbiBzd2l0Y2ggYmV0d2VlbiB0aGVtIHRvXG4gICAgLy8gcmVzdGFydCB0aGUgYW5pbWF0aW9uIHdpdGhvdXQgZm9yY2luZyBhbm90aGVyIHN0eWxlXG4gICAgLy8gcmVjb21wdXRhdGlvbi5cbiAgICBcIkBrZXlmcmFtZXMgY20tYmxpbmtcIjogeyBcIjAlXCI6IHt9LCBcIjUwJVwiOiB7IG9wYWNpdHk6IDAgfSwgXCIxMDAlXCI6IHt9IH0sXG4gICAgXCJAa2V5ZnJhbWVzIGNtLWJsaW5rMlwiOiB7IFwiMCVcIjoge30sIFwiNTAlXCI6IHsgb3BhY2l0eTogMCB9LCBcIjEwMCVcIjoge30gfSxcbiAgICBcIi5jbS1jdXJzb3IsIC5jbS1kcm9wQ3Vyc29yXCI6IHtcbiAgICAgICAgYm9yZGVyTGVmdDogXCIxLjJweCBzb2xpZCBibGFja1wiLFxuICAgICAgICBtYXJnaW5MZWZ0OiBcIi0wLjZweFwiLFxuICAgICAgICBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIixcbiAgICB9LFxuICAgIFwiLmNtLWN1cnNvclwiOiB7XG4gICAgICAgIGRpc3BsYXk6IFwibm9uZVwiXG4gICAgfSxcbiAgICBcIiZkYXJrIC5jbS1jdXJzb3JcIjoge1xuICAgICAgICBib3JkZXJMZWZ0Q29sb3I6IFwiI2RkZFwiXG4gICAgfSxcbiAgICBcIi5jbS1kcm9wQ3Vyc29yXCI6IHtcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIlxuICAgIH0sXG4gICAgXCImLmNtLWZvY3VzZWQgPiAuY20tc2Nyb2xsZXIgPiAuY20tY3Vyc29yTGF5ZXIgLmNtLWN1cnNvclwiOiB7XG4gICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIlxuICAgIH0sXG4gICAgXCIuY20taXNvXCI6IHtcbiAgICAgICAgdW5pY29kZUJpZGk6IFwiaXNvbGF0ZVwiXG4gICAgfSxcbiAgICBcIi5jbS1hbm5vdW5jZWRcIjoge1xuICAgICAgICBwb3NpdGlvbjogXCJmaXhlZFwiLFxuICAgICAgICB0b3A6IFwiLTEwMDAwcHhcIlxuICAgIH0sXG4gICAgXCJAbWVkaWEgcHJpbnRcIjoge1xuICAgICAgICBcIi5jbS1hbm5vdW5jZWRcIjogeyBkaXNwbGF5OiBcIm5vbmVcIiB9XG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tYWN0aXZlTGluZVwiOiB7IGJhY2tncm91bmRDb2xvcjogXCIjY2NlZWZmNDRcIiB9LFxuICAgIFwiJmRhcmsgLmNtLWFjdGl2ZUxpbmVcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwiIzk5ZWVmZjMzXCIgfSxcbiAgICBcIiZsaWdodCAuY20tc3BlY2lhbENoYXJcIjogeyBjb2xvcjogXCJyZWRcIiB9LFxuICAgIFwiJmRhcmsgLmNtLXNwZWNpYWxDaGFyXCI6IHsgY29sb3I6IFwiI2Y3OFwiIH0sXG4gICAgXCIuY20tZ3V0dGVyc1wiOiB7XG4gICAgICAgIGZsZXhTaHJpbms6IDAsXG4gICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgICAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgICAgICBib3hTaXppbmc6IFwiYm9yZGVyLWJveFwiLFxuICAgICAgICB6SW5kZXg6IDIwMCxcbiAgICB9LFxuICAgIFwiLmNtLWd1dHRlcnMtYmVmb3JlXCI6IHsgaW5zZXRJbmxpbmVTdGFydDogMCB9LFxuICAgIFwiLmNtLWd1dHRlcnMtYWZ0ZXJcIjogeyBpbnNldElubGluZUVuZDogMCB9LFxuICAgIFwiJmxpZ2h0IC5jbS1ndXR0ZXJzXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNmNWY1ZjVcIixcbiAgICAgICAgY29sb3I6IFwiIzZjNmM2Y1wiLFxuICAgICAgICBib3JkZXI6IFwiMHB4IHNvbGlkICNkZGRcIixcbiAgICAgICAgXCImLmNtLWd1dHRlcnMtYmVmb3JlXCI6IHsgYm9yZGVyUmlnaHRXaWR0aDogXCIxcHhcIiB9LFxuICAgICAgICBcIiYuY20tZ3V0dGVycy1hZnRlclwiOiB7IGJvcmRlckxlZnRXaWR0aDogXCIxcHhcIiB9LFxuICAgIH0sXG4gICAgXCImZGFyayAuY20tZ3V0dGVyc1wiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjMzMzMzM4XCIsXG4gICAgICAgIGNvbG9yOiBcIiNjY2NcIlxuICAgIH0sXG4gICAgXCIuY20tZ3V0dGVyXCI6IHtcbiAgICAgICAgZGlzcGxheTogXCJmbGV4ICFpbXBvcnRhbnRcIiwgLy8gTmVjZXNzYXJ5IC0tIHByZXZlbnRzIG1hcmdpbiBjb2xsYXBzaW5nXG4gICAgICAgIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICAgIGZsZXhTaHJpbms6IDAsXG4gICAgICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gICAgICAgIG1pbkhlaWdodDogXCIxMDAlXCIsXG4gICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiXG4gICAgfSxcbiAgICBcIi5jbS1ndXR0ZXJFbGVtZW50XCI6IHtcbiAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIlxuICAgIH0sXG4gICAgXCIuY20tbGluZU51bWJlcnMgLmNtLWd1dHRlckVsZW1lbnRcIjoge1xuICAgICAgICBwYWRkaW5nOiBcIjAgM3B4IDAgNXB4XCIsXG4gICAgICAgIG1pbldpZHRoOiBcIjIwcHhcIixcbiAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCIsXG4gICAgICAgIHdoaXRlU3BhY2U6IFwibm93cmFwXCJcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS1hY3RpdmVMaW5lR3V0dGVyXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNlMmYyZmZcIlxuICAgIH0sXG4gICAgXCImZGFyayAuY20tYWN0aXZlTGluZUd1dHRlclwiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjMjIyMjI3XCJcbiAgICB9LFxuICAgIFwiLmNtLXBhbmVsc1wiOiB7XG4gICAgICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gICAgICAgIHBvc2l0aW9uOiBcInN0aWNreVwiLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICByaWdodDogMCxcbiAgICAgICAgekluZGV4OiAzMDBcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS1wYW5lbHNcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2Y1ZjVmNVwiLFxuICAgICAgICBjb2xvcjogXCJibGFja1wiXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tcGFuZWxzLXRvcFwiOiB7XG4gICAgICAgIGJvcmRlckJvdHRvbTogXCIxcHggc29saWQgI2RkZFwiXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tcGFuZWxzLWJvdHRvbVwiOiB7XG4gICAgICAgIGJvcmRlclRvcDogXCIxcHggc29saWQgI2RkZFwiXG4gICAgfSxcbiAgICBcIiZkYXJrIC5jbS1wYW5lbHNcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzMzMzMzOFwiLFxuICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiXG4gICAgfSxcbiAgICBcIi5jbS1kaWFsb2dcIjoge1xuICAgICAgICBwYWRkaW5nOiBcIjJweCAxOXB4IDRweCA2cHhcIixcbiAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgXCImIGxhYmVsXCI6IHsgZm9udFNpemU6IFwiODAlXCIgfSxcbiAgICB9LFxuICAgIFwiLmNtLWRpYWxvZy1jbG9zZVwiOiB7XG4gICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgIHRvcDogXCIzcHhcIixcbiAgICAgICAgcmlnaHQ6IFwiNHB4XCIsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJpbmhlcml0XCIsXG4gICAgICAgIGJvcmRlcjogXCJub25lXCIsXG4gICAgICAgIGZvbnQ6IFwiaW5oZXJpdFwiLFxuICAgICAgICBmb250U2l6ZTogXCIxNHB4XCIsXG4gICAgICAgIHBhZGRpbmc6IFwiMFwiXG4gICAgfSxcbiAgICBcIi5jbS10YWJcIjoge1xuICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiLFxuICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcbiAgICAgICAgdmVydGljYWxBbGlnbjogXCJib3R0b21cIlxuICAgIH0sXG4gICAgXCIuY20td2lkZ2V0QnVmZmVyXCI6IHtcbiAgICAgICAgdmVydGljYWxBbGlnbjogXCJ0ZXh0LXRvcFwiLFxuICAgICAgICBoZWlnaHQ6IFwiMWVtXCIsXG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBkaXNwbGF5OiBcImlubGluZVwiXG4gICAgfSxcbiAgICBcIi5jbS1wbGFjZWhvbGRlclwiOiB7XG4gICAgICAgIGNvbG9yOiBcIiM4ODhcIixcbiAgICAgICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIixcbiAgICAgICAgdmVydGljYWxBbGlnbjogXCJ0b3BcIixcbiAgICAgICAgdXNlclNlbGVjdDogXCJub25lXCJcbiAgICB9LFxuICAgIFwiLmNtLWhpZ2hsaWdodFNwYWNlXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcInJhZGlhbC1ncmFkaWVudChjaXJjbGUgYXQgNTAlIDU1JSwgI2FhYSAyMCUsIHRyYW5zcGFyZW50IDUlKVwiLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246IFwiY2VudGVyXCIsXG4gICAgfSxcbiAgICBcIi5jbS1oaWdobGlnaHRUYWJcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJ2RhdGE6aW1hZ2Uvc3ZnK3htbCw8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjIwMFwiIGhlaWdodD1cIjIwXCI+PHBhdGggc3Ryb2tlPVwiJTIzODg4XCIgc3Ryb2tlLXdpZHRoPVwiMVwiIGZpbGw9XCJub25lXCIgZD1cIk0xIDEwSDE5NkwxOTAgNU0xOTAgMTVMMTk2IDEwTTE5NyA0TDE5NyAxNlwiLz48L3N2Zz4nKWAsXG4gICAgICAgIGJhY2tncm91bmRTaXplOiBcImF1dG8gMTAwJVwiLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246IFwicmlnaHQgOTAlXCIsXG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6IFwibm8tcmVwZWF0XCJcbiAgICB9LFxuICAgIFwiLmNtLXRyYWlsaW5nU3BhY2VcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2ZmMzMyMjU1XCJcbiAgICB9LFxuICAgIFwiLmNtLWJ1dHRvblwiOiB7XG4gICAgICAgIHZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgICAgIGNvbG9yOiBcImluaGVyaXRcIixcbiAgICAgICAgZm9udFNpemU6IFwiNzAlXCIsXG4gICAgICAgIHBhZGRpbmc6IFwiLjJlbSAxZW1cIixcbiAgICAgICAgYm9yZGVyUmFkaXVzOiBcIjFweFwiXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tYnV0dG9uXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcImxpbmVhci1ncmFkaWVudCgjZWZmMWY1LCAjZDlkOWRmKVwiLFxuICAgICAgICBib3JkZXI6IFwiMXB4IHNvbGlkICM4ODhcIixcbiAgICAgICAgXCImOmFjdGl2ZVwiOiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IFwibGluZWFyLWdyYWRpZW50KCNiNGI0YjQsICNkMGQzZDYpXCJcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXCImZGFyayAuY20tYnV0dG9uXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcImxpbmVhci1ncmFkaWVudCgjMzkzOTM5LCAjMTExKVwiLFxuICAgICAgICBib3JkZXI6IFwiMXB4IHNvbGlkICM4ODhcIixcbiAgICAgICAgXCImOmFjdGl2ZVwiOiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IFwibGluZWFyLWdyYWRpZW50KCMxMTEsICMzMzMpXCJcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXCIuY20tdGV4dGZpZWxkXCI6IHtcbiAgICAgICAgdmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICAgICAgY29sb3I6IFwiaW5oZXJpdFwiLFxuICAgICAgICBmb250U2l6ZTogXCI3MCVcIixcbiAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCBzaWx2ZXJcIixcbiAgICAgICAgcGFkZGluZzogXCIuMmVtIC41ZW1cIlxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLXRleHRmaWVsZFwiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJ3aGl0ZVwiXG4gICAgfSxcbiAgICBcIiZkYXJrIC5jbS10ZXh0ZmllbGRcIjoge1xuICAgICAgICBib3JkZXI6IFwiMXB4IHNvbGlkICM1NTVcIixcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcImluaGVyaXRcIlxuICAgIH1cbn0sIGxpZ2h0RGFya0lEcyk7XG5cbmNvbnN0IG9ic2VydmVPcHRpb25zID0ge1xuICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxuICAgIHN1YnRyZWU6IHRydWUsXG4gICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICBjaGFyYWN0ZXJEYXRhT2xkVmFsdWU6IHRydWVcbn07XG4vLyBJRTExIGhhcyB2ZXJ5IGJyb2tlbiBtdXRhdGlvbiBvYnNlcnZlcnMsIHNvIHdlIGFsc28gbGlzdGVuIHRvXG4vLyBET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQgdGhlcmVcbmNvbnN0IHVzZUNoYXJEYXRhID0gYnJvd3Nlci5pZSAmJiBicm93c2VyLmllX3ZlcnNpb24gPD0gMTE7XG5jbGFzcyBET01PYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVkaXRDb250ZXh0ID0gbnVsbDtcbiAgICAgICAgLy8gVGhlIGtub3duIHNlbGVjdGlvbi4gS2VwdCBpbiBvdXIgb3duIG9iamVjdCwgYXMgb3Bwb3NlZCB0byBqdXN0XG4gICAgICAgIC8vIGRpcmVjdGx5IGFjY2Vzc2luZyB0aGUgc2VsZWN0aW9uIGJlY2F1c2U6XG4gICAgICAgIC8vICAtIFNhZmFyaSBkb2Vzbid0IHJlcG9ydCB0aGUgcmlnaHQgc2VsZWN0aW9uIGluIHNoYWRvdyBET01cbiAgICAgICAgLy8gIC0gUmVhZGluZyBmcm9tIHRoZSBzZWxlY3Rpb24gZm9yY2VzIGEgRE9NIGxheW91dFxuICAgICAgICAvLyAgLSBUaGlzIHdheSwgd2UgY2FuIGlnbm9yZSBzZWxlY3Rpb25jaGFuZ2UgZXZlbnRzIGlmIHdlIGhhdmVcbiAgICAgICAgLy8gICAgYWxyZWFkeSBzZWVuIHRoZSAnbmV3JyBzZWxlY3Rpb25cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25SYW5nZSA9IG5ldyBET01TZWxlY3Rpb25TdGF0ZTtcbiAgICAgICAgLy8gU2V0IHdoZW4gYSBzZWxlY3Rpb24gY2hhbmdlIGlzIGRldGVjdGVkLCBjbGVhcmVkIG9uIGZsdXNoXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlbGF5ZWRGbHVzaCA9IC0xO1xuICAgICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSAtMTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLmRlbGF5ZWRBbmRyb2lkS2V5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5mbHVzaGluZ0FuZHJvaWRLZXkgPSAtMTtcbiAgICAgICAgdGhpcy5sYXN0Q2hhbmdlID0gMDtcbiAgICAgICAgdGhpcy5zY3JvbGxUYXJnZXRzID0gW107XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZXNpemVTY3JvbGwgPSBudWxsO1xuICAgICAgICB0aGlzLmludGVyc2VjdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdhcEludGVyc2VjdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMuZ2FwcyA9IFtdO1xuICAgICAgICB0aGlzLnByaW50UXVlcnkgPSBudWxsO1xuICAgICAgICAvLyBUaW1lb3V0IGZvciBzY2hlZHVsaW5nIGNoZWNrIG9mIHRoZSBwYXJlbnRzIHRoYXQgbmVlZCBzY3JvbGwgaGFuZGxlcnNcbiAgICAgICAgdGhpcy5wYXJlbnRDaGVjayA9IC0xO1xuICAgICAgICB0aGlzLmRvbSA9IHZpZXcuY29udGVudERPTTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG11dGF0aW9ucyA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBtdXQgb2YgbXV0YXRpb25zKVxuICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaChtdXQpO1xuICAgICAgICAgICAgLy8gSUUxMSB3aWxsIHNvbWV0aW1lcyAob24gdHlwaW5nIG92ZXIgYSBzZWxlY3Rpb24gb3JcbiAgICAgICAgICAgIC8vIGJhY2tzcGFjaW5nIG91dCBhIHNpbmdsZSBjaGFyYWN0ZXIgdGV4dCBub2RlKSBjYWxsIHRoZVxuICAgICAgICAgICAgLy8gb2JzZXJ2ZXIgY2FsbGJhY2sgYmVmb3JlIGFjdHVhbGx5IHVwZGF0aW5nIHRoZSBET00uXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVW5yZWxhdGVkbHksIGlPUyBTYWZhcmkgd2lsbCwgd2hlbiBlbmRpbmcgYSBjb21wb3NpdGlvbixcbiAgICAgICAgICAgIC8vIHNvbWV0aW1lcyBmaXJzdCBjbGVhciBpdCwgZGVsaXZlciB0aGUgbXV0YXRpb25zLCBhbmQgdGhlblxuICAgICAgICAgICAgLy8gcmVpbnNlcnQgdGhlIGZpbmlzaGVkIHRleHQuIENvZGVNaXJyb3IncyBoYW5kbGluZyBvZiB0aGVcbiAgICAgICAgICAgIC8vIGRlbGV0aW9uIHdpbGwgcHJldmVudCB0aGUgcmVpbnNlcnRpb24gZnJvbSBoYXBwZW5pbmcsXG4gICAgICAgICAgICAvLyBicmVha2luZyBjb21wb3NpdGlvbi5cbiAgICAgICAgICAgIGlmICgoYnJvd3Nlci5pZSAmJiBicm93c2VyLmllX3ZlcnNpb24gPD0gMTEgfHwgYnJvd3Nlci5pb3MgJiYgdmlldy5jb21wb3NpbmcpICYmXG4gICAgICAgICAgICAgICAgbXV0YXRpb25zLnNvbWUobSA9PiBtLnR5cGUgPT0gXCJjaGlsZExpc3RcIiAmJiBtLnJlbW92ZWROb2Rlcy5sZW5ndGggfHxcbiAgICAgICAgICAgICAgICAgICAgbS50eXBlID09IFwiY2hhcmFjdGVyRGF0YVwiICYmIG0ub2xkVmFsdWUubGVuZ3RoID4gbS50YXJnZXQubm9kZVZhbHVlLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaFNvb24oKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAod2luZG93LkVkaXRDb250ZXh0ICYmIGJyb3dzZXIuYW5kcm9pZCAmJiB2aWV3LmNvbnN0cnVjdG9yLkVESVRfQ09OVEVYVCAhPT0gZmFsc2UgJiZcbiAgICAgICAgICAgIC8vIENocm9tZSA8MTI2IGRvZXNuJ3Qgc3VwcG9ydCBpbnZlcnRlZCBzZWxlY3Rpb25zIGluIGVkaXQgY29udGV4dCAoIzEzOTIpXG4gICAgICAgICAgICAhKGJyb3dzZXIuY2hyb21lICYmIGJyb3dzZXIuY2hyb21lX3ZlcnNpb24gPCAxMjYpKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRDb250ZXh0ID0gbmV3IEVkaXRDb250ZXh0TWFuYWdlcih2aWV3KTtcbiAgICAgICAgICAgIGlmICh2aWV3LnN0YXRlLmZhY2V0KGVkaXRhYmxlKSlcbiAgICAgICAgICAgICAgICB2aWV3LmNvbnRlbnRET00uZWRpdENvbnRleHQgPSB0aGlzLmVkaXRDb250ZXh0LmVkaXRDb250ZXh0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VDaGFyRGF0YSlcbiAgICAgICAgICAgIHRoaXMub25DaGFyRGF0YSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaCh7IHRhcmdldDogZXZlbnQudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNoYXJhY3RlckRhdGFcIixcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWU6IGV2ZW50LnByZXZWYWx1ZSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXNoU29vbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblNlbGVjdGlvbkNoYW5nZSA9IHRoaXMub25TZWxlY3Rpb25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblJlc2l6ZSA9IHRoaXMub25SZXNpemUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblByaW50ID0gdGhpcy5vblByaW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25TY3JvbGwgPSB0aGlzLm9uU2Nyb2xsLmJpbmQodGhpcyk7XG4gICAgICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYSlcbiAgICAgICAgICAgIHRoaXMucHJpbnRRdWVyeSA9IHdpbmRvdy5tYXRjaE1lZGlhKFwicHJpbnRcIik7XG4gICAgICAgIGlmICh0eXBlb2YgUmVzaXplT2JzZXJ2ZXIgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZVNjcm9sbCA9IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIGlmICgoKF9hID0gdGhpcy52aWV3LmRvY1ZpZXcpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sYXN0VXBkYXRlKSA8IERhdGUubm93KCkgLSA3NSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblJlc2l6ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZVNjcm9sbC5vYnNlcnZlKHZpZXcuc2Nyb2xsRE9NKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZFdpbmRvd0xpc3RlbmVycyh0aGlzLndpbiA9IHZpZXcud2luKTtcbiAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICBpZiAodHlwZW9mIEludGVyc2VjdGlvbk9ic2VydmVyID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb24gPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZW50cmllcyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Q2hlY2sgPCAwKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudENoZWNrID0gc2V0VGltZW91dCh0aGlzLmxpc3RlbkZvclNjcm9sbC5iaW5kKHRoaXMpLCAxMDAwKTtcbiAgICAgICAgICAgICAgICBpZiAoZW50cmllcy5sZW5ndGggPiAwICYmIChlbnRyaWVzW2VudHJpZXMubGVuZ3RoIC0gMV0uaW50ZXJzZWN0aW9uUmF0aW8gPiAwKSAhPSB0aGlzLmludGVyc2VjdGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVyc2VjdGluZyA9ICF0aGlzLmludGVyc2VjdGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJzZWN0aW5nICE9IHRoaXMudmlldy5pblZpZXcpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsQ2hhbmdlZChkb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7IHRocmVzaG9sZDogWzAsIC4wMDFdIH0pO1xuICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb24ub2JzZXJ2ZSh0aGlzLmRvbSk7XG4gICAgICAgICAgICB0aGlzLmdhcEludGVyc2VjdGlvbiA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihlbnRyaWVzID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cmllcy5sZW5ndGggPiAwICYmIGVudHJpZXNbZW50cmllcy5sZW5ndGggLSAxXS5pbnRlcnNlY3Rpb25SYXRpbyA+IDApXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TY3JvbGxDaGFuZ2VkKGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIikpO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlzdGVuRm9yU2Nyb2xsKCk7XG4gICAgICAgIHRoaXMucmVhZFNlbGVjdGlvblJhbmdlKCk7XG4gICAgfVxuICAgIG9uU2Nyb2xsQ2hhbmdlZChlKSB7XG4gICAgICAgIHRoaXMudmlldy5pbnB1dFN0YXRlLnJ1bkhhbmRsZXJzKFwic2Nyb2xsXCIsIGUpO1xuICAgICAgICBpZiAodGhpcy5pbnRlcnNlY3RpbmcpXG4gICAgICAgICAgICB0aGlzLnZpZXcubWVhc3VyZSgpO1xuICAgIH1cbiAgICBvblNjcm9sbChlKSB7XG4gICAgICAgIGlmICh0aGlzLmludGVyc2VjdGluZylcbiAgICAgICAgICAgIHRoaXMuZmx1c2goZmFsc2UpO1xuICAgICAgICBpZiAodGhpcy5lZGl0Q29udGV4dClcbiAgICAgICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLmVkaXRDb250ZXh0Lm1lYXN1cmVSZXEpO1xuICAgICAgICB0aGlzLm9uU2Nyb2xsQ2hhbmdlZChlKTtcbiAgICB9XG4gICAgb25SZXNpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZVRpbWVvdXQgPCAwKVxuICAgICAgICAgICAgdGhpcy5yZXNpemVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVUaW1lb3V0ID0gLTE7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnJlcXVlc3RNZWFzdXJlKCk7XG4gICAgICAgICAgICB9LCA1MCk7XG4gICAgfVxuICAgIG9uUHJpbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKChldmVudC50eXBlID09IFwiY2hhbmdlXCIgfHwgIWV2ZW50LnR5cGUpICYmICFldmVudC5tYXRjaGVzKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnZpZXcudmlld1N0YXRlLnByaW50aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52aWV3Lm1lYXN1cmUoKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnZpZXcudmlld1N0YXRlLnByaW50aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnZpZXcucmVxdWVzdE1lYXN1cmUoKTtcbiAgICAgICAgfSwgNTAwKTtcbiAgICB9XG4gICAgdXBkYXRlR2FwcyhnYXBzKSB7XG4gICAgICAgIGlmICh0aGlzLmdhcEludGVyc2VjdGlvbiAmJiAoZ2Fwcy5sZW5ndGggIT0gdGhpcy5nYXBzLmxlbmd0aCB8fCB0aGlzLmdhcHMuc29tZSgoZywgaSkgPT4gZyAhPSBnYXBzW2ldKSkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FwSW50ZXJzZWN0aW9uLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGdhcCBvZiBnYXBzKVxuICAgICAgICAgICAgICAgIHRoaXMuZ2FwSW50ZXJzZWN0aW9uLm9ic2VydmUoZ2FwKTtcbiAgICAgICAgICAgIHRoaXMuZ2FwcyA9IGdhcHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TZWxlY3Rpb25DaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgbGV0IHdhc0NoYW5nZWQgPSB0aGlzLnNlbGVjdGlvbkNoYW5nZWQ7XG4gICAgICAgIGlmICghdGhpcy5yZWFkU2VsZWN0aW9uUmFuZ2UoKSB8fCB0aGlzLmRlbGF5ZWRBbmRyb2lkS2V5KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgeyB2aWV3IH0gPSB0aGlzLCBzZWwgPSB0aGlzLnNlbGVjdGlvblJhbmdlO1xuICAgICAgICBpZiAodmlldy5zdGF0ZS5mYWNldChlZGl0YWJsZSkgPyB2aWV3LnJvb3QuYWN0aXZlRWxlbWVudCAhPSB0aGlzLmRvbSA6ICFoYXNTZWxlY3Rpb24odGhpcy5kb20sIHNlbCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBjb250ZXh0ID0gc2VsLmFuY2hvck5vZGUgJiYgdmlldy5kb2NWaWV3LnRpbGUubmVhcmVzdChzZWwuYW5jaG9yTm9kZSk7XG4gICAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQuaXNXaWRnZXQoKSAmJiBjb250ZXh0LndpZGdldC5pZ25vcmVFdmVudChldmVudCkpIHtcbiAgICAgICAgICAgIGlmICghd2FzQ2hhbmdlZClcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBEZWxldGlvbnMgb24gSUUxMSBmaXJlIHRoZWlyIGV2ZW50cyBpbiB0aGUgd3Jvbmcgb3JkZXIsIGdpdmluZ1xuICAgICAgICAvLyB1cyBhIHNlbGVjdGlvbiBjaGFuZ2UgZXZlbnQgYmVmb3JlIHRoZSBET00gY2hhbmdlcyBhcmVcbiAgICAgICAgLy8gcmVwb3J0ZWQuXG4gICAgICAgIC8vIENocm9tZSBBbmRyb2lkIGhhcyBhIHNpbWlsYXIgaXNzdWUgd2hlbiBiYWNrc3BhY2luZyBvdXQgYVxuICAgICAgICAvLyBzZWxlY3Rpb24gKCM2NDUpLlxuICAgICAgICBpZiAoKGJyb3dzZXIuaWUgJiYgYnJvd3Nlci5pZV92ZXJzaW9uIDw9IDExIHx8IGJyb3dzZXIuYW5kcm9pZCAmJiBicm93c2VyLmNocm9tZSkgJiYgIXZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uZW1wdHkgJiZcbiAgICAgICAgICAgIC8vIChTZWxlY3Rpb24uaXNDb2xsYXBzZWQgaXNuJ3QgcmVsaWFibGUgb24gSUUpXG4gICAgICAgICAgICBzZWwuZm9jdXNOb2RlICYmIGlzRXF1aXZhbGVudFBvc2l0aW9uKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCwgc2VsLmFuY2hvck5vZGUsIHNlbC5hbmNob3JPZmZzZXQpKVxuICAgICAgICAgICAgdGhpcy5mbHVzaFNvb24oKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5mbHVzaChmYWxzZSk7XG4gICAgfVxuICAgIHJlYWRTZWxlY3Rpb25SYW5nZSgpIHtcbiAgICAgICAgbGV0IHsgdmlldyB9ID0gdGhpcztcbiAgICAgICAgLy8gVGhlIFNlbGVjdGlvbiBvYmplY3QgaXMgYnJva2VuIGluIHNoYWRvdyByb290cyBpbiBTYWZhcmkuIFNlZVxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vY29kZW1pcnJvci9kZXYvaXNzdWVzLzQxNFxuICAgICAgICBsZXQgc2VsZWN0aW9uID0gZ2V0U2VsZWN0aW9uKHZpZXcucm9vdCk7XG4gICAgICAgIGlmICghc2VsZWN0aW9uKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgcmFuZ2UgPSBicm93c2VyLnNhZmFyaSAmJiB2aWV3LnJvb3Qubm9kZVR5cGUgPT0gMTEgJiZcbiAgICAgICAgICAgIHZpZXcucm9vdC5hY3RpdmVFbGVtZW50ID09IHRoaXMuZG9tICYmXG4gICAgICAgICAgICBzYWZhcmlTZWxlY3Rpb25SYW5nZUhhY2sodGhpcy52aWV3LCBzZWxlY3Rpb24pIHx8IHNlbGVjdGlvbjtcbiAgICAgICAgaWYgKCFyYW5nZSB8fCB0aGlzLnNlbGVjdGlvblJhbmdlLmVxKHJhbmdlKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IGxvY2FsID0gaGFzU2VsZWN0aW9uKHRoaXMuZG9tLCByYW5nZSk7XG4gICAgICAgIC8vIERldGVjdCB0aGUgc2l0dWF0aW9uIHdoZXJlIHRoZSBicm93c2VyIGhhcywgb24gZm9jdXMsIG1vdmVkIHRoZVxuICAgICAgICAvLyBzZWxlY3Rpb24gdG8gdGhlIHN0YXJ0IG9mIHRoZSBjb250ZW50IGVsZW1lbnQuIFJlc2V0IGl0IHRvIHRoZVxuICAgICAgICAvLyBwb3NpdGlvbiBmcm9tIHRoZSBlZGl0b3Igc3RhdGUuXG4gICAgICAgIGlmIChsb2NhbCAmJiAhdGhpcy5zZWxlY3Rpb25DaGFuZ2VkICYmXG4gICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUubGFzdEZvY3VzVGltZSA+IERhdGUubm93KCkgLSAyMDAgJiZcbiAgICAgICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5sYXN0VG91Y2hUaW1lIDwgRGF0ZS5ub3coKSAtIDMwMCAmJlxuICAgICAgICAgICAgYXRFbGVtZW50U3RhcnQodGhpcy5kb20sIHJhbmdlKSkge1xuICAgICAgICAgICAgdGhpcy52aWV3LmlucHV0U3RhdGUubGFzdEZvY3VzVGltZSA9IDA7XG4gICAgICAgICAgICB2aWV3LmRvY1ZpZXcudXBkYXRlU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25SYW5nZS5zZXRSYW5nZShyYW5nZSk7XG4gICAgICAgIGlmIChsb2NhbClcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBzZXRTZWxlY3Rpb25SYW5nZShhbmNob3IsIGhlYWQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25SYW5nZS5zZXQoYW5jaG9yLm5vZGUsIGFuY2hvci5vZmZzZXQsIGhlYWQubm9kZSwgaGVhZC5vZmZzZXQpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgY2xlYXJTZWxlY3Rpb25SYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25SYW5nZS5zZXQobnVsbCwgMCwgbnVsbCwgMCk7XG4gICAgfVxuICAgIGxpc3RlbkZvclNjcm9sbCgpIHtcbiAgICAgICAgdGhpcy5wYXJlbnRDaGVjayA9IC0xO1xuICAgICAgICBsZXQgaSA9IDAsIGNoYW5nZWQgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBkb20gPSB0aGlzLmRvbTsgZG9tOykge1xuICAgICAgICAgICAgaWYgKGRvbS5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGFuZ2VkICYmIGkgPCB0aGlzLnNjcm9sbFRhcmdldHMubGVuZ3RoICYmIHRoaXMuc2Nyb2xsVGFyZ2V0c1tpXSA9PSBkb20pXG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghY2hhbmdlZClcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRoaXMuc2Nyb2xsVGFyZ2V0cy5zbGljZSgwLCBpKTtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlZClcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZC5wdXNoKGRvbSk7XG4gICAgICAgICAgICAgICAgZG9tID0gZG9tLmFzc2lnbmVkU2xvdCB8fCBkb20ucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRvbS5ub2RlVHlwZSA9PSAxMSkgeyAvLyBTaGFkb3cgcm9vdFxuICAgICAgICAgICAgICAgIGRvbSA9IGRvbS5ob3N0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPCB0aGlzLnNjcm9sbFRhcmdldHMubGVuZ3RoICYmICFjaGFuZ2VkKVxuICAgICAgICAgICAgY2hhbmdlZCA9IHRoaXMuc2Nyb2xsVGFyZ2V0cy5zbGljZSgwLCBpKTtcbiAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGRvbSBvZiB0aGlzLnNjcm9sbFRhcmdldHMpXG4gICAgICAgICAgICAgICAgZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgICAgICBmb3IgKGxldCBkb20gb2YgdGhpcy5zY3JvbGxUYXJnZXRzID0gY2hhbmdlZClcbiAgICAgICAgICAgICAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZ25vcmUoZikge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuIGYoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgICAgcmV0dXJuIGYoKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy5kb20sIG9ic2VydmVPcHRpb25zKTtcbiAgICAgICAgaWYgKHVzZUNoYXJEYXRhKVxuICAgICAgICAgICAgdGhpcy5kb20uYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiLCB0aGlzLm9uQ2hhckRhdGEpO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICghdGhpcy5hY3RpdmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICBpZiAodXNlQ2hhckRhdGEpXG4gICAgICAgICAgICB0aGlzLmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkXCIsIHRoaXMub25DaGFyRGF0YSk7XG4gICAgfVxuICAgIC8vIFRocm93IGF3YXkgYW55IHBlbmRpbmcgY2hhbmdlc1xuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmRzKCk7XG4gICAgICAgIHRoaXMucXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VkID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIENocm9tZSBBbmRyb2lkLCBlc3BlY2lhbGx5IGluIGNvbWJpbmF0aW9uIHdpdGggR0JvYXJkLCBub3Qgb25seVxuICAgIC8vIGRvZXNuJ3QgcmVsaWFibHkgZmlyZSByZWd1bGFyIGtleSBldmVudHMsIGJ1dCBhbHNvIG9mdGVuXG4gICAgLy8gc3Vycm91bmRzIHRoZSBlZmZlY3Qgb2YgZW50ZXIgb3IgYmFja3NwYWNlIHdpdGggYSBidW5jaCBvZlxuICAgIC8vIGNvbXBvc2l0aW9uIGV2ZW50cyB0aGF0LCB3aGVuIGludGVycnVwdGVkLCBjYXVzZSB0ZXh0IGR1cGxpY2F0aW9uXG4gICAgLy8gb3Igb3RoZXIga2luZHMgb2YgY29ycnVwdGlvbi4gVGhpcyBoYWNrIG1ha2VzIHRoZSBlZGl0b3IgYmFjayBvZmZcbiAgICAvLyBmcm9tIGhhbmRsaW5nIERPTSBjaGFuZ2VzIGZvciBhIG1vbWVudCB3aGVuIHN1Y2ggYSBrZXkgaXNcbiAgICAvLyBkZXRlY3RlZCAodmlhIGJlZm9yZWlucHV0IG9yIGtleWRvd24pLCBhbmQgdGhlbiB0cmllcyB0byBmbHVzaFxuICAgIC8vIHRoZW0gb3IsIGlmIHRoYXQgaGFzIG5vIGVmZmVjdCwgZGlzcGF0Y2hlcyB0aGUgZ2l2ZW4ga2V5LlxuICAgIGRlbGF5QW5kcm9pZEtleShrZXksIGtleUNvZGUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoIXRoaXMuZGVsYXllZEFuZHJvaWRLZXkpIHtcbiAgICAgICAgICAgIGxldCBmbHVzaCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQga2V5ID0gdGhpcy5kZWxheWVkQW5kcm9pZEtleTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJEZWxheWVkQW5kcm9pZEtleSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuaW5wdXRTdGF0ZS5sYXN0S2V5Q29kZSA9IGtleS5rZXlDb2RlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuaW5wdXRTdGF0ZS5sYXN0S2V5VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmbHVzaGVkID0gdGhpcy5mbHVzaCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZsdXNoZWQgJiYga2V5LmZvcmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hLZXkodGhpcy5kb20sIGtleS5rZXksIGtleS5rZXlDb2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5mbHVzaGluZ0FuZHJvaWRLZXkgPSB0aGlzLnZpZXcud2luLnJlcXVlc3RBbmltYXRpb25GcmFtZShmbHVzaCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2luY2UgYmFja3NwYWNlIGJlZm9yZWlucHV0IGlzIHNvbWV0aW1lcyBzaWduYWxsZWQgc3B1cmlvdXNseSxcbiAgICAgICAgLy8gRW50ZXIgYWx3YXlzIHRha2VzIHByZWNlZGVuY2UuXG4gICAgICAgIGlmICghdGhpcy5kZWxheWVkQW5kcm9pZEtleSB8fCBrZXkgPT0gXCJFbnRlclwiKVxuICAgICAgICAgICAgdGhpcy5kZWxheWVkQW5kcm9pZEtleSA9IHtcbiAgICAgICAgICAgICAgICBrZXksIGtleUNvZGUsXG4gICAgICAgICAgICAgICAgLy8gT25seSBydW4gdGhlIGtleSBoYW5kbGVyIHdoZW4gbm8gY2hhbmdlcyBhcmUgZGV0ZWN0ZWQgaWZcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGlzbid0IGNvbWluZyByaWdodCBhZnRlciBhbm90aGVyIGNoYW5nZSwgaW4gd2hpY2ggY2FzZVxuICAgICAgICAgICAgICAgIC8vIGl0IGlzIHByb2JhYmx5IHBhcnQgb2YgYSB3ZWlyZCBjaGFpbiBvZiB1cGRhdGVzLCBhbmQgc2hvdWxkXG4gICAgICAgICAgICAgICAgLy8gYmUgaWdub3JlZCBpZiBpdCByZXR1cm5zIHRoZSBET00gdG8gaXRzIHByZXZpb3VzIHN0YXRlLlxuICAgICAgICAgICAgICAgIGZvcmNlOiB0aGlzLmxhc3RDaGFuZ2UgPCBEYXRlLm5vdygpIC0gNTAgfHwgISEoKF9hID0gdGhpcy5kZWxheWVkQW5kcm9pZEtleSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvcmNlKVxuICAgICAgICAgICAgfTtcbiAgICB9XG4gICAgY2xlYXJEZWxheWVkQW5kcm9pZEtleSgpIHtcbiAgICAgICAgdGhpcy53aW4uY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5mbHVzaGluZ0FuZHJvaWRLZXkpO1xuICAgICAgICB0aGlzLmRlbGF5ZWRBbmRyb2lkS2V5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5mbHVzaGluZ0FuZHJvaWRLZXkgPSAtMTtcbiAgICB9XG4gICAgZmx1c2hTb29uKCkge1xuICAgICAgICBpZiAodGhpcy5kZWxheWVkRmx1c2ggPCAwKVxuICAgICAgICAgICAgdGhpcy5kZWxheWVkRmx1c2ggPSB0aGlzLnZpZXcud2luLnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7IHRoaXMuZGVsYXllZEZsdXNoID0gLTE7IHRoaXMuZmx1c2goKTsgfSk7XG4gICAgfVxuICAgIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLmRlbGF5ZWRGbHVzaCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcud2luLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZGVsYXllZEZsdXNoKTtcbiAgICAgICAgICAgIHRoaXMuZGVsYXllZEZsdXNoID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgIH1cbiAgICBwZW5kaW5nUmVjb3JkcygpIHtcbiAgICAgICAgZm9yIChsZXQgbXV0IG9mIHRoaXMub2JzZXJ2ZXIudGFrZVJlY29yZHMoKSlcbiAgICAgICAgICAgIHRoaXMucXVldWUucHVzaChtdXQpO1xuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZTtcbiAgICB9XG4gICAgcHJvY2Vzc1JlY29yZHMoKSB7XG4gICAgICAgIGxldCByZWNvcmRzID0gdGhpcy5wZW5kaW5nUmVjb3JkcygpO1xuICAgICAgICBpZiAocmVjb3Jkcy5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICAgIGxldCBmcm9tID0gLTEsIHRvID0gLTEsIHR5cGVPdmVyID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IHJlY29yZCBvZiByZWNvcmRzKSB7XG4gICAgICAgICAgICBsZXQgcmFuZ2UgPSB0aGlzLnJlYWRNdXRhdGlvbihyZWNvcmQpO1xuICAgICAgICAgICAgaWYgKCFyYW5nZSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChyYW5nZS50eXBlT3ZlcilcbiAgICAgICAgICAgICAgICB0eXBlT3ZlciA9IHRydWU7XG4gICAgICAgICAgICBpZiAoZnJvbSA9PSAtMSkge1xuICAgICAgICAgICAgICAgICh7IGZyb20sIHRvIH0gPSByYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmcm9tID0gTWF0aC5taW4ocmFuZ2UuZnJvbSwgZnJvbSk7XG4gICAgICAgICAgICAgICAgdG8gPSBNYXRoLm1heChyYW5nZS50bywgdG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZyb20sIHRvLCB0eXBlT3ZlciB9O1xuICAgIH1cbiAgICByZWFkQ2hhbmdlKCkge1xuICAgICAgICBsZXQgeyBmcm9tLCB0bywgdHlwZU92ZXIgfSA9IHRoaXMucHJvY2Vzc1JlY29yZHMoKTtcbiAgICAgICAgbGV0IG5ld1NlbCA9IHRoaXMuc2VsZWN0aW9uQ2hhbmdlZCAmJiBoYXNTZWxlY3Rpb24odGhpcy5kb20sIHRoaXMuc2VsZWN0aW9uUmFuZ2UpO1xuICAgICAgICBpZiAoZnJvbSA8IDAgJiYgIW5ld1NlbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoZnJvbSA+IC0xKVxuICAgICAgICAgICAgdGhpcy5sYXN0Q2hhbmdlID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy52aWV3LmlucHV0U3RhdGUubGFzdEZvY3VzVGltZSA9IDA7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgY2hhbmdlID0gbmV3IERPTUNoYW5nZSh0aGlzLnZpZXcsIGZyb20sIHRvLCB0eXBlT3Zlcik7XG4gICAgICAgIHRoaXMudmlldy5kb2NWaWV3LmRvbUNoYW5nZWQgPSB7IG5ld1NlbDogY2hhbmdlLm5ld1NlbCA/IGNoYW5nZS5uZXdTZWwubWFpbiA6IG51bGwgfTtcbiAgICAgICAgcmV0dXJuIGNoYW5nZTtcbiAgICB9XG4gICAgLy8gQXBwbHkgcGVuZGluZyBjaGFuZ2VzLCBpZiBhbnlcbiAgICBmbHVzaChyZWFkU2VsZWN0aW9uID0gdHJ1ZSkge1xuICAgICAgICAvLyBDb21wbGV0ZWx5IGhvbGQgb2ZmIGZsdXNoaW5nIHdoZW4gcGVuZGluZyBrZXlzIGFyZSBzZXRcdTIwMTR0aGUgY29kZVxuICAgICAgICAvLyBtYW5hZ2luZyB0aG9zZSB3aWxsIG1ha2Ugc3VyZSBwcm9jZXNzUmVjb3JkcyBpcyBjYWxsZWQgYW5kIHRoZVxuICAgICAgICAvLyB2aWV3IGlzIHJlc3luY2hyb25pemVkIGFmdGVyXG4gICAgICAgIGlmICh0aGlzLmRlbGF5ZWRGbHVzaCA+PSAwIHx8IHRoaXMuZGVsYXllZEFuZHJvaWRLZXkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChyZWFkU2VsZWN0aW9uKVxuICAgICAgICAgICAgdGhpcy5yZWFkU2VsZWN0aW9uUmFuZ2UoKTtcbiAgICAgICAgbGV0IGRvbUNoYW5nZSA9IHRoaXMucmVhZENoYW5nZSgpO1xuICAgICAgICBpZiAoIWRvbUNoYW5nZSkge1xuICAgICAgICAgICAgdGhpcy52aWV3LnJlcXVlc3RNZWFzdXJlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0YXJ0U3RhdGUgPSB0aGlzLnZpZXcuc3RhdGU7XG4gICAgICAgIGxldCBoYW5kbGVkID0gYXBwbHlET01DaGFuZ2UodGhpcy52aWV3LCBkb21DaGFuZ2UpO1xuICAgICAgICAvLyBUaGUgdmlldyB3YXNuJ3QgdXBkYXRlZCBidXQgRE9NL3NlbGVjdGlvbiBjaGFuZ2VzIHdlcmUgc2Vlbi4gUmVzZXQgdGhlIHZpZXcuXG4gICAgICAgIGlmICh0aGlzLnZpZXcuc3RhdGUgPT0gc3RhcnRTdGF0ZSAmJlxuICAgICAgICAgICAgKGRvbUNoYW5nZS5kb21DaGFuZ2VkIHx8IGRvbUNoYW5nZS5uZXdTZWwgJiYgIXNhbWVTZWxQb3ModGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbiwgZG9tQ2hhbmdlLm5ld1NlbC5tYWluKSkpXG4gICAgICAgICAgICB0aGlzLnZpZXcudXBkYXRlKFtdKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XG4gICAgfVxuICAgIHJlYWRNdXRhdGlvbihyZWMpIHtcbiAgICAgICAgbGV0IHRpbGUgPSB0aGlzLnZpZXcuZG9jVmlldy50aWxlLm5lYXJlc3QocmVjLnRhcmdldCk7XG4gICAgICAgIGlmICghdGlsZSB8fCB0aWxlLmlzV2lkZ2V0KCkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdGlsZS5tYXJrRGlydHkocmVjLnR5cGUgPT0gXCJhdHRyaWJ1dGVzXCIpO1xuICAgICAgICBpZiAocmVjLnR5cGUgPT0gXCJjaGlsZExpc3RcIikge1xuICAgICAgICAgICAgbGV0IGNoaWxkQmVmb3JlID0gZmluZENoaWxkKHRpbGUsIHJlYy5wcmV2aW91c1NpYmxpbmcgfHwgcmVjLnRhcmdldC5wcmV2aW91c1NpYmxpbmcsIC0xKTtcbiAgICAgICAgICAgIGxldCBjaGlsZEFmdGVyID0gZmluZENoaWxkKHRpbGUsIHJlYy5uZXh0U2libGluZyB8fCByZWMudGFyZ2V0Lm5leHRTaWJsaW5nLCAxKTtcbiAgICAgICAgICAgIHJldHVybiB7IGZyb206IGNoaWxkQmVmb3JlID8gdGlsZS5wb3NBZnRlcihjaGlsZEJlZm9yZSkgOiB0aWxlLnBvc0F0U3RhcnQsXG4gICAgICAgICAgICAgICAgdG86IGNoaWxkQWZ0ZXIgPyB0aWxlLnBvc0JlZm9yZShjaGlsZEFmdGVyKSA6IHRpbGUucG9zQXRFbmQsIHR5cGVPdmVyOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlYy50eXBlID09IFwiY2hhcmFjdGVyRGF0YVwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBmcm9tOiB0aWxlLnBvc0F0U3RhcnQsIHRvOiB0aWxlLnBvc0F0RW5kLCB0eXBlT3ZlcjogcmVjLnRhcmdldC5ub2RlVmFsdWUgPT0gcmVjLm9sZFZhbHVlIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRXaW5kb3cod2luKSB7XG4gICAgICAgIGlmICh3aW4gIT0gdGhpcy53aW4pIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlV2luZG93TGlzdGVuZXJzKHRoaXMud2luKTtcbiAgICAgICAgICAgIHRoaXMud2luID0gd2luO1xuICAgICAgICAgICAgdGhpcy5hZGRXaW5kb3dMaXN0ZW5lcnModGhpcy53aW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFdpbmRvd0xpc3RlbmVycyh3aW4pIHtcbiAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vblJlc2l6ZSk7XG4gICAgICAgIGlmICh0aGlzLnByaW50UXVlcnkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaW50UXVlcnkuYWRkRXZlbnRMaXN0ZW5lcilcbiAgICAgICAgICAgICAgICB0aGlzLnByaW50UXVlcnkuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzLm9uUHJpbnQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMucHJpbnRRdWVyeS5hZGRMaXN0ZW5lcih0aGlzLm9uUHJpbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHdpbi5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JlcHJpbnRcIiwgdGhpcy5vblByaW50KTtcbiAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgIHdpbi5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsIHRoaXMub25TZWxlY3Rpb25DaGFuZ2UpO1xuICAgIH1cbiAgICByZW1vdmVXaW5kb3dMaXN0ZW5lcnMod2luKSB7XG4gICAgICAgIHdpbi5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpO1xuICAgICAgICB3aW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm9uUmVzaXplKTtcbiAgICAgICAgaWYgKHRoaXMucHJpbnRRdWVyeSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpbnRRdWVyeS5yZW1vdmVFdmVudExpc3RlbmVyKVxuICAgICAgICAgICAgICAgIHRoaXMucHJpbnRRdWVyeS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMub25QcmludCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5wcmludFF1ZXJ5LnJlbW92ZUxpc3RlbmVyKHRoaXMub25QcmludCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgd2luLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJiZWZvcmVwcmludFwiLCB0aGlzLm9uUHJpbnQpO1xuICAgICAgICB3aW4uZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLCB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5lZGl0Q29udGV4dCkge1xuICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgIGlmICh1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldChlZGl0YWJsZSkgIT0gdXBkYXRlLnN0YXRlLmZhY2V0KGVkaXRhYmxlKSlcbiAgICAgICAgICAgICAgICB1cGRhdGUudmlldy5jb250ZW50RE9NLmVkaXRDb250ZXh0ID0gdXBkYXRlLnN0YXRlLmZhY2V0KGVkaXRhYmxlKSA/IHRoaXMuZWRpdENvbnRleHQuZWRpdENvbnRleHQgOiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgKF9hID0gdGhpcy5pbnRlcnNlY3Rpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXNjb25uZWN0KCk7XG4gICAgICAgIChfYiA9IHRoaXMuZ2FwSW50ZXJzZWN0aW9uKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZGlzY29ubmVjdCgpO1xuICAgICAgICAoX2MgPSB0aGlzLnJlc2l6ZVNjcm9sbCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgZm9yIChsZXQgZG9tIG9mIHRoaXMuc2Nyb2xsVGFyZ2V0cylcbiAgICAgICAgICAgIGRvbS5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpO1xuICAgICAgICB0aGlzLnJlbW92ZVdpbmRvd0xpc3RlbmVycyh0aGlzLndpbik7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBhcmVudENoZWNrKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZW91dCk7XG4gICAgICAgIHRoaXMud2luLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZGVsYXllZEZsdXNoKTtcbiAgICAgICAgdGhpcy53aW4uY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5mbHVzaGluZ0FuZHJvaWRLZXkpO1xuICAgICAgICBpZiAodGhpcy5lZGl0Q29udGV4dCkge1xuICAgICAgICAgICAgdGhpcy52aWV3LmNvbnRlbnRET00uZWRpdENvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kQ2hpbGQodGlsZSwgZG9tLCBkaXIpIHtcbiAgICB3aGlsZSAoZG9tKSB7XG4gICAgICAgIGxldCBjdXJUaWxlID0gVGlsZS5nZXQoZG9tKTtcbiAgICAgICAgaWYgKGN1clRpbGUgJiYgY3VyVGlsZS5wYXJlbnQgPT0gdGlsZSlcbiAgICAgICAgICAgIHJldHVybiBjdXJUaWxlO1xuICAgICAgICBsZXQgcGFyZW50ID0gZG9tLnBhcmVudE5vZGU7XG4gICAgICAgIGRvbSA9IHBhcmVudCAhPSB0aWxlLmRvbSA/IHBhcmVudCA6IGRpciA+IDAgPyBkb20ubmV4dFNpYmxpbmcgOiBkb20ucHJldmlvdXNTaWJsaW5nO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGJ1aWxkU2VsZWN0aW9uUmFuZ2VGcm9tUmFuZ2UodmlldywgcmFuZ2UpIHtcbiAgICBsZXQgYW5jaG9yTm9kZSA9IHJhbmdlLnN0YXJ0Q29udGFpbmVyLCBhbmNob3JPZmZzZXQgPSByYW5nZS5zdGFydE9mZnNldDtcbiAgICBsZXQgZm9jdXNOb2RlID0gcmFuZ2UuZW5kQ29udGFpbmVyLCBmb2N1c09mZnNldCA9IHJhbmdlLmVuZE9mZnNldDtcbiAgICBsZXQgY3VyQW5jaG9yID0gdmlldy5kb2NWaWV3LmRvbUF0UG9zKHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uYW5jaG9yLCAxKTtcbiAgICAvLyBTaW5jZSBzdWNoIGEgcmFuZ2UgZG9lc24ndCBkaXN0aW5ndWlzaCBiZXR3ZWVuIGFuY2hvciBhbmQgaGVhZCxcbiAgICAvLyB1c2UgYSBoZXVyaXN0aWMgdGhhdCBmbGlwcyBpdCBhcm91bmQgaWYgaXRzIGVuZCBtYXRjaGVzIHRoZVxuICAgIC8vIGN1cnJlbnQgYW5jaG9yLlxuICAgIGlmIChpc0VxdWl2YWxlbnRQb3NpdGlvbihjdXJBbmNob3Iubm9kZSwgY3VyQW5jaG9yLm9mZnNldCwgZm9jdXNOb2RlLCBmb2N1c09mZnNldCkpXG4gICAgICAgIFthbmNob3JOb2RlLCBhbmNob3JPZmZzZXQsIGZvY3VzTm9kZSwgZm9jdXNPZmZzZXRdID0gW2ZvY3VzTm9kZSwgZm9jdXNPZmZzZXQsIGFuY2hvck5vZGUsIGFuY2hvck9mZnNldF07XG4gICAgcmV0dXJuIHsgYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0LCBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0IH07XG59XG4vLyBVc2VkIHRvIHdvcmsgYXJvdW5kIGEgU2FmYXJpIFNlbGVjdGlvbi9zaGFkb3cgRE9NIGJ1ZyAoIzQxNClcbmZ1bmN0aW9uIHNhZmFyaVNlbGVjdGlvblJhbmdlSGFjayh2aWV3LCBzZWxlY3Rpb24pIHtcbiAgICBpZiAoc2VsZWN0aW9uLmdldENvbXBvc2VkUmFuZ2VzKSB7XG4gICAgICAgIGxldCByYW5nZSA9IHNlbGVjdGlvbi5nZXRDb21wb3NlZFJhbmdlcyh2aWV3LnJvb3QpWzBdO1xuICAgICAgICBpZiAocmFuZ2UpXG4gICAgICAgICAgICByZXR1cm4gYnVpbGRTZWxlY3Rpb25SYW5nZUZyb21SYW5nZSh2aWV3LCByYW5nZSk7XG4gICAgfVxuICAgIGxldCBmb3VuZCA9IG51bGw7XG4gICAgLy8gQmVjYXVzZSBTYWZhcmkgKGF0IGxlYXN0IGluIDIwMTgtMjAyMSkgZG9lc24ndCBwcm92aWRlIHJlZ3VsYXJcbiAgICAvLyBhY2Nlc3MgdG8gdGhlIHNlbGVjdGlvbiBpbnNpZGUgYSBzaGFkb3dyb290LCB3ZSBoYXZlIHRvIHBlcmZvcm0gYVxuICAgIC8vIHJpZGljdWxvdXMgaGFjayB0byBnZXQgYXQgaXRcdTIwMTR1c2luZyBgZXhlY0NvbW1hbmRgIHRvIHRyaWdnZXIgYVxuICAgIC8vIGBiZWZvcmVJbnB1dGAgZXZlbnQgc28gdGhhdCB3ZSBjYW4gcmVhZCB0aGUgdGFyZ2V0IHJhbmdlIGZyb20gdGhlXG4gICAgLy8gZXZlbnQuXG4gICAgZnVuY3Rpb24gcmVhZChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZm91bmQgPSBldmVudC5nZXRUYXJnZXRSYW5nZXMoKVswXTtcbiAgICB9XG4gICAgdmlldy5jb250ZW50RE9NLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmVpbnB1dFwiLCByZWFkLCB0cnVlKTtcbiAgICB2aWV3LmRvbS5vd25lckRvY3VtZW50LmV4ZWNDb21tYW5kKFwiaW5kZW50XCIpO1xuICAgIHZpZXcuY29udGVudERPTS5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmVmb3JlaW5wdXRcIiwgcmVhZCwgdHJ1ZSk7XG4gICAgcmV0dXJuIGZvdW5kID8gYnVpbGRTZWxlY3Rpb25SYW5nZUZyb21SYW5nZSh2aWV3LCBmb3VuZCkgOiBudWxsO1xufVxuY2xhc3MgRWRpdENvbnRleHRNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIC8vIFRoZSBkb2N1bWVudCB3aW5kb3cgZm9yIHdoaWNoIHRoZSB0ZXh0IGluIHRoZSBjb250ZXh0IGlzXG4gICAgICAgIC8vIG1haW50YWluZWQuIEZvciBsYXJnZSBkb2N1bWVudHMsIHRoaXMgbWF5IGJlIHNtYWxsZXIgdGhhbiB0aGVcbiAgICAgICAgLy8gZWRpdG9yIGRvY3VtZW50LiBUaGlzIHdpbmRvdyBhbHdheXMgaW5jbHVkZXMgdGhlIHNlbGVjdGlvbiBoZWFkLlxuICAgICAgICB0aGlzLmZyb20gPSAwO1xuICAgICAgICB0aGlzLnRvID0gMDtcbiAgICAgICAgLy8gV2hlbiBhcHBseWluZyBhIHRyYW5zYWN0aW9uLCB0aGlzIGlzIHVzZWQgdG8gY29tcGFyZSB0aGUgY2hhbmdlXG4gICAgICAgIC8vIG1hZGUgdG8gdGhlIGNvbnRleHQgY29udGVudCB0byB0aGUgY2hhbmdlIGluIHRoZSB0cmFuc2FjdGlvbiBpblxuICAgICAgICAvLyBvcmRlciB0byBtYWtlIHRoZSBtaW5pbWFsIGNoYW5nZXMgdG8gdGhlIGNvbnRleHQgKHNpbmNlIHRvdWNoaW5nXG4gICAgICAgIC8vIHRoYXQgc29tZXRpbWVzIGJyZWFrcyBzZXJpZXMgb2YgbXVsdGlwbGUgZWRpdHMgbWFkZSBmb3IgYSBzaW5nbGVcbiAgICAgICAgLy8gdXNlciBhY3Rpb24gb24gc29tZSBBbmRyb2lkIGtleWJvYXJkcylcbiAgICAgICAgdGhpcy5wZW5kaW5nQ29udGV4dENoYW5nZSA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAvLyBLbHVkZ2UgdG8gd29yayBhcm91bmQgdGhlIGZhY3QgdGhhdCBFZGl0Q29udGV4dCBkb2VzIG5vdCByZXNwb25kXG4gICAgICAgIC8vIHdlbGwgdG8gaGF2aW5nIGl0cyBjb250ZW50IHVwZGF0ZWQgZHVyaW5nIGEgY29tcG9zaXRpb24gKHNlZSAjMTQ3MilcbiAgICAgICAgdGhpcy5jb21wb3NpbmcgPSBudWxsO1xuICAgICAgICB0aGlzLnJlc2V0UmFuZ2Uodmlldy5zdGF0ZSk7XG4gICAgICAgIGxldCBjb250ZXh0ID0gdGhpcy5lZGl0Q29udGV4dCA9IG5ldyB3aW5kb3cuRWRpdENvbnRleHQoe1xuICAgICAgICAgICAgdGV4dDogdmlldy5zdGF0ZS5kb2Muc2xpY2VTdHJpbmcodGhpcy5mcm9tLCB0aGlzLnRvKSxcbiAgICAgICAgICAgIHNlbGVjdGlvblN0YXJ0OiB0aGlzLnRvQ29udGV4dFBvcyhNYXRoLm1heCh0aGlzLmZyb20sIE1hdGgubWluKHRoaXMudG8sIHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uYW5jaG9yKSkpLFxuICAgICAgICAgICAgc2VsZWN0aW9uRW5kOiB0aGlzLnRvQ29udGV4dFBvcyh2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWQpXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmhhbmRsZXJzLnRleHR1cGRhdGUgPSBlID0+IHtcbiAgICAgICAgICAgIGxldCBtYWluID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbiwgeyBhbmNob3IsIGhlYWQgfSA9IG1haW47XG4gICAgICAgICAgICBsZXQgZnJvbSA9IHRoaXMudG9FZGl0b3JQb3MoZS51cGRhdGVSYW5nZVN0YXJ0KSwgdG8gPSB0aGlzLnRvRWRpdG9yUG9zKGUudXBkYXRlUmFuZ2VFbmQpO1xuICAgICAgICAgICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPj0gMCAmJiAhdGhpcy5jb21wb3NpbmcpXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb3NpbmcgPSB7IGNvbnRleHRCYXNlOiBlLnVwZGF0ZVJhbmdlU3RhcnQsIGVkaXRvckJhc2U6IGZyb20sIGRyaWZ0ZWQ6IGZhbHNlIH07XG4gICAgICAgICAgICBsZXQgZGVsZXRlcyA9IHRvIC0gZnJvbSA+IGUudGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAvLyBJZiB0aGUgd2luZG93IGRvZXNuJ3QgaW5jbHVkZSB0aGUgYW5jaG9yLCBhc3N1bWUgY2hhbmdlc1xuICAgICAgICAgICAgLy8gYWRqYWNlbnQgdG8gYSBzaWRlIGdvIHVwIHRvIHRoZSBhbmNob3IuXG4gICAgICAgICAgICBpZiAoZnJvbSA9PSB0aGlzLmZyb20gJiYgYW5jaG9yIDwgdGhpcy5mcm9tKVxuICAgICAgICAgICAgICAgIGZyb20gPSBhbmNob3I7XG4gICAgICAgICAgICBlbHNlIGlmICh0byA9PSB0aGlzLnRvICYmIGFuY2hvciA+IHRoaXMudG8pXG4gICAgICAgICAgICAgICAgdG8gPSBhbmNob3I7XG4gICAgICAgICAgICBsZXQgZGlmZiA9IGZpbmREaWZmKHZpZXcuc3RhdGUuc2xpY2VEb2MoZnJvbSwgdG8pLCBlLnRleHQsIChkZWxldGVzID8gbWFpbi5mcm9tIDogbWFpbi50bykgLSBmcm9tLCBkZWxldGVzID8gXCJlbmRcIiA6IG51bGwpO1xuICAgICAgICAgICAgLy8gRWRpdCBjb250ZXh0cyBzb21ldGltZXMgZmlyZSBlbXB0eSBjaGFuZ2VzXG4gICAgICAgICAgICBpZiAoIWRpZmYpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3U2VsID0gRWRpdG9yU2VsZWN0aW9uLnNpbmdsZSh0aGlzLnRvRWRpdG9yUG9zKGUuc2VsZWN0aW9uU3RhcnQpLCB0aGlzLnRvRWRpdG9yUG9zKGUuc2VsZWN0aW9uRW5kKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFzYW1lU2VsUG9zKG5ld1NlbCwgbWFpbikpXG4gICAgICAgICAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBzZWxlY3Rpb246IG5ld1NlbCwgdXNlckV2ZW50OiBcInNlbGVjdFwiIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaGFuZ2UgPSB7IGZyb206IGRpZmYuZnJvbSArIGZyb20sIHRvOiBkaWZmLnRvQSArIGZyb20sXG4gICAgICAgICAgICAgICAgaW5zZXJ0OiBUZXh0Lm9mKGUudGV4dC5zbGljZShkaWZmLmZyb20sIGRpZmYudG9CKS5zcGxpdChcIlxcblwiKSkgfTtcbiAgICAgICAgICAgIGlmICgoYnJvd3Nlci5tYWMgfHwgYnJvd3Nlci5hbmRyb2lkKSAmJiBjaGFuZ2UuZnJvbSA9PSBoZWFkIC0gMSAmJlxuICAgICAgICAgICAgICAgIC9eXFwuID8kLy50ZXN0KGUudGV4dCkgJiYgdmlldy5jb250ZW50RE9NLmdldEF0dHJpYnV0ZShcImF1dG9jb3JyZWN0XCIpID09IFwib2ZmXCIpXG4gICAgICAgICAgICAgICAgY2hhbmdlID0geyBmcm9tLCB0bywgaW5zZXJ0OiBUZXh0Lm9mKFtlLnRleHQucmVwbGFjZShcIi5cIiwgXCIgXCIpXSkgfTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0NvbnRleHRDaGFuZ2UgPSBjaGFuZ2U7XG4gICAgICAgICAgICBpZiAoIXZpZXcuc3RhdGUucmVhZE9ubHkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3TGVuID0gdGhpcy50byAtIHRoaXMuZnJvbSArIChjaGFuZ2UudG8gLSBjaGFuZ2UuZnJvbSArIGNoYW5nZS5pbnNlcnQubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBhcHBseURPTUNoYW5nZUlubmVyKHZpZXcsIGNoYW5nZSwgRWRpdG9yU2VsZWN0aW9uLnNpbmdsZSh0aGlzLnRvRWRpdG9yUG9zKGUuc2VsZWN0aW9uU3RhcnQsIG5ld0xlbiksIHRoaXMudG9FZGl0b3JQb3MoZS5zZWxlY3Rpb25FbmQsIG5ld0xlbikpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHRoZSB0cmFuc2FjdGlvbiBkaWRuJ3QgZmx1c2ggb3VyIGNoYW5nZSwgcmV2ZXJ0IGl0IHNvXG4gICAgICAgICAgICAvLyB0aGF0IHRoZSBjb250ZXh0IGlzIGluIHN5bmMgd2l0aCB0aGUgZWRpdG9yIHN0YXRlIGFnYWluLlxuICAgICAgICAgICAgaWYgKHRoaXMucGVuZGluZ0NvbnRleHRDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJldmVydFBlbmRpbmcodmlldy5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24odmlldy5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXb3JrIGFyb3VuZCBtaXNzZWQgY29tcG9zaXRpb25lbmQgZXZlbnRzLiBTZWUgaHR0cHM6Ly9kaXNjdXNzLmNvZGVtaXJyb3IubmV0L3QvYS85NTE0XG4gICAgICAgICAgICBpZiAoY2hhbmdlLmZyb20gPCBjaGFuZ2UudG8gJiYgIWNoYW5nZS5pbnNlcnQubGVuZ3RoICYmIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPj0gMCAmJlxuICAgICAgICAgICAgICAgICEvW1xcXFxwe0FscGhhYmV0aWN9XFxcXHB7TnVtYmVyfV9dLy50ZXN0KGNvbnRleHQudGV4dC5zbGljZShNYXRoLm1heCgwLCBlLnVwZGF0ZVJhbmdlU3RhcnQgLSAxKSwgTWF0aC5taW4oY29udGV4dC50ZXh0Lmxlbmd0aCwgZS51cGRhdGVSYW5nZVN0YXJ0ICsgMSkpKSlcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmNvbXBvc2l0aW9uZW5kKGUpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZXJzLmNoYXJhY3RlcmJvdW5kc3VwZGF0ZSA9IGUgPT4ge1xuICAgICAgICAgICAgbGV0IHJlY3RzID0gW10sIHByZXYgPSBudWxsO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMudG9FZGl0b3JQb3MoZS5yYW5nZVN0YXJ0KSwgZW5kID0gdGhpcy50b0VkaXRvclBvcyhlLnJhbmdlRW5kKTsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlY3QgPSB2aWV3LmNvb3Jkc0ZvckNoYXIoaSk7XG4gICAgICAgICAgICAgICAgcHJldiA9IChyZWN0ICYmIG5ldyBET01SZWN0KHJlY3QubGVmdCwgcmVjdC50b3AsIHJlY3QucmlnaHQgLSByZWN0LmxlZnQsIHJlY3QuYm90dG9tIC0gcmVjdC50b3ApKVxuICAgICAgICAgICAgICAgICAgICB8fCBwcmV2IHx8IG5ldyBET01SZWN0O1xuICAgICAgICAgICAgICAgIHJlY3RzLnB1c2gocHJldik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZXh0LnVwZGF0ZUNoYXJhY3RlckJvdW5kcyhlLnJhbmdlU3RhcnQsIHJlY3RzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy50ZXh0Zm9ybWF0dXBkYXRlID0gZSA9PiB7XG4gICAgICAgICAgICBsZXQgZGVjbyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgZm9ybWF0IG9mIGUuZ2V0VGV4dEZvcm1hdHMoKSkge1xuICAgICAgICAgICAgICAgIGxldCBsaW5lU3R5bGUgPSBmb3JtYXQudW5kZXJsaW5lU3R5bGUsIHRoaWNrbmVzcyA9IGZvcm1hdC51bmRlcmxpbmVUaGlja25lc3M7XG4gICAgICAgICAgICAgICAgaWYgKCEvbm9uZS9pLnRlc3QobGluZVN0eWxlKSAmJiAhL25vbmUvaS50ZXN0KHRoaWNrbmVzcykpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyb20gPSB0aGlzLnRvRWRpdG9yUG9zKGZvcm1hdC5yYW5nZVN0YXJ0KSwgdG8gPSB0aGlzLnRvRWRpdG9yUG9zKGZvcm1hdC5yYW5nZUVuZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmcm9tIDwgdG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXNlIHZhbHVlcyBjaGFuZ2VkIGZyb20gY2FwaXRhbGl6ZWQgY3VzdG9tIHN0cmluZ3MgdG8gbG93ZXItY2FzZSBDU1Mga2V5d29yZHMgaW4gMjAyNVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0eWxlID0gYHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lICR7L15bYS16XS8udGVzdChsaW5lU3R5bGUpID8gbGluZVN0eWxlICsgXCIgXCIgOiBsaW5lU3R5bGUgPT0gXCJEYXNoZWRcIiA/IFwiZGFzaGVkIFwiIDogbGluZVN0eWxlID09IFwiU3F1aWdnbGVcIiA/IFwid2F2eSBcIiA6IFwiXCJ9JHsvdGhpbi9pLnRlc3QodGhpY2tuZXNzKSA/IDEgOiAyfXB4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY28ucHVzaChEZWNvcmF0aW9uLm1hcmsoeyBhdHRyaWJ1dGVzOiB7IHN0eWxlIH0gfSkucmFuZ2UoZnJvbSwgdG8pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBzZXRFZGl0Q29udGV4dEZvcm1hdHRpbmcub2YoRGVjb3JhdGlvbi5zZXQoZGVjbykpIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZXJzLmNvbXBvc2l0aW9uc3RhcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA8IDApIHtcbiAgICAgICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID0gMDtcbiAgICAgICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuY29tcG9zaXRpb25lbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID0gLTE7XG4gICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb3NpbmcpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBkcmlmdGVkIH0gPSB0aGlzLmNvbXBvc2luZztcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvc2luZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGRyaWZ0ZWQpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQodmlldy5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IGV2ZW50IGluIHRoaXMuaGFuZGxlcnMpXG4gICAgICAgICAgICBjb250ZXh0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXMuaGFuZGxlcnNbZXZlbnRdKTtcbiAgICAgICAgdGhpcy5tZWFzdXJlUmVxID0geyByZWFkOiB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDb250ZXh0LnVwZGF0ZUNvbnRyb2xCb3VuZHModmlldy5jb250ZW50RE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgICAgICAgICAgICAgICBsZXQgc2VsID0gZ2V0U2VsZWN0aW9uKHZpZXcucm9vdCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbCAmJiBzZWwucmFuZ2VDb3VudClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC51cGRhdGVTZWxlY3Rpb25Cb3VuZHMoc2VsLmdldFJhbmdlQXQoMCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xuICAgICAgICAgICAgfSB9O1xuICAgIH1cbiAgICBhcHBseUVkaXRzKHVwZGF0ZSkge1xuICAgICAgICBsZXQgb2ZmID0gMCwgYWJvcnQgPSBmYWxzZSwgcGVuZGluZyA9IHRoaXMucGVuZGluZ0NvbnRleHRDaGFuZ2U7XG4gICAgICAgIHVwZGF0ZS5jaGFuZ2VzLml0ZXJDaGFuZ2VzKChmcm9tQSwgdG9BLCBfZnJvbUIsIF90b0IsIGluc2VydCkgPT4ge1xuICAgICAgICAgICAgaWYgKGFib3J0KVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCBkTGVuID0gaW5zZXJ0Lmxlbmd0aCAtICh0b0EgLSBmcm9tQSk7XG4gICAgICAgICAgICBpZiAocGVuZGluZyAmJiB0b0EgPj0gcGVuZGluZy50bykge1xuICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nLmZyb20gPT0gZnJvbUEgJiYgcGVuZGluZy50byA9PSB0b0EgJiYgcGVuZGluZy5pbnNlcnQuZXEoaW5zZXJ0KSkge1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nID0gdGhpcy5wZW5kaW5nQ29udGV4dENoYW5nZSA9IG51bGw7IC8vIE1hdGNoXG4gICAgICAgICAgICAgICAgICAgIG9mZiArPSBkTGVuO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvICs9IGRMZW47XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7IC8vIE1pc21hdGNoLCByZXZlcnRcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmV2ZXJ0UGVuZGluZyh1cGRhdGUuc3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZyb21BICs9IG9mZjtcbiAgICAgICAgICAgIHRvQSArPSBvZmY7XG4gICAgICAgICAgICBpZiAodG9BIDw9IHRoaXMuZnJvbSkgeyAvLyBCZWZvcmUgdGhlIHdpbmRvd1xuICAgICAgICAgICAgICAgIHRoaXMuZnJvbSArPSBkTGVuO1xuICAgICAgICAgICAgICAgIHRoaXMudG8gKz0gZExlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZyb21BIDwgdGhpcy50bykgeyAvLyBPdmVybGFwcyB3aXRoIHdpbmRvd1xuICAgICAgICAgICAgICAgIGlmIChmcm9tQSA8IHRoaXMuZnJvbSB8fCB0b0EgPiB0aGlzLnRvIHx8ICh0aGlzLnRvIC0gdGhpcy5mcm9tKSArIGluc2VydC5sZW5ndGggPiAzMDAwMCAvKiBDeFZwLk1heFNpemUgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgYWJvcnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZWRpdENvbnRleHQudXBkYXRlVGV4dCh0aGlzLnRvQ29udGV4dFBvcyhmcm9tQSksIHRoaXMudG9Db250ZXh0UG9zKHRvQSksIGluc2VydC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvICs9IGRMZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvZmYgKz0gZExlbjtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChwZW5kaW5nICYmICFhYm9ydClcbiAgICAgICAgICAgIHRoaXMucmV2ZXJ0UGVuZGluZyh1cGRhdGUuc3RhdGUpO1xuICAgICAgICByZXR1cm4gIWFib3J0O1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGxldCByZXZlcnRlZCA9IHRoaXMucGVuZGluZ0NvbnRleHRDaGFuZ2UsIHN0YXJ0U2VsID0gdXBkYXRlLnN0YXJ0U3RhdGUuc2VsZWN0aW9uLm1haW47XG4gICAgICAgIGlmICh0aGlzLmNvbXBvc2luZyAmJlxuICAgICAgICAgICAgKHRoaXMuY29tcG9zaW5nLmRyaWZ0ZWQgfHxcbiAgICAgICAgICAgICAgICAoIXVwZGF0ZS5jaGFuZ2VzLnRvdWNoZXNSYW5nZShzdGFydFNlbC5mcm9tLCBzdGFydFNlbC50bykgJiZcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlLnRyYW5zYWN0aW9ucy5zb21lKHRyID0+ICF0ci5pc1VzZXJFdmVudChcImlucHV0LnR5cGVcIikgJiYgdHIuY2hhbmdlcy50b3VjaGVzUmFuZ2UodGhpcy5mcm9tLCB0aGlzLnRvKSkpKSkge1xuICAgICAgICAgICAgdGhpcy5jb21wb3NpbmcuZHJpZnRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNvbXBvc2luZy5lZGl0b3JCYXNlID0gdXBkYXRlLmNoYW5nZXMubWFwUG9zKHRoaXMuY29tcG9zaW5nLmVkaXRvckJhc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLmFwcGx5RWRpdHModXBkYXRlKSB8fCAhdGhpcy5yYW5nZUlzVmFsaWQodXBkYXRlLnN0YXRlKSkge1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nQ29udGV4dENoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KHVwZGF0ZS5zdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLnNlbGVjdGlvblNldCB8fCByZXZlcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24odXBkYXRlLnN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlLmdlb21ldHJ5Q2hhbmdlZCB8fCB1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuc2VsZWN0aW9uU2V0KVxuICAgICAgICAgICAgdXBkYXRlLnZpZXcucmVxdWVzdE1lYXN1cmUodGhpcy5tZWFzdXJlUmVxKTtcbiAgICB9XG4gICAgcmVzZXRSYW5nZShzdGF0ZSkge1xuICAgICAgICBsZXQgeyBoZWFkIH0gPSBzdGF0ZS5zZWxlY3Rpb24ubWFpbjtcbiAgICAgICAgdGhpcy5mcm9tID0gTWF0aC5tYXgoMCwgaGVhZCAtIDEwMDAwIC8qIEN4VnAuTWFyZ2luICovKTtcbiAgICAgICAgdGhpcy50byA9IE1hdGgubWluKHN0YXRlLmRvYy5sZW5ndGgsIGhlYWQgKyAxMDAwMCAvKiBDeFZwLk1hcmdpbiAqLyk7XG4gICAgfVxuICAgIHJlc2V0KHN0YXRlKSB7XG4gICAgICAgIHRoaXMucmVzZXRSYW5nZShzdGF0ZSk7XG4gICAgICAgIHRoaXMuZWRpdENvbnRleHQudXBkYXRlVGV4dCgwLCB0aGlzLmVkaXRDb250ZXh0LnRleHQubGVuZ3RoLCBzdGF0ZS5kb2Muc2xpY2VTdHJpbmcodGhpcy5mcm9tLCB0aGlzLnRvKSk7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKHN0YXRlKTtcbiAgICB9XG4gICAgcmV2ZXJ0UGVuZGluZyhzdGF0ZSkge1xuICAgICAgICBsZXQgcGVuZGluZyA9IHRoaXMucGVuZGluZ0NvbnRleHRDaGFuZ2U7XG4gICAgICAgIHRoaXMucGVuZGluZ0NvbnRleHRDaGFuZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLmVkaXRDb250ZXh0LnVwZGF0ZVRleHQodGhpcy50b0NvbnRleHRQb3MocGVuZGluZy5mcm9tKSwgdGhpcy50b0NvbnRleHRQb3MocGVuZGluZy5mcm9tICsgcGVuZGluZy5pbnNlcnQubGVuZ3RoKSwgc3RhdGUuZG9jLnNsaWNlU3RyaW5nKHBlbmRpbmcuZnJvbSwgcGVuZGluZy50bykpO1xuICAgIH1cbiAgICBzZXRTZWxlY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgbGV0IHsgbWFpbiB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnRvQ29udGV4dFBvcyhNYXRoLm1heCh0aGlzLmZyb20sIE1hdGgubWluKHRoaXMudG8sIG1haW4uYW5jaG9yKSkpO1xuICAgICAgICBsZXQgZW5kID0gdGhpcy50b0NvbnRleHRQb3MobWFpbi5oZWFkKTtcbiAgICAgICAgaWYgKHRoaXMuZWRpdENvbnRleHQuc2VsZWN0aW9uU3RhcnQgIT0gc3RhcnQgfHwgdGhpcy5lZGl0Q29udGV4dC5zZWxlY3Rpb25FbmQgIT0gZW5kKVxuICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC51cGRhdGVTZWxlY3Rpb24oc3RhcnQsIGVuZCk7XG4gICAgfVxuICAgIHJhbmdlSXNWYWxpZChzdGF0ZSkge1xuICAgICAgICBsZXQgeyBoZWFkIH0gPSBzdGF0ZS5zZWxlY3Rpb24ubWFpbjtcbiAgICAgICAgcmV0dXJuICEodGhpcy5mcm9tID4gMCAmJiBoZWFkIC0gdGhpcy5mcm9tIDwgNTAwIC8qIEN4VnAuTWluTWFyZ2luICovIHx8XG4gICAgICAgICAgICB0aGlzLnRvIDwgc3RhdGUuZG9jLmxlbmd0aCAmJiB0aGlzLnRvIC0gaGVhZCA8IDUwMCAvKiBDeFZwLk1pbk1hcmdpbiAqLyB8fFxuICAgICAgICAgICAgdGhpcy50byAtIHRoaXMuZnJvbSA+IDEwMDAwIC8qIEN4VnAuTWFyZ2luICovICogMyk7XG4gICAgfVxuICAgIHRvRWRpdG9yUG9zKGNvbnRleHRQb3MsIGNsaXBMZW4gPSB0aGlzLnRvIC0gdGhpcy5mcm9tKSB7XG4gICAgICAgIGNvbnRleHRQb3MgPSBNYXRoLm1pbihjb250ZXh0UG9zLCBjbGlwTGVuKTtcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNvbXBvc2luZztcbiAgICAgICAgcmV0dXJuIGMgJiYgYy5kcmlmdGVkID8gYy5lZGl0b3JCYXNlICsgKGNvbnRleHRQb3MgLSBjLmNvbnRleHRCYXNlKSA6IGNvbnRleHRQb3MgKyB0aGlzLmZyb207XG4gICAgfVxuICAgIHRvQ29udGV4dFBvcyhlZGl0b3JQb3MpIHtcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNvbXBvc2luZztcbiAgICAgICAgcmV0dXJuIGMgJiYgYy5kcmlmdGVkID8gYy5jb250ZXh0QmFzZSArIChlZGl0b3JQb3MgLSBjLmVkaXRvckJhc2UpIDogZWRpdG9yUG9zIC0gdGhpcy5mcm9tO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBmb3IgKGxldCBldmVudCBpbiB0aGlzLmhhbmRsZXJzKVxuICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCB0aGlzLmhhbmRsZXJzW2V2ZW50XSk7XG4gICAgfVxufVxuXG4vLyBUaGUgZWRpdG9yJ3MgdXBkYXRlIHN0YXRlIG1hY2hpbmUgbG9va3Mgc29tZXRoaW5nIGxpa2UgdGhpczpcbi8vXG4vLyAgICAgSWRsZSBcdTIxOTIgVXBkYXRpbmcgXHUyMUM2IElkbGUgKHVuY2hlY2tlZCkgXHUyMTkyIE1lYXN1cmluZyBcdTIxOTIgSWRsZVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFx1MjE5MSAgICAgIFx1MjE5M1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVwZGF0aW5nIChtZWFzdXJlKVxuLy9cbi8vIFRoZSBkaWZmZXJlbmNlIGJldHdlZW4gJ0lkbGUnIGFuZCAnSWRsZSAodW5jaGVja2VkKScgbGllcyBpblxuLy8gd2hldGhlciBhIGxheW91dCBjaGVjayBoYXMgYmVlbiBzY2hlZHVsZWQuIEEgcmVndWxhciB1cGRhdGUgdGhyb3VnaFxuLy8gdGhlIGB1cGRhdGVgIG1ldGhvZCB1cGRhdGVzIHRoZSBET00gaW4gYSB3cml0ZS1vbmx5IGZhc2hpb24sIGFuZFxuLy8gcmVsaWVzIG9uIGEgY2hlY2sgKHNjaGVkdWxlZCB3aXRoIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgKSB0byBtYWtlXG4vLyBzdXJlIGV2ZXJ5dGhpbmcgaXMgd2hlcmUgaXQgc2hvdWxkIGJlIGFuZCB0aGUgdmlld3BvcnQgY292ZXJzIHRoZVxuLy8gdmlzaWJsZSBjb2RlLiBUaGF0IGNoZWNrIGNvbnRpbnVlcyB0byBtZWFzdXJlIGFuZCB0aGVuIG9wdGlvbmFsbHlcbi8vIHVwZGF0ZSB1bnRpbCBpdCByZWFjaGVzIGEgY29oZXJlbnQgc3RhdGUuXG4vKipcbkFuIGVkaXRvciB2aWV3IHJlcHJlc2VudHMgdGhlIGVkaXRvcidzIHVzZXIgaW50ZXJmYWNlLiBJdCBob2xkc1xudGhlIGVkaXRhYmxlIERPTSBzdXJmYWNlLCBhbmQgcG9zc2libHkgb3RoZXIgZWxlbWVudHMgc3VjaCBhcyB0aGVcbmxpbmUgbnVtYmVyIGd1dHRlci4gSXQgaGFuZGxlcyBldmVudHMgYW5kIGRpc3BhdGNoZXMgc3RhdGVcbnRyYW5zYWN0aW9ucyBmb3IgZWRpdGluZyBhY3Rpb25zLlxuKi9cbmNsYXNzIEVkaXRvclZpZXcge1xuICAgIC8qKlxuICAgIFRoZSBjdXJyZW50IGVkaXRvciBzdGF0ZS5cbiAgICAqL1xuICAgIGdldCBzdGF0ZSgpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLnN0YXRlOyB9XG4gICAgLyoqXG4gICAgVG8gYmUgYWJsZSB0byBkaXNwbGF5IGxhcmdlIGRvY3VtZW50cyB3aXRob3V0IGNvbnN1bWluZyB0b28gbXVjaFxuICAgIG1lbW9yeSBvciBvdmVybG9hZGluZyB0aGUgYnJvd3NlciwgQ29kZU1pcnJvciBvbmx5IGRyYXdzIHRoZVxuICAgIGNvZGUgdGhhdCBpcyB2aXNpYmxlIChwbHVzIGEgbWFyZ2luIGFyb3VuZCBpdCkgdG8gdGhlIERPTS4gVGhpc1xuICAgIHByb3BlcnR5IHRlbGxzIHlvdSB0aGUgZXh0ZW50IG9mIHRoZSBjdXJyZW50IGRyYXduIHZpZXdwb3J0LCBpblxuICAgIGRvY3VtZW50IHBvc2l0aW9ucy5cbiAgICAqL1xuICAgIGdldCB2aWV3cG9ydCgpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLnZpZXdwb3J0OyB9XG4gICAgLyoqXG4gICAgV2hlbiB0aGVyZSBhcmUsIGZvciBleGFtcGxlLCBsYXJnZSBjb2xsYXBzZWQgcmFuZ2VzIGluIHRoZVxuICAgIHZpZXdwb3J0LCBpdHMgc2l6ZSBjYW4gYmUgYSBsb3QgYmlnZ2VyIHRoYW4gdGhlIGFjdHVhbCB2aXNpYmxlXG4gICAgY29udGVudC4gVGh1cywgaWYgeW91IGFyZSBkb2luZyBzb21ldGhpbmcgbGlrZSBzdHlsaW5nIHRoZVxuICAgIGNvbnRlbnQgaW4gdGhlIHZpZXdwb3J0LCBpdCBpcyBwcmVmZXJhYmxlIHRvIG9ubHkgZG8gc28gZm9yXG4gICAgdGhlc2UgcmFuZ2VzLCB3aGljaCBhcmUgdGhlIHN1YnNldCBvZiB0aGUgdmlld3BvcnQgdGhhdCBpc1xuICAgIGFjdHVhbGx5IGRyYXduLlxuICAgICovXG4gICAgZ2V0IHZpc2libGVSYW5nZXMoKSB7IHJldHVybiB0aGlzLnZpZXdTdGF0ZS52aXNpYmxlUmFuZ2VzOyB9XG4gICAgLyoqXG4gICAgUmV0dXJucyBmYWxzZSB3aGVuIHRoZSBlZGl0b3IgaXMgZW50aXJlbHkgc2Nyb2xsZWQgb3V0IG9mIHZpZXdcbiAgICBvciBvdGhlcndpc2UgaGlkZGVuLlxuICAgICovXG4gICAgZ2V0IGluVmlldygpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLmluVmlldzsgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoZSB1c2VyIGlzIGN1cnJlbnRseSBjb21wb3NpbmcgdGV4dCB2aWFcbiAgICBbSU1FXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JbnB1dF9tZXRob2QpLCBhbmQgYXQgbGVhc3RcbiAgICBvbmUgY2hhbmdlIGhhcyBiZWVuIG1hZGUgaW4gdGhlIGN1cnJlbnQgY29tcG9zaXRpb24uXG4gICAgKi9cbiAgICBnZXQgY29tcG9zaW5nKCkgeyByZXR1cm4gISF0aGlzLmlucHV0U3RhdGUgJiYgdGhpcy5pbnB1dFN0YXRlLmNvbXBvc2luZyA+IDA7IH1cbiAgICAvKipcbiAgICBJbmRpY2F0ZXMgd2hldGhlciB0aGUgdXNlciBpcyBjdXJyZW50bHkgaW4gY29tcG9zaW5nIHN0YXRlLiBOb3RlXG4gICAgdGhhdCBvbiBzb21lIHBsYXRmb3JtcywgbGlrZSBBbmRyb2lkLCB0aGlzIHdpbGwgYmUgdGhlIGNhc2UgYVxuICAgIGxvdCwgc2luY2UganVzdCBwdXR0aW5nIHRoZSBjdXJzb3Igb24gYSB3b3JkIHN0YXJ0cyBhXG4gICAgY29tcG9zaXRpb24gdGhlcmUuXG4gICAgKi9cbiAgICBnZXQgY29tcG9zaXRpb25TdGFydGVkKCkgeyByZXR1cm4gISF0aGlzLmlucHV0U3RhdGUgJiYgdGhpcy5pbnB1dFN0YXRlLmNvbXBvc2luZyA+PSAwOyB9XG4gICAgLyoqXG4gICAgVGhlIGRvY3VtZW50IG9yIHNoYWRvdyByb290IHRoYXQgdGhlIHZpZXcgbGl2ZXMgaW4uXG4gICAgKi9cbiAgICBnZXQgcm9vdCgpIHsgcmV0dXJuIHRoaXMuX3Jvb3Q7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGdldCB3aW4oKSB7IHJldHVybiB0aGlzLmRvbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IHx8IHdpbmRvdzsgfVxuICAgIC8qKlxuICAgIENvbnN0cnVjdCBhIG5ldyB2aWV3LiBZb3UnbGwgd2FudCB0byBlaXRoZXIgcHJvdmlkZSBhIGBwYXJlbnRgXG4gICAgb3B0aW9uLCBvciBwdXQgYHZpZXcuZG9tYCBpbnRvIHlvdXIgZG9jdW1lbnQgYWZ0ZXIgY3JlYXRpbmcgYVxuICAgIHZpZXcsIHNvIHRoYXQgdGhlIHVzZXIgY2FuIHNlZSB0aGUgZWRpdG9yLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLnBsdWdpbnMgPSBbXTtcbiAgICAgICAgdGhpcy5wbHVnaW5NYXAgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLmVkaXRvckF0dHJzID0ge307XG4gICAgICAgIHRoaXMuY29udGVudEF0dHJzID0ge307XG4gICAgICAgIHRoaXMuYmlkaUNhY2hlID0gW107XG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IDIgLyogVXBkYXRlU3RhdGUuVXBkYXRpbmcgKi87XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tZWFzdXJlU2NoZWR1bGVkID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tZWFzdXJlUmVxdWVzdHMgPSBbXTtcbiAgICAgICAgdGhpcy5jb250ZW50RE9NID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5zY3JvbGxET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnNjcm9sbERPTS50YWJJbmRleCA9IC0xO1xuICAgICAgICB0aGlzLnNjcm9sbERPTS5jbGFzc05hbWUgPSBcImNtLXNjcm9sbGVyXCI7XG4gICAgICAgIHRoaXMuc2Nyb2xsRE9NLmFwcGVuZENoaWxkKHRoaXMuY29udGVudERPTSk7XG4gICAgICAgIHRoaXMuYW5ub3VuY2VET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmFubm91bmNlRE9NLmNsYXNzTmFtZSA9IFwiY20tYW5ub3VuY2VkXCI7XG4gICAgICAgIHRoaXMuYW5ub3VuY2VET00uc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsIFwicG9saXRlXCIpO1xuICAgICAgICB0aGlzLmRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKHRoaXMuYW5ub3VuY2VET00pO1xuICAgICAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZCh0aGlzLnNjcm9sbERPTSk7XG4gICAgICAgIGlmIChjb25maWcucGFyZW50KVxuICAgICAgICAgICAgY29uZmlnLnBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmRvbSk7XG4gICAgICAgIGxldCB7IGRpc3BhdGNoIH0gPSBjb25maWc7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hUcmFuc2FjdGlvbnMgPSBjb25maWcuZGlzcGF0Y2hUcmFuc2FjdGlvbnMgfHxcbiAgICAgICAgICAgIChkaXNwYXRjaCAmJiAoKHRycykgPT4gdHJzLmZvckVhY2godHIgPT4gZGlzcGF0Y2godHIsIHRoaXMpKSkpIHx8XG4gICAgICAgICAgICAoKHRycykgPT4gdGhpcy51cGRhdGUodHJzKSk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2ggPSB0aGlzLmRpc3BhdGNoLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX3Jvb3QgPSAoY29uZmlnLnJvb3QgfHwgZ2V0Um9vdChjb25maWcucGFyZW50KSB8fCBkb2N1bWVudCk7XG4gICAgICAgIHRoaXMudmlld1N0YXRlID0gbmV3IFZpZXdTdGF0ZShjb25maWcuc3RhdGUgfHwgRWRpdG9yU3RhdGUuY3JlYXRlKGNvbmZpZykpO1xuICAgICAgICBpZiAoY29uZmlnLnNjcm9sbFRvICYmIGNvbmZpZy5zY3JvbGxUby5pcyhzY3JvbGxJbnRvVmlldykpXG4gICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZS5zY3JvbGxUYXJnZXQgPSBjb25maWcuc2Nyb2xsVG8udmFsdWUuY2xpcCh0aGlzLnZpZXdTdGF0ZS5zdGF0ZSk7XG4gICAgICAgIHRoaXMucGx1Z2lucyA9IHRoaXMuc3RhdGUuZmFjZXQodmlld1BsdWdpbikubWFwKHNwZWMgPT4gbmV3IFBsdWdpbkluc3RhbmNlKHNwZWMpKTtcbiAgICAgICAgZm9yIChsZXQgcGx1Z2luIG9mIHRoaXMucGx1Z2lucylcbiAgICAgICAgICAgIHBsdWdpbi51cGRhdGUodGhpcyk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgRE9NT2JzZXJ2ZXIodGhpcyk7XG4gICAgICAgIHRoaXMuaW5wdXRTdGF0ZSA9IG5ldyBJbnB1dFN0YXRlKHRoaXMpO1xuICAgICAgICB0aGlzLmlucHV0U3RhdGUuZW5zdXJlSGFuZGxlcnModGhpcy5wbHVnaW5zKTtcbiAgICAgICAgdGhpcy5kb2NWaWV3ID0gbmV3IERvY1ZpZXcodGhpcyk7XG4gICAgICAgIHRoaXMubW91bnRTdHlsZXMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVBdHRycygpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMCAvKiBVcGRhdGVTdGF0ZS5JZGxlICovO1xuICAgICAgICB0aGlzLnJlcXVlc3RNZWFzdXJlKCk7XG4gICAgICAgIGlmICgoX2EgPSBkb2N1bWVudC5mb250cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlYWR5KVxuICAgICAgICAgICAgZG9jdW1lbnQuZm9udHMucmVhZHkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3U3RhdGUubXVzdE1lYXN1cmVDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RNZWFzdXJlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgZGlzcGF0Y2goLi4uaW5wdXQpIHtcbiAgICAgICAgbGV0IHRycyA9IGlucHV0Lmxlbmd0aCA9PSAxICYmIGlucHV0WzBdIGluc3RhbmNlb2YgVHJhbnNhY3Rpb24gPyBpbnB1dFxuICAgICAgICAgICAgOiBpbnB1dC5sZW5ndGggPT0gMSAmJiBBcnJheS5pc0FycmF5KGlucHV0WzBdKSA/IGlucHV0WzBdXG4gICAgICAgICAgICAgICAgOiBbdGhpcy5zdGF0ZS51cGRhdGUoLi4uaW5wdXQpXTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaFRyYW5zYWN0aW9ucyh0cnMsIHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICBVcGRhdGUgdGhlIHZpZXcgZm9yIHRoZSBnaXZlbiBhcnJheSBvZiB0cmFuc2FjdGlvbnMuIFRoaXMgd2lsbFxuICAgIHVwZGF0ZSB0aGUgdmlzaWJsZSBkb2N1bWVudCBhbmQgc2VsZWN0aW9uIHRvIG1hdGNoIHRoZSBzdGF0ZVxuICAgIHByb2R1Y2VkIGJ5IHRoZSB0cmFuc2FjdGlvbnMsIGFuZCBub3RpZnkgdmlldyBwbHVnaW5zIG9mIHRoZVxuICAgIGNoYW5nZS4gWW91IHNob3VsZCB1c3VhbGx5IGNhbGxcbiAgICBbYGRpc3BhdGNoYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuZGlzcGF0Y2gpIGluc3RlYWQsIHdoaWNoIHVzZXMgdGhpc1xuICAgIGFzIGEgcHJpbWl0aXZlLlxuICAgICovXG4gICAgdXBkYXRlKHRyYW5zYWN0aW9ucykge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVTdGF0ZSAhPSAwIC8qIFVwZGF0ZVN0YXRlLklkbGUgKi8pXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYWxscyB0byBFZGl0b3JWaWV3LnVwZGF0ZSBhcmUgbm90IGFsbG93ZWQgd2hpbGUgYW4gdXBkYXRlIGlzIGluIHByb2dyZXNzXCIpO1xuICAgICAgICBsZXQgcmVkcmF3biA9IGZhbHNlLCBhdHRyc0NoYW5nZWQgPSBmYWxzZSwgdXBkYXRlO1xuICAgICAgICBsZXQgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICBmb3IgKGxldCB0ciBvZiB0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICh0ci5zdGFydFN0YXRlICE9IHN0YXRlKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVHJ5aW5nIHRvIHVwZGF0ZSBzdGF0ZSB3aXRoIGEgdHJhbnNhY3Rpb24gdGhhdCBkb2Vzbid0IHN0YXJ0IGZyb20gdGhlIHByZXZpb3VzIHN0YXRlLlwiKTtcbiAgICAgICAgICAgIHN0YXRlID0gdHIuc3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZS5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmb2N1cyA9IHRoaXMuaGFzRm9jdXMsIGZvY3VzRmxhZyA9IDAsIGRpc3BhdGNoRm9jdXMgPSBudWxsO1xuICAgICAgICBpZiAodHJhbnNhY3Rpb25zLnNvbWUodHIgPT4gdHIuYW5ub3RhdGlvbihpc0ZvY3VzQ2hhbmdlKSkpIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRTdGF0ZS5ub3RpZmllZEZvY3VzZWQgPSBmb2N1cztcbiAgICAgICAgICAgIC8vIElmIGEgZm9jdXMtY2hhbmdlIHRyYW5zYWN0aW9uIGlzIGJlaW5nIGRpc3BhdGNoZWQsIHNldCB0aGlzIHVwZGF0ZSBmbGFnLlxuICAgICAgICAgICAgZm9jdXNGbGFnID0gMSAvKiBVcGRhdGVGbGFnLkZvY3VzICovO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZvY3VzICE9IHRoaXMuaW5wdXRTdGF0ZS5ub3RpZmllZEZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRTdGF0ZS5ub3RpZmllZEZvY3VzZWQgPSBmb2N1cztcbiAgICAgICAgICAgIC8vIFNjaGVkdWxlIGEgc2VwYXJhdGUgZm9jdXMgdHJhbnNhY3Rpb24gaWYgbmVjZXNzYXJ5LCBvdGhlcndpc2VcbiAgICAgICAgICAgIC8vIGFkZCBhIGZsYWcgdG8gdGhpcyB1cGRhdGVcbiAgICAgICAgICAgIGRpc3BhdGNoRm9jdXMgPSBmb2N1c0NoYW5nZVRyYW5zYWN0aW9uKHN0YXRlLCBmb2N1cyk7XG4gICAgICAgICAgICBpZiAoIWRpc3BhdGNoRm9jdXMpXG4gICAgICAgICAgICAgICAgZm9jdXNGbGFnID0gMSAvKiBVcGRhdGVGbGFnLkZvY3VzICovO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZXJlIHdhcyBhIHBlbmRpbmcgRE9NIGNoYW5nZSwgZWFnZXJseSByZWFkIGl0IGFuZCB0cnkgdG9cbiAgICAgICAgLy8gYXBwbHkgaXQgYWZ0ZXIgdGhlIGdpdmVuIHRyYW5zYWN0aW9ucy5cbiAgICAgICAgbGV0IHBlbmRpbmdLZXkgPSB0aGlzLm9ic2VydmVyLmRlbGF5ZWRBbmRyb2lkS2V5LCBkb21DaGFuZ2UgPSBudWxsO1xuICAgICAgICBpZiAocGVuZGluZ0tleSkge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5jbGVhckRlbGF5ZWRBbmRyb2lkS2V5KCk7XG4gICAgICAgICAgICBkb21DaGFuZ2UgPSB0aGlzLm9ic2VydmVyLnJlYWRDaGFuZ2UoKTtcbiAgICAgICAgICAgIC8vIE9ubHkgdHJ5IHRvIGFwcGx5IERPTSBjaGFuZ2VzIGlmIHRoZSB0cmFuc2FjdGlvbnMgZGlkbid0XG4gICAgICAgICAgICAvLyBjaGFuZ2UgdGhlIGRvYyBvciBzZWxlY3Rpb24uXG4gICAgICAgICAgICBpZiAoZG9tQ2hhbmdlICYmICF0aGlzLnN0YXRlLmRvYy5lcShzdGF0ZS5kb2MpIHx8ICF0aGlzLnN0YXRlLnNlbGVjdGlvbi5lcShzdGF0ZS5zZWxlY3Rpb24pKVxuICAgICAgICAgICAgICAgIGRvbUNoYW5nZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiB0aGUgcGhyYXNlcyBjaGFuZ2UsIHJlZHJhdyB0aGUgZWRpdG9yXG4gICAgICAgIGlmIChzdGF0ZS5mYWNldChFZGl0b3JTdGF0ZS5waHJhc2VzKSAhPSB0aGlzLnN0YXRlLmZhY2V0KEVkaXRvclN0YXRlLnBocmFzZXMpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICB1cGRhdGUgPSBWaWV3VXBkYXRlLmNyZWF0ZSh0aGlzLCBzdGF0ZSwgdHJhbnNhY3Rpb25zKTtcbiAgICAgICAgdXBkYXRlLmZsYWdzIHw9IGZvY3VzRmxhZztcbiAgICAgICAgbGV0IHNjcm9sbFRhcmdldCA9IHRoaXMudmlld1N0YXRlLnNjcm9sbFRhcmdldDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAyIC8qIFVwZGF0ZVN0YXRlLlVwZGF0aW5nICovO1xuICAgICAgICAgICAgZm9yIChsZXQgdHIgb2YgdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbFRhcmdldClcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVGFyZ2V0ID0gc2Nyb2xsVGFyZ2V0Lm1hcCh0ci5jaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICBpZiAodHIuc2Nyb2xsSW50b1ZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHsgbWFpbiB9ID0gdHIuc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUYXJnZXQgPSBuZXcgU2Nyb2xsVGFyZ2V0KG1haW4uZW1wdHkgPyBtYWluIDogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihtYWluLmhlYWQsIG1haW4uaGVhZCA+IG1haW4uYW5jaG9yID8gLTEgOiAxKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGUgb2YgdHIuZWZmZWN0cylcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuaXMoc2Nyb2xsSW50b1ZpZXcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVGFyZ2V0ID0gZS52YWx1ZS5jbGlwKHRoaXMuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52aWV3U3RhdGUudXBkYXRlKHVwZGF0ZSwgc2Nyb2xsVGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMuYmlkaUNhY2hlID0gQ2FjaGVkT3JkZXIudXBkYXRlKHRoaXMuYmlkaUNhY2hlLCB1cGRhdGUuY2hhbmdlcyk7XG4gICAgICAgICAgICBpZiAoIXVwZGF0ZS5lbXB0eSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGx1Z2lucyh1cGRhdGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRTdGF0ZS51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlZHJhd24gPSB0aGlzLmRvY1ZpZXcudXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5mYWNldChzdHlsZU1vZHVsZSkgIT0gdGhpcy5zdHlsZU1vZHVsZXMpXG4gICAgICAgICAgICAgICAgdGhpcy5tb3VudFN0eWxlcygpO1xuICAgICAgICAgICAgYXR0cnNDaGFuZ2VkID0gdGhpcy51cGRhdGVBdHRycygpO1xuICAgICAgICAgICAgdGhpcy5zaG93QW5ub3VuY2VtZW50cyh0cmFuc2FjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5kb2NWaWV3LnVwZGF0ZVNlbGVjdGlvbihyZWRyYXduLCB0cmFuc2FjdGlvbnMuc29tZSh0ciA9PiB0ci5pc1VzZXJFdmVudChcInNlbGVjdC5wb2ludGVyXCIpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMCAvKiBVcGRhdGVTdGF0ZS5JZGxlICovO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldCh0aGVtZSkgIT0gdXBkYXRlLnN0YXRlLmZhY2V0KHRoZW1lKSlcbiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlLm11c3RNZWFzdXJlQ29udGVudCA9IHRydWU7XG4gICAgICAgIGlmIChyZWRyYXduIHx8IGF0dHJzQ2hhbmdlZCB8fCBzY3JvbGxUYXJnZXQgfHwgdGhpcy52aWV3U3RhdGUubXVzdEVuZm9yY2VDdXJzb3JBc3NvYyB8fCB0aGlzLnZpZXdTdGF0ZS5tdXN0TWVhc3VyZUNvbnRlbnQpXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RNZWFzdXJlKCk7XG4gICAgICAgIGlmIChyZWRyYXduKVxuICAgICAgICAgICAgdGhpcy5kb2NWaWV3VXBkYXRlKCk7XG4gICAgICAgIGlmICghdXBkYXRlLmVtcHR5KVxuICAgICAgICAgICAgZm9yIChsZXQgbGlzdGVuZXIgb2YgdGhpcy5zdGF0ZS5mYWNldCh1cGRhdGVMaXN0ZW5lcikpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcih1cGRhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dFeGNlcHRpb24odGhpcy5zdGF0ZSwgZSwgXCJ1cGRhdGUgbGlzdGVuZXJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBpZiAoZGlzcGF0Y2hGb2N1cyB8fCBkb21DaGFuZ2UpXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZGlzcGF0Y2hGb2N1cyAmJiB0aGlzLnN0YXRlID09IGRpc3BhdGNoRm9jdXMuc3RhcnRTdGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaChkaXNwYXRjaEZvY3VzKTtcbiAgICAgICAgICAgICAgICBpZiAoZG9tQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXBwbHlET01DaGFuZ2UodGhpcywgZG9tQ2hhbmdlKSAmJiBwZW5kaW5nS2V5LmZvcmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hLZXkodGhpcy5jb250ZW50RE9NLCBwZW5kaW5nS2V5LmtleSwgcGVuZGluZ0tleS5rZXlDb2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVzZXQgdGhlIHZpZXcgdG8gdGhlIGdpdmVuIHN0YXRlLiAoVGhpcyB3aWxsIGNhdXNlIHRoZSBlbnRpcmVcbiAgICBkb2N1bWVudCB0byBiZSByZWRyYXduIGFuZCBhbGwgdmlldyBwbHVnaW5zIHRvIGJlIHJlaW5pdGlhbGl6ZWQsXG4gICAgc28geW91IHNob3VsZCBwcm9iYWJseSBvbmx5IHVzZSBpdCB3aGVuIHRoZSBuZXcgc3RhdGUgaXNuJ3RcbiAgICBkZXJpdmVkIGZyb20gdGhlIG9sZCBzdGF0ZS4gT3RoZXJ3aXNlLCB1c2VcbiAgICBbYGRpc3BhdGNoYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuZGlzcGF0Y2gpIGluc3RlYWQuKVxuICAgICovXG4gICAgc2V0U3RhdGUobmV3U3RhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMudXBkYXRlU3RhdGUgIT0gMCAvKiBVcGRhdGVTdGF0ZS5JZGxlICovKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FsbHMgdG8gRWRpdG9yVmlldy5zZXRTdGF0ZSBhcmUgbm90IGFsbG93ZWQgd2hpbGUgYW4gdXBkYXRlIGlzIGluIHByb2dyZXNzXCIpO1xuICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlLnN0YXRlID0gbmV3U3RhdGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IDIgLyogVXBkYXRlU3RhdGUuVXBkYXRpbmcgKi87XG4gICAgICAgIGxldCBoYWRGb2N1cyA9IHRoaXMuaGFzRm9jdXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKGxldCBwbHVnaW4gb2YgdGhpcy5wbHVnaW5zKVxuICAgICAgICAgICAgICAgIHBsdWdpbi5kZXN0cm95KHRoaXMpO1xuICAgICAgICAgICAgdGhpcy52aWV3U3RhdGUgPSBuZXcgVmlld1N0YXRlKG5ld1N0YXRlKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2lucyA9IG5ld1N0YXRlLmZhY2V0KHZpZXdQbHVnaW4pLm1hcChzcGVjID0+IG5ldyBQbHVnaW5JbnN0YW5jZShzcGVjKSk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbk1hcC5jbGVhcigpO1xuICAgICAgICAgICAgZm9yIChsZXQgcGx1Z2luIG9mIHRoaXMucGx1Z2lucylcbiAgICAgICAgICAgICAgICBwbHVnaW4udXBkYXRlKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5kb2NWaWV3LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuZG9jVmlldyA9IG5ldyBEb2NWaWV3KHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFN0YXRlLmVuc3VyZUhhbmRsZXJzKHRoaXMucGx1Z2lucyk7XG4gICAgICAgICAgICB0aGlzLm1vdW50U3R5bGVzKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUF0dHJzKCk7XG4gICAgICAgICAgICB0aGlzLmJpZGlDYWNoZSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IDAgLyogVXBkYXRlU3RhdGUuSWRsZSAqLztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFkRm9jdXMpXG4gICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgIHRoaXMucmVxdWVzdE1lYXN1cmUoKTtcbiAgICB9XG4gICAgdXBkYXRlUGx1Z2lucyh1cGRhdGUpIHtcbiAgICAgICAgbGV0IHByZXZTcGVjcyA9IHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KHZpZXdQbHVnaW4pLCBzcGVjcyA9IHVwZGF0ZS5zdGF0ZS5mYWNldCh2aWV3UGx1Z2luKTtcbiAgICAgICAgaWYgKHByZXZTcGVjcyAhPSBzcGVjcykge1xuICAgICAgICAgICAgbGV0IG5ld1BsdWdpbnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHNwZWMgb2Ygc3BlY3MpIHtcbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBwcmV2U3BlY3MuaW5kZXhPZihzcGVjKTtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmQgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1BsdWdpbnMucHVzaChuZXcgUGx1Z2luSW5zdGFuY2Uoc3BlYykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBsdWdpbiA9IHRoaXMucGx1Z2luc1tmb3VuZF07XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5tdXN0VXBkYXRlID0gdXBkYXRlO1xuICAgICAgICAgICAgICAgICAgICBuZXdQbHVnaW5zLnB1c2gocGx1Z2luKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBwbHVnaW4gb2YgdGhpcy5wbHVnaW5zKVxuICAgICAgICAgICAgICAgIGlmIChwbHVnaW4ubXVzdFVwZGF0ZSAhPSB1cGRhdGUpXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5kZXN0cm95KHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW5zID0gbmV3UGx1Z2lucztcbiAgICAgICAgICAgIHRoaXMucGx1Z2luTWFwLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBwIG9mIHRoaXMucGx1Z2lucylcbiAgICAgICAgICAgICAgICBwLm11c3RVcGRhdGUgPSB1cGRhdGU7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBsdWdpbnMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB0aGlzLnBsdWdpbnNbaV0udXBkYXRlKHRoaXMpO1xuICAgICAgICBpZiAocHJldlNwZWNzICE9IHNwZWNzKVxuICAgICAgICAgICAgdGhpcy5pbnB1dFN0YXRlLmVuc3VyZUhhbmRsZXJzKHRoaXMucGx1Z2lucyk7XG4gICAgfVxuICAgIGRvY1ZpZXdVcGRhdGUoKSB7XG4gICAgICAgIGZvciAobGV0IHBsdWdpbiBvZiB0aGlzLnBsdWdpbnMpIHtcbiAgICAgICAgICAgIGxldCB2YWwgPSBwbHVnaW4udmFsdWU7XG4gICAgICAgICAgICBpZiAodmFsICYmIHZhbC5kb2NWaWV3VXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsLmRvY1ZpZXdVcGRhdGUodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ0V4Y2VwdGlvbih0aGlzLnN0YXRlLCBlLCBcImRvYyB2aWV3IHVwZGF0ZSBsaXN0ZW5lclwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBtZWFzdXJlKGZsdXNoID0gdHJ1ZSkge1xuICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPiAtMSlcbiAgICAgICAgICAgIHRoaXMud2luLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubWVhc3VyZVNjaGVkdWxlZCk7XG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyLmRlbGF5ZWRBbmRyb2lkS2V5KSB7XG4gICAgICAgICAgICB0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPSAtMTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdE1lYXN1cmUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPSAwOyAvLyBQcmV2ZW50IHJlcXVlc3RNZWFzdXJlIGNhbGxzIGZyb20gc2NoZWR1bGluZyBhbm90aGVyIGFuaW1hdGlvbiBmcmFtZVxuICAgICAgICBpZiAoZmx1c2gpXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyLmZvcmNlRmx1c2goKTtcbiAgICAgICAgbGV0IHVwZGF0ZWQgPSBudWxsO1xuICAgICAgICBsZXQgc0RPTSA9IHRoaXMuc2Nyb2xsRE9NLCBzY3JvbGxUb3AgPSBzRE9NLnNjcm9sbFRvcCAqIHRoaXMuc2NhbGVZO1xuICAgICAgICBsZXQgeyBzY3JvbGxBbmNob3JQb3MsIHNjcm9sbEFuY2hvckhlaWdodCB9ID0gdGhpcy52aWV3U3RhdGU7XG4gICAgICAgIGlmIChNYXRoLmFicyhzY3JvbGxUb3AgLSB0aGlzLnZpZXdTdGF0ZS5zY3JvbGxUb3ApID4gMSlcbiAgICAgICAgICAgIHNjcm9sbEFuY2hvckhlaWdodCA9IC0xO1xuICAgICAgICB0aGlzLnZpZXdTdGF0ZS5zY3JvbGxBbmNob3JIZWlnaHQgPSAtMTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbEFuY2hvckhlaWdodCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzU2Nyb2xsZWRUb0JvdHRvbShzRE9NKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQW5jaG9yUG9zID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxBbmNob3JIZWlnaHQgPSB0aGlzLnZpZXdTdGF0ZS5oZWlnaHRNYXAuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2NrID0gdGhpcy52aWV3U3RhdGUuc2Nyb2xsQW5jaG9yQXQoc2Nyb2xsVG9wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbEFuY2hvclBvcyA9IGJsb2NrLmZyb207XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxBbmNob3JIZWlnaHQgPSBibG9jay50b3A7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IDEgLyogVXBkYXRlU3RhdGUuTWVhc3VyaW5nICovO1xuICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VkID0gdGhpcy52aWV3U3RhdGUubWVhc3VyZSh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNoYW5nZWQgJiYgIXRoaXMubWVhc3VyZVJlcXVlc3RzLmxlbmd0aCAmJiB0aGlzLnZpZXdTdGF0ZS5zY3JvbGxUYXJnZXQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgaWYgKGkgPiA1KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybih0aGlzLm1lYXN1cmVSZXF1ZXN0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJNZWFzdXJlIGxvb3AgcmVzdGFydGVkIG1vcmUgdGhhbiA1IHRpbWVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJWaWV3cG9ydCBmYWlsZWQgdG8gc3RhYmlsaXplXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG1lYXN1cmluZyA9IFtdO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgcnVuIG1lYXN1cmUgcmVxdWVzdHMgaW4gdGhpcyBjeWNsZSB3aGVuIHRoZSB2aWV3cG9ydCBkaWRuJ3QgY2hhbmdlXG4gICAgICAgICAgICAgICAgaWYgKCEoY2hhbmdlZCAmIDQgLyogVXBkYXRlRmxhZy5WaWV3cG9ydCAqLykpXG4gICAgICAgICAgICAgICAgICAgIFt0aGlzLm1lYXN1cmVSZXF1ZXN0cywgbWVhc3VyaW5nXSA9IFttZWFzdXJpbmcsIHRoaXMubWVhc3VyZVJlcXVlc3RzXTtcbiAgICAgICAgICAgICAgICBsZXQgbWVhc3VyZWQgPSBtZWFzdXJpbmcubWFwKG0gPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0ucmVhZCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHRoaXMuc3RhdGUsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJhZE1lYXN1cmU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsZXQgdXBkYXRlID0gVmlld1VwZGF0ZS5jcmVhdGUodGhpcywgdGhpcy5zdGF0ZSwgW10pLCByZWRyYXduID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdXBkYXRlLmZsYWdzIHw9IGNoYW5nZWQ7XG4gICAgICAgICAgICAgICAgaWYgKCF1cGRhdGVkKVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkID0gdXBkYXRlO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZC5mbGFncyB8PSBjaGFuZ2VkO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAyIC8qIFVwZGF0ZVN0YXRlLlVwZGF0aW5nICovO1xuICAgICAgICAgICAgICAgIGlmICghdXBkYXRlLmVtcHR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGx1Z2lucyh1cGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0U3RhdGUudXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQXR0cnMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVkcmF3biA9IHRoaXMuZG9jVmlldy51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlZHJhd24pXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvY1ZpZXdVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZWFzdXJpbmcubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZWFzdXJlZFtpXSAhPSBCYWRNZWFzdXJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtID0gbWVhc3VyaW5nW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtLndyaXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLndyaXRlKG1lYXN1cmVkW2ldLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHRoaXMuc3RhdGUsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlZHJhd24pXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jVmlldy51cGRhdGVTZWxlY3Rpb24odHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1cGRhdGUudmlld3BvcnRDaGFuZ2VkICYmIHRoaXMubWVhc3VyZVJlcXVlc3RzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdTdGF0ZS5lZGl0b3JIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdTdGF0ZS5zY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvY1ZpZXcuc2Nyb2xsSW50b1ZpZXcodGhpcy52aWV3U3RhdGUuc2Nyb2xsVGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZS5zY3JvbGxUYXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbEFuY2hvckhlaWdodCA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0FuY2hvckhlaWdodCA9IHNjcm9sbEFuY2hvclBvcyA8IDAgPyB0aGlzLnZpZXdTdGF0ZS5oZWlnaHRNYXAuaGVpZ2h0IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3U3RhdGUubGluZUJsb2NrQXQoc2Nyb2xsQW5jaG9yUG9zKS50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpZmYgPSBuZXdBbmNob3JIZWlnaHQgLSBzY3JvbGxBbmNob3JIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYgPiAxIHx8IGRpZmYgPCAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3AgPSBzY3JvbGxUb3AgKyBkaWZmO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzRE9NLnNjcm9sbFRvcCA9IHNjcm9sbFRvcCAvIHRoaXMuc2NhbGVZO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxBbmNob3JIZWlnaHQgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAwIC8qIFVwZGF0ZVN0YXRlLklkbGUgKi87XG4gICAgICAgICAgICB0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlZCAmJiAhdXBkYXRlZC5lbXB0eSlcbiAgICAgICAgICAgIGZvciAobGV0IGxpc3RlbmVyIG9mIHRoaXMuc3RhdGUuZmFjZXQodXBkYXRlTGlzdGVuZXIpKVxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKHVwZGF0ZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIENTUyBjbGFzc2VzIGZvciB0aGUgY3VycmVudGx5IGFjdGl2ZSBlZGl0b3IgdGhlbWVzLlxuICAgICovXG4gICAgZ2V0IHRoZW1lQ2xhc3NlcygpIHtcbiAgICAgICAgcmV0dXJuIGJhc2VUaGVtZUlEICsgXCIgXCIgK1xuICAgICAgICAgICAgKHRoaXMuc3RhdGUuZmFjZXQoZGFya1RoZW1lKSA/IGJhc2VEYXJrSUQgOiBiYXNlTGlnaHRJRCkgKyBcIiBcIiArXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmZhY2V0KHRoZW1lKTtcbiAgICB9XG4gICAgdXBkYXRlQXR0cnMoKSB7XG4gICAgICAgIGxldCBlZGl0b3JBdHRycyA9IGF0dHJzRnJvbUZhY2V0KHRoaXMsIGVkaXRvckF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICAgIGNsYXNzOiBcImNtLWVkaXRvclwiICsgKHRoaXMuaGFzRm9jdXMgPyBcIiBjbS1mb2N1c2VkIFwiIDogXCIgXCIpICsgdGhpcy50aGVtZUNsYXNzZXNcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBjb250ZW50QXR0cnMgPSB7XG4gICAgICAgICAgICBzcGVsbGNoZWNrOiBcImZhbHNlXCIsXG4gICAgICAgICAgICBhdXRvY29ycmVjdDogXCJvZmZcIixcbiAgICAgICAgICAgIGF1dG9jYXBpdGFsaXplOiBcIm9mZlwiLFxuICAgICAgICAgICAgd3JpdGluZ3N1Z2dlc3Rpb25zOiBcImZhbHNlXCIsXG4gICAgICAgICAgICB0cmFuc2xhdGU6IFwibm9cIixcbiAgICAgICAgICAgIGNvbnRlbnRlZGl0YWJsZTogIXRoaXMuc3RhdGUuZmFjZXQoZWRpdGFibGUpID8gXCJmYWxzZVwiIDogXCJ0cnVlXCIsXG4gICAgICAgICAgICBjbGFzczogXCJjbS1jb250ZW50XCIsXG4gICAgICAgICAgICBzdHlsZTogYCR7YnJvd3Nlci50YWJTaXplfTogJHt0aGlzLnN0YXRlLnRhYlNpemV9YCxcbiAgICAgICAgICAgIHJvbGU6IFwidGV4dGJveFwiLFxuICAgICAgICAgICAgXCJhcmlhLW11bHRpbGluZVwiOiBcInRydWVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgICAgIGNvbnRlbnRBdHRyc1tcImFyaWEtcmVhZG9ubHlcIl0gPSBcInRydWVcIjtcbiAgICAgICAgYXR0cnNGcm9tRmFjZXQodGhpcywgY29udGVudEF0dHJpYnV0ZXMsIGNvbnRlbnRBdHRycyk7XG4gICAgICAgIGxldCBjaGFuZ2VkID0gdGhpcy5vYnNlcnZlci5pZ25vcmUoKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGNoYW5nZWRDb250ZW50ID0gdXBkYXRlQXR0cnModGhpcy5jb250ZW50RE9NLCB0aGlzLmNvbnRlbnRBdHRycywgY29udGVudEF0dHJzKTtcbiAgICAgICAgICAgIGxldCBjaGFuZ2VkRWRpdG9yID0gdXBkYXRlQXR0cnModGhpcy5kb20sIHRoaXMuZWRpdG9yQXR0cnMsIGVkaXRvckF0dHJzKTtcbiAgICAgICAgICAgIHJldHVybiBjaGFuZ2VkQ29udGVudCB8fCBjaGFuZ2VkRWRpdG9yO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lZGl0b3JBdHRycyA9IGVkaXRvckF0dHJzO1xuICAgICAgICB0aGlzLmNvbnRlbnRBdHRycyA9IGNvbnRlbnRBdHRycztcbiAgICAgICAgcmV0dXJuIGNoYW5nZWQ7XG4gICAgfVxuICAgIHNob3dBbm5vdW5jZW1lbnRzKHRycykge1xuICAgICAgICBsZXQgZmlyc3QgPSB0cnVlO1xuICAgICAgICBmb3IgKGxldCB0ciBvZiB0cnMpXG4gICAgICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgdHIuZWZmZWN0cylcbiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0LmlzKEVkaXRvclZpZXcuYW5ub3VuY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5ub3VuY2VET00udGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGl2ID0gdGhpcy5hbm5vdW5jZURPTS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcbiAgICAgICAgICAgICAgICAgICAgZGl2LnRleHRDb250ZW50ID0gZWZmZWN0LnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICB9XG4gICAgbW91bnRTdHlsZXMoKSB7XG4gICAgICAgIHRoaXMuc3R5bGVNb2R1bGVzID0gdGhpcy5zdGF0ZS5mYWNldChzdHlsZU1vZHVsZSk7XG4gICAgICAgIGxldCBub25jZSA9IHRoaXMuc3RhdGUuZmFjZXQoRWRpdG9yVmlldy5jc3BOb25jZSk7XG4gICAgICAgIFN0eWxlTW9kdWxlLm1vdW50KHRoaXMucm9vdCwgdGhpcy5zdHlsZU1vZHVsZXMuY29uY2F0KGJhc2VUaGVtZSQxKS5yZXZlcnNlKCksIG5vbmNlID8geyBub25jZSB9IDogdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgcmVhZE1lYXN1cmVkKCkge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVTdGF0ZSA9PSAyIC8qIFVwZGF0ZVN0YXRlLlVwZGF0aW5nICovKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVhZGluZyB0aGUgZWRpdG9yIGxheW91dCBpc24ndCBhbGxvd2VkIGR1cmluZyBhbiB1cGRhdGVcIik7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZVN0YXRlID09IDAgLyogVXBkYXRlU3RhdGUuSWRsZSAqLyAmJiB0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPiAtMSlcbiAgICAgICAgICAgIHRoaXMubWVhc3VyZShmYWxzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFNjaGVkdWxlIGEgbGF5b3V0IG1lYXN1cmVtZW50LCBvcHRpb25hbGx5IHByb3ZpZGluZyBjYWxsYmFja3MgdG9cbiAgICBkbyBjdXN0b20gRE9NIG1lYXN1cmluZyBmb2xsb3dlZCBieSBhIERPTSB3cml0ZSBwaGFzZS4gVXNpbmdcbiAgICB0aGlzIGlzIHByZWZlcmFibGUgcmVhZGluZyBET00gbGF5b3V0IGRpcmVjdGx5IGZyb20sIGZvclxuICAgIGV4YW1wbGUsIGFuIGV2ZW50IGhhbmRsZXIsIGJlY2F1c2UgaXQnbGwgbWFrZSBzdXJlIG1lYXN1cmluZyBhbmRcbiAgICBkcmF3aW5nIGRvbmUgYnkgb3RoZXIgY29tcG9uZW50cyBpcyBzeW5jaHJvbml6ZWQsIGF2b2lkaW5nXG4gICAgdW5uZWNlc3NhcnkgRE9NIGxheW91dCBjb21wdXRhdGlvbnMuXG4gICAgKi9cbiAgICByZXF1ZXN0TWVhc3VyZShyZXF1ZXN0KSB7XG4gICAgICAgIGlmICh0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPCAwKVxuICAgICAgICAgICAgdGhpcy5tZWFzdXJlU2NoZWR1bGVkID0gdGhpcy53aW4ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMubWVhc3VyZSgpKTtcbiAgICAgICAgaWYgKHJlcXVlc3QpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1lYXN1cmVSZXF1ZXN0cy5pbmRleE9mKHJlcXVlc3QpID4gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHJlcXVlc3Qua2V5ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lYXN1cmVSZXF1ZXN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZWFzdXJlUmVxdWVzdHNbaV0ua2V5ID09PSByZXF1ZXN0LmtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZWFzdXJlUmVxdWVzdHNbaV0gPSByZXF1ZXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tZWFzdXJlUmVxdWVzdHMucHVzaChyZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHZhbHVlIG9mIGEgc3BlY2lmaWMgcGx1Z2luLCBpZiBwcmVzZW50LiBOb3RlIHRoYXRcbiAgICBwbHVnaW5zIHRoYXQgY3Jhc2ggY2FuIGJlIGRyb3BwZWQgZnJvbSBhIHZpZXcsIHNvIGV2ZW4gd2hlbiB5b3VcbiAgICBrbm93IHlvdSByZWdpc3RlcmVkIGEgZ2l2ZW4gcGx1Z2luLCBpdCBpcyByZWNvbW1lbmRlZCB0byBjaGVja1xuICAgIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhpcyBtZXRob2QuXG4gICAgKi9cbiAgICBwbHVnaW4ocGx1Z2luKSB7XG4gICAgICAgIGxldCBrbm93biA9IHRoaXMucGx1Z2luTWFwLmdldChwbHVnaW4pO1xuICAgICAgICBpZiAoa25vd24gPT09IHVuZGVmaW5lZCB8fCBrbm93biAmJiBrbm93bi5wbHVnaW4gIT0gcGx1Z2luKVxuICAgICAgICAgICAgdGhpcy5wbHVnaW5NYXAuc2V0KHBsdWdpbiwga25vd24gPSB0aGlzLnBsdWdpbnMuZmluZChwID0+IHAucGx1Z2luID09IHBsdWdpbikgfHwgbnVsbCk7XG4gICAgICAgIHJldHVybiBrbm93biAmJiBrbm93bi51cGRhdGUodGhpcykudmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSB0b3AgcG9zaXRpb24gb2YgdGhlIGRvY3VtZW50LCBpbiBzY3JlZW4gY29vcmRpbmF0ZXMuIFRoaXNcbiAgICBtYXkgYmUgbmVnYXRpdmUgd2hlbiB0aGUgZWRpdG9yIGlzIHNjcm9sbGVkIGRvd24uIFBvaW50c1xuICAgIGRpcmVjdGx5IHRvIHRoZSB0b3Agb2YgdGhlIGZpcnN0IGxpbmUsIG5vdCBhYm92ZSB0aGUgcGFkZGluZy5cbiAgICAqL1xuICAgIGdldCBkb2N1bWVudFRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB0aGlzLnZpZXdTdGF0ZS5wYWRkaW5nVG9wO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXBvcnRzIHRoZSBwYWRkaW5nIGFib3ZlIGFuZCBiZWxvdyB0aGUgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBnZXQgZG9jdW1lbnRQYWRkaW5nKCkge1xuICAgICAgICByZXR1cm4geyB0b3A6IHRoaXMudmlld1N0YXRlLnBhZGRpbmdUb3AsIGJvdHRvbTogdGhpcy52aWV3U3RhdGUucGFkZGluZ0JvdHRvbSB9O1xuICAgIH1cbiAgICAvKipcbiAgICBJZiB0aGUgZWRpdG9yIGlzIHRyYW5zZm9ybWVkIHdpdGggQ1NTLCB0aGlzIHByb3ZpZGVzIHRoZSBzY2FsZVxuICAgIGFsb25nIHRoZSBYIGF4aXMuIE90aGVyd2lzZSwgaXQgd2lsbCBqdXN0IGJlIDEuIE5vdGUgdGhhdFxuICAgIHRyYW5zZm9ybXMgb3RoZXIgdGhhbiB0cmFuc2xhdGlvbiBhbmQgc2NhbGluZyBhcmUgbm90IHN1cHBvcnRlZC5cbiAgICAqL1xuICAgIGdldCBzY2FsZVgoKSB7IHJldHVybiB0aGlzLnZpZXdTdGF0ZS5zY2FsZVg7IH1cbiAgICAvKipcbiAgICBQcm92aWRlIHRoZSBDU1MgdHJhbnNmb3JtZWQgc2NhbGUgYWxvbmcgdGhlIFkgYXhpcy5cbiAgICAqL1xuICAgIGdldCBzY2FsZVkoKSB7IHJldHVybiB0aGlzLnZpZXdTdGF0ZS5zY2FsZVk7IH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSB0ZXh0IGxpbmUgb3IgYmxvY2sgd2lkZ2V0IGF0IHRoZSBnaXZlbiB2ZXJ0aWNhbFxuICAgIHBvc2l0aW9uICh3aGljaCBpcyBpbnRlcnByZXRlZCBhcyByZWxhdGl2ZSB0byB0aGUgW3RvcCBvZiB0aGVcbiAgICBkb2N1bWVudF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuZG9jdW1lbnRUb3ApKS5cbiAgICAqL1xuICAgIGVsZW1lbnRBdEhlaWdodChoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld1N0YXRlLmVsZW1lbnRBdEhlaWdodChoZWlnaHQpO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBsaW5lIGJsb2NrIChzZWVcbiAgICBbYGxpbmVCbG9ja0F0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcubGluZUJsb2NrQXQpKSBhdCB0aGUgZ2l2ZW5cbiAgICBoZWlnaHQsIGFnYWluIGludGVycHJldGVkIHJlbGF0aXZlIHRvIHRoZSBbdG9wIG9mIHRoZVxuICAgIGRvY3VtZW50XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5kb2N1bWVudFRvcCkuXG4gICAgKi9cbiAgICBsaW5lQmxvY2tBdEhlaWdodChoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld1N0YXRlLmxpbmVCbG9ja0F0SGVpZ2h0KGhlaWdodCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgZXh0ZW50IGFuZCB2ZXJ0aWNhbCBwb3NpdGlvbiBvZiBhbGwgW2xpbmVcbiAgICBibG9ja3NdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmxpbmVCbG9ja0F0KSBpbiB0aGUgdmlld3BvcnQuIFBvc2l0aW9uc1xuICAgIGFyZSByZWxhdGl2ZSB0byB0aGUgW3RvcCBvZiB0aGVcbiAgICBkb2N1bWVudF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuZG9jdW1lbnRUb3ApO1xuICAgICovXG4gICAgZ2V0IHZpZXdwb3J0TGluZUJsb2NrcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld1N0YXRlLnZpZXdwb3J0TGluZXM7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGxpbmUgYmxvY2sgYXJvdW5kIHRoZSBnaXZlbiBkb2N1bWVudCBwb3NpdGlvbi4gQSBsaW5lXG4gICAgYmxvY2sgaXMgYSByYW5nZSBkZWxpbWl0ZWQgb24gYm90aCBzaWRlcyBieSBlaXRoZXIgYVxuICAgIG5vbi1baGlkZGVuXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRGVjb3JhdGlvbl5yZXBsYWNlKSBsaW5lIGJyZWFrLCBvciB0aGVcbiAgICBzdGFydC9lbmQgb2YgdGhlIGRvY3VtZW50LiBJdCB3aWxsIHVzdWFsbHkganVzdCBob2xkIGEgbGluZSBvZlxuICAgIHRleHQsIGJ1dCBtYXkgYmUgYnJva2VuIGludG8gbXVsdGlwbGUgdGV4dGJsb2NrcyBieSBibG9ja1xuICAgIHdpZGdldHMuXG4gICAgKi9cbiAgICBsaW5lQmxvY2tBdChwb3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld1N0YXRlLmxpbmVCbG9ja0F0KHBvcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBlZGl0b3IncyB0b3RhbCBjb250ZW50IGhlaWdodC5cbiAgICAqL1xuICAgIGdldCBjb250ZW50SGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3U3RhdGUuY29udGVudEhlaWdodDtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSBhIGN1cnNvciBwb3NpdGlvbiBieSBbZ3JhcGhlbWVcbiAgICBjbHVzdGVyXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLmZpbmRDbHVzdGVyQnJlYWspLiBgZm9yd2FyZGAgZGV0ZXJtaW5lcyB3aGV0aGVyXG4gICAgdGhlIG1vdGlvbiBpcyBhd2F5IGZyb20gdGhlIGxpbmUgc3RhcnQsIG9yIHRvd2FyZHMgaXQuIEluXG4gICAgYmlkaXJlY3Rpb25hbCB0ZXh0LCB0aGUgbGluZSBpcyB0cmF2ZXJzZWQgaW4gdmlzdWFsIG9yZGVyLCB1c2luZ1xuICAgIHRoZSBlZGl0b3IncyBbdGV4dCBkaXJlY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnRleHREaXJlY3Rpb24pLlxuICAgIFdoZW4gdGhlIHN0YXJ0IHBvc2l0aW9uIHdhcyB0aGUgbGFzdCBvbmUgb24gdGhlIGxpbmUsIHRoZVxuICAgIHJldHVybmVkIHBvc2l0aW9uIHdpbGwgYmUgYWNyb3NzIHRoZSBsaW5lIGJyZWFrLiBJZiB0aGVyZSBpcyBub1xuICAgIGZ1cnRoZXIgbGluZSwgdGhlIG9yaWdpbmFsIHBvc2l0aW9uIGlzIHJldHVybmVkLlxuICAgIFxuICAgIEJ5IGRlZmF1bHQsIHRoaXMgbWV0aG9kIG1vdmVzIG92ZXIgYSBzaW5nbGUgY2x1c3Rlci4gVGhlXG4gICAgb3B0aW9uYWwgYGJ5YCBhcmd1bWVudCBjYW4gYmUgdXNlZCB0byBtb3ZlIGFjcm9zcyBtb3JlLiBJdCB3aWxsXG4gICAgYmUgY2FsbGVkIHdpdGggdGhlIGZpcnN0IGNsdXN0ZXIgYXMgYXJndW1lbnQsIGFuZCBzaG91bGQgcmV0dXJuXG4gICAgYSBwcmVkaWNhdGUgdGhhdCBkZXRlcm1pbmVzLCBmb3IgZWFjaCBzdWJzZXF1ZW50IGNsdXN0ZXIsXG4gICAgd2hldGhlciBpdCBzaG91bGQgYWxzbyBiZSBtb3ZlZCBvdmVyLlxuICAgICovXG4gICAgbW92ZUJ5Q2hhcihzdGFydCwgZm9yd2FyZCwgYnkpIHtcbiAgICAgICAgcmV0dXJuIHNraXBBdG9tcyh0aGlzLCBzdGFydCwgbW92ZUJ5Q2hhcih0aGlzLCBzdGFydCwgZm9yd2FyZCwgYnkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSBhIGN1cnNvciBwb3NpdGlvbiBhY3Jvc3MgdGhlIG5leHQgZ3JvdXAgb2YgZWl0aGVyXG4gICAgW2xldHRlcnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUuY2hhckNhdGVnb3JpemVyKSBvciBub24tbGV0dGVyXG4gICAgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVycy5cbiAgICAqL1xuICAgIG1vdmVCeUdyb3VwKHN0YXJ0LCBmb3J3YXJkKSB7XG4gICAgICAgIHJldHVybiBza2lwQXRvbXModGhpcywgc3RhcnQsIG1vdmVCeUNoYXIodGhpcywgc3RhcnQsIGZvcndhcmQsIGluaXRpYWwgPT4gYnlHcm91cCh0aGlzLCBzdGFydC5oZWFkLCBpbml0aWFsKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGN1cnNvciBwb3NpdGlvbiB2aXN1YWxseSBhdCB0aGUgc3RhcnQgb3IgZW5kIG9mIGEgbGluZS5cbiAgICBOb3RlIHRoYXQgdGhpcyBtYXkgZGlmZmVyIGZyb20gdGhlIF9sb2dpY2FsXyBwb3NpdGlvbiBhdCBpdHNcbiAgICBzdGFydCBvciBlbmQgKHdoaWNoIGlzIHNpbXBseSBhdCBgbGluZS5mcm9tYC9gbGluZS50b2ApIGlmIHRleHRcbiAgICBhdCB0aGUgc3RhcnQgb3IgZW5kIGdvZXMgYWdhaW5zdCB0aGUgbGluZSdzIGJhc2UgdGV4dCBkaXJlY3Rpb24uXG4gICAgKi9cbiAgICB2aXN1YWxMaW5lU2lkZShsaW5lLCBlbmQpIHtcbiAgICAgICAgbGV0IG9yZGVyID0gdGhpcy5iaWRpU3BhbnMobGluZSksIGRpciA9IHRoaXMudGV4dERpcmVjdGlvbkF0KGxpbmUuZnJvbSk7XG4gICAgICAgIGxldCBzcGFuID0gb3JkZXJbZW5kID8gb3JkZXIubGVuZ3RoIC0gMSA6IDBdO1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihzcGFuLnNpZGUoZW5kLCBkaXIpICsgbGluZS5mcm9tLCBzcGFuLmZvcndhcmQoIWVuZCwgZGlyKSA/IDEgOiAtMSk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgdG8gdGhlIG5leHQgbGluZSBib3VuZGFyeSBpbiB0aGUgZ2l2ZW4gZGlyZWN0aW9uLiBJZlxuICAgIGBpbmNsdWRlV3JhcGAgaXMgdHJ1ZSwgbGluZSB3cmFwcGluZyBpcyBvbiwgYW5kIHRoZXJlIGlzIGFcbiAgICBmdXJ0aGVyIHdyYXAgcG9pbnQgb24gdGhlIGN1cnJlbnQgbGluZSwgdGhlIHdyYXAgcG9pbnQgd2lsbCBiZVxuICAgIHJldHVybmVkLiBPdGhlcndpc2UgdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgc3RhcnQgb3IgZW5kXG4gICAgb2YgdGhlIGxpbmUuXG4gICAgKi9cbiAgICBtb3ZlVG9MaW5lQm91bmRhcnkoc3RhcnQsIGZvcndhcmQsIGluY2x1ZGVXcmFwID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gbW92ZVRvTGluZUJvdW5kYXJ5KHRoaXMsIHN0YXJ0LCBmb3J3YXJkLCBpbmNsdWRlV3JhcCk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgYSBjdXJzb3IgcG9zaXRpb24gdmVydGljYWxseS4gV2hlbiBgZGlzdGFuY2VgIGlzbid0IGdpdmVuLFxuICAgIGl0IGRlZmF1bHRzIHRvIG1vdmluZyB0byB0aGUgbmV4dCBsaW5lIChpbmNsdWRpbmcgd3JhcHBlZFxuICAgIGxpbmVzKS4gT3RoZXJ3aXNlLCBgZGlzdGFuY2VgIHNob3VsZCBwcm92aWRlIGEgcG9zaXRpdmUgZGlzdGFuY2VcbiAgICBpbiBwaXhlbHMuXG4gICAgXG4gICAgV2hlbiBgc3RhcnRgIGhhcyBhXG4gICAgW2Bnb2FsQ29sdW1uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TZWxlY3Rpb25SYW5nZS5nb2FsQ29sdW1uKSwgdGhlIHZlcnRpY2FsXG4gICAgbW90aW9uIHdpbGwgdXNlIHRoYXQgYXMgYSB0YXJnZXQgaG9yaXpvbnRhbCBwb3NpdGlvbi4gT3RoZXJ3aXNlLFxuICAgIHRoZSBjdXJzb3IncyBvd24gaG9yaXpvbnRhbCBwb3NpdGlvbiBpcyB1c2VkLiBUaGUgcmV0dXJuZWRcbiAgICBjdXJzb3Igd2lsbCBoYXZlIGl0cyBnb2FsIGNvbHVtbiBzZXQgdG8gd2hpY2hldmVyIGNvbHVtbiB3YXNcbiAgICB1c2VkLlxuICAgICovXG4gICAgbW92ZVZlcnRpY2FsbHkoc3RhcnQsIGZvcndhcmQsIGRpc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiBza2lwQXRvbXModGhpcywgc3RhcnQsIG1vdmVWZXJ0aWNhbGx5KHRoaXMsIHN0YXJ0LCBmb3J3YXJkLCBkaXN0YW5jZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBET00gcGFyZW50IG5vZGUgYW5kIG9mZnNldCAoY2hpbGQgb2Zmc2V0IGlmIGBub2RlYCBpc1xuICAgIGFuIGVsZW1lbnQsIGNoYXJhY3RlciBvZmZzZXQgd2hlbiBpdCBpcyBhIHRleHQgbm9kZSkgYXQgdGhlXG4gICAgZ2l2ZW4gZG9jdW1lbnQgcG9zaXRpb24uXG4gICAgXG4gICAgTm90ZSB0aGF0IGZvciBwb3NpdGlvbnMgdGhhdCBhcmVuJ3QgY3VycmVudGx5IGluXG4gICAgYHZpc2libGVSYW5nZXNgLCB0aGUgcmVzdWx0aW5nIERPTSBwb3NpdGlvbiBpc24ndCBuZWNlc3NhcmlseVxuICAgIG1lYW5pbmdmdWwgKGl0IG1heSBqdXN0IHBvaW50IGJlZm9yZSBvciBhZnRlciBhIHBsYWNlaG9sZGVyXG4gICAgZWxlbWVudCkuXG4gICAgKi9cbiAgICBkb21BdFBvcyhwb3MsIHNpZGUgPSAxKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY1ZpZXcuZG9tQXRQb3MocG9zLCBzaWRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgZG9jdW1lbnQgcG9zaXRpb24gYXQgdGhlIGdpdmVuIERPTSBub2RlLiBDYW4gYmUgdXNlZnVsXG4gICAgZm9yIGFzc29jaWF0aW5nIHBvc2l0aW9ucyB3aXRoIERPTSBldmVudHMuIFdpbGwgcmFpc2UgYW4gZXJyb3JcbiAgICB3aGVuIGBub2RlYCBpc24ndCBwYXJ0IG9mIHRoZSBlZGl0b3IgY29udGVudC5cbiAgICAqL1xuICAgIHBvc0F0RE9NKG5vZGUsIG9mZnNldCA9IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jVmlldy5wb3NGcm9tRE9NKG5vZGUsIG9mZnNldCk7XG4gICAgfVxuICAgIHBvc0F0Q29vcmRzKGNvb3JkcywgcHJlY2lzZSA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgbGV0IGZvdW5kID0gcG9zQXRDb29yZHModGhpcywgY29vcmRzLCBwcmVjaXNlKTtcbiAgICAgICAgcmV0dXJuIGZvdW5kICYmIGZvdW5kLnBvcztcbiAgICB9XG4gICAgcG9zQW5kU2lkZUF0Q29vcmRzKGNvb3JkcywgcHJlY2lzZSA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgcmV0dXJuIHBvc0F0Q29vcmRzKHRoaXMsIGNvb3JkcywgcHJlY2lzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgc2NyZWVuIGNvb3JkaW5hdGVzIGF0IHRoZSBnaXZlbiBkb2N1bWVudCBwb3NpdGlvbi5cbiAgICBgc2lkZWAgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBjb29yZGluYXRlcyBhcmUgYmFzZWQgb24gdGhlXG4gICAgZWxlbWVudCBiZWZvcmUgKC0xKSBvciBhZnRlciAoMSkgdGhlIHBvc2l0aW9uIChpZiBubyBlbGVtZW50IGlzXG4gICAgYXZhaWxhYmxlIG9uIHRoZSBnaXZlbiBzaWRlLCB0aGUgbWV0aG9kIHdpbGwgdHJhbnNwYXJlbnRseSB1c2VcbiAgICBhbm90aGVyIHN0cmF0ZWd5IHRvIGdldCByZWFzb25hYmxlIGNvb3JkaW5hdGVzKS5cbiAgICAqL1xuICAgIGNvb3Jkc0F0UG9zKHBvcywgc2lkZSA9IDEpIHtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgbGV0IHJlY3QgPSB0aGlzLmRvY1ZpZXcuY29vcmRzQXQocG9zLCBzaWRlKTtcbiAgICAgICAgaWYgKCFyZWN0IHx8IHJlY3QubGVmdCA9PSByZWN0LnJpZ2h0KVxuICAgICAgICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgICAgIGxldCBsaW5lID0gdGhpcy5zdGF0ZS5kb2MubGluZUF0KHBvcyksIG9yZGVyID0gdGhpcy5iaWRpU3BhbnMobGluZSk7XG4gICAgICAgIGxldCBzcGFuID0gb3JkZXJbQmlkaVNwYW4uZmluZChvcmRlciwgcG9zIC0gbGluZS5mcm9tLCAtMSwgc2lkZSldO1xuICAgICAgICByZXR1cm4gZmxhdHRlblJlY3QocmVjdCwgKHNwYW4uZGlyID09IERpcmVjdGlvbi5MVFIpID09IChzaWRlID4gMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gdGhlIHJlY3RhbmdsZSBhcm91bmQgYSBnaXZlbiBjaGFyYWN0ZXIuIElmIGBwb3NgIGRvZXMgbm90XG4gICAgcG9pbnQgaW4gZnJvbnQgb2YgYSBjaGFyYWN0ZXIgdGhhdCBpcyBpbiB0aGUgdmlld3BvcnQgYW5kXG4gICAgcmVuZGVyZWQgKGkuZS4gbm90IHJlcGxhY2VkLCBub3QgYSBsaW5lIGJyZWFrKSwgdGhpcyB3aWxsIHJldHVyblxuICAgIG51bGwuIEZvciBzcGFjZSBjaGFyYWN0ZXJzIHRoYXQgYXJlIGEgbGluZSB3cmFwIHBvaW50LCB0aGlzIHdpbGxcbiAgICByZXR1cm4gdGhlIHBvc2l0aW9uIGJlZm9yZSB0aGUgbGluZSBicmVhay5cbiAgICAqL1xuICAgIGNvb3Jkc0ZvckNoYXIocG9zKSB7XG4gICAgICAgIHRoaXMucmVhZE1lYXN1cmVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY1ZpZXcuY29vcmRzRm9yQ2hhcihwb3MpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZGVmYXVsdCB3aWR0aCBvZiBhIGNoYXJhY3RlciBpbiB0aGUgZWRpdG9yLiBNYXkgbm90XG4gICAgYWNjdXJhdGVseSByZWZsZWN0IHRoZSB3aWR0aCBvZiBhbGwgY2hhcmFjdGVycyAoZ2l2ZW4gdmFyaWFibGVcbiAgICB3aWR0aCBmb250cyBvciBzdHlsaW5nIG9mIGludmlkaWR1YWwgcmFuZ2VzKS5cbiAgICAqL1xuICAgIGdldCBkZWZhdWx0Q2hhcmFjdGVyV2lkdGgoKSB7IHJldHVybiB0aGlzLnZpZXdTdGF0ZS5oZWlnaHRPcmFjbGUuY2hhcldpZHRoOyB9XG4gICAgLyoqXG4gICAgVGhlIGRlZmF1bHQgaGVpZ2h0IG9mIGEgbGluZSBpbiB0aGUgZWRpdG9yLiBNYXkgbm90IGJlIGFjY3VyYXRlXG4gICAgZm9yIGFsbCBsaW5lcy5cbiAgICAqL1xuICAgIGdldCBkZWZhdWx0TGluZUhlaWdodCgpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLmhlaWdodE9yYWNsZS5saW5lSGVpZ2h0OyB9XG4gICAgLyoqXG4gICAgVGhlIHRleHQgZGlyZWN0aW9uXG4gICAgKFtgZGlyZWN0aW9uYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2RpcmVjdGlvbilcbiAgICBDU1MgcHJvcGVydHkpIG9mIHRoZSBlZGl0b3IncyBjb250ZW50IGVsZW1lbnQuXG4gICAgKi9cbiAgICBnZXQgdGV4dERpcmVjdGlvbigpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLmRlZmF1bHRUZXh0RGlyZWN0aW9uOyB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgdGV4dCBkaXJlY3Rpb24gb2YgdGhlIGJsb2NrIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiwgYXNcbiAgICBhc3NpZ25lZCBieSBDU1MuIElmXG4gICAgW2BwZXJMaW5lVGV4dERpcmVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XnBlckxpbmVUZXh0RGlyZWN0aW9uKVxuICAgIGlzbid0IGVuYWJsZWQsIG9yIHRoZSBnaXZlbiBwb3NpdGlvbiBpcyBvdXRzaWRlIG9mIHRoZSB2aWV3cG9ydCxcbiAgICB0aGlzIHdpbGwgYWx3YXlzIHJldHVybiB0aGUgc2FtZSBhc1xuICAgIFtgdGV4dERpcmVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnRleHREaXJlY3Rpb24pLiBOb3RlIHRoYXRcbiAgICB0aGlzIG1heSB0cmlnZ2VyIGEgRE9NIGxheW91dC5cbiAgICAqL1xuICAgIHRleHREaXJlY3Rpb25BdChwb3MpIHtcbiAgICAgICAgbGV0IHBlckxpbmUgPSB0aGlzLnN0YXRlLmZhY2V0KHBlckxpbmVUZXh0RGlyZWN0aW9uKTtcbiAgICAgICAgaWYgKCFwZXJMaW5lIHx8IHBvcyA8IHRoaXMudmlld3BvcnQuZnJvbSB8fCBwb3MgPiB0aGlzLnZpZXdwb3J0LnRvKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dERpcmVjdGlvbjtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jVmlldy50ZXh0RGlyZWN0aW9uQXQocG9zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGlzIGVkaXRvciBbd3JhcHMgbGluZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmxpbmVXcmFwcGluZylcbiAgICAoYXMgZGV0ZXJtaW5lZCBieSB0aGVcbiAgICBbYHdoaXRlLXNwYWNlYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3doaXRlLXNwYWNlKVxuICAgIENTUyBwcm9wZXJ0eSBvZiBpdHMgY29udGVudCBlbGVtZW50KS5cbiAgICAqL1xuICAgIGdldCBsaW5lV3JhcHBpbmcoKSB7IHJldHVybiB0aGlzLnZpZXdTdGF0ZS5oZWlnaHRPcmFjbGUubGluZVdyYXBwaW5nOyB9XG4gICAgLyoqXG4gICAgUmV0dXJucyB0aGUgYmlkaXJlY3Rpb25hbCB0ZXh0IHN0cnVjdHVyZSBvZiB0aGUgZ2l2ZW4gbGluZVxuICAgICh3aGljaCBzaG91bGQgYmUgaW4gdGhlIGN1cnJlbnQgZG9jdW1lbnQpIGFzIGFuIGFycmF5IG9mIHNwYW5cbiAgICBvYmplY3RzLiBUaGUgb3JkZXIgb2YgdGhlc2Ugc3BhbnMgbWF0Y2hlcyB0aGUgW3RleHRcbiAgICBkaXJlY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnRleHREaXJlY3Rpb24pXHUyMDE0aWYgdGhhdCBpc1xuICAgIGxlZnQtdG8tcmlnaHQsIHRoZSBsZWZ0bW9zdCBzcGFucyBjb21lIGZpcnN0LCBvdGhlcndpc2UgdGhlXG4gICAgcmlnaHRtb3N0IHNwYW5zIGNvbWUgZmlyc3QuXG4gICAgKi9cbiAgICBiaWRpU3BhbnMobGluZSkge1xuICAgICAgICBpZiAobGluZS5sZW5ndGggPiBNYXhCaWRpTGluZSlcbiAgICAgICAgICAgIHJldHVybiB0cml2aWFsT3JkZXIobGluZS5sZW5ndGgpO1xuICAgICAgICBsZXQgZGlyID0gdGhpcy50ZXh0RGlyZWN0aW9uQXQobGluZS5mcm9tKSwgaXNvbGF0ZXM7XG4gICAgICAgIGZvciAobGV0IGVudHJ5IG9mIHRoaXMuYmlkaUNhY2hlKSB7XG4gICAgICAgICAgICBpZiAoZW50cnkuZnJvbSA9PSBsaW5lLmZyb20gJiYgZW50cnkuZGlyID09IGRpciAmJlxuICAgICAgICAgICAgICAgIChlbnRyeS5mcmVzaCB8fCBpc29sYXRlc0VxKGVudHJ5Lmlzb2xhdGVzLCBpc29sYXRlcyA9IGdldElzb2xhdGVkUmFuZ2VzKHRoaXMsIGxpbmUpKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5Lm9yZGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNvbGF0ZXMpXG4gICAgICAgICAgICBpc29sYXRlcyA9IGdldElzb2xhdGVkUmFuZ2VzKHRoaXMsIGxpbmUpO1xuICAgICAgICBsZXQgb3JkZXIgPSBjb21wdXRlT3JkZXIobGluZS50ZXh0LCBkaXIsIGlzb2xhdGVzKTtcbiAgICAgICAgdGhpcy5iaWRpQ2FjaGUucHVzaChuZXcgQ2FjaGVkT3JkZXIobGluZS5mcm9tLCBsaW5lLnRvLCBkaXIsIGlzb2xhdGVzLCB0cnVlLCBvcmRlcikpO1xuICAgICAgICByZXR1cm4gb3JkZXI7XG4gICAgfVxuICAgIC8qKlxuICAgIENoZWNrIHdoZXRoZXIgdGhlIGVkaXRvciBoYXMgZm9jdXMuXG4gICAgKi9cbiAgICBnZXQgaGFzRm9jdXMoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLy8gU2FmYXJpIHJldHVybiBmYWxzZSBmb3IgaGFzRm9jdXMgd2hlbiB0aGUgY29udGV4dCBtZW51IGlzIG9wZW5cbiAgICAgICAgLy8gb3IgY2xvc2luZywgd2hpY2ggbGVhZHMgdXMgdG8gaWdub3JlIHNlbGVjdGlvbiBjaGFuZ2VzIGZyb20gdGhlXG4gICAgICAgIC8vIGNvbnRleHQgbWVudSBiZWNhdXNlIGl0IGxvb2tzIGxpa2UgdGhlIGVkaXRvciBpc24ndCBmb2N1c2VkLlxuICAgICAgICAvLyBUaGlzIGtsdWRnZXMgYXJvdW5kIHRoYXQuXG4gICAgICAgIHJldHVybiAodGhpcy5kb20ub3duZXJEb2N1bWVudC5oYXNGb2N1cygpIHx8IGJyb3dzZXIuc2FmYXJpICYmICgoX2EgPSB0aGlzLmlucHV0U3RhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sYXN0Q29udGV4dE1lbnUpID4gRGF0ZS5ub3coKSAtIDNlNCkgJiZcbiAgICAgICAgICAgIHRoaXMucm9vdC5hY3RpdmVFbGVtZW50ID09IHRoaXMuY29udGVudERPTTtcbiAgICB9XG4gICAgLyoqXG4gICAgUHV0IGZvY3VzIG9uIHRoZSBlZGl0b3IuXG4gICAgKi9cbiAgICBmb2N1cygpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5pZ25vcmUoKCkgPT4ge1xuICAgICAgICAgICAgZm9jdXNQcmV2ZW50U2Nyb2xsKHRoaXMuY29udGVudERPTSk7XG4gICAgICAgICAgICB0aGlzLmRvY1ZpZXcudXBkYXRlU2VsZWN0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBVcGRhdGUgdGhlIFtyb290XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvIyN2aWV3LkVkaXRvclZpZXdDb25maWcucm9vdCkgaW4gd2hpY2ggdGhlIGVkaXRvciBsaXZlcy4gVGhpcyBpcyBvbmx5XG4gICAgbmVjZXNzYXJ5IHdoZW4gbW92aW5nIHRoZSBlZGl0b3IncyBleGlzdGluZyBET00gdG8gYSBuZXcgd2luZG93IG9yIHNoYWRvdyByb290LlxuICAgICovXG4gICAgc2V0Um9vdChyb290KSB7XG4gICAgICAgIGlmICh0aGlzLl9yb290ICE9IHJvb3QpIHtcbiAgICAgICAgICAgIHRoaXMuX3Jvb3QgPSByb290O1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5zZXRXaW5kb3coKHJvb3Qubm9kZVR5cGUgPT0gOSA/IHJvb3QgOiByb290Lm93bmVyRG9jdW1lbnQpLmRlZmF1bHRWaWV3IHx8IHdpbmRvdyk7XG4gICAgICAgICAgICB0aGlzLm1vdW50U3R5bGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgQ2xlYW4gdXAgdGhpcyBlZGl0b3IgdmlldywgcmVtb3ZpbmcgaXRzIGVsZW1lbnQgZnJvbSB0aGVcbiAgICBkb2N1bWVudCwgdW5yZWdpc3RlcmluZyBldmVudCBoYW5kbGVycywgYW5kIG5vdGlmeWluZ1xuICAgIHBsdWdpbnMuIFRoZSB2aWV3IGluc3RhbmNlIGNhbiBubyBsb25nZXIgYmUgdXNlZCBhZnRlclxuICAgIGNhbGxpbmcgdGhpcy5cbiAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3QuYWN0aXZlRWxlbWVudCA9PSB0aGlzLmNvbnRlbnRET00pXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRET00uYmx1cigpO1xuICAgICAgICBmb3IgKGxldCBwbHVnaW4gb2YgdGhpcy5wbHVnaW5zKVxuICAgICAgICAgICAgcGx1Z2luLmRlc3Ryb3kodGhpcyk7XG4gICAgICAgIHRoaXMucGx1Z2lucyA9IFtdO1xuICAgICAgICB0aGlzLmlucHV0U3RhdGUuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmRvY1ZpZXcuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmRvbS5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5kZXN0cm95KCk7XG4gICAgICAgIGlmICh0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPiAtMSlcbiAgICAgICAgICAgIHRoaXMud2luLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubWVhc3VyZVNjaGVkdWxlZCk7XG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyBhbiBlZmZlY3QgdGhhdCBjYW4gYmVcbiAgICBbYWRkZWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmVmZmVjdHMpIHRvIGEgdHJhbnNhY3Rpb24gdG9cbiAgICBjYXVzZSBpdCB0byBzY3JvbGwgdGhlIGdpdmVuIHBvc2l0aW9uIG9yIHJhbmdlIGludG8gdmlldy5cbiAgICAqL1xuICAgIHN0YXRpYyBzY3JvbGxJbnRvVmlldyhwb3MsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICByZXR1cm4gc2Nyb2xsSW50b1ZpZXcub2YobmV3IFNjcm9sbFRhcmdldCh0eXBlb2YgcG9zID09IFwibnVtYmVyXCIgPyBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcykgOiBwb3MsIG9wdGlvbnMueSwgb3B0aW9ucy54LCBvcHRpb25zLnlNYXJnaW4sIG9wdGlvbnMueE1hcmdpbikpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gYW4gZWZmZWN0IHRoYXQgcmVzZXRzIHRoZSBlZGl0b3IgdG8gaXRzIGN1cnJlbnQgKGF0IHRoZVxuICAgIHRpbWUgdGhpcyBtZXRob2Qgd2FzIGNhbGxlZCkgc2Nyb2xsIHBvc2l0aW9uLiBOb3RlIHRoYXQgdGhpc1xuICAgIG9ubHkgYWZmZWN0cyB0aGUgZWRpdG9yJ3Mgb3duIHNjcm9sbGFibGUgZWxlbWVudCwgbm90IHBhcmVudHMuXG4gICAgU2VlIGFsc29cbiAgICBbYEVkaXRvclZpZXdDb25maWcuc2Nyb2xsVG9gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld0NvbmZpZy5zY3JvbGxUbykuXG4gICAgXG4gICAgVGhlIGVmZmVjdCBzaG91bGQgYmUgdXNlZCB3aXRoIGEgZG9jdW1lbnQgaWRlbnRpY2FsIHRvIHRoZSBvbmVcbiAgICBpdCB3YXMgY3JlYXRlZCBmb3IuIEZhaWxpbmcgdG8gZG8gc28gaXMgbm90IGFuIGVycm9yLCBidXQgbWF5XG4gICAgbm90IHNjcm9sbCB0byB0aGUgZXhwZWN0ZWQgcG9zaXRpb24uIFlvdSBjYW5cbiAgICBbbWFwXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlN0YXRlRWZmZWN0Lm1hcCkgdGhlIGVmZmVjdCB0byBhY2NvdW50IGZvciBjaGFuZ2VzLlxuICAgICovXG4gICAgc2Nyb2xsU25hcHNob3QoKSB7XG4gICAgICAgIGxldCB7IHNjcm9sbFRvcCwgc2Nyb2xsTGVmdCB9ID0gdGhpcy5zY3JvbGxET007XG4gICAgICAgIGxldCByZWYgPSB0aGlzLnZpZXdTdGF0ZS5zY3JvbGxBbmNob3JBdChzY3JvbGxUb3ApO1xuICAgICAgICByZXR1cm4gc2Nyb2xsSW50b1ZpZXcub2YobmV3IFNjcm9sbFRhcmdldChFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHJlZi5mcm9tKSwgXCJzdGFydFwiLCBcInN0YXJ0XCIsIHJlZi50b3AgLSBzY3JvbGxUb3AsIHNjcm9sbExlZnQsIHRydWUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRW5hYmxlIG9yIGRpc2FibGUgdGFiLWZvY3VzIG1vZGUsIHdoaWNoIGRpc2FibGVzIGtleSBiaW5kaW5nc1xuICAgIGZvciBUYWIgYW5kIFNoaWZ0LVRhYiwgbGV0dGluZyB0aGUgYnJvd3NlcidzIGRlZmF1bHRcbiAgICBmb2N1cy1jaGFuZ2luZyBiZWhhdmlvciBnbyB0aHJvdWdoIGluc3RlYWQuIFRoaXMgaXMgdXNlZnVsIHRvXG4gICAgcHJldmVudCB0cmFwcGluZyBrZXlib2FyZCB1c2VycyBpbiB5b3VyIGVkaXRvci5cbiAgICBcbiAgICBXaXRob3V0IGFyZ3VtZW50LCB0aGlzIHRvZ2dsZXMgdGhlIG1vZGUuIFdpdGggYSBib29sZWFuLCBpdFxuICAgIGVuYWJsZXMgKHRydWUpIG9yIGRpc2FibGVzIGl0IChmYWxzZSkuIEdpdmVuIGEgbnVtYmVyLCBpdFxuICAgIHRlbXBvcmFyaWx5IGVuYWJsZXMgdGhlIG1vZGUgdW50aWwgdGhhdCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzXG4gICAgaGF2ZSBwYXNzZWQgb3IgYW5vdGhlciBub24tVGFiIGtleSBpcyBwcmVzc2VkLlxuICAgICovXG4gICAgc2V0VGFiRm9jdXNNb2RlKHRvKSB7XG4gICAgICAgIGlmICh0byA9PSBudWxsKVxuICAgICAgICAgICAgdGhpcy5pbnB1dFN0YXRlLnRhYkZvY3VzTW9kZSA9IHRoaXMuaW5wdXRTdGF0ZS50YWJGb2N1c01vZGUgPCAwID8gMCA6IC0xO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdG8gPT0gXCJib29sZWFuXCIpXG4gICAgICAgICAgICB0aGlzLmlucHV0U3RhdGUudGFiRm9jdXNNb2RlID0gdG8gPyAwIDogLTE7XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaW5wdXRTdGF0ZS50YWJGb2N1c01vZGUgIT0gMClcbiAgICAgICAgICAgIHRoaXMuaW5wdXRTdGF0ZS50YWJGb2N1c01vZGUgPSBEYXRlLm5vdygpICsgdG87XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIERPTSBldmVudCBoYW5kbGVycy5cbiAgICBUaGUgdmFsdWUgc2hvdWxkIGJlIGFuIG9iamVjdCBtYXBwaW5nIGV2ZW50IG5hbWVzIHRvIGhhbmRsZXJcbiAgICBmdW5jdGlvbnMuIEZvciBhbnkgZ2l2ZW4gZXZlbnQsIHN1Y2ggZnVuY3Rpb25zIGFyZSBvcmRlcmVkIGJ5XG4gICAgZXh0ZW5zaW9uIHByZWNlZGVuY2UsIGFuZCB0aGUgZmlyc3QgaGFuZGxlciB0byByZXR1cm4gdHJ1ZSB3aWxsXG4gICAgYmUgYXNzdW1lZCB0byBoYXZlIGhhbmRsZWQgdGhhdCBldmVudCwgYW5kIG5vIG90aGVyIGhhbmRsZXJzIG9yXG4gICAgYnVpbHQtaW4gYmVoYXZpb3Igd2lsbCBiZSBhY3RpdmF0ZWQgZm9yIGl0LiBUaGVzZSBhcmUgcmVnaXN0ZXJlZFxuICAgIG9uIHRoZSBbY29udGVudCBlbGVtZW50XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5jb250ZW50RE9NKSwgZXhjZXB0XG4gICAgZm9yIGBzY3JvbGxgIGhhbmRsZXJzLCB3aGljaCB3aWxsIGJlIGNhbGxlZCBhbnkgdGltZSB0aGVcbiAgICBlZGl0b3IncyBbc2Nyb2xsIGVsZW1lbnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnNjcm9sbERPTSkgb3Igb25lIG9mXG4gICAgaXRzIHBhcmVudCBub2RlcyBpcyBzY3JvbGxlZC5cbiAgICAqL1xuICAgIHN0YXRpYyBkb21FdmVudEhhbmRsZXJzKGhhbmRsZXJzKSB7XG4gICAgICAgIHJldHVybiBWaWV3UGx1Z2luLmRlZmluZSgoKSA9PiAoe30pLCB7IGV2ZW50SGFuZGxlcnM6IGhhbmRsZXJzIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gZXh0ZW5zaW9uIHRoYXQgcmVnaXN0ZXJzIERPTSBldmVudCBvYnNlcnZlcnMuIENvbnRyYXJ5XG4gICAgdG8gZXZlbnQgW2hhbmRsZXJzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15kb21FdmVudEhhbmRsZXJzKSxcbiAgICBvYnNlcnZlcnMgY2FuJ3QgYmUgcHJldmVudGVkIGZyb20gcnVubmluZyBieSBhIGhpZ2hlci1wcmVjZWRlbmNlXG4gICAgaGFuZGxlciByZXR1cm5pbmcgdHJ1ZS4gVGhleSBhbHNvIGRvbid0IHByZXZlbnQgb3RoZXIgaGFuZGxlcnNcbiAgICBhbmQgb2JzZXJ2ZXJzIGZyb20gcnVubmluZyB3aGVuIHRoZXkgcmV0dXJuIHRydWUsIGFuZCBzaG91bGQgbm90XG4gICAgY2FsbCBgcHJldmVudERlZmF1bHRgLlxuICAgICovXG4gICAgc3RhdGljIGRvbUV2ZW50T2JzZXJ2ZXJzKG9ic2VydmVycykge1xuICAgICAgICByZXR1cm4gVmlld1BsdWdpbi5kZWZpbmUoKCkgPT4gKHt9KSwgeyBldmVudE9ic2VydmVyczogb2JzZXJ2ZXJzIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSB0aGVtZSBleHRlbnNpb24uIFRoZSBmaXJzdCBhcmd1bWVudCBjYW4gYmUgYVxuICAgIFtgc3R5bGUtbW9kYF0oaHR0cHM6Ly9naXRodWIuY29tL21hcmlqbmgvc3R5bGUtbW9kI2RvY3VtZW50YXRpb24pXG4gICAgc3R5bGUgc3BlYyBwcm92aWRpbmcgdGhlIHN0eWxlcyBmb3IgdGhlIHRoZW1lLiBUaGVzZSB3aWxsIGJlXG4gICAgcHJlZml4ZWQgd2l0aCBhIGdlbmVyYXRlZCBjbGFzcyBmb3IgdGhlIHN0eWxlLlxuICAgIFxuICAgIEJlY2F1c2UgdGhlIHNlbGVjdG9ycyB3aWxsIGJlIHByZWZpeGVkIHdpdGggYSBzY29wZSBjbGFzcywgcnVsZVxuICAgIHRoYXQgZGlyZWN0bHkgbWF0Y2ggdGhlIGVkaXRvcidzIFt3cmFwcGVyXG4gICAgZWxlbWVudF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuZG9tKVx1MjAxNHRvIHdoaWNoIHRoZSBzY29wZSBjbGFzcyB3aWxsIGJlXG4gICAgYWRkZWRcdTIwMTRuZWVkIHRvIGJlIGV4cGxpY2l0bHkgZGlmZmVyZW50aWF0ZWQgYnkgYWRkaW5nIGFuIGAmYCB0b1xuICAgIHRoZSBzZWxlY3RvciBmb3IgdGhhdCBlbGVtZW50XHUyMDE0Zm9yIGV4YW1wbGVcbiAgICBgJi5jbS1mb2N1c2VkYC5cbiAgICBcbiAgICBXaGVuIGBkYXJrYCBpcyBzZXQgdG8gdHJ1ZSwgdGhlIHRoZW1lIHdpbGwgYmUgbWFya2VkIGFzIGRhcmssXG4gICAgd2hpY2ggd2lsbCBjYXVzZSB0aGUgYCZkYXJrYCBydWxlcyBmcm9tIFtiYXNlXG4gICAgdGhlbWVzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15iYXNlVGhlbWUpIHRvIGJlIHVzZWQgKGFzIG9wcG9zZWQgdG9cbiAgICBgJmxpZ2h0YCB3aGVuIGEgbGlnaHQgdGhlbWUgaXMgYWN0aXZlKS5cbiAgICAqL1xuICAgIHN0YXRpYyB0aGVtZShzcGVjLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBwcmVmaXggPSBTdHlsZU1vZHVsZS5uZXdOYW1lKCk7XG4gICAgICAgIGxldCByZXN1bHQgPSBbdGhlbWUub2YocHJlZml4KSwgc3R5bGVNb2R1bGUub2YoYnVpbGRUaGVtZShgLiR7cHJlZml4fWAsIHNwZWMpKV07XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZGFyaylcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRhcmtUaGVtZS5vZih0cnVlKSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCBhZGRzIHN0eWxlcyB0byB0aGUgYmFzZSB0aGVtZS4gTGlrZVxuICAgIHdpdGggW2B0aGVtZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XnRoZW1lKSwgdXNlIGAmYCB0byBpbmRpY2F0ZSB0aGVcbiAgICBwbGFjZSBvZiB0aGUgZWRpdG9yIHdyYXBwZXIgZWxlbWVudCB3aGVuIGRpcmVjdGx5IHRhcmdldGluZ1xuICAgIHRoYXQuIFlvdSBjYW4gYWxzbyB1c2UgYCZkYXJrYCBvciBgJmxpZ2h0YCBpbnN0ZWFkIHRvIG9ubHlcbiAgICB0YXJnZXQgZWRpdG9ycyB3aXRoIGEgZGFyayBvciBsaWdodCB0aGVtZS5cbiAgICAqL1xuICAgIHN0YXRpYyBiYXNlVGhlbWUoc3BlYykge1xuICAgICAgICByZXR1cm4gUHJlYy5sb3dlc3Qoc3R5bGVNb2R1bGUub2YoYnVpbGRUaGVtZShcIi5cIiArIGJhc2VUaGVtZUlELCBzcGVjLCBsaWdodERhcmtJRHMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHJpZXZlIGFuIGVkaXRvciB2aWV3IGluc3RhbmNlIGZyb20gdGhlIHZpZXcncyBET01cbiAgICByZXByZXNlbnRhdGlvbi5cbiAgICAqL1xuICAgIHN0YXRpYyBmaW5kRnJvbURPTShkb20pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgY29udGVudCA9IGRvbS5xdWVyeVNlbGVjdG9yKFwiLmNtLWNvbnRlbnRcIik7XG4gICAgICAgIGxldCB0aWxlID0gY29udGVudCAmJiBUaWxlLmdldChjb250ZW50KSB8fCBUaWxlLmdldChkb20pO1xuICAgICAgICByZXR1cm4gKChfYSA9IHRpbGUgPT09IG51bGwgfHwgdGlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGlsZS5yb290KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudmlldykgfHwgbnVsbDtcbiAgICB9XG59XG4vKipcbkZhY2V0IHRvIGFkZCBhIFtzdHlsZVxubW9kdWxlXShodHRwczovL2dpdGh1Yi5jb20vbWFyaWpuaC9zdHlsZS1tb2QjZG9jdW1lbnRhdGlvbikgdG9cbmFuIGVkaXRvciB2aWV3LiBUaGUgdmlldyB3aWxsIGVuc3VyZSB0aGF0IHRoZSBtb2R1bGUgaXNcbm1vdW50ZWQgaW4gaXRzIFtkb2N1bWVudFxucm9vdF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuY29uc3RydWN0b3JeY29uZmlnLnJvb3QpLlxuKi9cbkVkaXRvclZpZXcuc3R5bGVNb2R1bGUgPSBzdHlsZU1vZHVsZTtcbi8qKlxuQW4gaW5wdXQgaGFuZGxlciBjYW4gb3ZlcnJpZGUgdGhlIHdheSBjaGFuZ2VzIHRvIHRoZSBlZGl0YWJsZVxuRE9NIGNvbnRlbnQgYXJlIGhhbmRsZWQuIEhhbmRsZXJzIGFyZSBwYXNzZWQgdGhlIGRvY3VtZW50XG5wb3NpdGlvbnMgYmV0d2VlbiB3aGljaCB0aGUgY2hhbmdlIHdhcyBmb3VuZCwgYW5kIHRoZSBuZXdcbmNvbnRlbnQuIFdoZW4gb25lIHJldHVybnMgdHJ1ZSwgbm8gZnVydGhlciBpbnB1dCBoYW5kbGVycyBhcmVcbmNhbGxlZCBhbmQgdGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgcHJldmVudGVkLlxuXG5UaGUgYGluc2VydGAgYXJndW1lbnQgY2FuIGJlIHVzZWQgdG8gZ2V0IHRoZSBkZWZhdWx0IHRyYW5zYWN0aW9uXG50aGF0IHdvdWxkIGJlIGFwcGxpZWQgZm9yIHRoaXMgaW5wdXQuIFRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuXG5kaXNwYXRjaGluZyB0aGUgY3VzdG9tIGJlaGF2aW9yIGFzIGEgc2VwYXJhdGUgdHJhbnNhY3Rpb24uXG4qL1xuRWRpdG9yVmlldy5pbnB1dEhhbmRsZXIgPSBpbnB1dEhhbmRsZXI7XG4vKipcbkZ1bmN0aW9ucyBwcm92aWRlZCBpbiB0aGlzIGZhY2V0IHdpbGwgYmUgdXNlZCB0byB0cmFuc2Zvcm0gdGV4dFxucGFzdGVkIG9yIGRyb3BwZWQgaW50byB0aGUgZWRpdG9yLlxuKi9cbkVkaXRvclZpZXcuY2xpcGJvYXJkSW5wdXRGaWx0ZXIgPSBjbGlwYm9hcmRJbnB1dEZpbHRlcjtcbi8qKlxuVHJhbnNmb3JtIHRleHQgY29waWVkIG9yIGRyYWdnZWQgZnJvbSB0aGUgZWRpdG9yLlxuKi9cbkVkaXRvclZpZXcuY2xpcGJvYXJkT3V0cHV0RmlsdGVyID0gY2xpcGJvYXJkT3V0cHV0RmlsdGVyO1xuLyoqXG5TY3JvbGwgaGFuZGxlcnMgY2FuIG92ZXJyaWRlIGhvdyB0aGluZ3MgYXJlIHNjcm9sbGVkIGludG8gdmlldy5cbklmIHRoZXkgcmV0dXJuIGB0cnVlYCwgbm8gZnVydGhlciBoYW5kbGluZyBoYXBwZW5zIGZvciB0aGVcbnNjcm9sbGluZy4gSWYgdGhleSByZXR1cm4gZmFsc2UsIHRoZSBkZWZhdWx0IHNjcm9sbCBiZWhhdmlvciBpc1xuYXBwbGllZC4gU2Nyb2xsIGhhbmRsZXJzIHNob3VsZCBuZXZlciBpbml0aWF0ZSBlZGl0b3IgdXBkYXRlcy5cbiovXG5FZGl0b3JWaWV3LnNjcm9sbEhhbmRsZXIgPSBzY3JvbGxIYW5kbGVyO1xuLyoqXG5UaGlzIGZhY2V0IGNhbiBiZSB1c2VkIHRvIHByb3ZpZGUgZnVuY3Rpb25zIHRoYXQgY3JlYXRlIGVmZmVjdHNcbnRvIGJlIGRpc3BhdGNoZWQgd2hlbiB0aGUgZWRpdG9yJ3MgZm9jdXMgc3RhdGUgY2hhbmdlcy5cbiovXG5FZGl0b3JWaWV3LmZvY3VzQ2hhbmdlRWZmZWN0ID0gZm9jdXNDaGFuZ2VFZmZlY3Q7XG4vKipcbkJ5IGRlZmF1bHQsIHRoZSBlZGl0b3IgYXNzdW1lcyBhbGwgaXRzIGNvbnRlbnQgaGFzIHRoZSBzYW1lXG5bdGV4dCBkaXJlY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5EaXJlY3Rpb24pLiBDb25maWd1cmUgdGhpcyB3aXRoIGEgYHRydWVgXG52YWx1ZSB0byBtYWtlIGl0IHJlYWQgdGhlIHRleHQgZGlyZWN0aW9uIG9mIGV2ZXJ5IChyZW5kZXJlZClcbmxpbmUgc2VwYXJhdGVseS5cbiovXG5FZGl0b3JWaWV3LnBlckxpbmVUZXh0RGlyZWN0aW9uID0gcGVyTGluZVRleHREaXJlY3Rpb247XG4vKipcbkFsbG93cyB5b3UgdG8gcHJvdmlkZSBhIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIHRoZVxubGlicmFyeSBjYXRjaGVzIGFuIGV4Y2VwdGlvbiBmcm9tIGFuIGV4dGVuc2lvbiAobW9zdGx5IGZyb20gdmlld1xucGx1Z2lucywgYnV0IG1heSBiZSB1c2VkIGJ5IG90aGVyIGV4dGVuc2lvbnMgdG8gcm91dGUgZXhjZXB0aW9uc1xuZnJvbSB1c2VyLWNvZGUtcHJvdmlkZWQgY2FsbGJhY2tzKS4gVGhpcyBpcyBtb3N0bHkgdXNlZnVsIGZvclxuZGVidWdnaW5nIGFuZCBsb2dnaW5nLiBTZWUgW2Bsb2dFeGNlcHRpb25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcubG9nRXhjZXB0aW9uKS5cbiovXG5FZGl0b3JWaWV3LmV4Y2VwdGlvblNpbmsgPSBleGNlcHRpb25TaW5rO1xuLyoqXG5BIGZhY2V0IHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVnaXN0ZXIgYSBmdW5jdGlvbiB0byBiZSBjYWxsZWRcbmV2ZXJ5IHRpbWUgdGhlIHZpZXcgdXBkYXRlcy5cbiovXG5FZGl0b3JWaWV3LnVwZGF0ZUxpc3RlbmVyID0gdXBkYXRlTGlzdGVuZXI7XG4vKipcbkZhY2V0IHRoYXQgY29udHJvbHMgd2hldGhlciB0aGUgZWRpdG9yIGNvbnRlbnQgRE9NIGlzIGVkaXRhYmxlLlxuV2hlbiBpdHMgaGlnaGVzdC1wcmVjZWRlbmNlIHZhbHVlIGlzIGBmYWxzZWAsIHRoZSBlbGVtZW50IHdpbGxcbm5vdCBoYXZlIGl0cyBgY29udGVudGVkaXRhYmxlYCBhdHRyaWJ1dGUgc2V0LiAoTm90ZSB0aGF0IHRoaXNcbmRvZXNuJ3QgYWZmZWN0IEFQSSBjYWxscyB0aGF0IGNoYW5nZSB0aGUgZWRpdG9yIGNvbnRlbnQsIGV2ZW5cbndoZW4gdGhvc2UgYXJlIGJvdW5kIHRvIGtleXMgb3IgYnV0dG9ucy4gU2VlIHRoZVxuW2ByZWFkT25seWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUucmVhZE9ubHkpIGZhY2V0IGZvciB0aGF0LilcbiovXG5FZGl0b3JWaWV3LmVkaXRhYmxlID0gZWRpdGFibGU7XG4vKipcbkFsbG93cyB5b3UgdG8gaW5mbHVlbmNlIHRoZSB3YXkgbW91c2Ugc2VsZWN0aW9uIGhhcHBlbnMuIFRoZVxuZnVuY3Rpb25zIGluIHRoaXMgZmFjZXQgd2lsbCBiZSBjYWxsZWQgZm9yIGEgYG1vdXNlZG93bmAgZXZlbnRcbm9uIHRoZSBlZGl0b3IsIGFuZCBjYW4gcmV0dXJuIGFuIG9iamVjdCB0aGF0IG92ZXJyaWRlcyB0aGUgd2F5IGFcbnNlbGVjdGlvbiBpcyBjb21wdXRlZCBmcm9tIHRoYXQgbW91c2UgY2xpY2sgb3IgZHJhZy5cbiovXG5FZGl0b3JWaWV3Lm1vdXNlU2VsZWN0aW9uU3R5bGUgPSBtb3VzZVNlbGVjdGlvblN0eWxlO1xuLyoqXG5GYWNldCB1c2VkIHRvIGNvbmZpZ3VyZSB3aGV0aGVyIGEgZ2l2ZW4gc2VsZWN0aW9uIGRyYWcgZXZlbnRcbnNob3VsZCBtb3ZlIG9yIGNvcHkgdGhlIHNlbGVjdGlvbi4gVGhlIGdpdmVuIHByZWRpY2F0ZSB3aWxsIGJlXG5jYWxsZWQgd2l0aCB0aGUgYG1vdXNlZG93bmAgZXZlbnQsIGFuZCBjYW4gcmV0dXJuIGB0cnVlYCB3aGVuXG50aGUgZHJhZyBzaG91bGQgbW92ZSB0aGUgY29udGVudC5cbiovXG5FZGl0b3JWaWV3LmRyYWdNb3Zlc1NlbGVjdGlvbiA9IGRyYWdNb3Zlc1NlbGVjdGlvbiQxO1xuLyoqXG5GYWNldCB1c2VkIHRvIGNvbmZpZ3VyZSB3aGV0aGVyIGEgZ2l2ZW4gc2VsZWN0aW5nIGNsaWNrIGFkZHMgYVxubmV3IHJhbmdlIHRvIHRoZSBleGlzdGluZyBzZWxlY3Rpb24gb3IgcmVwbGFjZXMgaXQgZW50aXJlbHkuIFRoZVxuZGVmYXVsdCBiZWhhdmlvciBpcyB0byBjaGVjayBgZXZlbnQubWV0YUtleWAgb24gbWFjT1MsIGFuZFxuYGV2ZW50LmN0cmxLZXlgIGVsc2V3aGVyZS5cbiovXG5FZGl0b3JWaWV3LmNsaWNrQWRkc1NlbGVjdGlvblJhbmdlID0gY2xpY2tBZGRzU2VsZWN0aW9uUmFuZ2U7XG4vKipcbkEgZmFjZXQgdGhhdCBkZXRlcm1pbmVzIHdoaWNoIFtkZWNvcmF0aW9uc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkRlY29yYXRpb24pXG5hcmUgc2hvd24gaW4gdGhlIHZpZXcuIERlY29yYXRpb25zIGNhbiBiZSBwcm92aWRlZCBpbiB0d29cbndheXNcdTIwMTRkaXJlY3RseSwgb3IgdmlhIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiBlZGl0b3Igdmlldy5cblxuT25seSBkZWNvcmF0aW9uIHNldHMgcHJvdmlkZWQgZGlyZWN0bHkgYXJlIGFsbG93ZWQgdG8gaW5mbHVlbmNlXG50aGUgZWRpdG9yJ3MgdmVydGljYWwgbGF5b3V0IHN0cnVjdHVyZS4gVGhlIG9uZXMgcHJvdmlkZWQgYXNcbmZ1bmN0aW9ucyBhcmUgY2FsbGVkIF9hZnRlcl8gdGhlIG5ldyB2aWV3cG9ydCBoYXMgYmVlbiBjb21wdXRlZCxcbmFuZCB0aHVzICoqbXVzdCBub3QqKiBpbnRyb2R1Y2UgYmxvY2sgd2lkZ2V0cyBvciByZXBsYWNpbmdcbmRlY29yYXRpb25zIHRoYXQgY292ZXIgbGluZSBicmVha3MuXG5cbklmIHlvdSB3YW50IGRlY29yYXRlZCByYW5nZXMgdG8gYmVoYXZlIGxpa2UgYXRvbWljIHVuaXRzIGZvclxuY3Vyc29yIG1vdGlvbiBhbmQgZGVsZXRpb24gcHVycG9zZXMsIGFsc28gcHJvdmlkZSB0aGUgcmFuZ2Ugc2V0XG5jb250YWluaW5nIHRoZSBkZWNvcmF0aW9ucyB0b1xuW2BFZGl0b3JWaWV3LmF0b21pY1Jhbmdlc2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XmF0b21pY1JhbmdlcykuXG4qL1xuRWRpdG9yVmlldy5kZWNvcmF0aW9ucyA9IGRlY29yYXRpb25zO1xuLyoqXG5bQmxvY2sgd3JhcHBlcnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5CbG9ja1dyYXBwZXIpIHByb3ZpZGUgYSB3YXkgdG8gYWRkIERPTVxuc3RydWN0dXJlIGFyb3VuZCBlZGl0b3IgbGluZXMgYW5kIGJsb2NrIHdpZGdldHMuIFNldHMgb2ZcbndyYXBwZXJzIGFyZSBwcm92aWRlZCBpbiBhIHNpbWlsYXIgd2F5IHRvIGRlY29yYXRpb25zLCBhbmQgYXJlXG5uZXN0ZWQgaW4gYSBzaW1pbGFyIHdheSB3aGVuIHRoZXkgb3ZlcmxhcC4gQSB3cmFwcGVyIGFmZmVjdHMgYWxsXG5saW5lcyBhbmQgYmxvY2sgd2lkZ2V0cyB0aGF0IHN0YXJ0IGluc2lkZSBpdHMgcmFuZ2UuXG4qL1xuRWRpdG9yVmlldy5ibG9ja1dyYXBwZXJzID0gYmxvY2tXcmFwcGVycztcbi8qKlxuRmFjZXQgdGhhdCB3b3JrcyBtdWNoIGxpa2VcbltgZGVjb3JhdGlvbnNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15kZWNvcmF0aW9ucyksIGJ1dCBwdXRzIGl0c1xuaW5wdXRzIGF0IHRoZSB2ZXJ5IGJvdHRvbSBvZiB0aGUgcHJlY2VkZW5jZSBzdGFjaywgbWVhbmluZyBtYXJrXG5kZWNvcmF0aW9ucyBwcm92aWRlZCBoZXJlIHdpbGwgb25seSBiZSBzcGxpdCBieSBvdGhlciwgcGFydGlhbGx5XG5vdmVybGFwcGluZyBgb3V0ZXJEZWNvcmF0aW9uc2AgcmFuZ2VzLCBhbmQgd3JhcCBhcm91bmQgYWxsXG5yZWd1bGFyIGRlY29yYXRpb25zLiBVc2UgdGhpcyBmb3IgbWFyayBlbGVtZW50cyB0aGF0IHNob3VsZCwgYXNcbm11Y2ggYXMgcG9zc2libGUsIHJlbWFpbiBpbiBvbmUgcGllY2UuXG4qL1xuRWRpdG9yVmlldy5vdXRlckRlY29yYXRpb25zID0gb3V0ZXJEZWNvcmF0aW9ucztcbi8qKlxuVXNlZCB0byBwcm92aWRlIHJhbmdlcyB0aGF0IHNob3VsZCBiZSB0cmVhdGVkIGFzIGF0b21zIGFzIGZhciBhc1xuY3Vyc29yIG1vdGlvbiBpcyBjb25jZXJuZWQuIFRoaXMgY2F1c2VzIG1ldGhvZHMgbGlrZVxuW2Btb3ZlQnlDaGFyYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcubW92ZUJ5Q2hhcikgYW5kXG5bYG1vdmVWZXJ0aWNhbGx5YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcubW92ZVZlcnRpY2FsbHkpIChhbmQgdGhlXG5jb21tYW5kcyBidWlsdCBvbiB0b3Agb2YgdGhlbSkgdG8gc2tpcCBhY3Jvc3Mgc3VjaCByZWdpb25zIHdoZW5cbmEgc2VsZWN0aW9uIGVuZHBvaW50IHdvdWxkIGVudGVyIHRoZW0uIFRoaXMgZG9lcyBfbm90XyBwcmV2ZW50XG5kaXJlY3QgcHJvZ3JhbW1hdGljIFtzZWxlY3Rpb25cbnVwZGF0ZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLnNlbGVjdGlvbikgZnJvbSBtb3ZpbmcgaW50byBzdWNoXG5yZWdpb25zLlxuKi9cbkVkaXRvclZpZXcuYXRvbWljUmFuZ2VzID0gYXRvbWljUmFuZ2VzO1xuLyoqXG5XaGVuIHJhbmdlIGRlY29yYXRpb25zIGFkZCBhIGB1bmljb2RlLWJpZGk6IGlzb2xhdGVgIHN0eWxlLCB0aGV5XG5zaG91bGQgYWxzbyBpbmNsdWRlIGFcbltgYmlkaUlzb2xhdGVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuTWFya0RlY29yYXRpb25TcGVjLmJpZGlJc29sYXRlKSBwcm9wZXJ0eVxuaW4gdGhlaXIgZGVjb3JhdGlvbiBzcGVjLCBhbmQgYmUgZXhwb3NlZCB0aHJvdWdoIHRoaXMgZmFjZXQsIHNvXG50aGF0IHRoZSBlZGl0b3IgY2FuIGNvbXB1dGUgdGhlIHByb3BlciB0ZXh0IG9yZGVyLiAoT3RoZXIgdmFsdWVzXG5mb3IgYHVuaWNvZGUtYmlkaWAsIGV4Y2VwdCBvZiBjb3Vyc2UgYG5vcm1hbGAsIGFyZSBub3RcbnN1cHBvcnRlZC4pXG4qL1xuRWRpdG9yVmlldy5iaWRpSXNvbGF0ZWRSYW5nZXMgPSBiaWRpSXNvbGF0ZWRSYW5nZXM7XG4vKipcbkZhY2V0IHRoYXQgYWxsb3dzIGV4dGVuc2lvbnMgdG8gcHJvdmlkZSBhZGRpdGlvbmFsIHNjcm9sbFxubWFyZ2lucyAoc3BhY2UgYXJvdW5kIHRoZSBzaWRlcyBvZiB0aGUgc2Nyb2xsaW5nIGVsZW1lbnQgdGhhdFxuc2hvdWxkIGJlIGNvbnNpZGVyZWQgaW52aXNpYmxlKS4gVGhpcyBjYW4gYmUgdXNlZnVsIHdoZW4gdGhlXG5wbHVnaW4gaW50cm9kdWNlcyBlbGVtZW50cyB0aGF0IGNvdmVyIHBhcnQgb2YgdGhhdCBlbGVtZW50IChmb3JcbmV4YW1wbGUgYSBob3Jpem9udGFsbHkgZml4ZWQgZ3V0dGVyKS5cbiovXG5FZGl0b3JWaWV3LnNjcm9sbE1hcmdpbnMgPSBzY3JvbGxNYXJnaW5zO1xuLyoqXG5UaGlzIGZhY2V0IHJlY29yZHMgd2hldGhlciBhIGRhcmsgdGhlbWUgaXMgYWN0aXZlLiBUaGUgZXh0ZW5zaW9uXG5yZXR1cm5lZCBieSBbYHRoZW1lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXdedGhlbWUpIGF1dG9tYXRpY2FsbHlcbmluY2x1ZGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgd2hlbiB0aGUgYGRhcmtgIG9wdGlvbiBpcyBzZXQgdG9cbnRydWUuXG4qL1xuRWRpdG9yVmlldy5kYXJrVGhlbWUgPSBkYXJrVGhlbWU7XG4vKipcblByb3ZpZGVzIGEgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgbm9uY2UgdG8gdXNlIHdoZW4gY3JlYXRpbmdcbnRoZSBzdHlsZSBzaGVldHMgZm9yIHRoZSBlZGl0b3IuIEhvbGRzIHRoZSBlbXB0eSBzdHJpbmcgd2hlbiBub1xubm9uY2UgaGFzIGJlZW4gcHJvdmlkZWQuXG4qL1xuRWRpdG9yVmlldy5jc3BOb25jZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoeyBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlc1swXSA6IFwiXCIgfSk7XG4vKipcbkZhY2V0IHRoYXQgcHJvdmlkZXMgYWRkaXRpb25hbCBET00gYXR0cmlidXRlcyBmb3IgdGhlIGVkaXRvcidzXG5lZGl0YWJsZSBET00gZWxlbWVudC5cbiovXG5FZGl0b3JWaWV3LmNvbnRlbnRBdHRyaWJ1dGVzID0gY29udGVudEF0dHJpYnV0ZXM7XG4vKipcbkZhY2V0IHRoYXQgcHJvdmlkZXMgRE9NIGF0dHJpYnV0ZXMgZm9yIHRoZSBlZGl0b3IncyBvdXRlclxuZWxlbWVudC5cbiovXG5FZGl0b3JWaWV3LmVkaXRvckF0dHJpYnV0ZXMgPSBlZGl0b3JBdHRyaWJ1dGVzO1xuLyoqXG5BbiBleHRlbnNpb24gdGhhdCBlbmFibGVzIGxpbmUgd3JhcHBpbmcgaW4gdGhlIGVkaXRvciAoYnlcbnNldHRpbmcgQ1NTIGB3aGl0ZS1zcGFjZWAgdG8gYHByZS13cmFwYCBpbiB0aGUgY29udGVudCkuXG4qL1xuRWRpdG9yVmlldy5saW5lV3JhcHBpbmcgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5jb250ZW50QXR0cmlidXRlcy5vZih7IFwiY2xhc3NcIjogXCJjbS1saW5lV3JhcHBpbmdcIiB9KTtcbi8qKlxuU3RhdGUgZWZmZWN0IHVzZWQgdG8gaW5jbHVkZSBzY3JlZW4gcmVhZGVyIGFubm91bmNlbWVudHMgaW4gYVxudHJhbnNhY3Rpb24uIFRoZXNlIHdpbGwgYmUgYWRkZWQgdG8gdGhlIERPTSBpbiBhIHZpc3VhbGx5IGhpZGRlblxuZWxlbWVudCB3aXRoIGBhcmlhLWxpdmU9XCJwb2xpdGVcImAgc2V0LCBhbmQgc2hvdWxkIGJlIHVzZWQgdG9cbmRlc2NyaWJlIGVmZmVjdHMgdGhhdCBhcmUgdmlzdWFsbHkgb2J2aW91cyBidXQgbWF5IG5vdCBiZVxubm90aWNlZCBieSBzY3JlZW4gcmVhZGVyIHVzZXJzIChzdWNoIGFzIG1vdmluZyB0byB0aGUgbmV4dFxuc2VhcmNoIG1hdGNoKS5cbiovXG5FZGl0b3JWaWV3LmFubm91bmNlID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuLy8gTWF4aW11bSBsaW5lIGxlbmd0aCBmb3Igd2hpY2ggd2UgY29tcHV0ZSBhY2N1cmF0ZSBiaWRpIGluZm9cbmNvbnN0IE1heEJpZGlMaW5lID0gNDA5NjtcbmNvbnN0IEJhZE1lYXN1cmUgPSB7fTtcbmNsYXNzIENhY2hlZE9yZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bywgZGlyLCBpc29sYXRlcywgZnJlc2gsIG9yZGVyKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5kaXIgPSBkaXI7XG4gICAgICAgIHRoaXMuaXNvbGF0ZXMgPSBpc29sYXRlcztcbiAgICAgICAgdGhpcy5mcmVzaCA9IGZyZXNoO1xuICAgICAgICB0aGlzLm9yZGVyID0gb3JkZXI7XG4gICAgfVxuICAgIHN0YXRpYyB1cGRhdGUoY2FjaGUsIGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMuZW1wdHkgJiYgIWNhY2hlLnNvbWUoYyA9PiBjLmZyZXNoKSlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdLCBsYXN0RGlyID0gY2FjaGUubGVuZ3RoID8gY2FjaGVbY2FjaGUubGVuZ3RoIC0gMV0uZGlyIDogRGlyZWN0aW9uLkxUUjtcbiAgICAgICAgZm9yIChsZXQgaSA9IE1hdGgubWF4KDAsIGNhY2hlLmxlbmd0aCAtIDEwKTsgaSA8IGNhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZW50cnkgPSBjYWNoZVtpXTtcbiAgICAgICAgICAgIGlmIChlbnRyeS5kaXIgPT0gbGFzdERpciAmJiAhY2hhbmdlcy50b3VjaGVzUmFuZ2UoZW50cnkuZnJvbSwgZW50cnkudG8pKVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBDYWNoZWRPcmRlcihjaGFuZ2VzLm1hcFBvcyhlbnRyeS5mcm9tLCAxKSwgY2hhbmdlcy5tYXBQb3MoZW50cnkudG8sIC0xKSwgZW50cnkuZGlyLCBlbnRyeS5pc29sYXRlcywgZmFsc2UsIGVudHJ5Lm9yZGVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5mdW5jdGlvbiBhdHRyc0Zyb21GYWNldCh2aWV3LCBmYWNldCwgYmFzZSkge1xuICAgIGZvciAobGV0IHNvdXJjZXMgPSB2aWV3LnN0YXRlLmZhY2V0KGZhY2V0KSwgaSA9IHNvdXJjZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgbGV0IHNvdXJjZSA9IHNvdXJjZXNbaV0sIHZhbHVlID0gdHlwZW9mIHNvdXJjZSA9PSBcImZ1bmN0aW9uXCIgPyBzb3VyY2UodmlldykgOiBzb3VyY2U7XG4gICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgICAgIGNvbWJpbmVBdHRycyh2YWx1ZSwgYmFzZSk7XG4gICAgfVxuICAgIHJldHVybiBiYXNlO1xufVxuXG5jb25zdCBjdXJyZW50UGxhdGZvcm0gPSBicm93c2VyLm1hYyA/IFwibWFjXCIgOiBicm93c2VyLndpbmRvd3MgPyBcIndpblwiIDogYnJvd3Nlci5saW51eCA/IFwibGludXhcIiA6IFwia2V5XCI7XG5mdW5jdGlvbiBub3JtYWxpemVLZXlOYW1lKG5hbWUsIHBsYXRmb3JtKSB7XG4gICAgY29uc3QgcGFydHMgPSBuYW1lLnNwbGl0KC8tKD8hJCkvKTtcbiAgICBsZXQgcmVzdWx0ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG4gICAgaWYgKHJlc3VsdCA9PSBcIlNwYWNlXCIpXG4gICAgICAgIHJlc3VsdCA9IFwiIFwiO1xuICAgIGxldCBhbHQsIGN0cmwsIHNoaWZ0LCBtZXRhO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgIGNvbnN0IG1vZCA9IHBhcnRzW2ldO1xuICAgICAgICBpZiAoL14oY21kfG1ldGF8bSkkL2kudGVzdChtb2QpKVxuICAgICAgICAgICAgbWV0YSA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKC9eYShsdCk/JC9pLnRlc3QobW9kKSlcbiAgICAgICAgICAgIGFsdCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKC9eKGN8Y3RybHxjb250cm9sKSQvaS50ZXN0KG1vZCkpXG4gICAgICAgICAgICBjdHJsID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoL15zKGhpZnQpPyQvaS50ZXN0KG1vZCkpXG4gICAgICAgICAgICBzaGlmdCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKC9ebW9kJC9pLnRlc3QobW9kKSkge1xuICAgICAgICAgICAgaWYgKHBsYXRmb3JtID09IFwibWFjXCIpXG4gICAgICAgICAgICAgICAgbWV0YSA9IHRydWU7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgY3RybCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIG1vZGlmaWVyIG5hbWU6IFwiICsgbW9kKTtcbiAgICB9XG4gICAgaWYgKGFsdClcbiAgICAgICAgcmVzdWx0ID0gXCJBbHQtXCIgKyByZXN1bHQ7XG4gICAgaWYgKGN0cmwpXG4gICAgICAgIHJlc3VsdCA9IFwiQ3RybC1cIiArIHJlc3VsdDtcbiAgICBpZiAobWV0YSlcbiAgICAgICAgcmVzdWx0ID0gXCJNZXRhLVwiICsgcmVzdWx0O1xuICAgIGlmIChzaGlmdClcbiAgICAgICAgcmVzdWx0ID0gXCJTaGlmdC1cIiArIHJlc3VsdDtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbW9kaWZpZXJzKG5hbWUsIGV2ZW50LCBzaGlmdCkge1xuICAgIGlmIChldmVudC5hbHRLZXkpXG4gICAgICAgIG5hbWUgPSBcIkFsdC1cIiArIG5hbWU7XG4gICAgaWYgKGV2ZW50LmN0cmxLZXkpXG4gICAgICAgIG5hbWUgPSBcIkN0cmwtXCIgKyBuYW1lO1xuICAgIGlmIChldmVudC5tZXRhS2V5KVxuICAgICAgICBuYW1lID0gXCJNZXRhLVwiICsgbmFtZTtcbiAgICBpZiAoc2hpZnQgIT09IGZhbHNlICYmIGV2ZW50LnNoaWZ0S2V5KVxuICAgICAgICBuYW1lID0gXCJTaGlmdC1cIiArIG5hbWU7XG4gICAgcmV0dXJuIG5hbWU7XG59XG5jb25zdCBoYW5kbGVLZXlFdmVudHMgPSAvKkBfX1BVUkVfXyovUHJlYy5kZWZhdWx0KC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmRvbUV2ZW50SGFuZGxlcnMoe1xuICAgIGtleWRvd24oZXZlbnQsIHZpZXcpIHtcbiAgICAgICAgcmV0dXJuIHJ1bkhhbmRsZXJzKGdldEtleW1hcCh2aWV3LnN0YXRlKSwgZXZlbnQsIHZpZXcsIFwiZWRpdG9yXCIpO1xuICAgIH1cbn0pKTtcbi8qKlxuRmFjZXQgdXNlZCBmb3IgcmVnaXN0ZXJpbmcga2V5bWFwcy5cblxuWW91IGNhbiBhZGQgbXVsdGlwbGUga2V5bWFwcyB0byBhbiBlZGl0b3IuIFRoZWlyIHByaW9yaXRpZXNcbmRldGVybWluZSB0aGVpciBwcmVjZWRlbmNlICh0aGUgb25lcyBzcGVjaWZpZWQgZWFybHkgb3Igd2l0aCBoaWdoXG5wcmlvcml0eSBnZXQgY2hlY2tlZCBmaXJzdCkuIFdoZW4gYSBoYW5kbGVyIGhhcyByZXR1cm5lZCBgdHJ1ZWBcbmZvciBhIGdpdmVuIGtleSwgbm8gZnVydGhlciBoYW5kbGVycyBhcmUgY2FsbGVkLlxuKi9cbmNvbnN0IGtleW1hcCA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoeyBlbmFibGVzOiBoYW5kbGVLZXlFdmVudHMgfSk7XG5jb25zdCBLZXltYXBzID0gLypAX19QVVJFX18qL25ldyBXZWFrTWFwKCk7XG4vLyBUaGlzIGlzIGhpZGRlbiBiZWhpbmQgYW4gaW5kaXJlY3Rpb24sIHJhdGhlciB0aGFuIGRpcmVjdGx5IGNvbXB1dGVkXG4vLyBieSB0aGUgZmFjZXQsIHRvIGtlZXAgaW50ZXJuYWwgdHlwZXMgb3V0IG9mIHRoZSBmYWNldCdzIHR5cGUuXG5mdW5jdGlvbiBnZXRLZXltYXAoc3RhdGUpIHtcbiAgICBsZXQgYmluZGluZ3MgPSBzdGF0ZS5mYWNldChrZXltYXApO1xuICAgIGxldCBtYXAgPSBLZXltYXBzLmdldChiaW5kaW5ncyk7XG4gICAgaWYgKCFtYXApXG4gICAgICAgIEtleW1hcHMuc2V0KGJpbmRpbmdzLCBtYXAgPSBidWlsZEtleW1hcChiaW5kaW5ncy5yZWR1Y2UoKGEsIGIpID0+IGEuY29uY2F0KGIpLCBbXSkpKTtcbiAgICByZXR1cm4gbWFwO1xufVxuLyoqXG5SdW4gdGhlIGtleSBoYW5kbGVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIHNjb3BlLiBUaGUgZXZlbnRcbm9iamVjdCBzaG91bGQgYmUgYSBgXCJrZXlkb3duXCJgIGV2ZW50LiBSZXR1cm5zIHRydWUgaWYgYW55IG9mIHRoZVxuaGFuZGxlcnMgaGFuZGxlZCBpdC5cbiovXG5mdW5jdGlvbiBydW5TY29wZUhhbmRsZXJzKHZpZXcsIGV2ZW50LCBzY29wZSkge1xuICAgIHJldHVybiBydW5IYW5kbGVycyhnZXRLZXltYXAodmlldy5zdGF0ZSksIGV2ZW50LCB2aWV3LCBzY29wZSk7XG59XG5sZXQgc3RvcmVkUHJlZml4ID0gbnVsbDtcbmNvbnN0IFByZWZpeFRpbWVvdXQgPSA0MDAwO1xuZnVuY3Rpb24gYnVpbGRLZXltYXAoYmluZGluZ3MsIHBsYXRmb3JtID0gY3VycmVudFBsYXRmb3JtKSB7XG4gICAgbGV0IGJvdW5kID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBsZXQgaXNQcmVmaXggPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGxldCBjaGVja1ByZWZpeCA9IChuYW1lLCBpcykgPT4ge1xuICAgICAgICBsZXQgY3VycmVudCA9IGlzUHJlZml4W25hbWVdO1xuICAgICAgICBpZiAoY3VycmVudCA9PSBudWxsKVxuICAgICAgICAgICAgaXNQcmVmaXhbbmFtZV0gPSBpcztcbiAgICAgICAgZWxzZSBpZiAoY3VycmVudCAhPSBpcylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIktleSBiaW5kaW5nIFwiICsgbmFtZSArIFwiIGlzIHVzZWQgYm90aCBhcyBhIHJlZ3VsYXIgYmluZGluZyBhbmQgYXMgYSBtdWx0aS1zdHJva2UgcHJlZml4XCIpO1xuICAgIH07XG4gICAgbGV0IGFkZCA9IChzY29wZSwga2V5LCBjb21tYW5kLCBwcmV2ZW50RGVmYXVsdCwgc3RvcFByb3BhZ2F0aW9uKSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGxldCBzY29wZU9iaiA9IGJvdW5kW3Njb3BlXSB8fCAoYm91bmRbc2NvcGVdID0gT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gICAgICAgIGxldCBwYXJ0cyA9IGtleS5zcGxpdCgvICg/ISQpLykubWFwKGsgPT4gbm9ybWFsaXplS2V5TmFtZShrLCBwbGF0Zm9ybSkpO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gcGFydHMuc2xpY2UoMCwgaSkuam9pbihcIiBcIik7XG4gICAgICAgICAgICBjaGVja1ByZWZpeChwcmVmaXgsIHRydWUpO1xuICAgICAgICAgICAgaWYgKCFzY29wZU9ialtwcmVmaXhdKVxuICAgICAgICAgICAgICAgIHNjb3BlT2JqW3ByZWZpeF0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzdG9wUHJvcGFnYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBydW46IFsodmlldykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvdXJPYmogPSBzdG9yZWRQcmVmaXggPSB7IHZpZXcsIHByZWZpeCwgc2NvcGUgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgaWYgKHN0b3JlZFByZWZpeCA9PSBvdXJPYmopXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlZFByZWZpeCA9IG51bGw7IH0sIFByZWZpeFRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGxldCBmdWxsID0gcGFydHMuam9pbihcIiBcIik7XG4gICAgICAgIGNoZWNrUHJlZml4KGZ1bGwsIGZhbHNlKTtcbiAgICAgICAgbGV0IGJpbmRpbmcgPSBzY29wZU9ialtmdWxsXSB8fCAoc2NvcGVPYmpbZnVsbF0gPSB7XG4gICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogZmFsc2UsXG4gICAgICAgICAgICBzdG9wUHJvcGFnYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgcnVuOiAoKF9iID0gKF9hID0gc2NvcGVPYmouX2FueSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJ1bikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnNsaWNlKCkpIHx8IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29tbWFuZClcbiAgICAgICAgICAgIGJpbmRpbmcucnVuLnB1c2goY29tbWFuZCk7XG4gICAgICAgIGlmIChwcmV2ZW50RGVmYXVsdClcbiAgICAgICAgICAgIGJpbmRpbmcucHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICBpZiAoc3RvcFByb3BhZ2F0aW9uKVxuICAgICAgICAgICAgYmluZGluZy5zdG9wUHJvcGFnYXRpb24gPSB0cnVlO1xuICAgIH07XG4gICAgZm9yIChsZXQgYiBvZiBiaW5kaW5ncykge1xuICAgICAgICBsZXQgc2NvcGVzID0gYi5zY29wZSA/IGIuc2NvcGUuc3BsaXQoXCIgXCIpIDogW1wiZWRpdG9yXCJdO1xuICAgICAgICBpZiAoYi5hbnkpXG4gICAgICAgICAgICBmb3IgKGxldCBzY29wZSBvZiBzY29wZXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgc2NvcGVPYmogPSBib3VuZFtzY29wZV0gfHwgKGJvdW5kW3Njb3BlXSA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICAgICAgICAgICAgICAgIGlmICghc2NvcGVPYmouX2FueSlcbiAgICAgICAgICAgICAgICAgICAgc2NvcGVPYmouX2FueSA9IHsgcHJldmVudERlZmF1bHQ6IGZhbHNlLCBzdG9wUHJvcGFnYXRpb246IGZhbHNlLCBydW46IFtdIH07XG4gICAgICAgICAgICAgICAgbGV0IHsgYW55IH0gPSBiO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBzY29wZU9iailcbiAgICAgICAgICAgICAgICAgICAgc2NvcGVPYmpba2V5XS5ydW4ucHVzaCh2aWV3ID0+IGFueSh2aWV3LCBjdXJyZW50S2V5RXZlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgbGV0IG5hbWUgPSBiW3BsYXRmb3JtXSB8fCBiLmtleTtcbiAgICAgICAgaWYgKCFuYW1lKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGZvciAobGV0IHNjb3BlIG9mIHNjb3Blcykge1xuICAgICAgICAgICAgYWRkKHNjb3BlLCBuYW1lLCBiLnJ1biwgYi5wcmV2ZW50RGVmYXVsdCwgYi5zdG9wUHJvcGFnYXRpb24pO1xuICAgICAgICAgICAgaWYgKGIuc2hpZnQpXG4gICAgICAgICAgICAgICAgYWRkKHNjb3BlLCBcIlNoaWZ0LVwiICsgbmFtZSwgYi5zaGlmdCwgYi5wcmV2ZW50RGVmYXVsdCwgYi5zdG9wUHJvcGFnYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBib3VuZDtcbn1cbmxldCBjdXJyZW50S2V5RXZlbnQgPSBudWxsO1xuZnVuY3Rpb24gcnVuSGFuZGxlcnMobWFwLCBldmVudCwgdmlldywgc2NvcGUpIHtcbiAgICBjdXJyZW50S2V5RXZlbnQgPSBldmVudDtcbiAgICBsZXQgbmFtZSA9IGtleU5hbWUoZXZlbnQpO1xuICAgIGxldCBjaGFyQ29kZSA9IGNvZGVQb2ludEF0KG5hbWUsIDApLCBpc0NoYXIgPSBjb2RlUG9pbnRTaXplKGNoYXJDb2RlKSA9PSBuYW1lLmxlbmd0aCAmJiBuYW1lICE9IFwiIFwiO1xuICAgIGxldCBwcmVmaXggPSBcIlwiLCBoYW5kbGVkID0gZmFsc2UsIHByZXZlbnRlZCA9IGZhbHNlLCBzdG9wUHJvcGFnYXRpb24gPSBmYWxzZTtcbiAgICBpZiAoc3RvcmVkUHJlZml4ICYmIHN0b3JlZFByZWZpeC52aWV3ID09IHZpZXcgJiYgc3RvcmVkUHJlZml4LnNjb3BlID09IHNjb3BlKSB7XG4gICAgICAgIHByZWZpeCA9IHN0b3JlZFByZWZpeC5wcmVmaXggKyBcIiBcIjtcbiAgICAgICAgaWYgKG1vZGlmaWVyQ29kZXMuaW5kZXhPZihldmVudC5rZXlDb2RlKSA8IDApIHtcbiAgICAgICAgICAgIHByZXZlbnRlZCA9IHRydWU7XG4gICAgICAgICAgICBzdG9yZWRQcmVmaXggPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCByYW4gPSBuZXcgU2V0O1xuICAgIGxldCBydW5Gb3IgPSAoYmluZGluZykgPT4ge1xuICAgICAgICBpZiAoYmluZGluZykge1xuICAgICAgICAgICAgZm9yIChsZXQgY21kIG9mIGJpbmRpbmcucnVuKVxuICAgICAgICAgICAgICAgIGlmICghcmFuLmhhcyhjbWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbi5hZGQoY21kKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtZCh2aWV3KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpbmRpbmcuc3RvcFByb3BhZ2F0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BQcm9wYWdhdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiaW5kaW5nLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGJpbmRpbmcuc3RvcFByb3BhZ2F0aW9uKVxuICAgICAgICAgICAgICAgICAgICBzdG9wUHJvcGFnYXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHByZXZlbnRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgbGV0IHNjb3BlT2JqID0gbWFwW3Njb3BlXSwgYmFzZU5hbWUsIHNoaWZ0TmFtZTtcbiAgICBpZiAoc2NvcGVPYmopIHtcbiAgICAgICAgaWYgKHJ1bkZvcihzY29wZU9ialtwcmVmaXggKyBtb2RpZmllcnMobmFtZSwgZXZlbnQsICFpc0NoYXIpXSkpIHtcbiAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQ2hhciAmJiAoZXZlbnQuYWx0S2V5IHx8IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgICAgIC8vIEN0cmwtQWx0IG1heSBiZSB1c2VkIGZvciBBbHRHciBvbiBXaW5kb3dzXG4gICAgICAgICAgICAhKGJyb3dzZXIud2luZG93cyAmJiBldmVudC5jdHJsS2V5ICYmIGV2ZW50LmFsdEtleSkgJiZcbiAgICAgICAgICAgIC8vIEFsdC1jb21iaW5hdGlvbnMgb24gbWFjT1MgdGVuZCB0byBiZSB0eXBlZCBjaGFyYWN0ZXJzXG4gICAgICAgICAgICAhKGJyb3dzZXIubWFjICYmIGV2ZW50LmFsdEtleSAmJiAhKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkpICYmXG4gICAgICAgICAgICAoYmFzZU5hbWUgPSBiYXNlW2V2ZW50LmtleUNvZGVdKSAmJiBiYXNlTmFtZSAhPSBuYW1lKSB7XG4gICAgICAgICAgICBpZiAocnVuRm9yKHNjb3BlT2JqW3ByZWZpeCArIG1vZGlmaWVycyhiYXNlTmFtZSwgZXZlbnQsIHRydWUpXSkpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LnNoaWZ0S2V5ICYmIChzaGlmdE5hbWUgPSBzaGlmdFtldmVudC5rZXlDb2RlXSkgIT0gbmFtZSAmJiBzaGlmdE5hbWUgIT0gYmFzZU5hbWUgJiZcbiAgICAgICAgICAgICAgICBydW5Gb3Ioc2NvcGVPYmpbcHJlZml4ICsgbW9kaWZpZXJzKHNoaWZ0TmFtZSwgZXZlbnQsIGZhbHNlKV0pKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNDaGFyICYmIGV2ZW50LnNoaWZ0S2V5ICYmXG4gICAgICAgICAgICBydW5Gb3Ioc2NvcGVPYmpbcHJlZml4ICsgbW9kaWZpZXJzKG5hbWUsIGV2ZW50LCB0cnVlKV0pKSB7XG4gICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWhhbmRsZWQgJiYgcnVuRm9yKHNjb3BlT2JqLl9hbnkpKVxuICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChwcmV2ZW50ZWQpXG4gICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgIGlmIChoYW5kbGVkICYmIHN0b3BQcm9wYWdhdGlvbilcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY3VycmVudEtleUV2ZW50ID0gbnVsbDtcbiAgICByZXR1cm4gaGFuZGxlZDtcbn1cblxuLyoqXG5JbXBsZW1lbnRhdGlvbiBvZiBbYExheWVyTWFya2VyYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkxheWVyTWFya2VyKSB0aGF0IGNyZWF0ZXNcbmEgcmVjdGFuZ2xlIGF0IGEgZ2l2ZW4gc2V0IG9mIGNvb3JkaW5hdGVzLlxuKi9cbmNsYXNzIFJlY3RhbmdsZU1hcmtlciB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbWFya2VyIHdpdGggdGhlIGdpdmVuIGNsYXNzIGFuZCBkaW1lbnNpb25zLiBJZiBgd2lkdGhgXG4gICAgaXMgbnVsbCwgdGhlIERPTSBlbGVtZW50IHdpbGwgZ2V0IG5vIHdpZHRoIHN0eWxlLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoY2xhc3NOYW1lLCBcbiAgICAvKipcbiAgICBUaGUgbGVmdCBwb3NpdGlvbiBvZiB0aGUgbWFya2VyIChpbiBwaXhlbHMsIGRvY3VtZW50LXJlbGF0aXZlKS5cbiAgICAqL1xuICAgIGxlZnQsIFxuICAgIC8qKlxuICAgIFRoZSB0b3AgcG9zaXRpb24gb2YgdGhlIG1hcmtlci5cbiAgICAqL1xuICAgIHRvcCwgXG4gICAgLyoqXG4gICAgVGhlIHdpZHRoIG9mIHRoZSBtYXJrZXIsIG9yIG51bGwgaWYgaXQgc2hvdWxkbid0IGdldCBhIHdpZHRoIGFzc2lnbmVkLlxuICAgICovXG4gICAgd2lkdGgsIFxuICAgIC8qKlxuICAgIFRoZSBoZWlnaHQgb2YgdGhlIG1hcmtlci5cbiAgICAqL1xuICAgIGhlaWdodCkge1xuICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICAgICAgdGhpcy5sZWZ0ID0gbGVmdDtcbiAgICAgICAgdGhpcy50b3AgPSB0b3A7XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuICAgIGRyYXcoKSB7XG4gICAgICAgIGxldCBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBlbHQuY2xhc3NOYW1lID0gdGhpcy5jbGFzc05hbWU7XG4gICAgICAgIHRoaXMuYWRqdXN0KGVsdCk7XG4gICAgICAgIHJldHVybiBlbHQ7XG4gICAgfVxuICAgIHVwZGF0ZShlbHQsIHByZXYpIHtcbiAgICAgICAgaWYgKHByZXYuY2xhc3NOYW1lICE9IHRoaXMuY2xhc3NOYW1lKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLmFkanVzdChlbHQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYWRqdXN0KGVsdCkge1xuICAgICAgICBlbHQuc3R5bGUubGVmdCA9IHRoaXMubGVmdCArIFwicHhcIjtcbiAgICAgICAgZWx0LnN0eWxlLnRvcCA9IHRoaXMudG9wICsgXCJweFwiO1xuICAgICAgICBpZiAodGhpcy53aWR0aCAhPSBudWxsKVxuICAgICAgICAgICAgZWx0LnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArIFwicHhcIjtcbiAgICAgICAgZWx0LnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgXCJweFwiO1xuICAgIH1cbiAgICBlcShwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQgPT0gcC5sZWZ0ICYmIHRoaXMudG9wID09IHAudG9wICYmIHRoaXMud2lkdGggPT0gcC53aWR0aCAmJiB0aGlzLmhlaWdodCA9PSBwLmhlaWdodCAmJlxuICAgICAgICAgICAgdGhpcy5jbGFzc05hbWUgPT0gcC5jbGFzc05hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHNldCBvZiByZWN0YW5nbGVzIGZvciB0aGUgZ2l2ZW4gc2VsZWN0aW9uIHJhbmdlLFxuICAgIGFzc2lnbmluZyB0aGVtIHRoZWNsYXNzYGNsYXNzTmFtZWAuIFdpbGwgY3JlYXRlIGEgc2luZ2xlXG4gICAgcmVjdGFuZ2xlIGZvciBlbXB0eSByYW5nZXMsIGFuZCBhIHNldCBvZiBzZWxlY3Rpb24tc3R5bGVcbiAgICByZWN0YW5nbGVzIGNvdmVyaW5nIHRoZSByYW5nZSdzIGNvbnRlbnQgKGluIGEgYmlkaS1hd2FyZVxuICAgIHdheSkgZm9yIG5vbi1lbXB0eSBvbmVzLlxuICAgICovXG4gICAgc3RhdGljIGZvclJhbmdlKHZpZXcsIGNsYXNzTmFtZSwgcmFuZ2UpIHtcbiAgICAgICAgaWYgKHJhbmdlLmVtcHR5KSB7XG4gICAgICAgICAgICBsZXQgcG9zID0gdmlldy5jb29yZHNBdFBvcyhyYW5nZS5oZWFkLCByYW5nZS5hc3NvYyB8fCAxKTtcbiAgICAgICAgICAgIGlmICghcG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGxldCBiYXNlID0gZ2V0QmFzZSh2aWV3KTtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IFJlY3RhbmdsZU1hcmtlcihjbGFzc05hbWUsIHBvcy5sZWZ0IC0gYmFzZS5sZWZ0LCBwb3MudG9wIC0gYmFzZS50b3AsIG51bGwsIHBvcy5ib3R0b20gLSBwb3MudG9wKV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjdGFuZ2xlc0ZvclJhbmdlKHZpZXcsIGNsYXNzTmFtZSwgcmFuZ2UpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0QmFzZSh2aWV3KSB7XG4gICAgbGV0IHJlY3QgPSB2aWV3LnNjcm9sbERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgbGVmdCA9IHZpZXcudGV4dERpcmVjdGlvbiA9PSBEaXJlY3Rpb24uTFRSID8gcmVjdC5sZWZ0IDogcmVjdC5yaWdodCAtIHZpZXcuc2Nyb2xsRE9NLmNsaWVudFdpZHRoICogdmlldy5zY2FsZVg7XG4gICAgcmV0dXJuIHsgbGVmdDogbGVmdCAtIHZpZXcuc2Nyb2xsRE9NLnNjcm9sbExlZnQgKiB2aWV3LnNjYWxlWCwgdG9wOiByZWN0LnRvcCAtIHZpZXcuc2Nyb2xsRE9NLnNjcm9sbFRvcCAqIHZpZXcuc2NhbGVZIH07XG59XG5mdW5jdGlvbiB3cmFwcGVkTGluZSh2aWV3LCBwb3MsIHNpZGUsIGluc2lkZSkge1xuICAgIGxldCBjb29yZHMgPSB2aWV3LmNvb3Jkc0F0UG9zKHBvcywgc2lkZSAqIDIpO1xuICAgIGlmICghY29vcmRzKVxuICAgICAgICByZXR1cm4gaW5zaWRlO1xuICAgIGxldCBlZGl0b3JSZWN0ID0gdmlldy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IHkgPSAoY29vcmRzLnRvcCArIGNvb3Jkcy5ib3R0b20pIC8gMjtcbiAgICBsZXQgbGVmdCA9IHZpZXcucG9zQXRDb29yZHMoeyB4OiBlZGl0b3JSZWN0LmxlZnQgKyAxLCB5IH0pO1xuICAgIGxldCByaWdodCA9IHZpZXcucG9zQXRDb29yZHMoeyB4OiBlZGl0b3JSZWN0LnJpZ2h0IC0gMSwgeSB9KTtcbiAgICBpZiAobGVmdCA9PSBudWxsIHx8IHJpZ2h0ID09IG51bGwpXG4gICAgICAgIHJldHVybiBpbnNpZGU7XG4gICAgcmV0dXJuIHsgZnJvbTogTWF0aC5tYXgoaW5zaWRlLmZyb20sIE1hdGgubWluKGxlZnQsIHJpZ2h0KSksIHRvOiBNYXRoLm1pbihpbnNpZGUudG8sIE1hdGgubWF4KGxlZnQsIHJpZ2h0KSkgfTtcbn1cbmZ1bmN0aW9uIHJlY3RhbmdsZXNGb3JSYW5nZSh2aWV3LCBjbGFzc05hbWUsIHJhbmdlKSB7XG4gICAgaWYgKHJhbmdlLnRvIDw9IHZpZXcudmlld3BvcnQuZnJvbSB8fCByYW5nZS5mcm9tID49IHZpZXcudmlld3BvcnQudG8pXG4gICAgICAgIHJldHVybiBbXTtcbiAgICBsZXQgZnJvbSA9IE1hdGgubWF4KHJhbmdlLmZyb20sIHZpZXcudmlld3BvcnQuZnJvbSksIHRvID0gTWF0aC5taW4ocmFuZ2UudG8sIHZpZXcudmlld3BvcnQudG8pO1xuICAgIGxldCBsdHIgPSB2aWV3LnRleHREaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxUUjtcbiAgICBsZXQgY29udGVudCA9IHZpZXcuY29udGVudERPTSwgY29udGVudFJlY3QgPSBjb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBiYXNlID0gZ2V0QmFzZSh2aWV3KTtcbiAgICBsZXQgbGluZUVsdCA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jbS1saW5lXCIpLCBsaW5lU3R5bGUgPSBsaW5lRWx0ICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGxpbmVFbHQpO1xuICAgIGxldCBsZWZ0U2lkZSA9IGNvbnRlbnRSZWN0LmxlZnQgK1xuICAgICAgICAobGluZVN0eWxlID8gcGFyc2VJbnQobGluZVN0eWxlLnBhZGRpbmdMZWZ0KSArIE1hdGgubWluKDAsIHBhcnNlSW50KGxpbmVTdHlsZS50ZXh0SW5kZW50KSkgOiAwKTtcbiAgICBsZXQgcmlnaHRTaWRlID0gY29udGVudFJlY3QucmlnaHQgLSAobGluZVN0eWxlID8gcGFyc2VJbnQobGluZVN0eWxlLnBhZGRpbmdSaWdodCkgOiAwKTtcbiAgICBsZXQgc3RhcnRCbG9jayA9IGJsb2NrQXQodmlldywgZnJvbSwgMSksIGVuZEJsb2NrID0gYmxvY2tBdCh2aWV3LCB0bywgLTEpO1xuICAgIGxldCB2aXN1YWxTdGFydCA9IHN0YXJ0QmxvY2sudHlwZSA9PSBCbG9ja1R5cGUuVGV4dCA/IHN0YXJ0QmxvY2sgOiBudWxsO1xuICAgIGxldCB2aXN1YWxFbmQgPSBlbmRCbG9jay50eXBlID09IEJsb2NrVHlwZS5UZXh0ID8gZW5kQmxvY2sgOiBudWxsO1xuICAgIGlmICh2aXN1YWxTdGFydCAmJiAodmlldy5saW5lV3JhcHBpbmcgfHwgc3RhcnRCbG9jay53aWRnZXRMaW5lQnJlYWtzKSlcbiAgICAgICAgdmlzdWFsU3RhcnQgPSB3cmFwcGVkTGluZSh2aWV3LCBmcm9tLCAxLCB2aXN1YWxTdGFydCk7XG4gICAgaWYgKHZpc3VhbEVuZCAmJiAodmlldy5saW5lV3JhcHBpbmcgfHwgZW5kQmxvY2sud2lkZ2V0TGluZUJyZWFrcykpXG4gICAgICAgIHZpc3VhbEVuZCA9IHdyYXBwZWRMaW5lKHZpZXcsIHRvLCAtMSwgdmlzdWFsRW5kKTtcbiAgICBpZiAodmlzdWFsU3RhcnQgJiYgdmlzdWFsRW5kICYmIHZpc3VhbFN0YXJ0LmZyb20gPT0gdmlzdWFsRW5kLmZyb20gJiYgdmlzdWFsU3RhcnQudG8gPT0gdmlzdWFsRW5kLnRvKSB7XG4gICAgICAgIHJldHVybiBwaWVjZXMoZHJhd0ZvckxpbmUocmFuZ2UuZnJvbSwgcmFuZ2UudG8sIHZpc3VhbFN0YXJ0KSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgdG9wID0gdmlzdWFsU3RhcnQgPyBkcmF3Rm9yTGluZShyYW5nZS5mcm9tLCBudWxsLCB2aXN1YWxTdGFydCkgOiBkcmF3Rm9yV2lkZ2V0KHN0YXJ0QmxvY2ssIGZhbHNlKTtcbiAgICAgICAgbGV0IGJvdHRvbSA9IHZpc3VhbEVuZCA/IGRyYXdGb3JMaW5lKG51bGwsIHJhbmdlLnRvLCB2aXN1YWxFbmQpIDogZHJhd0ZvcldpZGdldChlbmRCbG9jaywgdHJ1ZSk7XG4gICAgICAgIGxldCBiZXR3ZWVuID0gW107XG4gICAgICAgIGlmICgodmlzdWFsU3RhcnQgfHwgc3RhcnRCbG9jaykudG8gPCAodmlzdWFsRW5kIHx8IGVuZEJsb2NrKS5mcm9tIC0gKHZpc3VhbFN0YXJ0ICYmIHZpc3VhbEVuZCA/IDEgOiAwKSB8fFxuICAgICAgICAgICAgc3RhcnRCbG9jay53aWRnZXRMaW5lQnJlYWtzID4gMSAmJiB0b3AuYm90dG9tICsgdmlldy5kZWZhdWx0TGluZUhlaWdodCAvIDIgPCBib3R0b20udG9wKVxuICAgICAgICAgICAgYmV0d2Vlbi5wdXNoKHBpZWNlKGxlZnRTaWRlLCB0b3AuYm90dG9tLCByaWdodFNpZGUsIGJvdHRvbS50b3ApKTtcbiAgICAgICAgZWxzZSBpZiAodG9wLmJvdHRvbSA8IGJvdHRvbS50b3AgJiYgdmlldy5lbGVtZW50QXRIZWlnaHQoKHRvcC5ib3R0b20gKyBib3R0b20udG9wKSAvIDIpLnR5cGUgPT0gQmxvY2tUeXBlLlRleHQpXG4gICAgICAgICAgICB0b3AuYm90dG9tID0gYm90dG9tLnRvcCA9ICh0b3AuYm90dG9tICsgYm90dG9tLnRvcCkgLyAyO1xuICAgICAgICByZXR1cm4gcGllY2VzKHRvcCkuY29uY2F0KGJldHdlZW4pLmNvbmNhdChwaWVjZXMoYm90dG9tKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBpZWNlKGxlZnQsIHRvcCwgcmlnaHQsIGJvdHRvbSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlY3RhbmdsZU1hcmtlcihjbGFzc05hbWUsIGxlZnQgLSBiYXNlLmxlZnQsIHRvcCAtIGJhc2UudG9wLCByaWdodCAtIGxlZnQsIGJvdHRvbSAtIHRvcCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBpZWNlcyh7IHRvcCwgYm90dG9tLCBob3Jpem9udGFsIH0pIHtcbiAgICAgICAgbGV0IHBpZWNlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhvcml6b250YWwubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgICAgICBwaWVjZXMucHVzaChwaWVjZShob3Jpem9udGFsW2ldLCB0b3AsIGhvcml6b250YWxbaSArIDFdLCBib3R0b20pKTtcbiAgICAgICAgcmV0dXJuIHBpZWNlcztcbiAgICB9XG4gICAgLy8gR2V0cyBwYXNzZWQgZnJvbS90byBpbiBsaW5lLWxvY2FsIHBvc2l0aW9uc1xuICAgIGZ1bmN0aW9uIGRyYXdGb3JMaW5lKGZyb20sIHRvLCBsaW5lKSB7XG4gICAgICAgIGxldCB0b3AgPSAxZTksIGJvdHRvbSA9IC0xZTksIGhvcml6b250YWwgPSBbXTtcbiAgICAgICAgZnVuY3Rpb24gYWRkU3Bhbihmcm9tLCBmcm9tT3BlbiwgdG8sIHRvT3BlbiwgZGlyKSB7XG4gICAgICAgICAgICAvLyBQYXNzaW5nIDIvLTIgaXMgYSBrbHVkZ2UgdG8gZm9yY2UgdGhlIHZpZXcgdG8gcmV0dXJuXG4gICAgICAgICAgICAvLyBjb29yZGluYXRlcyBvbiB0aGUgcHJvcGVyIHNpZGUgb2YgYmxvY2sgd2lkZ2V0cywgc2luY2VcbiAgICAgICAgICAgIC8vIG5vcm1hbGl6aW5nIHRoZSBzaWRlIHRoZXJlLCB0aG91Z2ggYXBwcm9wcmlhdGUgZm9yIG1vc3RcbiAgICAgICAgICAgIC8vIGNvb3Jkc0F0UG9zIHF1ZXJpZXMsIHdvdWxkIGJyZWFrIHNlbGVjdGlvbiBkcmF3aW5nLlxuICAgICAgICAgICAgbGV0IGZyb21Db29yZHMgPSB2aWV3LmNvb3Jkc0F0UG9zKGZyb20sIChmcm9tID09IGxpbmUudG8gPyAtMiA6IDIpKTtcbiAgICAgICAgICAgIGxldCB0b0Nvb3JkcyA9IHZpZXcuY29vcmRzQXRQb3ModG8sICh0byA9PSBsaW5lLmZyb20gPyAyIDogLTIpKTtcbiAgICAgICAgICAgIGlmICghZnJvbUNvb3JkcyB8fCAhdG9Db29yZHMpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdG9wID0gTWF0aC5taW4oZnJvbUNvb3Jkcy50b3AsIHRvQ29vcmRzLnRvcCwgdG9wKTtcbiAgICAgICAgICAgIGJvdHRvbSA9IE1hdGgubWF4KGZyb21Db29yZHMuYm90dG9tLCB0b0Nvb3Jkcy5ib3R0b20sIGJvdHRvbSk7XG4gICAgICAgICAgICBpZiAoZGlyID09IERpcmVjdGlvbi5MVFIpXG4gICAgICAgICAgICAgICAgaG9yaXpvbnRhbC5wdXNoKGx0ciAmJiBmcm9tT3BlbiA/IGxlZnRTaWRlIDogZnJvbUNvb3Jkcy5sZWZ0LCBsdHIgJiYgdG9PcGVuID8gcmlnaHRTaWRlIDogdG9Db29yZHMucmlnaHQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGhvcml6b250YWwucHVzaCghbHRyICYmIHRvT3BlbiA/IGxlZnRTaWRlIDogdG9Db29yZHMubGVmdCwgIWx0ciAmJiBmcm9tT3BlbiA/IHJpZ2h0U2lkZSA6IGZyb21Db29yZHMucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzdGFydCA9IGZyb20gIT09IG51bGwgJiYgZnJvbSAhPT0gdm9pZCAwID8gZnJvbSA6IGxpbmUuZnJvbSwgZW5kID0gdG8gIT09IG51bGwgJiYgdG8gIT09IHZvaWQgMCA/IHRvIDogbGluZS50bztcbiAgICAgICAgLy8gU3BsaXQgdGhlIHJhbmdlIGJ5IHZpc2libGUgcmFuZ2UgYW5kIGRvY3VtZW50IGxpbmVcbiAgICAgICAgZm9yIChsZXQgciBvZiB2aWV3LnZpc2libGVSYW5nZXMpXG4gICAgICAgICAgICBpZiAoci50byA+IHN0YXJ0ICYmIHIuZnJvbSA8IGVuZCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHBvcyA9IE1hdGgubWF4KHIuZnJvbSwgc3RhcnQpLCBlbmRQb3MgPSBNYXRoLm1pbihyLnRvLCBlbmQpOzspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRvY0xpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQocG9zKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgc3BhbiBvZiB2aWV3LmJpZGlTcGFucyhkb2NMaW5lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNwYW5Gcm9tID0gc3Bhbi5mcm9tICsgZG9jTGluZS5mcm9tLCBzcGFuVG8gPSBzcGFuLnRvICsgZG9jTGluZS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwYW5Gcm9tID49IGVuZFBvcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGFuVG8gPiBwb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkU3BhbihNYXRoLm1heChzcGFuRnJvbSwgcG9zKSwgZnJvbSA9PSBudWxsICYmIHNwYW5Gcm9tIDw9IHN0YXJ0LCBNYXRoLm1pbihzcGFuVG8sIGVuZFBvcyksIHRvID09IG51bGwgJiYgc3BhblRvID49IGVuZCwgc3Bhbi5kaXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IGRvY0xpbmUudG8gKyAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zID49IGVuZFBvcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgaWYgKGhvcml6b250YWwubGVuZ3RoID09IDApXG4gICAgICAgICAgICBhZGRTcGFuKHN0YXJ0LCBmcm9tID09IG51bGwsIGVuZCwgdG8gPT0gbnVsbCwgdmlldy50ZXh0RGlyZWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIHsgdG9wLCBib3R0b20sIGhvcml6b250YWwgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZHJhd0ZvcldpZGdldChibG9jaywgdG9wKSB7XG4gICAgICAgIGxldCB5ID0gY29udGVudFJlY3QudG9wICsgKHRvcCA/IGJsb2NrLnRvcCA6IGJsb2NrLmJvdHRvbSk7XG4gICAgICAgIHJldHVybiB7IHRvcDogeSwgYm90dG9tOiB5LCBob3Jpem9udGFsOiBbXSB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNhbWVNYXJrZXIoYSwgYikge1xuICAgIHJldHVybiBhLmNvbnN0cnVjdG9yID09IGIuY29uc3RydWN0b3IgJiYgYS5lcShiKTtcbn1cbmNsYXNzIExheWVyVmlldyB7XG4gICAgY29uc3RydWN0b3IodmlldywgbGF5ZXIpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5sYXllciA9IGxheWVyO1xuICAgICAgICB0aGlzLmRyYXduID0gW107XG4gICAgICAgIHRoaXMuc2NhbGVYID0gMTtcbiAgICAgICAgdGhpcy5zY2FsZVkgPSAxO1xuICAgICAgICB0aGlzLm1lYXN1cmVSZXEgPSB7IHJlYWQ6IHRoaXMubWVhc3VyZS5iaW5kKHRoaXMpLCB3cml0ZTogdGhpcy5kcmF3LmJpbmQodGhpcykgfTtcbiAgICAgICAgdGhpcy5kb20gPSB2aWV3LnNjcm9sbERPTS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcbiAgICAgICAgdGhpcy5kb20uY2xhc3NMaXN0LmFkZChcImNtLWxheWVyXCIpO1xuICAgICAgICBpZiAobGF5ZXIuYWJvdmUpXG4gICAgICAgICAgICB0aGlzLmRvbS5jbGFzc0xpc3QuYWRkKFwiY20tbGF5ZXItYWJvdmVcIik7XG4gICAgICAgIGlmIChsYXllci5jbGFzcylcbiAgICAgICAgICAgIHRoaXMuZG9tLmNsYXNzTGlzdC5hZGQobGF5ZXIuY2xhc3MpO1xuICAgICAgICB0aGlzLnNjYWxlKCk7XG4gICAgICAgIHRoaXMuZG9tLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgdGhpcy5zZXRPcmRlcih2aWV3LnN0YXRlKTtcbiAgICAgICAgdmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLm1lYXN1cmVSZXEpO1xuICAgICAgICBpZiAobGF5ZXIubW91bnQpXG4gICAgICAgICAgICBsYXllci5tb3VudCh0aGlzLmRvbSwgdmlldyk7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgaWYgKHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KGxheWVyT3JkZXIpICE9IHVwZGF0ZS5zdGF0ZS5mYWNldChsYXllck9yZGVyKSlcbiAgICAgICAgICAgIHRoaXMuc2V0T3JkZXIodXBkYXRlLnN0YXRlKTtcbiAgICAgICAgaWYgKHRoaXMubGF5ZXIudXBkYXRlKHVwZGF0ZSwgdGhpcy5kb20pIHx8IHVwZGF0ZS5nZW9tZXRyeUNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2NhbGUoKTtcbiAgICAgICAgICAgIHVwZGF0ZS52aWV3LnJlcXVlc3RNZWFzdXJlKHRoaXMubWVhc3VyZVJlcSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZG9jVmlld1VwZGF0ZSh2aWV3KSB7XG4gICAgICAgIGlmICh0aGlzLmxheWVyLnVwZGF0ZU9uRG9jVmlld1VwZGF0ZSAhPT0gZmFsc2UpXG4gICAgICAgICAgICB2aWV3LnJlcXVlc3RNZWFzdXJlKHRoaXMubWVhc3VyZVJlcSk7XG4gICAgfVxuICAgIHNldE9yZGVyKHN0YXRlKSB7XG4gICAgICAgIGxldCBwb3MgPSAwLCBvcmRlciA9IHN0YXRlLmZhY2V0KGxheWVyT3JkZXIpO1xuICAgICAgICB3aGlsZSAocG9zIDwgb3JkZXIubGVuZ3RoICYmIG9yZGVyW3Bvc10gIT0gdGhpcy5sYXllcilcbiAgICAgICAgICAgIHBvcysrO1xuICAgICAgICB0aGlzLmRvbS5zdHlsZS56SW5kZXggPSBTdHJpbmcoKHRoaXMubGF5ZXIuYWJvdmUgPyAxNTAgOiAtMSkgLSBwb3MpO1xuICAgIH1cbiAgICBtZWFzdXJlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXllci5tYXJrZXJzKHRoaXMudmlldyk7XG4gICAgfVxuICAgIHNjYWxlKCkge1xuICAgICAgICBsZXQgeyBzY2FsZVgsIHNjYWxlWSB9ID0gdGhpcy52aWV3O1xuICAgICAgICBpZiAoc2NhbGVYICE9IHRoaXMuc2NhbGVYIHx8IHNjYWxlWSAhPSB0aGlzLnNjYWxlWSkge1xuICAgICAgICAgICAgdGhpcy5zY2FsZVggPSBzY2FsZVg7XG4gICAgICAgICAgICB0aGlzLnNjYWxlWSA9IHNjYWxlWTtcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlLnRyYW5zZm9ybSA9IGBzY2FsZSgkezEgLyBzY2FsZVh9LCAkezEgLyBzY2FsZVl9KWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZHJhdyhtYXJrZXJzKSB7XG4gICAgICAgIGlmIChtYXJrZXJzLmxlbmd0aCAhPSB0aGlzLmRyYXduLmxlbmd0aCB8fCBtYXJrZXJzLnNvbWUoKHAsIGkpID0+ICFzYW1lTWFya2VyKHAsIHRoaXMuZHJhd25baV0pKSkge1xuICAgICAgICAgICAgbGV0IG9sZCA9IHRoaXMuZG9tLmZpcnN0Q2hpbGQsIG9sZEkgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgbWFya2VyIG9mIG1hcmtlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAobWFya2VyLnVwZGF0ZSAmJiBvbGQgJiYgbWFya2VyLmNvbnN0cnVjdG9yICYmIHRoaXMuZHJhd25bb2xkSV0uY29uc3RydWN0b3IgJiZcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyLnVwZGF0ZShvbGQsIHRoaXMuZHJhd25bb2xkSV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIG9sZCA9IG9sZC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgb2xkSSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uaW5zZXJ0QmVmb3JlKG1hcmtlci5kcmF3KCksIG9sZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKG9sZCkge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gb2xkLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIG9sZC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBvbGQgPSBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcmF3biA9IG1hcmtlcnM7XG4gICAgICAgICAgICBpZiAoYnJvd3Nlci5zYWZhcmkgJiYgYnJvd3Nlci5zYWZhcmlfdmVyc2lvbiA+PSAyNikgLy8gSXNzdWUgIzE2MDAsIDE2MjdcbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5zdHlsZS5kaXNwbGF5ID0gdGhpcy5kb20uZmlyc3RDaGlsZCA/IFwiXCIgOiBcIm5vbmVcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5sYXllci5kZXN0cm95KVxuICAgICAgICAgICAgdGhpcy5sYXllci5kZXN0cm95KHRoaXMuZG9tLCB0aGlzLnZpZXcpO1xuICAgICAgICB0aGlzLmRvbS5yZW1vdmUoKTtcbiAgICB9XG59XG5jb25zdCBsYXllck9yZGVyID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuLyoqXG5EZWZpbmUgYSBsYXllci5cbiovXG5mdW5jdGlvbiBsYXllcihjb25maWcpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBWaWV3UGx1Z2luLmRlZmluZSh2ID0+IG5ldyBMYXllclZpZXcodiwgY29uZmlnKSksXG4gICAgICAgIGxheWVyT3JkZXIub2YoY29uZmlnKVxuICAgIF07XG59XG5cbmNvbnN0IHNlbGVjdGlvbkNvbmZpZyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUoY29uZmlncykge1xuICAgICAgICByZXR1cm4gY29tYmluZUNvbmZpZyhjb25maWdzLCB7XG4gICAgICAgICAgICBjdXJzb3JCbGlua1JhdGU6IDEyMDAsXG4gICAgICAgICAgICBkcmF3UmFuZ2VDdXJzb3I6IHRydWVcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY3Vyc29yQmxpbmtSYXRlOiAoYSwgYikgPT4gTWF0aC5taW4oYSwgYiksXG4gICAgICAgICAgICBkcmF3UmFuZ2VDdXJzb3I6IChhLCBiKSA9PiBhIHx8IGJcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG4vKipcblJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgaGlkZXMgdGhlIGJyb3dzZXIncyBuYXRpdmUgc2VsZWN0aW9uIGFuZFxuY3Vyc29yLCByZXBsYWNpbmcgdGhlIHNlbGVjdGlvbiB3aXRoIGEgYmFja2dyb3VuZCBiZWhpbmQgdGhlIHRleHRcbih3aXRoIHRoZSBgY20tc2VsZWN0aW9uQmFja2dyb3VuZGAgY2xhc3MpLCBhbmQgdGhlXG5jdXJzb3JzIHdpdGggZWxlbWVudHMgb3ZlcmxhaWQgb3ZlciB0aGUgY29kZSAodXNpbmdcbmBjbS1jdXJzb3ItcHJpbWFyeWAgYW5kIGBjbS1jdXJzb3Itc2Vjb25kYXJ5YCkuXG5cblRoaXMgYWxsb3dzIHRoZSBlZGl0b3IgdG8gZGlzcGxheSBzZWNvbmRhcnkgc2VsZWN0aW9uIHJhbmdlcywgYW5kXG50ZW5kcyB0byBwcm9kdWNlIGEgdHlwZSBvZiBzZWxlY3Rpb24gbW9yZSBpbiBsaW5lIHdpdGggdGhhdCB1c2Vyc1xuZXhwZWN0IGluIGEgdGV4dCBlZGl0b3IgKHRoZSBuYXRpdmUgc2VsZWN0aW9uIHN0eWxpbmcgd2lsbCBvZnRlblxubGVhdmUgZ2FwcyBiZXR3ZWVuIGxpbmVzIGFuZCB3b24ndCBmaWxsIHRoZSBob3Jpem9udGFsIHNwYWNlIGFmdGVyXG5hIGxpbmUgd2hlbiB0aGUgc2VsZWN0aW9uIGNvbnRpbnVlcyBwYXN0IGl0KS5cblxuSXQgZG9lcyBoYXZlIGEgcGVyZm9ybWFuY2UgY29zdCwgaW4gdGhhdCBpdCByZXF1aXJlcyBhbiBleHRyYSBET01cbmxheW91dCBjeWNsZSBmb3IgbWFueSB1cGRhdGVzICh0aGUgc2VsZWN0aW9uIGlzIGRyYXduIGJhc2VkIG9uIERPTVxubGF5b3V0IGluZm9ybWF0aW9uIHRoYXQncyBvbmx5IGF2YWlsYWJsZSBhZnRlciBsYXlpbmcgb3V0IHRoZVxuY29udGVudCkuXG4qL1xuZnVuY3Rpb24gZHJhd1NlbGVjdGlvbihjb25maWcgPSB7fSkge1xuICAgIHJldHVybiBbXG4gICAgICAgIHNlbGVjdGlvbkNvbmZpZy5vZihjb25maWcpLFxuICAgICAgICBjdXJzb3JMYXllcixcbiAgICAgICAgc2VsZWN0aW9uTGF5ZXIsXG4gICAgICAgIGhpZGVOYXRpdmVTZWxlY3Rpb24sXG4gICAgICAgIG5hdGl2ZVNlbGVjdGlvbkhpZGRlbi5vZih0cnVlKVxuICAgIF07XG59XG4vKipcblJldHJpZXZlIHRoZSBbYGRyYXdTZWxlY3Rpb25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuZHJhd1NlbGVjdGlvbikgY29uZmlndXJhdGlvblxuZm9yIHRoaXMgc3RhdGUuIChOb3RlIHRoYXQgdGhpcyB3aWxsIHJldHVybiBhIHNldCBvZiBkZWZhdWx0cyBldmVuXG5pZiBgZHJhd1NlbGVjdGlvbmAgaXNuJ3QgZW5hYmxlZC4pXG4qL1xuZnVuY3Rpb24gZ2V0RHJhd1NlbGVjdGlvbkNvbmZpZyhzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5mYWNldChzZWxlY3Rpb25Db25maWcpO1xufVxuZnVuY3Rpb24gY29uZmlnQ2hhbmdlZCh1cGRhdGUpIHtcbiAgICByZXR1cm4gdXBkYXRlLnN0YXJ0U3RhdGUuZmFjZXQoc2VsZWN0aW9uQ29uZmlnKSAhPSB1cGRhdGUuc3RhdGUuZmFjZXQoc2VsZWN0aW9uQ29uZmlnKTtcbn1cbmNvbnN0IGN1cnNvckxheWVyID0gLypAX19QVVJFX18qL2xheWVyKHtcbiAgICBhYm92ZTogdHJ1ZSxcbiAgICBtYXJrZXJzKHZpZXcpIHtcbiAgICAgICAgbGV0IHsgc3RhdGUgfSA9IHZpZXcsIGNvbmYgPSBzdGF0ZS5mYWNldChzZWxlY3Rpb25Db25maWcpO1xuICAgICAgICBsZXQgY3Vyc29ycyA9IFtdO1xuICAgICAgICBmb3IgKGxldCByIG9mIHN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICAgICAgICAgIGxldCBwcmltID0gciA9PSBzdGF0ZS5zZWxlY3Rpb24ubWFpbjtcbiAgICAgICAgICAgIGlmIChyLmVtcHR5IHx8IGNvbmYuZHJhd1JhbmdlQ3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNsYXNzTmFtZSA9IHByaW0gPyBcImNtLWN1cnNvciBjbS1jdXJzb3ItcHJpbWFyeVwiIDogXCJjbS1jdXJzb3IgY20tY3Vyc29yLXNlY29uZGFyeVwiO1xuICAgICAgICAgICAgICAgIGxldCBjdXJzb3IgPSByLmVtcHR5ID8gciA6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3Ioci5oZWFkLCByLmhlYWQgPiByLmFuY2hvciA/IC0xIDogMSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcGllY2Ugb2YgUmVjdGFuZ2xlTWFya2VyLmZvclJhbmdlKHZpZXcsIGNsYXNzTmFtZSwgY3Vyc29yKSlcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29ycy5wdXNoKHBpZWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3Vyc29ycztcbiAgICB9LFxuICAgIHVwZGF0ZSh1cGRhdGUsIGRvbSkge1xuICAgICAgICBpZiAodXBkYXRlLnRyYW5zYWN0aW9ucy5zb21lKHRyID0+IHRyLnNlbGVjdGlvbikpXG4gICAgICAgICAgICBkb20uc3R5bGUuYW5pbWF0aW9uTmFtZSA9IGRvbS5zdHlsZS5hbmltYXRpb25OYW1lID09IFwiY20tYmxpbmtcIiA/IFwiY20tYmxpbmsyXCIgOiBcImNtLWJsaW5rXCI7XG4gICAgICAgIGxldCBjb25mQ2hhbmdlID0gY29uZmlnQ2hhbmdlZCh1cGRhdGUpO1xuICAgICAgICBpZiAoY29uZkNoYW5nZSlcbiAgICAgICAgICAgIHNldEJsaW5rUmF0ZSh1cGRhdGUuc3RhdGUsIGRvbSk7XG4gICAgICAgIHJldHVybiB1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuc2VsZWN0aW9uU2V0IHx8IGNvbmZDaGFuZ2U7XG4gICAgfSxcbiAgICBtb3VudChkb20sIHZpZXcpIHtcbiAgICAgICAgc2V0QmxpbmtSYXRlKHZpZXcuc3RhdGUsIGRvbSk7XG4gICAgfSxcbiAgICBjbGFzczogXCJjbS1jdXJzb3JMYXllclwiXG59KTtcbmZ1bmN0aW9uIHNldEJsaW5rUmF0ZShzdGF0ZSwgZG9tKSB7XG4gICAgZG9tLnN0eWxlLmFuaW1hdGlvbkR1cmF0aW9uID0gc3RhdGUuZmFjZXQoc2VsZWN0aW9uQ29uZmlnKS5jdXJzb3JCbGlua1JhdGUgKyBcIm1zXCI7XG59XG5jb25zdCBzZWxlY3Rpb25MYXllciA9IC8qQF9fUFVSRV9fKi9sYXllcih7XG4gICAgYWJvdmU6IGZhbHNlLFxuICAgIG1hcmtlcnModmlldykge1xuICAgICAgICByZXR1cm4gdmlldy5zdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLm1hcChyID0+IHIuZW1wdHkgPyBbXSA6IFJlY3RhbmdsZU1hcmtlci5mb3JSYW5nZSh2aWV3LCBcImNtLXNlbGVjdGlvbkJhY2tncm91bmRcIiwgcikpXG4gICAgICAgICAgICAucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSk7XG4gICAgfSxcbiAgICB1cGRhdGUodXBkYXRlLCBkb20pIHtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS5zZWxlY3Rpb25TZXQgfHwgdXBkYXRlLnZpZXdwb3J0Q2hhbmdlZCB8fCBjb25maWdDaGFuZ2VkKHVwZGF0ZSk7XG4gICAgfSxcbiAgICBjbGFzczogXCJjbS1zZWxlY3Rpb25MYXllclwiXG59KTtcbmNvbnN0IGhpZGVOYXRpdmVTZWxlY3Rpb24gPSAvKkBfX1BVUkVfXyovUHJlYy5oaWdoZXN0KC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LnRoZW1lKHtcbiAgICBcIi5jbS1saW5lXCI6IHtcbiAgICAgICAgXCImIDo6c2VsZWN0aW9uLCAmOjpzZWxlY3Rpb25cIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwidHJhbnNwYXJlbnQgIWltcG9ydGFudFwiIH0sXG4gICAgICAgIGNhcmV0Q29sb3I6IFwidHJhbnNwYXJlbnQgIWltcG9ydGFudFwiXG4gICAgfSxcbiAgICBcIi5jbS1jb250ZW50XCI6IHtcbiAgICAgICAgY2FyZXRDb2xvcjogXCJ0cmFuc3BhcmVudCAhaW1wb3J0YW50XCIsXG4gICAgICAgIFwiJiA6Zm9jdXNcIjoge1xuICAgICAgICAgICAgY2FyZXRDb2xvcjogXCJpbml0aWFsICFpbXBvcnRhbnRcIixcbiAgICAgICAgICAgIFwiJjo6c2VsZWN0aW9uLCAmIDo6c2VsZWN0aW9uXCI6IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiSGlnaGxpZ2h0ICFpbXBvcnRhbnRcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSkpO1xuXG5jb25zdCBzZXREcm9wQ3Vyc29yUG9zID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSh7XG4gICAgbWFwKHBvcywgbWFwcGluZykgeyByZXR1cm4gcG9zID09IG51bGwgPyBudWxsIDogbWFwcGluZy5tYXBQb3MocG9zKTsgfVxufSk7XG5jb25zdCBkcm9wQ3Vyc29yUG9zID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGUoKSB7IHJldHVybiBudWxsOyB9LFxuICAgIHVwZGF0ZShwb3MsIHRyKSB7XG4gICAgICAgIGlmIChwb3MgIT0gbnVsbClcbiAgICAgICAgICAgIHBvcyA9IHRyLmNoYW5nZXMubWFwUG9zKHBvcyk7XG4gICAgICAgIHJldHVybiB0ci5lZmZlY3RzLnJlZHVjZSgocG9zLCBlKSA9PiBlLmlzKHNldERyb3BDdXJzb3JQb3MpID8gZS52YWx1ZSA6IHBvcywgcG9zKTtcbiAgICB9XG59KTtcbmNvbnN0IGRyYXdEcm9wQ3Vyc29yID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gbnVsbDtcbiAgICAgICAgdGhpcy5tZWFzdXJlUmVxID0geyByZWFkOiB0aGlzLnJlYWRQb3MuYmluZCh0aGlzKSwgd3JpdGU6IHRoaXMuZHJhd0N1cnNvci5iaW5kKHRoaXMpIH07XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgY3Vyc29yUG9zID0gdXBkYXRlLnN0YXRlLmZpZWxkKGRyb3BDdXJzb3JQb3MpO1xuICAgICAgICBpZiAoY3Vyc29yUG9zID09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnNvciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgKF9hID0gdGhpcy5jdXJzb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLnZpZXcuc2Nyb2xsRE9NLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yLmNsYXNzTmFtZSA9IFwiY20tZHJvcEN1cnNvclwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVwZGF0ZS5zdGFydFN0YXRlLmZpZWxkKGRyb3BDdXJzb3JQb3MpICE9IGN1cnNvclBvcyB8fCB1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuZ2VvbWV0cnlDaGFuZ2VkKVxuICAgICAgICAgICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLm1lYXN1cmVSZXEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlYWRQb3MoKSB7XG4gICAgICAgIGxldCB7IHZpZXcgfSA9IHRoaXM7XG4gICAgICAgIGxldCBwb3MgPSB2aWV3LnN0YXRlLmZpZWxkKGRyb3BDdXJzb3JQb3MpO1xuICAgICAgICBsZXQgcmVjdCA9IHBvcyAhPSBudWxsICYmIHZpZXcuY29vcmRzQXRQb3MocG9zKTtcbiAgICAgICAgaWYgKCFyZWN0KVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBvdXRlciA9IHZpZXcuc2Nyb2xsRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGVmdDogcmVjdC5sZWZ0IC0gb3V0ZXIubGVmdCArIHZpZXcuc2Nyb2xsRE9NLnNjcm9sbExlZnQgKiB2aWV3LnNjYWxlWCxcbiAgICAgICAgICAgIHRvcDogcmVjdC50b3AgLSBvdXRlci50b3AgKyB2aWV3LnNjcm9sbERPTS5zY3JvbGxUb3AgKiB2aWV3LnNjYWxlWSxcbiAgICAgICAgICAgIGhlaWdodDogcmVjdC5ib3R0b20gLSByZWN0LnRvcFxuICAgICAgICB9O1xuICAgIH1cbiAgICBkcmF3Q3Vyc29yKHBvcykge1xuICAgICAgICBpZiAodGhpcy5jdXJzb3IpIHtcbiAgICAgICAgICAgIGxldCB7IHNjYWxlWCwgc2NhbGVZIH0gPSB0aGlzLnZpZXc7XG4gICAgICAgICAgICBpZiAocG9zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3Iuc3R5bGUubGVmdCA9IHBvcy5sZWZ0IC8gc2NhbGVYICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yLnN0eWxlLnRvcCA9IHBvcy50b3AgLyBzY2FsZVkgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3Iuc3R5bGUuaGVpZ2h0ID0gcG9zLmhlaWdodCAvIHNjYWxlWSArIFwicHhcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yLnN0eWxlLmxlZnQgPSBcIi0xMDAwMDBweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnNvcilcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yLnJlbW92ZSgpO1xuICAgIH1cbiAgICBzZXREcm9wUG9zKHBvcykge1xuICAgICAgICBpZiAodGhpcy52aWV3LnN0YXRlLmZpZWxkKGRyb3BDdXJzb3JQb3MpICE9IHBvcylcbiAgICAgICAgICAgIHRoaXMudmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHNldERyb3BDdXJzb3JQb3Mub2YocG9zKSB9KTtcbiAgICB9XG59LCB7XG4gICAgZXZlbnRPYnNlcnZlcnM6IHtcbiAgICAgICAgZHJhZ292ZXIoZXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RHJvcFBvcyh0aGlzLnZpZXcucG9zQXRDb29yZHMoeyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH0pKTtcbiAgICAgICAgfSxcbiAgICAgICAgZHJhZ2xlYXZlKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IHRoaXMudmlldy5jb250ZW50RE9NIHx8ICF0aGlzLnZpZXcuY29udGVudERPTS5jb250YWlucyhldmVudC5yZWxhdGVkVGFyZ2V0KSlcbiAgICAgICAgICAgICAgICB0aGlzLnNldERyb3BQb3MobnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGRyYWdlbmQoKSB7XG4gICAgICAgICAgICB0aGlzLnNldERyb3BQb3MobnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGRyb3AoKSB7XG4gICAgICAgICAgICB0aGlzLnNldERyb3BQb3MobnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcbi8qKlxuRHJhd3MgYSBjdXJzb3IgYXQgdGhlIGN1cnJlbnQgZHJvcCBwb3NpdGlvbiB3aGVuIHNvbWV0aGluZyBpc1xuZHJhZ2dlZCBvdmVyIHRoZSBlZGl0b3IuXG4qL1xuZnVuY3Rpb24gZHJvcEN1cnNvcigpIHtcbiAgICByZXR1cm4gW2Ryb3BDdXJzb3JQb3MsIGRyYXdEcm9wQ3Vyc29yXTtcbn1cblxuZnVuY3Rpb24gaXRlck1hdGNoZXMoZG9jLCByZSwgZnJvbSwgdG8sIGYpIHtcbiAgICByZS5sYXN0SW5kZXggPSAwO1xuICAgIGZvciAobGV0IGN1cnNvciA9IGRvYy5pdGVyUmFuZ2UoZnJvbSwgdG8pLCBwb3MgPSBmcm9tLCBtOyAhY3Vyc29yLm5leHQoKS5kb25lOyBwb3MgKz0gY3Vyc29yLnZhbHVlLmxlbmd0aCkge1xuICAgICAgICBpZiAoIWN1cnNvci5saW5lQnJlYWspXG4gICAgICAgICAgICB3aGlsZSAobSA9IHJlLmV4ZWMoY3Vyc29yLnZhbHVlKSlcbiAgICAgICAgICAgICAgICBmKHBvcyArIG0uaW5kZXgsIG0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1hdGNoUmFuZ2VzKHZpZXcsIG1heExlbmd0aCkge1xuICAgIGxldCB2aXNpYmxlID0gdmlldy52aXNpYmxlUmFuZ2VzO1xuICAgIGlmICh2aXNpYmxlLmxlbmd0aCA9PSAxICYmIHZpc2libGVbMF0uZnJvbSA9PSB2aWV3LnZpZXdwb3J0LmZyb20gJiZcbiAgICAgICAgdmlzaWJsZVswXS50byA9PSB2aWV3LnZpZXdwb3J0LnRvKVxuICAgICAgICByZXR1cm4gdmlzaWJsZTtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHZpc2libGUpIHtcbiAgICAgICAgZnJvbSA9IE1hdGgubWF4KHZpZXcuc3RhdGUuZG9jLmxpbmVBdChmcm9tKS5mcm9tLCBmcm9tIC0gbWF4TGVuZ3RoKTtcbiAgICAgICAgdG8gPSBNYXRoLm1pbih2aWV3LnN0YXRlLmRvYy5saW5lQXQodG8pLnRvLCB0byArIG1heExlbmd0aCk7XG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoICYmIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0udG8gPj0gZnJvbSlcbiAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0udG8gPSB0bztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBmcm9tLCB0byB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuSGVscGVyIGNsYXNzIHVzZWQgdG8gbWFrZSBpdCBlYXNpZXIgdG8gbWFpbnRhaW4gZGVjb3JhdGlvbnMgb25cbnZpc2libGUgY29kZSB0aGF0IG1hdGNoZXMgYSBnaXZlbiByZWd1bGFyIGV4cHJlc3Npb24uIFRvIGJlIHVzZWRcbmluIGEgW3ZpZXcgcGx1Z2luXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuVmlld1BsdWdpbikuIEluc3RhbmNlcyBvZiB0aGlzIG9iamVjdFxucmVwcmVzZW50IGEgbWF0Y2hpbmcgY29uZmlndXJhdGlvbi5cbiovXG5jbGFzcyBNYXRjaERlY29yYXRvciB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgZGVjb3JhdG9yLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHsgcmVnZXhwLCBkZWNvcmF0aW9uLCBkZWNvcmF0ZSwgYm91bmRhcnksIG1heExlbmd0aCA9IDEwMDAgfSA9IGNvbmZpZztcbiAgICAgICAgaWYgKCFyZWdleHAuZ2xvYmFsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUaGUgcmVndWxhciBleHByZXNzaW9uIGdpdmVuIHRvIE1hdGNoRGVjb3JhdG9yIHNob3VsZCBoYXZlIGl0cyAnZycgZmxhZyBzZXRcIik7XG4gICAgICAgIHRoaXMucmVnZXhwID0gcmVnZXhwO1xuICAgICAgICBpZiAoZGVjb3JhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkTWF0Y2ggPSAobWF0Y2gsIHZpZXcsIGZyb20sIGFkZCkgPT4gZGVjb3JhdGUoYWRkLCBmcm9tLCBmcm9tICsgbWF0Y2hbMF0ubGVuZ3RoLCBtYXRjaCwgdmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGRlY29yYXRpb24gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLmFkZE1hdGNoID0gKG1hdGNoLCB2aWV3LCBmcm9tLCBhZGQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZGVjbyA9IGRlY29yYXRpb24obWF0Y2gsIHZpZXcsIGZyb20pO1xuICAgICAgICAgICAgICAgIGlmIChkZWNvKVxuICAgICAgICAgICAgICAgICAgICBhZGQoZnJvbSwgZnJvbSArIG1hdGNoWzBdLmxlbmd0aCwgZGVjbyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlY29yYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuYWRkTWF0Y2ggPSAobWF0Y2gsIF92aWV3LCBmcm9tLCBhZGQpID0+IGFkZChmcm9tLCBmcm9tICsgbWF0Y2hbMF0ubGVuZ3RoLCBkZWNvcmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiRWl0aGVyICdkZWNvcmF0ZScgb3IgJ2RlY29yYXRpb24nIHNob3VsZCBiZSBwcm92aWRlZCB0byBNYXRjaERlY29yYXRvclwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJvdW5kYXJ5ID0gYm91bmRhcnk7XG4gICAgICAgIHRoaXMubWF4TGVuZ3RoID0gbWF4TGVuZ3RoO1xuICAgIH1cbiAgICAvKipcbiAgICBDb21wdXRlIHRoZSBmdWxsIHNldCBvZiBkZWNvcmF0aW9ucyBmb3IgbWF0Y2hlcyBpbiB0aGUgZ2l2ZW5cbiAgICB2aWV3J3Mgdmlld3BvcnQuIFlvdSdsbCB3YW50IHRvIGNhbGwgdGhpcyB3aGVuIGluaXRpYWxpemluZyB5b3VyXG4gICAgcGx1Z2luLlxuICAgICovXG4gICAgY3JlYXRlRGVjbyh2aWV3KSB7XG4gICAgICAgIGxldCBidWlsZCA9IG5ldyBSYW5nZVNldEJ1aWxkZXIoKSwgYWRkID0gYnVpbGQuYWRkLmJpbmQoYnVpbGQpO1xuICAgICAgICBmb3IgKGxldCB7IGZyb20sIHRvIH0gb2YgbWF0Y2hSYW5nZXModmlldywgdGhpcy5tYXhMZW5ndGgpKVxuICAgICAgICAgICAgaXRlck1hdGNoZXModmlldy5zdGF0ZS5kb2MsIHRoaXMucmVnZXhwLCBmcm9tLCB0bywgKGZyb20sIG0pID0+IHRoaXMuYWRkTWF0Y2gobSwgdmlldywgZnJvbSwgYWRkKSk7XG4gICAgICAgIHJldHVybiBidWlsZC5maW5pc2goKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVXBkYXRlIGEgc2V0IG9mIGRlY29yYXRpb25zIGZvciBhIHZpZXcgdXBkYXRlLiBgZGVjb2AgX211c3RfIGJlXG4gICAgdGhlIHNldCBvZiBkZWNvcmF0aW9ucyBwcm9kdWNlZCBieSBfdGhpc18gYE1hdGNoRGVjb3JhdG9yYCBmb3JcbiAgICB0aGUgdmlldyBzdGF0ZSBiZWZvcmUgdGhlIHVwZGF0ZS5cbiAgICAqL1xuICAgIHVwZGF0ZURlY28odXBkYXRlLCBkZWNvKSB7XG4gICAgICAgIGxldCBjaGFuZ2VGcm9tID0gMWU5LCBjaGFuZ2VUbyA9IC0xO1xuICAgICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQpXG4gICAgICAgICAgICB1cGRhdGUuY2hhbmdlcy5pdGVyQ2hhbmdlcygoX2YsIF90LCBmcm9tLCB0bykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0byA+PSB1cGRhdGUudmlldy52aWV3cG9ydC5mcm9tICYmIGZyb20gPD0gdXBkYXRlLnZpZXcudmlld3BvcnQudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRnJvbSA9IE1hdGgubWluKGZyb20sIGNoYW5nZUZyb20pO1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VUbyA9IE1hdGgubWF4KHRvLCBjaGFuZ2VUbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIGlmICh1cGRhdGUudmlld3BvcnRNb3ZlZCB8fCBjaGFuZ2VUbyAtIGNoYW5nZUZyb20gPiAxMDAwKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRGVjbyh1cGRhdGUudmlldyk7XG4gICAgICAgIGlmIChjaGFuZ2VUbyA+IC0xKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlUmFuZ2UodXBkYXRlLnZpZXcsIGRlY28ubWFwKHVwZGF0ZS5jaGFuZ2VzKSwgY2hhbmdlRnJvbSwgY2hhbmdlVG8pO1xuICAgICAgICByZXR1cm4gZGVjbztcbiAgICB9XG4gICAgdXBkYXRlUmFuZ2UodmlldywgZGVjbywgdXBkYXRlRnJvbSwgdXBkYXRlVG8pIHtcbiAgICAgICAgZm9yIChsZXQgciBvZiB2aWV3LnZpc2libGVSYW5nZXMpIHtcbiAgICAgICAgICAgIGxldCBmcm9tID0gTWF0aC5tYXgoci5mcm9tLCB1cGRhdGVGcm9tKSwgdG8gPSBNYXRoLm1pbihyLnRvLCB1cGRhdGVUbyk7XG4gICAgICAgICAgICBpZiAodG8gPj0gZnJvbSkge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tTGluZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdChmcm9tKSwgdG9MaW5lID0gZnJvbUxpbmUudG8gPCB0byA/IHZpZXcuc3RhdGUuZG9jLmxpbmVBdCh0bykgOiBmcm9tTGluZTtcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSBNYXRoLm1heChyLmZyb20sIGZyb21MaW5lLmZyb20pLCBlbmQgPSBNYXRoLm1pbihyLnRvLCB0b0xpbmUudG8pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoOyBmcm9tID4gZnJvbUxpbmUuZnJvbTsgZnJvbS0tKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRhcnkudGVzdChmcm9tTGluZS50ZXh0W2Zyb20gLSAxIC0gZnJvbUxpbmUuZnJvbV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBmcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKDsgdG8gPCB0b0xpbmUudG87IHRvKyspXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZGFyeS50ZXN0KHRvTGluZS50ZXh0W3RvIC0gdG9MaW5lLmZyb21dKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IHRvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgcmFuZ2VzID0gW10sIG07XG4gICAgICAgICAgICAgICAgbGV0IGFkZCA9IChmcm9tLCB0bywgZGVjbykgPT4gcmFuZ2VzLnB1c2goZGVjby5yYW5nZShmcm9tLCB0bykpO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tTGluZSA9PSB0b0xpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdleHAubGFzdEluZGV4ID0gc3RhcnQgLSBmcm9tTGluZS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKG0gPSB0aGlzLnJlZ2V4cC5leGVjKGZyb21MaW5lLnRleHQpKSAmJiBtLmluZGV4IDwgZW5kIC0gZnJvbUxpbmUuZnJvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTWF0Y2gobSwgdmlldywgbS5pbmRleCArIGZyb21MaW5lLmZyb20sIGFkZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpdGVyTWF0Y2hlcyh2aWV3LnN0YXRlLmRvYywgdGhpcy5yZWdleHAsIHN0YXJ0LCBlbmQsIChmcm9tLCBtKSA9PiB0aGlzLmFkZE1hdGNoKG0sIHZpZXcsIGZyb20sIGFkZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWNvID0gZGVjby51cGRhdGUoeyBmaWx0ZXJGcm9tOiBzdGFydCwgZmlsdGVyVG86IGVuZCwgZmlsdGVyOiAoZnJvbSwgdG8pID0+IGZyb20gPCBzdGFydCB8fCB0byA+IGVuZCwgYWRkOiByYW5nZXMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlY287XG4gICAgfVxufVxuXG5jb25zdCBVbmljb2RlUmVnZXhwU3VwcG9ydCA9IC94Ly51bmljb2RlICE9IG51bGwgPyBcImd1XCIgOiBcImdcIjtcbmNvbnN0IFNwZWNpYWxzID0gLypAX19QVVJFX18qL25ldyBSZWdFeHAoXCJbXFx1MDAwMC1cXHUwMDA4XFx1MDAwYS1cXHUwMDFmXFx1MDA3Zi1cXHUwMDlmXFx1MDBhZFxcdTA2MWNcXHUyMDBiXFx1MjAwZVxcdTIwMGZcXHUyMDI4XFx1MjAyOVxcdTIwMmRcXHUyMDJlXFx1MjA2NlxcdTIwNjdcXHUyMDY5XFx1ZmVmZlxcdWZmZjktXFx1ZmZmY11cIiwgVW5pY29kZVJlZ2V4cFN1cHBvcnQpO1xuY29uc3QgTmFtZXMgPSB7XG4gICAgMDogXCJudWxsXCIsXG4gICAgNzogXCJiZWxsXCIsXG4gICAgODogXCJiYWNrc3BhY2VcIixcbiAgICAxMDogXCJuZXdsaW5lXCIsXG4gICAgMTE6IFwidmVydGljYWwgdGFiXCIsXG4gICAgMTM6IFwiY2FycmlhZ2UgcmV0dXJuXCIsXG4gICAgMjc6IFwiZXNjYXBlXCIsXG4gICAgODIwMzogXCJ6ZXJvIHdpZHRoIHNwYWNlXCIsXG4gICAgODIwNDogXCJ6ZXJvIHdpZHRoIG5vbi1qb2luZXJcIixcbiAgICA4MjA1OiBcInplcm8gd2lkdGggam9pbmVyXCIsXG4gICAgODIwNjogXCJsZWZ0LXRvLXJpZ2h0IG1hcmtcIixcbiAgICA4MjA3OiBcInJpZ2h0LXRvLWxlZnQgbWFya1wiLFxuICAgIDgyMzI6IFwibGluZSBzZXBhcmF0b3JcIixcbiAgICA4MjM3OiBcImxlZnQtdG8tcmlnaHQgb3ZlcnJpZGVcIixcbiAgICA4MjM4OiBcInJpZ2h0LXRvLWxlZnQgb3ZlcnJpZGVcIixcbiAgICA4Mjk0OiBcImxlZnQtdG8tcmlnaHQgaXNvbGF0ZVwiLFxuICAgIDgyOTU6IFwicmlnaHQtdG8tbGVmdCBpc29sYXRlXCIsXG4gICAgODI5NzogXCJwb3AgZGlyZWN0aW9uYWwgaXNvbGF0ZVwiLFxuICAgIDgyMzM6IFwicGFyYWdyYXBoIHNlcGFyYXRvclwiLFxuICAgIDY1Mjc5OiBcInplcm8gd2lkdGggbm8tYnJlYWsgc3BhY2VcIixcbiAgICA2NTUzMjogXCJvYmplY3QgcmVwbGFjZW1lbnRcIlxufTtcbmxldCBfc3VwcG9ydHNUYWJTaXplID0gbnVsbDtcbmZ1bmN0aW9uIHN1cHBvcnRzVGFiU2l6ZSgpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKF9zdXBwb3J0c1RhYlNpemUgPT0gbnVsbCAmJiB0eXBlb2YgZG9jdW1lbnQgIT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgIGxldCBzdHlsZXMgPSBkb2N1bWVudC5ib2R5LnN0eWxlO1xuICAgICAgICBfc3VwcG9ydHNUYWJTaXplID0gKChfYSA9IHN0eWxlcy50YWJTaXplKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBzdHlsZXMuTW96VGFiU2l6ZSkgIT0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIF9zdXBwb3J0c1RhYlNpemUgfHwgZmFsc2U7XG59XG5jb25zdCBzcGVjaWFsQ2hhckNvbmZpZyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUoY29uZmlncykge1xuICAgICAgICBsZXQgY29uZmlnID0gY29tYmluZUNvbmZpZyhjb25maWdzLCB7XG4gICAgICAgICAgICByZW5kZXI6IG51bGwsXG4gICAgICAgICAgICBzcGVjaWFsQ2hhcnM6IFNwZWNpYWxzLFxuICAgICAgICAgICAgYWRkU3BlY2lhbENoYXJzOiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29uZmlnLnJlcGxhY2VUYWJzID0gIXN1cHBvcnRzVGFiU2l6ZSgpKVxuICAgICAgICAgICAgY29uZmlnLnNwZWNpYWxDaGFycyA9IG5ldyBSZWdFeHAoXCJcXHR8XCIgKyBjb25maWcuc3BlY2lhbENoYXJzLnNvdXJjZSwgVW5pY29kZVJlZ2V4cFN1cHBvcnQpO1xuICAgICAgICBpZiAoY29uZmlnLmFkZFNwZWNpYWxDaGFycylcbiAgICAgICAgICAgIGNvbmZpZy5zcGVjaWFsQ2hhcnMgPSBuZXcgUmVnRXhwKGNvbmZpZy5zcGVjaWFsQ2hhcnMuc291cmNlICsgXCJ8XCIgKyBjb25maWcuYWRkU3BlY2lhbENoYXJzLnNvdXJjZSwgVW5pY29kZVJlZ2V4cFN1cHBvcnQpO1xuICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cbn0pO1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGluc3RhbGxzIGhpZ2hsaWdodGluZyBvZiBzcGVjaWFsXG5jaGFyYWN0ZXJzLlxuKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodFNwZWNpYWxDaGFycyhcbi8qKlxuQ29uZmlndXJhdGlvbiBvcHRpb25zLlxuKi9cbmNvbmZpZyA9IHt9KSB7XG4gICAgcmV0dXJuIFtzcGVjaWFsQ2hhckNvbmZpZy5vZihjb25maWcpLCBzcGVjaWFsQ2hhclBsdWdpbigpXTtcbn1cbmxldCBfcGx1Z2luID0gbnVsbDtcbmZ1bmN0aW9uIHNwZWNpYWxDaGFyUGx1Z2luKCkge1xuICAgIHJldHVybiBfcGx1Z2luIHx8IChfcGx1Z2luID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgICAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbkNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdG9yID0gdGhpcy5tYWtlRGVjb3JhdG9yKHZpZXcuc3RhdGUuZmFjZXQoc3BlY2lhbENoYXJDb25maWcpKTtcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmRlY29yYXRvci5jcmVhdGVEZWNvKHZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIG1ha2VEZWNvcmF0b3IoY29uZikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXRjaERlY29yYXRvcih7XG4gICAgICAgICAgICAgICAgcmVnZXhwOiBjb25mLnNwZWNpYWxDaGFycyxcbiAgICAgICAgICAgICAgICBkZWNvcmF0aW9uOiAobSwgdmlldywgcG9zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB7IGRvYyB9ID0gdmlldy5zdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvZGUgPSBjb2RlUG9pbnRBdChtWzBdLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgPT0gOSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBkb2MubGluZUF0KHBvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2l6ZSA9IHZpZXcuc3RhdGUudGFiU2l6ZSwgY29sID0gY291bnRDb2x1bW4obGluZS50ZXh0LCBzaXplLCBwb3MgLSBsaW5lLmZyb20pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERlY29yYXRpb24ucmVwbGFjZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0OiBuZXcgVGFiV2lkZ2V0KChzaXplIC0gKGNvbCAlIHNpemUpKSAqIHRoaXMudmlldy5kZWZhdWx0Q2hhcmFjdGVyV2lkdGggLyB0aGlzLnZpZXcuc2NhbGVYKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb3JhdGlvbkNhY2hlW2NvZGVdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kZWNvcmF0aW9uQ2FjaGVbY29kZV0gPSBEZWNvcmF0aW9uLnJlcGxhY2UoeyB3aWRnZXQ6IG5ldyBTcGVjaWFsQ2hhcldpZGdldChjb25mLCBjb2RlKSB9KSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib3VuZGFyeTogY29uZi5yZXBsYWNlVGFicyA/IHVuZGVmaW5lZCA6IC9bXl0vXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgICAgICBsZXQgY29uZiA9IHVwZGF0ZS5zdGF0ZS5mYWNldChzcGVjaWFsQ2hhckNvbmZpZyk7XG4gICAgICAgICAgICBpZiAodXBkYXRlLnN0YXJ0U3RhdGUuZmFjZXQoc3BlY2lhbENoYXJDb25maWcpICE9IGNvbmYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlY29yYXRvciA9IHRoaXMubWFrZURlY29yYXRvcihjb25mKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5kZWNvcmF0b3IuY3JlYXRlRGVjbyh1cGRhdGUudmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5kZWNvcmF0b3IudXBkYXRlRGVjbyh1cGRhdGUsIHRoaXMuZGVjb3JhdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBkZWNvcmF0aW9uczogdiA9PiB2LmRlY29yYXRpb25zXG4gICAgfSkpO1xufVxuY29uc3QgRGVmYXVsdFBsYWNlaG9sZGVyID0gXCJcXHUyMDIyXCI7XG4vLyBBc3NpZ25zIHBsYWNlaG9sZGVyIGNoYXJhY3RlcnMgZnJvbSB0aGUgQ29udHJvbCBQaWN0dXJlcyBibG9jayB0b1xuLy8gQVNDSUkgY29udHJvbCBjaGFyYWN0ZXJzXG5mdW5jdGlvbiBwbGFjZWhvbGRlciQxKGNvZGUpIHtcbiAgICBpZiAoY29kZSA+PSAzMilcbiAgICAgICAgcmV0dXJuIERlZmF1bHRQbGFjZWhvbGRlcjtcbiAgICBpZiAoY29kZSA9PSAxMClcbiAgICAgICAgcmV0dXJuIFwiXFx1MjQyNFwiO1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKDkyMTYgKyBjb2RlKTtcbn1cbmNsYXNzIFNwZWNpYWxDaGFyV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29kZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gb3RoZXIuY29kZSA9PSB0aGlzLmNvZGU7IH1cbiAgICB0b0RPTSh2aWV3KSB7XG4gICAgICAgIGxldCBwaCA9IHBsYWNlaG9sZGVyJDEodGhpcy5jb2RlKTtcbiAgICAgICAgbGV0IGRlc2MgPSB2aWV3LnN0YXRlLnBocmFzZShcIkNvbnRyb2wgY2hhcmFjdGVyXCIpICsgXCIgXCIgKyAoTmFtZXNbdGhpcy5jb2RlXSB8fCBcIjB4XCIgKyB0aGlzLmNvZGUudG9TdHJpbmcoMTYpKTtcbiAgICAgICAgbGV0IGN1c3RvbSA9IHRoaXMub3B0aW9ucy5yZW5kZXIgJiYgdGhpcy5vcHRpb25zLnJlbmRlcih0aGlzLmNvZGUsIGRlc2MsIHBoKTtcbiAgICAgICAgaWYgKGN1c3RvbSlcbiAgICAgICAgICAgIHJldHVybiBjdXN0b207XG4gICAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBwaDtcbiAgICAgICAgc3Bhbi50aXRsZSA9IGRlc2M7XG4gICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBkZXNjKTtcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBcImNtLXNwZWNpYWxDaGFyXCI7XG4gICAgICAgIHJldHVybiBzcGFuO1xuICAgIH1cbiAgICBpZ25vcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG59XG5jbGFzcyBUYWJXaWRnZXQgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICBjb25zdHJ1Y3Rvcih3aWR0aCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7IHJldHVybiBvdGhlci53aWR0aCA9PSB0aGlzLndpZHRoOyB9XG4gICAgdG9ET00oKSB7XG4gICAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBcIlxcdFwiO1xuICAgICAgICBzcGFuLmNsYXNzTmFtZSA9IFwiY20tdGFiXCI7XG4gICAgICAgIHNwYW4uc3R5bGUud2lkdGggPSB0aGlzLndpZHRoICsgXCJweFwiO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG4gICAgaWdub3JlRXZlbnQoKSB7IHJldHVybiBmYWxzZTsgfVxufVxuXG5jb25zdCBwbHVnaW4gPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmhlaWdodCA9IDEwMDA7XG4gICAgICAgIHRoaXMuYXR0cnMgPSB7IHN0eWxlOiBcInBhZGRpbmctYm90dG9tOiAxMDAwcHhcIiB9O1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGxldCB7IHZpZXcgfSA9IHVwZGF0ZTtcbiAgICAgICAgbGV0IGhlaWdodCA9IHZpZXcudmlld1N0YXRlLmVkaXRvckhlaWdodCAtXG4gICAgICAgICAgICB2aWV3LmRlZmF1bHRMaW5lSGVpZ2h0IC0gdmlldy5kb2N1bWVudFBhZGRpbmcudG9wIC0gMC41O1xuICAgICAgICBpZiAoaGVpZ2h0ID49IDAgJiYgaGVpZ2h0ICE9IHRoaXMuaGVpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuYXR0cnMgPSB7IHN0eWxlOiBgcGFkZGluZy1ib3R0b206ICR7aGVpZ2h0fXB4YCB9O1xuICAgICAgICB9XG4gICAgfVxufSk7XG4vKipcblJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgbWFrZXMgc3VyZSB0aGUgY29udGVudCBoYXMgYSBib3R0b21cbm1hcmdpbiBlcXVpdmFsZW50IHRvIHRoZSBoZWlnaHQgb2YgdGhlIGVkaXRvciwgbWludXMgb25lIGxpbmVcbmhlaWdodCwgc28gdGhhdCBldmVyeSBsaW5lIGluIHRoZSBkb2N1bWVudCBjYW4gYmUgc2Nyb2xsZWQgdG8gdGhlXG50b3Agb2YgdGhlIGVkaXRvci5cblxuVGhpcyBpcyBvbmx5IG1lYW5pbmdmdWwgd2hlbiB0aGUgZWRpdG9yIGlzIHNjcm9sbGFibGUsIGFuZCBzaG91bGRcbm5vdCBiZSBlbmFibGVkIGluIGVkaXRvcnMgdGhhdCB0YWtlIHRoZSBzaXplIG9mIHRoZWlyIGNvbnRlbnQuXG4qL1xuZnVuY3Rpb24gc2Nyb2xsUGFzdEVuZCgpIHtcbiAgICByZXR1cm4gW3BsdWdpbiwgY29udGVudEF0dHJpYnV0ZXMub2YodmlldyA9PiB7IHZhciBfYTsgcmV0dXJuICgoX2EgPSB2aWV3LnBsdWdpbihwbHVnaW4pKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYXR0cnMpIHx8IG51bGw7IH0pXTtcbn1cblxuLyoqXG5NYXJrIGxpbmVzIHRoYXQgaGF2ZSBhIGN1cnNvciBvbiB0aGVtIHdpdGggdGhlIGBcImNtLWFjdGl2ZUxpbmVcImBcbkRPTSBjbGFzcy5cbiovXG5mdW5jdGlvbiBoaWdobGlnaHRBY3RpdmVMaW5lKCkge1xuICAgIHJldHVybiBhY3RpdmVMaW5lSGlnaGxpZ2h0ZXI7XG59XG5jb25zdCBsaW5lRGVjbyA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLmxpbmUoeyBjbGFzczogXCJjbS1hY3RpdmVMaW5lXCIgfSk7XG5jb25zdCBhY3RpdmVMaW5lSGlnaGxpZ2h0ZXIgPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuZ2V0RGVjbyh2aWV3KTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLnNlbGVjdGlvblNldClcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmdldERlY28odXBkYXRlLnZpZXcpO1xuICAgIH1cbiAgICBnZXREZWNvKHZpZXcpIHtcbiAgICAgICAgbGV0IGxhc3RMaW5lU3RhcnQgPSAtMSwgZGVjbyA9IFtdO1xuICAgICAgICBmb3IgKGxldCByIG9mIHZpZXcuc3RhdGUuc2VsZWN0aW9uLnJhbmdlcykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSB2aWV3LmxpbmVCbG9ja0F0KHIuaGVhZCk7XG4gICAgICAgICAgICBpZiAobGluZS5mcm9tID4gbGFzdExpbmVTdGFydCkge1xuICAgICAgICAgICAgICAgIGRlY28ucHVzaChsaW5lRGVjby5yYW5nZShsaW5lLmZyb20pKTtcbiAgICAgICAgICAgICAgICBsYXN0TGluZVN0YXJ0ID0gbGluZS5mcm9tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBEZWNvcmF0aW9uLnNldChkZWNvKTtcbiAgICB9XG59LCB7XG4gICAgZGVjb3JhdGlvbnM6IHYgPT4gdi5kZWNvcmF0aW9uc1xufSk7XG5cbmNsYXNzIFBsYWNlaG9sZGVyIGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgY29uc3RydWN0b3IoY29udGVudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgIH1cbiAgICB0b0RPTSh2aWV3KSB7XG4gICAgICAgIGxldCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHdyYXAuY2xhc3NOYW1lID0gXCJjbS1wbGFjZWhvbGRlclwiO1xuICAgICAgICB3cmFwLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcbiAgICAgICAgd3JhcC5hcHBlbmRDaGlsZCh0eXBlb2YgdGhpcy5jb250ZW50ID09IFwic3RyaW5nXCIgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLmNvbnRlbnQpIDpcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLmNvbnRlbnQgPT0gXCJmdW5jdGlvblwiID8gdGhpcy5jb250ZW50KHZpZXcpIDpcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgd3JhcC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIik7XG4gICAgICAgIHJldHVybiB3cmFwO1xuICAgIH1cbiAgICBjb29yZHNBdChkb20pIHtcbiAgICAgICAgbGV0IHJlY3RzID0gZG9tLmZpcnN0Q2hpbGQgPyBjbGllbnRSZWN0c0Zvcihkb20uZmlyc3RDaGlsZCkgOiBbXTtcbiAgICAgICAgaWYgKCFyZWN0cy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9tLnBhcmVudE5vZGUpO1xuICAgICAgICBsZXQgcmVjdCA9IGZsYXR0ZW5SZWN0KHJlY3RzWzBdLCBzdHlsZS5kaXJlY3Rpb24gIT0gXCJydGxcIik7XG4gICAgICAgIGxldCBsaW5lSGVpZ2h0ID0gcGFyc2VJbnQoc3R5bGUubGluZUhlaWdodCk7XG4gICAgICAgIGlmIChyZWN0LmJvdHRvbSAtIHJlY3QudG9wID4gbGluZUhlaWdodCAqIDEuNSlcbiAgICAgICAgICAgIHJldHVybiB7IGxlZnQ6IHJlY3QubGVmdCwgcmlnaHQ6IHJlY3QucmlnaHQsIHRvcDogcmVjdC50b3AsIGJvdHRvbTogcmVjdC50b3AgKyBsaW5lSGVpZ2h0IH07XG4gICAgICAgIHJldHVybiByZWN0O1xuICAgIH1cbiAgICBpZ25vcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG59XG4vKipcbkV4dGVuc2lvbiB0aGF0IGVuYWJsZXMgYSBwbGFjZWhvbGRlclx1MjAxNGEgcGllY2Ugb2YgZXhhbXBsZSBjb250ZW50XG50byBzaG93IHdoZW4gdGhlIGVkaXRvciBpcyBlbXB0eS5cbiovXG5mdW5jdGlvbiBwbGFjZWhvbGRlcihjb250ZW50KSB7XG4gICAgbGV0IHBsdWdpbiA9IFZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICAgICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSBjb250ZW50XG4gICAgICAgICAgICAgICAgPyBEZWNvcmF0aW9uLnNldChbRGVjb3JhdGlvbi53aWRnZXQoeyB3aWRnZXQ6IG5ldyBQbGFjZWhvbGRlcihjb250ZW50KSwgc2lkZTogMSB9KS5yYW5nZSgwKV0pXG4gICAgICAgICAgICAgICAgOiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0IGRlY29yYXRpb25zKCkgeyByZXR1cm4gdGhpcy52aWV3LnN0YXRlLmRvYy5sZW5ndGggPyBEZWNvcmF0aW9uLm5vbmUgOiB0aGlzLnBsYWNlaG9sZGVyOyB9XG4gICAgfSwgeyBkZWNvcmF0aW9uczogdiA9PiB2LmRlY29yYXRpb25zIH0pO1xuICAgIHJldHVybiB0eXBlb2YgY29udGVudCA9PSBcInN0cmluZ1wiID8gW1xuICAgICAgICBwbHVnaW4sIEVkaXRvclZpZXcuY29udGVudEF0dHJpYnV0ZXMub2YoeyBcImFyaWEtcGxhY2Vob2xkZXJcIjogY29udGVudCB9KVxuICAgIF0gOiBwbHVnaW47XG59XG5cbi8vIERvbid0IGNvbXB1dGUgcHJlY2lzZSBjb2x1bW4gcG9zaXRpb25zIGZvciBsaW5lIG9mZnNldHMgYWJvdmUgdGhpc1xuLy8gKHNpbmNlIGl0IGNvdWxkIGdldCBleHBlbnNpdmUpLiBBc3N1bWUgb2Zmc2V0PT1jb2x1bW4gZm9yIHRoZW0uXG5jb25zdCBNYXhPZmYgPSAyMDAwO1xuZnVuY3Rpb24gcmVjdGFuZ2xlRm9yKHN0YXRlLCBhLCBiKSB7XG4gICAgbGV0IHN0YXJ0TGluZSA9IE1hdGgubWluKGEubGluZSwgYi5saW5lKSwgZW5kTGluZSA9IE1hdGgubWF4KGEubGluZSwgYi5saW5lKTtcbiAgICBsZXQgcmFuZ2VzID0gW107XG4gICAgaWYgKGEub2ZmID4gTWF4T2ZmIHx8IGIub2ZmID4gTWF4T2ZmIHx8IGEuY29sIDwgMCB8fCBiLmNvbCA8IDApIHtcbiAgICAgICAgbGV0IHN0YXJ0T2ZmID0gTWF0aC5taW4oYS5vZmYsIGIub2ZmKSwgZW5kT2ZmID0gTWF0aC5tYXgoYS5vZmYsIGIub2ZmKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0TGluZTsgaSA8PSBlbmRMaW5lOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmUoaSk7XG4gICAgICAgICAgICBpZiAobGluZS5sZW5ndGggPD0gZW5kT2ZmKVxuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKEVkaXRvclNlbGVjdGlvbi5yYW5nZShsaW5lLmZyb20gKyBzdGFydE9mZiwgbGluZS50byArIGVuZE9mZikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgc3RhcnRDb2wgPSBNYXRoLm1pbihhLmNvbCwgYi5jb2wpLCBlbmRDb2wgPSBNYXRoLm1heChhLmNvbCwgYi5jb2wpO1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRMaW5lOyBpIDw9IGVuZExpbmU7IGkrKykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBzdGF0ZS5kb2MubGluZShpKTtcbiAgICAgICAgICAgIGxldCBzdGFydCA9IGZpbmRDb2x1bW4obGluZS50ZXh0LCBzdGFydENvbCwgc3RhdGUudGFiU2l6ZSwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2goRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihsaW5lLnRvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgZW5kID0gZmluZENvbHVtbihsaW5lLnRleHQsIGVuZENvbCwgc3RhdGUudGFiU2l6ZSk7XG4gICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2goRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGxpbmUuZnJvbSArIHN0YXJ0LCBsaW5lLmZyb20gKyBlbmQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmFuZ2VzO1xufVxuZnVuY3Rpb24gYWJzb2x1dGVDb2x1bW4odmlldywgeCkge1xuICAgIGxldCByZWYgPSB2aWV3LmNvb3Jkc0F0UG9zKHZpZXcudmlld3BvcnQuZnJvbSk7XG4gICAgcmV0dXJuIHJlZiA/IE1hdGgucm91bmQoTWF0aC5hYnMoKHJlZi5sZWZ0IC0geCkgLyB2aWV3LmRlZmF1bHRDaGFyYWN0ZXJXaWR0aCkpIDogLTE7XG59XG5mdW5jdGlvbiBnZXRQb3ModmlldywgZXZlbnQpIHtcbiAgICBsZXQgb2Zmc2V0ID0gdmlldy5wb3NBdENvb3Jkcyh7IHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfSwgZmFsc2UpO1xuICAgIGxldCBsaW5lID0gdmlldy5zdGF0ZS5kb2MubGluZUF0KG9mZnNldCksIG9mZiA9IG9mZnNldCAtIGxpbmUuZnJvbTtcbiAgICBsZXQgY29sID0gb2ZmID4gTWF4T2ZmID8gLTFcbiAgICAgICAgOiBvZmYgPT0gbGluZS5sZW5ndGggPyBhYnNvbHV0ZUNvbHVtbih2aWV3LCBldmVudC5jbGllbnRYKVxuICAgICAgICAgICAgOiBjb3VudENvbHVtbihsaW5lLnRleHQsIHZpZXcuc3RhdGUudGFiU2l6ZSwgb2Zmc2V0IC0gbGluZS5mcm9tKTtcbiAgICByZXR1cm4geyBsaW5lOiBsaW5lLm51bWJlciwgY29sLCBvZmYgfTtcbn1cbmZ1bmN0aW9uIHJlY3RhbmdsZVNlbGVjdGlvblN0eWxlKHZpZXcsIGV2ZW50KSB7XG4gICAgbGV0IHN0YXJ0ID0gZ2V0UG9zKHZpZXcsIGV2ZW50KSwgc3RhcnRTZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbjtcbiAgICBpZiAoIXN0YXJ0KVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4ge1xuICAgICAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3U3RhcnQgPSB1cGRhdGUuY2hhbmdlcy5tYXBQb3ModXBkYXRlLnN0YXJ0U3RhdGUuZG9jLmxpbmUoc3RhcnQubGluZSkuZnJvbSk7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0xpbmUgPSB1cGRhdGUuc3RhdGUuZG9jLmxpbmVBdChuZXdTdGFydCk7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSB7IGxpbmU6IG5ld0xpbmUubnVtYmVyLCBjb2w6IHN0YXJ0LmNvbCwgb2ZmOiBNYXRoLm1pbihzdGFydC5vZmYsIG5ld0xpbmUubGVuZ3RoKSB9O1xuICAgICAgICAgICAgICAgIHN0YXJ0U2VsID0gc3RhcnRTZWwubWFwKHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZ2V0KGV2ZW50LCBfZXh0ZW5kLCBtdWx0aXBsZSkge1xuICAgICAgICAgICAgbGV0IGN1ciA9IGdldFBvcyh2aWV3LCBldmVudCk7XG4gICAgICAgICAgICBpZiAoIWN1cilcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhcnRTZWw7XG4gICAgICAgICAgICBsZXQgcmFuZ2VzID0gcmVjdGFuZ2xlRm9yKHZpZXcuc3RhdGUsIHN0YXJ0LCBjdXIpO1xuICAgICAgICAgICAgaWYgKCFyYW5nZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFydFNlbDtcbiAgICAgICAgICAgIGlmIChtdWx0aXBsZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShyYW5nZXMuY29uY2F0KHN0YXJ0U2VsLnJhbmdlcykpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHJhbmdlcyk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuLyoqXG5DcmVhdGUgYW4gZXh0ZW5zaW9uIHRoYXQgZW5hYmxlcyByZWN0YW5ndWxhciBzZWxlY3Rpb25zLiBCeVxuZGVmYXVsdCwgaXQgd2lsbCByZWFjdCB0byBsZWZ0IG1vdXNlIGRyYWcgd2l0aCB0aGUgQWx0IGtleSBoZWxkXG5kb3duLiBXaGVuIHN1Y2ggYSBzZWxlY3Rpb24gb2NjdXJzLCB0aGUgdGV4dCB3aXRoaW4gdGhlIHJlY3RhbmdsZVxudGhhdCB3YXMgZHJhZ2dlZCBvdmVyIHdpbGwgYmUgc2VsZWN0ZWQsIGFzIG9uZSBzZWxlY3Rpb25cbltyYW5nZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TZWxlY3Rpb25SYW5nZSkgcGVyIGxpbmUuXG4qL1xuZnVuY3Rpb24gcmVjdGFuZ3VsYXJTZWxlY3Rpb24ob3B0aW9ucykge1xuICAgIGxldCBmaWx0ZXIgPSAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmV2ZW50RmlsdGVyKSB8fCAoZSA9PiBlLmFsdEtleSAmJiBlLmJ1dHRvbiA9PSAwKTtcbiAgICByZXR1cm4gRWRpdG9yVmlldy5tb3VzZVNlbGVjdGlvblN0eWxlLm9mKCh2aWV3LCBldmVudCkgPT4gZmlsdGVyKGV2ZW50KSA/IHJlY3RhbmdsZVNlbGVjdGlvblN0eWxlKHZpZXcsIGV2ZW50KSA6IG51bGwpO1xufVxuY29uc3Qga2V5cyA9IHtcbiAgICBBbHQ6IFsxOCwgZSA9PiAhIWUuYWx0S2V5XSxcbiAgICBDb250cm9sOiBbMTcsIGUgPT4gISFlLmN0cmxLZXldLFxuICAgIFNoaWZ0OiBbMTYsIGUgPT4gISFlLnNoaWZ0S2V5XSxcbiAgICBNZXRhOiBbOTEsIGUgPT4gISFlLm1ldGFLZXldXG59O1xuY29uc3Qgc2hvd0Nyb3NzaGFpciA9IHsgc3R5bGU6IFwiY3Vyc29yOiBjcm9zc2hhaXJcIiB9O1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IHR1cm5zIHRoZSBwb2ludGVyIGN1cnNvciBpbnRvIGFcbmNyb3NzaGFpciB3aGVuIGEgZ2l2ZW4gbW9kaWZpZXIga2V5LCBkZWZhdWx0aW5nIHRvIEFsdCwgaXMgaGVsZFxuZG93bi4gQ2FuIHNlcnZlIGFzIGEgdmlzdWFsIGhpbnQgdGhhdCByZWN0YW5ndWxhciBzZWxlY3Rpb24gaXNcbmdvaW5nIHRvIGhhcHBlbiB3aGVuIHBhaXJlZCB3aXRoXG5bYHJlY3Rhbmd1bGFyU2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LnJlY3Rhbmd1bGFyU2VsZWN0aW9uKS5cbiovXG5mdW5jdGlvbiBjcm9zc2hhaXJDdXJzb3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IFtjb2RlLCBnZXR0ZXJdID0ga2V5c1tvcHRpb25zLmtleSB8fCBcIkFsdFwiXTtcbiAgICBsZXQgcGx1Z2luID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgICAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICAgICAgdGhpcy5pc0Rvd24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBzZXQoaXNEb3duKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rvd24gIT0gaXNEb3duKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0Rvd24gPSBpc0Rvd247XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnVwZGF0ZShbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGV2ZW50T2JzZXJ2ZXJzOiB7XG4gICAgICAgICAgICBrZXlkb3duKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldChlLmtleUNvZGUgPT0gY29kZSB8fCBnZXR0ZXIoZSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGtleXVwKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IGNvZGUgfHwgIWdldHRlcihlKSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXQoZmFsc2UpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vdXNlbW92ZShlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoZ2V0dGVyKGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBbXG4gICAgICAgIHBsdWdpbixcbiAgICAgICAgRWRpdG9yVmlldy5jb250ZW50QXR0cmlidXRlcy5vZih2aWV3ID0+IHsgdmFyIF9hOyByZXR1cm4gKChfYSA9IHZpZXcucGx1Z2luKHBsdWdpbikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0Rvd24pID8gc2hvd0Nyb3NzaGFpciA6IG51bGw7IH0pXG4gICAgXTtcbn1cblxuY29uc3QgT3V0c2lkZSA9IFwiLTEwMDAwcHhcIjtcbmNsYXNzIFRvb2x0aXBWaWV3TWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IodmlldywgZmFjZXQsIGNyZWF0ZVRvb2x0aXBWaWV3LCByZW1vdmVUb29sdGlwVmlldykge1xuICAgICAgICB0aGlzLmZhY2V0ID0gZmFjZXQ7XG4gICAgICAgIHRoaXMuY3JlYXRlVG9vbHRpcFZpZXcgPSBjcmVhdGVUb29sdGlwVmlldztcbiAgICAgICAgdGhpcy5yZW1vdmVUb29sdGlwVmlldyA9IHJlbW92ZVRvb2x0aXBWaWV3O1xuICAgICAgICB0aGlzLmlucHV0ID0gdmlldy5zdGF0ZS5mYWNldChmYWNldCk7XG4gICAgICAgIHRoaXMudG9vbHRpcHMgPSB0aGlzLmlucHV0LmZpbHRlcih0ID0+IHQpO1xuICAgICAgICBsZXQgcHJldiA9IG51bGw7XG4gICAgICAgIHRoaXMudG9vbHRpcFZpZXdzID0gdGhpcy50b29sdGlwcy5tYXAodCA9PiBwcmV2ID0gY3JlYXRlVG9vbHRpcFZpZXcodCwgcHJldikpO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlLCBhYm92ZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBpbnB1dCA9IHVwZGF0ZS5zdGF0ZS5mYWNldCh0aGlzLmZhY2V0KTtcbiAgICAgICAgbGV0IHRvb2x0aXBzID0gaW5wdXQuZmlsdGVyKHggPT4geCk7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gdGhpcy5pbnB1dCkge1xuICAgICAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLnRvb2x0aXBWaWV3cylcbiAgICAgICAgICAgICAgICBpZiAodC51cGRhdGUpXG4gICAgICAgICAgICAgICAgICAgIHQudXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRvb2x0aXBWaWV3cyA9IFtdLCBuZXdBYm92ZSA9IGFib3ZlID8gW10gOiBudWxsO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvb2x0aXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdGlwID0gdG9vbHRpcHNbaV0sIGtub3duID0gLTE7XG4gICAgICAgICAgICBpZiAoIXRpcClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50b29sdGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBvdGhlciA9IHRoaXMudG9vbHRpcHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKG90aGVyICYmIG90aGVyLmNyZWF0ZSA9PSB0aXAuY3JlYXRlKVxuICAgICAgICAgICAgICAgICAgICBrbm93biA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoa25vd24gPCAwKSB7XG4gICAgICAgICAgICAgICAgdG9vbHRpcFZpZXdzW2ldID0gdGhpcy5jcmVhdGVUb29sdGlwVmlldyh0aXAsIGkgPyB0b29sdGlwVmlld3NbaSAtIDFdIDogbnVsbCk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0Fib3ZlKVxuICAgICAgICAgICAgICAgICAgICBuZXdBYm92ZVtpXSA9ICEhdGlwLmFib3ZlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHRvb2x0aXBWaWV3ID0gdG9vbHRpcFZpZXdzW2ldID0gdGhpcy50b29sdGlwVmlld3Nba25vd25dO1xuICAgICAgICAgICAgICAgIGlmIChuZXdBYm92ZSlcbiAgICAgICAgICAgICAgICAgICAgbmV3QWJvdmVbaV0gPSBhYm92ZVtrbm93bl07XG4gICAgICAgICAgICAgICAgaWYgKHRvb2x0aXBWaWV3LnVwZGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcFZpZXcudXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLnRvb2x0aXBWaWV3cylcbiAgICAgICAgICAgIGlmICh0b29sdGlwVmlld3MuaW5kZXhPZih0KSA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVRvb2x0aXBWaWV3KHQpO1xuICAgICAgICAgICAgICAgIChfYSA9IHQuZGVzdHJveSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGlmIChhYm92ZSkge1xuICAgICAgICAgICAgbmV3QWJvdmUuZm9yRWFjaCgodmFsLCBpKSA9PiBhYm92ZVtpXSA9IHZhbCk7XG4gICAgICAgICAgICBhYm92ZS5sZW5ndGggPSBuZXdBYm92ZS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgICAgICB0aGlzLnRvb2x0aXBzID0gdG9vbHRpcHM7XG4gICAgICAgIHRoaXMudG9vbHRpcFZpZXdzID0gdG9vbHRpcFZpZXdzO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG4vKipcbkNyZWF0ZXMgYW4gZXh0ZW5zaW9uIHRoYXQgY29uZmlndXJlcyB0b29sdGlwIGJlaGF2aW9yLlxuKi9cbmZ1bmN0aW9uIHRvb2x0aXBzKGNvbmZpZyA9IHt9KSB7XG4gICAgcmV0dXJuIHRvb2x0aXBDb25maWcub2YoY29uZmlnKTtcbn1cbmZ1bmN0aW9uIHdpbmRvd1NwYWNlKHZpZXcpIHtcbiAgICBsZXQgZG9jRWx0ID0gdmlldy5kb20ub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgcmV0dXJuIHsgdG9wOiAwLCBsZWZ0OiAwLCBib3R0b206IGRvY0VsdC5jbGllbnRIZWlnaHQsIHJpZ2h0OiBkb2NFbHQuY2xpZW50V2lkdGggfTtcbn1cbmNvbnN0IHRvb2x0aXBDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lOiB2YWx1ZXMgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgcmV0dXJuICh7XG4gICAgICAgICAgICBwb3NpdGlvbjogYnJvd3Nlci5pb3MgPyBcImFic29sdXRlXCIgOiAoKF9hID0gdmFsdWVzLmZpbmQoY29uZiA9PiBjb25mLnBvc2l0aW9uKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBvc2l0aW9uKSB8fCBcImZpeGVkXCIsXG4gICAgICAgICAgICBwYXJlbnQ6ICgoX2IgPSB2YWx1ZXMuZmluZChjb25mID0+IGNvbmYucGFyZW50KSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnBhcmVudCkgfHwgbnVsbCxcbiAgICAgICAgICAgIHRvb2x0aXBTcGFjZTogKChfYyA9IHZhbHVlcy5maW5kKGNvbmYgPT4gY29uZi50b29sdGlwU3BhY2UpKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MudG9vbHRpcFNwYWNlKSB8fCB3aW5kb3dTcGFjZSxcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5jb25zdCBrbm93bkhlaWdodCA9IC8qQF9fUFVSRV9fKi9uZXcgV2Vha01hcCgpO1xuY29uc3QgdG9vbHRpcFBsdWdpbiA9IC8qQF9fUFVSRV9fKi9WaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLmFib3ZlID0gW107XG4gICAgICAgIHRoaXMuaW5WaWV3ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5tYWRlQWJzb2x1dGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sYXN0VHJhbnNhY3Rpb24gPSAwO1xuICAgICAgICB0aGlzLm1lYXN1cmVUaW1lb3V0ID0gLTE7XG4gICAgICAgIGxldCBjb25maWcgPSB2aWV3LnN0YXRlLmZhY2V0KHRvb2x0aXBDb25maWcpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gY29uZmlnLnBvc2l0aW9uO1xuICAgICAgICB0aGlzLnBhcmVudCA9IGNvbmZpZy5wYXJlbnQ7XG4gICAgICAgIHRoaXMuY2xhc3NlcyA9IHZpZXcudGhlbWVDbGFzc2VzO1xuICAgICAgICB0aGlzLmNyZWF0ZUNvbnRhaW5lcigpO1xuICAgICAgICB0aGlzLm1lYXN1cmVSZXEgPSB7IHJlYWQ6IHRoaXMucmVhZE1lYXN1cmUuYmluZCh0aGlzKSwgd3JpdGU6IHRoaXMud3JpdGVNZWFzdXJlLmJpbmQodGhpcyksIGtleTogdGhpcyB9O1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gdHlwZW9mIFJlc2l6ZU9ic2VydmVyID09IFwiZnVuY3Rpb25cIiA/IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiB0aGlzLm1lYXN1cmVTb29uKCkpIDogbnVsbDtcbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gbmV3IFRvb2x0aXBWaWV3TWFuYWdlcih2aWV3LCBzaG93VG9vbHRpcCwgKHQsIHApID0+IHRoaXMuY3JlYXRlVG9vbHRpcCh0LCBwKSwgdCA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXNpemVPYnNlcnZlcilcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLnVub2JzZXJ2ZSh0LmRvbSk7XG4gICAgICAgICAgICB0LmRvbS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWJvdmUgPSB0aGlzLm1hbmFnZXIudG9vbHRpcHMubWFwKHQgPT4gISF0LmFib3ZlKTtcbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlciA9IHR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlciA9PSBcImZ1bmN0aW9uXCIgPyBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZW50cmllcyA9PiB7XG4gICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSA+IHRoaXMubGFzdFRyYW5zYWN0aW9uIC0gNTAgJiZcbiAgICAgICAgICAgICAgICBlbnRyaWVzLmxlbmd0aCA+IDAgJiYgZW50cmllc1tlbnRyaWVzLmxlbmd0aCAtIDFdLmludGVyc2VjdGlvblJhdGlvIDwgMSlcbiAgICAgICAgICAgICAgICB0aGlzLm1lYXN1cmVTb29uKCk7XG4gICAgICAgIH0sIHsgdGhyZXNob2xkOiBbMV0gfSkgOiBudWxsO1xuICAgICAgICB0aGlzLm9ic2VydmVJbnRlcnNlY3Rpb24oKTtcbiAgICAgICAgdmlldy53aW4uYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm1lYXN1cmVTb29uID0gdGhpcy5tZWFzdXJlU29vbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5tYXliZU1lYXN1cmUoKTtcbiAgICB9XG4gICAgY3JlYXRlQ29udGFpbmVyKCkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gdGhpcy52aWV3LnRoZW1lQ2xhc3NlcztcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy52aWV3LmRvbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvYnNlcnZlSW50ZXJzZWN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcikge1xuICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCB0b29sdGlwIG9mIHRoaXMubWFuYWdlci50b29sdGlwVmlld3MpXG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci5vYnNlcnZlKHRvb2x0aXAuZG9tKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtZWFzdXJlU29vbigpIHtcbiAgICAgICAgaWYgKHRoaXMubWVhc3VyZVRpbWVvdXQgPCAwKVxuICAgICAgICAgICAgdGhpcy5tZWFzdXJlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubWVhc3VyZVRpbWVvdXQgPSAtMTtcbiAgICAgICAgICAgICAgICB0aGlzLm1heWJlTWVhc3VyZSgpO1xuICAgICAgICAgICAgfSwgNTApO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGlmICh1cGRhdGUudHJhbnNhY3Rpb25zLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMubGFzdFRyYW5zYWN0aW9uID0gRGF0ZS5ub3coKTtcbiAgICAgICAgbGV0IHVwZGF0ZWQgPSB0aGlzLm1hbmFnZXIudXBkYXRlKHVwZGF0ZSwgdGhpcy5hYm92ZSk7XG4gICAgICAgIGlmICh1cGRhdGVkKVxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlSW50ZXJzZWN0aW9uKCk7XG4gICAgICAgIGxldCBzaG91bGRNZWFzdXJlID0gdXBkYXRlZCB8fCB1cGRhdGUuZ2VvbWV0cnlDaGFuZ2VkO1xuICAgICAgICBsZXQgbmV3Q29uZmlnID0gdXBkYXRlLnN0YXRlLmZhY2V0KHRvb2x0aXBDb25maWcpO1xuICAgICAgICBpZiAobmV3Q29uZmlnLnBvc2l0aW9uICE9IHRoaXMucG9zaXRpb24gJiYgIXRoaXMubWFkZUFic29sdXRlKSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gbmV3Q29uZmlnLnBvc2l0aW9uO1xuICAgICAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKVxuICAgICAgICAgICAgICAgIHQuZG9tLnN0eWxlLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjtcbiAgICAgICAgICAgIHNob3VsZE1lYXN1cmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdDb25maWcucGFyZW50ICE9IHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQpXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IG5ld0NvbmZpZy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNvbnRhaW5lcigpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHQuZG9tKTtcbiAgICAgICAgICAgIHNob3VsZE1lYXN1cmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucGFyZW50ICYmIHRoaXMudmlldy50aGVtZUNsYXNzZXMgIT0gdGhpcy5jbGFzc2VzKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzZXMgPSB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSB0aGlzLnZpZXcudGhlbWVDbGFzc2VzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRNZWFzdXJlKVxuICAgICAgICAgICAgdGhpcy5tYXliZU1lYXN1cmUoKTtcbiAgICB9XG4gICAgY3JlYXRlVG9vbHRpcCh0b29sdGlwLCBwcmV2KSB7XG4gICAgICAgIGxldCB0b29sdGlwVmlldyA9IHRvb2x0aXAuY3JlYXRlKHRoaXMudmlldyk7XG4gICAgICAgIGxldCBiZWZvcmUgPSBwcmV2ID8gcHJldi5kb20gOiBudWxsO1xuICAgICAgICB0b29sdGlwVmlldy5kb20uY2xhc3NMaXN0LmFkZChcImNtLXRvb2x0aXBcIik7XG4gICAgICAgIGlmICh0b29sdGlwLmFycm93ICYmICF0b29sdGlwVmlldy5kb20ucXVlcnlTZWxlY3RvcihcIi5jbS10b29sdGlwID4gLmNtLXRvb2x0aXAtYXJyb3dcIikpIHtcbiAgICAgICAgICAgIGxldCBhcnJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBhcnJvdy5jbGFzc05hbWUgPSBcImNtLXRvb2x0aXAtYXJyb3dcIjtcbiAgICAgICAgICAgIHRvb2x0aXBWaWV3LmRvbS5hcHBlbmRDaGlsZChhcnJvdyk7XG4gICAgICAgIH1cbiAgICAgICAgdG9vbHRpcFZpZXcuZG9tLnN0eWxlLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjtcbiAgICAgICAgdG9vbHRpcFZpZXcuZG9tLnN0eWxlLnRvcCA9IE91dHNpZGU7XG4gICAgICAgIHRvb2x0aXBWaWV3LmRvbS5zdHlsZS5sZWZ0ID0gXCIwcHhcIjtcbiAgICAgICAgdGhpcy5jb250YWluZXIuaW5zZXJ0QmVmb3JlKHRvb2x0aXBWaWV3LmRvbSwgYmVmb3JlKTtcbiAgICAgICAgaWYgKHRvb2x0aXBWaWV3Lm1vdW50KVxuICAgICAgICAgICAgdG9vbHRpcFZpZXcubW91bnQodGhpcy52aWV3KTtcbiAgICAgICAgaWYgKHRoaXMucmVzaXplT2JzZXJ2ZXIpXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUodG9vbHRpcFZpZXcuZG9tKTtcbiAgICAgICAgcmV0dXJuIHRvb2x0aXBWaWV3O1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgdGhpcy52aWV3Lndpbi5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMubWVhc3VyZVNvb24pO1xuICAgICAgICBmb3IgKGxldCB0b29sdGlwVmlldyBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKSB7XG4gICAgICAgICAgICB0b29sdGlwVmlldy5kb20ucmVtb3ZlKCk7XG4gICAgICAgICAgICAoX2EgPSB0b29sdGlwVmlldy5kZXN0cm95KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbCh0b29sdGlwVmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGFyZW50KVxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlKCk7XG4gICAgICAgIChfYiA9IHRoaXMucmVzaXplT2JzZXJ2ZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5kaXNjb25uZWN0KCk7XG4gICAgICAgIChfYyA9IHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5kaXNjb25uZWN0KCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLm1lYXN1cmVUaW1lb3V0KTtcbiAgICB9XG4gICAgcmVhZE1lYXN1cmUoKSB7XG4gICAgICAgIGxldCBzY2FsZVggPSAxLCBzY2FsZVkgPSAxLCBtYWtlQWJzb2x1dGUgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24gPT0gXCJmaXhlZFwiICYmIHRoaXMubWFuYWdlci50b29sdGlwVmlld3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgeyBkb20gfSA9IHRoaXMubWFuYWdlci50b29sdGlwVmlld3NbMF07XG4gICAgICAgICAgICBpZiAoYnJvd3Nlci5zYWZhcmkpIHtcbiAgICAgICAgICAgICAgICAvLyBTYWZhcmkgYWx3YXlzIHNldHMgb2Zmc2V0UGFyZW50IHRvIG51bGwsIGV2ZW4gaWYgYSBmaXhlZFxuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgaXMgcG9zaXRpb25lZCByZWxhdGl2ZSB0byBhIHRyYW5zZm9ybWVkIHBhcmVudC4gU29cbiAgICAgICAgICAgICAgICAvLyB3ZSB1c2UgdGhpcyBrbHVkZ2UgdG8gdHJ5IGFuZCBkZXRlY3QgdGhpcy5cbiAgICAgICAgICAgICAgICBsZXQgcmVjdCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBtYWtlQWJzb2x1dGUgPSBNYXRoLmFicyhyZWN0LnRvcCArIDEwMDAwKSA+IDEgfHwgTWF0aC5hYnMocmVjdC5sZWZ0KSA+IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBNb3JlIGNvbmZvcm1pbmcgYnJvd3NlcnMgd2lsbCBzZXQgb2Zmc2V0UGFyZW50IHRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIHRyYW5zZm9ybWVkIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgbWFrZUFic29sdXRlID0gISFkb20ub2Zmc2V0UGFyZW50ICYmIGRvbS5vZmZzZXRQYXJlbnQgIT0gdGhpcy5jb250YWluZXIub3duZXJEb2N1bWVudC5ib2R5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYWtlQWJzb2x1dGUgfHwgdGhpcy5wb3NpdGlvbiA9PSBcImFic29sdXRlXCIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIGxldCByZWN0ID0gdGhpcy5wYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlY3Qud2lkdGggJiYgcmVjdC5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVYID0gcmVjdC53aWR0aCAvIHRoaXMucGFyZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBzY2FsZVkgPSByZWN0LmhlaWdodCAvIHRoaXMucGFyZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAoeyBzY2FsZVgsIHNjYWxlWSB9ID0gdGhpcy52aWV3LnZpZXdTdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHZpc2libGUgPSB0aGlzLnZpZXcuc2Nyb2xsRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBtYXJnaW5zID0gZ2V0U2Nyb2xsTWFyZ2lucyh0aGlzLnZpZXcpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmlzaWJsZToge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHZpc2libGUubGVmdCArIG1hcmdpbnMubGVmdCwgdG9wOiB2aXNpYmxlLnRvcCArIG1hcmdpbnMudG9wLFxuICAgICAgICAgICAgICAgIHJpZ2h0OiB2aXNpYmxlLnJpZ2h0IC0gbWFyZ2lucy5yaWdodCwgYm90dG9tOiB2aXNpYmxlLmJvdHRvbSAtIG1hcmdpbnMuYm90dG9tXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFyZW50OiB0aGlzLnBhcmVudCA/IHRoaXMuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogdGhpcy52aWV3LmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgIHBvczogdGhpcy5tYW5hZ2VyLnRvb2x0aXBzLm1hcCgodCwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB0diA9IHRoaXMubWFuYWdlci50b29sdGlwVmlld3NbaV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR2LmdldENvb3JkcyA/IHR2LmdldENvb3Jkcyh0LnBvcykgOiB0aGlzLnZpZXcuY29vcmRzQXRQb3ModC5wb3MpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzaXplOiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzLm1hcCgoeyBkb20gfSkgPT4gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxcbiAgICAgICAgICAgIHNwYWNlOiB0aGlzLnZpZXcuc3RhdGUuZmFjZXQodG9vbHRpcENvbmZpZykudG9vbHRpcFNwYWNlKHRoaXMudmlldyksXG4gICAgICAgICAgICBzY2FsZVgsIHNjYWxlWSwgbWFrZUFic29sdXRlXG4gICAgICAgIH07XG4gICAgfVxuICAgIHdyaXRlTWVhc3VyZShtZWFzdXJlZCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmIChtZWFzdXJlZC5tYWtlQWJzb2x1dGUpIHtcbiAgICAgICAgICAgIHRoaXMubWFkZUFic29sdXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgICAgICBmb3IgKGxldCB0IG9mIHRoaXMubWFuYWdlci50b29sdGlwVmlld3MpXG4gICAgICAgICAgICAgICAgdC5kb20uc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHsgdmlzaWJsZSwgc3BhY2UsIHNjYWxlWCwgc2NhbGVZIH0gPSBtZWFzdXJlZDtcbiAgICAgICAgbGV0IG90aGVycyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWFuYWdlci50b29sdGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHRvb2x0aXAgPSB0aGlzLm1hbmFnZXIudG9vbHRpcHNbaV0sIHRWaWV3ID0gdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3c1tpXSwgeyBkb20gfSA9IHRWaWV3O1xuICAgICAgICAgICAgbGV0IHBvcyA9IG1lYXN1cmVkLnBvc1tpXSwgc2l6ZSA9IG1lYXN1cmVkLnNpemVbaV07XG4gICAgICAgICAgICAvLyBIaWRlIHRvb2x0aXBzIHRoYXQgYXJlIG91dHNpZGUgb2YgdGhlIGVkaXRvci5cbiAgICAgICAgICAgIGlmICghcG9zIHx8IHRvb2x0aXAuY2xpcCAhPT0gZmFsc2UgJiYgKHBvcy5ib3R0b20gPD0gTWF0aC5tYXgodmlzaWJsZS50b3AsIHNwYWNlLnRvcCkgfHxcbiAgICAgICAgICAgICAgICBwb3MudG9wID49IE1hdGgubWluKHZpc2libGUuYm90dG9tLCBzcGFjZS5ib3R0b20pIHx8XG4gICAgICAgICAgICAgICAgcG9zLnJpZ2h0IDwgTWF0aC5tYXgodmlzaWJsZS5sZWZ0LCBzcGFjZS5sZWZ0KSAtIC4xIHx8XG4gICAgICAgICAgICAgICAgcG9zLmxlZnQgPiBNYXRoLm1pbih2aXNpYmxlLnJpZ2h0LCBzcGFjZS5yaWdodCkgKyAuMSkpIHtcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUudG9wID0gT3V0c2lkZTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBhcnJvdyA9IHRvb2x0aXAuYXJyb3cgPyB0Vmlldy5kb20ucXVlcnlTZWxlY3RvcihcIi5jbS10b29sdGlwLWFycm93XCIpIDogbnVsbDtcbiAgICAgICAgICAgIGxldCBhcnJvd0hlaWdodCA9IGFycm93ID8gNyAvKiBBcnJvdy5TaXplICovIDogMDtcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IHNpemUucmlnaHQgLSBzaXplLmxlZnQsIGhlaWdodCA9IChfYSA9IGtub3duSGVpZ2h0LmdldCh0VmlldykpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHNpemUuYm90dG9tIC0gc2l6ZS50b3A7XG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gdFZpZXcub2Zmc2V0IHx8IG5vT2Zmc2V0LCBsdHIgPSB0aGlzLnZpZXcudGV4dERpcmVjdGlvbiA9PSBEaXJlY3Rpb24uTFRSO1xuICAgICAgICAgICAgbGV0IGxlZnQgPSBzaXplLndpZHRoID4gc3BhY2UucmlnaHQgLSBzcGFjZS5sZWZ0XG4gICAgICAgICAgICAgICAgPyAobHRyID8gc3BhY2UubGVmdCA6IHNwYWNlLnJpZ2h0IC0gc2l6ZS53aWR0aClcbiAgICAgICAgICAgICAgICA6IGx0ciA/IE1hdGgubWF4KHNwYWNlLmxlZnQsIE1hdGgubWluKHBvcy5sZWZ0IC0gKGFycm93ID8gMTQgLyogQXJyb3cuT2Zmc2V0ICovIDogMCkgKyBvZmZzZXQueCwgc3BhY2UucmlnaHQgLSB3aWR0aCkpXG4gICAgICAgICAgICAgICAgICAgIDogTWF0aC5taW4oTWF0aC5tYXgoc3BhY2UubGVmdCwgcG9zLmxlZnQgLSB3aWR0aCArIChhcnJvdyA/IDE0IC8qIEFycm93Lk9mZnNldCAqLyA6IDApIC0gb2Zmc2V0LngpLCBzcGFjZS5yaWdodCAtIHdpZHRoKTtcbiAgICAgICAgICAgIGxldCBhYm92ZSA9IHRoaXMuYWJvdmVbaV07XG4gICAgICAgICAgICBpZiAoIXRvb2x0aXAuc3RyaWN0U2lkZSAmJiAoYWJvdmVcbiAgICAgICAgICAgICAgICA/IHBvcy50b3AgLSBoZWlnaHQgLSBhcnJvd0hlaWdodCAtIG9mZnNldC55IDwgc3BhY2UudG9wXG4gICAgICAgICAgICAgICAgOiBwb3MuYm90dG9tICsgaGVpZ2h0ICsgYXJyb3dIZWlnaHQgKyBvZmZzZXQueSA+IHNwYWNlLmJvdHRvbSkgJiZcbiAgICAgICAgICAgICAgICBhYm92ZSA9PSAoc3BhY2UuYm90dG9tIC0gcG9zLmJvdHRvbSA+IHBvcy50b3AgLSBzcGFjZS50b3ApKVxuICAgICAgICAgICAgICAgIGFib3ZlID0gdGhpcy5hYm92ZVtpXSA9ICFhYm92ZTtcbiAgICAgICAgICAgIGxldCBzcGFjZVZlcnQgPSAoYWJvdmUgPyBwb3MudG9wIC0gc3BhY2UudG9wIDogc3BhY2UuYm90dG9tIC0gcG9zLmJvdHRvbSkgLSBhcnJvd0hlaWdodDtcbiAgICAgICAgICAgIGlmIChzcGFjZVZlcnQgPCBoZWlnaHQgJiYgdFZpZXcucmVzaXplICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmIChzcGFjZVZlcnQgPCB0aGlzLnZpZXcuZGVmYXVsdExpbmVIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tLnN0eWxlLnRvcCA9IE91dHNpZGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBrbm93bkhlaWdodC5zZXQodFZpZXcsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLmhlaWdodCA9IChoZWlnaHQgPSBzcGFjZVZlcnQpIC8gc2NhbGVZICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZG9tLnN0eWxlLmhlaWdodCkge1xuICAgICAgICAgICAgICAgIGRvbS5zdHlsZS5oZWlnaHQgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRvcCA9IGFib3ZlID8gcG9zLnRvcCAtIGhlaWdodCAtIGFycm93SGVpZ2h0IC0gb2Zmc2V0LnkgOiBwb3MuYm90dG9tICsgYXJyb3dIZWlnaHQgKyBvZmZzZXQueTtcbiAgICAgICAgICAgIGxldCByaWdodCA9IGxlZnQgKyB3aWR0aDtcbiAgICAgICAgICAgIGlmICh0Vmlldy5vdmVybGFwICE9PSB0cnVlKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IHIgb2Ygb3RoZXJzKVxuICAgICAgICAgICAgICAgICAgICBpZiAoci5sZWZ0IDwgcmlnaHQgJiYgci5yaWdodCA+IGxlZnQgJiYgci50b3AgPCB0b3AgKyBoZWlnaHQgJiYgci5ib3R0b20gPiB0b3ApXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBhYm92ZSA/IHIudG9wIC0gaGVpZ2h0IC0gMiAtIGFycm93SGVpZ2h0IDogci5ib3R0b20gKyBhcnJvd0hlaWdodCArIDI7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3NpdGlvbiA9PSBcImFic29sdXRlXCIpIHtcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUudG9wID0gKHRvcCAtIG1lYXN1cmVkLnBhcmVudC50b3ApIC8gc2NhbGVZICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIHNldExlZnRTdHlsZShkb20sIChsZWZ0IC0gbWVhc3VyZWQucGFyZW50LmxlZnQpIC8gc2NhbGVYKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvbS5zdHlsZS50b3AgPSB0b3AgLyBzY2FsZVkgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgc2V0TGVmdFN0eWxlKGRvbSwgbGVmdCAvIHNjYWxlWCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJyb3cpIHtcbiAgICAgICAgICAgICAgICBsZXQgYXJyb3dMZWZ0ID0gcG9zLmxlZnQgKyAobHRyID8gb2Zmc2V0LnggOiAtb2Zmc2V0LngpIC0gKGxlZnQgKyAxNCAvKiBBcnJvdy5PZmZzZXQgKi8gLSA3IC8qIEFycm93LlNpemUgKi8pO1xuICAgICAgICAgICAgICAgIGFycm93LnN0eWxlLmxlZnQgPSBhcnJvd0xlZnQgLyBzY2FsZVggKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodFZpZXcub3ZlcmxhcCAhPT0gdHJ1ZSlcbiAgICAgICAgICAgICAgICBvdGhlcnMucHVzaCh7IGxlZnQsIHRvcCwgcmlnaHQsIGJvdHRvbTogdG9wICsgaGVpZ2h0IH0pO1xuICAgICAgICAgICAgZG9tLmNsYXNzTGlzdC50b2dnbGUoXCJjbS10b29sdGlwLWFib3ZlXCIsIGFib3ZlKTtcbiAgICAgICAgICAgIGRvbS5jbGFzc0xpc3QudG9nZ2xlKFwiY20tdG9vbHRpcC1iZWxvd1wiLCAhYWJvdmUpO1xuICAgICAgICAgICAgaWYgKHRWaWV3LnBvc2l0aW9uZWQpXG4gICAgICAgICAgICAgICAgdFZpZXcucG9zaXRpb25lZChtZWFzdXJlZC5zcGFjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWF5YmVNZWFzdXJlKCkge1xuICAgICAgICBpZiAodGhpcy5tYW5hZ2VyLnRvb2x0aXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudmlldy5pblZpZXcpXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnJlcXVlc3RNZWFzdXJlKHRoaXMubWVhc3VyZVJlcSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pblZpZXcgIT0gdGhpcy52aWV3LmluVmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5WaWV3ID0gdGhpcy52aWV3LmluVmlldztcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaW5WaWV3KVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0diBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHYuZG9tLnN0eWxlLnRvcCA9IE91dHNpZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59LCB7XG4gICAgZXZlbnRPYnNlcnZlcnM6IHtcbiAgICAgICAgc2Nyb2xsKCkgeyB0aGlzLm1heWJlTWVhc3VyZSgpOyB9XG4gICAgfVxufSk7XG5mdW5jdGlvbiBzZXRMZWZ0U3R5bGUoZWx0LCB2YWx1ZSkge1xuICAgIGxldCBjdXJyZW50ID0gcGFyc2VJbnQoZWx0LnN0eWxlLmxlZnQsIDEwKTtcbiAgICBpZiAoaXNOYU4oY3VycmVudCkgfHwgTWF0aC5hYnModmFsdWUgLSBjdXJyZW50KSA+IDEpXG4gICAgICAgIGVsdC5zdHlsZS5sZWZ0ID0gdmFsdWUgKyBcInB4XCI7XG59XG5jb25zdCBiYXNlVGhlbWUgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5iYXNlVGhlbWUoe1xuICAgIFwiLmNtLXRvb2x0aXBcIjoge1xuICAgICAgICB6SW5kZXg6IDUwMCxcbiAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIlxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLXRvb2x0aXBcIjoge1xuICAgICAgICBib3JkZXI6IFwiMXB4IHNvbGlkICNiYmJcIixcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNmNWY1ZjVcIlxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLXRvb2x0aXAtc2VjdGlvbjpub3QoOmZpcnN0LWNoaWxkKVwiOiB7XG4gICAgICAgIGJvcmRlclRvcDogXCIxcHggc29saWQgI2JiYlwiLFxuICAgIH0sXG4gICAgXCImZGFyayAuY20tdG9vbHRpcFwiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjMzMzMzM4XCIsXG4gICAgICAgIGNvbG9yOiBcIndoaXRlXCJcbiAgICB9LFxuICAgIFwiLmNtLXRvb2x0aXAtYXJyb3dcIjoge1xuICAgICAgICBoZWlnaHQ6IGAkezcgLyogQXJyb3cuU2l6ZSAqL31weGAsXG4gICAgICAgIHdpZHRoOiBgJHs3IC8qIEFycm93LlNpemUgKi8gKiAyfXB4YCxcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgekluZGV4OiAtMSxcbiAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgICAgIFwiJjpiZWZvcmUsICY6YWZ0ZXJcIjoge1xuICAgICAgICAgICAgY29udGVudDogXCInJ1wiLFxuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgYm9yZGVyTGVmdDogYCR7NyAvKiBBcnJvdy5TaXplICovfXB4IHNvbGlkIHRyYW5zcGFyZW50YCxcbiAgICAgICAgICAgIGJvcmRlclJpZ2h0OiBgJHs3IC8qIEFycm93LlNpemUgKi99cHggc29saWQgdHJhbnNwYXJlbnRgLFxuICAgICAgICB9LFxuICAgICAgICBcIi5jbS10b29sdGlwLWFib3ZlICZcIjoge1xuICAgICAgICAgICAgYm90dG9tOiBgLSR7NyAvKiBBcnJvdy5TaXplICovfXB4YCxcbiAgICAgICAgICAgIFwiJjpiZWZvcmVcIjoge1xuICAgICAgICAgICAgICAgIGJvcmRlclRvcDogYCR7NyAvKiBBcnJvdy5TaXplICovfXB4IHNvbGlkICNiYmJgLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiJjphZnRlclwiOiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyVG9wOiBgJHs3IC8qIEFycm93LlNpemUgKi99cHggc29saWQgI2Y1ZjVmNWAsXG4gICAgICAgICAgICAgICAgYm90dG9tOiBcIjFweFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiLmNtLXRvb2x0aXAtYmVsb3cgJlwiOiB7XG4gICAgICAgICAgICB0b3A6IGAtJHs3IC8qIEFycm93LlNpemUgKi99cHhgLFxuICAgICAgICAgICAgXCImOmJlZm9yZVwiOiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tOiBgJHs3IC8qIEFycm93LlNpemUgKi99cHggc29saWQgI2JiYmAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCImOmFmdGVyXCI6IHtcbiAgICAgICAgICAgICAgICBib3JkZXJCb3R0b206IGAkezcgLyogQXJyb3cuU2l6ZSAqL31weCBzb2xpZCAjZjVmNWY1YCxcbiAgICAgICAgICAgICAgICB0b3A6IFwiMXB4XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLXRvb2x0aXAgLmNtLXRvb2x0aXAtYXJyb3dcIjoge1xuICAgICAgICBcIiY6YmVmb3JlXCI6IHtcbiAgICAgICAgICAgIGJvcmRlclRvcENvbG9yOiBcIiMzMzMzMzhcIixcbiAgICAgICAgICAgIGJvcmRlckJvdHRvbUNvbG9yOiBcIiMzMzMzMzhcIlxuICAgICAgICB9LFxuICAgICAgICBcIiY6YWZ0ZXJcIjoge1xuICAgICAgICAgICAgYm9yZGVyVG9wQ29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgICAgIGJvcmRlckJvdHRvbUNvbG9yOiBcInRyYW5zcGFyZW50XCJcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuY29uc3Qgbm9PZmZzZXQgPSB7IHg6IDAsIHk6IDAgfTtcbi8qKlxuRmFjZXQgdG8gd2hpY2ggYW4gZXh0ZW5zaW9uIGNhbiBhZGQgYSB2YWx1ZSB0byBzaG93IGEgdG9vbHRpcC5cbiovXG5jb25zdCBzaG93VG9vbHRpcCA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGVuYWJsZXM6IFt0b29sdGlwUGx1Z2luLCBiYXNlVGhlbWVdXG59KTtcbmNvbnN0IHNob3dIb3ZlclRvb2x0aXAgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lOiBpbnB1dHMgPT4gaW5wdXRzLnJlZHVjZSgoYSwgaSkgPT4gYS5jb25jYXQoaSksIFtdKVxufSk7XG5jbGFzcyBIb3ZlclRvb2x0aXBIb3N0IHtcbiAgICAvLyBOZWVkcyB0byBiZSBzdGF0aWMgc28gdGhhdCBob3N0IHRvb2x0aXAgaW5zdGFuY2VzIGFsd2F5cyBtYXRjaFxuICAgIHN0YXRpYyBjcmVhdGUodmlldykge1xuICAgICAgICByZXR1cm4gbmV3IEhvdmVyVG9vbHRpcEhvc3Qodmlldyk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5kb20uY2xhc3NMaXN0LmFkZChcImNtLXRvb2x0aXAtaG92ZXJcIik7XG4gICAgICAgIHRoaXMubWFuYWdlciA9IG5ldyBUb29sdGlwVmlld01hbmFnZXIodmlldywgc2hvd0hvdmVyVG9vbHRpcCwgKHQsIHApID0+IHRoaXMuY3JlYXRlSG9zdGVkVmlldyh0LCBwKSwgdCA9PiB0LmRvbS5yZW1vdmUoKSk7XG4gICAgfVxuICAgIGNyZWF0ZUhvc3RlZFZpZXcodG9vbHRpcCwgcHJldikge1xuICAgICAgICBsZXQgaG9zdGVkVmlldyA9IHRvb2x0aXAuY3JlYXRlKHRoaXMudmlldyk7XG4gICAgICAgIGhvc3RlZFZpZXcuZG9tLmNsYXNzTGlzdC5hZGQoXCJjbS10b29sdGlwLXNlY3Rpb25cIik7XG4gICAgICAgIHRoaXMuZG9tLmluc2VydEJlZm9yZShob3N0ZWRWaWV3LmRvbSwgcHJldiA/IHByZXYuZG9tLm5leHRTaWJsaW5nIDogdGhpcy5kb20uZmlyc3RDaGlsZCk7XG4gICAgICAgIGlmICh0aGlzLm1vdW50ZWQgJiYgaG9zdGVkVmlldy5tb3VudClcbiAgICAgICAgICAgIGhvc3RlZFZpZXcubW91bnQodGhpcy52aWV3KTtcbiAgICAgICAgcmV0dXJuIGhvc3RlZFZpZXc7XG4gICAgfVxuICAgIG1vdW50KHZpZXcpIHtcbiAgICAgICAgZm9yIChsZXQgaG9zdGVkVmlldyBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKSB7XG4gICAgICAgICAgICBpZiAoaG9zdGVkVmlldy5tb3VudClcbiAgICAgICAgICAgICAgICBob3N0ZWRWaWV3Lm1vdW50KHZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7XG4gICAgfVxuICAgIHBvc2l0aW9uZWQoc3BhY2UpIHtcbiAgICAgICAgZm9yIChsZXQgaG9zdGVkVmlldyBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKSB7XG4gICAgICAgICAgICBpZiAoaG9zdGVkVmlldy5wb3NpdGlvbmVkKVxuICAgICAgICAgICAgICAgIGhvc3RlZFZpZXcucG9zaXRpb25lZChzcGFjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICB0aGlzLm1hbmFnZXIudXBkYXRlKHVwZGF0ZSk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKVxuICAgICAgICAgICAgKF9hID0gdC5kZXN0cm95KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbCh0KTtcbiAgICB9XG4gICAgcGFzc1Byb3AobmFtZSkge1xuICAgICAgICBsZXQgdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAobGV0IHZpZXcgb2YgdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cykge1xuICAgICAgICAgICAgbGV0IGdpdmVuID0gdmlld1tuYW1lXTtcbiAgICAgICAgICAgIGlmIChnaXZlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZ2l2ZW47XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgIT09IGdpdmVuKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IG9mZnNldCgpIHsgcmV0dXJuIHRoaXMucGFzc1Byb3AoXCJvZmZzZXRcIik7IH1cbiAgICBnZXQgZ2V0Q29vcmRzKCkgeyByZXR1cm4gdGhpcy5wYXNzUHJvcChcImdldENvb3Jkc1wiKTsgfVxuICAgIGdldCBvdmVybGFwKCkgeyByZXR1cm4gdGhpcy5wYXNzUHJvcChcIm92ZXJsYXBcIik7IH1cbiAgICBnZXQgcmVzaXplKCkgeyByZXR1cm4gdGhpcy5wYXNzUHJvcChcInJlc2l6ZVwiKTsgfVxufVxuY29uc3Qgc2hvd0hvdmVyVG9vbHRpcEhvc3QgPSAvKkBfX1BVUkVfXyovc2hvd1Rvb2x0aXAuY29tcHV0ZShbc2hvd0hvdmVyVG9vbHRpcF0sIHN0YXRlID0+IHtcbiAgICBsZXQgdG9vbHRpcHMgPSBzdGF0ZS5mYWNldChzaG93SG92ZXJUb29sdGlwKTtcbiAgICBpZiAodG9vbHRpcHMubGVuZ3RoID09PSAwKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4ge1xuICAgICAgICBwb3M6IE1hdGgubWluKC4uLnRvb2x0aXBzLm1hcCh0ID0+IHQucG9zKSksXG4gICAgICAgIGVuZDogTWF0aC5tYXgoLi4udG9vbHRpcHMubWFwKHQgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSB0LmVuZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdC5wb3M7IH0pKSxcbiAgICAgICAgY3JlYXRlOiBIb3ZlclRvb2x0aXBIb3N0LmNyZWF0ZSxcbiAgICAgICAgYWJvdmU6IHRvb2x0aXBzWzBdLmFib3ZlLFxuICAgICAgICBhcnJvdzogdG9vbHRpcHMuc29tZSh0ID0+IHQuYXJyb3cpLFxuICAgIH07XG59KTtcbmNsYXNzIEhvdmVyUGx1Z2luIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3LCBzb3VyY2UsIGZpZWxkLCBzZXRIb3ZlciwgaG92ZXJUaW1lKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIHRoaXMuc2V0SG92ZXIgPSBzZXRIb3ZlcjtcbiAgICAgICAgdGhpcy5ob3ZlclRpbWUgPSBob3ZlclRpbWU7XG4gICAgICAgIHRoaXMuaG92ZXJUaW1lb3V0ID0gLTE7XG4gICAgICAgIHRoaXMucmVzdGFydFRpbWVvdXQgPSAtMTtcbiAgICAgICAgdGhpcy5wZW5kaW5nID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0TW92ZSA9IHsgeDogMCwgeTogMCwgdGFyZ2V0OiB2aWV3LmRvbSwgdGltZTogMCB9O1xuICAgICAgICB0aGlzLmNoZWNrSG92ZXIgPSB0aGlzLmNoZWNrSG92ZXIuYmluZCh0aGlzKTtcbiAgICAgICAgdmlldy5kb20uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgdGhpcy5tb3VzZWxlYXZlID0gdGhpcy5tb3VzZWxlYXZlLmJpbmQodGhpcykpO1xuICAgICAgICB2aWV3LmRvbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMubW91c2Vtb3ZlID0gdGhpcy5tb3VzZW1vdmUuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZykge1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nID0gbnVsbDtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc3RhcnRUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMucmVzdGFydFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc3RhcnRIb3ZlcigpLCAyMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGFjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5zdGF0ZS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICB9XG4gICAgY2hlY2tIb3ZlcigpIHtcbiAgICAgICAgdGhpcy5ob3ZlclRpbWVvdXQgPSAtMTtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGhvdmVyZWQgPSBEYXRlLm5vdygpIC0gdGhpcy5sYXN0TW92ZS50aW1lO1xuICAgICAgICBpZiAoaG92ZXJlZCA8IHRoaXMuaG92ZXJUaW1lKVxuICAgICAgICAgICAgdGhpcy5ob3ZlclRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuY2hlY2tIb3ZlciwgdGhpcy5ob3ZlclRpbWUgLSBob3ZlcmVkKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5zdGFydEhvdmVyKCk7XG4gICAgfVxuICAgIHN0YXJ0SG92ZXIoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc3RhcnRUaW1lb3V0KTtcbiAgICAgICAgbGV0IHsgdmlldywgbGFzdE1vdmUgfSA9IHRoaXM7XG4gICAgICAgIGxldCB0aWxlID0gdmlldy5kb2NWaWV3LnRpbGUubmVhcmVzdChsYXN0TW92ZS50YXJnZXQpO1xuICAgICAgICBpZiAoIXRpbGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBwb3MsIHNpZGUgPSAxO1xuICAgICAgICBpZiAodGlsZS5pc1dpZGdldCgpKSB7XG4gICAgICAgICAgICBwb3MgPSB0aWxlLnBvc0F0U3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwb3MgPSB2aWV3LnBvc0F0Q29vcmRzKGxhc3RNb3ZlKTtcbiAgICAgICAgICAgIGlmIChwb3MgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBsZXQgcG9zQ29vcmRzID0gdmlldy5jb29yZHNBdFBvcyhwb3MpO1xuICAgICAgICAgICAgaWYgKCFwb3NDb29yZHMgfHxcbiAgICAgICAgICAgICAgICBsYXN0TW92ZS55IDwgcG9zQ29vcmRzLnRvcCB8fCBsYXN0TW92ZS55ID4gcG9zQ29vcmRzLmJvdHRvbSB8fFxuICAgICAgICAgICAgICAgIGxhc3RNb3ZlLnggPCBwb3NDb29yZHMubGVmdCAtIHZpZXcuZGVmYXVsdENoYXJhY3RlcldpZHRoIHx8XG4gICAgICAgICAgICAgICAgbGFzdE1vdmUueCA+IHBvc0Nvb3Jkcy5yaWdodCArIHZpZXcuZGVmYXVsdENoYXJhY3RlcldpZHRoKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCBiaWRpID0gdmlldy5iaWRpU3BhbnModmlldy5zdGF0ZS5kb2MubGluZUF0KHBvcykpLmZpbmQocyA9PiBzLmZyb20gPD0gcG9zICYmIHMudG8gPj0gcG9zKTtcbiAgICAgICAgICAgIGxldCBydGwgPSBiaWRpICYmIGJpZGkuZGlyID09IERpcmVjdGlvbi5SVEwgPyAtMSA6IDE7XG4gICAgICAgICAgICBzaWRlID0gKGxhc3RNb3ZlLnggPCBwb3NDb29yZHMubGVmdCA/IC1ydGwgOiBydGwpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBvcGVuID0gdGhpcy5zb3VyY2UodmlldywgcG9zLCBzaWRlKTtcbiAgICAgICAgaWYgKG9wZW4gPT09IG51bGwgfHwgb3BlbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3Blbi50aGVuKSB7XG4gICAgICAgICAgICBsZXQgcGVuZGluZyA9IHRoaXMucGVuZGluZyA9IHsgcG9zIH07XG4gICAgICAgICAgICBvcGVuLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nID09IHBlbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiAhKEFycmF5LmlzQXJyYXkocmVzdWx0KSAmJiAhcmVzdWx0Lmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogdGhpcy5zZXRIb3Zlci5vZihBcnJheS5pc0FycmF5KHJlc3VsdCkgPyByZXN1bHQgOiBbcmVzdWx0XSkgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZSA9PiBsb2dFeGNlcHRpb24odmlldy5zdGF0ZSwgZSwgXCJob3ZlciB0b29sdGlwXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVuICYmICEoQXJyYXkuaXNBcnJheShvcGVuKSAmJiAhb3Blbi5sZW5ndGgpKSB7XG4gICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogdGhpcy5zZXRIb3Zlci5vZihBcnJheS5pc0FycmF5KG9wZW4pID8gb3BlbiA6IFtvcGVuXSkgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHRvb2x0aXAoKSB7XG4gICAgICAgIGxldCBwbHVnaW4gPSB0aGlzLnZpZXcucGx1Z2luKHRvb2x0aXBQbHVnaW4pO1xuICAgICAgICBsZXQgaW5kZXggPSBwbHVnaW4gPyBwbHVnaW4ubWFuYWdlci50b29sdGlwcy5maW5kSW5kZXgodCA9PiB0LmNyZWF0ZSA9PSBIb3ZlclRvb2x0aXBIb3N0LmNyZWF0ZSkgOiAtMTtcbiAgICAgICAgcmV0dXJuIGluZGV4ID4gLTEgPyBwbHVnaW4ubWFuYWdlci50b29sdGlwVmlld3NbaW5kZXhdIDogbnVsbDtcbiAgICB9XG4gICAgbW91c2Vtb3ZlKGV2ZW50KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRoaXMubGFzdE1vdmUgPSB7IHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFksIHRhcmdldDogZXZlbnQudGFyZ2V0LCB0aW1lOiBEYXRlLm5vdygpIH07XG4gICAgICAgIGlmICh0aGlzLmhvdmVyVGltZW91dCA8IDApXG4gICAgICAgICAgICB0aGlzLmhvdmVyVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5jaGVja0hvdmVyLCB0aGlzLmhvdmVyVGltZSk7XG4gICAgICAgIGxldCB7IGFjdGl2ZSwgdG9vbHRpcCB9ID0gdGhpcztcbiAgICAgICAgaWYgKGFjdGl2ZS5sZW5ndGggJiYgdG9vbHRpcCAmJiAhaXNJblRvb2x0aXAodG9vbHRpcC5kb20sIGV2ZW50KSB8fCB0aGlzLnBlbmRpbmcpIHtcbiAgICAgICAgICAgIGxldCB7IHBvcyB9ID0gYWN0aXZlWzBdIHx8IHRoaXMucGVuZGluZywgZW5kID0gKF9iID0gKF9hID0gYWN0aXZlWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW5kKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBwb3M7XG4gICAgICAgICAgICBpZiAoKHBvcyA9PSBlbmQgPyB0aGlzLnZpZXcucG9zQXRDb29yZHModGhpcy5sYXN0TW92ZSkgIT0gcG9zXG4gICAgICAgICAgICAgICAgOiAhaXNPdmVyUmFuZ2UodGhpcy52aWV3LCBwb3MsIGVuZCwgZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogdGhpcy5zZXRIb3Zlci5vZihbXSkgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBtb3VzZWxlYXZlKGV2ZW50KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhvdmVyVGltZW91dCk7XG4gICAgICAgIHRoaXMuaG92ZXJUaW1lb3V0ID0gLTE7XG4gICAgICAgIGxldCB7IGFjdGl2ZSB9ID0gdGhpcztcbiAgICAgICAgaWYgKGFjdGl2ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCB7IHRvb2x0aXAgfSA9IHRoaXM7XG4gICAgICAgICAgICBsZXQgaW5Ub29sdGlwID0gdG9vbHRpcCAmJiB0b29sdGlwLmRvbS5jb250YWlucyhldmVudC5yZWxhdGVkVGFyZ2V0KTtcbiAgICAgICAgICAgIGlmICghaW5Ub29sdGlwKVxuICAgICAgICAgICAgICAgIHRoaXMudmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHRoaXMuc2V0SG92ZXIub2YoW10pIH0pO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hUb29sdGlwTGVhdmUodG9vbHRpcC5kb20pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdhdGNoVG9vbHRpcExlYXZlKHRvb2x0aXApIHtcbiAgICAgICAgbGV0IHdhdGNoID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0b29sdGlwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIHdhdGNoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZS5sZW5ndGggJiYgIXRoaXMudmlldy5kb20uY29udGFpbnMoZXZlbnQucmVsYXRlZFRhcmdldCkpXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogdGhpcy5zZXRIb3Zlci5vZihbXSkgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRvb2x0aXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgd2F0Y2gpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ob3ZlclRpbWVvdXQpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXN0YXJ0VGltZW91dCk7XG4gICAgICAgIHRoaXMudmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgdGhpcy5tb3VzZWxlYXZlKTtcbiAgICAgICAgdGhpcy52aWV3LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMubW91c2Vtb3ZlKTtcbiAgICB9XG59XG5jb25zdCB0b29sdGlwTWFyZ2luID0gNDtcbmZ1bmN0aW9uIGlzSW5Ub29sdGlwKHRvb2x0aXAsIGV2ZW50KSB7XG4gICAgbGV0IHsgbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tIH0gPSB0b29sdGlwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBhcnJvdztcbiAgICBpZiAoYXJyb3cgPSB0b29sdGlwLnF1ZXJ5U2VsZWN0b3IoXCIuY20tdG9vbHRpcC1hcnJvd1wiKSkge1xuICAgICAgICBsZXQgYXJyb3dSZWN0ID0gYXJyb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRvcCA9IE1hdGgubWluKGFycm93UmVjdC50b3AsIHRvcCk7XG4gICAgICAgIGJvdHRvbSA9IE1hdGgubWF4KGFycm93UmVjdC5ib3R0b20sIGJvdHRvbSk7XG4gICAgfVxuICAgIHJldHVybiBldmVudC5jbGllbnRYID49IGxlZnQgLSB0b29sdGlwTWFyZ2luICYmIGV2ZW50LmNsaWVudFggPD0gcmlnaHQgKyB0b29sdGlwTWFyZ2luICYmXG4gICAgICAgIGV2ZW50LmNsaWVudFkgPj0gdG9wIC0gdG9vbHRpcE1hcmdpbiAmJiBldmVudC5jbGllbnRZIDw9IGJvdHRvbSArIHRvb2x0aXBNYXJnaW47XG59XG5mdW5jdGlvbiBpc092ZXJSYW5nZSh2aWV3LCBmcm9tLCB0bywgeCwgeSwgbWFyZ2luKSB7XG4gICAgbGV0IHJlY3QgPSB2aWV3LnNjcm9sbERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgZG9jQm90dG9tID0gdmlldy5kb2N1bWVudFRvcCArIHZpZXcuZG9jdW1lbnRQYWRkaW5nLnRvcCArIHZpZXcuY29udGVudEhlaWdodDtcbiAgICBpZiAocmVjdC5sZWZ0ID4geCB8fCByZWN0LnJpZ2h0IDwgeCB8fCByZWN0LnRvcCA+IHkgfHwgTWF0aC5taW4ocmVjdC5ib3R0b20sIGRvY0JvdHRvbSkgPCB5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHBvcyA9IHZpZXcucG9zQXRDb29yZHMoeyB4LCB5IH0sIGZhbHNlKTtcbiAgICByZXR1cm4gcG9zID49IGZyb20gJiYgcG9zIDw9IHRvO1xufVxuLyoqXG5TZXQgdXAgYSBob3ZlciB0b29sdGlwLCB3aGljaCBzaG93cyB1cCB3aGVuIHRoZSBwb2ludGVyIGhvdmVyc1xub3ZlciByYW5nZXMgb2YgdGV4dC4gVGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBtb3VzZSBob3ZlcnNcbm92ZXIgdGhlIGRvY3VtZW50IHRleHQuIEl0IHNob3VsZCwgaWYgdGhlcmUgaXMgYSB0b29sdGlwXG5hc3NvY2lhdGVkIHdpdGggcG9zaXRpb24gYHBvc2AsIHJldHVybiB0aGUgdG9vbHRpcCBkZXNjcmlwdGlvblxuKGVpdGhlciBkaXJlY3RseSBvciBpbiBhIHByb21pc2UpLiBUaGUgYHNpZGVgIGFyZ3VtZW50IGluZGljYXRlc1xub24gd2hpY2ggc2lkZSBvZiB0aGUgcG9zaXRpb24gdGhlIHBvaW50ZXIgaXNcdTIwMTRpdCB3aWxsIGJlIC0xIGlmIHRoZVxucG9pbnRlciBpcyBiZWZvcmUgdGhlIHBvc2l0aW9uLCAxIGlmIGFmdGVyIHRoZSBwb3NpdGlvbi5cblxuTm90ZSB0aGF0IGFsbCBob3ZlciB0b29sdGlwcyBhcmUgaG9zdGVkIHdpdGhpbiBhIHNpbmdsZSB0b29sdGlwXG5jb250YWluZXIgZWxlbWVudC4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgdG9vbHRpcHMgb3ZlciB0aGUgc2FtZVxucmFuZ2UgdG8gYmUgXCJtZXJnZWRcIiB0b2dldGhlciB3aXRob3V0IG92ZXJsYXBwaW5nLlxuXG5UaGUgcmV0dXJuIHZhbHVlIGlzIGEgdmFsaWQgW2VkaXRvciBleHRlbnNpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRXh0ZW5zaW9uKVxuYnV0IGFsc28gcHJvdmlkZXMgYW4gYGFjdGl2ZWAgcHJvcGVydHkgaG9sZGluZyBhIHN0YXRlIGZpZWxkIHRoYXRcbmNhbiBiZSB1c2VkIHRvIHJlYWQgdGhlIGN1cnJlbnRseSBhY3RpdmUgdG9vbHRpcHMgcHJvZHVjZWQgYnkgdGhpc1xuZXh0ZW5zaW9uLlxuKi9cbmZ1bmN0aW9uIGhvdmVyVG9vbHRpcChzb3VyY2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBzZXRIb3ZlciA9IFN0YXRlRWZmZWN0LmRlZmluZSgpO1xuICAgIGxldCBob3ZlclN0YXRlID0gU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgICAgICBjcmVhdGUoKSB7IHJldHVybiBbXTsgfSxcbiAgICAgICAgdXBkYXRlKHZhbHVlLCB0cikge1xuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmhpZGVPbkNoYW5nZSAmJiAodHIuZG9jQ2hhbmdlZCB8fCB0ci5zZWxlY3Rpb24pKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFtdO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuaGlkZU9uKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmZpbHRlcih2ID0+ICFvcHRpb25zLmhpZGVPbih0ciwgdikpO1xuICAgICAgICAgICAgICAgIGlmICh0ci5kb2NDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXBwZWQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdG9vbHRpcCBvZiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1BvcyA9IHRyLmNoYW5nZXMubWFwUG9zKHRvb2x0aXAucG9zLCAtMSwgTWFwTW9kZS5UcmFja0RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3UG9zICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29weSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgdG9vbHRpcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weS5wb3MgPSBuZXdQb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvcHkuZW5kICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuZW5kID0gdHIuY2hhbmdlcy5tYXBQb3MoY29weS5lbmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZC5wdXNoKGNvcHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbWFwcGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGVmZmVjdCBvZiB0ci5lZmZlY3RzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhzZXRIb3ZlcikpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZWZmZWN0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoY2xvc2VIb3ZlclRvb2x0aXBFZmZlY3QpKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBwcm92aWRlOiBmID0+IHNob3dIb3ZlclRvb2x0aXAuZnJvbShmKVxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFjdGl2ZTogaG92ZXJTdGF0ZSxcbiAgICAgICAgZXh0ZW5zaW9uOiBbXG4gICAgICAgICAgICBob3ZlclN0YXRlLFxuICAgICAgICAgICAgVmlld1BsdWdpbi5kZWZpbmUodmlldyA9PiBuZXcgSG92ZXJQbHVnaW4odmlldywgc291cmNlLCBob3ZlclN0YXRlLCBzZXRIb3Zlciwgb3B0aW9ucy5ob3ZlclRpbWUgfHwgMzAwIC8qIEhvdmVyLlRpbWUgKi8pKSxcbiAgICAgICAgICAgIHNob3dIb3ZlclRvb2x0aXBIb3N0XG4gICAgICAgIF1cbiAgICB9O1xufVxuLyoqXG5HZXQgdGhlIGFjdGl2ZSB0b29sdGlwIHZpZXcgZm9yIGEgZ2l2ZW4gdG9vbHRpcCwgaWYgYXZhaWxhYmxlLlxuKi9cbmZ1bmN0aW9uIGdldFRvb2x0aXAodmlldywgdG9vbHRpcCkge1xuICAgIGxldCBwbHVnaW4gPSB2aWV3LnBsdWdpbih0b29sdGlwUGx1Z2luKTtcbiAgICBpZiAoIXBsdWdpbilcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGZvdW5kID0gcGx1Z2luLm1hbmFnZXIudG9vbHRpcHMuaW5kZXhPZih0b29sdGlwKTtcbiAgICByZXR1cm4gZm91bmQgPCAwID8gbnVsbCA6IHBsdWdpbi5tYW5hZ2VyLnRvb2x0aXBWaWV3c1tmb3VuZF07XG59XG4vKipcblJldHVybnMgdHJ1ZSBpZiBhbnkgaG92ZXIgdG9vbHRpcHMgYXJlIGN1cnJlbnRseSBhY3RpdmUuXG4qL1xuZnVuY3Rpb24gaGFzSG92ZXJUb29sdGlwcyhzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5mYWNldChzaG93SG92ZXJUb29sdGlwKS5zb21lKHggPT4geCk7XG59XG5jb25zdCBjbG9zZUhvdmVyVG9vbHRpcEVmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbi8qKlxuVHJhbnNhY3Rpb24gZWZmZWN0IHRoYXQgY2xvc2VzIGFsbCBob3ZlciB0b29sdGlwcy5cbiovXG5jb25zdCBjbG9zZUhvdmVyVG9vbHRpcHMgPSAvKkBfX1BVUkVfXyovY2xvc2VIb3ZlclRvb2x0aXBFZmZlY3Qub2YobnVsbCk7XG4vKipcblRlbGwgdGhlIHRvb2x0aXAgZXh0ZW5zaW9uIHRvIHJlY29tcHV0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGFjdGl2ZVxudG9vbHRpcHMuIFRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuIHNvbWV0aGluZyBoYXBwZW5zIChzdWNoIGFzIGFcbnJlLXBvc2l0aW9uaW5nIG9yIENTUyBjaGFuZ2UgYWZmZWN0aW5nIHRoZSBlZGl0b3IpIHRoYXQgY291bGRcbmludmFsaWRhdGUgdGhlIGV4aXN0aW5nIHRvb2x0aXAgcG9zaXRpb25zLlxuKi9cbmZ1bmN0aW9uIHJlcG9zaXRpb25Ub29sdGlwcyh2aWV3KSB7XG4gICAgbGV0IHBsdWdpbiA9IHZpZXcucGx1Z2luKHRvb2x0aXBQbHVnaW4pO1xuICAgIGlmIChwbHVnaW4pXG4gICAgICAgIHBsdWdpbi5tYXliZU1lYXN1cmUoKTtcbn1cblxuY29uc3QgcGFuZWxDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgbGV0IHRvcENvbnRhaW5lciwgYm90dG9tQ29udGFpbmVyO1xuICAgICAgICBmb3IgKGxldCBjIG9mIGNvbmZpZ3MpIHtcbiAgICAgICAgICAgIHRvcENvbnRhaW5lciA9IHRvcENvbnRhaW5lciB8fCBjLnRvcENvbnRhaW5lcjtcbiAgICAgICAgICAgIGJvdHRvbUNvbnRhaW5lciA9IGJvdHRvbUNvbnRhaW5lciB8fCBjLmJvdHRvbUNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB0b3BDb250YWluZXIsIGJvdHRvbUNvbnRhaW5lciB9O1xuICAgIH1cbn0pO1xuLyoqXG5Db25maWd1cmVzIHRoZSBwYW5lbC1tYW5hZ2luZyBleHRlbnNpb24uXG4qL1xuZnVuY3Rpb24gcGFuZWxzKGNvbmZpZykge1xuICAgIHJldHVybiBjb25maWcgPyBbcGFuZWxDb25maWcub2YoY29uZmlnKV0gOiBbXTtcbn1cbi8qKlxuR2V0IHRoZSBhY3RpdmUgcGFuZWwgY3JlYXRlZCBieSB0aGUgZ2l2ZW4gY29uc3RydWN0b3IsIGlmIGFueS5cblRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuIHlvdSBuZWVkIGFjY2VzcyB0byB5b3VyIHBhbmVscycgRE9NXG5zdHJ1Y3R1cmUuXG4qL1xuZnVuY3Rpb24gZ2V0UGFuZWwodmlldywgcGFuZWwpIHtcbiAgICBsZXQgcGx1Z2luID0gdmlldy5wbHVnaW4ocGFuZWxQbHVnaW4pO1xuICAgIGxldCBpbmRleCA9IHBsdWdpbiA/IHBsdWdpbi5zcGVjcy5pbmRleE9mKHBhbmVsKSA6IC0xO1xuICAgIHJldHVybiBpbmRleCA+IC0xID8gcGx1Z2luLnBhbmVsc1tpbmRleF0gOiBudWxsO1xufVxuY29uc3QgcGFuZWxQbHVnaW4gPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy5pbnB1dCA9IHZpZXcuc3RhdGUuZmFjZXQoc2hvd1BhbmVsKTtcbiAgICAgICAgdGhpcy5zcGVjcyA9IHRoaXMuaW5wdXQuZmlsdGVyKHMgPT4gcyk7XG4gICAgICAgIHRoaXMucGFuZWxzID0gdGhpcy5zcGVjcy5tYXAoc3BlYyA9PiBzcGVjKHZpZXcpKTtcbiAgICAgICAgbGV0IGNvbmYgPSB2aWV3LnN0YXRlLmZhY2V0KHBhbmVsQ29uZmlnKTtcbiAgICAgICAgdGhpcy50b3AgPSBuZXcgUGFuZWxHcm91cCh2aWV3LCB0cnVlLCBjb25mLnRvcENvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuYm90dG9tID0gbmV3IFBhbmVsR3JvdXAodmlldywgZmFsc2UsIGNvbmYuYm90dG9tQ29udGFpbmVyKTtcbiAgICAgICAgdGhpcy50b3Auc3luYyh0aGlzLnBhbmVscy5maWx0ZXIocCA9PiBwLnRvcCkpO1xuICAgICAgICB0aGlzLmJvdHRvbS5zeW5jKHRoaXMucGFuZWxzLmZpbHRlcihwID0+ICFwLnRvcCkpO1xuICAgICAgICBmb3IgKGxldCBwIG9mIHRoaXMucGFuZWxzKSB7XG4gICAgICAgICAgICBwLmRvbS5jbGFzc0xpc3QuYWRkKFwiY20tcGFuZWxcIik7XG4gICAgICAgICAgICBpZiAocC5tb3VudClcbiAgICAgICAgICAgICAgICBwLm1vdW50KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgY29uZiA9IHVwZGF0ZS5zdGF0ZS5mYWNldChwYW5lbENvbmZpZyk7XG4gICAgICAgIGlmICh0aGlzLnRvcC5jb250YWluZXIgIT0gY29uZi50b3BDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMudG9wLnN5bmMoW10pO1xuICAgICAgICAgICAgdGhpcy50b3AgPSBuZXcgUGFuZWxHcm91cCh1cGRhdGUudmlldywgdHJ1ZSwgY29uZi50b3BDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJvdHRvbS5jb250YWluZXIgIT0gY29uZi5ib3R0b21Db250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYm90dG9tLnN5bmMoW10pO1xuICAgICAgICAgICAgdGhpcy5ib3R0b20gPSBuZXcgUGFuZWxHcm91cCh1cGRhdGUudmlldywgZmFsc2UsIGNvbmYuYm90dG9tQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvcC5zeW5jQ2xhc3NlcygpO1xuICAgICAgICB0aGlzLmJvdHRvbS5zeW5jQ2xhc3NlcygpO1xuICAgICAgICBsZXQgaW5wdXQgPSB1cGRhdGUuc3RhdGUuZmFjZXQoc2hvd1BhbmVsKTtcbiAgICAgICAgaWYgKGlucHV0ICE9IHRoaXMuaW5wdXQpIHtcbiAgICAgICAgICAgIGxldCBzcGVjcyA9IGlucHV0LmZpbHRlcih4ID0+IHgpO1xuICAgICAgICAgICAgbGV0IHBhbmVscyA9IFtdLCB0b3AgPSBbXSwgYm90dG9tID0gW10sIG1vdW50ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBzcGVjIG9mIHNwZWNzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGtub3duID0gdGhpcy5zcGVjcy5pbmRleE9mKHNwZWMpLCBwYW5lbDtcbiAgICAgICAgICAgICAgICBpZiAoa25vd24gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsID0gc3BlYyh1cGRhdGUudmlldyk7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50LnB1c2gocGFuZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWwgPSB0aGlzLnBhbmVsc1trbm93bl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYW5lbC51cGRhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFuZWxzLnB1c2gocGFuZWwpO1xuICAgICAgICAgICAgICAgIChwYW5lbC50b3AgPyB0b3AgOiBib3R0b20pLnB1c2gocGFuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zcGVjcyA9IHNwZWNzO1xuICAgICAgICAgICAgdGhpcy5wYW5lbHMgPSBwYW5lbHM7XG4gICAgICAgICAgICB0aGlzLnRvcC5zeW5jKHRvcCk7XG4gICAgICAgICAgICB0aGlzLmJvdHRvbS5zeW5jKGJvdHRvbSk7XG4gICAgICAgICAgICBmb3IgKGxldCBwIG9mIG1vdW50KSB7XG4gICAgICAgICAgICAgICAgcC5kb20uY2xhc3NMaXN0LmFkZChcImNtLXBhbmVsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChwLm1vdW50KVxuICAgICAgICAgICAgICAgICAgICBwLm1vdW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBwIG9mIHRoaXMucGFuZWxzKVxuICAgICAgICAgICAgICAgIGlmIChwLnVwZGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgcC51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnRvcC5zeW5jKFtdKTtcbiAgICAgICAgdGhpcy5ib3R0b20uc3luYyhbXSk7XG4gICAgfVxufSwge1xuICAgIHByb3ZpZGU6IHBsdWdpbiA9PiBFZGl0b3JWaWV3LnNjcm9sbE1hcmdpbnMub2YodmlldyA9PiB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHZpZXcucGx1Z2luKHBsdWdpbik7XG4gICAgICAgIHJldHVybiB2YWx1ZSAmJiB7IHRvcDogdmFsdWUudG9wLnNjcm9sbE1hcmdpbigpLCBib3R0b206IHZhbHVlLmJvdHRvbS5zY3JvbGxNYXJnaW4oKSB9O1xuICAgIH0pXG59KTtcbmNsYXNzIFBhbmVsR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIHRvcCwgY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMudG9wID0gdG9wO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5kb20gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY2xhc3NlcyA9IFwiXCI7XG4gICAgICAgIHRoaXMucGFuZWxzID0gW107XG4gICAgICAgIHRoaXMuc3luY0NsYXNzZXMoKTtcbiAgICB9XG4gICAgc3luYyhwYW5lbHMpIHtcbiAgICAgICAgZm9yIChsZXQgcCBvZiB0aGlzLnBhbmVscylcbiAgICAgICAgICAgIGlmIChwLmRlc3Ryb3kgJiYgcGFuZWxzLmluZGV4T2YocCkgPCAwKVxuICAgICAgICAgICAgICAgIHAuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnBhbmVscyA9IHBhbmVscztcbiAgICAgICAgdGhpcy5zeW5jRE9NKCk7XG4gICAgfVxuICAgIHN5bmNET00oKSB7XG4gICAgICAgIGlmICh0aGlzLnBhbmVscy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZG9tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb20ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kb20gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmRvbSkge1xuICAgICAgICAgICAgdGhpcy5kb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdGhpcy5kb20uY2xhc3NOYW1lID0gdGhpcy50b3AgPyBcImNtLXBhbmVscyBjbS1wYW5lbHMtdG9wXCIgOiBcImNtLXBhbmVscyBjbS1wYW5lbHMtYm90dG9tXCI7XG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZVt0aGlzLnRvcCA/IFwidG9wXCIgOiBcImJvdHRvbVwiXSA9IFwiMFwiO1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMuY29udGFpbmVyIHx8IHRoaXMudmlldy5kb207XG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZG9tLCB0aGlzLnRvcCA/IHBhcmVudC5maXJzdENoaWxkIDogbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN1ckRPTSA9IHRoaXMuZG9tLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGZvciAobGV0IHBhbmVsIG9mIHRoaXMucGFuZWxzKSB7XG4gICAgICAgICAgICBpZiAocGFuZWwuZG9tLnBhcmVudE5vZGUgPT0gdGhpcy5kb20pIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoY3VyRE9NICE9IHBhbmVsLmRvbSlcbiAgICAgICAgICAgICAgICAgICAgY3VyRE9NID0gcm0oY3VyRE9NKTtcbiAgICAgICAgICAgICAgICBjdXJET00gPSBjdXJET00ubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5pbnNlcnRCZWZvcmUocGFuZWwuZG9tLCBjdXJET00pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChjdXJET00pXG4gICAgICAgICAgICBjdXJET00gPSBybShjdXJET00pO1xuICAgIH1cbiAgICBzY3JvbGxNYXJnaW4oKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5kb20gfHwgdGhpcy5jb250YWluZXIgPyAwXG4gICAgICAgICAgICA6IE1hdGgubWF4KDAsIHRoaXMudG9wID9cbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gLSBNYXRoLm1heCgwLCB0aGlzLnZpZXcuc2Nyb2xsRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCkgOlxuICAgICAgICAgICAgICAgIE1hdGgubWluKGlubmVySGVpZ2h0LCB0aGlzLnZpZXcuc2Nyb2xsRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSkgLSB0aGlzLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApO1xuICAgIH1cbiAgICBzeW5jQ2xhc3NlcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lciB8fCB0aGlzLmNsYXNzZXMgPT0gdGhpcy52aWV3LnRoZW1lQ2xhc3NlcylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yIChsZXQgY2xzIG9mIHRoaXMuY2xhc3Nlcy5zcGxpdChcIiBcIikpXG4gICAgICAgICAgICBpZiAoY2xzKVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgICAgICAgZm9yIChsZXQgY2xzIG9mICh0aGlzLmNsYXNzZXMgPSB0aGlzLnZpZXcudGhlbWVDbGFzc2VzKS5zcGxpdChcIiBcIikpXG4gICAgICAgICAgICBpZiAoY2xzKVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY2xzKTtcbiAgICB9XG59XG5mdW5jdGlvbiBybShub2RlKSB7XG4gICAgbGV0IG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgcmV0dXJuIG5leHQ7XG59XG4vKipcbk9wZW5pbmcgYSBwYW5lbCBpcyBkb25lIGJ5IHByb3ZpZGluZyBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGZvclxudGhlIHBhbmVsIHRocm91Z2ggdGhpcyBmYWNldC4gKFRoZSBwYW5lbCBpcyBjbG9zZWQgYWdhaW4gd2hlbiBpdHNcbmNvbnN0cnVjdG9yIGlzIG5vIGxvbmdlciBwcm92aWRlZC4pIFZhbHVlcyBvZiBgbnVsbGAgYXJlIGlnbm9yZWQuXG4qL1xuY29uc3Qgc2hvd1BhbmVsID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgZW5hYmxlczogcGFuZWxQbHVnaW5cbn0pO1xuXG4vKipcblNob3cgYSBwYW5lbCBhYm92ZSBvciBiZWxvdyB0aGUgZWRpdG9yIHRvIHNob3cgdGhlIHVzZXIgYSBtZXNzYWdlXG5vciBwcm9tcHQgdGhlbSBmb3IgaW5wdXQuIFJldHVybnMgYW4gZWZmZWN0IHRoYXQgY2FuIGJlIGRpc3BhdGNoZWRcbnRvIGNsb3NlIHRoZSBkaWFsb2csIGFuZCBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBkaWFsb2dcbmlzIGNsb3NlZCBvciBhIGZvcm0gaW5zaWRlIG9mIGl0IGlzIHN1Ym1pdHRlZC5cblxuWW91IGFyZSBlbmNvdXJhZ2VkLCBpZiB5b3VyIGhhbmRsaW5nIG9mIHRoZSByZXN1bHQgb2YgdGhlIHByb21pc2VcbmRpc3BhdGNoZXMgYSB0cmFuc2FjdGlvbiwgdG8gaW5jbHVkZSB0aGUgYGNsb3NlYCBlZmZlY3QgaW4gaXQuIElmXG55b3UgZG9uJ3QsIHRoaXMgZnVuY3Rpb24gd2lsbCBhdXRvbWF0aWNhbGx5IGRpc3BhdGNoIGEgc2VwYXJhdGVcbnRyYW5zYWN0aW9uIHJpZ2h0IGFmdGVyLlxuKi9cbmZ1bmN0aW9uIHNob3dEaWFsb2codmlldywgY29uZmlnKSB7XG4gICAgbGV0IHJlc29sdmU7XG4gICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyID0+IHJlc29sdmUgPSByKTtcbiAgICBsZXQgcGFuZWxDdG9yID0gKHZpZXcpID0+IGNyZWF0ZURpYWxvZyh2aWV3LCBjb25maWcsIHJlc29sdmUpO1xuICAgIGlmICh2aWV3LnN0YXRlLmZpZWxkKGRpYWxvZ0ZpZWxkLCBmYWxzZSkpIHtcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IG9wZW5EaWFsb2dFZmZlY3Qub2YocGFuZWxDdG9yKSB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBTdGF0ZUVmZmVjdC5hcHBlbmRDb25maWcub2YoZGlhbG9nRmllbGQuaW5pdCgoKSA9PiBbcGFuZWxDdG9yXSkpIH0pO1xuICAgIH1cbiAgICBsZXQgY2xvc2UgPSBjbG9zZURpYWxvZ0VmZmVjdC5vZihwYW5lbEN0b3IpO1xuICAgIHJldHVybiB7IGNsb3NlLCByZXN1bHQ6IHByb21pc2UudGhlbihmb3JtID0+IHtcbiAgICAgICAgICAgIGxldCBxdWV1ZSA9IHZpZXcud2luLnF1ZXVlTWljcm90YXNrIHx8ICgoZikgPT4gdmlldy53aW4uc2V0VGltZW91dChmLCAxMCkpO1xuICAgICAgICAgICAgcXVldWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2aWV3LnN0YXRlLmZpZWxkKGRpYWxvZ0ZpZWxkKS5pbmRleE9mKHBhbmVsQ3RvcikgPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IGNsb3NlIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZm9ybTtcbiAgICAgICAgfSkgfTtcbn1cbi8qKlxuRmluZCB0aGUgW2BQYW5lbGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5QYW5lbCkgZm9yIGFuIG9wZW4gZGlhbG9nLCB1c2luZyBhIGNsYXNzXG5uYW1lIGFzIGlkZW50aWZpZXIuXG4qL1xuZnVuY3Rpb24gZ2V0RGlhbG9nKHZpZXcsIGNsYXNzTmFtZSkge1xuICAgIGxldCBkaWFsb2dzID0gdmlldy5zdGF0ZS5maWVsZChkaWFsb2dGaWVsZCwgZmFsc2UpIHx8IFtdO1xuICAgIGZvciAobGV0IG9wZW4gb2YgZGlhbG9ncykge1xuICAgICAgICBsZXQgcGFuZWwgPSBnZXRQYW5lbCh2aWV3LCBvcGVuKTtcbiAgICAgICAgaWYgKHBhbmVsICYmIHBhbmVsLmRvbS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSlcbiAgICAgICAgICAgIHJldHVybiBwYW5lbDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5jb25zdCBkaWFsb2dGaWVsZCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUZpZWxkLmRlZmluZSh7XG4gICAgY3JlYXRlKCkgeyByZXR1cm4gW107IH0sXG4gICAgdXBkYXRlKGRpYWxvZ3MsIHRyKSB7XG4gICAgICAgIGZvciAobGV0IGUgb2YgdHIuZWZmZWN0cykge1xuICAgICAgICAgICAgaWYgKGUuaXMob3BlbkRpYWxvZ0VmZmVjdCkpXG4gICAgICAgICAgICAgICAgZGlhbG9ncyA9IFtlLnZhbHVlXS5jb25jYXQoZGlhbG9ncyk7XG4gICAgICAgICAgICBlbHNlIGlmIChlLmlzKGNsb3NlRGlhbG9nRWZmZWN0KSlcbiAgICAgICAgICAgICAgICBkaWFsb2dzID0gZGlhbG9ncy5maWx0ZXIoZCA9PiBkICE9IGUudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaWFsb2dzO1xuICAgIH0sXG4gICAgcHJvdmlkZTogZiA9PiBzaG93UGFuZWwuY29tcHV0ZU4oW2ZdLCBzdGF0ZSA9PiBzdGF0ZS5maWVsZChmKSlcbn0pO1xuY29uc3Qgb3BlbkRpYWxvZ0VmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbmNvbnN0IGNsb3NlRGlhbG9nRWZmZWN0ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuZnVuY3Rpb24gY3JlYXRlRGlhbG9nKHZpZXcsIGNvbmZpZywgcmVzdWx0KSB7XG4gICAgbGV0IGNvbnRlbnQgPSBjb25maWcuY29udGVudCA/IGNvbmZpZy5jb250ZW50KHZpZXcsICgpID0+IGRvbmUobnVsbCkpIDogbnVsbDtcbiAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgY29udGVudCA9IGVsdChcImZvcm1cIik7XG4gICAgICAgIGlmIChjb25maWcuaW5wdXQpIHtcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IGVsdChcImlucHV0XCIsIGNvbmZpZy5pbnB1dCk7XG4gICAgICAgICAgICBpZiAoL14odGV4dHxwYXNzd29yZHxudW1iZXJ8ZW1haWx8dGVsfHVybCkkLy50ZXN0KGlucHV0LnR5cGUpKVxuICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoXCJjbS10ZXh0ZmllbGRcIik7XG4gICAgICAgICAgICBpZiAoIWlucHV0Lm5hbWUpXG4gICAgICAgICAgICAgICAgaW5wdXQubmFtZSA9IFwiaW5wdXRcIjtcbiAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwibGFiZWxcIiwgKGNvbmZpZy5sYWJlbCB8fCBcIlwiKSArIFwiOiBcIiwgaW5wdXQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY29uZmlnLmxhYmVsIHx8IFwiXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiIFwiKSk7XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwiYnV0dG9uXCIsIHsgY2xhc3M6IFwiY20tYnV0dG9uXCIsIHR5cGU6IFwic3VibWl0XCIgfSwgY29uZmlnLnN1Ym1pdExhYmVsIHx8IFwiT0tcIikpO1xuICAgIH1cbiAgICBsZXQgZm9ybXMgPSBjb250ZW50Lm5vZGVOYW1lID09IFwiRk9STVwiID8gW2NvbnRlbnRdIDogY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKFwiZm9ybVwiKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBmb3JtID0gZm9ybXNbaV07XG4gICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAyNykgeyAvLyBFc2NhcGVcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGRvbmUobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09IDEzKSB7IC8vIEVudGVyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBkb25lKGZvcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGRvbmUoZm9ybSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZXQgcGFuZWwgPSBlbHQoXCJkaXZcIiwgY29udGVudCwgZWx0KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgb25jbGljazogKCkgPT4gZG9uZShudWxsKSxcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHZpZXcuc3RhdGUucGhyYXNlKFwiY2xvc2VcIiksXG4gICAgICAgIGNsYXNzOiBcImNtLWRpYWxvZy1jbG9zZVwiLFxuICAgICAgICB0eXBlOiBcImJ1dHRvblwiXG4gICAgfSwgW1wiXHUwMEQ3XCJdKSk7XG4gICAgaWYgKGNvbmZpZy5jbGFzcylcbiAgICAgICAgcGFuZWwuY2xhc3NOYW1lID0gY29uZmlnLmNsYXNzO1xuICAgIHBhbmVsLmNsYXNzTGlzdC5hZGQoXCJjbS1kaWFsb2dcIik7XG4gICAgZnVuY3Rpb24gZG9uZShmb3JtKSB7XG4gICAgICAgIGlmIChwYW5lbC5jb250YWlucyhwYW5lbC5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKVxuICAgICAgICAgICAgdmlldy5mb2N1cygpO1xuICAgICAgICByZXN1bHQoZm9ybSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGRvbTogcGFuZWwsXG4gICAgICAgIHRvcDogY29uZmlnLnRvcCxcbiAgICAgICAgbW91bnQ6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChjb25maWcuZm9jdXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZm9jdXM7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcuZm9jdXMgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICAgICAgZm9jdXMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLmZvY3VzKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzID0gY29udGVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikgfHwgY29udGVudC5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xuICAgICAgICAgICAgICAgIGlmIChmb2N1cyAmJiBcInNlbGVjdFwiIGluIGZvY3VzKVxuICAgICAgICAgICAgICAgICAgICBmb2N1cy5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChmb2N1cyAmJiBcImZvY3VzXCIgaW4gZm9jdXMpXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKipcbkEgZ3V0dGVyIG1hcmtlciByZXByZXNlbnRzIGEgYml0IG9mIGluZm9ybWF0aW9uIGF0dGFjaGVkIHRvIGEgbGluZVxuaW4gYSBzcGVjaWZpYyBndXR0ZXIuIFlvdXIgb3duIGN1c3RvbSBtYXJrZXJzIGhhdmUgdG8gZXh0ZW5kIHRoaXNcbmNsYXNzLlxuKi9cbmNsYXNzIEd1dHRlck1hcmtlciBleHRlbmRzIFJhbmdlVmFsdWUge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29tcGFyZShvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcyA9PSBvdGhlciB8fCB0aGlzLmNvbnN0cnVjdG9yID09IG90aGVyLmNvbnN0cnVjdG9yICYmIHRoaXMuZXEob3RoZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb21wYXJlIHRoaXMgbWFya2VyIHRvIGFub3RoZXIgbWFya2VyIG9mIHRoZSBzYW1lIHR5cGUuXG4gICAgKi9cbiAgICBlcShvdGhlcikgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvKipcbiAgICBDYWxsZWQgaWYgdGhlIG1hcmtlciBoYXMgYSBgdG9ET01gIG1ldGhvZCBhbmQgaXRzIHJlcHJlc2VudGF0aW9uXG4gICAgd2FzIHJlbW92ZWQgZnJvbSBhIGd1dHRlci5cbiAgICAqL1xuICAgIGRlc3Ryb3koZG9tKSB7IH1cbn1cbkd1dHRlck1hcmtlci5wcm90b3R5cGUuZWxlbWVudENsYXNzID0gXCJcIjtcbkd1dHRlck1hcmtlci5wcm90b3R5cGUudG9ET00gPSB1bmRlZmluZWQ7XG5HdXR0ZXJNYXJrZXIucHJvdG90eXBlLm1hcE1vZGUgPSBNYXBNb2RlLlRyYWNrQmVmb3JlO1xuR3V0dGVyTWFya2VyLnByb3RvdHlwZS5zdGFydFNpZGUgPSBHdXR0ZXJNYXJrZXIucHJvdG90eXBlLmVuZFNpZGUgPSAtMTtcbkd1dHRlck1hcmtlci5wcm90b3R5cGUucG9pbnQgPSB0cnVlO1xuLyoqXG5GYWNldCB1c2VkIHRvIGFkZCBhIGNsYXNzIHRvIGFsbCBndXR0ZXIgZWxlbWVudHMgZm9yIGEgZ2l2ZW4gbGluZS5cbk1hcmtlcnMgZ2l2ZW4gdG8gdGhpcyBmYWNldCBzaG91bGQgX29ubHlfIGRlZmluZSBhblxuW2BlbGVtZW50Y2xhc3NgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuR3V0dGVyTWFya2VyLmVsZW1lbnRDbGFzcyksIG5vdCBhXG5bYHRvRE9NYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3Lkd1dHRlck1hcmtlci50b0RPTSkgKG9yIHRoZSBtYXJrZXIgd2lsbCBhcHBlYXJcbmluIGFsbCBndXR0ZXJzIGZvciB0aGUgbGluZSkuXG4qL1xuY29uc3QgZ3V0dGVyTGluZUNsYXNzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuLyoqXG5GYWNldCB1c2VkIHRvIGFkZCBhIGNsYXNzIHRvIGFsbCBndXR0ZXIgZWxlbWVudHMgbmV4dCB0byBhIHdpZGdldC5cblNob3VsZCBub3QgcHJvdmlkZSB3aWRnZXRzIHdpdGggYSBgdG9ET01gIG1ldGhvZC5cbiovXG5jb25zdCBndXR0ZXJXaWRnZXRDbGFzcyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGRlZmF1bHRzID0ge1xuICAgIGNsYXNzOiBcIlwiLFxuICAgIHJlbmRlckVtcHR5RWxlbWVudHM6IGZhbHNlLFxuICAgIGVsZW1lbnRTdHlsZTogXCJcIixcbiAgICBtYXJrZXJzOiAoKSA9PiBSYW5nZVNldC5lbXB0eSxcbiAgICBsaW5lTWFya2VyOiAoKSA9PiBudWxsLFxuICAgIHdpZGdldE1hcmtlcjogKCkgPT4gbnVsbCxcbiAgICBsaW5lTWFya2VyQ2hhbmdlOiBudWxsLFxuICAgIGluaXRpYWxTcGFjZXI6IG51bGwsXG4gICAgdXBkYXRlU3BhY2VyOiBudWxsLFxuICAgIGRvbUV2ZW50SGFuZGxlcnM6IHt9LFxuICAgIHNpZGU6IFwiYmVmb3JlXCJcbn07XG5jb25zdCBhY3RpdmVHdXR0ZXJzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuLyoqXG5EZWZpbmUgYW4gZWRpdG9yIGd1dHRlci4gVGhlIG9yZGVyIGluIHdoaWNoIHRoZSBndXR0ZXJzIGFwcGVhciBpc1xuZGV0ZXJtaW5lZCBieSB0aGVpciBleHRlbnNpb24gcHJpb3JpdHkuXG4qL1xuZnVuY3Rpb24gZ3V0dGVyKGNvbmZpZykge1xuICAgIHJldHVybiBbZ3V0dGVycygpLCBhY3RpdmVHdXR0ZXJzLm9mKHsgLi4uZGVmYXVsdHMsIC4uLmNvbmZpZyB9KV07XG59XG5jb25zdCB1bmZpeEd1dHRlcnMgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLnNvbWUoeCA9PiB4KVxufSk7XG4vKipcblRoZSBndXR0ZXItZHJhd2luZyBwbHVnaW4gaXMgYXV0b21hdGljYWxseSBlbmFibGVkIHdoZW4geW91IGFkZCBhXG5ndXR0ZXIsIGJ1dCB5b3UgY2FuIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGV4cGxpY2l0bHkgY29uZmlndXJlIGl0LlxuXG5Vbmxlc3MgYGZpeGVkYCBpcyBleHBsaWNpdGx5IHNldCB0byBgZmFsc2VgLCB0aGUgZ3V0dGVycyBhcmVcbmZpeGVkLCBtZWFuaW5nIHRoZXkgZG9uJ3Qgc2Nyb2xsIGFsb25nIHdpdGggdGhlIGNvbnRlbnRcbmhvcml6b250YWxseSAoZXhjZXB0IG9uIEludGVybmV0IEV4cGxvcmVyLCB3aGljaCBkb2Vzbid0IHN1cHBvcnRcbkNTUyBbYHBvc2l0aW9uOlxuc3RpY2t5YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3Bvc2l0aW9uI3N0aWNreSkpLlxuKi9cbmZ1bmN0aW9uIGd1dHRlcnMoY29uZmlnKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtcbiAgICAgICAgZ3V0dGVyVmlldyxcbiAgICBdO1xuICAgIGlmIChjb25maWcgJiYgY29uZmlnLmZpeGVkID09PSBmYWxzZSlcbiAgICAgICAgcmVzdWx0LnB1c2godW5maXhHdXR0ZXJzLm9mKHRydWUpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuY29uc3QgZ3V0dGVyVmlldyA9IC8qQF9fUFVSRV9fKi9WaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLmRvbUFmdGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcmV2Vmlld3BvcnQgPSB2aWV3LnZpZXdwb3J0O1xuICAgICAgICB0aGlzLmRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZG9tLmNsYXNzTmFtZSA9IFwiY20tZ3V0dGVycyBjbS1ndXR0ZXJzLWJlZm9yZVwiO1xuICAgICAgICB0aGlzLmRvbS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIik7XG4gICAgICAgIHRoaXMuZG9tLnN0eWxlLm1pbkhlaWdodCA9ICh0aGlzLnZpZXcuY29udGVudEhlaWdodCAvIHRoaXMudmlldy5zY2FsZVkpICsgXCJweFwiO1xuICAgICAgICB0aGlzLmd1dHRlcnMgPSB2aWV3LnN0YXRlLmZhY2V0KGFjdGl2ZUd1dHRlcnMpLm1hcChjb25mID0+IG5ldyBTaW5nbGVHdXR0ZXJWaWV3KHZpZXcsIGNvbmYpKTtcbiAgICAgICAgdGhpcy5maXhlZCA9ICF2aWV3LnN0YXRlLmZhY2V0KHVuZml4R3V0dGVycyk7XG4gICAgICAgIGZvciAobGV0IGd1dHRlciBvZiB0aGlzLmd1dHRlcnMpIHtcbiAgICAgICAgICAgIGlmIChndXR0ZXIuY29uZmlnLnNpZGUgPT0gXCJhZnRlclwiKVxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RE9NQWZ0ZXIoKS5hcHBlbmRDaGlsZChndXR0ZXIuZG9tKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZChndXR0ZXIuZG9tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5maXhlZCkge1xuICAgICAgICAgICAgLy8gRklYTUUgSUUxMSBmYWxsYmFjaywgd2hpY2ggZG9lc24ndCBzdXBwb3J0IHBvc2l0aW9uOiBzdGlja3ksXG4gICAgICAgICAgICAvLyBieSB1c2luZyBwb3NpdGlvbjogcmVsYXRpdmUgKyBldmVudCBoYW5kbGVycyB0aGF0IHJlYWxpZ24gdGhlXG4gICAgICAgICAgICAvLyBndXR0ZXIgKG9yIGp1c3QgZm9yY2UgZml4ZWQ9ZmFsc2Ugb24gSUUxMT8pXG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZS5wb3NpdGlvbiA9IFwic3RpY2t5XCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zeW5jR3V0dGVycyhmYWxzZSk7XG4gICAgICAgIHZpZXcuc2Nyb2xsRE9NLmluc2VydEJlZm9yZSh0aGlzLmRvbSwgdmlldy5jb250ZW50RE9NKTtcbiAgICB9XG4gICAgZ2V0RE9NQWZ0ZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5kb21BZnRlcikge1xuICAgICAgICAgICAgdGhpcy5kb21BZnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB0aGlzLmRvbUFmdGVyLmNsYXNzTmFtZSA9IFwiY20tZ3V0dGVycyBjbS1ndXR0ZXJzLWFmdGVyXCI7XG4gICAgICAgICAgICB0aGlzLmRvbUFmdGVyLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuZG9tQWZ0ZXIuc3R5bGUubWluSGVpZ2h0ID0gKHRoaXMudmlldy5jb250ZW50SGVpZ2h0IC8gdGhpcy52aWV3LnNjYWxlWSkgKyBcInB4XCI7XG4gICAgICAgICAgICB0aGlzLmRvbUFmdGVyLnN0eWxlLnBvc2l0aW9uID0gdGhpcy5maXhlZCA/IFwic3RpY2t5XCIgOiBcIlwiO1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbERPTS5hcHBlbmRDaGlsZCh0aGlzLmRvbUFmdGVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5kb21BZnRlcjtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVHdXR0ZXJzKHVwZGF0ZSkpIHtcbiAgICAgICAgICAgIC8vIERldGFjaCBkdXJpbmcgc3luYyB3aGVuIHRoZSB2aWV3cG9ydCBjaGFuZ2VkIHNpZ25pZmljYW50bHlcbiAgICAgICAgICAgIC8vIChzdWNoIGFzIGR1cmluZyBzY3JvbGxpbmcpLCBzaW5jZSBmb3IgbGFyZ2UgdXBkYXRlcyB0aGF0IGlzXG4gICAgICAgICAgICAvLyBmYXN0ZXIuXG4gICAgICAgICAgICBsZXQgdnBBID0gdGhpcy5wcmV2Vmlld3BvcnQsIHZwQiA9IHVwZGF0ZS52aWV3LnZpZXdwb3J0O1xuICAgICAgICAgICAgbGV0IHZwT3ZlcmxhcCA9IE1hdGgubWluKHZwQS50bywgdnBCLnRvKSAtIE1hdGgubWF4KHZwQS5mcm9tLCB2cEIuZnJvbSk7XG4gICAgICAgICAgICB0aGlzLnN5bmNHdXR0ZXJzKHZwT3ZlcmxhcCA8ICh2cEIudG8gLSB2cEIuZnJvbSkgKiAwLjgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cGRhdGUuZ2VvbWV0cnlDaGFuZ2VkKSB7XG4gICAgICAgICAgICBsZXQgbWluID0gKHRoaXMudmlldy5jb250ZW50SGVpZ2h0IC8gdGhpcy52aWV3LnNjYWxlWSkgKyBcInB4XCI7XG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZS5taW5IZWlnaHQgPSBtaW47XG4gICAgICAgICAgICBpZiAodGhpcy5kb21BZnRlcilcbiAgICAgICAgICAgICAgICB0aGlzLmRvbUFmdGVyLnN0eWxlLm1pbkhlaWdodCA9IG1pbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52aWV3LnN0YXRlLmZhY2V0KHVuZml4R3V0dGVycykgIT0gIXRoaXMuZml4ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZml4ZWQgPSAhdGhpcy5maXhlZDtcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlLnBvc2l0aW9uID0gdGhpcy5maXhlZCA/IFwic3RpY2t5XCIgOiBcIlwiO1xuICAgICAgICAgICAgaWYgKHRoaXMuZG9tQWZ0ZXIpXG4gICAgICAgICAgICAgICAgdGhpcy5kb21BZnRlci5zdHlsZS5wb3NpdGlvbiA9IHRoaXMuZml4ZWQgPyBcInN0aWNreVwiIDogXCJcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByZXZWaWV3cG9ydCA9IHVwZGF0ZS52aWV3LnZpZXdwb3J0O1xuICAgIH1cbiAgICBzeW5jR3V0dGVycyhkZXRhY2gpIHtcbiAgICAgICAgbGV0IGFmdGVyID0gdGhpcy5kb20ubmV4dFNpYmxpbmc7XG4gICAgICAgIGlmIChkZXRhY2gpIHtcbiAgICAgICAgICAgIHRoaXMuZG9tLnJlbW92ZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZG9tQWZ0ZXIpXG4gICAgICAgICAgICAgICAgdGhpcy5kb21BZnRlci5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluZUNsYXNzZXMgPSBSYW5nZVNldC5pdGVyKHRoaXMudmlldy5zdGF0ZS5mYWNldChndXR0ZXJMaW5lQ2xhc3MpLCB0aGlzLnZpZXcudmlld3BvcnQuZnJvbSk7XG4gICAgICAgIGxldCBjbGFzc1NldCA9IFtdO1xuICAgICAgICBsZXQgY29udGV4dHMgPSB0aGlzLmd1dHRlcnMubWFwKGd1dHRlciA9PiBuZXcgVXBkYXRlQ29udGV4dChndXR0ZXIsIHRoaXMudmlldy52aWV3cG9ydCwgLXRoaXMudmlldy5kb2N1bWVudFBhZGRpbmcudG9wKSk7XG4gICAgICAgIGZvciAobGV0IGxpbmUgb2YgdGhpcy52aWV3LnZpZXdwb3J0TGluZUJsb2Nrcykge1xuICAgICAgICAgICAgaWYgKGNsYXNzU2V0Lmxlbmd0aClcbiAgICAgICAgICAgICAgICBjbGFzc1NldCA9IFtdO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGluZS50eXBlKSkge1xuICAgICAgICAgICAgICAgIGxldCBmaXJzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYiBvZiBsaW5lLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGIudHlwZSA9PSBCbG9ja1R5cGUuVGV4dCAmJiBmaXJzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZUN1cnNvcihsaW5lQ2xhc3NlcywgY2xhc3NTZXQsIGIuZnJvbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjeCBvZiBjb250ZXh0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjeC5saW5lKHRoaXMudmlldywgYiwgY2xhc3NTZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChiLndpZGdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY3ggb2YgY29udGV4dHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3gud2lkZ2V0KHRoaXMudmlldywgYik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChsaW5lLnR5cGUgPT0gQmxvY2tUeXBlLlRleHQpIHtcbiAgICAgICAgICAgICAgICBhZHZhbmNlQ3Vyc29yKGxpbmVDbGFzc2VzLCBjbGFzc1NldCwgbGluZS5mcm9tKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjeCBvZiBjb250ZXh0cylcbiAgICAgICAgICAgICAgICAgICAgY3gubGluZSh0aGlzLnZpZXcsIGxpbmUsIGNsYXNzU2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxpbmUud2lkZ2V0KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY3ggb2YgY29udGV4dHMpXG4gICAgICAgICAgICAgICAgICAgIGN4LndpZGdldCh0aGlzLnZpZXcsIGxpbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGN4IG9mIGNvbnRleHRzKVxuICAgICAgICAgICAgY3guZmluaXNoKCk7XG4gICAgICAgIGlmIChkZXRhY2gpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxET00uaW5zZXJ0QmVmb3JlKHRoaXMuZG9tLCBhZnRlcik7XG4gICAgICAgICAgICBpZiAodGhpcy5kb21BZnRlcilcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsRE9NLmFwcGVuZENoaWxkKHRoaXMuZG9tQWZ0ZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUd1dHRlcnModXBkYXRlKSB7XG4gICAgICAgIGxldCBwcmV2ID0gdXBkYXRlLnN0YXJ0U3RhdGUuZmFjZXQoYWN0aXZlR3V0dGVycyksIGN1ciA9IHVwZGF0ZS5zdGF0ZS5mYWNldChhY3RpdmVHdXR0ZXJzKTtcbiAgICAgICAgbGV0IGNoYW5nZSA9IHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS5oZWlnaHRDaGFuZ2VkIHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQgfHxcbiAgICAgICAgICAgICFSYW5nZVNldC5lcSh1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldChndXR0ZXJMaW5lQ2xhc3MpLCB1cGRhdGUuc3RhdGUuZmFjZXQoZ3V0dGVyTGluZUNsYXNzKSwgdXBkYXRlLnZpZXcudmlld3BvcnQuZnJvbSwgdXBkYXRlLnZpZXcudmlld3BvcnQudG8pO1xuICAgICAgICBpZiAocHJldiA9PSBjdXIpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGd1dHRlciBvZiB0aGlzLmd1dHRlcnMpXG4gICAgICAgICAgICAgICAgaWYgKGd1dHRlci51cGRhdGUodXBkYXRlKSlcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICBsZXQgZ3V0dGVycyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgY29uZiBvZiBjdXIpIHtcbiAgICAgICAgICAgICAgICBsZXQga25vd24gPSBwcmV2LmluZGV4T2YoY29uZik7XG4gICAgICAgICAgICAgICAgaWYgKGtub3duIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBndXR0ZXJzLnB1c2gobmV3IFNpbmdsZUd1dHRlclZpZXcodGhpcy52aWV3LCBjb25mKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmd1dHRlcnNba25vd25dLnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICBndXR0ZXJzLnB1c2godGhpcy5ndXR0ZXJzW2tub3duXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgZyBvZiB0aGlzLmd1dHRlcnMpIHtcbiAgICAgICAgICAgICAgICBnLmRvbS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZ3V0dGVycy5pbmRleE9mKGcpIDwgMClcbiAgICAgICAgICAgICAgICAgICAgZy5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBnIG9mIGd1dHRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZy5jb25maWcuc2lkZSA9PSBcImFmdGVyXCIpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RE9NQWZ0ZXIoKS5hcHBlbmRDaGlsZChnLmRvbSk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZChnLmRvbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmd1dHRlcnMgPSBndXR0ZXJzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGFuZ2U7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGZvciAobGV0IHZpZXcgb2YgdGhpcy5ndXR0ZXJzKVxuICAgICAgICAgICAgdmlldy5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuZG9tLnJlbW92ZSgpO1xuICAgICAgICBpZiAodGhpcy5kb21BZnRlcilcbiAgICAgICAgICAgIHRoaXMuZG9tQWZ0ZXIucmVtb3ZlKCk7XG4gICAgfVxufSwge1xuICAgIHByb3ZpZGU6IHBsdWdpbiA9PiBFZGl0b3JWaWV3LnNjcm9sbE1hcmdpbnMub2YodmlldyA9PiB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHZpZXcucGx1Z2luKHBsdWdpbik7XG4gICAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUuZ3V0dGVycy5sZW5ndGggPT0gMCB8fCAhdmFsdWUuZml4ZWQpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IGJlZm9yZSA9IHZhbHVlLmRvbS5vZmZzZXRXaWR0aCAqIHZpZXcuc2NhbGVYLCBhZnRlciA9IHZhbHVlLmRvbUFmdGVyID8gdmFsdWUuZG9tQWZ0ZXIub2Zmc2V0V2lkdGggKiB2aWV3LnNjYWxlWCA6IDA7XG4gICAgICAgIHJldHVybiB2aWV3LnRleHREaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxUUlxuICAgICAgICAgICAgPyB7IGxlZnQ6IGJlZm9yZSwgcmlnaHQ6IGFmdGVyIH1cbiAgICAgICAgICAgIDogeyByaWdodDogYmVmb3JlLCBsZWZ0OiBhZnRlciB9O1xuICAgIH0pXG59KTtcbmZ1bmN0aW9uIGFzQXJyYXkodmFsKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheSh2YWwpID8gdmFsIDogW3ZhbF0pOyB9XG5mdW5jdGlvbiBhZHZhbmNlQ3Vyc29yKGN1cnNvciwgY29sbGVjdCwgcG9zKSB7XG4gICAgd2hpbGUgKGN1cnNvci52YWx1ZSAmJiBjdXJzb3IuZnJvbSA8PSBwb3MpIHtcbiAgICAgICAgaWYgKGN1cnNvci5mcm9tID09IHBvcylcbiAgICAgICAgICAgIGNvbGxlY3QucHVzaChjdXJzb3IudmFsdWUpO1xuICAgICAgICBjdXJzb3IubmV4dCgpO1xuICAgIH1cbn1cbmNsYXNzIFVwZGF0ZUNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKGd1dHRlciwgdmlld3BvcnQsIGhlaWdodCkge1xuICAgICAgICB0aGlzLmd1dHRlciA9IGd1dHRlcjtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuaSA9IDA7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gUmFuZ2VTZXQuaXRlcihndXR0ZXIubWFya2Vycywgdmlld3BvcnQuZnJvbSk7XG4gICAgfVxuICAgIGFkZEVsZW1lbnQodmlldywgYmxvY2ssIG1hcmtlcnMpIHtcbiAgICAgICAgbGV0IHsgZ3V0dGVyIH0gPSB0aGlzLCBhYm92ZSA9IChibG9jay50b3AgLSB0aGlzLmhlaWdodCkgLyB2aWV3LnNjYWxlWSwgaGVpZ2h0ID0gYmxvY2suaGVpZ2h0IC8gdmlldy5zY2FsZVk7XG4gICAgICAgIGlmICh0aGlzLmkgPT0gZ3V0dGVyLmVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IG5ld0VsdCA9IG5ldyBHdXR0ZXJFbGVtZW50KHZpZXcsIGhlaWdodCwgYWJvdmUsIG1hcmtlcnMpO1xuICAgICAgICAgICAgZ3V0dGVyLmVsZW1lbnRzLnB1c2gobmV3RWx0KTtcbiAgICAgICAgICAgIGd1dHRlci5kb20uYXBwZW5kQ2hpbGQobmV3RWx0LmRvbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBndXR0ZXIuZWxlbWVudHNbdGhpcy5pXS51cGRhdGUodmlldywgaGVpZ2h0LCBhYm92ZSwgbWFya2Vycyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oZWlnaHQgPSBibG9jay5ib3R0b207XG4gICAgICAgIHRoaXMuaSsrO1xuICAgIH1cbiAgICBsaW5lKHZpZXcsIGxpbmUsIGV4dHJhTWFya2Vycykge1xuICAgICAgICBsZXQgbG9jYWxNYXJrZXJzID0gW107XG4gICAgICAgIGFkdmFuY2VDdXJzb3IodGhpcy5jdXJzb3IsIGxvY2FsTWFya2VycywgbGluZS5mcm9tKTtcbiAgICAgICAgaWYgKGV4dHJhTWFya2Vycy5sZW5ndGgpXG4gICAgICAgICAgICBsb2NhbE1hcmtlcnMgPSBsb2NhbE1hcmtlcnMuY29uY2F0KGV4dHJhTWFya2Vycyk7XG4gICAgICAgIGxldCBmb3JMaW5lID0gdGhpcy5ndXR0ZXIuY29uZmlnLmxpbmVNYXJrZXIodmlldywgbGluZSwgbG9jYWxNYXJrZXJzKTtcbiAgICAgICAgaWYgKGZvckxpbmUpXG4gICAgICAgICAgICBsb2NhbE1hcmtlcnMudW5zaGlmdChmb3JMaW5lKTtcbiAgICAgICAgbGV0IGd1dHRlciA9IHRoaXMuZ3V0dGVyO1xuICAgICAgICBpZiAobG9jYWxNYXJrZXJzLmxlbmd0aCA9PSAwICYmICFndXR0ZXIuY29uZmlnLnJlbmRlckVtcHR5RWxlbWVudHMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuYWRkRWxlbWVudCh2aWV3LCBsaW5lLCBsb2NhbE1hcmtlcnMpO1xuICAgIH1cbiAgICB3aWRnZXQodmlldywgYmxvY2spIHtcbiAgICAgICAgbGV0IG1hcmtlciA9IHRoaXMuZ3V0dGVyLmNvbmZpZy53aWRnZXRNYXJrZXIodmlldywgYmxvY2sud2lkZ2V0LCBibG9jayksIG1hcmtlcnMgPSBtYXJrZXIgPyBbbWFya2VyXSA6IG51bGw7XG4gICAgICAgIGZvciAobGV0IGNscyBvZiB2aWV3LnN0YXRlLmZhY2V0KGd1dHRlcldpZGdldENsYXNzKSkge1xuICAgICAgICAgICAgbGV0IG1hcmtlciA9IGNscyh2aWV3LCBibG9jay53aWRnZXQsIGJsb2NrKTtcbiAgICAgICAgICAgIGlmIChtYXJrZXIpXG4gICAgICAgICAgICAgICAgKG1hcmtlcnMgfHwgKG1hcmtlcnMgPSBbXSkpLnB1c2gobWFya2VyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWFya2VycylcbiAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudCh2aWV3LCBibG9jaywgbWFya2Vycyk7XG4gICAgfVxuICAgIGZpbmlzaCgpIHtcbiAgICAgICAgbGV0IGd1dHRlciA9IHRoaXMuZ3V0dGVyO1xuICAgICAgICB3aGlsZSAoZ3V0dGVyLmVsZW1lbnRzLmxlbmd0aCA+IHRoaXMuaSkge1xuICAgICAgICAgICAgbGV0IGxhc3QgPSBndXR0ZXIuZWxlbWVudHMucG9wKCk7XG4gICAgICAgICAgICBndXR0ZXIuZG9tLnJlbW92ZUNoaWxkKGxhc3QuZG9tKTtcbiAgICAgICAgICAgIGxhc3QuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgU2luZ2xlR3V0dGVyVmlldyB7XG4gICAgY29uc3RydWN0b3IodmlldywgY29uZmlnKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gW107XG4gICAgICAgIHRoaXMuc3BhY2VyID0gbnVsbDtcbiAgICAgICAgdGhpcy5kb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmRvbS5jbGFzc05hbWUgPSBcImNtLWd1dHRlclwiICsgKHRoaXMuY29uZmlnLmNsYXNzID8gXCIgXCIgKyB0aGlzLmNvbmZpZy5jbGFzcyA6IFwiXCIpO1xuICAgICAgICBmb3IgKGxldCBwcm9wIGluIGNvbmZpZy5kb21FdmVudEhhbmRsZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmRvbS5hZGRFdmVudExpc3RlbmVyKHByb3AsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB0YXJnZXQgPSBldmVudC50YXJnZXQsIHk7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCAhPSB0aGlzLmRvbSAmJiB0aGlzLmRvbS5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh0YXJnZXQucGFyZW50Tm9kZSAhPSB0aGlzLmRvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgeSA9IChyZWN0LnRvcCArIHJlY3QuYm90dG9tKSAvIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB5ID0gZXZlbnQuY2xpZW50WTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGxpbmUgPSB2aWV3LmxpbmVCbG9ja0F0SGVpZ2h0KHkgLSB2aWV3LmRvY3VtZW50VG9wKTtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmRvbUV2ZW50SGFuZGxlcnNbcHJvcF0odmlldywgbGluZSwgZXZlbnQpKVxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tYXJrZXJzID0gYXNBcnJheShjb25maWcubWFya2Vycyh2aWV3KSk7XG4gICAgICAgIGlmIChjb25maWcuaW5pdGlhbFNwYWNlcikge1xuICAgICAgICAgICAgdGhpcy5zcGFjZXIgPSBuZXcgR3V0dGVyRWxlbWVudCh2aWV3LCAwLCAwLCBbY29uZmlnLmluaXRpYWxTcGFjZXIodmlldyldKTtcbiAgICAgICAgICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKHRoaXMuc3BhY2VyLmRvbSk7XG4gICAgICAgICAgICB0aGlzLnNwYWNlci5kb20uc3R5bGUuY3NzVGV4dCArPSBcInZpc2liaWxpdHk6IGhpZGRlbjsgcG9pbnRlci1ldmVudHM6IG5vbmVcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGxldCBwcmV2TWFya2VycyA9IHRoaXMubWFya2VycztcbiAgICAgICAgdGhpcy5tYXJrZXJzID0gYXNBcnJheSh0aGlzLmNvbmZpZy5tYXJrZXJzKHVwZGF0ZS52aWV3KSk7XG4gICAgICAgIGlmICh0aGlzLnNwYWNlciAmJiB0aGlzLmNvbmZpZy51cGRhdGVTcGFjZXIpIHtcbiAgICAgICAgICAgIGxldCB1cGRhdGVkID0gdGhpcy5jb25maWcudXBkYXRlU3BhY2VyKHRoaXMuc3BhY2VyLm1hcmtlcnNbMF0sIHVwZGF0ZSk7XG4gICAgICAgICAgICBpZiAodXBkYXRlZCAhPSB0aGlzLnNwYWNlci5tYXJrZXJzWzBdKVxuICAgICAgICAgICAgICAgIHRoaXMuc3BhY2VyLnVwZGF0ZSh1cGRhdGUudmlldywgMCwgMCwgW3VwZGF0ZWRdKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdnAgPSB1cGRhdGUudmlldy52aWV3cG9ydDtcbiAgICAgICAgcmV0dXJuICFSYW5nZVNldC5lcSh0aGlzLm1hcmtlcnMsIHByZXZNYXJrZXJzLCB2cC5mcm9tLCB2cC50bykgfHxcbiAgICAgICAgICAgICh0aGlzLmNvbmZpZy5saW5lTWFya2VyQ2hhbmdlID8gdGhpcy5jb25maWcubGluZU1hcmtlckNoYW5nZSh1cGRhdGUpIDogZmFsc2UpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBmb3IgKGxldCBlbHQgb2YgdGhpcy5lbGVtZW50cylcbiAgICAgICAgICAgIGVsdC5kZXN0cm95KCk7XG4gICAgfVxufVxuY2xhc3MgR3V0dGVyRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IodmlldywgaGVpZ2h0LCBhYm92ZSwgbWFya2Vycykge1xuICAgICAgICB0aGlzLmhlaWdodCA9IC0xO1xuICAgICAgICB0aGlzLmFib3ZlID0gMDtcbiAgICAgICAgdGhpcy5tYXJrZXJzID0gW107XG4gICAgICAgIHRoaXMuZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5kb20uY2xhc3NOYW1lID0gXCJjbS1ndXR0ZXJFbGVtZW50XCI7XG4gICAgICAgIHRoaXMudXBkYXRlKHZpZXcsIGhlaWdodCwgYWJvdmUsIG1hcmtlcnMpO1xuICAgIH1cbiAgICB1cGRhdGUodmlldywgaGVpZ2h0LCBhYm92ZSwgbWFya2Vycykge1xuICAgICAgICBpZiAodGhpcy5oZWlnaHQgIT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hYm92ZSAhPSBhYm92ZSlcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlLm1hcmdpblRvcCA9ICh0aGlzLmFib3ZlID0gYWJvdmUpID8gYWJvdmUgKyBcInB4XCIgOiBcIlwiO1xuICAgICAgICBpZiAoIXNhbWVNYXJrZXJzKHRoaXMubWFya2VycywgbWFya2VycykpXG4gICAgICAgICAgICB0aGlzLnNldE1hcmtlcnModmlldywgbWFya2Vycyk7XG4gICAgfVxuICAgIHNldE1hcmtlcnModmlldywgbWFya2Vycykge1xuICAgICAgICBsZXQgY2xzID0gXCJjbS1ndXR0ZXJFbGVtZW50XCIsIGRvbVBvcyA9IHRoaXMuZG9tLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGZvciAobGV0IGlOZXcgPSAwLCBpT2xkID0gMDs7KSB7XG4gICAgICAgICAgICBsZXQgc2tpcFRvID0gaU9sZCwgbWFya2VyID0gaU5ldyA8IG1hcmtlcnMubGVuZ3RoID8gbWFya2Vyc1tpTmV3KytdIDogbnVsbCwgbWF0Y2hlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG1hcmtlcikge1xuICAgICAgICAgICAgICAgIGxldCBjID0gbWFya2VyLmVsZW1lbnRDbGFzcztcbiAgICAgICAgICAgICAgICBpZiAoYylcbiAgICAgICAgICAgICAgICAgICAgY2xzICs9IFwiIFwiICsgYztcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gaU9sZDsgaSA8IHRoaXMubWFya2Vycy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWFya2Vyc1tpXS5jb21wYXJlKG1hcmtlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBUbyA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBza2lwVG8gPSB0aGlzLm1hcmtlcnMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGlPbGQgPCBza2lwVG8pIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHRoaXMubWFya2Vyc1tpT2xkKytdO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0LnRvRE9NKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQuZGVzdHJveShkb21Qb3MpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWZ0ZXIgPSBkb21Qb3MubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIGRvbVBvcy5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgZG9tUG9zID0gYWZ0ZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFtYXJrZXIpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAobWFya2VyLnRvRE9NKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZWQpXG4gICAgICAgICAgICAgICAgICAgIGRvbVBvcyA9IGRvbVBvcy5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmluc2VydEJlZm9yZShtYXJrZXIudG9ET00odmlldyksIGRvbVBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWF0Y2hlZClcbiAgICAgICAgICAgICAgICBpT2xkKys7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kb20uY2xhc3NOYW1lID0gY2xzO1xuICAgICAgICB0aGlzLm1hcmtlcnMgPSBtYXJrZXJzO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnNldE1hcmtlcnMobnVsbCwgW10pOyAvLyBGaXJzdCBhcmd1bWVudCBub3QgdXNlZCB1bmxlc3MgY3JlYXRpbmcgbWFya2Vyc1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNhbWVNYXJrZXJzKGEsIGIpIHtcbiAgICBpZiAoYS5sZW5ndGggIT0gYi5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspXG4gICAgICAgIGlmICghYVtpXS5jb21wYXJlKGJbaV0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG5GYWNldCB1c2VkIHRvIHByb3ZpZGUgbWFya2VycyB0byB0aGUgbGluZSBudW1iZXIgZ3V0dGVyLlxuKi9cbmNvbnN0IGxpbmVOdW1iZXJNYXJrZXJzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuLyoqXG5GYWNldCB1c2VkIHRvIGNyZWF0ZSBtYXJrZXJzIGluIHRoZSBsaW5lIG51bWJlciBndXR0ZXIgbmV4dCB0byB3aWRnZXRzLlxuKi9cbmNvbnN0IGxpbmVOdW1iZXJXaWRnZXRNYXJrZXIgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBsaW5lTnVtYmVyQ29uZmlnID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZSh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVDb25maWcodmFsdWVzLCB7IGZvcm1hdE51bWJlcjogU3RyaW5nLCBkb21FdmVudEhhbmRsZXJzOiB7fSB9LCB7XG4gICAgICAgICAgICBkb21FdmVudEhhbmRsZXJzKGEsIGIpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gT2JqZWN0LmFzc2lnbih7fSwgYSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZXZlbnQgaW4gYikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXhpc3RzID0gcmVzdWx0W2V2ZW50XSwgYWRkID0gYltldmVudF07XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtldmVudF0gPSBleGlzdHMgPyAodmlldywgbGluZSwgZXZlbnQpID0+IGV4aXN0cyh2aWV3LCBsaW5lLCBldmVudCkgfHwgYWRkKHZpZXcsIGxpbmUsIGV2ZW50KSA6IGFkZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5jbGFzcyBOdW1iZXJNYXJrZXIgZXh0ZW5kcyBHdXR0ZXJNYXJrZXIge1xuICAgIGNvbnN0cnVjdG9yKG51bWJlcikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm51bWJlciA9IG51bWJlcjtcbiAgICB9XG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIHRoaXMubnVtYmVyID09IG90aGVyLm51bWJlcjsgfVxuICAgIHRvRE9NKCkgeyByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy5udW1iZXIpOyB9XG59XG5mdW5jdGlvbiBmb3JtYXROdW1iZXIodmlldywgbnVtYmVyKSB7XG4gICAgcmV0dXJuIHZpZXcuc3RhdGUuZmFjZXQobGluZU51bWJlckNvbmZpZykuZm9ybWF0TnVtYmVyKG51bWJlciwgdmlldy5zdGF0ZSk7XG59XG5jb25zdCBsaW5lTnVtYmVyR3V0dGVyID0gLypAX19QVVJFX18qL2FjdGl2ZUd1dHRlcnMuY29tcHV0ZShbbGluZU51bWJlckNvbmZpZ10sIHN0YXRlID0+ICh7XG4gICAgY2xhc3M6IFwiY20tbGluZU51bWJlcnNcIixcbiAgICByZW5kZXJFbXB0eUVsZW1lbnRzOiBmYWxzZSxcbiAgICBtYXJrZXJzKHZpZXcpIHsgcmV0dXJuIHZpZXcuc3RhdGUuZmFjZXQobGluZU51bWJlck1hcmtlcnMpOyB9LFxuICAgIGxpbmVNYXJrZXIodmlldywgbGluZSwgb3RoZXJzKSB7XG4gICAgICAgIGlmIChvdGhlcnMuc29tZShtID0+IG0udG9ET00pKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBuZXcgTnVtYmVyTWFya2VyKGZvcm1hdE51bWJlcih2aWV3LCB2aWV3LnN0YXRlLmRvYy5saW5lQXQobGluZS5mcm9tKS5udW1iZXIpKTtcbiAgICB9LFxuICAgIHdpZGdldE1hcmtlcjogKHZpZXcsIHdpZGdldCwgYmxvY2spID0+IHtcbiAgICAgICAgZm9yIChsZXQgbSBvZiB2aWV3LnN0YXRlLmZhY2V0KGxpbmVOdW1iZXJXaWRnZXRNYXJrZXIpKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gbSh2aWV3LCB3aWRnZXQsIGJsb2NrKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGxpbmVNYXJrZXJDaGFuZ2U6IHVwZGF0ZSA9PiB1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldChsaW5lTnVtYmVyQ29uZmlnKSAhPSB1cGRhdGUuc3RhdGUuZmFjZXQobGluZU51bWJlckNvbmZpZyksXG4gICAgaW5pdGlhbFNwYWNlcih2aWV3KSB7XG4gICAgICAgIHJldHVybiBuZXcgTnVtYmVyTWFya2VyKGZvcm1hdE51bWJlcih2aWV3LCBtYXhMaW5lTnVtYmVyKHZpZXcuc3RhdGUuZG9jLmxpbmVzKSkpO1xuICAgIH0sXG4gICAgdXBkYXRlU3BhY2VyKHNwYWNlciwgdXBkYXRlKSB7XG4gICAgICAgIGxldCBtYXggPSBmb3JtYXROdW1iZXIodXBkYXRlLnZpZXcsIG1heExpbmVOdW1iZXIodXBkYXRlLnZpZXcuc3RhdGUuZG9jLmxpbmVzKSk7XG4gICAgICAgIHJldHVybiBtYXggPT0gc3BhY2VyLm51bWJlciA/IHNwYWNlciA6IG5ldyBOdW1iZXJNYXJrZXIobWF4KTtcbiAgICB9LFxuICAgIGRvbUV2ZW50SGFuZGxlcnM6IHN0YXRlLmZhY2V0KGxpbmVOdW1iZXJDb25maWcpLmRvbUV2ZW50SGFuZGxlcnMsXG4gICAgc2lkZTogXCJiZWZvcmVcIlxufSkpO1xuLyoqXG5DcmVhdGUgYSBsaW5lIG51bWJlciBndXR0ZXIgZXh0ZW5zaW9uLlxuKi9cbmZ1bmN0aW9uIGxpbmVOdW1iZXJzKGNvbmZpZyA9IHt9KSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgbGluZU51bWJlckNvbmZpZy5vZihjb25maWcpLFxuICAgICAgICBndXR0ZXJzKCksXG4gICAgICAgIGxpbmVOdW1iZXJHdXR0ZXJcbiAgICBdO1xufVxuZnVuY3Rpb24gbWF4TGluZU51bWJlcihsaW5lcykge1xuICAgIGxldCBsYXN0ID0gOTtcbiAgICB3aGlsZSAobGFzdCA8IGxpbmVzKVxuICAgICAgICBsYXN0ID0gbGFzdCAqIDEwICsgOTtcbiAgICByZXR1cm4gbGFzdDtcbn1cbmNvbnN0IGFjdGl2ZUxpbmVHdXR0ZXJNYXJrZXIgPSAvKkBfX1BVUkVfXyovbmV3IGNsYXNzIGV4dGVuZHMgR3V0dGVyTWFya2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5lbGVtZW50Q2xhc3MgPSBcImNtLWFjdGl2ZUxpbmVHdXR0ZXJcIjtcbiAgICB9XG59O1xuY29uc3QgYWN0aXZlTGluZUd1dHRlckhpZ2hsaWdodGVyID0gLypAX19QVVJFX18qL2d1dHRlckxpbmVDbGFzcy5jb21wdXRlKFtcInNlbGVjdGlvblwiXSwgc3RhdGUgPT4ge1xuICAgIGxldCBtYXJrcyA9IFtdLCBsYXN0ID0gLTE7XG4gICAgZm9yIChsZXQgcmFuZ2Ugb2Ygc3RhdGUuc2VsZWN0aW9uLnJhbmdlcykge1xuICAgICAgICBsZXQgbGluZVBvcyA9IHN0YXRlLmRvYy5saW5lQXQocmFuZ2UuaGVhZCkuZnJvbTtcbiAgICAgICAgaWYgKGxpbmVQb3MgPiBsYXN0KSB7XG4gICAgICAgICAgICBsYXN0ID0gbGluZVBvcztcbiAgICAgICAgICAgIG1hcmtzLnB1c2goYWN0aXZlTGluZUd1dHRlck1hcmtlci5yYW5nZShsaW5lUG9zKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFJhbmdlU2V0Lm9mKG1hcmtzKTtcbn0pO1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGFkZHMgYSBgY20tYWN0aXZlTGluZUd1dHRlcmAgY2xhc3MgdG9cbmFsbCBndXR0ZXIgZWxlbWVudHMgb24gdGhlIFthY3RpdmVcbmxpbmVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5oaWdobGlnaHRBY3RpdmVMaW5lKS5cbiovXG5mdW5jdGlvbiBoaWdobGlnaHRBY3RpdmVMaW5lR3V0dGVyKCkge1xuICAgIHJldHVybiBhY3RpdmVMaW5lR3V0dGVySGlnaGxpZ2h0ZXI7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXIoZGVjb3JhdG9yKSB7XG4gICAgcmV0dXJuIFZpZXdQbHVnaW4uZGVmaW5lKHZpZXcgPT4gKHtcbiAgICAgICAgZGVjb3JhdGlvbnM6IGRlY29yYXRvci5jcmVhdGVEZWNvKHZpZXcpLFxuICAgICAgICB1cGRhdGUodSkge1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IGRlY29yYXRvci51cGRhdGVEZWNvKHUsIHRoaXMuZGVjb3JhdGlvbnMpO1xuICAgICAgICB9LFxuICAgIH0pLCB7XG4gICAgICAgIGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcbiAgICB9KTtcbn1cbmNvbnN0IHRhYkRlY28gPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20taGlnaGxpZ2h0VGFiXCIgfSk7XG5jb25zdCBzcGFjZURlY28gPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20taGlnaGxpZ2h0U3BhY2VcIiB9KTtcbmNvbnN0IHdoaXRlc3BhY2VIaWdobGlnaHRlciA9IC8qQF9fUFVSRV9fKi9tYXRjaGVyKC8qQF9fUFVSRV9fKi9uZXcgTWF0Y2hEZWNvcmF0b3Ioe1xuICAgIHJlZ2V4cDogL1xcdHwgL2csXG4gICAgZGVjb3JhdGlvbjogbWF0Y2ggPT4gbWF0Y2hbMF0gPT0gXCJcXHRcIiA/IHRhYkRlY28gOiBzcGFjZURlY28sXG4gICAgYm91bmRhcnk6IC9cXFMvLFxufSkpO1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGhpZ2hsaWdodHMgd2hpdGVzcGFjZSwgYWRkaW5nIGFcbmBjbS1oaWdobGlnaHRTcGFjZWAgY2xhc3MgdG8gc3RyZXRjaGVzIG9mIHNwYWNlcywgYW5kIGFcbmBjbS1oaWdobGlnaHRUYWJgIGNsYXNzIHRvIGluZGl2aWR1YWwgdGFiIGNoYXJhY3RlcnMuIEJ5IGRlZmF1bHQsXG50aGUgZm9ybWVyIGFyZSBzaG93biBhcyBmYWludCBkb3RzLCBhbmQgdGhlIGxhdHRlciBhcyBhcnJvd3MuXG4qL1xuZnVuY3Rpb24gaGlnaGxpZ2h0V2hpdGVzcGFjZSgpIHtcbiAgICByZXR1cm4gd2hpdGVzcGFjZUhpZ2hsaWdodGVyO1xufVxuY29uc3QgdHJhaWxpbmdIaWdobGlnaHRlciA9IC8qQF9fUFVSRV9fKi9tYXRjaGVyKC8qQF9fUFVSRV9fKi9uZXcgTWF0Y2hEZWNvcmF0b3Ioe1xuICAgIHJlZ2V4cDogL1xccyskL2csXG4gICAgZGVjb3JhdGlvbjogLypAX19QVVJFX18qL0RlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLXRyYWlsaW5nU3BhY2VcIiB9KVxufSkpO1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGFkZHMgYSBgY20tdHJhaWxpbmdTcGFjZWAgY2xhc3MgdG8gYWxsXG50cmFpbGluZyB3aGl0ZXNwYWNlLlxuKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodFRyYWlsaW5nV2hpdGVzcGFjZSgpIHtcbiAgICByZXR1cm4gdHJhaWxpbmdIaWdobGlnaHRlcjtcbn1cblxuLyoqXG5AaW50ZXJuYWxcbiovXG5jb25zdCBfX3Rlc3QgPSB7IEhlaWdodE1hcCwgSGVpZ2h0T3JhY2xlLCBNZWFzdXJlZEhlaWdodHMsIFF1ZXJ5VHlwZSwgQ2hhbmdlZFJhbmdlLCBjb21wdXRlT3JkZXIsXG4gICAgbW92ZVZpc3VhbGx5LCBjbGVhckhlaWdodENoYW5nZUZsYWcsIGdldEhlaWdodENoYW5nZUZsYWc6ICgpID0+IGhlaWdodENoYW5nZUZsYWcgfTtcblxuZXhwb3J0IHsgQmlkaVNwYW4sIEJsb2NrSW5mbywgQmxvY2tUeXBlLCBCbG9ja1dyYXBwZXIsIERlY29yYXRpb24sIERpcmVjdGlvbiwgRWRpdG9yVmlldywgR3V0dGVyTWFya2VyLCBNYXRjaERlY29yYXRvciwgUmVjdGFuZ2xlTWFya2VyLCBWaWV3UGx1Z2luLCBWaWV3VXBkYXRlLCBXaWRnZXRUeXBlLCBfX3Rlc3QsIGNsb3NlSG92ZXJUb29sdGlwcywgY3Jvc3NoYWlyQ3Vyc29yLCBkcmF3U2VsZWN0aW9uLCBkcm9wQ3Vyc29yLCBnZXREaWFsb2csIGdldERyYXdTZWxlY3Rpb25Db25maWcsIGdldFBhbmVsLCBnZXRUb29sdGlwLCBndXR0ZXIsIGd1dHRlckxpbmVDbGFzcywgZ3V0dGVyV2lkZ2V0Q2xhc3MsIGd1dHRlcnMsIGhhc0hvdmVyVG9vbHRpcHMsIGhpZ2hsaWdodEFjdGl2ZUxpbmUsIGhpZ2hsaWdodEFjdGl2ZUxpbmVHdXR0ZXIsIGhpZ2hsaWdodFNwZWNpYWxDaGFycywgaGlnaGxpZ2h0VHJhaWxpbmdXaGl0ZXNwYWNlLCBoaWdobGlnaHRXaGl0ZXNwYWNlLCBob3ZlclRvb2x0aXAsIGtleW1hcCwgbGF5ZXIsIGxpbmVOdW1iZXJNYXJrZXJzLCBsaW5lTnVtYmVyV2lkZ2V0TWFya2VyLCBsaW5lTnVtYmVycywgbG9nRXhjZXB0aW9uLCBwYW5lbHMsIHBsYWNlaG9sZGVyLCByZWN0YW5ndWxhclNlbGVjdGlvbiwgcmVwb3NpdGlvblRvb2x0aXBzLCBydW5TY29wZUhhbmRsZXJzLCBzY3JvbGxQYXN0RW5kLCBzaG93RGlhbG9nLCBzaG93UGFuZWwsIHNob3dUb29sdGlwLCB0b29sdGlwcyB9O1xuIiwgImltcG9ydCB7IE5vZGVQcm9wIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5cbmxldCBuZXh0VGFnSUQgPSAwO1xuLyoqXG5IaWdobGlnaHRpbmcgdGFncyBhcmUgbWFya2VycyB0aGF0IGRlbm90ZSBhIGhpZ2hsaWdodGluZyBjYXRlZ29yeS5cblRoZXkgYXJlIFthc3NvY2lhdGVkXSgjaGlnaGxpZ2h0LnN0eWxlVGFncykgd2l0aCBwYXJ0cyBvZiBhIHN5bnRheFxudHJlZSBieSBhIGxhbmd1YWdlIG1vZGUsIGFuZCB0aGVuIG1hcHBlZCB0byBhbiBhY3R1YWwgQ1NTIHN0eWxlIGJ5XG5hIFtoaWdobGlnaHRlcl0oI2hpZ2hsaWdodC5IaWdobGlnaHRlcikuXG5cbkJlY2F1c2Ugc3ludGF4IHRyZWUgbm9kZSB0eXBlcyBhbmQgaGlnaGxpZ2h0IHN0eWxlcyBoYXZlIHRvIGJlXG5hYmxlIHRvIHRhbGsgdGhlIHNhbWUgbGFuZ3VhZ2UsIENvZGVNaXJyb3IgdXNlcyBhIG1vc3RseSBfY2xvc2VkX1xuW3ZvY2FidWxhcnldKCNoaWdobGlnaHQudGFncykgb2Ygc3ludGF4IHRhZ3MgKGFzIG9wcG9zZWQgdG9cbnRyYWRpdGlvbmFsIG9wZW4gc3RyaW5nLWJhc2VkIHN5c3RlbXMsIHdoaWNoIG1ha2UgaXQgaGFyZCBmb3JcbmhpZ2hsaWdodGluZyB0aGVtZXMgdG8gY292ZXIgYWxsIHRoZSB0b2tlbnMgcHJvZHVjZWQgYnkgdGhlXG52YXJpb3VzIGxhbmd1YWdlcykuXG5cbkl0IF9pc18gcG9zc2libGUgdG8gW2RlZmluZV0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lKSB5b3VyIG93blxuaGlnaGxpZ2h0aW5nIHRhZ3MgZm9yIHN5c3RlbS1pbnRlcm5hbCB1c2UgKHdoZXJlIHlvdSBjb250cm9sIGJvdGhcbnRoZSBsYW5ndWFnZSBwYWNrYWdlIGFuZCB0aGUgaGlnaGxpZ2h0ZXIpLCBidXQgc3VjaCB0YWdzIHdpbGwgbm90XG5iZSBwaWNrZWQgdXAgYnkgcmVndWxhciBoaWdobGlnaHRlcnMgKHRob3VnaCB5b3UgY2FuIGRlcml2ZSB0aGVtXG5mcm9tIHN0YW5kYXJkIHRhZ3MgdG8gYWxsb3cgaGlnaGxpZ2h0ZXJzIHRvIGZhbGwgYmFjayB0byB0aG9zZSkuXG4qL1xuY2xhc3MgVGFnIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBvcHRpb25hbCBuYW1lIG9mIHRoZSBiYXNlIHRhZyBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG5hbWUsIFxuICAgIC8qKlxuICAgIFRoZSBzZXQgb2YgdGhpcyB0YWcgYW5kIGFsbCBpdHMgcGFyZW50IHRhZ3MsIHN0YXJ0aW5nIHdpdGhcbiAgICB0aGlzIG9uZSBpdHNlbGYgYW5kIHNvcnRlZCBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIHNwZWNpZmljaXR5LlxuICAgICovXG4gICAgc2V0LCBcbiAgICAvKipcbiAgICBUaGUgYmFzZSB1bm1vZGlmaWVkIHRhZyB0aGF0IHRoaXMgb25lIGlzIGJhc2VkIG9uLCBpZiBpdCdzXG4gICAgbW9kaWZpZWQgQGludGVybmFsXG4gICAgKi9cbiAgICBiYXNlLCBcbiAgICAvKipcbiAgICBUaGUgbW9kaWZpZXJzIGFwcGxpZWQgdG8gdGhpcy5iYXNlIEBpbnRlcm5hbFxuICAgICovXG4gICAgbW9kaWZpZWQpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5zZXQgPSBzZXQ7XG4gICAgICAgIHRoaXMuYmFzZSA9IGJhc2U7XG4gICAgICAgIHRoaXMubW9kaWZpZWQgPSBtb2RpZmllZDtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmlkID0gbmV4dFRhZ0lEKys7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBsZXQgeyBuYW1lIH0gPSB0aGlzO1xuICAgICAgICBmb3IgKGxldCBtb2Qgb2YgdGhpcy5tb2RpZmllZClcbiAgICAgICAgICAgIGlmIChtb2QubmFtZSlcbiAgICAgICAgICAgICAgICBuYW1lID0gYCR7bW9kLm5hbWV9KCR7bmFtZX0pYDtcbiAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuICAgIHN0YXRpYyBkZWZpbmUobmFtZU9yUGFyZW50LCBwYXJlbnQpIHtcbiAgICAgICAgbGV0IG5hbWUgPSB0eXBlb2YgbmFtZU9yUGFyZW50ID09IFwic3RyaW5nXCIgPyBuYW1lT3JQYXJlbnQgOiBcIj9cIjtcbiAgICAgICAgaWYgKG5hbWVPclBhcmVudCBpbnN0YW5jZW9mIFRhZylcbiAgICAgICAgICAgIHBhcmVudCA9IG5hbWVPclBhcmVudDtcbiAgICAgICAgaWYgKHBhcmVudCA9PT0gbnVsbCB8fCBwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudC5iYXNlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuIG5vdCBkZXJpdmUgZnJvbSBhIG1vZGlmaWVkIHRhZ1wiKTtcbiAgICAgICAgbGV0IHRhZyA9IG5ldyBUYWcobmFtZSwgW10sIG51bGwsIFtdKTtcbiAgICAgICAgdGFnLnNldC5wdXNoKHRhZyk7XG4gICAgICAgIGlmIChwYXJlbnQpXG4gICAgICAgICAgICBmb3IgKGxldCB0IG9mIHBhcmVudC5zZXQpXG4gICAgICAgICAgICAgICAgdGFnLnNldC5wdXNoKHQpO1xuICAgICAgICByZXR1cm4gdGFnO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSB0YWcgX21vZGlmaWVyXywgd2hpY2ggaXMgYSBmdW5jdGlvbiB0aGF0LCBnaXZlbiBhIHRhZyxcbiAgICB3aWxsIHJldHVybiBhIHRhZyB0aGF0IGlzIGEgc3VidGFnIG9mIHRoZSBvcmlnaW5hbC4gQXBwbHlpbmcgdGhlXG4gICAgc2FtZSBtb2RpZmllciB0byBhIHR3aWNlIHRhZyB3aWxsIHJldHVybiB0aGUgc2FtZSB2YWx1ZSAoYG0xKHQxKVxuICAgID09IG0xKHQxKWApIGFuZCBhcHBseWluZyBtdWx0aXBsZSBtb2RpZmllcnMgd2lsbCwgcmVnYXJkbGVzcyBvclxuICAgIG9yZGVyLCBwcm9kdWNlIHRoZSBzYW1lIHRhZyAoYG0xKG0yKHQxKSkgPT0gbTIobTEodDEpKWApLlxuICAgIFxuICAgIFdoZW4gbXVsdGlwbGUgbW9kaWZpZXJzIGFyZSBhcHBsaWVkIHRvIGEgZ2l2ZW4gYmFzZSB0YWcsIGVhY2hcbiAgICBzbWFsbGVyIHNldCBvZiBtb2RpZmllcnMgaXMgcmVnaXN0ZXJlZCBhcyBhIHBhcmVudCwgc28gdGhhdCBmb3JcbiAgICBleGFtcGxlIGBtMShtMihtMyh0MSkpKWAgaXMgYSBzdWJ0eXBlIG9mIGBtMShtMih0MSkpYCxcbiAgICBgbTEobTModDEpYCwgYW5kIHNvIG9uLlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZU1vZGlmaWVyKG5hbWUpIHtcbiAgICAgICAgbGV0IG1vZCA9IG5ldyBNb2RpZmllcihuYW1lKTtcbiAgICAgICAgcmV0dXJuICh0YWcpID0+IHtcbiAgICAgICAgICAgIGlmICh0YWcubW9kaWZpZWQuaW5kZXhPZihtb2QpID4gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhZztcbiAgICAgICAgICAgIHJldHVybiBNb2RpZmllci5nZXQodGFnLmJhc2UgfHwgdGFnLCB0YWcubW9kaWZpZWQuY29uY2F0KG1vZCkuc29ydCgoYSwgYikgPT4gYS5pZCAtIGIuaWQpKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5sZXQgbmV4dE1vZGlmaWVySUQgPSAwO1xuY2xhc3MgTW9kaWZpZXIge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBbXTtcbiAgICAgICAgdGhpcy5pZCA9IG5leHRNb2RpZmllcklEKys7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQoYmFzZSwgbW9kcykge1xuICAgICAgICBpZiAoIW1vZHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGJhc2U7XG4gICAgICAgIGxldCBleGlzdHMgPSBtb2RzWzBdLmluc3RhbmNlcy5maW5kKHQgPT4gdC5iYXNlID09IGJhc2UgJiYgc2FtZUFycmF5KG1vZHMsIHQubW9kaWZpZWQpKTtcbiAgICAgICAgaWYgKGV4aXN0cylcbiAgICAgICAgICAgIHJldHVybiBleGlzdHM7XG4gICAgICAgIGxldCBzZXQgPSBbXSwgdGFnID0gbmV3IFRhZyhiYXNlLm5hbWUsIHNldCwgYmFzZSwgbW9kcyk7XG4gICAgICAgIGZvciAobGV0IG0gb2YgbW9kcylcbiAgICAgICAgICAgIG0uaW5zdGFuY2VzLnB1c2godGFnKTtcbiAgICAgICAgbGV0IGNvbmZpZ3MgPSBwb3dlclNldChtb2RzKTtcbiAgICAgICAgZm9yIChsZXQgcGFyZW50IG9mIGJhc2Uuc2V0KVxuICAgICAgICAgICAgaWYgKCFwYXJlbnQubW9kaWZpZWQubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvbmZpZyBvZiBjb25maWdzKVxuICAgICAgICAgICAgICAgICAgICBzZXQucHVzaChNb2RpZmllci5nZXQocGFyZW50LCBjb25maWcpKTtcbiAgICAgICAgcmV0dXJuIHRhZztcbiAgICB9XG59XG5mdW5jdGlvbiBzYW1lQXJyYXkoYSwgYikge1xuICAgIHJldHVybiBhLmxlbmd0aCA9PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KCh4LCBpKSA9PiB4ID09IGJbaV0pO1xufVxuZnVuY3Rpb24gcG93ZXJTZXQoYXJyYXkpIHtcbiAgICBsZXQgc2V0cyA9IFtbXV07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKGxldCBqID0gMCwgZSA9IHNldHMubGVuZ3RoOyBqIDwgZTsgaisrKSB7XG4gICAgICAgICAgICBzZXRzLnB1c2goc2V0c1tqXS5jb25jYXQoYXJyYXlbaV0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2V0cy5zb3J0KChhLCBiKSA9PiBiLmxlbmd0aCAtIGEubGVuZ3RoKTtcbn1cbi8qKlxuVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGFkZCBhIHNldCBvZiB0YWdzIHRvIGEgbGFuZ3VhZ2Ugc3ludGF4XG52aWEgW2BOb2RlU2V0LmV4dGVuZGBdKCNjb21tb24uTm9kZVNldC5leHRlbmQpIG9yXG5bYExSUGFyc2VyLmNvbmZpZ3VyZWBdKCNsci5MUlBhcnNlci5jb25maWd1cmUpLlxuXG5UaGUgYXJndW1lbnQgb2JqZWN0IG1hcHMgbm9kZSBzZWxlY3RvcnMgdG8gW2hpZ2hsaWdodGluZ1xudGFnc10oI2hpZ2hsaWdodC5UYWcpIG9yIGFycmF5cyBvZiB0YWdzLlxuXG5Ob2RlIHNlbGVjdG9ycyBtYXkgaG9sZCBvbmUgb3IgbW9yZSAoc3BhY2Utc2VwYXJhdGVkKSBub2RlIHBhdGhzLlxuU3VjaCBhIHBhdGggY2FuIGJlIGEgW25vZGUgbmFtZV0oI2NvbW1vbi5Ob2RlVHlwZS5uYW1lKSwgb3Jcbm11bHRpcGxlIG5vZGUgbmFtZXMgKG9yIGAqYCB3aWxkY2FyZHMpIHNlcGFyYXRlZCBieSBzbGFzaFxuY2hhcmFjdGVycywgYXMgaW4gYFwiQmxvY2svRGVjbGFyYXRpb24vVmFyaWFibGVOYW1lXCJgLiBTdWNoIGEgcGF0aFxubWF0Y2hlcyB0aGUgZmluYWwgbm9kZSBidXQgb25seSBpZiBpdHMgZGlyZWN0IHBhcmVudCBub2RlcyBhcmUgdGhlXG5vdGhlciBub2RlcyBtZW50aW9uZWQuIEEgYCpgIGluIHN1Y2ggYSBwYXRoIG1hdGNoZXMgYW55IHBhcmVudCxcbmJ1dCBvbmx5IGEgc2luZ2xlIGxldmVsXHUyMDE0d2lsZGNhcmRzIHRoYXQgbWF0Y2ggbXVsdGlwbGUgcGFyZW50c1xuYXJlbid0IHN1cHBvcnRlZCwgYm90aCBmb3IgZWZmaWNpZW5jeSByZWFzb25zIGFuZCBiZWNhdXNlIExlemVyXG50cmVlcyBtYWtlIGl0IHJhdGhlciBoYXJkIHRvIHJlYXNvbiBhYm91dCB3aGF0IHRoZXkgd291bGQgbWF0Y2guKVxuXG5BIHBhdGggY2FuIGJlIGVuZGVkIHdpdGggYC8uLi5gIHRvIGluZGljYXRlIHRoYXQgdGhlIHRhZyBhc3NpZ25lZFxudG8gdGhlIG5vZGUgc2hvdWxkIGFsc28gYXBwbHkgdG8gYWxsIGNoaWxkIG5vZGVzLCBldmVuIGlmIHRoZXlcbm1hdGNoIHRoZWlyIG93biBzdHlsZSAoYnkgZGVmYXVsdCwgb25seSB0aGUgaW5uZXJtb3N0IHN0eWxlIGlzXG51c2VkKS5cblxuV2hlbiBhIHBhdGggZW5kcyBpbiBgIWAsIGFzIGluIGBBdHRyaWJ1dGUhYCwgbm8gZnVydGhlciBtYXRjaGluZ1xuaGFwcGVucyBmb3IgdGhlIG5vZGUncyBjaGlsZCBub2RlcywgYW5kIHRoZSBlbnRpcmUgbm9kZSBnZXRzIHRoZVxuZ2l2ZW4gc3R5bGUuXG5cbkluIHRoaXMgbm90YXRpb24sIG5vZGUgbmFtZXMgdGhhdCBjb250YWluIGAvYCwgYCFgLCBgKmAsIG9yIGAuLi5gXG5tdXN0IGJlIHF1b3RlZCBhcyBKU09OIHN0cmluZ3MuXG5cbkZvciBleGFtcGxlOlxuXG5gYGBqYXZhc2NyaXB0XG5wYXJzZXIuY29uZmlndXJlKHtwcm9wczogW1xuICBzdHlsZVRhZ3Moe1xuICAgIC8vIFN0eWxlIE51bWJlciBhbmQgQmlnTnVtYmVyIG5vZGVzXG4gICAgXCJOdW1iZXIgQmlnTnVtYmVyXCI6IHRhZ3MubnVtYmVyLFxuICAgIC8vIFN0eWxlIEVzY2FwZSBub2RlcyB3aG9zZSBwYXJlbnQgaXMgU3RyaW5nXG4gICAgXCJTdHJpbmcvRXNjYXBlXCI6IHRhZ3MuZXNjYXBlLFxuICAgIC8vIFN0eWxlIGFueXRoaW5nIGluc2lkZSBBdHRyaWJ1dGVzIG5vZGVzXG4gICAgXCJBdHRyaWJ1dGVzIVwiOiB0YWdzLm1ldGEsXG4gICAgLy8gQWRkIGEgc3R5bGUgdG8gYWxsIGNvbnRlbnQgaW5zaWRlIEl0YWxpYyBub2Rlc1xuICAgIFwiSXRhbGljLy4uLlwiOiB0YWdzLmVtcGhhc2lzLFxuICAgIC8vIFN0eWxlIEludmFsaWRTdHJpbmcgbm9kZXMgYXMgYm90aCBgc3RyaW5nYCBhbmQgYGludmFsaWRgXG4gICAgXCJJbnZhbGlkU3RyaW5nXCI6IFt0YWdzLnN0cmluZywgdGFncy5pbnZhbGlkXSxcbiAgICAvLyBTdHlsZSB0aGUgbm9kZSBuYW1lZCBcIi9cIiBhcyBwdW5jdHVhdGlvblxuICAgICdcIi9cIic6IHRhZ3MucHVuY3R1YXRpb25cbiAgfSlcbl19KVxuYGBgXG4qL1xuZnVuY3Rpb24gc3R5bGVUYWdzKHNwZWMpIHtcbiAgICBsZXQgYnlOYW1lID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBwcm9wIGluIHNwZWMpIHtcbiAgICAgICAgbGV0IHRhZ3MgPSBzcGVjW3Byb3BdO1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGFncykpXG4gICAgICAgICAgICB0YWdzID0gW3RhZ3NdO1xuICAgICAgICBmb3IgKGxldCBwYXJ0IG9mIHByb3Auc3BsaXQoXCIgXCIpKVxuICAgICAgICAgICAgaWYgKHBhcnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGllY2VzID0gW10sIG1vZGUgPSAyIC8qIE1vZGUuTm9ybWFsICovLCByZXN0ID0gcGFydDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwb3MgPSAwOzspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3QgPT0gXCIuLi5cIiAmJiBwb3MgPiAwICYmIHBvcyArIDMgPT0gcGFydC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPSAxIC8qIE1vZGUuSW5oZXJpdCAqLztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBtID0gL15cIig/OlteXCJcXFxcXXxcXFxcLikqP1wifFteXFwvIV0rLy5leGVjKHJlc3QpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW0pXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgcGF0aDogXCIgKyBwYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgcGllY2VzLnB1c2gobVswXSA9PSBcIipcIiA/IFwiXCIgOiBtWzBdWzBdID09ICdcIicgPyBKU09OLnBhcnNlKG1bMF0pIDogbVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSBtWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA9PSBwYXJ0Lmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHBhcnRbcG9zKytdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zID09IHBhcnQubGVuZ3RoICYmIG5leHQgPT0gXCIhXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPSAwIC8qIE1vZGUuT3BhcXVlICovO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgIT0gXCIvXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgcGF0aDogXCIgKyBwYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdCA9IHBhcnQuc2xpY2UocG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGxhc3QgPSBwaWVjZXMubGVuZ3RoIC0gMSwgaW5uZXIgPSBwaWVjZXNbbGFzdF07XG4gICAgICAgICAgICAgICAgaWYgKCFpbm5lcilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIHBhdGg6IFwiICsgcGFydCk7XG4gICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSBuZXcgUnVsZSh0YWdzLCBtb2RlLCBsYXN0ID4gMCA/IHBpZWNlcy5zbGljZSgwLCBsYXN0KSA6IG51bGwpO1xuICAgICAgICAgICAgICAgIGJ5TmFtZVtpbm5lcl0gPSBydWxlLnNvcnQoYnlOYW1lW2lubmVyXSk7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBydWxlTm9kZVByb3AuYWRkKGJ5TmFtZSk7XG59XG5jb25zdCBydWxlTm9kZVByb3AgPSBuZXcgTm9kZVByb3Aoe1xuICAgIGNvbWJpbmUoYSwgYikge1xuICAgICAgICBsZXQgY3VyLCByb290LCB0YWtlO1xuICAgICAgICB3aGlsZSAoYSB8fCBiKSB7XG4gICAgICAgICAgICBpZiAoIWEgfHwgYiAmJiBhLmRlcHRoID49IGIuZGVwdGgpIHtcbiAgICAgICAgICAgICAgICB0YWtlID0gYjtcbiAgICAgICAgICAgICAgICBiID0gYi5uZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFrZSA9IGE7XG4gICAgICAgICAgICAgICAgYSA9IGEubmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXIgJiYgY3VyLm1vZGUgPT0gdGFrZS5tb2RlICYmICF0YWtlLmNvbnRleHQgJiYgIWN1ci5jb250ZXh0KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IGNvcHkgPSBuZXcgUnVsZSh0YWtlLnRhZ3MsIHRha2UubW9kZSwgdGFrZS5jb250ZXh0KTtcbiAgICAgICAgICAgIGlmIChjdXIpXG4gICAgICAgICAgICAgICAgY3VyLm5leHQgPSBjb3B5O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJvb3QgPSBjb3B5O1xuICAgICAgICAgICAgY3VyID0gY29weTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcm9vdDtcbiAgICB9XG59KTtcbmNsYXNzIFJ1bGUge1xuICAgIGNvbnN0cnVjdG9yKHRhZ3MsIG1vZGUsIGNvbnRleHQsIG5leHQpIHtcbiAgICAgICAgdGhpcy50YWdzID0gdGFncztcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5uZXh0ID0gbmV4dDtcbiAgICB9XG4gICAgZ2V0IG9wYXF1ZSgpIHsgcmV0dXJuIHRoaXMubW9kZSA9PSAwIC8qIE1vZGUuT3BhcXVlICovOyB9XG4gICAgZ2V0IGluaGVyaXQoKSB7IHJldHVybiB0aGlzLm1vZGUgPT0gMSAvKiBNb2RlLkluaGVyaXQgKi87IH1cbiAgICBzb3J0KG90aGVyKSB7XG4gICAgICAgIGlmICghb3RoZXIgfHwgb3RoZXIuZGVwdGggPCB0aGlzLmRlcHRoKSB7XG4gICAgICAgICAgICB0aGlzLm5leHQgPSBvdGhlcjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIG90aGVyLm5leHQgPSB0aGlzLnNvcnQob3RoZXIubmV4dCk7XG4gICAgICAgIHJldHVybiBvdGhlcjtcbiAgICB9XG4gICAgZ2V0IGRlcHRoKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0ID8gdGhpcy5jb250ZXh0Lmxlbmd0aCA6IDA7IH1cbn1cblJ1bGUuZW1wdHkgPSBuZXcgUnVsZShbXSwgMiAvKiBNb2RlLk5vcm1hbCAqLywgbnVsbCk7XG4vKipcbkRlZmluZSBhIFtoaWdobGlnaHRlcl0oI2hpZ2hsaWdodC5IaWdobGlnaHRlcikgZnJvbSBhbiBhcnJheSBvZlxudGFnL2NsYXNzIHBhaXJzLiBDbGFzc2VzIGFzc29jaWF0ZWQgd2l0aCBtb3JlIHNwZWNpZmljIHRhZ3Mgd2lsbFxudGFrZSBwcmVjZWRlbmNlLlxuKi9cbmZ1bmN0aW9uIHRhZ0hpZ2hsaWdodGVyKHRhZ3MsIG9wdGlvbnMpIHtcbiAgICBsZXQgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBzdHlsZSBvZiB0YWdzKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzdHlsZS50YWcpKVxuICAgICAgICAgICAgbWFwW3N0eWxlLnRhZy5pZF0gPSBzdHlsZS5jbGFzcztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZm9yIChsZXQgdGFnIG9mIHN0eWxlLnRhZylcbiAgICAgICAgICAgICAgICBtYXBbdGFnLmlkXSA9IHN0eWxlLmNsYXNzO1xuICAgIH1cbiAgICBsZXQgeyBzY29wZSwgYWxsID0gbnVsbCB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdHlsZTogKHRhZ3MpID0+IHtcbiAgICAgICAgICAgIGxldCBjbHMgPSBhbGw7XG4gICAgICAgICAgICBmb3IgKGxldCB0YWcgb2YgdGFncykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHN1YiBvZiB0YWcuc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWdDbGFzcyA9IG1hcFtzdWIuaWRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFnQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNscyA9IGNscyA/IGNscyArIFwiIFwiICsgdGFnQ2xhc3MgOiB0YWdDbGFzcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNscztcbiAgICAgICAgfSxcbiAgICAgICAgc2NvcGVcbiAgICB9O1xufVxuZnVuY3Rpb24gaGlnaGxpZ2h0VGFncyhoaWdobGlnaHRlcnMsIHRhZ3MpIHtcbiAgICBsZXQgcmVzdWx0ID0gbnVsbDtcbiAgICBmb3IgKGxldCBoaWdobGlnaHRlciBvZiBoaWdobGlnaHRlcnMpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gaGlnaGxpZ2h0ZXIuc3R5bGUodGFncyk7XG4gICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCA/IHJlc3VsdCArIFwiIFwiICsgdmFsdWUgOiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuSGlnaGxpZ2h0IHRoZSBnaXZlbiBbdHJlZV0oI2NvbW1vbi5UcmVlKSB3aXRoIHRoZSBnaXZlblxuW2hpZ2hsaWdodGVyXSgjaGlnaGxpZ2h0LkhpZ2hsaWdodGVyKS4gT2Z0ZW4sIHRoZSBoaWdoZXItbGV2ZWxcbltgaGlnaGxpZ2h0Q29kZWBdKCNoaWdobGlnaHQuaGlnaGxpZ2h0Q29kZSkgZnVuY3Rpb24gaXMgZWFzaWVyIHRvXG51c2UuXG4qL1xuZnVuY3Rpb24gaGlnaGxpZ2h0VHJlZSh0cmVlLCBoaWdobGlnaHRlciwgXG4vKipcbkFzc2lnbiBzdHlsaW5nIHRvIGEgcmVnaW9uIG9mIHRoZSB0ZXh0LiBXaWxsIGJlIGNhbGxlZCwgaW4gb3JkZXJcbm9mIHBvc2l0aW9uLCBmb3IgYW55IHJhbmdlcyB3aGVyZSBtb3JlIHRoYW4gemVybyBjbGFzc2VzIGFwcGx5LlxuYGNsYXNzZXNgIGlzIGEgc3BhY2Ugc2VwYXJhdGVkIHN0cmluZyBvZiBDU1MgY2xhc3Nlcy5cbiovXG5wdXRTdHlsZSwgXG4vKipcblRoZSBzdGFydCBvZiB0aGUgcmFuZ2UgdG8gaGlnaGxpZ2h0LlxuKi9cbmZyb20gPSAwLCBcbi8qKlxuVGhlIGVuZCBvZiB0aGUgcmFuZ2UuXG4qL1xudG8gPSB0cmVlLmxlbmd0aCkge1xuICAgIGxldCBidWlsZGVyID0gbmV3IEhpZ2hsaWdodEJ1aWxkZXIoZnJvbSwgQXJyYXkuaXNBcnJheShoaWdobGlnaHRlcikgPyBoaWdobGlnaHRlciA6IFtoaWdobGlnaHRlcl0sIHB1dFN0eWxlKTtcbiAgICBidWlsZGVyLmhpZ2hsaWdodFJhbmdlKHRyZWUuY3Vyc29yKCksIGZyb20sIHRvLCBcIlwiLCBidWlsZGVyLmhpZ2hsaWdodGVycyk7XG4gICAgYnVpbGRlci5mbHVzaCh0byk7XG59XG4vKipcbkhpZ2hsaWdodCB0aGUgZ2l2ZW4gdHJlZSB3aXRoIHRoZSBnaXZlbiBoaWdobGlnaHRlciwgY2FsbGluZ1xuYHB1dFRleHRgIGZvciBldmVyeSBwaWVjZSBvZiB0ZXh0LCBlaXRoZXIgd2l0aCBhIHNldCBvZiBjbGFzc2VzIG9yXG53aXRoIHRoZSBlbXB0eSBzdHJpbmcgd2hlbiB1bnN0eWxlZCwgYW5kIGBwdXRCcmVha2AgZm9yIGV2ZXJ5IGxpbmVcbmJyZWFrLlxuKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodENvZGUoY29kZSwgdHJlZSwgaGlnaGxpZ2h0ZXIsIHB1dFRleHQsIHB1dEJyZWFrLCBmcm9tID0gMCwgdG8gPSBjb2RlLmxlbmd0aCkge1xuICAgIGxldCBwb3MgPSBmcm9tO1xuICAgIGZ1bmN0aW9uIHdyaXRlVG8ocCwgY2xhc3Nlcykge1xuICAgICAgICBpZiAocCA8PSBwb3MpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGZvciAobGV0IHRleHQgPSBjb2RlLnNsaWNlKHBvcywgcCksIGkgPSAwOzspIHtcbiAgICAgICAgICAgIGxldCBuZXh0QnJlYWsgPSB0ZXh0LmluZGV4T2YoXCJcXG5cIiwgaSk7XG4gICAgICAgICAgICBsZXQgdXB0byA9IG5leHRCcmVhayA8IDAgPyB0ZXh0Lmxlbmd0aCA6IG5leHRCcmVhaztcbiAgICAgICAgICAgIGlmICh1cHRvID4gaSlcbiAgICAgICAgICAgICAgICBwdXRUZXh0KHRleHQuc2xpY2UoaSwgdXB0byksIGNsYXNzZXMpO1xuICAgICAgICAgICAgaWYgKG5leHRCcmVhayA8IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwdXRCcmVhaygpO1xuICAgICAgICAgICAgaSA9IG5leHRCcmVhayArIDE7XG4gICAgICAgIH1cbiAgICAgICAgcG9zID0gcDtcbiAgICB9XG4gICAgaGlnaGxpZ2h0VHJlZSh0cmVlLCBoaWdobGlnaHRlciwgKGZyb20sIHRvLCBjbGFzc2VzKSA9PiB7XG4gICAgICAgIHdyaXRlVG8oZnJvbSwgXCJcIik7XG4gICAgICAgIHdyaXRlVG8odG8sIGNsYXNzZXMpO1xuICAgIH0sIGZyb20sIHRvKTtcbiAgICB3cml0ZVRvKHRvLCBcIlwiKTtcbn1cbmNsYXNzIEhpZ2hsaWdodEJ1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKGF0LCBoaWdobGlnaHRlcnMsIHNwYW4pIHtcbiAgICAgICAgdGhpcy5hdCA9IGF0O1xuICAgICAgICB0aGlzLmhpZ2hsaWdodGVycyA9IGhpZ2hsaWdodGVycztcbiAgICAgICAgdGhpcy5zcGFuID0gc3BhbjtcbiAgICAgICAgdGhpcy5jbGFzcyA9IFwiXCI7XG4gICAgfVxuICAgIHN0YXJ0U3BhbihhdCwgY2xzKSB7XG4gICAgICAgIGlmIChjbHMgIT0gdGhpcy5jbGFzcykge1xuICAgICAgICAgICAgdGhpcy5mbHVzaChhdCk7XG4gICAgICAgICAgICBpZiAoYXQgPiB0aGlzLmF0KVxuICAgICAgICAgICAgICAgIHRoaXMuYXQgPSBhdDtcbiAgICAgICAgICAgIHRoaXMuY2xhc3MgPSBjbHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2godG8pIHtcbiAgICAgICAgaWYgKHRvID4gdGhpcy5hdCAmJiB0aGlzLmNsYXNzKVxuICAgICAgICAgICAgdGhpcy5zcGFuKHRoaXMuYXQsIHRvLCB0aGlzLmNsYXNzKTtcbiAgICB9XG4gICAgaGlnaGxpZ2h0UmFuZ2UoY3Vyc29yLCBmcm9tLCB0bywgaW5oZXJpdGVkQ2xhc3MsIGhpZ2hsaWdodGVycykge1xuICAgICAgICBsZXQgeyB0eXBlLCBmcm9tOiBzdGFydCwgdG86IGVuZCB9ID0gY3Vyc29yO1xuICAgICAgICBpZiAoc3RhcnQgPj0gdG8gfHwgZW5kIDw9IGZyb20pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0eXBlLmlzVG9wKVxuICAgICAgICAgICAgaGlnaGxpZ2h0ZXJzID0gdGhpcy5oaWdobGlnaHRlcnMuZmlsdGVyKGggPT4gIWguc2NvcGUgfHwgaC5zY29wZSh0eXBlKSk7XG4gICAgICAgIGxldCBjbHMgPSBpbmhlcml0ZWRDbGFzcztcbiAgICAgICAgbGV0IHJ1bGUgPSBnZXRTdHlsZVRhZ3MoY3Vyc29yKSB8fCBSdWxlLmVtcHR5O1xuICAgICAgICBsZXQgdGFnQ2xzID0gaGlnaGxpZ2h0VGFncyhoaWdobGlnaHRlcnMsIHJ1bGUudGFncyk7XG4gICAgICAgIGlmICh0YWdDbHMpIHtcbiAgICAgICAgICAgIGlmIChjbHMpXG4gICAgICAgICAgICAgICAgY2xzICs9IFwiIFwiO1xuICAgICAgICAgICAgY2xzICs9IHRhZ0NscztcbiAgICAgICAgICAgIGlmIChydWxlLm1vZGUgPT0gMSAvKiBNb2RlLkluaGVyaXQgKi8pXG4gICAgICAgICAgICAgICAgaW5oZXJpdGVkQ2xhc3MgKz0gKGluaGVyaXRlZENsYXNzID8gXCIgXCIgOiBcIlwiKSArIHRhZ0NscztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXJ0U3BhbihNYXRoLm1heChmcm9tLCBzdGFydCksIGNscyk7XG4gICAgICAgIGlmIChydWxlLm9wYXF1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IG1vdW50ZWQgPSBjdXJzb3IudHJlZSAmJiBjdXJzb3IudHJlZS5wcm9wKE5vZGVQcm9wLm1vdW50ZWQpO1xuICAgICAgICBpZiAobW91bnRlZCAmJiBtb3VudGVkLm92ZXJsYXkpIHtcbiAgICAgICAgICAgIGxldCBpbm5lciA9IGN1cnNvci5ub2RlLmVudGVyKG1vdW50ZWQub3ZlcmxheVswXS5mcm9tICsgc3RhcnQsIDEpO1xuICAgICAgICAgICAgbGV0IGlubmVySGlnaGxpZ2h0ZXJzID0gdGhpcy5oaWdobGlnaHRlcnMuZmlsdGVyKGggPT4gIWguc2NvcGUgfHwgaC5zY29wZShtb3VudGVkLnRyZWUudHlwZSkpO1xuICAgICAgICAgICAgbGV0IGhhc0NoaWxkID0gY3Vyc29yLmZpcnN0Q2hpbGQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBwb3MgPSBzdGFydDs7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gaSA8IG1vdW50ZWQub3ZlcmxheS5sZW5ndGggPyBtb3VudGVkLm92ZXJsYXlbaV0gOiBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBuZXh0UG9zID0gbmV4dCA/IG5leHQuZnJvbSArIHN0YXJ0IDogZW5kO1xuICAgICAgICAgICAgICAgIGxldCByYW5nZUZyb20gPSBNYXRoLm1heChmcm9tLCBwb3MpLCByYW5nZVRvID0gTWF0aC5taW4odG8sIG5leHRQb3MpO1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZUZyb20gPCByYW5nZVRvICYmIGhhc0NoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChjdXJzb3IuZnJvbSA8IHJhbmdlVG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UmFuZ2UoY3Vyc29yLCByYW5nZUZyb20sIHJhbmdlVG8sIGluaGVyaXRlZENsYXNzLCBoaWdobGlnaHRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFNwYW4oTWF0aC5taW4ocmFuZ2VUbywgY3Vyc29yLnRvKSwgY2xzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJzb3IudG8gPj0gbmV4dFBvcyB8fCAhY3Vyc29yLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFuZXh0IHx8IG5leHRQb3MgPiB0bylcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgcG9zID0gbmV4dC50byArIHN0YXJ0O1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPiBmcm9tKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UmFuZ2UoaW5uZXIuY3Vyc29yKCksIE1hdGgubWF4KGZyb20sIG5leHQuZnJvbSArIHN0YXJ0KSwgTWF0aC5taW4odG8sIHBvcyksIFwiXCIsIGlubmVySGlnaGxpZ2h0ZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFNwYW4oTWF0aC5taW4odG8sIHBvcyksIGNscyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0NoaWxkKVxuICAgICAgICAgICAgICAgIGN1cnNvci5wYXJlbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXJzb3IuZmlyc3RDaGlsZCgpKSB7XG4gICAgICAgICAgICBpZiAobW91bnRlZClcbiAgICAgICAgICAgICAgICBpbmhlcml0ZWRDbGFzcyA9IFwiXCI7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnNvci50byA8PSBmcm9tKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBpZiAoY3Vyc29yLmZyb20gPj0gdG8pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UmFuZ2UoY3Vyc29yLCBmcm9tLCB0bywgaW5oZXJpdGVkQ2xhc3MsIGhpZ2hsaWdodGVycyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFNwYW4oTWF0aC5taW4odG8sIGN1cnNvci50byksIGNscyk7XG4gICAgICAgICAgICB9IHdoaWxlIChjdXJzb3IubmV4dFNpYmxpbmcoKSk7XG4gICAgICAgICAgICBjdXJzb3IucGFyZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbk1hdGNoIGEgc3ludGF4IG5vZGUncyBbaGlnaGxpZ2h0IHJ1bGVzXSgjaGlnaGxpZ2h0LnN0eWxlVGFncykuIElmXG50aGVyZSdzIGEgbWF0Y2gsIHJldHVybiBpdHMgc2V0IG9mIHRhZ3MsIGFuZCB3aGV0aGVyIGl0IGlzXG5vcGFxdWUgKHVzZXMgYSBgIWApIG9yIGFwcGxpZXMgdG8gYWxsIGNoaWxkIG5vZGVzIChgLy4uLmApLlxuKi9cbmZ1bmN0aW9uIGdldFN0eWxlVGFncyhub2RlKSB7XG4gICAgbGV0IHJ1bGUgPSBub2RlLnR5cGUucHJvcChydWxlTm9kZVByb3ApO1xuICAgIHdoaWxlIChydWxlICYmIHJ1bGUuY29udGV4dCAmJiAhbm9kZS5tYXRjaENvbnRleHQocnVsZS5jb250ZXh0KSlcbiAgICAgICAgcnVsZSA9IHJ1bGUubmV4dDtcbiAgICByZXR1cm4gcnVsZSB8fCBudWxsO1xufVxuY29uc3QgdCA9IFRhZy5kZWZpbmU7XG5jb25zdCBjb21tZW50ID0gdCgpLCBuYW1lID0gdCgpLCB0eXBlTmFtZSA9IHQobmFtZSksIHByb3BlcnR5TmFtZSA9IHQobmFtZSksIGxpdGVyYWwgPSB0KCksIHN0cmluZyA9IHQobGl0ZXJhbCksIG51bWJlciA9IHQobGl0ZXJhbCksIGNvbnRlbnQgPSB0KCksIGhlYWRpbmcgPSB0KGNvbnRlbnQpLCBrZXl3b3JkID0gdCgpLCBvcGVyYXRvciA9IHQoKSwgcHVuY3R1YXRpb24gPSB0KCksIGJyYWNrZXQgPSB0KHB1bmN0dWF0aW9uKSwgbWV0YSA9IHQoKTtcbi8qKlxuVGhlIGRlZmF1bHQgc2V0IG9mIGhpZ2hsaWdodGluZyBbdGFnc10oI2hpZ2hsaWdodC5UYWcpLlxuXG5UaGlzIGNvbGxlY3Rpb24gaXMgaGVhdmlseSBiaWFzZWQgdG93YXJkcyBwcm9ncmFtbWluZyBsYW5ndWFnZXMsXG5hbmQgbmVjZXNzYXJpbHkgaW5jb21wbGV0ZS4gQSBmdWxsIG9udG9sb2d5IG9mIHN5bnRhY3RpY1xuY29uc3RydWN0cyB3b3VsZCBmaWxsIGEgc3RhY2sgb2YgYm9va3MsIGFuZCBiZSBpbXByYWN0aWNhbCB0b1xud3JpdGUgdGhlbWVzIGZvci4gU28gdHJ5IHRvIG1ha2UgZG8gd2l0aCB0aGlzIHNldC4gSWYgYWxsIGVsc2VcbmZhaWxzLCBbb3BlbiBhblxuaXNzdWVdKGh0dHBzOi8vZ2l0aHViLmNvbS9jb2RlbWlycm9yL2NvZGVtaXJyb3IubmV4dCkgdG8gcHJvcG9zZSBhXG5uZXcgdGFnLCBvciBbZGVmaW5lXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmUpIGEgbG9jYWwgY3VzdG9tIHRhZyBmb3JcbnlvdXIgdXNlIGNhc2UuXG5cbk5vdGUgdGhhdCBpdCBpcyBub3Qgb2JsaWdhdG9yeSB0byBhbHdheXMgYXR0YWNoIHRoZSBtb3N0IHNwZWNpZmljXG50YWcgcG9zc2libGUgdG8gYW4gZWxlbWVudFx1MjAxNGlmIHlvdXIgZ3JhbW1hciBjYW4ndCBlYXNpbHlcbmRpc3Rpbmd1aXNoIGEgY2VydGFpbiB0eXBlIG9mIGVsZW1lbnQgKHN1Y2ggYXMgYSBsb2NhbCB2YXJpYWJsZSksXG5pdCBpcyBva2F5IHRvIHN0eWxlIGl0IGFzIGl0cyBtb3JlIGdlbmVyYWwgdmFyaWFudCAoYSB2YXJpYWJsZSkuXG5cbkZvciB0YWdzIHRoYXQgZXh0ZW5kIHNvbWUgcGFyZW50IHRhZywgdGhlIGRvY3VtZW50YXRpb24gbGlua3MgdG9cbnRoZSBwYXJlbnQuXG4qL1xuY29uc3QgdGFncyA9IHtcbiAgICAvKipcbiAgICBBIGNvbW1lbnQuXG4gICAgKi9cbiAgICBjb21tZW50LFxuICAgIC8qKlxuICAgIEEgbGluZSBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLlxuICAgICovXG4gICAgbGluZUNvbW1lbnQ6IHQoY29tbWVudCksXG4gICAgLyoqXG4gICAgQSBibG9jayBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLlxuICAgICovXG4gICAgYmxvY2tDb21tZW50OiB0KGNvbW1lbnQpLFxuICAgIC8qKlxuICAgIEEgZG9jdW1lbnRhdGlvbiBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLlxuICAgICovXG4gICAgZG9jQ29tbWVudDogdChjb21tZW50KSxcbiAgICAvKipcbiAgICBBbnkga2luZCBvZiBpZGVudGlmaWVyLlxuICAgICovXG4gICAgbmFtZSxcbiAgICAvKipcbiAgICBUaGUgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKSBvZiBhIHZhcmlhYmxlLlxuICAgICovXG4gICAgdmFyaWFibGVOYW1lOiB0KG5hbWUpLFxuICAgIC8qKlxuICAgIEEgdHlwZSBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpLlxuICAgICovXG4gICAgdHlwZU5hbWU6IHR5cGVOYW1lLFxuICAgIC8qKlxuICAgIEEgdGFnIG5hbWUgKHN1YnRhZyBvZiBbYHR5cGVOYW1lYF0oI2hpZ2hsaWdodC50YWdzLnR5cGVOYW1lKSkuXG4gICAgKi9cbiAgICB0YWdOYW1lOiB0KHR5cGVOYW1lKSxcbiAgICAvKipcbiAgICBBIHByb3BlcnR5IG9yIGZpZWxkIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkuXG4gICAgKi9cbiAgICBwcm9wZXJ0eU5hbWU6IHByb3BlcnR5TmFtZSxcbiAgICAvKipcbiAgICBBbiBhdHRyaWJ1dGUgbmFtZSAoc3VidGFnIG9mIFtgcHJvcGVydHlOYW1lYF0oI2hpZ2hsaWdodC50YWdzLnByb3BlcnR5TmFtZSkpLlxuICAgICovXG4gICAgYXR0cmlidXRlTmFtZTogdChwcm9wZXJ0eU5hbWUpLFxuICAgIC8qKlxuICAgIFRoZSBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpIG9mIGEgY2xhc3MuXG4gICAgKi9cbiAgICBjbGFzc05hbWU6IHQobmFtZSksXG4gICAgLyoqXG4gICAgQSBsYWJlbCBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpLlxuICAgICovXG4gICAgbGFiZWxOYW1lOiB0KG5hbWUpLFxuICAgIC8qKlxuICAgIEEgbmFtZXNwYWNlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkuXG4gICAgKi9cbiAgICBuYW1lc3BhY2U6IHQobmFtZSksXG4gICAgLyoqXG4gICAgVGhlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkgb2YgYSBtYWNyby5cbiAgICAqL1xuICAgIG1hY3JvTmFtZTogdChuYW1lKSxcbiAgICAvKipcbiAgICBBIGxpdGVyYWwgdmFsdWUuXG4gICAgKi9cbiAgICBsaXRlcmFsLFxuICAgIC8qKlxuICAgIEEgc3RyaW5nIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuXG4gICAgKi9cbiAgICBzdHJpbmcsXG4gICAgLyoqXG4gICAgQSBkb2N1bWVudGF0aW9uIFtzdHJpbmddKCNoaWdobGlnaHQudGFncy5zdHJpbmcpLlxuICAgICovXG4gICAgZG9jU3RyaW5nOiB0KHN0cmluZyksXG4gICAgLyoqXG4gICAgQSBjaGFyYWN0ZXIgbGl0ZXJhbCAoc3VidGFnIG9mIFtzdHJpbmddKCNoaWdobGlnaHQudGFncy5zdHJpbmcpKS5cbiAgICAqL1xuICAgIGNoYXJhY3RlcjogdChzdHJpbmcpLFxuICAgIC8qKlxuICAgIEFuIGF0dHJpYnV0ZSB2YWx1ZSAoc3VidGFnIG9mIFtzdHJpbmddKCNoaWdobGlnaHQudGFncy5zdHJpbmcpKS5cbiAgICAqL1xuICAgIGF0dHJpYnV0ZVZhbHVlOiB0KHN0cmluZyksXG4gICAgLyoqXG4gICAgQSBudW1iZXIgW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS5cbiAgICAqL1xuICAgIG51bWJlcixcbiAgICAvKipcbiAgICBBbiBpbnRlZ2VyIFtudW1iZXJdKCNoaWdobGlnaHQudGFncy5udW1iZXIpIGxpdGVyYWwuXG4gICAgKi9cbiAgICBpbnRlZ2VyOiB0KG51bWJlciksXG4gICAgLyoqXG4gICAgQSBmbG9hdGluZy1wb2ludCBbbnVtYmVyXSgjaGlnaGxpZ2h0LnRhZ3MubnVtYmVyKSBsaXRlcmFsLlxuICAgICovXG4gICAgZmxvYXQ6IHQobnVtYmVyKSxcbiAgICAvKipcbiAgICBBIGJvb2xlYW4gW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS5cbiAgICAqL1xuICAgIGJvb2w6IHQobGl0ZXJhbCksXG4gICAgLyoqXG4gICAgUmVndWxhciBleHByZXNzaW9uIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuXG4gICAgKi9cbiAgICByZWdleHA6IHQobGl0ZXJhbCksXG4gICAgLyoqXG4gICAgQW4gZXNjYXBlIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCksIGZvciBleGFtcGxlIGFcbiAgICBiYWNrc2xhc2ggZXNjYXBlIGluIGEgc3RyaW5nLlxuICAgICovXG4gICAgZXNjYXBlOiB0KGxpdGVyYWwpLFxuICAgIC8qKlxuICAgIEEgY29sb3IgW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS5cbiAgICAqL1xuICAgIGNvbG9yOiB0KGxpdGVyYWwpLFxuICAgIC8qKlxuICAgIEEgVVJMIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuXG4gICAgKi9cbiAgICB1cmw6IHQobGl0ZXJhbCksXG4gICAgLyoqXG4gICAgQSBsYW5ndWFnZSBrZXl3b3JkLlxuICAgICovXG4gICAga2V5d29yZCxcbiAgICAvKipcbiAgICBUaGUgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSBmb3IgdGhlIHNlbGYgb3IgdGhpc1xuICAgIG9iamVjdC5cbiAgICAqL1xuICAgIHNlbGY6IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgVGhlIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgZm9yIG51bGwuXG4gICAgKi9cbiAgICBudWxsOiB0KGtleXdvcmQpLFxuICAgIC8qKlxuICAgIEEgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSBkZW5vdGluZyBzb21lIGF0b21pYyB2YWx1ZS5cbiAgICAqL1xuICAgIGF0b206IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgQSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIHRoYXQgcmVwcmVzZW50cyBhIHVuaXQuXG4gICAgKi9cbiAgICB1bml0OiB0KGtleXdvcmQpLFxuICAgIC8qKlxuICAgIEEgbW9kaWZpZXIgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKS5cbiAgICAqL1xuICAgIG1vZGlmaWVyOiB0KGtleXdvcmQpLFxuICAgIC8qKlxuICAgIEEgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSB0aGF0IGFjdHMgYXMgYW4gb3BlcmF0b3IuXG4gICAgKi9cbiAgICBvcGVyYXRvcktleXdvcmQ6IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgQSBjb250cm9sLWZsb3cgcmVsYXRlZCBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpLlxuICAgICovXG4gICAgY29udHJvbEtleXdvcmQ6IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgQSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIHRoYXQgZGVmaW5lcyBzb21ldGhpbmcuXG4gICAgKi9cbiAgICBkZWZpbml0aW9uS2V5d29yZDogdChrZXl3b3JkKSxcbiAgICAvKipcbiAgICBBIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgcmVsYXRlZCB0byBkZWZpbmluZyBvclxuICAgIGludGVyZmFjaW5nIHdpdGggbW9kdWxlcy5cbiAgICAqL1xuICAgIG1vZHVsZUtleXdvcmQ6IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgQW4gb3BlcmF0b3IuXG4gICAgKi9cbiAgICBvcGVyYXRvcixcbiAgICAvKipcbiAgICBBbiBbb3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikgdGhhdCBkZXJlZmVyZW5jZXMgc29tZXRoaW5nLlxuICAgICovXG4gICAgZGVyZWZPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgQXJpdGhtZXRpYy1yZWxhdGVkIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS5cbiAgICAqL1xuICAgIGFyaXRobWV0aWNPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgTG9naWNhbCBbb3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikuXG4gICAgKi9cbiAgICBsb2dpY09wZXJhdG9yOiB0KG9wZXJhdG9yKSxcbiAgICAvKipcbiAgICBCaXQgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLlxuICAgICovXG4gICAgYml0d2lzZU9wZXJhdG9yOiB0KG9wZXJhdG9yKSxcbiAgICAvKipcbiAgICBDb21wYXJpc29uIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS5cbiAgICAqL1xuICAgIGNvbXBhcmVPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgW09wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpIHRoYXQgdXBkYXRlcyBpdHMgb3BlcmFuZC5cbiAgICAqL1xuICAgIHVwZGF0ZU9wZXJhdG9yOiB0KG9wZXJhdG9yKSxcbiAgICAvKipcbiAgICBbT3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikgdGhhdCBkZWZpbmVzIHNvbWV0aGluZy5cbiAgICAqL1xuICAgIGRlZmluaXRpb25PcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgVHlwZS1yZWxhdGVkIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS5cbiAgICAqL1xuICAgIHR5cGVPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgQ29udHJvbC1mbG93IFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS5cbiAgICAqL1xuICAgIGNvbnRyb2xPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgUHJvZ3JhbSBvciBtYXJrdXAgcHVuY3R1YXRpb24uXG4gICAgKi9cbiAgICBwdW5jdHVhdGlvbixcbiAgICAvKipcbiAgICBbUHVuY3R1YXRpb25dKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbikgdGhhdCBzZXBhcmF0ZXNcbiAgICB0aGluZ3MuXG4gICAgKi9cbiAgICBzZXBhcmF0b3I6IHQocHVuY3R1YXRpb24pLFxuICAgIC8qKlxuICAgIEJyYWNrZXQtc3R5bGUgW3B1bmN0dWF0aW9uXSgjaGlnaGxpZ2h0LnRhZ3MucHVuY3R1YXRpb24pLlxuICAgICovXG4gICAgYnJhY2tldCxcbiAgICAvKipcbiAgICBBbmdsZSBbYnJhY2tldHNdKCNoaWdobGlnaHQudGFncy5icmFja2V0KSAodXN1YWxseSBgPGAgYW5kIGA+YFxuICAgIHRva2VucykuXG4gICAgKi9cbiAgICBhbmdsZUJyYWNrZXQ6IHQoYnJhY2tldCksXG4gICAgLyoqXG4gICAgU3F1YXJlIFticmFja2V0c10oI2hpZ2hsaWdodC50YWdzLmJyYWNrZXQpICh1c3VhbGx5IGBbYCBhbmQgYF1gXG4gICAgdG9rZW5zKS5cbiAgICAqL1xuICAgIHNxdWFyZUJyYWNrZXQ6IHQoYnJhY2tldCksXG4gICAgLyoqXG4gICAgUGFyZW50aGVzZXMgKHVzdWFsbHkgYChgIGFuZCBgKWAgdG9rZW5zKS4gU3VidGFnIG9mXG4gICAgW2JyYWNrZXRdKCNoaWdobGlnaHQudGFncy5icmFja2V0KS5cbiAgICAqL1xuICAgIHBhcmVuOiB0KGJyYWNrZXQpLFxuICAgIC8qKlxuICAgIEJyYWNlcyAodXN1YWxseSBge2AgYW5kIGB9YCB0b2tlbnMpLiBTdWJ0YWcgb2ZcbiAgICBbYnJhY2tldF0oI2hpZ2hsaWdodC50YWdzLmJyYWNrZXQpLlxuICAgICovXG4gICAgYnJhY2U6IHQoYnJhY2tldCksXG4gICAgLyoqXG4gICAgQ29udGVudCwgZm9yIGV4YW1wbGUgcGxhaW4gdGV4dCBpbiBYTUwgb3IgbWFya3VwIGRvY3VtZW50cy5cbiAgICAqL1xuICAgIGNvbnRlbnQsXG4gICAgLyoqXG4gICAgW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IHJlcHJlc2VudHMgYSBoZWFkaW5nLlxuICAgICovXG4gICAgaGVhZGluZyxcbiAgICAvKipcbiAgICBBIGxldmVsIDEgW2hlYWRpbmddKCNoaWdobGlnaHQudGFncy5oZWFkaW5nKS5cbiAgICAqL1xuICAgIGhlYWRpbmcxOiB0KGhlYWRpbmcpLFxuICAgIC8qKlxuICAgIEEgbGV2ZWwgMiBbaGVhZGluZ10oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpLlxuICAgICovXG4gICAgaGVhZGluZzI6IHQoaGVhZGluZyksXG4gICAgLyoqXG4gICAgQSBsZXZlbCAzIFtoZWFkaW5nXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZykuXG4gICAgKi9cbiAgICBoZWFkaW5nMzogdChoZWFkaW5nKSxcbiAgICAvKipcbiAgICBBIGxldmVsIDQgW2hlYWRpbmddKCNoaWdobGlnaHQudGFncy5oZWFkaW5nKS5cbiAgICAqL1xuICAgIGhlYWRpbmc0OiB0KGhlYWRpbmcpLFxuICAgIC8qKlxuICAgIEEgbGV2ZWwgNSBbaGVhZGluZ10oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpLlxuICAgICovXG4gICAgaGVhZGluZzU6IHQoaGVhZGluZyksXG4gICAgLyoqXG4gICAgQSBsZXZlbCA2IFtoZWFkaW5nXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZykuXG4gICAgKi9cbiAgICBoZWFkaW5nNjogdChoZWFkaW5nKSxcbiAgICAvKipcbiAgICBBIHByb3NlIFtjb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgc2VwYXJhdG9yIChzdWNoIGFzIGEgaG9yaXpvbnRhbCBydWxlKS5cbiAgICAqL1xuICAgIGNvbnRlbnRTZXBhcmF0b3I6IHQoY29udGVudCksXG4gICAgLyoqXG4gICAgW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IHJlcHJlc2VudHMgYSBsaXN0LlxuICAgICovXG4gICAgbGlzdDogdChjb250ZW50KSxcbiAgICAvKipcbiAgICBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgcmVwcmVzZW50cyBhIHF1b3RlLlxuICAgICovXG4gICAgcXVvdGU6IHQoY29udGVudCksXG4gICAgLyoqXG4gICAgW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IGlzIGVtcGhhc2l6ZWQuXG4gICAgKi9cbiAgICBlbXBoYXNpczogdChjb250ZW50KSxcbiAgICAvKipcbiAgICBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgaXMgc3R5bGVkIHN0cm9uZy5cbiAgICAqL1xuICAgIHN0cm9uZzogdChjb250ZW50KSxcbiAgICAvKipcbiAgICBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgaXMgcGFydCBvZiBhIGxpbmsuXG4gICAgKi9cbiAgICBsaW5rOiB0KGNvbnRlbnQpLFxuICAgIC8qKlxuICAgIFtDb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgdGhhdCBpcyBzdHlsZWQgYXMgY29kZSBvclxuICAgIG1vbm9zcGFjZS5cbiAgICAqL1xuICAgIG1vbm9zcGFjZTogdChjb250ZW50KSxcbiAgICAvKipcbiAgICBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgaGFzIGEgc3RyaWtlLXRocm91Z2hcbiAgICBzdHlsZS5cbiAgICAqL1xuICAgIHN0cmlrZXRocm91Z2g6IHQoY29udGVudCksXG4gICAgLyoqXG4gICAgSW5zZXJ0ZWQgdGV4dCBpbiBhIGNoYW5nZS10cmFja2luZyBmb3JtYXQuXG4gICAgKi9cbiAgICBpbnNlcnRlZDogdCgpLFxuICAgIC8qKlxuICAgIERlbGV0ZWQgdGV4dC5cbiAgICAqL1xuICAgIGRlbGV0ZWQ6IHQoKSxcbiAgICAvKipcbiAgICBDaGFuZ2VkIHRleHQuXG4gICAgKi9cbiAgICBjaGFuZ2VkOiB0KCksXG4gICAgLyoqXG4gICAgQW4gaW52YWxpZCBvciB1bnN5bnRhY3RpYyBlbGVtZW50LlxuICAgICovXG4gICAgaW52YWxpZDogdCgpLFxuICAgIC8qKlxuICAgIE1ldGFkYXRhIG9yIG1ldGEtaW5zdHJ1Y3Rpb24uXG4gICAgKi9cbiAgICBtZXRhLFxuICAgIC8qKlxuICAgIFtNZXRhZGF0YV0oI2hpZ2hsaWdodC50YWdzLm1ldGEpIHRoYXQgYXBwbGllcyB0byB0aGUgZW50aXJlXG4gICAgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBkb2N1bWVudE1ldGE6IHQobWV0YSksXG4gICAgLyoqXG4gICAgW01ldGFkYXRhXSgjaGlnaGxpZ2h0LnRhZ3MubWV0YSkgdGhhdCBhbm5vdGF0ZXMgb3IgYWRkc1xuICAgIGF0dHJpYnV0ZXMgdG8gYSBnaXZlbiBzeW50YWN0aWMgZWxlbWVudC5cbiAgICAqL1xuICAgIGFubm90YXRpb246IHQobWV0YSksXG4gICAgLyoqXG4gICAgUHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBvciBwcmVwcm9jZXNzb3IgZGlyZWN0aXZlLiBTdWJ0YWcgb2ZcbiAgICBbbWV0YV0oI2hpZ2hsaWdodC50YWdzLm1ldGEpLlxuICAgICovXG4gICAgcHJvY2Vzc2luZ0luc3RydWN0aW9uOiB0KG1ldGEpLFxuICAgIC8qKlxuICAgIFtNb2RpZmllcl0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lTW9kaWZpZXIpIHRoYXQgaW5kaWNhdGVzIHRoYXQgYVxuICAgIGdpdmVuIGVsZW1lbnQgaXMgYmVpbmcgZGVmaW5lZC4gRXhwZWN0ZWQgdG8gYmUgdXNlZCB3aXRoIHRoZVxuICAgIHZhcmlvdXMgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKSB0YWdzLlxuICAgICovXG4gICAgZGVmaW5pdGlvbjogVGFnLmRlZmluZU1vZGlmaWVyKFwiZGVmaW5pdGlvblwiKSxcbiAgICAvKipcbiAgICBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB0aGF0IGluZGljYXRlcyB0aGF0XG4gICAgc29tZXRoaW5nIGlzIGNvbnN0YW50LiBNb3N0bHkgZXhwZWN0ZWQgdG8gYmUgdXNlZCB3aXRoXG4gICAgW3ZhcmlhYmxlIG5hbWVzXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKS5cbiAgICAqL1xuICAgIGNvbnN0YW50OiBUYWcuZGVmaW5lTW9kaWZpZXIoXCJjb25zdGFudFwiKSxcbiAgICAvKipcbiAgICBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB1c2VkIHRvIGluZGljYXRlIHRoYXRcbiAgICBhIFt2YXJpYWJsZV0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSkgb3IgW3Byb3BlcnR5XG4gICAgbmFtZV0oI2hpZ2hsaWdodC50YWdzLnByb3BlcnR5TmFtZSkgaXMgYmVpbmcgY2FsbGVkIG9yIGRlZmluZWRcbiAgICBhcyBhIGZ1bmN0aW9uLlxuICAgICovXG4gICAgZnVuY3Rpb246IFRhZy5kZWZpbmVNb2RpZmllcihcImZ1bmN0aW9uXCIpLFxuICAgIC8qKlxuICAgIFtNb2RpZmllcl0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lTW9kaWZpZXIpIHRoYXQgY2FuIGJlIGFwcGxpZWQgdG9cbiAgICBbbmFtZXNdKCNoaWdobGlnaHQudGFncy5uYW1lKSB0byBpbmRpY2F0ZSB0aGF0IHRoZXkgYmVsb25nIHRvXG4gICAgdGhlIGxhbmd1YWdlJ3Mgc3RhbmRhcmQgZW52aXJvbm1lbnQuXG4gICAgKi9cbiAgICBzdGFuZGFyZDogVGFnLmRlZmluZU1vZGlmaWVyKFwic3RhbmRhcmRcIiksXG4gICAgLyoqXG4gICAgW01vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdGhhdCBpbmRpY2F0ZXMgYSBnaXZlblxuICAgIFtuYW1lc10oI2hpZ2hsaWdodC50YWdzLm5hbWUpIGlzIGxvY2FsIHRvIHNvbWUgc2NvcGUuXG4gICAgKi9cbiAgICBsb2NhbDogVGFnLmRlZmluZU1vZGlmaWVyKFwibG9jYWxcIiksXG4gICAgLyoqXG4gICAgQSBnZW5lcmljIHZhcmlhbnQgW21vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdGhhdFxuICAgIGNhbiBiZSB1c2VkIHRvIHRhZyBsYW5ndWFnZS1zcGVjaWZpYyBhbHRlcm5hdGl2ZSB2YXJpYW50cyBvZlxuICAgIHNvbWUgY29tbW9uIHRhZy4gSXQgaXMgcmVjb21tZW5kZWQgZm9yIHRoZW1lcyB0byBkZWZpbmUgc3BlY2lhbFxuICAgIGZvcm1zIG9mIGF0IGxlYXN0IHRoZSBbc3RyaW5nXSgjaGlnaGxpZ2h0LnRhZ3Muc3RyaW5nKSBhbmRcbiAgICBbdmFyaWFibGUgbmFtZV0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSkgdGFncywgc2luY2UgdGhvc2VcbiAgICBjb21lIHVwIGEgbG90LlxuICAgICovXG4gICAgc3BlY2lhbDogVGFnLmRlZmluZU1vZGlmaWVyKFwic3BlY2lhbFwiKVxufTtcbmZvciAobGV0IG5hbWUgaW4gdGFncykge1xuICAgIGxldCB2YWwgPSB0YWdzW25hbWVdO1xuICAgIGlmICh2YWwgaW5zdGFuY2VvZiBUYWcpXG4gICAgICAgIHZhbC5uYW1lID0gbmFtZTtcbn1cbi8qKlxuVGhpcyBpcyBhIGhpZ2hsaWdodGVyIHRoYXQgYWRkcyBzdGFibGUsIHByZWRpY3RhYmxlIGNsYXNzZXMgdG9cbnRva2VucywgZm9yIHN0eWxpbmcgd2l0aCBleHRlcm5hbCBDU1MuXG5cblRoZSBmb2xsb3dpbmcgdGFncyBhcmUgbWFwcGVkIHRvIHRoZWlyIG5hbWUgcHJlZml4ZWQgd2l0aCBgXCJ0b2stXCJgXG4oZm9yIGV4YW1wbGUgYFwidG9rLWNvbW1lbnRcImApOlxuXG4qIFtgbGlua2BdKCNoaWdobGlnaHQudGFncy5saW5rKVxuKiBbYGhlYWRpbmdgXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZylcbiogW2BlbXBoYXNpc2BdKCNoaWdobGlnaHQudGFncy5lbXBoYXNpcylcbiogW2BzdHJvbmdgXSgjaGlnaGxpZ2h0LnRhZ3Muc3Ryb25nKVxuKiBbYGtleXdvcmRgXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZClcbiogW2BhdG9tYF0oI2hpZ2hsaWdodC50YWdzLmF0b20pXG4qIFtgYm9vbGBdKCNoaWdobGlnaHQudGFncy5ib29sKVxuKiBbYHVybGBdKCNoaWdobGlnaHQudGFncy51cmwpXG4qIFtgbGFiZWxOYW1lYF0oI2hpZ2hsaWdodC50YWdzLmxhYmVsTmFtZSlcbiogW2BpbnNlcnRlZGBdKCNoaWdobGlnaHQudGFncy5pbnNlcnRlZClcbiogW2BkZWxldGVkYF0oI2hpZ2hsaWdodC50YWdzLmRlbGV0ZWQpXG4qIFtgbGl0ZXJhbGBdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKVxuKiBbYHN0cmluZ2BdKCNoaWdobGlnaHQudGFncy5zdHJpbmcpXG4qIFtgbnVtYmVyYF0oI2hpZ2hsaWdodC50YWdzLm51bWJlcilcbiogW2B2YXJpYWJsZU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKVxuKiBbYHR5cGVOYW1lYF0oI2hpZ2hsaWdodC50YWdzLnR5cGVOYW1lKVxuKiBbYG5hbWVzcGFjZWBdKCNoaWdobGlnaHQudGFncy5uYW1lc3BhY2UpXG4qIFtgY2xhc3NOYW1lYF0oI2hpZ2hsaWdodC50YWdzLmNsYXNzTmFtZSlcbiogW2BtYWNyb05hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MubWFjcm9OYW1lKVxuKiBbYHByb3BlcnR5TmFtZWBdKCNoaWdobGlnaHQudGFncy5wcm9wZXJ0eU5hbWUpXG4qIFtgb3BlcmF0b3JgXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpXG4qIFtgY29tbWVudGBdKCNoaWdobGlnaHQudGFncy5jb21tZW50KVxuKiBbYG1ldGFgXSgjaGlnaGxpZ2h0LnRhZ3MubWV0YSlcbiogW2BwdW5jdHVhdGlvbmBdKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbilcbiogW2BpbnZhbGlkYF0oI2hpZ2hsaWdodC50YWdzLmludmFsaWQpXG5cbkluIGFkZGl0aW9uLCB0aGVzZSBtYXBwaW5ncyBhcmUgcHJvdmlkZWQ6XG5cbiogW2ByZWdleHBgXSgjaGlnaGxpZ2h0LnRhZ3MucmVnZXhwKSxcbiAgW2Blc2NhcGVgXSgjaGlnaGxpZ2h0LnRhZ3MuZXNjYXBlKSwgYW5kXG4gIFtgc3BlY2lhbGBdKCNoaWdobGlnaHQudGFncy5zcGVjaWFsKVtgKHN0cmluZylgXSgjaGlnaGxpZ2h0LnRhZ3Muc3RyaW5nKVxuICBhcmUgbWFwcGVkIHRvIGBcInRvay1zdHJpbmcyXCJgXG4qIFtgc3BlY2lhbGBdKCNoaWdobGlnaHQudGFncy5zcGVjaWFsKVtgKHZhcmlhYmxlTmFtZSlgXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKVxuICB0byBgXCJ0b2stdmFyaWFibGVOYW1lMlwiYFxuKiBbYGxvY2FsYF0oI2hpZ2hsaWdodC50YWdzLmxvY2FsKVtgKHZhcmlhYmxlTmFtZSlgXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKVxuICB0byBgXCJ0b2stdmFyaWFibGVOYW1lIHRvay1sb2NhbFwiYFxuKiBbYGRlZmluaXRpb25gXSgjaGlnaGxpZ2h0LnRhZ3MuZGVmaW5pdGlvbilbYCh2YXJpYWJsZU5hbWUpYF0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSlcbiAgdG8gYFwidG9rLXZhcmlhYmxlTmFtZSB0b2stZGVmaW5pdGlvblwiYFxuKiBbYGRlZmluaXRpb25gXSgjaGlnaGxpZ2h0LnRhZ3MuZGVmaW5pdGlvbilbYChwcm9wZXJ0eU5hbWUpYF0oI2hpZ2hsaWdodC50YWdzLnByb3BlcnR5TmFtZSlcbiAgdG8gYFwidG9rLXByb3BlcnR5TmFtZSB0b2stZGVmaW5pdGlvblwiYFxuKi9cbmNvbnN0IGNsYXNzSGlnaGxpZ2h0ZXIgPSB0YWdIaWdobGlnaHRlcihbXG4gICAgeyB0YWc6IHRhZ3MubGluaywgY2xhc3M6IFwidG9rLWxpbmtcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmhlYWRpbmcsIGNsYXNzOiBcInRvay1oZWFkaW5nXCIgfSxcbiAgICB7IHRhZzogdGFncy5lbXBoYXNpcywgY2xhc3M6IFwidG9rLWVtcGhhc2lzXCIgfSxcbiAgICB7IHRhZzogdGFncy5zdHJvbmcsIGNsYXNzOiBcInRvay1zdHJvbmdcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmtleXdvcmQsIGNsYXNzOiBcInRvay1rZXl3b3JkXCIgfSxcbiAgICB7IHRhZzogdGFncy5hdG9tLCBjbGFzczogXCJ0b2stYXRvbVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuYm9vbCwgY2xhc3M6IFwidG9rLWJvb2xcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnVybCwgY2xhc3M6IFwidG9rLXVybFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubGFiZWxOYW1lLCBjbGFzczogXCJ0b2stbGFiZWxOYW1lXCIgfSxcbiAgICB7IHRhZzogdGFncy5pbnNlcnRlZCwgY2xhc3M6IFwidG9rLWluc2VydGVkXCIgfSxcbiAgICB7IHRhZzogdGFncy5kZWxldGVkLCBjbGFzczogXCJ0b2stZGVsZXRlZFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubGl0ZXJhbCwgY2xhc3M6IFwidG9rLWxpdGVyYWxcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnN0cmluZywgY2xhc3M6IFwidG9rLXN0cmluZ1wiIH0sXG4gICAgeyB0YWc6IHRhZ3MubnVtYmVyLCBjbGFzczogXCJ0b2stbnVtYmVyXCIgfSxcbiAgICB7IHRhZzogW3RhZ3MucmVnZXhwLCB0YWdzLmVzY2FwZSwgdGFncy5zcGVjaWFsKHRhZ3Muc3RyaW5nKV0sIGNsYXNzOiBcInRvay1zdHJpbmcyXCIgfSxcbiAgICB7IHRhZzogdGFncy52YXJpYWJsZU5hbWUsIGNsYXNzOiBcInRvay12YXJpYWJsZU5hbWVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmxvY2FsKHRhZ3MudmFyaWFibGVOYW1lKSwgY2xhc3M6IFwidG9rLXZhcmlhYmxlTmFtZSB0b2stbG9jYWxcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmRlZmluaXRpb24odGFncy52YXJpYWJsZU5hbWUpLCBjbGFzczogXCJ0b2stdmFyaWFibGVOYW1lIHRvay1kZWZpbml0aW9uXCIgfSxcbiAgICB7IHRhZzogdGFncy5zcGVjaWFsKHRhZ3MudmFyaWFibGVOYW1lKSwgY2xhc3M6IFwidG9rLXZhcmlhYmxlTmFtZTJcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmRlZmluaXRpb24odGFncy5wcm9wZXJ0eU5hbWUpLCBjbGFzczogXCJ0b2stcHJvcGVydHlOYW1lIHRvay1kZWZpbml0aW9uXCIgfSxcbiAgICB7IHRhZzogdGFncy50eXBlTmFtZSwgY2xhc3M6IFwidG9rLXR5cGVOYW1lXCIgfSxcbiAgICB7IHRhZzogdGFncy5uYW1lc3BhY2UsIGNsYXNzOiBcInRvay1uYW1lc3BhY2VcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmNsYXNzTmFtZSwgY2xhc3M6IFwidG9rLWNsYXNzTmFtZVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubWFjcm9OYW1lLCBjbGFzczogXCJ0b2stbWFjcm9OYW1lXCIgfSxcbiAgICB7IHRhZzogdGFncy5wcm9wZXJ0eU5hbWUsIGNsYXNzOiBcInRvay1wcm9wZXJ0eU5hbWVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLm9wZXJhdG9yLCBjbGFzczogXCJ0b2stb3BlcmF0b3JcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmNvbW1lbnQsIGNsYXNzOiBcInRvay1jb21tZW50XCIgfSxcbiAgICB7IHRhZzogdGFncy5tZXRhLCBjbGFzczogXCJ0b2stbWV0YVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuaW52YWxpZCwgY2xhc3M6IFwidG9rLWludmFsaWRcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnB1bmN0dWF0aW9uLCBjbGFzczogXCJ0b2stcHVuY3R1YXRpb25cIiB9XG5dKTtcblxuZXhwb3J0IHsgVGFnLCBjbGFzc0hpZ2hsaWdodGVyLCBnZXRTdHlsZVRhZ3MsIGhpZ2hsaWdodENvZGUsIGhpZ2hsaWdodFRyZWUsIHN0eWxlVGFncywgdGFnSGlnaGxpZ2h0ZXIsIHRhZ3MgfTtcbiIsICJpbXBvcnQgeyBOb2RlUHJvcCwgSXRlck1vZGUsIFRyZWUsIFRyZWVGcmFnbWVudCwgUGFyc2VyLCBOb2RlVHlwZSwgTm9kZVNldCB9IGZyb20gJ0BsZXplci9jb21tb24nO1xuaW1wb3J0IHsgU3RhdGVFZmZlY3QsIFN0YXRlRmllbGQsIEZhY2V0LCBFZGl0b3JTdGF0ZSwgY291bnRDb2x1bW4sIGNvbWJpbmVDb25maWcsIFJhbmdlU2V0LCBSYW5nZVNldEJ1aWxkZXIsIFByZWMgfSBmcm9tICdAY29kZW1pcnJvci9zdGF0ZSc7XG5pbXBvcnQgeyBWaWV3UGx1Z2luLCBsb2dFeGNlcHRpb24sIEVkaXRvclZpZXcsIERlY29yYXRpb24sIFdpZGdldFR5cGUsIGd1dHRlciwgR3V0dGVyTWFya2VyLCBEaXJlY3Rpb24gfSBmcm9tICdAY29kZW1pcnJvci92aWV3JztcbmltcG9ydCB7IHRhZ3MsIHRhZ0hpZ2hsaWdodGVyLCBoaWdobGlnaHRUcmVlLCBzdHlsZVRhZ3MgfSBmcm9tICdAbGV6ZXIvaGlnaGxpZ2h0JztcbmltcG9ydCB7IFN0eWxlTW9kdWxlIH0gZnJvbSAnc3R5bGUtbW9kJztcblxudmFyIF9hO1xuLyoqXG5Ob2RlIHByb3Agc3RvcmVkIGluIGEgcGFyc2VyJ3MgdG9wIHN5bnRheCBub2RlIHRvIHByb3ZpZGUgdGhlXG5mYWNldCB0aGF0IHN0b3JlcyBsYW5ndWFnZS1zcGVjaWZpYyBkYXRhIGZvciB0aGF0IGxhbmd1YWdlLlxuKi9cbmNvbnN0IGxhbmd1YWdlRGF0YVByb3AgPSAvKkBfX1BVUkVfXyovbmV3IE5vZGVQcm9wKCk7XG4vKipcbkhlbHBlciBmdW5jdGlvbiB0byBkZWZpbmUgYSBmYWNldCAodG8gYmUgYWRkZWQgdG8gdGhlIHRvcCBzeW50YXhcbm5vZGUocykgZm9yIGEgbGFuZ3VhZ2UgdmlhXG5bYGxhbmd1YWdlRGF0YVByb3BgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmxhbmd1YWdlRGF0YVByb3ApKSwgdGhhdCB3aWxsIGJlXG51c2VkIHRvIGFzc29jaWF0ZSBsYW5ndWFnZSBkYXRhIHdpdGggdGhlIGxhbmd1YWdlLiBZb3VcbnByb2JhYmx5IG9ubHkgbmVlZCB0aGlzIHdoZW4gc3ViY2xhc3NpbmdcbltgTGFuZ3VhZ2VgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxhbmd1YWdlKS5cbiovXG5mdW5jdGlvbiBkZWZpbmVMYW5ndWFnZUZhY2V0KGJhc2VEYXRhKSB7XG4gICAgcmV0dXJuIEZhY2V0LmRlZmluZSh7XG4gICAgICAgIGNvbWJpbmU6IGJhc2VEYXRhID8gdmFsdWVzID0+IHZhbHVlcy5jb25jYXQoYmFzZURhdGEpIDogdW5kZWZpbmVkXG4gICAgfSk7XG59XG4vKipcblN5bnRheCBub2RlIHByb3AgdXNlZCB0byByZWdpc3RlciBzdWJsYW5ndWFnZXMuIFNob3VsZCBiZSBhZGRlZCB0b1xudGhlIHRvcCBsZXZlbCBub2RlIHR5cGUgZm9yIHRoZSBsYW5ndWFnZS5cbiovXG5jb25zdCBzdWJsYW5ndWFnZVByb3AgPSAvKkBfX1BVUkVfXyovbmV3IE5vZGVQcm9wKCk7XG4vKipcbkEgbGFuZ3VhZ2Ugb2JqZWN0IG1hbmFnZXMgcGFyc2luZyBhbmQgcGVyLWxhbmd1YWdlXG5bbWV0YWRhdGFdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhQXQpLiBQYXJzZSBkYXRhIGlzXG5tYW5hZ2VkIGFzIGEgW0xlemVyXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0KSB0cmVlLiBUaGUgY2xhc3NcbmNhbiBiZSB1c2VkIGRpcmVjdGx5LCB2aWEgdGhlIFtgTFJMYW5ndWFnZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuTFJMYW5ndWFnZSlcbnN1YmNsYXNzIGZvciBbTGV6ZXJdKGh0dHBzOi8vbGV6ZXIuY29kZW1pcnJvci5uZXQvKSBMUiBwYXJzZXJzLCBvclxudmlhIHRoZSBbYFN0cmVhbUxhbmd1YWdlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5TdHJlYW1MYW5ndWFnZSkgc3ViY2xhc3NcbmZvciBzdHJlYW0gcGFyc2Vycy5cbiovXG5jbGFzcyBMYW5ndWFnZSB7XG4gICAgLyoqXG4gICAgQ29uc3RydWN0IGEgbGFuZ3VhZ2Ugb2JqZWN0LiBJZiB5b3UgbmVlZCB0byBpbnZva2UgdGhpc1xuICAgIGRpcmVjdGx5LCBmaXJzdCBkZWZpbmUgYSBkYXRhIGZhY2V0IHdpdGhcbiAgICBbYGRlZmluZUxhbmd1YWdlRmFjZXRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmRlZmluZUxhbmd1YWdlRmFjZXQpLCBhbmQgdGhlblxuICAgIGNvbmZpZ3VyZSB5b3VyIHBhcnNlciB0byBbYXR0YWNoXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmxhbmd1YWdlRGF0YVByb3ApIGl0XG4gICAgdG8gdGhlIGxhbmd1YWdlJ3Mgb3V0ZXIgc3ludGF4IG5vZGUuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgW2xhbmd1YWdlIGRhdGFdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhQXQpIGZhY2V0XG4gICAgdXNlZCBmb3IgdGhpcyBsYW5ndWFnZS5cbiAgICAqL1xuICAgIGRhdGEsIHBhcnNlciwgZXh0cmFFeHRlbnNpb25zID0gW10sIFxuICAgIC8qKlxuICAgIEEgbGFuZ3VhZ2UgbmFtZS5cbiAgICAqL1xuICAgIG5hbWUgPSBcIlwiKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIC8vIEtsdWRnZSB0byBkZWZpbmUgRWRpdG9yU3RhdGUudHJlZSBhcyBhIGRlYnVnZ2luZyBoZWxwZXIsXG4gICAgICAgIC8vIHdpdGhvdXQgdGhlIEVkaXRvclN0YXRlIHBhY2thZ2UgYWN0dWFsbHkga25vd2luZyBhYm91dFxuICAgICAgICAvLyBsYW5ndWFnZXMgYW5kIGxlemVyIHRyZWVzLlxuICAgICAgICBpZiAoIUVkaXRvclN0YXRlLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShcInRyZWVcIikpXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRWRpdG9yU3RhdGUucHJvdG90eXBlLCBcInRyZWVcIiwgeyBnZXQoKSB7IHJldHVybiBzeW50YXhUcmVlKHRoaXMpOyB9IH0pO1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICAgICAgdGhpcy5leHRlbnNpb24gPSBbXG4gICAgICAgICAgICBsYW5ndWFnZS5vZih0aGlzKSxcbiAgICAgICAgICAgIEVkaXRvclN0YXRlLmxhbmd1YWdlRGF0YS5vZigoc3RhdGUsIHBvcywgc2lkZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB0b3AgPSB0b3BOb2RlQXQoc3RhdGUsIHBvcywgc2lkZSksIGRhdGEgPSB0b3AudHlwZS5wcm9wKGxhbmd1YWdlRGF0YVByb3ApO1xuICAgICAgICAgICAgICAgIGlmICghZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIGxldCBiYXNlID0gc3RhdGUuZmFjZXQoZGF0YSksIHN1YiA9IHRvcC50eXBlLnByb3Aoc3VibGFuZ3VhZ2VQcm9wKTtcbiAgICAgICAgICAgICAgICBpZiAoc3ViKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbm5lck5vZGUgPSB0b3AucmVzb2x2ZShwb3MgLSB0b3AuZnJvbSwgc2lkZSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHN1Ymxhbmcgb2Ygc3ViKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YmxhbmcudGVzdChpbm5lck5vZGUsIHN0YXRlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gc3RhdGUuZmFjZXQoc3VibGFuZy5mYWNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YmxhbmcudHlwZSA9PSBcInJlcGxhY2VcIiA/IGRhdGEgOiBkYXRhLmNvbmNhdChiYXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJhc2U7XG4gICAgICAgICAgICB9KVxuICAgICAgICBdLmNvbmNhdChleHRyYUV4dGVuc2lvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICBRdWVyeSB3aGV0aGVyIHRoaXMgbGFuZ3VhZ2UgaXMgYWN0aXZlIGF0IHRoZSBnaXZlbiBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGlzQWN0aXZlQXQoc3RhdGUsIHBvcywgc2lkZSA9IC0xKSB7XG4gICAgICAgIHJldHVybiB0b3BOb2RlQXQoc3RhdGUsIHBvcywgc2lkZSkudHlwZS5wcm9wKGxhbmd1YWdlRGF0YVByb3ApID09IHRoaXMuZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgZG9jdW1lbnQgcmVnaW9ucyB0aGF0IHdlcmUgcGFyc2VkIHVzaW5nIHRoaXMgbGFuZ3VhZ2UuXG4gICAgVGhlIHJldHVybmVkIHJlZ2lvbnMgd2lsbCBfaW5jbHVkZV8gYW55IG5lc3RlZCBsYW5ndWFnZXMgcm9vdGVkXG4gICAgaW4gdGhpcyBsYW5ndWFnZSwgd2hlbiB0aG9zZSBleGlzdC5cbiAgICAqL1xuICAgIGZpbmRSZWdpb25zKHN0YXRlKSB7XG4gICAgICAgIGxldCBsYW5nID0gc3RhdGUuZmFjZXQobGFuZ3VhZ2UpO1xuICAgICAgICBpZiAoKGxhbmcgPT09IG51bGwgfHwgbGFuZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbGFuZy5kYXRhKSA9PSB0aGlzLmRhdGEpXG4gICAgICAgICAgICByZXR1cm4gW3sgZnJvbTogMCwgdG86IHN0YXRlLmRvYy5sZW5ndGggfV07XG4gICAgICAgIGlmICghbGFuZyB8fCAhbGFuZy5hbGxvd3NOZXN0aW5nKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGxldCBleHBsb3JlID0gKHRyZWUsIGZyb20pID0+IHtcbiAgICAgICAgICAgIGlmICh0cmVlLnByb3AobGFuZ3VhZ2VEYXRhUHJvcCkgPT0gdGhpcy5kYXRhKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBmcm9tLCB0bzogZnJvbSArIHRyZWUubGVuZ3RoIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBtb3VudCA9IHRyZWUucHJvcChOb2RlUHJvcC5tb3VudGVkKTtcbiAgICAgICAgICAgIGlmIChtb3VudCkge1xuICAgICAgICAgICAgICAgIGlmIChtb3VudC50cmVlLnByb3AobGFuZ3VhZ2VEYXRhUHJvcCkgPT0gdGhpcy5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3VudC5vdmVybGF5KVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgciBvZiBtb3VudC5vdmVybGF5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsgZnJvbTogci5mcm9tICsgZnJvbSwgdG86IHIudG8gKyBmcm9tIH0pO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7IGZyb206IGZyb20sIHRvOiBmcm9tICsgdHJlZS5sZW5ndGggfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW91bnQub3ZlcmxheSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc2l6ZSA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGV4cGxvcmUobW91bnQudHJlZSwgbW91bnQub3ZlcmxheVswXS5mcm9tICsgZnJvbSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gc2l6ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyZWUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgY2ggPSB0cmVlLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjaCBpbnN0YW5jZW9mIFRyZWUpXG4gICAgICAgICAgICAgICAgICAgIGV4cGxvcmUoY2gsIHRyZWUucG9zaXRpb25zW2ldICsgZnJvbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGV4cGxvcmUoc3ludGF4VHJlZShzdGF0ZSksIDApO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBJbmRpY2F0ZXMgd2hldGhlciB0aGlzIGxhbmd1YWdlIGFsbG93cyBuZXN0ZWQgbGFuZ3VhZ2VzLiBUaGVcbiAgICBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHJldHVybnMgdHJ1ZS5cbiAgICAqL1xuICAgIGdldCBhbGxvd3NOZXN0aW5nKCkgeyByZXR1cm4gdHJ1ZTsgfVxufVxuLyoqXG5AaW50ZXJuYWxcbiovXG5MYW5ndWFnZS5zZXRTdGF0ZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbmZ1bmN0aW9uIHRvcE5vZGVBdChzdGF0ZSwgcG9zLCBzaWRlKSB7XG4gICAgbGV0IHRvcExhbmcgPSBzdGF0ZS5mYWNldChsYW5ndWFnZSksIHRyZWUgPSBzeW50YXhUcmVlKHN0YXRlKS50b3BOb2RlO1xuICAgIGlmICghdG9wTGFuZyB8fCB0b3BMYW5nLmFsbG93c05lc3RpbmcpIHtcbiAgICAgICAgZm9yIChsZXQgbm9kZSA9IHRyZWU7IG5vZGU7IG5vZGUgPSBub2RlLmVudGVyKHBvcywgc2lkZSwgSXRlck1vZGUuRXhjbHVkZUJ1ZmZlcnMgfCBJdGVyTW9kZS5FbnRlckJyYWNrZXRlZCkpXG4gICAgICAgICAgICBpZiAobm9kZS50eXBlLmlzVG9wKVxuICAgICAgICAgICAgICAgIHRyZWUgPSBub2RlO1xuICAgIH1cbiAgICByZXR1cm4gdHJlZTtcbn1cbi8qKlxuQSBzdWJjbGFzcyBvZiBbYExhbmd1YWdlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5MYW5ndWFnZSkgZm9yIHVzZSB3aXRoIExlemVyXG5bTFIgcGFyc2Vyc10oaHR0cHM6Ly9sZXplci5jb2RlbWlycm9yLm5ldC9kb2NzL3JlZiNsci5MUlBhcnNlcilcbnBhcnNlcnMuXG4qL1xuY2xhc3MgTFJMYW5ndWFnZSBleHRlbmRzIExhbmd1YWdlIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBwYXJzZXIsIG5hbWUpIHtcbiAgICAgICAgc3VwZXIoZGF0YSwgcGFyc2VyLCBbXSwgbmFtZSk7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSBsYW5ndWFnZSBmcm9tIGEgcGFyc2VyLlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZShzcGVjKSB7XG4gICAgICAgIGxldCBkYXRhID0gZGVmaW5lTGFuZ3VhZ2VGYWNldChzcGVjLmxhbmd1YWdlRGF0YSk7XG4gICAgICAgIHJldHVybiBuZXcgTFJMYW5ndWFnZShkYXRhLCBzcGVjLnBhcnNlci5jb25maWd1cmUoe1xuICAgICAgICAgICAgcHJvcHM6IFtsYW5ndWFnZURhdGFQcm9wLmFkZCh0eXBlID0+IHR5cGUuaXNUb3AgPyBkYXRhIDogdW5kZWZpbmVkKV1cbiAgICAgICAgfSksIHNwZWMubmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiB0aGlzIGxhbmd1YWdlIHdpdGggYSByZWNvbmZpZ3VyZWRcbiAgICB2ZXJzaW9uIG9mIGl0cyBwYXJzZXIgYW5kIG9wdGlvbmFsbHkgYSBuZXcgbmFtZS5cbiAgICAqL1xuICAgIGNvbmZpZ3VyZShvcHRpb25zLCBuYW1lKSB7XG4gICAgICAgIHJldHVybiBuZXcgTFJMYW5ndWFnZSh0aGlzLmRhdGEsIHRoaXMucGFyc2VyLmNvbmZpZ3VyZShvcHRpb25zKSwgbmFtZSB8fCB0aGlzLm5hbWUpO1xuICAgIH1cbiAgICBnZXQgYWxsb3dzTmVzdGluZygpIHsgcmV0dXJuIHRoaXMucGFyc2VyLmhhc1dyYXBwZXJzKCk7IH1cbn1cbi8qKlxuR2V0IHRoZSBzeW50YXggdHJlZSBmb3IgYSBzdGF0ZSwgd2hpY2ggaXMgdGhlIGN1cnJlbnQgKHBvc3NpYmx5XG5pbmNvbXBsZXRlKSBwYXJzZSB0cmVlIG9mIHRoZSBhY3RpdmVcbltsYW5ndWFnZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5MYW5ndWFnZSksIG9yIHRoZSBlbXB0eSB0cmVlIGlmIHRoZXJlIGlzIG5vXG5sYW5ndWFnZSBhdmFpbGFibGUuXG4qL1xuZnVuY3Rpb24gc3ludGF4VHJlZShzdGF0ZSkge1xuICAgIGxldCBmaWVsZCA9IHN0YXRlLmZpZWxkKExhbmd1YWdlLnN0YXRlLCBmYWxzZSk7XG4gICAgcmV0dXJuIGZpZWxkID8gZmllbGQudHJlZSA6IFRyZWUuZW1wdHk7XG59XG4vKipcblRyeSB0byBnZXQgYSBwYXJzZSB0cmVlIHRoYXQgc3BhbnMgYXQgbGVhc3QgdXAgdG8gYHVwdG9gLiBUaGVcbm1ldGhvZCB3aWxsIGRvIGF0IG1vc3QgYHRpbWVvdXRgIG1pbGxpc2Vjb25kcyBvZiB3b3JrIHRvIHBhcnNlXG51cCB0byB0aGF0IHBvaW50IGlmIHRoZSB0cmVlIGlzbid0IGFscmVhZHkgYXZhaWxhYmxlLlxuKi9cbmZ1bmN0aW9uIGVuc3VyZVN5bnRheFRyZWUoc3RhdGUsIHVwdG8sIHRpbWVvdXQgPSA1MCkge1xuICAgIHZhciBfYTtcbiAgICBsZXQgcGFyc2UgPSAoX2EgPSBzdGF0ZS5maWVsZChMYW5ndWFnZS5zdGF0ZSwgZmFsc2UpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udGV4dDtcbiAgICBpZiAoIXBhcnNlKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgb2xkVmllcG9ydCA9IHBhcnNlLnZpZXdwb3J0O1xuICAgIHBhcnNlLnVwZGF0ZVZpZXdwb3J0KHsgZnJvbTogMCwgdG86IHVwdG8gfSk7XG4gICAgbGV0IHJlc3VsdCA9IHBhcnNlLmlzRG9uZSh1cHRvKSB8fCBwYXJzZS53b3JrKHRpbWVvdXQsIHVwdG8pID8gcGFyc2UudHJlZSA6IG51bGw7XG4gICAgcGFyc2UudXBkYXRlVmlld3BvcnQob2xkVmllcG9ydCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuUXVlcmllcyB3aGV0aGVyIHRoZXJlIGlzIGEgZnVsbCBzeW50YXggdHJlZSBhdmFpbGFibGUgdXAgdG8gdGhlXG5naXZlbiBkb2N1bWVudCBwb3NpdGlvbi4gSWYgdGhlcmUgaXNuJ3QsIHRoZSBiYWNrZ3JvdW5kIHBhcnNlXG5wcm9jZXNzIF9taWdodF8gc3RpbGwgYmUgd29ya2luZyBhbmQgdXBkYXRlIHRoZSB0cmVlIGZ1cnRoZXIsIGJ1dFxudGhlcmUgaXMgbm8gZ3VhcmFudGVlIG9mIHRoYXRcdTIwMTR0aGUgcGFyc2VyIHdpbGwgW3N0b3BcbndvcmtpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2Uuc3ludGF4UGFyc2VyUnVubmluZykgd2hlbiBpdCBoYXMgc3BlbnQgYVxuY2VydGFpbiBhbW91bnQgb2YgdGltZSBvciBoYXMgbW92ZWQgYmV5b25kIHRoZSB2aXNpYmxlIHZpZXdwb3J0LlxuQWx3YXlzIHJldHVybnMgZmFsc2UgaWYgbm8gbGFuZ3VhZ2UgaGFzIGJlZW4gZW5hYmxlZC5cbiovXG5mdW5jdGlvbiBzeW50YXhUcmVlQXZhaWxhYmxlKHN0YXRlLCB1cHRvID0gc3RhdGUuZG9jLmxlbmd0aCkge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gKChfYSA9IHN0YXRlLmZpZWxkKExhbmd1YWdlLnN0YXRlLCBmYWxzZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb250ZXh0LmlzRG9uZSh1cHRvKSkgfHwgZmFsc2U7XG59XG4vKipcbk1vdmUgcGFyc2luZyBmb3J3YXJkLCBhbmQgdXBkYXRlIHRoZSBlZGl0b3Igc3RhdGUgYWZ0ZXJ3YXJkcyB0b1xucmVmbGVjdCB0aGUgbmV3IHRyZWUuIFdpbGwgd29yayBmb3IgYXQgbW9zdCBgdGltZW91dGBcbm1pbGxpc2Vjb25kcy4gUmV0dXJucyB0cnVlIGlmIHRoZSBwYXJzZXIgbWFuYWdlZCBnZXQgdG8gdGhlIGdpdmVuXG5wb3NpdGlvbiBpbiB0aGF0IHRpbWUuXG4qL1xuZnVuY3Rpb24gZm9yY2VQYXJzaW5nKHZpZXcsIHVwdG8gPSB2aWV3LnZpZXdwb3J0LnRvLCB0aW1lb3V0ID0gMTAwKSB7XG4gICAgbGV0IHN1Y2Nlc3MgPSBlbnN1cmVTeW50YXhUcmVlKHZpZXcuc3RhdGUsIHVwdG8sIHRpbWVvdXQpO1xuICAgIGlmIChzdWNjZXNzICE9IHN5bnRheFRyZWUodmlldy5zdGF0ZSkpXG4gICAgICAgIHZpZXcuZGlzcGF0Y2goe30pO1xuICAgIHJldHVybiAhIXN1Y2Nlc3M7XG59XG4vKipcblRlbGxzIHlvdSB3aGV0aGVyIHRoZSBsYW5ndWFnZSBwYXJzZXIgaXMgcGxhbm5pbmcgdG8gZG8gbW9yZVxucGFyc2luZyB3b3JrIChpbiBhIGByZXF1ZXN0SWRsZUNhbGxiYWNrYCBwc2V1ZG8tdGhyZWFkKSBvciBoYXNcbnN0b3BwZWQgcnVubmluZywgZWl0aGVyIGJlY2F1c2UgaXQgcGFyc2VkIHRoZSBlbnRpcmUgZG9jdW1lbnQsXG5iZWNhdXNlIGl0IHNwZW50IHRvbyBtdWNoIHRpbWUgYW5kIHdhcyBjdXQgb2ZmLCBvciBiZWNhdXNlIHRoZXJlXG5pcyBubyBsYW5ndWFnZSBwYXJzZXIgZW5hYmxlZC5cbiovXG5mdW5jdGlvbiBzeW50YXhQYXJzZXJSdW5uaW5nKHZpZXcpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuICgoX2EgPSB2aWV3LnBsdWdpbihwYXJzZVdvcmtlcikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc1dvcmtpbmcoKSkgfHwgZmFsc2U7XG59XG4vKipcbkxlemVyLXN0eWxlXG5bYElucHV0YF0oaHR0cHM6Ly9sZXplci5jb2RlbWlycm9yLm5ldC9kb2NzL3JlZiNjb21tb24uSW5wdXQpXG5vYmplY3QgZm9yIGEgW2BUZXh0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UZXh0KSBvYmplY3QuXG4qL1xuY2xhc3MgRG9jSW5wdXQge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBpbnB1dCBvYmplY3QgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRvYykge1xuICAgICAgICB0aGlzLmRvYyA9IGRvYztcbiAgICAgICAgdGhpcy5jdXJzb3JQb3MgPSAwO1xuICAgICAgICB0aGlzLnN0cmluZyA9IFwiXCI7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gZG9jLml0ZXIoKTtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHsgcmV0dXJuIHRoaXMuZG9jLmxlbmd0aDsgfVxuICAgIHN5bmNUbyhwb3MpIHtcbiAgICAgICAgdGhpcy5zdHJpbmcgPSB0aGlzLmN1cnNvci5uZXh0KHBvcyAtIHRoaXMuY3Vyc29yUG9zKS52YWx1ZTtcbiAgICAgICAgdGhpcy5jdXJzb3JQb3MgPSBwb3MgKyB0aGlzLnN0cmluZy5sZW5ndGg7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnNvclBvcyAtIHRoaXMuc3RyaW5nLmxlbmd0aDtcbiAgICB9XG4gICAgY2h1bmsocG9zKSB7XG4gICAgICAgIHRoaXMuc3luY1RvKHBvcyk7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmluZztcbiAgICB9XG4gICAgZ2V0IGxpbmVDaHVua3MoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgcmVhZChmcm9tLCB0bykge1xuICAgICAgICBsZXQgc3RyaW5nU3RhcnQgPSB0aGlzLmN1cnNvclBvcyAtIHRoaXMuc3RyaW5nLmxlbmd0aDtcbiAgICAgICAgaWYgKGZyb20gPCBzdHJpbmdTdGFydCB8fCB0byA+PSB0aGlzLmN1cnNvclBvcylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvYy5zbGljZVN0cmluZyhmcm9tLCB0byk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmluZy5zbGljZShmcm9tIC0gc3RyaW5nU3RhcnQsIHRvIC0gc3RyaW5nU3RhcnQpO1xuICAgIH1cbn1cbmxldCBjdXJyZW50Q29udGV4dCA9IG51bGw7XG4vKipcbkEgcGFyc2UgY29udGV4dCBwcm92aWRlZCB0byBwYXJzZXJzIHdvcmtpbmcgb24gdGhlIGVkaXRvciBjb250ZW50LlxuKi9cbmNsYXNzIFBhcnNlQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyLCBcbiAgICAvKipcbiAgICBUaGUgY3VycmVudCBlZGl0b3Igc3RhdGUuXG4gICAgKi9cbiAgICBzdGF0ZSwgXG4gICAgLyoqXG4gICAgVHJlZSBmcmFnbWVudHMgdGhhdCBjYW4gYmUgcmV1c2VkIGJ5IGluY3JlbWVudGFsIHJlLXBhcnNlcy5cbiAgICAqL1xuICAgIGZyYWdtZW50cyA9IFtdLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRyZWUsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdHJlZUxlbiwgXG4gICAgLyoqXG4gICAgVGhlIGN1cnJlbnQgZWRpdG9yIHZpZXdwb3J0IChvciBzb21lIG92ZXJhcHByb3hpbWF0aW9uXG4gICAgdGhlcmVvZikuIEludGVuZGVkIHRvIGJlIHVzZWQgZm9yIG9wcG9ydHVuaXN0aWNhbGx5IGF2b2lkaW5nXG4gICAgd29yayAoaW4gd2hpY2ggY2FzZVxuICAgIFtgc2tpcFVudGlsSW5WaWV3YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5QYXJzZUNvbnRleHQuc2tpcFVudGlsSW5WaWV3KVxuICAgIHNob3VsZCBiZSBjYWxsZWQgdG8gbWFrZSBzdXJlIHRoZSBwYXJzZXIgaXMgcmVzdGFydGVkIHdoZW4gdGhlXG4gICAgc2tpcHBlZCByZWdpb24gYmVjb21lcyB2aXNpYmxlKS5cbiAgICAqL1xuICAgIHZpZXdwb3J0LCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNraXBwZWQsIFxuICAgIC8qKlxuICAgIFRoaXMgaXMgd2hlcmUgc2tpcHBpbmcgcGFyc2VycyBjYW4gcmVnaXN0ZXIgYSBwcm9taXNlIHRoYXQsXG4gICAgd2hlbiByZXNvbHZlZCwgd2lsbCBzY2hlZHVsZSBhIG5ldyBwYXJzZS4gSXQgaXMgY2xlYXJlZCB3aGVuXG4gICAgdGhlIHBhcnNlIHdvcmtlciBwaWNrcyB1cCB0aGUgcHJvbWlzZS4gQGludGVybmFsXG4gICAgKi9cbiAgICBzY2hlZHVsZU9uKSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICB0aGlzLnRyZWVMZW4gPSB0cmVlTGVuO1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgICAgIHRoaXMuc2tpcHBlZCA9IHNraXBwZWQ7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVPbiA9IHNjaGVkdWxlT247XG4gICAgICAgIHRoaXMucGFyc2UgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMudGVtcFNraXBwZWQgPSBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKHBhcnNlciwgc3RhdGUsIHZpZXdwb3J0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUGFyc2VDb250ZXh0KHBhcnNlciwgc3RhdGUsIFtdLCBUcmVlLmVtcHR5LCAwLCB2aWV3cG9ydCwgW10sIG51bGwpO1xuICAgIH1cbiAgICBzdGFydFBhcnNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZXIuc3RhcnRQYXJzZShuZXcgRG9jSW5wdXQodGhpcy5zdGF0ZS5kb2MpLCB0aGlzLmZyYWdtZW50cyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgd29yayh1bnRpbCwgdXB0bykge1xuICAgICAgICBpZiAodXB0byAhPSBudWxsICYmIHVwdG8gPj0gdGhpcy5zdGF0ZS5kb2MubGVuZ3RoKVxuICAgICAgICAgICAgdXB0byA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRoaXMudHJlZSAhPSBUcmVlLmVtcHR5ICYmIHRoaXMuaXNEb25lKHVwdG8gIT09IG51bGwgJiYgdXB0byAhPT0gdm9pZCAwID8gdXB0byA6IHRoaXMuc3RhdGUuZG9jLmxlbmd0aCkpIHtcbiAgICAgICAgICAgIHRoaXMudGFrZVRyZWUoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhDb250ZXh0KCgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdW50aWwgPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIGxldCBlbmRUaW1lID0gRGF0ZS5ub3coKSArIHVudGlsO1xuICAgICAgICAgICAgICAgIHVudGlsID0gKCkgPT4gRGF0ZS5ub3coKSA+IGVuZFRpbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyc2UpXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMuc3RhcnRQYXJzZSgpO1xuICAgICAgICAgICAgaWYgKHVwdG8gIT0gbnVsbCAmJiAodGhpcy5wYXJzZS5zdG9wcGVkQXQgPT0gbnVsbCB8fCB0aGlzLnBhcnNlLnN0b3BwZWRBdCA+IHVwdG8pICYmXG4gICAgICAgICAgICAgICAgdXB0byA8IHRoaXMuc3RhdGUuZG9jLmxlbmd0aClcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlLnN0b3BBdCh1cHRvKTtcbiAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICBsZXQgZG9uZSA9IHRoaXMucGFyc2UuYWR2YW5jZSgpO1xuICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhZ21lbnRzID0gdGhpcy53aXRob3V0VGVtcFNraXBwZWQoVHJlZUZyYWdtZW50LmFkZFRyZWUoZG9uZSwgdGhpcy5mcmFnbWVudHMsIHRoaXMucGFyc2Uuc3RvcHBlZEF0ICE9IG51bGwpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlTGVuID0gKF9hID0gdGhpcy5wYXJzZS5zdG9wcGVkQXQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRoaXMuc3RhdGUuZG9jLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlID0gZG9uZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyZWVMZW4gPCAodXB0byAhPT0gbnVsbCAmJiB1cHRvICE9PSB2b2lkIDAgPyB1cHRvIDogdGhpcy5zdGF0ZS5kb2MubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2UgPSB0aGlzLnN0YXJ0UGFyc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh1bnRpbCgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRha2VUcmVlKCkge1xuICAgICAgICBsZXQgcG9zLCB0cmVlO1xuICAgICAgICBpZiAodGhpcy5wYXJzZSAmJiAocG9zID0gdGhpcy5wYXJzZS5wYXJzZWRQb3MpID49IHRoaXMudHJlZUxlbikge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyc2Uuc3RvcHBlZEF0ID09IG51bGwgfHwgdGhpcy5wYXJzZS5zdG9wcGVkQXQgPiBwb3MpXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZS5zdG9wQXQocG9zKTtcbiAgICAgICAgICAgIHRoaXMud2l0aENvbnRleHQoKCkgPT4geyB3aGlsZSAoISh0cmVlID0gdGhpcy5wYXJzZS5hZHZhbmNlKCkpKSB7IH0gfSk7XG4gICAgICAgICAgICB0aGlzLnRyZWVMZW4gPSBwb3M7XG4gICAgICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICAgICAgdGhpcy5mcmFnbWVudHMgPSB0aGlzLndpdGhvdXRUZW1wU2tpcHBlZChUcmVlRnJhZ21lbnQuYWRkVHJlZSh0aGlzLnRyZWUsIHRoaXMuZnJhZ21lbnRzLCB0cnVlKSk7XG4gICAgICAgICAgICB0aGlzLnBhcnNlID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aXRoQ29udGV4dChmKSB7XG4gICAgICAgIGxldCBwcmV2ID0gY3VycmVudENvbnRleHQ7XG4gICAgICAgIGN1cnJlbnRDb250ZXh0ID0gdGhpcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBmKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBjdXJyZW50Q29udGV4dCA9IHByZXY7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2l0aG91dFRlbXBTa2lwcGVkKGZyYWdtZW50cykge1xuICAgICAgICBmb3IgKGxldCByOyByID0gdGhpcy50ZW1wU2tpcHBlZC5wb3AoKTspXG4gICAgICAgICAgICBmcmFnbWVudHMgPSBjdXRGcmFnbWVudHMoZnJhZ21lbnRzLCByLmZyb20sIHIudG8pO1xuICAgICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNoYW5nZXMoY2hhbmdlcywgbmV3U3RhdGUpIHtcbiAgICAgICAgbGV0IHsgZnJhZ21lbnRzLCB0cmVlLCB0cmVlTGVuLCB2aWV3cG9ydCwgc2tpcHBlZCB9ID0gdGhpcztcbiAgICAgICAgdGhpcy50YWtlVHJlZSgpO1xuICAgICAgICBpZiAoIWNoYW5nZXMuZW1wdHkpIHtcbiAgICAgICAgICAgIGxldCByYW5nZXMgPSBbXTtcbiAgICAgICAgICAgIGNoYW5nZXMuaXRlckNoYW5nZWRSYW5nZXMoKGZyb21BLCB0b0EsIGZyb21CLCB0b0IpID0+IHJhbmdlcy5wdXNoKHsgZnJvbUEsIHRvQSwgZnJvbUIsIHRvQiB9KSk7XG4gICAgICAgICAgICBmcmFnbWVudHMgPSBUcmVlRnJhZ21lbnQuYXBwbHlDaGFuZ2VzKGZyYWdtZW50cywgcmFuZ2VzKTtcbiAgICAgICAgICAgIHRyZWUgPSBUcmVlLmVtcHR5O1xuICAgICAgICAgICAgdHJlZUxlbiA9IDA7XG4gICAgICAgICAgICB2aWV3cG9ydCA9IHsgZnJvbTogY2hhbmdlcy5tYXBQb3Modmlld3BvcnQuZnJvbSwgLTEpLCB0bzogY2hhbmdlcy5tYXBQb3Modmlld3BvcnQudG8sIDEpIH07XG4gICAgICAgICAgICBpZiAodGhpcy5za2lwcGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHNraXBwZWQgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByIG9mIHRoaXMuc2tpcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IGNoYW5nZXMubWFwUG9zKHIuZnJvbSwgMSksIHRvID0gY2hhbmdlcy5tYXBQb3Moci50bywgLTEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbSA8IHRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZC5wdXNoKHsgZnJvbSwgdG8gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUGFyc2VDb250ZXh0KHRoaXMucGFyc2VyLCBuZXdTdGF0ZSwgZnJhZ21lbnRzLCB0cmVlLCB0cmVlTGVuLCB2aWV3cG9ydCwgc2tpcHBlZCwgdGhpcy5zY2hlZHVsZU9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB1cGRhdGVWaWV3cG9ydCh2aWV3cG9ydCkge1xuICAgICAgICBpZiAodGhpcy52aWV3cG9ydC5mcm9tID09IHZpZXdwb3J0LmZyb20gJiYgdGhpcy52aWV3cG9ydC50byA9PSB2aWV3cG9ydC50bylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IHZpZXdwb3J0O1xuICAgICAgICBsZXQgc3RhcnRMZW4gPSB0aGlzLnNraXBwZWQubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2tpcHBlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IHRoaXMuc2tpcHBlZFtpXTtcbiAgICAgICAgICAgIGlmIChmcm9tIDwgdmlld3BvcnQudG8gJiYgdG8gPiB2aWV3cG9ydC5mcm9tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFnbWVudHMgPSBjdXRGcmFnbWVudHModGhpcy5mcmFnbWVudHMsIGZyb20sIHRvKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNraXBwZWQuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2tpcHBlZC5sZW5ndGggPj0gc3RhcnRMZW4pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnBhcnNlKSB7XG4gICAgICAgICAgICB0aGlzLnRha2VUcmVlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcnNlID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBOb3RpZnkgdGhlIHBhcnNlIHNjaGVkdWxlciB0aGF0IHRoZSBnaXZlbiByZWdpb24gd2FzIHNraXBwZWRcbiAgICBiZWNhdXNlIGl0IHdhc24ndCBpbiB2aWV3LCBhbmQgdGhlIHBhcnNlIHNob3VsZCBiZSByZXN0YXJ0ZWRcbiAgICB3aGVuIGl0IGNvbWVzIGludG8gdmlldy5cbiAgICAqL1xuICAgIHNraXBVbnRpbEluVmlldyhmcm9tLCB0bykge1xuICAgICAgICB0aGlzLnNraXBwZWQucHVzaCh7IGZyb20sIHRvIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIGEgcGFyc2VyIGludGVuZGVkIHRvIGJlIHVzZWQgYXMgcGxhY2Vob2xkZXIgd2hlblxuICAgIGFzeW5jaHJvbm91c2x5IGxvYWRpbmcgYSBuZXN0ZWQgcGFyc2VyLiBJdCdsbCBza2lwIGl0cyBpbnB1dCBhbmRcbiAgICBtYXJrIGl0IGFzIG5vdC1yZWFsbHktcGFyc2VkLCBzbyB0aGF0IHRoZSBuZXh0IHVwZGF0ZSB3aWxsIHBhcnNlXG4gICAgaXQgYWdhaW4uXG4gICAgXG4gICAgV2hlbiBgdW50aWxgIGlzIGdpdmVuLCBhIHJlcGFyc2Ugd2lsbCBiZSBzY2hlZHVsZWQgd2hlbiB0aGF0XG4gICAgcHJvbWlzZSByZXNvbHZlcy5cbiAgICAqL1xuICAgIHN0YXRpYyBnZXRTa2lwcGluZ1BhcnNlcih1bnRpbCkge1xuICAgICAgICByZXR1cm4gbmV3IGNsYXNzIGV4dGVuZHMgUGFyc2VyIHtcbiAgICAgICAgICAgIGNyZWF0ZVBhcnNlKGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gcmFuZ2VzWzBdLmZyb20sIHRvID0gcmFuZ2VzW3Jhbmdlcy5sZW5ndGggLSAxXS50bztcbiAgICAgICAgICAgICAgICBsZXQgcGFyc2VyID0ge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWRQb3M6IGZyb20sXG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2UoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3ggPSBjdXJyZW50Q29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHIgb2YgcmFuZ2VzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjeC50ZW1wU2tpcHBlZC5wdXNoKHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bnRpbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3guc2NoZWR1bGVPbiA9IGN4LnNjaGVkdWxlT24gPyBQcm9taXNlLmFsbChbY3guc2NoZWR1bGVPbiwgdW50aWxdKSA6IHVudGlsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRQb3MgPSB0bztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVHJlZShOb2RlVHlwZS5ub25lLCBbXSwgW10sIHRvIC0gZnJvbSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN0b3BwZWRBdDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgc3RvcEF0KCkgeyB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGlzRG9uZSh1cHRvKSB7XG4gICAgICAgIHVwdG8gPSBNYXRoLm1pbih1cHRvLCB0aGlzLnN0YXRlLmRvYy5sZW5ndGgpO1xuICAgICAgICBsZXQgZnJhZ3MgPSB0aGlzLmZyYWdtZW50cztcbiAgICAgICAgcmV0dXJuIHRoaXMudHJlZUxlbiA+PSB1cHRvICYmIGZyYWdzLmxlbmd0aCAmJiBmcmFnc1swXS5mcm9tID09IDAgJiYgZnJhZ3NbMF0udG8gPj0gdXB0bztcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBjb250ZXh0IGZvciB0aGUgY3VycmVudCBwYXJzZSwgb3IgYG51bGxgIGlmIG5vIGVkaXRvclxuICAgIHBhcnNlIGlzIGluIHByb2dyZXNzLlxuICAgICovXG4gICAgc3RhdGljIGdldCgpIHsgcmV0dXJuIGN1cnJlbnRDb250ZXh0OyB9XG59XG5mdW5jdGlvbiBjdXRGcmFnbWVudHMoZnJhZ21lbnRzLCBmcm9tLCB0bykge1xuICAgIHJldHVybiBUcmVlRnJhZ21lbnQuYXBwbHlDaGFuZ2VzKGZyYWdtZW50cywgW3sgZnJvbUE6IGZyb20sIHRvQTogdG8sIGZyb21COiBmcm9tLCB0b0I6IHRvIH1dKTtcbn1cbmNsYXNzIExhbmd1YWdlU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIEEgbXV0YWJsZSBwYXJzZSBzdGF0ZSB0aGF0IGlzIHVzZWQgdG8gcHJlc2VydmUgd29yayBkb25lIGR1cmluZ1xuICAgIC8vIHRoZSBsaWZldGltZSBvZiBhIHN0YXRlIHdoZW4gbW92aW5nIHRvIHRoZSBuZXh0IHN0YXRlLlxuICAgIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy50cmVlID0gY29udGV4dC50cmVlO1xuICAgIH1cbiAgICBhcHBseSh0cikge1xuICAgICAgICBpZiAoIXRyLmRvY0NoYW5nZWQgJiYgdGhpcy50cmVlID09IHRoaXMuY29udGV4dC50cmVlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGxldCBuZXdDeCA9IHRoaXMuY29udGV4dC5jaGFuZ2VzKHRyLmNoYW5nZXMsIHRyLnN0YXRlKTtcbiAgICAgICAgLy8gSWYgdGhlIHByZXZpb3VzIHBhcnNlIHdhc24ndCBkb25lLCBnbyBmb3J3YXJkIG9ubHkgdXAgdG8gaXRzXG4gICAgICAgIC8vIGVuZCBwb3NpdGlvbiBvciB0aGUgZW5kIG9mIHRoZSB2aWV3cG9ydCwgdG8gYXZvaWQgc2xvd2luZyBkb3duXG4gICAgICAgIC8vIHN0YXRlIHVwZGF0ZXMgd2l0aCBwYXJzZSB3b3JrIGJleW9uZCB0aGUgdmlld3BvcnQuXG4gICAgICAgIGxldCB1cHRvID0gdGhpcy5jb250ZXh0LnRyZWVMZW4gPT0gdHIuc3RhcnRTdGF0ZS5kb2MubGVuZ3RoID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IE1hdGgubWF4KHRyLmNoYW5nZXMubWFwUG9zKHRoaXMuY29udGV4dC50cmVlTGVuKSwgbmV3Q3gudmlld3BvcnQudG8pO1xuICAgICAgICBpZiAoIW5ld0N4LndvcmsoMjAgLyogV29yay5BcHBseSAqLywgdXB0bykpXG4gICAgICAgICAgICBuZXdDeC50YWtlVHJlZSgpO1xuICAgICAgICByZXR1cm4gbmV3IExhbmd1YWdlU3RhdGUobmV3Q3gpO1xuICAgIH1cbiAgICBzdGF0aWMgaW5pdChzdGF0ZSkge1xuICAgICAgICBsZXQgdnBUbyA9IE1hdGgubWluKDMwMDAgLyogV29yay5Jbml0Vmlld3BvcnQgKi8sIHN0YXRlLmRvYy5sZW5ndGgpO1xuICAgICAgICBsZXQgcGFyc2VTdGF0ZSA9IFBhcnNlQ29udGV4dC5jcmVhdGUoc3RhdGUuZmFjZXQobGFuZ3VhZ2UpLnBhcnNlciwgc3RhdGUsIHsgZnJvbTogMCwgdG86IHZwVG8gfSk7XG4gICAgICAgIGlmICghcGFyc2VTdGF0ZS53b3JrKDIwIC8qIFdvcmsuQXBwbHkgKi8sIHZwVG8pKVxuICAgICAgICAgICAgcGFyc2VTdGF0ZS50YWtlVHJlZSgpO1xuICAgICAgICByZXR1cm4gbmV3IExhbmd1YWdlU3RhdGUocGFyc2VTdGF0ZSk7XG4gICAgfVxufVxuTGFuZ3VhZ2Uuc3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZTogTGFuZ3VhZ2VTdGF0ZS5pbml0LFxuICAgIHVwZGF0ZSh2YWx1ZSwgdHIpIHtcbiAgICAgICAgZm9yIChsZXQgZSBvZiB0ci5lZmZlY3RzKVxuICAgICAgICAgICAgaWYgKGUuaXMoTGFuZ3VhZ2Uuc2V0U3RhdGUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBlLnZhbHVlO1xuICAgICAgICBpZiAodHIuc3RhcnRTdGF0ZS5mYWNldChsYW5ndWFnZSkgIT0gdHIuc3RhdGUuZmFjZXQobGFuZ3VhZ2UpKVxuICAgICAgICAgICAgcmV0dXJuIExhbmd1YWdlU3RhdGUuaW5pdCh0ci5zdGF0ZSk7XG4gICAgICAgIHJldHVybiB2YWx1ZS5hcHBseSh0cik7XG4gICAgfVxufSk7XG5sZXQgcmVxdWVzdElkbGUgPSAoY2FsbGJhY2spID0+IHtcbiAgICBsZXQgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gY2FsbGJhY2soKSwgNTAwIC8qIFdvcmsuTWF4UGF1c2UgKi8pO1xuICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZW91dCk7XG59O1xuaWYgKHR5cGVvZiByZXF1ZXN0SWRsZUNhbGxiYWNrICE9IFwidW5kZWZpbmVkXCIpXG4gICAgcmVxdWVzdElkbGUgPSAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgbGV0IGlkbGUgPSAtMSwgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWRsZSA9IHJlcXVlc3RJZGxlQ2FsbGJhY2soY2FsbGJhY2ssIHsgdGltZW91dDogNTAwIC8qIFdvcmsuTWF4UGF1c2UgKi8gLSAxMDAgLyogV29yay5NaW5QYXVzZSAqLyB9KTtcbiAgICAgICAgfSwgMTAwIC8qIFdvcmsuTWluUGF1c2UgKi8pO1xuICAgICAgICByZXR1cm4gKCkgPT4gaWRsZSA8IDAgPyBjbGVhclRpbWVvdXQodGltZW91dCkgOiBjYW5jZWxJZGxlQ2FsbGJhY2soaWRsZSk7XG4gICAgfTtcbmNvbnN0IGlzSW5wdXRQZW5kaW5nID0gdHlwZW9mIG5hdmlnYXRvciAhPSBcInVuZGVmaW5lZFwiICYmICgoX2EgPSBuYXZpZ2F0b3Iuc2NoZWR1bGluZykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzSW5wdXRQZW5kaW5nKVxuICAgID8gKCkgPT4gbmF2aWdhdG9yLnNjaGVkdWxpbmcuaXNJbnB1dFBlbmRpbmcoKSA6IG51bGw7XG5jb25zdCBwYXJzZVdvcmtlciA9IC8qQF9fUFVSRV9fKi9WaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyBQYXJzZVdvcmtlciB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLndvcmtpbmcgPSBudWxsO1xuICAgICAgICB0aGlzLndvcmtTY2hlZHVsZWQgPSAwO1xuICAgICAgICAvLyBFbmQgb2YgdGhlIGN1cnJlbnQgdGltZSBjaHVua1xuICAgICAgICB0aGlzLmNodW5rRW5kID0gLTE7XG4gICAgICAgIC8vIE1pbGxpc2Vjb25kcyBvZiBidWRnZXQgbGVmdCBmb3IgdGhpcyBjaHVua1xuICAgICAgICB0aGlzLmNodW5rQnVkZ2V0ID0gLTE7XG4gICAgICAgIHRoaXMud29yayA9IHRoaXMud29yay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlV29yaygpO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGxldCBjeCA9IHRoaXMudmlldy5zdGF0ZS5maWVsZChMYW5ndWFnZS5zdGF0ZSkuY29udGV4dDtcbiAgICAgICAgaWYgKGN4LnVwZGF0ZVZpZXdwb3J0KHVwZGF0ZS52aWV3LnZpZXdwb3J0KSB8fCB0aGlzLnZpZXcudmlld3BvcnQudG8gPiBjeC50cmVlTGVuKVxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZVdvcmsoKTtcbiAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZXcuaGFzRm9jdXMpXG4gICAgICAgICAgICAgICAgdGhpcy5jaHVua0J1ZGdldCArPSA1MCAvKiBXb3JrLkNoYW5nZUJvbnVzICovO1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZVdvcmsoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoZWNrQXN5bmNTY2hlZHVsZShjeCk7XG4gICAgfVxuICAgIHNjaGVkdWxlV29yaygpIHtcbiAgICAgICAgaWYgKHRoaXMud29ya2luZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IHsgc3RhdGUgfSA9IHRoaXMudmlldywgZmllbGQgPSBzdGF0ZS5maWVsZChMYW5ndWFnZS5zdGF0ZSk7XG4gICAgICAgIGlmIChmaWVsZC50cmVlICE9IGZpZWxkLmNvbnRleHQudHJlZSB8fCAhZmllbGQuY29udGV4dC5pc0RvbmUoc3RhdGUuZG9jLmxlbmd0aCkpXG4gICAgICAgICAgICB0aGlzLndvcmtpbmcgPSByZXF1ZXN0SWRsZSh0aGlzLndvcmspO1xuICAgIH1cbiAgICB3b3JrKGRlYWRsaW5lKSB7XG4gICAgICAgIHRoaXMud29ya2luZyA9IG51bGw7XG4gICAgICAgIGxldCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBpZiAodGhpcy5jaHVua0VuZCA8IG5vdyAmJiAodGhpcy5jaHVua0VuZCA8IDAgfHwgdGhpcy52aWV3Lmhhc0ZvY3VzKSkgeyAvLyBTdGFydCBhIG5ldyBjaHVua1xuICAgICAgICAgICAgdGhpcy5jaHVua0VuZCA9IG5vdyArIDMwMDAwIC8qIFdvcmsuQ2h1bmtUaW1lICovO1xuICAgICAgICAgICAgdGhpcy5jaHVua0J1ZGdldCA9IDMwMDAgLyogV29yay5DaHVua0J1ZGdldCAqLztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jaHVua0J1ZGdldCA8PSAwKVxuICAgICAgICAgICAgcmV0dXJuOyAvLyBObyBtb3JlIGJ1ZGdldFxuICAgICAgICBsZXQgeyBzdGF0ZSwgdmlld3BvcnQ6IHsgdG86IHZwVG8gfSB9ID0gdGhpcy52aWV3LCBmaWVsZCA9IHN0YXRlLmZpZWxkKExhbmd1YWdlLnN0YXRlKTtcbiAgICAgICAgaWYgKGZpZWxkLnRyZWUgPT0gZmllbGQuY29udGV4dC50cmVlICYmIGZpZWxkLmNvbnRleHQuaXNEb25lKHZwVG8gKyAxMDAwMDAgLyogV29yay5NYXhQYXJzZUFoZWFkICovKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGVuZFRpbWUgPSBEYXRlLm5vdygpICsgTWF0aC5taW4odGhpcy5jaHVua0J1ZGdldCwgMTAwIC8qIFdvcmsuU2xpY2UgKi8sIGRlYWRsaW5lICYmICFpc0lucHV0UGVuZGluZyA/IE1hdGgubWF4KDI1IC8qIFdvcmsuTWluU2xpY2UgKi8sIGRlYWRsaW5lLnRpbWVSZW1haW5pbmcoKSAtIDUpIDogMWU5KTtcbiAgICAgICAgbGV0IHZpZXdwb3J0Rmlyc3QgPSBmaWVsZC5jb250ZXh0LnRyZWVMZW4gPCB2cFRvICYmIHN0YXRlLmRvYy5sZW5ndGggPiB2cFRvICsgMTAwMDtcbiAgICAgICAgbGV0IGRvbmUgPSBmaWVsZC5jb250ZXh0LndvcmsoKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGlzSW5wdXRQZW5kaW5nICYmIGlzSW5wdXRQZW5kaW5nKCkgfHwgRGF0ZS5ub3coKSA+IGVuZFRpbWU7XG4gICAgICAgIH0sIHZwVG8gKyAodmlld3BvcnRGaXJzdCA/IDAgOiAxMDAwMDAgLyogV29yay5NYXhQYXJzZUFoZWFkICovKSk7XG4gICAgICAgIHRoaXMuY2h1bmtCdWRnZXQgLT0gRGF0ZS5ub3coKSAtIG5vdztcbiAgICAgICAgaWYgKGRvbmUgfHwgdGhpcy5jaHVua0J1ZGdldCA8PSAwKSB7XG4gICAgICAgICAgICBmaWVsZC5jb250ZXh0LnRha2VUcmVlKCk7XG4gICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBMYW5ndWFnZS5zZXRTdGF0ZS5vZihuZXcgTGFuZ3VhZ2VTdGF0ZShmaWVsZC5jb250ZXh0KSkgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2h1bmtCdWRnZXQgPiAwICYmICEoZG9uZSAmJiAhdmlld3BvcnRGaXJzdCkpXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlV29yaygpO1xuICAgICAgICB0aGlzLmNoZWNrQXN5bmNTY2hlZHVsZShmaWVsZC5jb250ZXh0KTtcbiAgICB9XG4gICAgY2hlY2tBc3luY1NjaGVkdWxlKGN4KSB7XG4gICAgICAgIGlmIChjeC5zY2hlZHVsZU9uKSB7XG4gICAgICAgICAgICB0aGlzLndvcmtTY2hlZHVsZWQrKztcbiAgICAgICAgICAgIGN4LnNjaGVkdWxlT25cbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLnNjaGVkdWxlV29yaygpKVxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gbG9nRXhjZXB0aW9uKHRoaXMudmlldy5zdGF0ZSwgZXJyKSlcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLndvcmtTY2hlZHVsZWQtLSk7XG4gICAgICAgICAgICBjeC5zY2hlZHVsZU9uID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy53b3JraW5nKVxuICAgICAgICAgICAgdGhpcy53b3JraW5nKCk7XG4gICAgfVxuICAgIGlzV29ya2luZygpIHtcbiAgICAgICAgcmV0dXJuICEhKHRoaXMud29ya2luZyB8fCB0aGlzLndvcmtTY2hlZHVsZWQgPiAwKTtcbiAgICB9XG59LCB7XG4gICAgZXZlbnRIYW5kbGVyczogeyBmb2N1cygpIHsgdGhpcy5zY2hlZHVsZVdvcmsoKTsgfSB9XG59KTtcbi8qKlxuVGhlIGZhY2V0IHVzZWQgdG8gYXNzb2NpYXRlIGEgbGFuZ3VhZ2Ugd2l0aCBhbiBlZGl0b3Igc3RhdGUuIFVzZWRcbmJ5IGBMYW5ndWFnZWAgb2JqZWN0J3MgYGV4dGVuc2lvbmAgcHJvcGVydHkgKHNvIHlvdSBkb24ndCBuZWVkIHRvXG5tYW51YWxseSB3cmFwIHlvdXIgbGFuZ3VhZ2VzIGluIHRoaXMpLiBDYW4gYmUgdXNlZCB0byBhY2Nlc3MgdGhlXG5jdXJyZW50IGxhbmd1YWdlIG9uIGEgc3RhdGUuXG4qL1xuY29uc3QgbGFuZ3VhZ2UgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGxhbmd1YWdlcykgeyByZXR1cm4gbGFuZ3VhZ2VzLmxlbmd0aCA/IGxhbmd1YWdlc1swXSA6IG51bGw7IH0sXG4gICAgZW5hYmxlczogbGFuZ3VhZ2UgPT4gW1xuICAgICAgICBMYW5ndWFnZS5zdGF0ZSxcbiAgICAgICAgcGFyc2VXb3JrZXIsXG4gICAgICAgIEVkaXRvclZpZXcuY29udGVudEF0dHJpYnV0ZXMuY29tcHV0ZShbbGFuZ3VhZ2VdLCBzdGF0ZSA9PiB7XG4gICAgICAgICAgICBsZXQgbGFuZyA9IHN0YXRlLmZhY2V0KGxhbmd1YWdlKTtcbiAgICAgICAgICAgIHJldHVybiBsYW5nICYmIGxhbmcubmFtZSA/IHsgXCJkYXRhLWxhbmd1YWdlXCI6IGxhbmcubmFtZSB9IDoge307XG4gICAgICAgIH0pXG4gICAgXVxufSk7XG4vKipcblRoaXMgY2xhc3MgYnVuZGxlcyBhIFtsYW5ndWFnZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5MYW5ndWFnZSkgd2l0aCBhblxub3B0aW9uYWwgc2V0IG9mIHN1cHBvcnRpbmcgZXh0ZW5zaW9ucy4gTGFuZ3VhZ2UgcGFja2FnZXMgYXJlXG5lbmNvdXJhZ2VkIHRvIGV4cG9ydCBhIGZ1bmN0aW9uIHRoYXQgb3B0aW9uYWxseSB0YWtlcyBhXG5jb25maWd1cmF0aW9uIG9iamVjdCBhbmQgcmV0dXJucyBhIGBMYW5ndWFnZVN1cHBvcnRgIGluc3RhbmNlLCBhc1xudGhlIG1haW4gd2F5IGZvciBjbGllbnQgY29kZSB0byB1c2UgdGhlIHBhY2thZ2UuXG4qL1xuY2xhc3MgTGFuZ3VhZ2VTdXBwb3J0IHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBsYW5ndWFnZSBzdXBwb3J0IG9iamVjdC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBsYW5ndWFnZSBvYmplY3QuXG4gICAgKi9cbiAgICBsYW5ndWFnZSwgXG4gICAgLyoqXG4gICAgQW4gb3B0aW9uYWwgc2V0IG9mIHN1cHBvcnRpbmcgZXh0ZW5zaW9ucy4gV2hlbiBuZXN0aW5nIGFcbiAgICBsYW5ndWFnZSBpbiBhbm90aGVyIGxhbmd1YWdlLCB0aGUgb3V0ZXIgbGFuZ3VhZ2UgaXMgZW5jb3VyYWdlZFxuICAgIHRvIGluY2x1ZGUgdGhlIHN1cHBvcnRpbmcgZXh0ZW5zaW9ucyBmb3IgaXRzIGlubmVyIGxhbmd1YWdlc1xuICAgIGluIGl0cyBvd24gc2V0IG9mIHN1cHBvcnQgZXh0ZW5zaW9ucy5cbiAgICAqL1xuICAgIHN1cHBvcnQgPSBbXSkge1xuICAgICAgICB0aGlzLmxhbmd1YWdlID0gbGFuZ3VhZ2U7XG4gICAgICAgIHRoaXMuc3VwcG9ydCA9IHN1cHBvcnQ7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uID0gW2xhbmd1YWdlLCBzdXBwb3J0XTtcbiAgICB9XG59XG4vKipcbkxhbmd1YWdlIGRlc2NyaXB0aW9ucyBhcmUgdXNlZCB0byBzdG9yZSBtZXRhZGF0YSBhYm91dCBsYW5ndWFnZXNcbmFuZCB0byBkeW5hbWljYWxseSBsb2FkIHRoZW0uIFRoZWlyIG1haW4gcm9sZSBpcyBmaW5kaW5nIHRoZVxuYXBwcm9wcmlhdGUgbGFuZ3VhZ2UgZm9yIGEgZmlsZW5hbWUgb3IgZHluYW1pY2FsbHkgbG9hZGluZyBuZXN0ZWRcbnBhcnNlcnMuXG4qL1xuY2xhc3MgTGFuZ3VhZ2VEZXNjcmlwdGlvbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIG5hbWUgb2YgdGhpcyBsYW5ndWFnZS5cbiAgICAqL1xuICAgIG5hbWUsIFxuICAgIC8qKlxuICAgIEFsdGVybmF0aXZlIG5hbWVzIGZvciB0aGUgbW9kZSAobG93ZXJjYXNlZCwgaW5jbHVkZXMgYHRoaXMubmFtZWApLlxuICAgICovXG4gICAgYWxpYXMsIFxuICAgIC8qKlxuICAgIEZpbGUgZXh0ZW5zaW9ucyBhc3NvY2lhdGVkIHdpdGggdGhpcyBsYW5ndWFnZS5cbiAgICAqL1xuICAgIGV4dGVuc2lvbnMsIFxuICAgIC8qKlxuICAgIE9wdGlvbmFsIGZpbGVuYW1lIHBhdHRlcm4gdGhhdCBzaG91bGQgYmUgYXNzb2NpYXRlZCB3aXRoIHRoaXNcbiAgICBsYW5ndWFnZS5cbiAgICAqL1xuICAgIGZpbGVuYW1lLCBsb2FkRnVuYywgXG4gICAgLyoqXG4gICAgSWYgdGhlIGxhbmd1YWdlIGhhcyBiZWVuIGxvYWRlZCwgdGhpcyB3aWxsIGhvbGQgaXRzIHZhbHVlLlxuICAgICovXG4gICAgc3VwcG9ydCA9IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmFsaWFzID0gYWxpYXM7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnM7XG4gICAgICAgIHRoaXMuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICAgICAgdGhpcy5sb2FkRnVuYyA9IGxvYWRGdW5jO1xuICAgICAgICB0aGlzLnN1cHBvcnQgPSBzdXBwb3J0O1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBTdGFydCBsb2FkaW5nIHRoZSB0aGUgbGFuZ3VhZ2UuIFdpbGwgcmV0dXJuIGEgcHJvbWlzZSB0aGF0XG4gICAgcmVzb2x2ZXMgdG8gYSBbYExhbmd1YWdlU3VwcG9ydGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuTGFuZ3VhZ2VTdXBwb3J0KVxuICAgIG9iamVjdCB3aGVuIHRoZSBsYW5ndWFnZSBzdWNjZXNzZnVsbHkgbG9hZHMuXG4gICAgKi9cbiAgICBsb2FkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkaW5nIHx8ICh0aGlzLmxvYWRpbmcgPSB0aGlzLmxvYWRGdW5jKCkudGhlbihzdXBwb3J0ID0+IHRoaXMuc3VwcG9ydCA9IHN1cHBvcnQsIGVyciA9PiB7IHRoaXMubG9hZGluZyA9IG51bGw7IHRocm93IGVycjsgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBsYW5ndWFnZSBkZXNjcmlwdGlvbi5cbiAgICAqL1xuICAgIHN0YXRpYyBvZihzcGVjKSB7XG4gICAgICAgIGxldCB7IGxvYWQsIHN1cHBvcnQgfSA9IHNwZWM7XG4gICAgICAgIGlmICghbG9hZCkge1xuICAgICAgICAgICAgaWYgKCFzdXBwb3J0KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiTXVzdCBwYXNzIGVpdGhlciAnbG9hZCcgb3IgJ3N1cHBvcnQnIHRvIExhbmd1YWdlRGVzY3JpcHRpb24ub2ZcIik7XG4gICAgICAgICAgICBsb2FkID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHN1cHBvcnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgTGFuZ3VhZ2VEZXNjcmlwdGlvbihzcGVjLm5hbWUsIChzcGVjLmFsaWFzIHx8IFtdKS5jb25jYXQoc3BlYy5uYW1lKS5tYXAocyA9PiBzLnRvTG93ZXJDYXNlKCkpLCBzcGVjLmV4dGVuc2lvbnMgfHwgW10sIHNwZWMuZmlsZW5hbWUsIGxvYWQsIHN1cHBvcnQpO1xuICAgIH1cbiAgICAvKipcbiAgICBMb29rIGZvciBhIGxhbmd1YWdlIGluIHRoZSBnaXZlbiBhcnJheSBvZiBkZXNjcmlwdGlvbnMgdGhhdFxuICAgIG1hdGNoZXMgdGhlIGZpbGVuYW1lLiBXaWxsIGZpcnN0IG1hdGNoXG4gICAgW2BmaWxlbmFtZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuTGFuZ3VhZ2VEZXNjcmlwdGlvbi5maWxlbmFtZSkgcGF0dGVybnMsXG4gICAgYW5kIHRoZW4gW2V4dGVuc2lvbnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuTGFuZ3VhZ2VEZXNjcmlwdGlvbi5leHRlbnNpb25zKSxcbiAgICBhbmQgcmV0dXJuIHRoZSBmaXJzdCBsYW5ndWFnZSB0aGF0IG1hdGNoZXMuXG4gICAgKi9cbiAgICBzdGF0aWMgbWF0Y2hGaWxlbmFtZShkZXNjcywgZmlsZW5hbWUpIHtcbiAgICAgICAgZm9yIChsZXQgZCBvZiBkZXNjcylcbiAgICAgICAgICAgIGlmIChkLmZpbGVuYW1lICYmIGQuZmlsZW5hbWUudGVzdChmaWxlbmFtZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgIGxldCBleHQgPSAvXFwuKFteLl0rKSQvLmV4ZWMoZmlsZW5hbWUpO1xuICAgICAgICBpZiAoZXh0KVxuICAgICAgICAgICAgZm9yIChsZXQgZCBvZiBkZXNjcylcbiAgICAgICAgICAgICAgICBpZiAoZC5leHRlbnNpb25zLmluZGV4T2YoZXh0WzFdKSA+IC0xKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIExvb2sgZm9yIGEgbGFuZ3VhZ2Ugd2hvc2UgbmFtZSBvciBhbGlhcyBtYXRjaGVzIHRoZSB0aGUgZ2l2ZW5cbiAgICBuYW1lIChjYXNlLWluc2Vuc2l0aXZlbHkpLiBJZiBgZnV6enlgIGlzIHRydWUsIGFuZCBubyBkaXJlY3RcbiAgICBtYXRjaHMgaXMgZm91bmQsIHRoaXMnbGwgYWxzbyBzZWFyY2ggZm9yIGEgbGFuZ3VhZ2Ugd2hvc2UgbmFtZVxuICAgIG9yIGFsaWFzIG9jY3VycyBpbiB0aGUgc3RyaW5nIChmb3IgbmFtZXMgc2hvcnRlciB0aGFuIHRocmVlXG4gICAgY2hhcmFjdGVycywgb25seSB3aGVuIHN1cnJvdW5kZWQgYnkgbm9uLXdvcmQgY2hhcmFjdGVycykuXG4gICAgKi9cbiAgICBzdGF0aWMgbWF0Y2hMYW5ndWFnZU5hbWUoZGVzY3MsIG5hbWUsIGZ1enp5ID0gdHJ1ZSkge1xuICAgICAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBmb3IgKGxldCBkIG9mIGRlc2NzKVxuICAgICAgICAgICAgaWYgKGQuYWxpYXMuc29tZShhID0+IGEgPT0gbmFtZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgIGlmIChmdXp6eSlcbiAgICAgICAgICAgIGZvciAobGV0IGQgb2YgZGVzY3MpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYSBvZiBkLmFsaWFzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IG5hbWUuaW5kZXhPZihhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kID4gLTEgJiYgKGEubGVuZ3RoID4gMiB8fCAhL1xcdy8udGVzdChuYW1lW2ZvdW5kIC0gMV0pICYmICEvXFx3Ly50ZXN0KG5hbWVbZm91bmQgKyBhLmxlbmd0aF0pKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vKipcbkZhY2V0IHRoYXQgZGVmaW5lcyBhIHdheSB0byBwcm92aWRlIGEgZnVuY3Rpb24gdGhhdCBjb21wdXRlcyB0aGVcbmFwcHJvcHJpYXRlIGluZGVudGF0aW9uIGRlcHRoLCBhcyBhIGNvbHVtbiBudW1iZXIgKHNlZVxuW2BpbmRlbnRTdHJpbmdgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmluZGVudFN0cmluZykpLCBhdCB0aGUgc3RhcnQgb2YgYSBnaXZlblxubGluZS4gQSByZXR1cm4gdmFsdWUgb2YgYG51bGxgIGluZGljYXRlcyBubyBpbmRlbnRhdGlvbiBjYW4gYmVcbmRldGVybWluZWQsIGFuZCB0aGUgbGluZSBzaG91bGQgaW5oZXJpdCB0aGUgaW5kZW50YXRpb24gb2YgdGhlIG9uZVxuYWJvdmUgaXQuIEEgcmV0dXJuIHZhbHVlIG9mIGB1bmRlZmluZWRgIGRlZmVycyB0byB0aGUgbmV4dCBpbmRlbnRcbnNlcnZpY2UuXG4qL1xuY29uc3QgaW5kZW50U2VydmljZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbi8qKlxuRmFjZXQgZm9yIG92ZXJyaWRpbmcgdGhlIHVuaXQgYnkgd2hpY2ggaW5kZW50YXRpb24gaGFwcGVucy4gU2hvdWxkXG5iZSBhIHN0cmluZyBjb25zaXN0aW5nIGVudGlyZWx5IG9mIHRoZSBzYW1lIHdoaXRlc3BhY2UgY2hhcmFjdGVyLlxuV2hlbiBub3Qgc2V0LCB0aGlzIGRlZmF1bHRzIHRvIDIgc3BhY2VzLlxuKi9cbmNvbnN0IGluZGVudFVuaXQgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lOiB2YWx1ZXMgPT4ge1xuICAgICAgICBpZiAoIXZhbHVlcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gXCIgIFwiO1xuICAgICAgICBsZXQgdW5pdCA9IHZhbHVlc1swXTtcbiAgICAgICAgaWYgKCF1bml0IHx8IC9cXFMvLnRlc3QodW5pdCkgfHwgQXJyYXkuZnJvbSh1bml0KS5zb21lKGUgPT4gZSAhPSB1bml0WzBdKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5kZW50IHVuaXQ6IFwiICsgSlNPTi5zdHJpbmdpZnkodmFsdWVzWzBdKSk7XG4gICAgICAgIHJldHVybiB1bml0O1xuICAgIH1cbn0pO1xuLyoqXG5SZXR1cm4gdGhlIF9jb2x1bW4gd2lkdGhfIG9mIGFuIGluZGVudCB1bml0IGluIHRoZSBzdGF0ZS5cbkRldGVybWluZWQgYnkgdGhlIFtgaW5kZW50VW5pdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50VW5pdClcbmZhY2V0LCBhbmQgW2B0YWJTaXplYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV50YWJTaXplKSB3aGVuIHRoYXRcbmNvbnRhaW5zIHRhYnMuXG4qL1xuZnVuY3Rpb24gZ2V0SW5kZW50VW5pdChzdGF0ZSkge1xuICAgIGxldCB1bml0ID0gc3RhdGUuZmFjZXQoaW5kZW50VW5pdCk7XG4gICAgcmV0dXJuIHVuaXQuY2hhckNvZGVBdCgwKSA9PSA5ID8gc3RhdGUudGFiU2l6ZSAqIHVuaXQubGVuZ3RoIDogdW5pdC5sZW5ndGg7XG59XG4vKipcbkNyZWF0ZSBhbiBpbmRlbnRhdGlvbiBzdHJpbmcgdGhhdCBjb3ZlcnMgY29sdW1ucyAwIHRvIGBjb2xzYC5cbldpbGwgdXNlIHRhYnMgZm9yIGFzIG11Y2ggb2YgdGhlIGNvbHVtbnMgYXMgcG9zc2libGUgd2hlbiB0aGVcbltgaW5kZW50VW5pdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50VW5pdCkgZmFjZXQgY29udGFpbnNcbnRhYnMuXG4qL1xuZnVuY3Rpb24gaW5kZW50U3RyaW5nKHN0YXRlLCBjb2xzKSB7XG4gICAgbGV0IHJlc3VsdCA9IFwiXCIsIHRzID0gc3RhdGUudGFiU2l6ZSwgY2ggPSBzdGF0ZS5mYWNldChpbmRlbnRVbml0KVswXTtcbiAgICBpZiAoY2ggPT0gXCJcXHRcIikge1xuICAgICAgICB3aGlsZSAoY29scyA+PSB0cykge1xuICAgICAgICAgICAgcmVzdWx0ICs9IFwiXFx0XCI7XG4gICAgICAgICAgICBjb2xzIC09IHRzO1xuICAgICAgICB9XG4gICAgICAgIGNoID0gXCIgXCI7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sczsgaSsrKVxuICAgICAgICByZXN1bHQgKz0gY2g7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuR2V0IHRoZSBpbmRlbnRhdGlvbiwgYXMgYSBjb2x1bW4gbnVtYmVyLCBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uXG5XaWxsIGZpcnN0IGNvbnN1bHQgYW55IFtpbmRlbnQgc2VydmljZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50U2VydmljZSlcbnRoYXQgYXJlIHJlZ2lzdGVyZWQsIGFuZCBpZiBub25lIG9mIHRob3NlIHJldHVybiBhbiBpbmRlbnRhdGlvbixcbnRoaXMgd2lsbCBjaGVjayB0aGUgc3ludGF4IHRyZWUgZm9yIHRoZSBbaW5kZW50IG5vZGVcbnByb3BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50Tm9kZVByb3ApIGFuZCB1c2UgdGhhdCBpZiBmb3VuZC4gUmV0dXJucyBhXG5udW1iZXIgd2hlbiBhbiBpbmRlbnRhdGlvbiBjb3VsZCBiZSBkZXRlcm1pbmVkLCBhbmQgbnVsbFxub3RoZXJ3aXNlLlxuKi9cbmZ1bmN0aW9uIGdldEluZGVudGF0aW9uKGNvbnRleHQsIHBvcykge1xuICAgIGlmIChjb250ZXh0IGluc3RhbmNlb2YgRWRpdG9yU3RhdGUpXG4gICAgICAgIGNvbnRleHQgPSBuZXcgSW5kZW50Q29udGV4dChjb250ZXh0KTtcbiAgICBmb3IgKGxldCBzZXJ2aWNlIG9mIGNvbnRleHQuc3RhdGUuZmFjZXQoaW5kZW50U2VydmljZSkpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHNlcnZpY2UoY29udGV4dCwgcG9zKTtcbiAgICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgbGV0IHRyZWUgPSBzeW50YXhUcmVlKGNvbnRleHQuc3RhdGUpO1xuICAgIHJldHVybiB0cmVlLmxlbmd0aCA+PSBwb3MgPyBzeW50YXhJbmRlbnRhdGlvbihjb250ZXh0LCB0cmVlLCBwb3MpIDogbnVsbDtcbn1cbi8qKlxuQ3JlYXRlIGEgY2hhbmdlIHNldCB0aGF0IGF1dG8taW5kZW50cyBhbGwgbGluZXMgdG91Y2hlZCBieSB0aGVcbmdpdmVuIGRvY3VtZW50IHJhbmdlLlxuKi9cbmZ1bmN0aW9uIGluZGVudFJhbmdlKHN0YXRlLCBmcm9tLCB0bykge1xuICAgIGxldCB1cGRhdGVkID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBsZXQgY29udGV4dCA9IG5ldyBJbmRlbnRDb250ZXh0KHN0YXRlLCB7IG92ZXJyaWRlSW5kZW50YXRpb246IHN0YXJ0ID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gdXBkYXRlZFtzdGFydF0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IC0xOyB9IH0pO1xuICAgIGxldCBjaGFuZ2VzID0gW107XG4gICAgZm9yIChsZXQgcG9zID0gZnJvbTsgcG9zIDw9IHRvOykge1xuICAgICAgICBsZXQgbGluZSA9IHN0YXRlLmRvYy5saW5lQXQocG9zKTtcbiAgICAgICAgcG9zID0gbGluZS50byArIDE7XG4gICAgICAgIGxldCBpbmRlbnQgPSBnZXRJbmRlbnRhdGlvbihjb250ZXh0LCBsaW5lLmZyb20pO1xuICAgICAgICBpZiAoaW5kZW50ID09IG51bGwpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgaWYgKCEvXFxTLy50ZXN0KGxpbmUudGV4dCkpXG4gICAgICAgICAgICBpbmRlbnQgPSAwO1xuICAgICAgICBsZXQgY3VyID0gL15cXHMqLy5leGVjKGxpbmUudGV4dClbMF07XG4gICAgICAgIGxldCBub3JtID0gaW5kZW50U3RyaW5nKHN0YXRlLCBpbmRlbnQpO1xuICAgICAgICBpZiAoY3VyICE9IG5vcm0pIHtcbiAgICAgICAgICAgIHVwZGF0ZWRbbGluZS5mcm9tXSA9IGluZGVudDtcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IGxpbmUuZnJvbSwgdG86IGxpbmUuZnJvbSArIGN1ci5sZW5ndGgsIGluc2VydDogbm9ybSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RhdGUuY2hhbmdlcyhjaGFuZ2VzKTtcbn1cbi8qKlxuSW5kZW50YXRpb24gY29udGV4dHMgYXJlIHVzZWQgd2hlbiBjYWxsaW5nIFtpbmRlbnRhdGlvblxuc2VydmljZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50U2VydmljZSkuIFRoZXkgcHJvdmlkZSBoZWxwZXIgdXRpbGl0aWVzXG51c2VmdWwgaW4gaW5kZW50YXRpb24gbG9naWMsIGFuZCBjYW4gc2VsZWN0aXZlbHkgb3ZlcnJpZGUgdGhlXG5pbmRlbnRhdGlvbiByZXBvcnRlZCBmb3Igc29tZSBsaW5lcy5cbiovXG5jbGFzcyBJbmRlbnRDb250ZXh0IHtcbiAgICAvKipcbiAgICBDcmVhdGUgYW4gaW5kZW50IGNvbnRleHQuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgZWRpdG9yIHN0YXRlLlxuICAgICovXG4gICAgc3RhdGUsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy51bml0ID0gZ2V0SW5kZW50VW5pdChzdGF0ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCBhIGRlc2NyaXB0aW9uIG9mIHRoZSBsaW5lIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiwgdGFraW5nXG4gICAgW3NpbXVsYXRlZCBsaW5lXG4gICAgYnJlYWtzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkluZGVudENvbnRleHQuY29uc3RydWN0b3Jeb3B0aW9ucy5zaW11bGF0ZUJyZWFrKVxuICAgIGludG8gYWNjb3VudC4gSWYgdGhlcmUgaXMgc3VjaCBhIGJyZWFrIGF0IGBwb3NgLCB0aGUgYGJpYXNgXG4gICAgYXJndW1lbnQgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBwYXJ0IG9mIHRoZSBsaW5lIGxpbmUgYmVmb3JlIG9yXG4gICAgYWZ0ZXIgdGhlIGJyZWFrIGlzIHVzZWQuXG4gICAgKi9cbiAgICBsaW5lQXQocG9zLCBiaWFzID0gMSkge1xuICAgICAgICBsZXQgbGluZSA9IHRoaXMuc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICBsZXQgeyBzaW11bGF0ZUJyZWFrLCBzaW11bGF0ZURvdWJsZUJyZWFrIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGlmIChzaW11bGF0ZUJyZWFrICE9IG51bGwgJiYgc2ltdWxhdGVCcmVhayA+PSBsaW5lLmZyb20gJiYgc2ltdWxhdGVCcmVhayA8PSBsaW5lLnRvKSB7XG4gICAgICAgICAgICBpZiAoc2ltdWxhdGVEb3VibGVCcmVhayAmJiBzaW11bGF0ZUJyZWFrID09IHBvcylcbiAgICAgICAgICAgICAgICByZXR1cm4geyB0ZXh0OiBcIlwiLCBmcm9tOiBwb3MgfTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGJpYXMgPCAwID8gc2ltdWxhdGVCcmVhayA8IHBvcyA6IHNpbXVsYXRlQnJlYWsgPD0gcG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHRleHQ6IGxpbmUudGV4dC5zbGljZShzaW11bGF0ZUJyZWFrIC0gbGluZS5mcm9tKSwgZnJvbTogc2ltdWxhdGVCcmVhayB9O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHRleHQ6IGxpbmUudGV4dC5zbGljZSgwLCBzaW11bGF0ZUJyZWFrIC0gbGluZS5mcm9tKSwgZnJvbTogbGluZS5mcm9tIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgdGV4dCBkaXJlY3RseSBhZnRlciBgcG9zYCwgZWl0aGVyIHRoZSBlbnRpcmUgbGluZVxuICAgIG9yIHRoZSBuZXh0IDEwMCBjaGFyYWN0ZXJzLCB3aGljaGV2ZXIgaXMgc2hvcnRlci5cbiAgICAqL1xuICAgIHRleHRBZnRlclBvcyhwb3MsIGJpYXMgPSAxKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2ltdWxhdGVEb3VibGVCcmVhayAmJiBwb3MgPT0gdGhpcy5vcHRpb25zLnNpbXVsYXRlQnJlYWspXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgbGV0IHsgdGV4dCwgZnJvbSB9ID0gdGhpcy5saW5lQXQocG9zLCBiaWFzKTtcbiAgICAgICAgcmV0dXJuIHRleHQuc2xpY2UocG9zIC0gZnJvbSwgTWF0aC5taW4odGV4dC5sZW5ndGgsIHBvcyArIDEwMCAtIGZyb20pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgY29sdW1uIGZvciB0aGUgZ2l2ZW4gcG9zaXRpb24uXG4gICAgKi9cbiAgICBjb2x1bW4ocG9zLCBiaWFzID0gMSkge1xuICAgICAgICBsZXQgeyB0ZXh0LCBmcm9tIH0gPSB0aGlzLmxpbmVBdChwb3MsIGJpYXMpO1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5jb3VudENvbHVtbih0ZXh0LCBwb3MgLSBmcm9tKTtcbiAgICAgICAgbGV0IG92ZXJyaWRlID0gdGhpcy5vcHRpb25zLm92ZXJyaWRlSW5kZW50YXRpb24gPyB0aGlzLm9wdGlvbnMub3ZlcnJpZGVJbmRlbnRhdGlvbihmcm9tKSA6IC0xO1xuICAgICAgICBpZiAob3ZlcnJpZGUgPiAtMSlcbiAgICAgICAgICAgIHJlc3VsdCArPSBvdmVycmlkZSAtIHRoaXMuY291bnRDb2x1bW4odGV4dCwgdGV4dC5zZWFyY2goL1xcU3wkLykpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBjb2x1bW4gcG9zaXRpb24gKHRha2luZyB0YWJzIGludG8gYWNjb3VudCkgb2YgdGhlIGdpdmVuXG4gICAgcG9zaXRpb24gaW4gdGhlIGdpdmVuIHN0cmluZy5cbiAgICAqL1xuICAgIGNvdW50Q29sdW1uKGxpbmUsIHBvcyA9IGxpbmUubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBjb3VudENvbHVtbihsaW5lLCB0aGlzLnN0YXRlLnRhYlNpemUsIHBvcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGluZGVudGF0aW9uIGNvbHVtbiBvZiB0aGUgbGluZSBhdCB0aGUgZ2l2ZW4gcG9pbnQuXG4gICAgKi9cbiAgICBsaW5lSW5kZW50KHBvcywgYmlhcyA9IDEpIHtcbiAgICAgICAgbGV0IHsgdGV4dCwgZnJvbSB9ID0gdGhpcy5saW5lQXQocG9zLCBiaWFzKTtcbiAgICAgICAgbGV0IG92ZXJyaWRlID0gdGhpcy5vcHRpb25zLm92ZXJyaWRlSW5kZW50YXRpb247XG4gICAgICAgIGlmIChvdmVycmlkZSkge1xuICAgICAgICAgICAgbGV0IG92ZXJyaWRlbiA9IG92ZXJyaWRlKGZyb20pO1xuICAgICAgICAgICAgaWYgKG92ZXJyaWRlbiA+IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybiBvdmVycmlkZW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY291bnRDb2x1bW4odGV4dCwgdGV4dC5zZWFyY2goL1xcU3wkLykpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRoZSBbc2ltdWxhdGVkIGxpbmVcbiAgICBicmVha10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5JbmRlbnRDb250ZXh0LmNvbnN0cnVjdG9yXm9wdGlvbnMuc2ltdWxhdGVCcmVhaylcbiAgICBmb3IgdGhpcyBjb250ZXh0LCBpZiBhbnkuXG4gICAgKi9cbiAgICBnZXQgc2ltdWxhdGVkQnJlYWsoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuc2ltdWxhdGVCcmVhayB8fCBudWxsO1xuICAgIH1cbn1cbi8qKlxuQSBzeW50YXggdHJlZSBub2RlIHByb3AgdXNlZCB0byBhc3NvY2lhdGUgaW5kZW50YXRpb24gc3RyYXRlZ2llc1xud2l0aCBub2RlIHR5cGVzLiBTdWNoIGEgc3RyYXRlZ3kgaXMgYSBmdW5jdGlvbiBmcm9tIGFuIGluZGVudGF0aW9uXG5jb250ZXh0IHRvIGEgY29sdW1uIG51bWJlciAoc2VlIGFsc29cbltgaW5kZW50U3RyaW5nYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRTdHJpbmcpKSBvciBudWxsLCB3aGVyZSBudWxsXG5pbmRpY2F0ZXMgdGhhdCBubyBkZWZpbml0aXZlIGluZGVudGF0aW9uIGNhbiBiZSBkZXRlcm1pbmVkLlxuKi9cbmNvbnN0IGluZGVudE5vZGVQcm9wID0gLypAX19QVVJFX18qL25ldyBOb2RlUHJvcCgpO1xuLy8gQ29tcHV0ZSB0aGUgaW5kZW50YXRpb24gZm9yIGEgZ2l2ZW4gcG9zaXRpb24gZnJvbSB0aGUgc3ludGF4IHRyZWUuXG5mdW5jdGlvbiBzeW50YXhJbmRlbnRhdGlvbihjeCwgYXN0LCBwb3MpIHtcbiAgICBsZXQgc3RhY2sgPSBhc3QucmVzb2x2ZVN0YWNrKHBvcyk7XG4gICAgbGV0IGlubmVyID0gYXN0LnJlc29sdmVJbm5lcihwb3MsIC0xKS5yZXNvbHZlKHBvcywgMCkuZW50ZXJVbmZpbmlzaGVkTm9kZXNCZWZvcmUocG9zKTtcbiAgICBpZiAoaW5uZXIgIT0gc3RhY2subm9kZSkge1xuICAgICAgICBsZXQgYWRkID0gW107XG4gICAgICAgIGZvciAobGV0IGN1ciA9IGlubmVyOyBjdXIgJiYgIShjdXIuZnJvbSA8IHN0YWNrLm5vZGUuZnJvbSB8fCBjdXIudG8gPiBzdGFjay5ub2RlLnRvIHx8XG4gICAgICAgICAgICBjdXIuZnJvbSA9PSBzdGFjay5ub2RlLmZyb20gJiYgY3VyLnR5cGUgPT0gc3RhY2subm9kZS50eXBlKTsgY3VyID0gY3VyLnBhcmVudClcbiAgICAgICAgICAgIGFkZC5wdXNoKGN1cik7XG4gICAgICAgIGZvciAobGV0IGkgPSBhZGQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgICAgICBzdGFjayA9IHsgbm9kZTogYWRkW2ldLCBuZXh0OiBzdGFjayB9O1xuICAgIH1cbiAgICByZXR1cm4gaW5kZW50Rm9yKHN0YWNrLCBjeCwgcG9zKTtcbn1cbmZ1bmN0aW9uIGluZGVudEZvcihzdGFjaywgY3gsIHBvcykge1xuICAgIGZvciAobGV0IGN1ciA9IHN0YWNrOyBjdXI7IGN1ciA9IGN1ci5uZXh0KSB7XG4gICAgICAgIGxldCBzdHJhdGVneSA9IGluZGVudFN0cmF0ZWd5KGN1ci5ub2RlKTtcbiAgICAgICAgaWYgKHN0cmF0ZWd5KVxuICAgICAgICAgICAgcmV0dXJuIHN0cmF0ZWd5KFRyZWVJbmRlbnRDb250ZXh0LmNyZWF0ZShjeCwgcG9zLCBjdXIpKTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG59XG5mdW5jdGlvbiBpZ25vcmVDbG9zZWQoY3gpIHtcbiAgICByZXR1cm4gY3gucG9zID09IGN4Lm9wdGlvbnMuc2ltdWxhdGVCcmVhayAmJiBjeC5vcHRpb25zLnNpbXVsYXRlRG91YmxlQnJlYWs7XG59XG5mdW5jdGlvbiBpbmRlbnRTdHJhdGVneSh0cmVlKSB7XG4gICAgbGV0IHN0cmF0ZWd5ID0gdHJlZS50eXBlLnByb3AoaW5kZW50Tm9kZVByb3ApO1xuICAgIGlmIChzdHJhdGVneSlcbiAgICAgICAgcmV0dXJuIHN0cmF0ZWd5O1xuICAgIGxldCBmaXJzdCA9IHRyZWUuZmlyc3RDaGlsZCwgY2xvc2U7XG4gICAgaWYgKGZpcnN0ICYmIChjbG9zZSA9IGZpcnN0LnR5cGUucHJvcChOb2RlUHJvcC5jbG9zZWRCeSkpKSB7XG4gICAgICAgIGxldCBsYXN0ID0gdHJlZS5sYXN0Q2hpbGQsIGNsb3NlZCA9IGxhc3QgJiYgY2xvc2UuaW5kZXhPZihsYXN0Lm5hbWUpID4gLTE7XG4gICAgICAgIHJldHVybiBjeCA9PiBkZWxpbWl0ZWRTdHJhdGVneShjeCwgdHJ1ZSwgMSwgdW5kZWZpbmVkLCBjbG9zZWQgJiYgIWlnbm9yZUNsb3NlZChjeCkgPyBsYXN0LmZyb20gOiB1bmRlZmluZWQpO1xuICAgIH1cbiAgICByZXR1cm4gdHJlZS5wYXJlbnQgPT0gbnVsbCA/IHRvcEluZGVudCA6IG51bGw7XG59XG5mdW5jdGlvbiB0b3BJbmRlbnQoKSB7IHJldHVybiAwOyB9XG4vKipcbk9iamVjdHMgb2YgdGhpcyB0eXBlIHByb3ZpZGUgY29udGV4dCBpbmZvcm1hdGlvbiBhbmQgaGVscGVyXG5tZXRob2RzIHRvIGluZGVudGF0aW9uIGZ1bmN0aW9ucyByZWdpc3RlcmVkIG9uIHN5bnRheCBub2Rlcy5cbiovXG5jbGFzcyBUcmVlSW5kZW50Q29udGV4dCBleHRlbmRzIEluZGVudENvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKGJhc2UsIFxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbiBhdCB3aGljaCBpbmRlbnRhdGlvbiBpcyBiZWluZyBjb21wdXRlZC5cbiAgICAqL1xuICAgIHBvcywgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKGJhc2Uuc3RhdGUsIGJhc2Uub3B0aW9ucyk7XG4gICAgICAgIHRoaXMuYmFzZSA9IGJhc2U7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgc3ludGF4IHRyZWUgbm9kZSB0byB3aGljaCB0aGUgaW5kZW50YXRpb24gc3RyYXRlZ3lcbiAgICBhcHBsaWVzLlxuICAgICovXG4gICAgZ2V0IG5vZGUoKSB7IHJldHVybiB0aGlzLmNvbnRleHQubm9kZTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShiYXNlLCBwb3MsIGNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlSW5kZW50Q29udGV4dChiYXNlLCBwb3MsIGNvbnRleHQpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHRleHQgZGlyZWN0bHkgYWZ0ZXIgYHRoaXMucG9zYCwgZWl0aGVyIHRoZSBlbnRpcmUgbGluZVxuICAgIG9yIHRoZSBuZXh0IDEwMCBjaGFyYWN0ZXJzLCB3aGljaGV2ZXIgaXMgc2hvcnRlci5cbiAgICAqL1xuICAgIGdldCB0ZXh0QWZ0ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHRBZnRlclBvcyh0aGlzLnBvcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgaW5kZW50YXRpb24gYXQgdGhlIHJlZmVyZW5jZSBsaW5lIGZvciBgdGhpcy5ub2RlYCwgd2hpY2hcbiAgICBpcyB0aGUgbGluZSBvbiB3aGljaCBpdCBzdGFydHMsIHVubGVzcyB0aGVyZSBpcyBhIG5vZGUgdGhhdCBpc1xuICAgIF9ub3RfIGEgcGFyZW50IG9mIHRoaXMgbm9kZSBjb3ZlcmluZyB0aGUgc3RhcnQgb2YgdGhhdCBsaW5lLiBJZlxuICAgIHNvLCB0aGUgbGluZSBhdCB0aGUgc3RhcnQgb2YgdGhhdCBub2RlIGlzIHRyaWVkLCBhZ2FpbiBza2lwcGluZ1xuICAgIG9uIGlmIGl0IGlzIGNvdmVyZWQgYnkgYW5vdGhlciBzdWNoIG5vZGUuXG4gICAgKi9cbiAgICBnZXQgYmFzZUluZGVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZUluZGVudEZvcih0aGlzLm5vZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGluZGVudGF0aW9uIGZvciB0aGUgcmVmZXJlbmNlIGxpbmUgb2YgdGhlIGdpdmVuIG5vZGVcbiAgICAoc2VlIFtgYmFzZUluZGVudGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuVHJlZUluZGVudENvbnRleHQuYmFzZUluZGVudCkpLlxuICAgICovXG4gICAgYmFzZUluZGVudEZvcihub2RlKSB7XG4gICAgICAgIGxldCBsaW5lID0gdGhpcy5zdGF0ZS5kb2MubGluZUF0KG5vZGUuZnJvbSk7XG4gICAgICAgIC8vIFNraXAgbGluZSBzdGFydHMgdGhhdCBhcmUgY292ZXJlZCBieSBhIHNpYmxpbmcgKG9yIGNvdXNpbiwgZXRjKVxuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgYXRCcmVhayA9IG5vZGUucmVzb2x2ZShsaW5lLmZyb20pO1xuICAgICAgICAgICAgd2hpbGUgKGF0QnJlYWsucGFyZW50ICYmIGF0QnJlYWsucGFyZW50LmZyb20gPT0gYXRCcmVhay5mcm9tKVxuICAgICAgICAgICAgICAgIGF0QnJlYWsgPSBhdEJyZWFrLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChpc1BhcmVudChhdEJyZWFrLCBub2RlKSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGxpbmUgPSB0aGlzLnN0YXRlLmRvYy5saW5lQXQoYXRCcmVhay5mcm9tKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5saW5lSW5kZW50KGxpbmUuZnJvbSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbnRpbnVlIGxvb2tpbmcgZm9yIGluZGVudGF0aW9ucyBpbiB0aGUgbm9kZSdzIHBhcmVudCBub2RlcyxcbiAgICBhbmQgcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhhdC5cbiAgICAqL1xuICAgIGNvbnRpbnVlKCkge1xuICAgICAgICByZXR1cm4gaW5kZW50Rm9yKHRoaXMuY29udGV4dC5uZXh0LCB0aGlzLmJhc2UsIHRoaXMucG9zKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1BhcmVudChwYXJlbnQsIG9mKSB7XG4gICAgZm9yIChsZXQgY3VyID0gb2Y7IGN1cjsgY3VyID0gY3VyLnBhcmVudClcbiAgICAgICAgaWYgKHBhcmVudCA9PSBjdXIpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyBDaGVjayB3aGV0aGVyIGEgZGVsaW1pdGVkIG5vZGUgaXMgYWxpZ25lZCAobWVhbmluZyB0aGVyZSBhcmVcbi8vIG5vbi1za2lwcGVkIG5vZGVzIG9uIHRoZSBzYW1lIGxpbmUgYXMgdGhlIG9wZW5pbmcgZGVsaW1pdGVyKS4gQW5kXG4vLyBpZiBzbywgcmV0dXJuIHRoZSBvcGVuaW5nIHRva2VuLlxuZnVuY3Rpb24gYnJhY2tldGVkQWxpZ25lZChjb250ZXh0KSB7XG4gICAgbGV0IHRyZWUgPSBjb250ZXh0Lm5vZGU7XG4gICAgbGV0IG9wZW5Ub2tlbiA9IHRyZWUuY2hpbGRBZnRlcih0cmVlLmZyb20pLCBsYXN0ID0gdHJlZS5sYXN0Q2hpbGQ7XG4gICAgaWYgKCFvcGVuVG9rZW4pXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBzaW0gPSBjb250ZXh0Lm9wdGlvbnMuc2ltdWxhdGVCcmVhaztcbiAgICBsZXQgb3BlbkxpbmUgPSBjb250ZXh0LnN0YXRlLmRvYy5saW5lQXQob3BlblRva2VuLmZyb20pO1xuICAgIGxldCBsaW5lRW5kID0gc2ltID09IG51bGwgfHwgc2ltIDw9IG9wZW5MaW5lLmZyb20gPyBvcGVuTGluZS50byA6IE1hdGgubWluKG9wZW5MaW5lLnRvLCBzaW0pO1xuICAgIGZvciAobGV0IHBvcyA9IG9wZW5Ub2tlbi50bzs7KSB7XG4gICAgICAgIGxldCBuZXh0ID0gdHJlZS5jaGlsZEFmdGVyKHBvcyk7XG4gICAgICAgIGlmICghbmV4dCB8fCBuZXh0ID09IGxhc3QpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKCFuZXh0LnR5cGUuaXNTa2lwcGVkKSB7XG4gICAgICAgICAgICBpZiAobmV4dC5mcm9tID49IGxpbmVFbmQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBsZXQgc3BhY2UgPSAvXiAqLy5leGVjKG9wZW5MaW5lLnRleHQuc2xpY2Uob3BlblRva2VuLnRvIC0gb3BlbkxpbmUuZnJvbSkpWzBdLmxlbmd0aDtcbiAgICAgICAgICAgIHJldHVybiB7IGZyb206IG9wZW5Ub2tlbi5mcm9tLCB0bzogb3BlblRva2VuLnRvICsgc3BhY2UgfTtcbiAgICAgICAgfVxuICAgICAgICBwb3MgPSBuZXh0LnRvO1xuICAgIH1cbn1cbi8qKlxuQW4gaW5kZW50YXRpb24gc3RyYXRlZ3kgZm9yIGRlbGltaXRlZCAodXN1YWxseSBicmFja2V0ZWQpIG5vZGVzLlxuV2lsbCwgYnkgZGVmYXVsdCwgaW5kZW50IG9uZSB1bml0IG1vcmUgdGhhbiB0aGUgcGFyZW50J3MgYmFzZVxuaW5kZW50IHVubGVzcyB0aGUgbGluZSBzdGFydHMgd2l0aCBhIGNsb3NpbmcgdG9rZW4uIFdoZW4gYGFsaWduYFxuaXMgdHJ1ZSBhbmQgdGhlcmUgYXJlIG5vbi1za2lwcGVkIG5vZGVzIG9uIHRoZSBub2RlJ3Mgb3BlbmluZ1xubGluZSwgdGhlIGNvbnRlbnQgb2YgdGhlIG5vZGUgd2lsbCBiZSBhbGlnbmVkIHdpdGggdGhlIGVuZCBvZiB0aGVcbm9wZW5pbmcgbm9kZSwgbGlrZSB0aGlzOlxuXG4gICAgZm9vKGJhcixcbiAgICAgICAgYmF6KVxuKi9cbmZ1bmN0aW9uIGRlbGltaXRlZEluZGVudCh7IGNsb3NpbmcsIGFsaWduID0gdHJ1ZSwgdW5pdHMgPSAxIH0pIHtcbiAgICByZXR1cm4gKGNvbnRleHQpID0+IGRlbGltaXRlZFN0cmF0ZWd5KGNvbnRleHQsIGFsaWduLCB1bml0cywgY2xvc2luZyk7XG59XG5mdW5jdGlvbiBkZWxpbWl0ZWRTdHJhdGVneShjb250ZXh0LCBhbGlnbiwgdW5pdHMsIGNsb3NpbmcsIGNsb3NlZEF0KSB7XG4gICAgbGV0IGFmdGVyID0gY29udGV4dC50ZXh0QWZ0ZXIsIHNwYWNlID0gYWZ0ZXIubWF0Y2goL15cXHMqLylbMF0ubGVuZ3RoO1xuICAgIGxldCBjbG9zZWQgPSBjbG9zaW5nICYmIGFmdGVyLnNsaWNlKHNwYWNlLCBzcGFjZSArIGNsb3NpbmcubGVuZ3RoKSA9PSBjbG9zaW5nIHx8IGNsb3NlZEF0ID09IGNvbnRleHQucG9zICsgc3BhY2U7XG4gICAgbGV0IGFsaWduZWQgPSBhbGlnbiA/IGJyYWNrZXRlZEFsaWduZWQoY29udGV4dCkgOiBudWxsO1xuICAgIGlmIChhbGlnbmVkKVxuICAgICAgICByZXR1cm4gY2xvc2VkID8gY29udGV4dC5jb2x1bW4oYWxpZ25lZC5mcm9tKSA6IGNvbnRleHQuY29sdW1uKGFsaWduZWQudG8pO1xuICAgIHJldHVybiBjb250ZXh0LmJhc2VJbmRlbnQgKyAoY2xvc2VkID8gMCA6IGNvbnRleHQudW5pdCAqIHVuaXRzKTtcbn1cbi8qKlxuQW4gaW5kZW50YXRpb24gc3RyYXRlZ3kgdGhhdCBhbGlnbnMgYSBub2RlJ3MgY29udGVudCB0byBpdHMgYmFzZVxuaW5kZW50YXRpb24uXG4qL1xuY29uc3QgZmxhdEluZGVudCA9IChjb250ZXh0KSA9PiBjb250ZXh0LmJhc2VJbmRlbnQ7XG4vKipcbkNyZWF0ZXMgYW4gaW5kZW50YXRpb24gc3RyYXRlZ3kgdGhhdCwgYnkgZGVmYXVsdCwgaW5kZW50c1xuY29udGludWVkIGxpbmVzIG9uZSB1bml0IG1vcmUgdGhhbiB0aGUgbm9kZSdzIGJhc2UgaW5kZW50YXRpb24uXG5Zb3UgY2FuIHByb3ZpZGUgYGV4Y2VwdGAgdG8gcHJldmVudCBpbmRlbnRhdGlvbiBvZiBsaW5lcyB0aGF0XG5tYXRjaCBhIHBhdHRlcm4gKGZvciBleGFtcGxlIGAvXmVsc2VcXGIvYCBpbiBgaWZgL2BlbHNlYFxuY29uc3RydWN0cyksIGFuZCB5b3UgY2FuIGNoYW5nZSB0aGUgYW1vdW50IG9mIHVuaXRzIHVzZWQgd2l0aCB0aGVcbmB1bml0c2Agb3B0aW9uLlxuKi9cbmZ1bmN0aW9uIGNvbnRpbnVlZEluZGVudCh7IGV4Y2VwdCwgdW5pdHMgPSAxIH0gPSB7fSkge1xuICAgIHJldHVybiAoY29udGV4dCkgPT4ge1xuICAgICAgICBsZXQgbWF0Y2hFeGNlcHQgPSBleGNlcHQgJiYgZXhjZXB0LnRlc3QoY29udGV4dC50ZXh0QWZ0ZXIpO1xuICAgICAgICByZXR1cm4gY29udGV4dC5iYXNlSW5kZW50ICsgKG1hdGNoRXhjZXB0ID8gMCA6IHVuaXRzICogY29udGV4dC51bml0KTtcbiAgICB9O1xufVxuY29uc3QgRG9udEluZGVudEJleW9uZCA9IDIwMDtcbi8qKlxuRW5hYmxlcyByZWluZGVudGF0aW9uIG9uIGlucHV0LiBXaGVuIGEgbGFuZ3VhZ2UgZGVmaW5lcyBhblxuYGluZGVudE9uSW5wdXRgIGZpZWxkIGluIGl0cyBbbGFuZ3VhZ2VcbmRhdGFdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhQXQpLCB3aGljaCBtdXN0IGhvbGQgYSByZWd1bGFyXG5leHByZXNzaW9uLCB0aGUgbGluZSBhdCB0aGUgY3Vyc29yIHdpbGwgYmUgcmVpbmRlbnRlZCB3aGVuZXZlciBuZXdcbnRleHQgaXMgdHlwZWQgYW5kIHRoZSBpbnB1dCBmcm9tIHRoZSBzdGFydCBvZiB0aGUgbGluZSB1cCB0byB0aGVcbmN1cnNvciBtYXRjaGVzIHRoYXQgcmVnZXhwLlxuXG5UbyBhdm9pZCB1bm5lY2Nlc2FyeSByZWluZGVudHMsIGl0IGlzIHJlY29tbWVuZGVkIHRvIHN0YXJ0IHRoZVxucmVnZXhwIHdpdGggYF5gICh1c3VhbGx5IGZvbGxvd2VkIGJ5IGBcXHMqYCksIGFuZCBlbmQgaXQgd2l0aCBgJGAuXG5Gb3IgZXhhbXBsZSwgYC9eXFxzKlxcfSQvYCB3aWxsIHJlaW5kZW50IHdoZW4gYSBjbG9zaW5nIGJyYWNlIGlzXG5hZGRlZCBhdCB0aGUgc3RhcnQgb2YgYSBsaW5lLlxuKi9cbmZ1bmN0aW9uIGluZGVudE9uSW5wdXQoKSB7XG4gICAgcmV0dXJuIEVkaXRvclN0YXRlLnRyYW5zYWN0aW9uRmlsdGVyLm9mKHRyID0+IHtcbiAgICAgICAgaWYgKCF0ci5kb2NDaGFuZ2VkIHx8ICF0ci5pc1VzZXJFdmVudChcImlucHV0LnR5cGVcIikgJiYgIXRyLmlzVXNlckV2ZW50KFwiaW5wdXQuY29tcGxldGVcIikpXG4gICAgICAgICAgICByZXR1cm4gdHI7XG4gICAgICAgIGxldCBydWxlcyA9IHRyLnN0YXJ0U3RhdGUubGFuZ3VhZ2VEYXRhQXQoXCJpbmRlbnRPbklucHV0XCIsIHRyLnN0YXJ0U3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZCk7XG4gICAgICAgIGlmICghcnVsZXMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRyO1xuICAgICAgICBsZXQgZG9jID0gdHIubmV3RG9jLCB7IGhlYWQgfSA9IHRyLm5ld1NlbGVjdGlvbi5tYWluLCBsaW5lID0gZG9jLmxpbmVBdChoZWFkKTtcbiAgICAgICAgaWYgKGhlYWQgPiBsaW5lLmZyb20gKyBEb250SW5kZW50QmV5b25kKVxuICAgICAgICAgICAgcmV0dXJuIHRyO1xuICAgICAgICBsZXQgbGluZVN0YXJ0ID0gZG9jLnNsaWNlU3RyaW5nKGxpbmUuZnJvbSwgaGVhZCk7XG4gICAgICAgIGlmICghcnVsZXMuc29tZShyID0+IHIudGVzdChsaW5lU3RhcnQpKSlcbiAgICAgICAgICAgIHJldHVybiB0cjtcbiAgICAgICAgbGV0IHsgc3RhdGUgfSA9IHRyLCBsYXN0ID0gLTEsIGNoYW5nZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeyBoZWFkIH0gb2Ygc3RhdGUuc2VsZWN0aW9uLnJhbmdlcykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KGhlYWQpO1xuICAgICAgICAgICAgaWYgKGxpbmUuZnJvbSA9PSBsYXN0KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGFzdCA9IGxpbmUuZnJvbTtcbiAgICAgICAgICAgIGxldCBpbmRlbnQgPSBnZXRJbmRlbnRhdGlvbihzdGF0ZSwgbGluZS5mcm9tKTtcbiAgICAgICAgICAgIGlmIChpbmRlbnQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGxldCBjdXIgPSAvXlxccyovLmV4ZWMobGluZS50ZXh0KVswXTtcbiAgICAgICAgICAgIGxldCBub3JtID0gaW5kZW50U3RyaW5nKHN0YXRlLCBpbmRlbnQpO1xuICAgICAgICAgICAgaWYgKGN1ciAhPSBub3JtKVxuICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IGxpbmUuZnJvbSwgdG86IGxpbmUuZnJvbSArIGN1ci5sZW5ndGgsIGluc2VydDogbm9ybSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhbmdlcy5sZW5ndGggPyBbdHIsIHsgY2hhbmdlcywgc2VxdWVudGlhbDogdHJ1ZSB9XSA6IHRyO1xuICAgIH0pO1xufVxuXG4vKipcbkEgZmFjZXQgdGhhdCByZWdpc3RlcnMgYSBjb2RlIGZvbGRpbmcgc2VydmljZS4gV2hlbiBjYWxsZWQgd2l0aFxudGhlIGV4dGVudCBvZiBhIGxpbmUsIHN1Y2ggYSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgZm9sZGFibGVcbnJhbmdlIHRoYXQgc3RhcnRzIG9uIHRoYXQgbGluZSAoYnV0IGNvbnRpbnVlcyBiZXlvbmQgaXQpLCBpZiBvbmVcbmNhbiBiZSBmb3VuZC5cbiovXG5jb25zdCBmb2xkU2VydmljZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbi8qKlxuVGhpcyBub2RlIHByb3AgaXMgdXNlZCB0byBhc3NvY2lhdGUgZm9sZGluZyBpbmZvcm1hdGlvbiB3aXRoXG5zeW50YXggbm9kZSB0eXBlcy4gR2l2ZW4gYSBzeW50YXggbm9kZSwgaXQgc2hvdWxkIGNoZWNrIHdoZXRoZXJcbnRoYXQgdHJlZSBpcyBmb2xkYWJsZSBhbmQgcmV0dXJuIHRoZSByYW5nZSB0aGF0IGNhbiBiZSBjb2xsYXBzZWRcbndoZW4gaXQgaXMuXG4qL1xuY29uc3QgZm9sZE5vZGVQcm9wID0gLypAX19QVVJFX18qL25ldyBOb2RlUHJvcCgpO1xuLyoqXG5bRm9sZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5mb2xkTm9kZVByb3ApIGZ1bmN0aW9uIHRoYXQgZm9sZHMgZXZlcnl0aGluZyBidXRcbnRoZSBmaXJzdCBhbmQgdGhlIGxhc3QgY2hpbGQgb2YgYSBzeW50YXggbm9kZS4gVXNlZnVsIGZvciBub2Rlc1xudGhhdCBzdGFydCBhbmQgZW5kIHdpdGggZGVsaW1pdGVycy5cbiovXG5mdW5jdGlvbiBmb2xkSW5zaWRlKG5vZGUpIHtcbiAgICBsZXQgZmlyc3QgPSBub2RlLmZpcnN0Q2hpbGQsIGxhc3QgPSBub2RlLmxhc3RDaGlsZDtcbiAgICByZXR1cm4gZmlyc3QgJiYgZmlyc3QudG8gPCBsYXN0LmZyb20gPyB7IGZyb206IGZpcnN0LnRvLCB0bzogbGFzdC50eXBlLmlzRXJyb3IgPyBub2RlLnRvIDogbGFzdC5mcm9tIH0gOiBudWxsO1xufVxuZnVuY3Rpb24gc3ludGF4Rm9sZGluZyhzdGF0ZSwgc3RhcnQsIGVuZCkge1xuICAgIGxldCB0cmVlID0gc3ludGF4VHJlZShzdGF0ZSk7XG4gICAgaWYgKHRyZWUubGVuZ3RoIDwgZW5kKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgc3RhY2sgPSB0cmVlLnJlc29sdmVTdGFjayhlbmQsIDEpO1xuICAgIGxldCBmb3VuZCA9IG51bGw7XG4gICAgZm9yIChsZXQgaXRlciA9IHN0YWNrOyBpdGVyOyBpdGVyID0gaXRlci5uZXh0KSB7XG4gICAgICAgIGxldCBjdXIgPSBpdGVyLm5vZGU7XG4gICAgICAgIGlmIChjdXIudG8gPD0gZW5kIHx8IGN1ci5mcm9tID4gZW5kKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGlmIChmb3VuZCAmJiBjdXIuZnJvbSA8IHN0YXJ0KVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGxldCBwcm9wID0gY3VyLnR5cGUucHJvcChmb2xkTm9kZVByb3ApO1xuICAgICAgICBpZiAocHJvcCAmJiAoY3VyLnRvIDwgdHJlZS5sZW5ndGggLSA1MCB8fCB0cmVlLmxlbmd0aCA9PSBzdGF0ZS5kb2MubGVuZ3RoIHx8ICFpc1VuZmluaXNoZWQoY3VyKSkpIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHByb3AoY3VyLCBzdGF0ZSk7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUuZnJvbSA8PSBlbmQgJiYgdmFsdWUuZnJvbSA+PSBzdGFydCAmJiB2YWx1ZS50byA+IGVuZClcbiAgICAgICAgICAgICAgICBmb3VuZCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbn1cbmZ1bmN0aW9uIGlzVW5maW5pc2hlZChub2RlKSB7XG4gICAgbGV0IGNoID0gbm9kZS5sYXN0Q2hpbGQ7XG4gICAgcmV0dXJuIGNoICYmIGNoLnRvID09IG5vZGUudG8gJiYgY2gudHlwZS5pc0Vycm9yO1xufVxuLyoqXG5DaGVjayB3aGV0aGVyIHRoZSBnaXZlbiBsaW5lIGlzIGZvbGRhYmxlLiBGaXJzdCBhc2tzIGFueSBmb2xkXG5zZXJ2aWNlcyByZWdpc3RlcmVkIHRocm91Z2hcbltgZm9sZFNlcnZpY2VgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmZvbGRTZXJ2aWNlKSwgYW5kIGlmIG5vbmUgb2YgdGhlbSByZXR1cm5cbmEgcmVzdWx0LCB0cmllcyB0byBxdWVyeSB0aGUgW2ZvbGQgbm9kZVxucHJvcF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5mb2xkTm9kZVByb3ApIG9mIHN5bnRheCBub2RlcyB0aGF0IGNvdmVyIHRoZSBlbmRcbm9mIHRoZSBsaW5lLlxuKi9cbmZ1bmN0aW9uIGZvbGRhYmxlKHN0YXRlLCBsaW5lU3RhcnQsIGxpbmVFbmQpIHtcbiAgICBmb3IgKGxldCBzZXJ2aWNlIG9mIHN0YXRlLmZhY2V0KGZvbGRTZXJ2aWNlKSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gc2VydmljZShzdGF0ZSwgbGluZVN0YXJ0LCBsaW5lRW5kKTtcbiAgICAgICAgaWYgKHJlc3VsdClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiBzeW50YXhGb2xkaW5nKHN0YXRlLCBsaW5lU3RhcnQsIGxpbmVFbmQpO1xufVxuZnVuY3Rpb24gbWFwUmFuZ2UocmFuZ2UsIG1hcHBpbmcpIHtcbiAgICBsZXQgZnJvbSA9IG1hcHBpbmcubWFwUG9zKHJhbmdlLmZyb20sIDEpLCB0byA9IG1hcHBpbmcubWFwUG9zKHJhbmdlLnRvLCAtMSk7XG4gICAgcmV0dXJuIGZyb20gPj0gdG8gPyB1bmRlZmluZWQgOiB7IGZyb20sIHRvIH07XG59XG4vKipcblN0YXRlIGVmZmVjdCB0aGF0IGNhbiBiZSBhdHRhY2hlZCB0byBhIHRyYW5zYWN0aW9uIHRvIGZvbGQgdGhlXG5naXZlbiByYW5nZS4gKFlvdSBwcm9iYWJseSBvbmx5IG5lZWQgdGhpcyBpbiBleGNlcHRpb25hbFxuY2lyY3Vtc3RhbmNlc1x1MjAxNHVzdWFsbHkgeW91J2xsIGp1c3Qgd2FudCB0byBsZXRcbltgZm9sZENvZGVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmZvbGRDb2RlKSBhbmQgdGhlIFtmb2xkXG5ndXR0ZXJdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuZm9sZEd1dHRlcikgY3JlYXRlIHRoZSB0cmFuc2FjdGlvbnMuKVxuKi9cbmNvbnN0IGZvbGRFZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKHsgbWFwOiBtYXBSYW5nZSB9KTtcbi8qKlxuU3RhdGUgZWZmZWN0IHRoYXQgdW5mb2xkcyB0aGUgZ2l2ZW4gcmFuZ2UgKGlmIGl0IHdhcyBmb2xkZWQpLlxuKi9cbmNvbnN0IHVuZm9sZEVmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoeyBtYXA6IG1hcFJhbmdlIH0pO1xuZnVuY3Rpb24gc2VsZWN0ZWRMaW5lcyh2aWV3KSB7XG4gICAgbGV0IGxpbmVzID0gW107XG4gICAgZm9yIChsZXQgeyBoZWFkIH0gb2Ygdmlldy5zdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgIGlmIChsaW5lcy5zb21lKGwgPT4gbC5mcm9tIDw9IGhlYWQgJiYgbC50byA+PSBoZWFkKSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBsaW5lcy5wdXNoKHZpZXcubGluZUJsb2NrQXQoaGVhZCkpO1xuICAgIH1cbiAgICByZXR1cm4gbGluZXM7XG59XG4vKipcblRoZSBzdGF0ZSBmaWVsZCB0aGF0IHN0b3JlcyB0aGUgZm9sZGVkIHJhbmdlcyAoYXMgYSBbZGVjb3JhdGlvblxuc2V0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRGVjb3JhdGlvblNldCkpLiBDYW4gYmUgcGFzc2VkIHRvXG5bYEVkaXRvclN0YXRlLnRvSlNPTmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUudG9KU09OKSBhbmRcbltgZnJvbUpTT05gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXmZyb21KU09OKSB0byBzZXJpYWxpemUgdGhlIGZvbGRcbnN0YXRlLlxuKi9cbmNvbnN0IGZvbGRTdGF0ZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUZpZWxkLmRlZmluZSh7XG4gICAgY3JlYXRlKCkge1xuICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5ub25lO1xuICAgIH0sXG4gICAgdXBkYXRlKGZvbGRlZCwgdHIpIHtcbiAgICAgICAgaWYgKHRyLmlzVXNlckV2ZW50KFwiZGVsZXRlXCIpKVxuICAgICAgICAgICAgdHIuY2hhbmdlcy5pdGVyQ2hhbmdlZFJhbmdlcygoZnJvbUEsIHRvQSkgPT4gZm9sZGVkID0gY2xlYXJUb3VjaGVkRm9sZHMoZm9sZGVkLCBmcm9tQSwgdG9BKSk7XG4gICAgICAgIGZvbGRlZCA9IGZvbGRlZC5tYXAodHIuY2hhbmdlcyk7XG4gICAgICAgIGZvciAobGV0IGUgb2YgdHIuZWZmZWN0cykge1xuICAgICAgICAgICAgaWYgKGUuaXMoZm9sZEVmZmVjdCkgJiYgIWZvbGRFeGlzdHMoZm9sZGVkLCBlLnZhbHVlLmZyb20sIGUudmFsdWUudG8pKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgcHJlcGFyZVBsYWNlaG9sZGVyIH0gPSB0ci5zdGF0ZS5mYWNldChmb2xkQ29uZmlnKTtcbiAgICAgICAgICAgICAgICBsZXQgd2lkZ2V0ID0gIXByZXBhcmVQbGFjZWhvbGRlciA/IGZvbGRXaWRnZXQgOlxuICAgICAgICAgICAgICAgICAgICBEZWNvcmF0aW9uLnJlcGxhY2UoeyB3aWRnZXQ6IG5ldyBQcmVwYXJlZEZvbGRXaWRnZXQocHJlcGFyZVBsYWNlaG9sZGVyKHRyLnN0YXRlLCBlLnZhbHVlKSkgfSk7XG4gICAgICAgICAgICAgICAgZm9sZGVkID0gZm9sZGVkLnVwZGF0ZSh7IGFkZDogW3dpZGdldC5yYW5nZShlLnZhbHVlLmZyb20sIGUudmFsdWUudG8pXSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGUuaXModW5mb2xkRWZmZWN0KSkge1xuICAgICAgICAgICAgICAgIGZvbGRlZCA9IGZvbGRlZC51cGRhdGUoeyBmaWx0ZXI6IChmcm9tLCB0bykgPT4gZS52YWx1ZS5mcm9tICE9IGZyb20gfHwgZS52YWx1ZS50byAhPSB0byxcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyRnJvbTogZS52YWx1ZS5mcm9tLCBmaWx0ZXJUbzogZS52YWx1ZS50byB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBDbGVhciBmb2xkZWQgcmFuZ2VzIHRoYXQgY292ZXIgdGhlIHNlbGVjdGlvbiBoZWFkXG4gICAgICAgIGlmICh0ci5zZWxlY3Rpb24pXG4gICAgICAgICAgICBmb2xkZWQgPSBjbGVhclRvdWNoZWRGb2xkcyhmb2xkZWQsIHRyLnNlbGVjdGlvbi5tYWluLmhlYWQpO1xuICAgICAgICByZXR1cm4gZm9sZGVkO1xuICAgIH0sXG4gICAgcHJvdmlkZTogZiA9PiBFZGl0b3JWaWV3LmRlY29yYXRpb25zLmZyb20oZiksXG4gICAgdG9KU09OKGZvbGRlZCwgc3RhdGUpIHtcbiAgICAgICAgbGV0IHJhbmdlcyA9IFtdO1xuICAgICAgICBmb2xkZWQuYmV0d2VlbigwLCBzdGF0ZS5kb2MubGVuZ3RoLCAoZnJvbSwgdG8pID0+IHsgcmFuZ2VzLnB1c2goZnJvbSwgdG8pOyB9KTtcbiAgICAgICAgcmV0dXJuIHJhbmdlcztcbiAgICB9LFxuICAgIGZyb21KU09OKHZhbHVlKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoICUgMilcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBKU09OIGZvciBmb2xkIHN0YXRlXCIpO1xuICAgICAgICBsZXQgcmFuZ2VzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOykge1xuICAgICAgICAgICAgbGV0IGZyb20gPSB2YWx1ZVtpKytdLCB0byA9IHZhbHVlW2krK107XG4gICAgICAgICAgICBpZiAodHlwZW9mIGZyb20gIT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgdG8gIT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgSlNPTiBmb3IgZm9sZCBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKGZvbGRXaWRnZXQucmFuZ2UoZnJvbSwgdG8pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5zZXQocmFuZ2VzLCB0cnVlKTtcbiAgICB9XG59KTtcbmZ1bmN0aW9uIGNsZWFyVG91Y2hlZEZvbGRzKGZvbGRlZCwgZnJvbSwgdG8gPSBmcm9tKSB7XG4gICAgbGV0IHRvdWNoZWQgPSBmYWxzZTtcbiAgICBmb2xkZWQuYmV0d2Vlbihmcm9tLCB0bywgKGEsIGIpID0+IHsgaWYgKGEgPCB0byAmJiBiID4gZnJvbSlcbiAgICAgICAgdG91Y2hlZCA9IHRydWU7IH0pO1xuICAgIHJldHVybiAhdG91Y2hlZCA/IGZvbGRlZCA6IGZvbGRlZC51cGRhdGUoe1xuICAgICAgICBmaWx0ZXJGcm9tOiBmcm9tLFxuICAgICAgICBmaWx0ZXJUbzogdG8sXG4gICAgICAgIGZpbHRlcjogKGEsIGIpID0+IGEgPj0gdG8gfHwgYiA8PSBmcm9tXG4gICAgfSk7XG59XG4vKipcbkdldCBhIFtyYW5nZSBzZXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuUmFuZ2VTZXQpIGNvbnRhaW5pbmcgdGhlIGZvbGRlZCByYW5nZXNcbmluIHRoZSBnaXZlbiBzdGF0ZS5cbiovXG5mdW5jdGlvbiBmb2xkZWRSYW5nZXMoc3RhdGUpIHtcbiAgICByZXR1cm4gc3RhdGUuZmllbGQoZm9sZFN0YXRlLCBmYWxzZSkgfHwgUmFuZ2VTZXQuZW1wdHk7XG59XG5mdW5jdGlvbiBmaW5kRm9sZChzdGF0ZSwgZnJvbSwgdG8pIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IGZvdW5kID0gbnVsbDtcbiAgICAoX2EgPSBzdGF0ZS5maWVsZChmb2xkU3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJldHdlZW4oZnJvbSwgdG8sIChmcm9tLCB0bykgPT4ge1xuICAgICAgICBpZiAoIWZvdW5kIHx8IGZvdW5kLmZyb20gPiBmcm9tKVxuICAgICAgICAgICAgZm91bmQgPSB7IGZyb20sIHRvIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuZnVuY3Rpb24gZm9sZEV4aXN0cyhmb2xkZWQsIGZyb20sIHRvKSB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgZm9sZGVkLmJldHdlZW4oZnJvbSwgZnJvbSwgKGEsIGIpID0+IHsgaWYgKGEgPT0gZnJvbSAmJiBiID09IHRvKVxuICAgICAgICBmb3VuZCA9IHRydWU7IH0pO1xuICAgIHJldHVybiBmb3VuZDtcbn1cbmZ1bmN0aW9uIG1heWJlRW5hYmxlKHN0YXRlLCBvdGhlcikge1xuICAgIHJldHVybiBzdGF0ZS5maWVsZChmb2xkU3RhdGUsIGZhbHNlKSA/IG90aGVyIDogb3RoZXIuY29uY2F0KFN0YXRlRWZmZWN0LmFwcGVuZENvbmZpZy5vZihjb2RlRm9sZGluZygpKSk7XG59XG4vKipcbkZvbGQgdGhlIGxpbmVzIHRoYXQgYXJlIHNlbGVjdGVkLCBpZiBwb3NzaWJsZS5cbiovXG5jb25zdCBmb2xkQ29kZSA9IHZpZXcgPT4ge1xuICAgIGZvciAobGV0IGxpbmUgb2Ygc2VsZWN0ZWRMaW5lcyh2aWV3KSkge1xuICAgICAgICBsZXQgcmFuZ2UgPSBmb2xkYWJsZSh2aWV3LnN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pO1xuICAgICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBtYXliZUVuYWJsZSh2aWV3LnN0YXRlLCBbZm9sZEVmZmVjdC5vZihyYW5nZSksIGFubm91bmNlRm9sZCh2aWV3LCByYW5nZSldKSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG4vKipcblVuZm9sZCBmb2xkZWQgcmFuZ2VzIG9uIHNlbGVjdGVkIGxpbmVzLlxuKi9cbmNvbnN0IHVuZm9sZENvZGUgPSB2aWV3ID0+IHtcbiAgICBpZiAoIXZpZXcuc3RhdGUuZmllbGQoZm9sZFN0YXRlLCBmYWxzZSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgZWZmZWN0cyA9IFtdO1xuICAgIGZvciAobGV0IGxpbmUgb2Ygc2VsZWN0ZWRMaW5lcyh2aWV3KSkge1xuICAgICAgICBsZXQgZm9sZGVkID0gZmluZEZvbGQodmlldy5zdGF0ZSwgbGluZS5mcm9tLCBsaW5lLnRvKTtcbiAgICAgICAgaWYgKGZvbGRlZClcbiAgICAgICAgICAgIGVmZmVjdHMucHVzaCh1bmZvbGRFZmZlY3Qub2YoZm9sZGVkKSwgYW5ub3VuY2VGb2xkKHZpZXcsIGZvbGRlZCwgZmFsc2UpKTtcbiAgICB9XG4gICAgaWYgKGVmZmVjdHMubGVuZ3RoKVxuICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0cyB9KTtcbiAgICByZXR1cm4gZWZmZWN0cy5sZW5ndGggPiAwO1xufTtcbmZ1bmN0aW9uIGFubm91bmNlRm9sZCh2aWV3LCByYW5nZSwgZm9sZCA9IHRydWUpIHtcbiAgICBsZXQgbGluZUZyb20gPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQocmFuZ2UuZnJvbSkubnVtYmVyLCBsaW5lVG8gPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQocmFuZ2UudG8pLm51bWJlcjtcbiAgICByZXR1cm4gRWRpdG9yVmlldy5hbm5vdW5jZS5vZihgJHt2aWV3LnN0YXRlLnBocmFzZShmb2xkID8gXCJGb2xkZWQgbGluZXNcIiA6IFwiVW5mb2xkZWQgbGluZXNcIil9ICR7bGluZUZyb219ICR7dmlldy5zdGF0ZS5waHJhc2UoXCJ0b1wiKX0gJHtsaW5lVG99LmApO1xufVxuLyoqXG5Gb2xkIGFsbCB0b3AtbGV2ZWwgZm9sZGFibGUgcmFuZ2VzLiBOb3RlIHRoYXQsIGluIG1vc3QgY2FzZXMsXG5mb2xkaW5nIGluZm9ybWF0aW9uIHdpbGwgZGVwZW5kIG9uIHRoZSBbc3ludGF4XG50cmVlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLnN5bnRheFRyZWUpLCBhbmQgZm9sZGluZyBldmVyeXRoaW5nIG1heSBub3Qgd29ya1xucmVsaWFibHkgd2hlbiB0aGUgZG9jdW1lbnQgaGFzbid0IGJlZW4gZnVsbHkgcGFyc2VkIChlaXRoZXJcbmJlY2F1c2UgdGhlIGVkaXRvciBzdGF0ZSB3YXMgb25seSBqdXN0IGluaXRpYWxpemVkLCBvciBiZWNhdXNlIHRoZVxuZG9jdW1lbnQgaXMgc28gYmlnIHRoYXQgdGhlIHBhcnNlciBkZWNpZGVkIG5vdCB0byBwYXJzZSBpdFxuZW50aXJlbHkpLlxuKi9cbmNvbnN0IGZvbGRBbGwgPSB2aWV3ID0+IHtcbiAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldywgZWZmZWN0cyA9IFtdO1xuICAgIGZvciAobGV0IHBvcyA9IDA7IHBvcyA8IHN0YXRlLmRvYy5sZW5ndGg7KSB7XG4gICAgICAgIGxldCBsaW5lID0gdmlldy5saW5lQmxvY2tBdChwb3MpLCByYW5nZSA9IGZvbGRhYmxlKHN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pO1xuICAgICAgICBpZiAocmFuZ2UpXG4gICAgICAgICAgICBlZmZlY3RzLnB1c2goZm9sZEVmZmVjdC5vZihyYW5nZSkpO1xuICAgICAgICBwb3MgPSAocmFuZ2UgPyB2aWV3LmxpbmVCbG9ja0F0KHJhbmdlLnRvKSA6IGxpbmUpLnRvICsgMTtcbiAgICB9XG4gICAgaWYgKGVmZmVjdHMubGVuZ3RoKVxuICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogbWF5YmVFbmFibGUodmlldy5zdGF0ZSwgZWZmZWN0cykgfSk7XG4gICAgcmV0dXJuICEhZWZmZWN0cy5sZW5ndGg7XG59O1xuLyoqXG5VbmZvbGQgYWxsIGZvbGRlZCBjb2RlLlxuKi9cbmNvbnN0IHVuZm9sZEFsbCA9IHZpZXcgPT4ge1xuICAgIGxldCBmaWVsZCA9IHZpZXcuc3RhdGUuZmllbGQoZm9sZFN0YXRlLCBmYWxzZSk7XG4gICAgaWYgKCFmaWVsZCB8fCAhZmllbGQuc2l6ZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBlZmZlY3RzID0gW107XG4gICAgZmllbGQuYmV0d2VlbigwLCB2aWV3LnN0YXRlLmRvYy5sZW5ndGgsIChmcm9tLCB0bykgPT4geyBlZmZlY3RzLnB1c2godW5mb2xkRWZmZWN0Lm9mKHsgZnJvbSwgdG8gfSkpOyB9KTtcbiAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0cyB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vLyBGaW5kIHRoZSBmb2xkYWJsZSByZWdpb24gY29udGFpbmluZyB0aGUgZ2l2ZW4gbGluZSwgaWYgb25lIGV4aXN0c1xuZnVuY3Rpb24gZm9sZGFibGVDb250YWluZXIodmlldywgbGluZUJsb2NrKSB7XG4gICAgLy8gTG9vayBiYWNrd2FyZHMgdGhyb3VnaCBsaW5lIGJsb2NrcyB1bnRpbCB3ZSBmaW5kIGEgZm9sZGFibGUgcmVnaW9uIHRoYXRcbiAgICAvLyBpbnRlcnNlY3RzIHdpdGggdGhlIGxpbmVcbiAgICBmb3IgKGxldCBsaW5lID0gbGluZUJsb2NrOzspIHtcbiAgICAgICAgbGV0IGZvbGRhYmxlUmVnaW9uID0gZm9sZGFibGUodmlldy5zdGF0ZSwgbGluZS5mcm9tLCBsaW5lLnRvKTtcbiAgICAgICAgaWYgKGZvbGRhYmxlUmVnaW9uICYmIGZvbGRhYmxlUmVnaW9uLnRvID4gbGluZUJsb2NrLmZyb20pXG4gICAgICAgICAgICByZXR1cm4gZm9sZGFibGVSZWdpb247XG4gICAgICAgIGlmICghbGluZS5mcm9tKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxpbmUgPSB2aWV3LmxpbmVCbG9ja0F0KGxpbmUuZnJvbSAtIDEpO1xuICAgIH1cbn1cbi8qKlxuVG9nZ2xlIGZvbGRpbmcgYXQgY3Vyc29ycy4gVW5mb2xkcyBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBmb2xkXG5zdGFydGluZyBpbiB0aGF0IGxpbmUsIHRyaWVzIHRvIGZpbmQgYSBmb2xkYWJsZSByYW5nZSBhcm91bmQgaXRcbm90aGVyd2lzZS5cbiovXG5jb25zdCB0b2dnbGVGb2xkID0gKHZpZXcpID0+IHtcbiAgICBsZXQgZWZmZWN0cyA9IFtdO1xuICAgIGZvciAobGV0IGxpbmUgb2Ygc2VsZWN0ZWRMaW5lcyh2aWV3KSkge1xuICAgICAgICBsZXQgZm9sZGVkID0gZmluZEZvbGQodmlldy5zdGF0ZSwgbGluZS5mcm9tLCBsaW5lLnRvKTtcbiAgICAgICAgaWYgKGZvbGRlZCkge1xuICAgICAgICAgICAgZWZmZWN0cy5wdXNoKHVuZm9sZEVmZmVjdC5vZihmb2xkZWQpLCBhbm5vdW5jZUZvbGQodmlldywgZm9sZGVkLCBmYWxzZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGZvbGRSYW5nZSA9IGZvbGRhYmxlQ29udGFpbmVyKHZpZXcsIGxpbmUpO1xuICAgICAgICAgICAgaWYgKGZvbGRSYW5nZSlcbiAgICAgICAgICAgICAgICBlZmZlY3RzLnB1c2goZm9sZEVmZmVjdC5vZihmb2xkUmFuZ2UpLCBhbm5vdW5jZUZvbGQodmlldywgZm9sZFJhbmdlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVmZmVjdHMubGVuZ3RoID4gMClcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IG1heWJlRW5hYmxlKHZpZXcuc3RhdGUsIGVmZmVjdHMpIH0pO1xuICAgIHJldHVybiAhIWVmZmVjdHMubGVuZ3RoO1xufTtcbi8qKlxuRGVmYXVsdCBmb2xkLXJlbGF0ZWQga2V5IGJpbmRpbmdzLlxuXG4gLSBDdHJsLVNoaWZ0LVsgKENtZC1BbHQtWyBvbiBtYWNPUyk6IFtgZm9sZENvZGVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmZvbGRDb2RlKS5cbiAtIEN0cmwtU2hpZnQtXSAoQ21kLUFsdC1dIG9uIG1hY09TKTogW2B1bmZvbGRDb2RlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS51bmZvbGRDb2RlKS5cbiAtIEN0cmwtQWx0LVs6IFtgZm9sZEFsbGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuZm9sZEFsbCkuXG4gLSBDdHJsLUFsdC1dOiBbYHVuZm9sZEFsbGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UudW5mb2xkQWxsKS5cbiovXG5jb25zdCBmb2xkS2V5bWFwID0gW1xuICAgIHsga2V5OiBcIkN0cmwtU2hpZnQtW1wiLCBtYWM6IFwiQ21kLUFsdC1bXCIsIHJ1bjogZm9sZENvZGUgfSxcbiAgICB7IGtleTogXCJDdHJsLVNoaWZ0LV1cIiwgbWFjOiBcIkNtZC1BbHQtXVwiLCBydW46IHVuZm9sZENvZGUgfSxcbiAgICB7IGtleTogXCJDdHJsLUFsdC1bXCIsIHJ1bjogZm9sZEFsbCB9LFxuICAgIHsga2V5OiBcIkN0cmwtQWx0LV1cIiwgcnVuOiB1bmZvbGRBbGwgfVxuXTtcbmNvbnN0IGRlZmF1bHRDb25maWcgPSB7XG4gICAgcGxhY2Vob2xkZXJET006IG51bGwsXG4gICAgcHJlcGFyZVBsYWNlaG9sZGVyOiBudWxsLFxuICAgIHBsYWNlaG9sZGVyVGV4dDogXCJcdTIwMjZcIlxufTtcbmNvbnN0IGZvbGRDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKHZhbHVlcykgeyByZXR1cm4gY29tYmluZUNvbmZpZyh2YWx1ZXMsIGRlZmF1bHRDb25maWcpOyB9XG59KTtcbi8qKlxuQ3JlYXRlIGFuIGV4dGVuc2lvbiB0aGF0IGNvbmZpZ3VyZXMgY29kZSBmb2xkaW5nLlxuKi9cbmZ1bmN0aW9uIGNvZGVGb2xkaW5nKGNvbmZpZykge1xuICAgIGxldCByZXN1bHQgPSBbZm9sZFN0YXRlLCBiYXNlVGhlbWUkMV07XG4gICAgaWYgKGNvbmZpZylcbiAgICAgICAgcmVzdWx0LnB1c2goZm9sZENvbmZpZy5vZihjb25maWcpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gd2lkZ2V0VG9ET00odmlldywgcHJlcGFyZWQpIHtcbiAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldywgY29uZiA9IHN0YXRlLmZhY2V0KGZvbGRDb25maWcpO1xuICAgIGxldCBvbmNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBsaW5lID0gdmlldy5saW5lQmxvY2tBdCh2aWV3LnBvc0F0RE9NKGV2ZW50LnRhcmdldCkpO1xuICAgICAgICBsZXQgZm9sZGVkID0gZmluZEZvbGQodmlldy5zdGF0ZSwgbGluZS5mcm9tLCBsaW5lLnRvKTtcbiAgICAgICAgaWYgKGZvbGRlZClcbiAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiB1bmZvbGRFZmZlY3Qub2YoZm9sZGVkKSB9KTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuICAgIGlmIChjb25mLnBsYWNlaG9sZGVyRE9NKVxuICAgICAgICByZXR1cm4gY29uZi5wbGFjZWhvbGRlckRPTSh2aWV3LCBvbmNsaWNrLCBwcmVwYXJlZCk7XG4gICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBlbGVtZW50LnRleHRDb250ZW50ID0gY29uZi5wbGFjZWhvbGRlclRleHQ7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHN0YXRlLnBocmFzZShcImZvbGRlZCBjb2RlXCIpKTtcbiAgICBlbGVtZW50LnRpdGxlID0gc3RhdGUucGhyYXNlKFwidW5mb2xkXCIpO1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gXCJjbS1mb2xkUGxhY2Vob2xkZXJcIjtcbiAgICBlbGVtZW50Lm9uY2xpY2sgPSBvbmNsaWNrO1xuICAgIHJldHVybiBlbGVtZW50O1xufVxuY29uc3QgZm9sZFdpZGdldCA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLnJlcGxhY2UoeyB3aWRnZXQ6IC8qQF9fUFVSRV9fKi9uZXcgY2xhc3MgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICAgICAgdG9ET00odmlldykgeyByZXR1cm4gd2lkZ2V0VG9ET00odmlldywgbnVsbCk7IH1cbiAgICB9IH0pO1xuY2xhc3MgUHJlcGFyZWRGb2xkV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgY29uc3RydWN0b3IodmFsdWUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gdGhpcy52YWx1ZSA9PSBvdGhlci52YWx1ZTsgfVxuICAgIHRvRE9NKHZpZXcpIHsgcmV0dXJuIHdpZGdldFRvRE9NKHZpZXcsIHRoaXMudmFsdWUpOyB9XG59XG5jb25zdCBmb2xkR3V0dGVyRGVmYXVsdHMgPSB7XG4gICAgb3BlblRleHQ6IFwiXHUyMzA0XCIsXG4gICAgY2xvc2VkVGV4dDogXCJcdTIwM0FcIixcbiAgICBtYXJrZXJET006IG51bGwsXG4gICAgZG9tRXZlbnRIYW5kbGVyczoge30sXG4gICAgZm9sZGluZ0NoYW5nZWQ6ICgpID0+IGZhbHNlXG59O1xuY2xhc3MgRm9sZE1hcmtlciBleHRlbmRzIEd1dHRlck1hcmtlciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBvcGVuKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLm9wZW4gPSBvcGVuO1xuICAgIH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gdGhpcy5jb25maWcgPT0gb3RoZXIuY29uZmlnICYmIHRoaXMub3BlbiA9PSBvdGhlci5vcGVuOyB9XG4gICAgdG9ET00odmlldykge1xuICAgICAgICBpZiAodGhpcy5jb25maWcubWFya2VyRE9NKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLm1hcmtlckRPTSh0aGlzLm9wZW4pO1xuICAgICAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gdGhpcy5vcGVuID8gdGhpcy5jb25maWcub3BlblRleHQgOiB0aGlzLmNvbmZpZy5jbG9zZWRUZXh0O1xuICAgICAgICBzcGFuLnRpdGxlID0gdmlldy5zdGF0ZS5waHJhc2UodGhpcy5vcGVuID8gXCJGb2xkIGxpbmVcIiA6IFwiVW5mb2xkIGxpbmVcIik7XG4gICAgICAgIHJldHVybiBzcGFuO1xuICAgIH1cbn1cbi8qKlxuQ3JlYXRlIGFuIGV4dGVuc2lvbiB0aGF0IHJlZ2lzdGVycyBhIGZvbGQgZ3V0dGVyLCB3aGljaCBzaG93cyBhXG5mb2xkIHN0YXR1cyBpbmRpY2F0b3IgYmVmb3JlIGZvbGRhYmxlIGxpbmVzICh3aGljaCBjYW4gYmUgY2xpY2tlZFxudG8gZm9sZCBvciB1bmZvbGQgdGhlIGxpbmUpLlxuKi9cbmZ1bmN0aW9uIGZvbGRHdXR0ZXIoY29uZmlnID0ge30pIHtcbiAgICBsZXQgZnVsbENvbmZpZyA9IHsgLi4uZm9sZEd1dHRlckRlZmF1bHRzLCAuLi5jb25maWcgfTtcbiAgICBsZXQgY2FuRm9sZCA9IG5ldyBGb2xkTWFya2VyKGZ1bGxDb25maWcsIHRydWUpLCBjYW5VbmZvbGQgPSBuZXcgRm9sZE1hcmtlcihmdWxsQ29uZmlnLCBmYWxzZSk7XG4gICAgbGV0IG1hcmtlcnMgPSBWaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbSA9IHZpZXcudmlld3BvcnQuZnJvbTtcbiAgICAgICAgICAgIHRoaXMubWFya2VycyA9IHRoaXMuYnVpbGRNYXJrZXJzKHZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgICAgIGlmICh1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUudmlld3BvcnRDaGFuZ2VkIHx8XG4gICAgICAgICAgICAgICAgdXBkYXRlLnN0YXJ0U3RhdGUuZmFjZXQobGFuZ3VhZ2UpICE9IHVwZGF0ZS5zdGF0ZS5mYWNldChsYW5ndWFnZSkgfHxcbiAgICAgICAgICAgICAgICB1cGRhdGUuc3RhcnRTdGF0ZS5maWVsZChmb2xkU3RhdGUsIGZhbHNlKSAhPSB1cGRhdGUuc3RhdGUuZmllbGQoZm9sZFN0YXRlLCBmYWxzZSkgfHxcbiAgICAgICAgICAgICAgICBzeW50YXhUcmVlKHVwZGF0ZS5zdGFydFN0YXRlKSAhPSBzeW50YXhUcmVlKHVwZGF0ZS5zdGF0ZSkgfHxcbiAgICAgICAgICAgICAgICBmdWxsQ29uZmlnLmZvbGRpbmdDaGFuZ2VkKHVwZGF0ZSkpXG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrZXJzID0gdGhpcy5idWlsZE1hcmtlcnModXBkYXRlLnZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIGJ1aWxkTWFya2Vycyh2aWV3KSB7XG4gICAgICAgICAgICBsZXQgYnVpbGRlciA9IG5ldyBSYW5nZVNldEJ1aWxkZXIoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGxpbmUgb2Ygdmlldy52aWV3cG9ydExpbmVCbG9ja3MpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWFyayA9IGZpbmRGb2xkKHZpZXcuc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50bykgPyBjYW5VbmZvbGRcbiAgICAgICAgICAgICAgICAgICAgOiBmb2xkYWJsZSh2aWV3LnN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pID8gY2FuRm9sZCA6IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKG1hcmspXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKGxpbmUuZnJvbSwgbGluZS5mcm9tLCBtYXJrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgbGV0IHsgZG9tRXZlbnRIYW5kbGVycyB9ID0gZnVsbENvbmZpZztcbiAgICByZXR1cm4gW1xuICAgICAgICBtYXJrZXJzLFxuICAgICAgICBndXR0ZXIoe1xuICAgICAgICAgICAgY2xhc3M6IFwiY20tZm9sZEd1dHRlclwiLFxuICAgICAgICAgICAgbWFya2Vycyh2aWV3KSB7IHZhciBfYTsgcmV0dXJuICgoX2EgPSB2aWV3LnBsdWdpbihtYXJrZXJzKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcmtlcnMpIHx8IFJhbmdlU2V0LmVtcHR5OyB9LFxuICAgICAgICAgICAgaW5pdGlhbFNwYWNlcigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZvbGRNYXJrZXIoZnVsbENvbmZpZywgZmFsc2UpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRvbUV2ZW50SGFuZGxlcnM6IHtcbiAgICAgICAgICAgICAgICAuLi5kb21FdmVudEhhbmRsZXJzLFxuICAgICAgICAgICAgICAgIGNsaWNrOiAodmlldywgbGluZSwgZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbUV2ZW50SGFuZGxlcnMuY2xpY2sgJiYgZG9tRXZlbnRIYW5kbGVycy5jbGljayh2aWV3LCBsaW5lLCBldmVudCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZvbGRlZCA9IGZpbmRGb2xkKHZpZXcuc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50byk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2xkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiB1bmZvbGRFZmZlY3Qub2YoZm9sZGVkKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCByYW5nZSA9IGZvbGRhYmxlKHZpZXcuc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50byk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IGZvbGRFZmZlY3Qub2YocmFuZ2UpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGNvZGVGb2xkaW5nKClcbiAgICBdO1xufVxuY29uc3QgYmFzZVRoZW1lJDEgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5iYXNlVGhlbWUoe1xuICAgIFwiLmNtLWZvbGRQbGFjZWhvbGRlclwiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZWVlXCIsXG4gICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgI2RkZFwiLFxuICAgICAgICBjb2xvcjogXCIjODg4XCIsXG4gICAgICAgIGJvcmRlclJhZGl1czogXCIuMmVtXCIsXG4gICAgICAgIG1hcmdpbjogXCIwIDFweFwiLFxuICAgICAgICBwYWRkaW5nOiBcIjAgMXB4XCIsXG4gICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCJcbiAgICB9LFxuICAgIFwiLmNtLWZvbGRHdXR0ZXIgc3BhblwiOiB7XG4gICAgICAgIHBhZGRpbmc6IFwiMCAxcHhcIixcbiAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIlxuICAgIH1cbn0pO1xuXG4vKipcbkEgaGlnaGxpZ2h0IHN0eWxlIGFzc29jaWF0ZXMgQ1NTIHN0eWxlcyB3aXRoIGhpZ2hsaWdodGluZ1xuW3RhZ3NdKGh0dHBzOi8vbGV6ZXIuY29kZW1pcnJvci5uZXQvZG9jcy9yZWYjaGlnaGxpZ2h0LlRhZykuXG4qL1xuY2xhc3MgSGlnaGxpZ2h0U3R5bGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSB0YWcgc3R5bGVzIHVzZWQgdG8gY3JlYXRlIHRoaXMgaGlnaGxpZ2h0IHN0eWxlLlxuICAgICovXG4gICAgc3BlY3MsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zcGVjcyA9IHNwZWNzO1xuICAgICAgICBsZXQgbW9kU3BlYztcbiAgICAgICAgZnVuY3Rpb24gZGVmKHNwZWMpIHtcbiAgICAgICAgICAgIGxldCBjbHMgPSBTdHlsZU1vZHVsZS5uZXdOYW1lKCk7XG4gICAgICAgICAgICAobW9kU3BlYyB8fCAobW9kU3BlYyA9IE9iamVjdC5jcmVhdGUobnVsbCkpKVtcIi5cIiArIGNsc10gPSBzcGVjO1xuICAgICAgICAgICAgcmV0dXJuIGNscztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbGwgPSB0eXBlb2Ygb3B0aW9ucy5hbGwgPT0gXCJzdHJpbmdcIiA/IG9wdGlvbnMuYWxsIDogb3B0aW9ucy5hbGwgPyBkZWYob3B0aW9ucy5hbGwpIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzY29wZU9wdCA9IG9wdGlvbnMuc2NvcGU7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBzY29wZU9wdCBpbnN0YW5jZW9mIExhbmd1YWdlID8gKHR5cGUpID0+IHR5cGUucHJvcChsYW5ndWFnZURhdGFQcm9wKSA9PSBzY29wZU9wdC5kYXRhXG4gICAgICAgICAgICA6IHNjb3BlT3B0ID8gKHR5cGUpID0+IHR5cGUgPT0gc2NvcGVPcHQgOiB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc3R5bGUgPSB0YWdIaWdobGlnaHRlcihzcGVjcy5tYXAoc3R5bGUgPT4gKHtcbiAgICAgICAgICAgIHRhZzogc3R5bGUudGFnLFxuICAgICAgICAgICAgY2xhc3M6IHN0eWxlLmNsYXNzIHx8IGRlZihPYmplY3QuYXNzaWduKHt9LCBzdHlsZSwgeyB0YWc6IG51bGwgfSkpXG4gICAgICAgIH0pKSwge1xuICAgICAgICAgICAgYWxsLFxuICAgICAgICB9KS5zdHlsZTtcbiAgICAgICAgdGhpcy5tb2R1bGUgPSBtb2RTcGVjID8gbmV3IFN0eWxlTW9kdWxlKG1vZFNwZWMpIDogbnVsbDtcbiAgICAgICAgdGhpcy50aGVtZVR5cGUgPSBvcHRpb25zLnRoZW1lVHlwZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgaGlnaGxpZ2h0ZXIgc3R5bGUgdGhhdCBhc3NvY2lhdGVzIHRoZSBnaXZlbiBzdHlsZXMgdG9cbiAgICB0aGUgZ2l2ZW4gdGFncy4gVGhlIHNwZWNzIG11c3QgYmUgb2JqZWN0cyB0aGF0IGhvbGQgYSBzdHlsZSB0YWdcbiAgICBvciBhcnJheSBvZiB0YWdzIGluIHRoZWlyIGB0YWdgIHByb3BlcnR5LCBhbmQgZWl0aGVyIGEgc2luZ2xlXG4gICAgYGNsYXNzYCBwcm9wZXJ0eSBwcm92aWRpbmcgYSBzdGF0aWMgQ1NTIGNsYXNzIChmb3IgaGlnaGxpZ2h0ZXJcbiAgICB0aGF0IHJlbHkgb24gZXh0ZXJuYWwgc3R5bGluZyksIG9yIGFcbiAgICBbYHN0eWxlLW1vZGBdKGh0dHBzOi8vZ2l0aHViLmNvbS9tYXJpam5oL3N0eWxlLW1vZCNkb2N1bWVudGF0aW9uKS1zdHlsZVxuICAgIHNldCBvZiBDU1MgcHJvcGVydGllcyAod2hpY2ggZGVmaW5lIHRoZSBzdHlsaW5nIGZvciB0aG9zZSB0YWdzKS5cbiAgICBcbiAgICBUaGUgQ1NTIHJ1bGVzIGNyZWF0ZWQgZm9yIGEgaGlnaGxpZ2h0ZXIgd2lsbCBiZSBlbWl0dGVkIGluIHRoZVxuICAgIG9yZGVyIG9mIHRoZSBzcGVjJ3MgcHJvcGVydGllcy4gVGhhdCBtZWFucyB0aGF0IGZvciBlbGVtZW50cyB0aGF0XG4gICAgaGF2ZSBtdWx0aXBsZSB0YWdzIGFzc29jaWF0ZWQgd2l0aCB0aGVtLCBzdHlsZXMgZGVmaW5lZCBmdXJ0aGVyXG4gICAgZG93biBpbiB0aGUgbGlzdCB3aWxsIGhhdmUgYSBoaWdoZXIgQ1NTIHByZWNlZGVuY2UgdGhhbiBzdHlsZXNcbiAgICBkZWZpbmVkIGVhcmxpZXIuXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKHNwZWNzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgSGlnaGxpZ2h0U3R5bGUoc3BlY3MsIG9wdGlvbnMgfHwge30pO1xuICAgIH1cbn1cbmNvbnN0IGhpZ2hsaWdodGVyRmFjZXQgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBmYWxsYmFja0hpZ2hsaWdodGVyID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZSh2YWx1ZXMpIHsgcmV0dXJuIHZhbHVlcy5sZW5ndGggPyBbdmFsdWVzWzBdXSA6IG51bGw7IH1cbn0pO1xuZnVuY3Rpb24gZ2V0SGlnaGxpZ2h0ZXJzKHN0YXRlKSB7XG4gICAgbGV0IG1haW4gPSBzdGF0ZS5mYWNldChoaWdobGlnaHRlckZhY2V0KTtcbiAgICByZXR1cm4gbWFpbi5sZW5ndGggPyBtYWluIDogc3RhdGUuZmFjZXQoZmFsbGJhY2tIaWdobGlnaHRlcik7XG59XG4vKipcbldyYXAgYSBoaWdobGlnaHRlciBpbiBhbiBlZGl0b3IgZXh0ZW5zaW9uIHRoYXQgdXNlcyBpdCB0byBhcHBseVxuc3ludGF4IGhpZ2hsaWdodGluZyB0byB0aGUgZWRpdG9yIGNvbnRlbnQuXG5cbldoZW4gbXVsdGlwbGUgKG5vbi1mYWxsYmFjaykgc3R5bGVzIGFyZSBwcm92aWRlZCwgdGhlIHN0eWxpbmdcbmFwcGxpZWQgaXMgdGhlIHVuaW9uIG9mIHRoZSBjbGFzc2VzIHRoZXkgZW1pdC5cbiovXG5mdW5jdGlvbiBzeW50YXhIaWdobGlnaHRpbmcoaGlnaGxpZ2h0ZXIsIG9wdGlvbnMpIHtcbiAgICBsZXQgZXh0ID0gW3RyZWVIaWdobGlnaHRlcl0sIHRoZW1lVHlwZTtcbiAgICBpZiAoaGlnaGxpZ2h0ZXIgaW5zdGFuY2VvZiBIaWdobGlnaHRTdHlsZSkge1xuICAgICAgICBpZiAoaGlnaGxpZ2h0ZXIubW9kdWxlKVxuICAgICAgICAgICAgZXh0LnB1c2goRWRpdG9yVmlldy5zdHlsZU1vZHVsZS5vZihoaWdobGlnaHRlci5tb2R1bGUpKTtcbiAgICAgICAgdGhlbWVUeXBlID0gaGlnaGxpZ2h0ZXIudGhlbWVUeXBlO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmZhbGxiYWNrKVxuICAgICAgICBleHQucHVzaChmYWxsYmFja0hpZ2hsaWdodGVyLm9mKGhpZ2hsaWdodGVyKSk7XG4gICAgZWxzZSBpZiAodGhlbWVUeXBlKVxuICAgICAgICBleHQucHVzaChoaWdobGlnaHRlckZhY2V0LmNvbXB1dGVOKFtFZGl0b3JWaWV3LmRhcmtUaGVtZV0sIHN0YXRlID0+IHtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5mYWNldChFZGl0b3JWaWV3LmRhcmtUaGVtZSkgPT0gKHRoZW1lVHlwZSA9PSBcImRhcmtcIikgPyBbaGlnaGxpZ2h0ZXJdIDogW107XG4gICAgICAgIH0pKTtcbiAgICBlbHNlXG4gICAgICAgIGV4dC5wdXNoKGhpZ2hsaWdodGVyRmFjZXQub2YoaGlnaGxpZ2h0ZXIpKTtcbiAgICByZXR1cm4gZXh0O1xufVxuLyoqXG5SZXR1cm5zIHRoZSBDU1MgY2xhc3NlcyAoaWYgYW55KSB0aGF0IHRoZSBoaWdobGlnaHRlcnMgYWN0aXZlIGluXG50aGUgc3RhdGUgd291bGQgYXNzaWduIHRvIHRoZSBnaXZlbiBzdHlsZVxuW3RhZ3NdKGh0dHBzOi8vbGV6ZXIuY29kZW1pcnJvci5uZXQvZG9jcy9yZWYjaGlnaGxpZ2h0LlRhZykgYW5kXG4ob3B0aW9uYWwpIGxhbmd1YWdlXG5bc2NvcGVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuSGlnaGxpZ2h0U3R5bGVeZGVmaW5lXm9wdGlvbnMuc2NvcGUpLlxuKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodGluZ0ZvcihzdGF0ZSwgdGFncywgc2NvcGUpIHtcbiAgICBsZXQgaGlnaGxpZ2h0ZXJzID0gZ2V0SGlnaGxpZ2h0ZXJzKHN0YXRlKTtcbiAgICBsZXQgcmVzdWx0ID0gbnVsbDtcbiAgICBpZiAoaGlnaGxpZ2h0ZXJzKVxuICAgICAgICBmb3IgKGxldCBoaWdobGlnaHRlciBvZiBoaWdobGlnaHRlcnMpIHtcbiAgICAgICAgICAgIGlmICghaGlnaGxpZ2h0ZXIuc2NvcGUgfHwgc2NvcGUgJiYgaGlnaGxpZ2h0ZXIuc2NvcGUoc2NvcGUpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNscyA9IGhpZ2hsaWdodGVyLnN0eWxlKHRhZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChjbHMpXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCA/IHJlc3VsdCArIFwiIFwiICsgY2xzIDogY2xzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmNsYXNzIFRyZWVIaWdobGlnaHRlciB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLm1hcmtDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMudHJlZSA9IHN5bnRheFRyZWUodmlldy5zdGF0ZSk7XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmJ1aWxkRGVjbyh2aWV3LCBnZXRIaWdobGlnaHRlcnModmlldy5zdGF0ZSkpO1xuICAgICAgICB0aGlzLmRlY29yYXRlZFRvID0gdmlldy52aWV3cG9ydC50bztcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgdHJlZSA9IHN5bnRheFRyZWUodXBkYXRlLnN0YXRlKSwgaGlnaGxpZ2h0ZXJzID0gZ2V0SGlnaGxpZ2h0ZXJzKHVwZGF0ZS5zdGF0ZSk7XG4gICAgICAgIGxldCBzdHlsZUNoYW5nZSA9IGhpZ2hsaWdodGVycyAhPSBnZXRIaWdobGlnaHRlcnModXBkYXRlLnN0YXJ0U3RhdGUpO1xuICAgICAgICBsZXQgeyB2aWV3cG9ydCB9ID0gdXBkYXRlLnZpZXcsIGRlY29yYXRlZFRvTWFwcGVkID0gdXBkYXRlLmNoYW5nZXMubWFwUG9zKHRoaXMuZGVjb3JhdGVkVG8sIDEpO1xuICAgICAgICBpZiAodHJlZS5sZW5ndGggPCB2aWV3cG9ydC50byAmJiAhc3R5bGVDaGFuZ2UgJiYgdHJlZS50eXBlID09IHRoaXMudHJlZS50eXBlICYmIGRlY29yYXRlZFRvTWFwcGVkID49IHZpZXdwb3J0LnRvKSB7XG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5kZWNvcmF0aW9ucy5tYXAodXBkYXRlLmNoYW5nZXMpO1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0ZWRUbyA9IGRlY29yYXRlZFRvTWFwcGVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRyZWUgIT0gdGhpcy50cmVlIHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQgfHwgc3R5bGVDaGFuZ2UpIHtcbiAgICAgICAgICAgIHRoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5idWlsZERlY28odXBkYXRlLnZpZXcsIGhpZ2hsaWdodGVycyk7XG4gICAgICAgICAgICB0aGlzLmRlY29yYXRlZFRvID0gdmlld3BvcnQudG87XG4gICAgICAgIH1cbiAgICB9XG4gICAgYnVpbGREZWNvKHZpZXcsIGhpZ2hsaWdodGVycykge1xuICAgICAgICBpZiAoIWhpZ2hsaWdodGVycyB8fCAhdGhpcy50cmVlLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgIGxldCBidWlsZGVyID0gbmV3IFJhbmdlU2V0QnVpbGRlcigpO1xuICAgICAgICBmb3IgKGxldCB7IGZyb20sIHRvIH0gb2Ygdmlldy52aXNpYmxlUmFuZ2VzKSB7XG4gICAgICAgICAgICBoaWdobGlnaHRUcmVlKHRoaXMudHJlZSwgaGlnaGxpZ2h0ZXJzLCAoZnJvbSwgdG8sIHN0eWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgYnVpbGRlci5hZGQoZnJvbSwgdG8sIHRoaXMubWFya0NhY2hlW3N0eWxlXSB8fCAodGhpcy5tYXJrQ2FjaGVbc3R5bGVdID0gRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IHN0eWxlIH0pKSk7XG4gICAgICAgICAgICB9LCBmcm9tLCB0byk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1aWxkZXIuZmluaXNoKCk7XG4gICAgfVxufVxuY29uc3QgdHJlZUhpZ2hsaWdodGVyID0gLypAX19QVVJFX18qL1ByZWMuaGlnaCgvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoVHJlZUhpZ2hsaWdodGVyLCB7XG4gICAgZGVjb3JhdGlvbnM6IHYgPT4gdi5kZWNvcmF0aW9uc1xufSkpO1xuLyoqXG5BIGRlZmF1bHQgaGlnaGxpZ2h0IHN0eWxlICh3b3JrcyB3ZWxsIHdpdGggbGlnaHQgdGhlbWVzKS5cbiovXG5jb25zdCBkZWZhdWx0SGlnaGxpZ2h0U3R5bGUgPSAvKkBfX1BVUkVfXyovSGlnaGxpZ2h0U3R5bGUuZGVmaW5lKFtcbiAgICB7IHRhZzogdGFncy5tZXRhLFxuICAgICAgICBjb2xvcjogXCIjNDA0NzQwXCIgfSxcbiAgICB7IHRhZzogdGFncy5saW5rLFxuICAgICAgICB0ZXh0RGVjb3JhdGlvbjogXCJ1bmRlcmxpbmVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmhlYWRpbmcsXG4gICAgICAgIHRleHREZWNvcmF0aW9uOiBcInVuZGVybGluZVwiLFxuICAgICAgICBmb250V2VpZ2h0OiBcImJvbGRcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmVtcGhhc2lzLFxuICAgICAgICBmb250U3R5bGU6IFwiaXRhbGljXCIgfSxcbiAgICB7IHRhZzogdGFncy5zdHJvbmcsXG4gICAgICAgIGZvbnRXZWlnaHQ6IFwiYm9sZFwiIH0sXG4gICAgeyB0YWc6IHRhZ3Muc3RyaWtldGhyb3VnaCxcbiAgICAgICAgdGV4dERlY29yYXRpb246IFwibGluZS10aHJvdWdoXCIgfSxcbiAgICB7IHRhZzogdGFncy5rZXl3b3JkLFxuICAgICAgICBjb2xvcjogXCIjNzA4XCIgfSxcbiAgICB7IHRhZzogW3RhZ3MuYXRvbSwgdGFncy5ib29sLCB0YWdzLnVybCwgdGFncy5jb250ZW50U2VwYXJhdG9yLCB0YWdzLmxhYmVsTmFtZV0sXG4gICAgICAgIGNvbG9yOiBcIiMyMTlcIiB9LFxuICAgIHsgdGFnOiBbdGFncy5saXRlcmFsLCB0YWdzLmluc2VydGVkXSxcbiAgICAgICAgY29sb3I6IFwiIzE2NFwiIH0sXG4gICAgeyB0YWc6IFt0YWdzLnN0cmluZywgdGFncy5kZWxldGVkXSxcbiAgICAgICAgY29sb3I6IFwiI2ExMVwiIH0sXG4gICAgeyB0YWc6IFt0YWdzLnJlZ2V4cCwgdGFncy5lc2NhcGUsIC8qQF9fUFVSRV9fKi90YWdzLnNwZWNpYWwodGFncy5zdHJpbmcpXSxcbiAgICAgICAgY29sb3I6IFwiI2U0MFwiIH0sXG4gICAgeyB0YWc6IC8qQF9fUFVSRV9fKi90YWdzLmRlZmluaXRpb24odGFncy52YXJpYWJsZU5hbWUpLFxuICAgICAgICBjb2xvcjogXCIjMDBmXCIgfSxcbiAgICB7IHRhZzogLypAX19QVVJFX18qL3RhZ3MubG9jYWwodGFncy52YXJpYWJsZU5hbWUpLFxuICAgICAgICBjb2xvcjogXCIjMzBhXCIgfSxcbiAgICB7IHRhZzogW3RhZ3MudHlwZU5hbWUsIHRhZ3MubmFtZXNwYWNlXSxcbiAgICAgICAgY29sb3I6IFwiIzA4NVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuY2xhc3NOYW1lLFxuICAgICAgICBjb2xvcjogXCIjMTY3XCIgfSxcbiAgICB7IHRhZzogWy8qQF9fUFVSRV9fKi90YWdzLnNwZWNpYWwodGFncy52YXJpYWJsZU5hbWUpLCB0YWdzLm1hY3JvTmFtZV0sXG4gICAgICAgIGNvbG9yOiBcIiMyNTZcIiB9LFxuICAgIHsgdGFnOiAvKkBfX1BVUkVfXyovdGFncy5kZWZpbml0aW9uKHRhZ3MucHJvcGVydHlOYW1lKSxcbiAgICAgICAgY29sb3I6IFwiIzAwY1wiIH0sXG4gICAgeyB0YWc6IHRhZ3MuY29tbWVudCxcbiAgICAgICAgY29sb3I6IFwiIzk0MFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuaW52YWxpZCxcbiAgICAgICAgY29sb3I6IFwiI2YwMFwiIH1cbl0pO1xuXG5jb25zdCBiYXNlVGhlbWUgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5iYXNlVGhlbWUoe1xuICAgIFwiJi5jbS1mb2N1c2VkIC5jbS1tYXRjaGluZ0JyYWNrZXRcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwiIzMyOGM4MjUyXCIgfSxcbiAgICBcIiYuY20tZm9jdXNlZCAuY20tbm9ubWF0Y2hpbmdCcmFja2V0XCI6IHsgYmFja2dyb3VuZENvbG9yOiBcIiNiYjU1NTU0NFwiIH1cbn0pO1xuY29uc3QgRGVmYXVsdFNjYW5EaXN0ID0gMTAwMDAsIERlZmF1bHRCcmFja2V0cyA9IFwiKClbXXt9XCI7XG5jb25zdCBicmFja2V0TWF0Y2hpbmdDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVDb25maWcoY29uZmlncywge1xuICAgICAgICAgICAgYWZ0ZXJDdXJzb3I6IHRydWUsXG4gICAgICAgICAgICBicmFja2V0czogRGVmYXVsdEJyYWNrZXRzLFxuICAgICAgICAgICAgbWF4U2NhbkRpc3RhbmNlOiBEZWZhdWx0U2NhbkRpc3QsXG4gICAgICAgICAgICByZW5kZXJNYXRjaDogZGVmYXVsdFJlbmRlck1hdGNoXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuY29uc3QgbWF0Y2hpbmdNYXJrID0gLypAX19QVVJFX18qL0RlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLW1hdGNoaW5nQnJhY2tldFwiIH0pLCBub25tYXRjaGluZ01hcmsgPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20tbm9ubWF0Y2hpbmdCcmFja2V0XCIgfSk7XG5mdW5jdGlvbiBkZWZhdWx0UmVuZGVyTWF0Y2gobWF0Y2gpIHtcbiAgICBsZXQgZGVjb3JhdGlvbnMgPSBbXTtcbiAgICBsZXQgbWFyayA9IG1hdGNoLm1hdGNoZWQgPyBtYXRjaGluZ01hcmsgOiBub25tYXRjaGluZ01hcms7XG4gICAgZGVjb3JhdGlvbnMucHVzaChtYXJrLnJhbmdlKG1hdGNoLnN0YXJ0LmZyb20sIG1hdGNoLnN0YXJ0LnRvKSk7XG4gICAgaWYgKG1hdGNoLmVuZClcbiAgICAgICAgZGVjb3JhdGlvbnMucHVzaChtYXJrLnJhbmdlKG1hdGNoLmVuZC5mcm9tLCBtYXRjaC5lbmQudG8pKTtcbiAgICByZXR1cm4gZGVjb3JhdGlvbnM7XG59XG5jb25zdCBicmFja2V0TWF0Y2hpbmdTdGF0ZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUZpZWxkLmRlZmluZSh7XG4gICAgY3JlYXRlKCkgeyByZXR1cm4gRGVjb3JhdGlvbi5ub25lOyB9LFxuICAgIHVwZGF0ZShkZWNvLCB0cikge1xuICAgICAgICBpZiAoIXRyLmRvY0NoYW5nZWQgJiYgIXRyLnNlbGVjdGlvbilcbiAgICAgICAgICAgIHJldHVybiBkZWNvO1xuICAgICAgICBsZXQgZGVjb3JhdGlvbnMgPSBbXTtcbiAgICAgICAgbGV0IGNvbmZpZyA9IHRyLnN0YXRlLmZhY2V0KGJyYWNrZXRNYXRjaGluZ0NvbmZpZyk7XG4gICAgICAgIGZvciAobGV0IHJhbmdlIG9mIHRyLnN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICAgICAgICAgIGlmICghcmFuZ2UuZW1wdHkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBsZXQgbWF0Y2ggPSBtYXRjaEJyYWNrZXRzKHRyLnN0YXRlLCByYW5nZS5oZWFkLCAtMSwgY29uZmlnKVxuICAgICAgICAgICAgICAgIHx8IChyYW5nZS5oZWFkID4gMCAmJiBtYXRjaEJyYWNrZXRzKHRyLnN0YXRlLCByYW5nZS5oZWFkIC0gMSwgMSwgY29uZmlnKSlcbiAgICAgICAgICAgICAgICB8fCAoY29uZmlnLmFmdGVyQ3Vyc29yICYmXG4gICAgICAgICAgICAgICAgICAgIChtYXRjaEJyYWNrZXRzKHRyLnN0YXRlLCByYW5nZS5oZWFkLCAxLCBjb25maWcpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAocmFuZ2UuaGVhZCA8IHRyLnN0YXRlLmRvYy5sZW5ndGggJiYgbWF0Y2hCcmFja2V0cyh0ci5zdGF0ZSwgcmFuZ2UuaGVhZCArIDEsIC0xLCBjb25maWcpKSkpO1xuICAgICAgICAgICAgaWYgKG1hdGNoKVxuICAgICAgICAgICAgICAgIGRlY29yYXRpb25zID0gZGVjb3JhdGlvbnMuY29uY2F0KGNvbmZpZy5yZW5kZXJNYXRjaChtYXRjaCwgdHIuc3RhdGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5zZXQoZGVjb3JhdGlvbnMsIHRydWUpO1xuICAgIH0sXG4gICAgcHJvdmlkZTogZiA9PiBFZGl0b3JWaWV3LmRlY29yYXRpb25zLmZyb20oZilcbn0pO1xuY29uc3QgYnJhY2tldE1hdGNoaW5nVW5pcXVlID0gW1xuICAgIGJyYWNrZXRNYXRjaGluZ1N0YXRlLFxuICAgIGJhc2VUaGVtZVxuXTtcbi8qKlxuQ3JlYXRlIGFuIGV4dGVuc2lvbiB0aGF0IGVuYWJsZXMgYnJhY2tldCBtYXRjaGluZy4gV2hlbmV2ZXIgdGhlXG5jdXJzb3IgaXMgbmV4dCB0byBhIGJyYWNrZXQsIHRoYXQgYnJhY2tldCBhbmQgdGhlIG9uZSBpdCBtYXRjaGVzXG5hcmUgaGlnaGxpZ2h0ZWQuIE9yLCB3aGVuIG5vIG1hdGNoaW5nIGJyYWNrZXQgaXMgZm91bmQsIGFub3RoZXJcbmhpZ2hsaWdodGluZyBzdHlsZSBpcyB1c2VkIHRvIGluZGljYXRlIHRoaXMuXG4qL1xuZnVuY3Rpb24gYnJhY2tldE1hdGNoaW5nKGNvbmZpZyA9IHt9KSB7XG4gICAgcmV0dXJuIFticmFja2V0TWF0Y2hpbmdDb25maWcub2YoY29uZmlnKSwgYnJhY2tldE1hdGNoaW5nVW5pcXVlXTtcbn1cbi8qKlxuV2hlbiBsYXJnZXIgc3ludGF4IG5vZGVzLCBzdWNoIGFzIEhUTUwgdGFncywgYXJlIG1hcmtlZCBhc1xub3BlbmluZy9jbG9zaW5nLCBpdCBjYW4gYmUgYSBiaXQgbWVzc3kgdG8gdHJlYXQgdGhlIHdob2xlIG5vZGUgYXNcbmEgbWF0Y2hhYmxlIGJyYWNrZXQuIFRoaXMgbm9kZSBwcm9wIGFsbG93cyB5b3UgdG8gZGVmaW5lLCBmb3Igc3VjaFxuYSBub2RlLCBhIFx1MjAxOGhhbmRsZVx1MjAxOVx1MjAxNHRoZSBwYXJ0IG9mIHRoZSBub2RlIHRoYXQgaXMgaGlnaGxpZ2h0ZWQsIGFuZFxudGhhdCB0aGUgY3Vyc29yIG11c3QgYmUgb24gdG8gYWN0aXZhdGUgaGlnaGxpZ2h0aW5nIGluIHRoZSBmaXJzdFxucGxhY2UuXG4qL1xuY29uc3QgYnJhY2tldE1hdGNoaW5nSGFuZGxlID0gLypAX19QVVJFX18qL25ldyBOb2RlUHJvcCgpO1xuZnVuY3Rpb24gbWF0Y2hpbmdOb2Rlcyhub2RlLCBkaXIsIGJyYWNrZXRzKSB7XG4gICAgbGV0IGJ5UHJvcCA9IG5vZGUucHJvcChkaXIgPCAwID8gTm9kZVByb3Aub3BlbmVkQnkgOiBOb2RlUHJvcC5jbG9zZWRCeSk7XG4gICAgaWYgKGJ5UHJvcClcbiAgICAgICAgcmV0dXJuIGJ5UHJvcDtcbiAgICBpZiAobm9kZS5uYW1lLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIGxldCBpbmRleCA9IGJyYWNrZXRzLmluZGV4T2Yobm9kZS5uYW1lKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEgJiYgaW5kZXggJSAyID09IChkaXIgPCAwID8gMSA6IDApKVxuICAgICAgICAgICAgcmV0dXJuIFticmFja2V0c1tpbmRleCArIGRpcl1dO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGZpbmRIYW5kbGUobm9kZSkge1xuICAgIGxldCBoYXNIYW5kbGUgPSBub2RlLnR5cGUucHJvcChicmFja2V0TWF0Y2hpbmdIYW5kbGUpO1xuICAgIHJldHVybiBoYXNIYW5kbGUgPyBoYXNIYW5kbGUobm9kZS5ub2RlKSA6IG5vZGU7XG59XG4vKipcbkZpbmQgdGhlIG1hdGNoaW5nIGJyYWNrZXQgZm9yIHRoZSB0b2tlbiBhdCBgcG9zYCwgc2Nhbm5pbmdcbmRpcmVjdGlvbiBgZGlyYC4gT25seSB0aGUgYGJyYWNrZXRzYCBhbmQgYG1heFNjYW5EaXN0YW5jZWBcbnByb3BlcnRpZXMgYXJlIHVzZWQgZnJvbSBgY29uZmlnYCwgaWYgZ2l2ZW4uIFJldHVybnMgbnVsbCBpZiBub1xuYnJhY2tldCB3YXMgZm91bmQgYXQgYHBvc2AsIG9yIGEgbWF0Y2ggcmVzdWx0IG90aGVyd2lzZS5cbiovXG5mdW5jdGlvbiBtYXRjaEJyYWNrZXRzKHN0YXRlLCBwb3MsIGRpciwgY29uZmlnID0ge30pIHtcbiAgICBsZXQgbWF4U2NhbkRpc3RhbmNlID0gY29uZmlnLm1heFNjYW5EaXN0YW5jZSB8fCBEZWZhdWx0U2NhbkRpc3QsIGJyYWNrZXRzID0gY29uZmlnLmJyYWNrZXRzIHx8IERlZmF1bHRCcmFja2V0cztcbiAgICBsZXQgdHJlZSA9IHN5bnRheFRyZWUoc3RhdGUpLCBub2RlID0gdHJlZS5yZXNvbHZlSW5uZXIocG9zLCBkaXIpO1xuICAgIGZvciAobGV0IGN1ciA9IG5vZGU7IGN1cjsgY3VyID0gY3VyLnBhcmVudCkge1xuICAgICAgICBsZXQgbWF0Y2hlcyA9IG1hdGNoaW5nTm9kZXMoY3VyLnR5cGUsIGRpciwgYnJhY2tldHMpO1xuICAgICAgICBpZiAobWF0Y2hlcyAmJiBjdXIuZnJvbSA8IGN1ci50bykge1xuICAgICAgICAgICAgbGV0IGhhbmRsZSA9IGZpbmRIYW5kbGUoY3VyKTtcbiAgICAgICAgICAgIGlmIChoYW5kbGUgJiYgKGRpciA+IDAgPyBwb3MgPj0gaGFuZGxlLmZyb20gJiYgcG9zIDwgaGFuZGxlLnRvIDogcG9zID4gaGFuZGxlLmZyb20gJiYgcG9zIDw9IGhhbmRsZS50bykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoTWFya2VkQnJhY2tldHMoc3RhdGUsIHBvcywgZGlyLCBjdXIsIGhhbmRsZSwgbWF0Y2hlcywgYnJhY2tldHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXRjaFBsYWluQnJhY2tldHMoc3RhdGUsIHBvcywgZGlyLCB0cmVlLCBub2RlLnR5cGUsIG1heFNjYW5EaXN0YW5jZSwgYnJhY2tldHMpO1xufVxuZnVuY3Rpb24gbWF0Y2hNYXJrZWRCcmFja2V0cyhfc3RhdGUsIF9wb3MsIGRpciwgdG9rZW4sIGhhbmRsZSwgbWF0Y2hpbmcsIGJyYWNrZXRzKSB7XG4gICAgbGV0IHBhcmVudCA9IHRva2VuLnBhcmVudCwgZmlyc3RUb2tlbiA9IHsgZnJvbTogaGFuZGxlLmZyb20sIHRvOiBoYW5kbGUudG8gfTtcbiAgICBsZXQgZGVwdGggPSAwLCBjdXJzb3IgPSBwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQuY3Vyc29yKCk7XG4gICAgaWYgKGN1cnNvciAmJiAoZGlyIDwgMCA/IGN1cnNvci5jaGlsZEJlZm9yZSh0b2tlbi5mcm9tKSA6IGN1cnNvci5jaGlsZEFmdGVyKHRva2VuLnRvKSkpXG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGlmIChkaXIgPCAwID8gY3Vyc29yLnRvIDw9IHRva2VuLmZyb20gOiBjdXJzb3IuZnJvbSA+PSB0b2tlbi50bykge1xuICAgICAgICAgICAgICAgIGlmIChkZXB0aCA9PSAwICYmIG1hdGNoaW5nLmluZGV4T2YoY3Vyc29yLnR5cGUubmFtZSkgPiAtMSAmJiBjdXJzb3IuZnJvbSA8IGN1cnNvci50bykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kSGFuZGxlID0gZmluZEhhbmRsZShjdXJzb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdGFydDogZmlyc3RUb2tlbiwgZW5kOiBlbmRIYW5kbGUgPyB7IGZyb206IGVuZEhhbmRsZS5mcm9tLCB0bzogZW5kSGFuZGxlLnRvIH0gOiB1bmRlZmluZWQsIG1hdGNoZWQ6IHRydWUgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobWF0Y2hpbmdOb2RlcyhjdXJzb3IudHlwZSwgZGlyLCBicmFja2V0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwdGgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobWF0Y2hpbmdOb2RlcyhjdXJzb3IudHlwZSwgLWRpciwgYnJhY2tldHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXB0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZW5kSGFuZGxlID0gZmluZEhhbmRsZShjdXJzb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogZmlyc3RUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGVuZEhhbmRsZSAmJiBlbmRIYW5kbGUuZnJvbSA8IGVuZEhhbmRsZS50byA/IHsgZnJvbTogZW5kSGFuZGxlLmZyb20sIHRvOiBlbmRIYW5kbGUudG8gfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZXB0aC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAoZGlyIDwgMCA/IGN1cnNvci5wcmV2U2libGluZygpIDogY3Vyc29yLm5leHRTaWJsaW5nKCkpO1xuICAgIHJldHVybiB7IHN0YXJ0OiBmaXJzdFRva2VuLCBtYXRjaGVkOiBmYWxzZSB9O1xufVxuZnVuY3Rpb24gbWF0Y2hQbGFpbkJyYWNrZXRzKHN0YXRlLCBwb3MsIGRpciwgdHJlZSwgdG9rZW5UeXBlLCBtYXhTY2FuRGlzdGFuY2UsIGJyYWNrZXRzKSB7XG4gICAgbGV0IHN0YXJ0Q2ggPSBkaXIgPCAwID8gc3RhdGUuc2xpY2VEb2MocG9zIC0gMSwgcG9zKSA6IHN0YXRlLnNsaWNlRG9jKHBvcywgcG9zICsgMSk7XG4gICAgbGV0IGJyYWNrZXQgPSBicmFja2V0cy5pbmRleE9mKHN0YXJ0Q2gpO1xuICAgIGlmIChicmFja2V0IDwgMCB8fCAoYnJhY2tldCAlIDIgPT0gMCkgIT0gKGRpciA+IDApKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgc3RhcnRUb2tlbiA9IHsgZnJvbTogZGlyIDwgMCA/IHBvcyAtIDEgOiBwb3MsIHRvOiBkaXIgPiAwID8gcG9zICsgMSA6IHBvcyB9O1xuICAgIGxldCBpdGVyID0gc3RhdGUuZG9jLml0ZXJSYW5nZShwb3MsIGRpciA+IDAgPyBzdGF0ZS5kb2MubGVuZ3RoIDogMCksIGRlcHRoID0gMDtcbiAgICBmb3IgKGxldCBkaXN0YW5jZSA9IDA7ICEoaXRlci5uZXh0KCkpLmRvbmUgJiYgZGlzdGFuY2UgPD0gbWF4U2NhbkRpc3RhbmNlOykge1xuICAgICAgICBsZXQgdGV4dCA9IGl0ZXIudmFsdWU7XG4gICAgICAgIGlmIChkaXIgPCAwKVxuICAgICAgICAgICAgZGlzdGFuY2UgKz0gdGV4dC5sZW5ndGg7XG4gICAgICAgIGxldCBiYXNlUG9zID0gcG9zICsgZGlzdGFuY2UgKiBkaXI7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IGRpciA+IDAgPyAwIDogdGV4dC5sZW5ndGggLSAxLCBlbmQgPSBkaXIgPiAwID8gdGV4dC5sZW5ndGggOiAtMTsgcG9zICE9IGVuZDsgcG9zICs9IGRpcikge1xuICAgICAgICAgICAgbGV0IGZvdW5kID0gYnJhY2tldHMuaW5kZXhPZih0ZXh0W3Bvc10pO1xuICAgICAgICAgICAgaWYgKGZvdW5kIDwgMCB8fCB0cmVlLnJlc29sdmVJbm5lcihiYXNlUG9zICsgcG9zLCAxKS50eXBlICE9IHRva2VuVHlwZSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmICgoZm91bmQgJSAyID09IDApID09IChkaXIgPiAwKSkge1xuICAgICAgICAgICAgICAgIGRlcHRoKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkZXB0aCA9PSAxKSB7IC8vIENsb3NpbmdcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGFydDogc3RhcnRUb2tlbiwgZW5kOiB7IGZyb206IGJhc2VQb3MgKyBwb3MsIHRvOiBiYXNlUG9zICsgcG9zICsgMSB9LCBtYXRjaGVkOiAoZm91bmQgPj4gMSkgPT0gKGJyYWNrZXQgPj4gMSkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlcHRoLS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpciA+IDApXG4gICAgICAgICAgICBkaXN0YW5jZSArPSB0ZXh0Lmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZXIuZG9uZSA/IHsgc3RhcnQ6IHN0YXJ0VG9rZW4sIG1hdGNoZWQ6IGZhbHNlIH0gOiBudWxsO1xufVxuXG4vLyBDb3VudHMgdGhlIGNvbHVtbiBvZmZzZXQgaW4gYSBzdHJpbmcsIHRha2luZyB0YWJzIGludG8gYWNjb3VudC5cbi8vIFVzZWQgbW9zdGx5IHRvIGZpbmQgaW5kZW50YXRpb24uXG5mdW5jdGlvbiBjb3VudENvbChzdHJpbmcsIGVuZCwgdGFiU2l6ZSwgc3RhcnRJbmRleCA9IDAsIHN0YXJ0VmFsdWUgPSAwKSB7XG4gICAgaWYgKGVuZCA9PSBudWxsKSB7XG4gICAgICAgIGVuZCA9IHN0cmluZy5zZWFyY2goL1teXFxzXFx1MDBhMF0vKTtcbiAgICAgICAgaWYgKGVuZCA9PSAtMSlcbiAgICAgICAgICAgIGVuZCA9IHN0cmluZy5sZW5ndGg7XG4gICAgfVxuICAgIGxldCBuID0gc3RhcnRWYWx1ZTtcbiAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgIGlmIChzdHJpbmcuY2hhckNvZGVBdChpKSA9PSA5KVxuICAgICAgICAgICAgbiArPSB0YWJTaXplIC0gKG4gJSB0YWJTaXplKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbisrO1xuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cbi8qKlxuRW5jYXBzdWxhdGVzIGEgc2luZ2xlIGxpbmUgb2YgaW5wdXQuIEdpdmVuIHRvIHN0cmVhbSBzeW50YXggY29kZSxcbndoaWNoIHVzZXMgaXQgdG8gdG9rZW5pemUgdGhlIGNvbnRlbnQuXG4qL1xuY2xhc3MgU3RyaW5nU3RyZWFtIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBzdHJlYW0uXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgbGluZS5cbiAgICAqL1xuICAgIHN0cmluZywgdGFiU2l6ZSwgXG4gICAgLyoqXG4gICAgVGhlIGN1cnJlbnQgaW5kZW50IHVuaXQgc2l6ZS5cbiAgICAqL1xuICAgIGluZGVudFVuaXQsIG92ZXJyaWRlSW5kZW50KSB7XG4gICAgICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nO1xuICAgICAgICB0aGlzLnRhYlNpemUgPSB0YWJTaXplO1xuICAgICAgICB0aGlzLmluZGVudFVuaXQgPSBpbmRlbnRVbml0O1xuICAgICAgICB0aGlzLm92ZXJyaWRlSW5kZW50ID0gb3ZlcnJpZGVJbmRlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICBUaGUgY3VycmVudCBwb3NpdGlvbiBvbiB0aGUgbGluZS5cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBjdXJyZW50IHRva2VuLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXJ0ID0gMDtcbiAgICAgICAgdGhpcy5sYXN0Q29sdW1uUG9zID0gMDtcbiAgICAgICAgdGhpcy5sYXN0Q29sdW1uVmFsdWUgPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICBUcnVlIGlmIHdlIGFyZSBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuICAgICovXG4gICAgZW9sKCkgeyByZXR1cm4gdGhpcy5wb3MgPj0gdGhpcy5zdHJpbmcubGVuZ3RoOyB9XG4gICAgLyoqXG4gICAgVHJ1ZSBpZiB3ZSBhcmUgYXQgdGhlIHN0YXJ0IG9mIHRoZSBsaW5lLlxuICAgICovXG4gICAgc29sKCkgeyByZXR1cm4gdGhpcy5wb3MgPT0gMDsgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgbmV4dCBjb2RlIHVuaXQgYWZ0ZXIgdGhlIGN1cnJlbnQgcG9zaXRpb24sIG9yIHVuZGVmaW5lZFxuICAgIGlmIHdlJ3JlIGF0IHRoZSBlbmQgb2YgdGhlIGxpbmUuXG4gICAgKi9cbiAgICBwZWVrKCkgeyByZXR1cm4gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKSB8fCB1bmRlZmluZWQ7IH1cbiAgICAvKipcbiAgICBSZWFkIHRoZSBuZXh0IGNvZGUgdW5pdCBhbmQgYWR2YW5jZSBgdGhpcy5wb3NgLlxuICAgICovXG4gICAgbmV4dCgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9zIDwgdGhpcy5zdHJpbmcubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcysrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTWF0Y2ggdGhlIG5leHQgY2hhcmFjdGVyIGFnYWluc3QgdGhlIGdpdmVuIHN0cmluZywgcmVndWxhclxuICAgIGV4cHJlc3Npb24sIG9yIHByZWRpY2F0ZS4gQ29uc3VtZSBhbmQgcmV0dXJuIGl0IGlmIGl0IG1hdGNoZXMuXG4gICAgKi9cbiAgICBlYXQobWF0Y2gpIHtcbiAgICAgICAgbGV0IGNoID0gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKTtcbiAgICAgICAgbGV0IG9rO1xuICAgICAgICBpZiAodHlwZW9mIG1hdGNoID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICBvayA9IGNoID09IG1hdGNoO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBvayA9IGNoICYmIChtYXRjaCBpbnN0YW5jZW9mIFJlZ0V4cCA/IG1hdGNoLnRlc3QoY2gpIDogbWF0Y2goY2gpKTtcbiAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgICArK3RoaXMucG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNoO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIENvbnRpbnVlIG1hdGNoaW5nIGNoYXJhY3RlcnMgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4gc3RyaW5nLFxuICAgIHJlZ3VsYXIgZXhwcmVzc2lvbiwgb3IgcHJlZGljYXRlIGZ1bmN0aW9uLiBSZXR1cm4gdHJ1ZSBpZiBhbnlcbiAgICBjaGFyYWN0ZXJzIHdlcmUgY29uc3VtZWQuXG4gICAgKi9cbiAgICBlYXRXaGlsZShtYXRjaCkge1xuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnBvcztcbiAgICAgICAgd2hpbGUgKHRoaXMuZWF0KG1hdGNoKSkgeyB9XG4gICAgICAgIHJldHVybiB0aGlzLnBvcyA+IHN0YXJ0O1xuICAgIH1cbiAgICAvKipcbiAgICBDb25zdW1lIHdoaXRlc3BhY2UgYWhlYWQgb2YgYHRoaXMucG9zYC4gUmV0dXJuIHRydWUgaWYgYW55IHdhc1xuICAgIGZvdW5kLlxuICAgICovXG4gICAgZWF0U3BhY2UoKSB7XG4gICAgICAgIGxldCBzdGFydCA9IHRoaXMucG9zO1xuICAgICAgICB3aGlsZSAoL1tcXHNcXHUwMGEwXS8udGVzdCh0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MpKSlcbiAgICAgICAgICAgICsrdGhpcy5wb3M7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcyA+IHN0YXJ0O1xuICAgIH1cbiAgICAvKipcbiAgICBNb3ZlIHRvIHRoZSBlbmQgb2YgdGhlIGxpbmUuXG4gICAgKi9cbiAgICBza2lwVG9FbmQoKSB7IHRoaXMucG9zID0gdGhpcy5zdHJpbmcubGVuZ3RoOyB9XG4gICAgLyoqXG4gICAgTW92ZSB0byBkaXJlY3RseSBiZWZvcmUgdGhlIGdpdmVuIGNoYXJhY3RlciwgaWYgZm91bmQgb24gdGhlXG4gICAgY3VycmVudCBsaW5lLlxuICAgICovXG4gICAgc2tpcFRvKGNoKSB7XG4gICAgICAgIGxldCBmb3VuZCA9IHRoaXMuc3RyaW5nLmluZGV4T2YoY2gsIHRoaXMucG9zKTtcbiAgICAgICAgaWYgKGZvdW5kID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gZm91bmQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBNb3ZlIGJhY2sgYG5gIGNoYXJhY3RlcnMuXG4gICAgKi9cbiAgICBiYWNrVXAobikgeyB0aGlzLnBvcyAtPSBuOyB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBjb2x1bW4gcG9zaXRpb24gYXQgYHRoaXMucG9zYC5cbiAgICAqL1xuICAgIGNvbHVtbigpIHtcbiAgICAgICAgaWYgKHRoaXMubGFzdENvbHVtblBvcyA8IHRoaXMuc3RhcnQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdENvbHVtblZhbHVlID0gY291bnRDb2wodGhpcy5zdHJpbmcsIHRoaXMuc3RhcnQsIHRoaXMudGFiU2l6ZSwgdGhpcy5sYXN0Q29sdW1uUG9zLCB0aGlzLmxhc3RDb2x1bW5WYWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmxhc3RDb2x1bW5Qb3MgPSB0aGlzLnN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxhc3RDb2x1bW5WYWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBpbmRlbnRhdGlvbiBjb2x1bW4gb2YgdGhlIGN1cnJlbnQgbGluZS5cbiAgICAqL1xuICAgIGluZGVudGF0aW9uKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLm92ZXJyaWRlSW5kZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjb3VudENvbCh0aGlzLnN0cmluZywgbnVsbCwgdGhpcy50YWJTaXplKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTWF0Y2ggdGhlIGlucHV0IGFnYWluc3QgdGhlIGdpdmVuIHN0cmluZyBvciByZWd1bGFyIGV4cHJlc3Npb25cbiAgICAod2hpY2ggc2hvdWxkIHN0YXJ0IHdpdGggYSBgXmApLiBSZXR1cm4gdHJ1ZSBvciB0aGUgcmVnZXhwIG1hdGNoXG4gICAgaWYgaXQgbWF0Y2hlcy5cbiAgICBcbiAgICBVbmxlc3MgYGNvbnN1bWVgIGlzIHNldCB0byBgZmFsc2VgLCB0aGlzIHdpbGwgbW92ZSBgdGhpcy5wb3NgXG4gICAgcGFzdCB0aGUgbWF0Y2hlZCB0ZXh0LlxuICAgIFxuICAgIFdoZW4gbWF0Y2hpbmcgYSBzdHJpbmcgYGNhc2VJbnNlbnNpdGl2ZWAgY2FuIGJlIHNldCB0byB0cnVlIHRvXG4gICAgbWFrZSB0aGUgbWF0Y2ggY2FzZS1pbnNlbnNpdGl2ZS5cbiAgICAqL1xuICAgIG1hdGNoKHBhdHRlcm4sIGNvbnN1bWUsIGNhc2VJbnNlbnNpdGl2ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHBhdHRlcm4gPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgbGV0IGNhc2VkID0gKHN0cikgPT4gY2FzZUluc2Vuc2l0aXZlID8gc3RyLnRvTG93ZXJDYXNlKCkgOiBzdHI7XG4gICAgICAgICAgICBsZXQgc3Vic3RyID0gdGhpcy5zdHJpbmcuc3Vic3RyKHRoaXMucG9zLCBwYXR0ZXJuLmxlbmd0aCk7XG4gICAgICAgICAgICBpZiAoY2FzZWQoc3Vic3RyKSA9PSBjYXNlZChwYXR0ZXJuKSkge1xuICAgICAgICAgICAgICAgIGlmIChjb25zdW1lICE9PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MgKz0gcGF0dGVybi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbWF0Y2ggPSB0aGlzLnN0cmluZy5zbGljZSh0aGlzLnBvcykubWF0Y2gocGF0dGVybik7XG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2guaW5kZXggPiAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIGNvbnN1bWUgIT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHRoaXMucG9zICs9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGN1cnJlbnQgdG9rZW4uXG4gICAgKi9cbiAgICBjdXJyZW50KCkgeyByZXR1cm4gdGhpcy5zdHJpbmcuc2xpY2UodGhpcy5zdGFydCwgdGhpcy5wb3MpOyB9XG59XG5cbmZ1bmN0aW9uIGZ1bGxQYXJzZXIoc3BlYykge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHNwZWMubmFtZSB8fCBcIlwiLFxuICAgICAgICB0b2tlbjogc3BlYy50b2tlbixcbiAgICAgICAgYmxhbmtMaW5lOiBzcGVjLmJsYW5rTGluZSB8fCAoKCkgPT4geyB9KSxcbiAgICAgICAgc3RhcnRTdGF0ZTogc3BlYy5zdGFydFN0YXRlIHx8ICgoKSA9PiB0cnVlKSxcbiAgICAgICAgY29weVN0YXRlOiBzcGVjLmNvcHlTdGF0ZSB8fCBkZWZhdWx0Q29weVN0YXRlLFxuICAgICAgICBpbmRlbnQ6IHNwZWMuaW5kZW50IHx8ICgoKSA9PiBudWxsKSxcbiAgICAgICAgbGFuZ3VhZ2VEYXRhOiBzcGVjLmxhbmd1YWdlRGF0YSB8fCB7fSxcbiAgICAgICAgdG9rZW5UYWJsZTogc3BlYy50b2tlblRhYmxlIHx8IG5vVG9rZW5zLFxuICAgICAgICBtZXJnZVRva2Vuczogc3BlYy5tZXJnZVRva2VucyAhPT0gZmFsc2VcbiAgICB9O1xufVxuZnVuY3Rpb24gZGVmYXVsdENvcHlTdGF0ZShzdGF0ZSkge1xuICAgIGlmICh0eXBlb2Ygc3RhdGUgIT0gXCJvYmplY3RcIilcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIGxldCBuZXdTdGF0ZSA9IHt9O1xuICAgIGZvciAobGV0IHByb3AgaW4gc3RhdGUpIHtcbiAgICAgICAgbGV0IHZhbCA9IHN0YXRlW3Byb3BdO1xuICAgICAgICBuZXdTdGF0ZVtwcm9wXSA9ICh2YWwgaW5zdGFuY2VvZiBBcnJheSA/IHZhbC5zbGljZSgpIDogdmFsKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1N0YXRlO1xufVxuY29uc3QgSW5kZW50ZWRGcm9tID0gLypAX19QVVJFX18qL25ldyBXZWFrTWFwKCk7XG4vKipcbkEgW2xhbmd1YWdlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxhbmd1YWdlKSBjbGFzcyBiYXNlZCBvbiBhIENvZGVNaXJyb3JcbjUtc3R5bGUgW3N0cmVhbWluZyBwYXJzZXJdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuU3RyZWFtUGFyc2VyKS5cbiovXG5jbGFzcyBTdHJlYW1MYW5ndWFnZSBleHRlbmRzIExhbmd1YWdlIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJzZXIpIHtcbiAgICAgICAgbGV0IGRhdGEgPSBkZWZpbmVMYW5ndWFnZUZhY2V0KHBhcnNlci5sYW5ndWFnZURhdGEpO1xuICAgICAgICBsZXQgcCA9IGZ1bGxQYXJzZXIocGFyc2VyKSwgc2VsZjtcbiAgICAgICAgbGV0IGltcGwgPSBuZXcgY2xhc3MgZXh0ZW5kcyBQYXJzZXIge1xuICAgICAgICAgICAgY3JlYXRlUGFyc2UoaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJzZShzZWxmLCBpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBzdXBlcihkYXRhLCBpbXBsLCBbXSwgcGFyc2VyLm5hbWUpO1xuICAgICAgICB0aGlzLnRvcE5vZGUgPSBkb2NJRChkYXRhLCB0aGlzKTtcbiAgICAgICAgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuc3RyZWFtUGFyc2VyID0gcDtcbiAgICAgICAgdGhpcy5zdGF0ZUFmdGVyID0gbmV3IE5vZGVQcm9wKHsgcGVyTm9kZTogdHJ1ZSB9KTtcbiAgICAgICAgdGhpcy50b2tlblRhYmxlID0gcGFyc2VyLnRva2VuVGFibGUgPyBuZXcgVG9rZW5UYWJsZShwLnRva2VuVGFibGUpIDogZGVmYXVsdFRva2VuVGFibGU7XG4gICAgfVxuICAgIC8qKlxuICAgIERlZmluZSBhIHN0cmVhbSBsYW5ndWFnZS5cbiAgICAqL1xuICAgIHN0YXRpYyBkZWZpbmUoc3BlYykgeyByZXR1cm4gbmV3IFN0cmVhbUxhbmd1YWdlKHNwZWMpOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBnZXRJbmRlbnQoY3gpIHtcbiAgICAgICAgbGV0IGZyb20gPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCB7IG92ZXJyaWRlSW5kZW50YXRpb24gfSA9IGN4Lm9wdGlvbnM7XG4gICAgICAgIGlmIChvdmVycmlkZUluZGVudGF0aW9uKSB7XG4gICAgICAgICAgICBmcm9tID0gSW5kZW50ZWRGcm9tLmdldChjeC5zdGF0ZSk7XG4gICAgICAgICAgICBpZiAoZnJvbSAhPSBudWxsICYmIGZyb20gPCBjeC5wb3MgLSAxZTQpXG4gICAgICAgICAgICAgICAgZnJvbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RhcnQgPSBmaW5kU3RhdGUodGhpcywgY3gubm9kZS50cmVlLCBjeC5ub2RlLmZyb20sIGN4Lm5vZGUuZnJvbSwgZnJvbSAhPT0gbnVsbCAmJiBmcm9tICE9PSB2b2lkIDAgPyBmcm9tIDogY3gucG9zKSwgc3RhdGVQb3MsIHN0YXRlO1xuICAgICAgICBpZiAoc3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gc3RhcnQuc3RhdGU7XG4gICAgICAgICAgICBzdGF0ZVBvcyA9IHN0YXJ0LnBvcyArIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZSA9IHRoaXMuc3RyZWFtUGFyc2VyLnN0YXJ0U3RhdGUoY3gudW5pdCk7XG4gICAgICAgICAgICBzdGF0ZVBvcyA9IGN4Lm5vZGUuZnJvbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3gucG9zIC0gc3RhdGVQb3MgPiAxMDAwMCAvKiBDLk1heEluZGVudFNjYW5EaXN0ICovKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHdoaWxlIChzdGF0ZVBvcyA8IGN4LnBvcykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBjeC5zdGF0ZS5kb2MubGluZUF0KHN0YXRlUG9zKSwgZW5kID0gTWF0aC5taW4oY3gucG9zLCBsaW5lLnRvKTtcbiAgICAgICAgICAgIGlmIChsaW5lLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGxldCBpbmRlbnRhdGlvbiA9IG92ZXJyaWRlSW5kZW50YXRpb24gPyBvdmVycmlkZUluZGVudGF0aW9uKGxpbmUuZnJvbSkgOiAtMTtcbiAgICAgICAgICAgICAgICBsZXQgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbShsaW5lLnRleHQsIGN4LnN0YXRlLnRhYlNpemUsIGN4LnVuaXQsIGluZGVudGF0aW9uIDwgMCA/IHVuZGVmaW5lZCA6IGluZGVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoc3RyZWFtLnBvcyA8IGVuZCAtIGxpbmUuZnJvbSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZFRva2VuKHRoaXMuc3RyZWFtUGFyc2VyLnRva2VuLCBzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RyZWFtUGFyc2VyLmJsYW5rTGluZShzdGF0ZSwgY3gudW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW5kID09IGN4LnBvcylcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHN0YXRlUG9zID0gbGluZS50byArIDE7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmUgPSBjeC5saW5lQXQoY3gucG9zKTtcbiAgICAgICAgaWYgKG92ZXJyaWRlSW5kZW50YXRpb24gJiYgZnJvbSA9PSBudWxsKVxuICAgICAgICAgICAgSW5kZW50ZWRGcm9tLnNldChjeC5zdGF0ZSwgbGluZS5mcm9tKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtUGFyc2VyLmluZGVudChzdGF0ZSwgL15cXHMqKC4qKS8uZXhlYyhsaW5lLnRleHQpWzFdLCBjeCk7XG4gICAgfVxuICAgIGdldCBhbGxvd3NOZXN0aW5nKCkgeyByZXR1cm4gZmFsc2U7IH1cbn1cbmZ1bmN0aW9uIGZpbmRTdGF0ZShsYW5nLCB0cmVlLCBvZmYsIHN0YXJ0UG9zLCBiZWZvcmUpIHtcbiAgICBsZXQgc3RhdGUgPSBvZmYgPj0gc3RhcnRQb3MgJiYgb2ZmICsgdHJlZS5sZW5ndGggPD0gYmVmb3JlICYmIHRyZWUucHJvcChsYW5nLnN0YXRlQWZ0ZXIpO1xuICAgIGlmIChzdGF0ZSlcbiAgICAgICAgcmV0dXJuIHsgc3RhdGU6IGxhbmcuc3RyZWFtUGFyc2VyLmNvcHlTdGF0ZShzdGF0ZSksIHBvczogb2ZmICsgdHJlZS5sZW5ndGggfTtcbiAgICBmb3IgKGxldCBpID0gdHJlZS5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBsZXQgY2hpbGQgPSB0cmVlLmNoaWxkcmVuW2ldLCBwb3MgPSBvZmYgKyB0cmVlLnBvc2l0aW9uc1tpXTtcbiAgICAgICAgbGV0IGZvdW5kID0gY2hpbGQgaW5zdGFuY2VvZiBUcmVlICYmIHBvcyA8IGJlZm9yZSAmJiBmaW5kU3RhdGUobGFuZywgY2hpbGQsIHBvcywgc3RhcnRQb3MsIGJlZm9yZSk7XG4gICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBjdXRUcmVlKGxhbmcsIHRyZWUsIGZyb20sIHRvLCBpbnNpZGUpIHtcbiAgICBpZiAoaW5zaWRlICYmIGZyb20gPD0gMCAmJiB0byA+PSB0cmVlLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgaWYgKCFpbnNpZGUgJiYgZnJvbSA9PSAwICYmIHRyZWUudHlwZSA9PSBsYW5nLnRvcE5vZGUpXG4gICAgICAgIGluc2lkZSA9IHRydWU7XG4gICAgZm9yIChsZXQgaSA9IHRyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgbGV0IHBvcyA9IHRyZWUucG9zaXRpb25zW2ldLCBjaGlsZCA9IHRyZWUuY2hpbGRyZW5baV0sIGlubmVyO1xuICAgICAgICBpZiAocG9zIDwgdG8gJiYgY2hpbGQgaW5zdGFuY2VvZiBUcmVlKSB7XG4gICAgICAgICAgICBpZiAoIShpbm5lciA9IGN1dFRyZWUobGFuZywgY2hpbGQsIGZyb20gLSBwb3MsIHRvIC0gcG9zLCBpbnNpZGUpKSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHJldHVybiAhaW5zaWRlID8gaW5uZXJcbiAgICAgICAgICAgICAgICA6IG5ldyBUcmVlKHRyZWUudHlwZSwgdHJlZS5jaGlsZHJlbi5zbGljZSgwLCBpKS5jb25jYXQoaW5uZXIpLCB0cmVlLnBvc2l0aW9ucy5zbGljZSgwLCBpICsgMSksIHBvcyArIGlubmVyLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBmaW5kU3RhcnRJbkZyYWdtZW50cyhsYW5nLCBmcmFnbWVudHMsIHN0YXJ0UG9zLCBlbmRQb3MsIGVkaXRvclN0YXRlKSB7XG4gICAgZm9yIChsZXQgZiBvZiBmcmFnbWVudHMpIHtcbiAgICAgICAgbGV0IGZyb20gPSBmLmZyb20gKyAoZi5vcGVuU3RhcnQgPyAyNSA6IDApLCB0byA9IGYudG8gLSAoZi5vcGVuRW5kID8gMjUgOiAwKTtcbiAgICAgICAgbGV0IGZvdW5kID0gZnJvbSA8PSBzdGFydFBvcyAmJiB0byA+IHN0YXJ0UG9zICYmIGZpbmRTdGF0ZShsYW5nLCBmLnRyZWUsIDAgLSBmLm9mZnNldCwgc3RhcnRQb3MsIHRvKSwgdHJlZTtcbiAgICAgICAgaWYgKGZvdW5kICYmIGZvdW5kLnBvcyA8PSBlbmRQb3MgJiYgKHRyZWUgPSBjdXRUcmVlKGxhbmcsIGYudHJlZSwgc3RhcnRQb3MgKyBmLm9mZnNldCwgZm91bmQucG9zICsgZi5vZmZzZXQsIGZhbHNlKSkpXG4gICAgICAgICAgICByZXR1cm4geyBzdGF0ZTogZm91bmQuc3RhdGUsIHRyZWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgc3RhdGU6IGxhbmcuc3RyZWFtUGFyc2VyLnN0YXJ0U3RhdGUoZWRpdG9yU3RhdGUgPyBnZXRJbmRlbnRVbml0KGVkaXRvclN0YXRlKSA6IDQpLCB0cmVlOiBUcmVlLmVtcHR5IH07XG59XG5jbGFzcyBQYXJzZSB7XG4gICAgY29uc3RydWN0b3IobGFuZywgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKSB7XG4gICAgICAgIHRoaXMubGFuZyA9IGxhbmc7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICAgICAgdGhpcy5mcmFnbWVudHMgPSBmcmFnbWVudHM7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gcmFuZ2VzO1xuICAgICAgICB0aGlzLnN0b3BwZWRBdCA9IG51bGw7XG4gICAgICAgIHRoaXMuY2h1bmtzID0gW107XG4gICAgICAgIHRoaXMuY2h1bmtQb3MgPSBbXTtcbiAgICAgICAgdGhpcy5jaHVuayA9IFtdO1xuICAgICAgICB0aGlzLmNodW5rUmV1c2VkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJhbmdlSW5kZXggPSAwO1xuICAgICAgICB0aGlzLnRvID0gcmFuZ2VzW3Jhbmdlcy5sZW5ndGggLSAxXS50bztcbiAgICAgICAgbGV0IGNvbnRleHQgPSBQYXJzZUNvbnRleHQuZ2V0KCksIGZyb20gPSByYW5nZXNbMF0uZnJvbTtcbiAgICAgICAgbGV0IHsgc3RhdGUsIHRyZWUgfSA9IGZpbmRTdGFydEluRnJhZ21lbnRzKGxhbmcsIGZyYWdtZW50cywgZnJvbSwgdGhpcy50bywgY29udGV4dCA9PT0gbnVsbCB8fCBjb250ZXh0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb250ZXh0LnN0YXRlKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLnBhcnNlZFBvcyA9IHRoaXMuY2h1bmtTdGFydCA9IGZyb20gKyB0cmVlLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmNodW5rcy5wdXNoKHRyZWUuY2hpbGRyZW5baV0pO1xuICAgICAgICAgICAgdGhpcy5jaHVua1Bvcy5wdXNoKHRyZWUucG9zaXRpb25zW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGV4dCAmJiB0aGlzLnBhcnNlZFBvcyA8IGNvbnRleHQudmlld3BvcnQuZnJvbSAtIDEwMDAwMCAvKiBDLk1heERpc3RhbmNlQmVmb3JlVmlld3BvcnQgKi8gJiZcbiAgICAgICAgICAgIHJhbmdlcy5zb21lKHIgPT4gci5mcm9tIDw9IGNvbnRleHQudmlld3BvcnQuZnJvbSAmJiByLnRvID49IGNvbnRleHQudmlld3BvcnQuZnJvbSkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLmxhbmcuc3RyZWFtUGFyc2VyLnN0YXJ0U3RhdGUoZ2V0SW5kZW50VW5pdChjb250ZXh0LnN0YXRlKSk7XG4gICAgICAgICAgICBjb250ZXh0LnNraXBVbnRpbEluVmlldyh0aGlzLnBhcnNlZFBvcywgY29udGV4dC52aWV3cG9ydC5mcm9tKTtcbiAgICAgICAgICAgIHRoaXMucGFyc2VkUG9zID0gY29udGV4dC52aWV3cG9ydC5mcm9tO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubW92ZVJhbmdlSW5kZXgoKTtcbiAgICB9XG4gICAgYWR2YW5jZSgpIHtcbiAgICAgICAgbGV0IGNvbnRleHQgPSBQYXJzZUNvbnRleHQuZ2V0KCk7XG4gICAgICAgIGxldCBwYXJzZUVuZCA9IHRoaXMuc3RvcHBlZEF0ID09IG51bGwgPyB0aGlzLnRvIDogTWF0aC5taW4odGhpcy50bywgdGhpcy5zdG9wcGVkQXQpO1xuICAgICAgICBsZXQgZW5kID0gTWF0aC5taW4ocGFyc2VFbmQsIHRoaXMuY2h1bmtTdGFydCArIDUxMiAvKiBDLkNodW5rU2l6ZSAqLyk7XG4gICAgICAgIGlmIChjb250ZXh0KVxuICAgICAgICAgICAgZW5kID0gTWF0aC5taW4oZW5kLCBjb250ZXh0LnZpZXdwb3J0LnRvKTtcbiAgICAgICAgd2hpbGUgKHRoaXMucGFyc2VkUG9zIDwgZW5kKVxuICAgICAgICAgICAgdGhpcy5wYXJzZUxpbmUoY29udGV4dCk7XG4gICAgICAgIGlmICh0aGlzLmNodW5rU3RhcnQgPCB0aGlzLnBhcnNlZFBvcylcbiAgICAgICAgICAgIHRoaXMuZmluaXNoQ2h1bmsoKTtcbiAgICAgICAgaWYgKHRoaXMucGFyc2VkUG9zID49IHBhcnNlRW5kKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoKCk7XG4gICAgICAgIGlmIChjb250ZXh0ICYmIHRoaXMucGFyc2VkUG9zID49IGNvbnRleHQudmlld3BvcnQudG8pIHtcbiAgICAgICAgICAgIGNvbnRleHQuc2tpcFVudGlsSW5WaWV3KHRoaXMucGFyc2VkUG9zLCBwYXJzZUVuZCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5pc2goKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc3RvcEF0KHBvcykge1xuICAgICAgICB0aGlzLnN0b3BwZWRBdCA9IHBvcztcbiAgICB9XG4gICAgbGluZUFmdGVyKHBvcykge1xuICAgICAgICBsZXQgY2h1bmsgPSB0aGlzLmlucHV0LmNodW5rKHBvcyk7XG4gICAgICAgIGlmICghdGhpcy5pbnB1dC5saW5lQ2h1bmtzKSB7XG4gICAgICAgICAgICBsZXQgZW9sID0gY2h1bmsuaW5kZXhPZihcIlxcblwiKTtcbiAgICAgICAgICAgIGlmIChlb2wgPiAtMSlcbiAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rLnNsaWNlKDAsIGVvbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2h1bmsgPT0gXCJcXG5cIikge1xuICAgICAgICAgICAgY2h1bmsgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb3MgKyBjaHVuay5sZW5ndGggPD0gdGhpcy50byA/IGNodW5rIDogY2h1bmsuc2xpY2UoMCwgdGhpcy50byAtIHBvcyk7XG4gICAgfVxuICAgIG5leHRMaW5lKCkge1xuICAgICAgICBsZXQgZnJvbSA9IHRoaXMucGFyc2VkUG9zLCBsaW5lID0gdGhpcy5saW5lQWZ0ZXIoZnJvbSksIGVuZCA9IGZyb20gKyBsaW5lLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSB0aGlzLnJhbmdlSW5kZXg7Oykge1xuICAgICAgICAgICAgbGV0IHJhbmdlRW5kID0gdGhpcy5yYW5nZXNbaW5kZXhdLnRvO1xuICAgICAgICAgICAgaWYgKHJhbmdlRW5kID49IGVuZClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGxpbmUgPSBsaW5lLnNsaWNlKDAsIHJhbmdlRW5kIC0gKGVuZCAtIGxpbmUubGVuZ3RoKSk7XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgaWYgKGluZGV4ID09IHRoaXMucmFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGxldCByYW5nZVN0YXJ0ID0gdGhpcy5yYW5nZXNbaW5kZXhdLmZyb207XG4gICAgICAgICAgICBsZXQgYWZ0ZXIgPSB0aGlzLmxpbmVBZnRlcihyYW5nZVN0YXJ0KTtcbiAgICAgICAgICAgIGxpbmUgKz0gYWZ0ZXI7XG4gICAgICAgICAgICBlbmQgPSByYW5nZVN0YXJ0ICsgYWZ0ZXIubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGxpbmUsIGVuZCB9O1xuICAgIH1cbiAgICBza2lwR2Fwc1RvKHBvcywgb2Zmc2V0LCBzaWRlKSB7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGxldCBlbmQgPSB0aGlzLnJhbmdlc1t0aGlzLnJhbmdlSW5kZXhdLnRvLCBvZmZQb3MgPSBwb3MgKyBvZmZzZXQ7XG4gICAgICAgICAgICBpZiAoc2lkZSA+IDAgPyBlbmQgPiBvZmZQb3MgOiBlbmQgPj0gb2ZmUG9zKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5yYW5nZXNbKyt0aGlzLnJhbmdlSW5kZXhdLmZyb207XG4gICAgICAgICAgICBvZmZzZXQgKz0gc3RhcnQgLSBlbmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9XG4gICAgbW92ZVJhbmdlSW5kZXgoKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLnJhbmdlc1t0aGlzLnJhbmdlSW5kZXhdLnRvIDwgdGhpcy5wYXJzZWRQb3MpXG4gICAgICAgICAgICB0aGlzLnJhbmdlSW5kZXgrKztcbiAgICB9XG4gICAgZW1pdFRva2VuKGlkLCBmcm9tLCB0bywgb2Zmc2V0KSB7XG4gICAgICAgIGxldCBzaXplID0gNDtcbiAgICAgICAgaWYgKHRoaXMucmFuZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuc2tpcEdhcHNUbyhmcm9tLCBvZmZzZXQsIDEpO1xuICAgICAgICAgICAgZnJvbSArPSBvZmZzZXQ7XG4gICAgICAgICAgICBsZXQgbGVuMCA9IHRoaXMuY2h1bmsubGVuZ3RoO1xuICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5za2lwR2Fwc1RvKHRvLCBvZmZzZXQsIC0xKTtcbiAgICAgICAgICAgIHRvICs9IG9mZnNldDtcbiAgICAgICAgICAgIHNpemUgKz0gdGhpcy5jaHVuay5sZW5ndGggLSBsZW4wO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5jaHVuay5sZW5ndGggLSA0O1xuICAgICAgICBpZiAodGhpcy5sYW5nLnN0cmVhbVBhcnNlci5tZXJnZVRva2VucyAmJiBzaXplID09IDQgJiYgbGFzdCA+PSAwICYmXG4gICAgICAgICAgICB0aGlzLmNodW5rW2xhc3RdID09IGlkICYmIHRoaXMuY2h1bmtbbGFzdCArIDJdID09IGZyb20pXG4gICAgICAgICAgICB0aGlzLmNodW5rW2xhc3QgKyAyXSA9IHRvO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLmNodW5rLnB1c2goaWQsIGZyb20sIHRvLCBzaXplKTtcbiAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9XG4gICAgcGFyc2VMaW5lKGNvbnRleHQpIHtcbiAgICAgICAgbGV0IHsgbGluZSwgZW5kIH0gPSB0aGlzLm5leHRMaW5lKCksIG9mZnNldCA9IDAsIHsgc3RyZWFtUGFyc2VyIH0gPSB0aGlzLmxhbmc7XG4gICAgICAgIGxldCBzdHJlYW0gPSBuZXcgU3RyaW5nU3RyZWFtKGxpbmUsIGNvbnRleHQgPyBjb250ZXh0LnN0YXRlLnRhYlNpemUgOiA0LCBjb250ZXh0ID8gZ2V0SW5kZW50VW5pdChjb250ZXh0LnN0YXRlKSA6IDIpO1xuICAgICAgICBpZiAoc3RyZWFtLmVvbCgpKSB7XG4gICAgICAgICAgICBzdHJlYW1QYXJzZXIuYmxhbmtMaW5lKHRoaXMuc3RhdGUsIHN0cmVhbS5pbmRlbnRVbml0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdoaWxlICghc3RyZWFtLmVvbCgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRva2VuID0gcmVhZFRva2VuKHN0cmVhbVBhcnNlci50b2tlbiwgc3RyZWFtLCB0aGlzLnN0YXRlKTtcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4pXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuZW1pdFRva2VuKHRoaXMubGFuZy50b2tlblRhYmxlLnJlc29sdmUodG9rZW4pLCB0aGlzLnBhcnNlZFBvcyArIHN0cmVhbS5zdGFydCwgdGhpcy5wYXJzZWRQb3MgKyBzdHJlYW0ucG9zLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgIGlmIChzdHJlYW0uc3RhcnQgPiAxMDAwMCAvKiBDLk1heExpbmVMZW5ndGggKi8pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkUG9zID0gZW5kO1xuICAgICAgICB0aGlzLm1vdmVSYW5nZUluZGV4KCk7XG4gICAgICAgIGlmICh0aGlzLnBhcnNlZFBvcyA8IHRoaXMudG8pXG4gICAgICAgICAgICB0aGlzLnBhcnNlZFBvcysrO1xuICAgIH1cbiAgICBmaW5pc2hDaHVuaygpIHtcbiAgICAgICAgbGV0IHRyZWUgPSBUcmVlLmJ1aWxkKHtcbiAgICAgICAgICAgIGJ1ZmZlcjogdGhpcy5jaHVuayxcbiAgICAgICAgICAgIHN0YXJ0OiB0aGlzLmNodW5rU3RhcnQsXG4gICAgICAgICAgICBsZW5ndGg6IHRoaXMucGFyc2VkUG9zIC0gdGhpcy5jaHVua1N0YXJ0LFxuICAgICAgICAgICAgbm9kZVNldCxcbiAgICAgICAgICAgIHRvcElEOiAwLFxuICAgICAgICAgICAgbWF4QnVmZmVyTGVuZ3RoOiA1MTIgLyogQy5DaHVua1NpemUgKi8sXG4gICAgICAgICAgICByZXVzZWQ6IHRoaXMuY2h1bmtSZXVzZWRcbiAgICAgICAgfSk7XG4gICAgICAgIHRyZWUgPSBuZXcgVHJlZSh0cmVlLnR5cGUsIHRyZWUuY2hpbGRyZW4sIHRyZWUucG9zaXRpb25zLCB0cmVlLmxlbmd0aCwgW1t0aGlzLmxhbmcuc3RhdGVBZnRlciwgdGhpcy5sYW5nLnN0cmVhbVBhcnNlci5jb3B5U3RhdGUodGhpcy5zdGF0ZSldXSk7XG4gICAgICAgIHRoaXMuY2h1bmtzLnB1c2godHJlZSk7XG4gICAgICAgIHRoaXMuY2h1bmtQb3MucHVzaCh0aGlzLmNodW5rU3RhcnQgLSB0aGlzLnJhbmdlc1swXS5mcm9tKTtcbiAgICAgICAgdGhpcy5jaHVuayA9IFtdO1xuICAgICAgICB0aGlzLmNodW5rUmV1c2VkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNodW5rU3RhcnQgPSB0aGlzLnBhcnNlZFBvcztcbiAgICB9XG4gICAgZmluaXNoKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyZWUodGhpcy5sYW5nLnRvcE5vZGUsIHRoaXMuY2h1bmtzLCB0aGlzLmNodW5rUG9zLCB0aGlzLnBhcnNlZFBvcyAtIHRoaXMucmFuZ2VzWzBdLmZyb20pLmJhbGFuY2UoKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZWFkVG9rZW4odG9rZW4sIHN0cmVhbSwgc3RhdGUpIHtcbiAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdG9rZW4oc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIGlmIChzdHJlYW0ucG9zID4gc3RyZWFtLnN0YXJ0KVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU3RyZWFtIHBhcnNlciBmYWlsZWQgdG8gYWR2YW5jZSBzdHJlYW0uXCIpO1xufVxuY29uc3Qgbm9Ub2tlbnMgPSAvKkBfX1BVUkVfXyovT2JqZWN0LmNyZWF0ZShudWxsKTtcbmNvbnN0IHR5cGVBcnJheSA9IFtOb2RlVHlwZS5ub25lXTtcbmNvbnN0IG5vZGVTZXQgPSAvKkBfX1BVUkVfXyovbmV3IE5vZGVTZXQodHlwZUFycmF5KTtcbmNvbnN0IHdhcm5lZCA9IFtdO1xuLy8gQ2FjaGUgb2Ygbm9kZSB0eXBlcyBieSBuYW1lIGFuZCB0YWdzXG5jb25zdCBieVRhZyA9IC8qQF9fUFVSRV9fKi9PYmplY3QuY3JlYXRlKG51bGwpO1xuY29uc3QgZGVmYXVsdFRhYmxlID0gLypAX19QVVJFX18qL09iamVjdC5jcmVhdGUobnVsbCk7XG5mb3IgKGxldCBbbGVnYWN5TmFtZSwgbmFtZV0gb2YgW1xuICAgIFtcInZhcmlhYmxlXCIsIFwidmFyaWFibGVOYW1lXCJdLFxuICAgIFtcInZhcmlhYmxlLTJcIiwgXCJ2YXJpYWJsZU5hbWUuc3BlY2lhbFwiXSxcbiAgICBbXCJzdHJpbmctMlwiLCBcInN0cmluZy5zcGVjaWFsXCJdLFxuICAgIFtcImRlZlwiLCBcInZhcmlhYmxlTmFtZS5kZWZpbml0aW9uXCJdLFxuICAgIFtcInRhZ1wiLCBcInRhZ05hbWVcIl0sXG4gICAgW1wiYXR0cmlidXRlXCIsIFwiYXR0cmlidXRlTmFtZVwiXSxcbiAgICBbXCJ0eXBlXCIsIFwidHlwZU5hbWVcIl0sXG4gICAgW1wiYnVpbHRpblwiLCBcInZhcmlhYmxlTmFtZS5zdGFuZGFyZFwiXSxcbiAgICBbXCJxdWFsaWZpZXJcIiwgXCJtb2RpZmllclwiXSxcbiAgICBbXCJlcnJvclwiLCBcImludmFsaWRcIl0sXG4gICAgW1wiaGVhZGVyXCIsIFwiaGVhZGluZ1wiXSxcbiAgICBbXCJwcm9wZXJ0eVwiLCBcInByb3BlcnR5TmFtZVwiXVxuXSlcbiAgICBkZWZhdWx0VGFibGVbbGVnYWN5TmFtZV0gPSAvKkBfX1BVUkVfXyovY3JlYXRlVG9rZW5UeXBlKG5vVG9rZW5zLCBuYW1lKTtcbmNsYXNzIFRva2VuVGFibGUge1xuICAgIGNvbnN0cnVjdG9yKGV4dHJhKSB7XG4gICAgICAgIHRoaXMuZXh0cmEgPSBleHRyYTtcbiAgICAgICAgdGhpcy50YWJsZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgZGVmYXVsdFRhYmxlKTtcbiAgICB9XG4gICAgcmVzb2x2ZSh0YWcpIHtcbiAgICAgICAgcmV0dXJuICF0YWcgPyAwIDogdGhpcy50YWJsZVt0YWddIHx8ICh0aGlzLnRhYmxlW3RhZ10gPSBjcmVhdGVUb2tlblR5cGUodGhpcy5leHRyYSwgdGFnKSk7XG4gICAgfVxufVxuY29uc3QgZGVmYXVsdFRva2VuVGFibGUgPSAvKkBfX1BVUkVfXyovbmV3IFRva2VuVGFibGUobm9Ub2tlbnMpO1xuZnVuY3Rpb24gd2FybkZvclBhcnQocGFydCwgbXNnKSB7XG4gICAgaWYgKHdhcm5lZC5pbmRleE9mKHBhcnQpID4gLTEpXG4gICAgICAgIHJldHVybjtcbiAgICB3YXJuZWQucHVzaChwYXJ0KTtcbiAgICBjb25zb2xlLndhcm4obXNnKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRva2VuVHlwZShleHRyYSwgdGFnU3RyKSB7XG4gICAgbGV0IHRhZ3MkMSA9IFtdO1xuICAgIGZvciAobGV0IG5hbWUgb2YgdGFnU3RyLnNwbGl0KFwiIFwiKSkge1xuICAgICAgICBsZXQgZm91bmQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgcGFydCBvZiBuYW1lLnNwbGl0KFwiLlwiKSkge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gKGV4dHJhW3BhcnRdIHx8IHRhZ3NbcGFydF0pO1xuICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHdhcm5Gb3JQYXJ0KHBhcnQsIGBVbmtub3duIGhpZ2hsaWdodGluZyB0YWcgJHtwYXJ0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIGlmICghZm91bmQubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICB3YXJuRm9yUGFydChwYXJ0LCBgTW9kaWZpZXIgJHtwYXJ0fSB1c2VkIGF0IHN0YXJ0IG9mIHRhZ2ApO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBmb3VuZC5tYXAodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgd2FybkZvclBhcnQocGFydCwgYFRhZyAke3BhcnR9IHVzZWQgYXMgbW9kaWZpZXJgKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgdGFnIG9mIGZvdW5kKVxuICAgICAgICAgICAgdGFncyQxLnB1c2godGFnKTtcbiAgICB9XG4gICAgaWYgKCF0YWdzJDEubGVuZ3RoKVxuICAgICAgICByZXR1cm4gMDtcbiAgICBsZXQgbmFtZSA9IHRhZ1N0ci5yZXBsYWNlKC8gL2csIFwiX1wiKSwga2V5ID0gbmFtZSArIFwiIFwiICsgdGFncyQxLm1hcCh0ID0+IHQuaWQpO1xuICAgIGxldCBrbm93biA9IGJ5VGFnW2tleV07XG4gICAgaWYgKGtub3duKVxuICAgICAgICByZXR1cm4ga25vd24uaWQ7XG4gICAgbGV0IHR5cGUgPSBieVRhZ1trZXldID0gTm9kZVR5cGUuZGVmaW5lKHtcbiAgICAgICAgaWQ6IHR5cGVBcnJheS5sZW5ndGgsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHByb3BzOiBbc3R5bGVUYWdzKHsgW25hbWVdOiB0YWdzJDEgfSldXG4gICAgfSk7XG4gICAgdHlwZUFycmF5LnB1c2godHlwZSk7XG4gICAgcmV0dXJuIHR5cGUuaWQ7XG59XG5mdW5jdGlvbiBkb2NJRChkYXRhLCBsYW5nKSB7XG4gICAgbGV0IHR5cGUgPSBOb2RlVHlwZS5kZWZpbmUoeyBpZDogdHlwZUFycmF5Lmxlbmd0aCwgbmFtZTogXCJEb2N1bWVudFwiLCBwcm9wczogW1xuICAgICAgICAgICAgbGFuZ3VhZ2VEYXRhUHJvcC5hZGQoKCkgPT4gZGF0YSksXG4gICAgICAgICAgICBpbmRlbnROb2RlUHJvcC5hZGQoKCkgPT4gY3ggPT4gbGFuZy5nZXRJbmRlbnQoY3gpKVxuICAgICAgICBdLCB0b3A6IHRydWUgfSk7XG4gICAgdHlwZUFycmF5LnB1c2godHlwZSk7XG4gICAgcmV0dXJuIHR5cGU7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkRm9yTGluZShsaW5lKSB7XG4gICAgcmV0dXJuIGxpbmUubGVuZ3RoIDw9IDQwOTYgJiYgL1tcXHUwNTkwLVxcdTA1ZjRcXHUwNjAwLVxcdTA2ZmZcXHUwNzAwLVxcdTA4YWNcXHVmYjUwLVxcdWZkZmZdLy50ZXN0KGxpbmUpO1xufVxuZnVuY3Rpb24gdGV4dEhhc1JUTCh0ZXh0KSB7XG4gICAgZm9yIChsZXQgaSA9IHRleHQuaXRlcigpOyAhaS5uZXh0KCkuZG9uZTspXG4gICAgICAgIGlmIChidWlsZEZvckxpbmUoaS52YWx1ZSkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBjaGFuZ2VBZGRzUlRMKGNoYW5nZSkge1xuICAgIGxldCBhZGRlZCA9IGZhbHNlO1xuICAgIGNoYW5nZS5pdGVyQ2hhbmdlcygoZkEsIHRBLCBmQiwgdEIsIGlucykgPT4ge1xuICAgICAgICBpZiAoIWFkZGVkICYmIHRleHRIYXNSVEwoaW5zKSlcbiAgICAgICAgICAgIGFkZGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gYWRkZWQ7XG59XG5jb25zdCBhbHdheXNJc29sYXRlID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7IGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuc29tZSh4ID0+IHgpIH0pO1xuLyoqXG5NYWtlIHN1cmUgbm9kZXNcblttYXJrZWRdKGh0dHBzOi8vbGV6ZXIuY29kZW1pcnJvci5uZXQvZG9jcy9yZWYvI2NvbW1vbi5Ob2RlUHJvcF5pc29sYXRlKVxuYXMgaXNvbGF0aW5nIGZvciBiaWRpcmVjdGlvbmFsIHRleHQgYXJlIHJlbmRlcmVkIGluIGEgd2F5IHRoYXRcbmlzb2xhdGVzIHRoZW0gZnJvbSB0aGUgc3Vycm91bmRpbmcgdGV4dC5cbiovXG5mdW5jdGlvbiBiaWRpSXNvbGF0ZXMob3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IGV4dGVuc2lvbnMgPSBbaXNvbGF0ZU1hcmtzXTtcbiAgICBpZiAob3B0aW9ucy5hbHdheXNJc29sYXRlKVxuICAgICAgICBleHRlbnNpb25zLnB1c2goYWx3YXlzSXNvbGF0ZS5vZih0cnVlKSk7XG4gICAgcmV0dXJuIGV4dGVuc2lvbnM7XG59XG5jb25zdCBpc29sYXRlTWFya3MgPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy5hbHdheXMgPSB2aWV3LnN0YXRlLmZhY2V0KGFsd2F5c0lzb2xhdGUpIHx8XG4gICAgICAgICAgICB2aWV3LnRleHREaXJlY3Rpb24gIT0gRGlyZWN0aW9uLkxUUiB8fFxuICAgICAgICAgICAgdmlldy5zdGF0ZS5mYWNldChFZGl0b3JWaWV3LnBlckxpbmVUZXh0RGlyZWN0aW9uKTtcbiAgICAgICAgdGhpcy5oYXNSVEwgPSAhdGhpcy5hbHdheXMgJiYgdGV4dEhhc1JUTCh2aWV3LnN0YXRlLmRvYyk7XG4gICAgICAgIHRoaXMudHJlZSA9IHN5bnRheFRyZWUodmlldy5zdGF0ZSk7XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmFsd2F5cyB8fCB0aGlzLmhhc1JUTCA/IGJ1aWxkRGVjbyh2aWV3LCB0aGlzLnRyZWUsIHRoaXMuYWx3YXlzKSA6IERlY29yYXRpb24ubm9uZTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgYWx3YXlzID0gdXBkYXRlLnN0YXRlLmZhY2V0KGFsd2F5c0lzb2xhdGUpIHx8XG4gICAgICAgICAgICB1cGRhdGUudmlldy50ZXh0RGlyZWN0aW9uICE9IERpcmVjdGlvbi5MVFIgfHxcbiAgICAgICAgICAgIHVwZGF0ZS5zdGF0ZS5mYWNldChFZGl0b3JWaWV3LnBlckxpbmVUZXh0RGlyZWN0aW9uKTtcbiAgICAgICAgaWYgKCFhbHdheXMgJiYgIXRoaXMuaGFzUlRMICYmIGNoYW5nZUFkZHNSVEwodXBkYXRlLmNoYW5nZXMpKVxuICAgICAgICAgICAgdGhpcy5oYXNSVEwgPSB0cnVlO1xuICAgICAgICBpZiAoIWFsd2F5cyAmJiAhdGhpcy5oYXNSVEwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCB0cmVlID0gc3ludGF4VHJlZSh1cGRhdGUuc3RhdGUpO1xuICAgICAgICBpZiAoYWx3YXlzICE9IHRoaXMuYWx3YXlzIHx8IHRyZWUgIT0gdGhpcy50cmVlIHx8IHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgICAgICB0aGlzLmFsd2F5cyA9IGFsd2F5cztcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSBidWlsZERlY28odXBkYXRlLnZpZXcsIHRyZWUsIGFsd2F5cyk7XG4gICAgICAgIH1cbiAgICB9XG59LCB7XG4gICAgcHJvdmlkZTogcGx1Z2luID0+IHtcbiAgICAgICAgZnVuY3Rpb24gYWNjZXNzKHZpZXcpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gdmlldy5wbHVnaW4ocGx1Z2luKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRlY29yYXRpb25zKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtFZGl0b3JWaWV3Lm91dGVyRGVjb3JhdGlvbnMub2YoYWNjZXNzKSxcbiAgICAgICAgICAgIFByZWMubG93ZXN0KEVkaXRvclZpZXcuYmlkaUlzb2xhdGVkUmFuZ2VzLm9mKGFjY2VzcykpXTtcbiAgICB9XG59KTtcbmZ1bmN0aW9uIGJ1aWxkRGVjbyh2aWV3LCB0cmVlLCBhbHdheXMpIHtcbiAgICBsZXQgZGVjbyA9IG5ldyBSYW5nZVNldEJ1aWxkZXIoKTtcbiAgICBsZXQgcmFuZ2VzID0gdmlldy52aXNpYmxlUmFuZ2VzO1xuICAgIGlmICghYWx3YXlzKVxuICAgICAgICByYW5nZXMgPSBjbGlwUlRMTGluZXMocmFuZ2VzLCB2aWV3LnN0YXRlLmRvYyk7XG4gICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHJhbmdlcykge1xuICAgICAgICB0cmVlLml0ZXJhdGUoe1xuICAgICAgICAgICAgZW50ZXI6IG5vZGUgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBpc28gPSBub2RlLnR5cGUucHJvcChOb2RlUHJvcC5pc29sYXRlKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNvKVxuICAgICAgICAgICAgICAgICAgICBkZWNvLmFkZChub2RlLmZyb20sIG5vZGUudG8sIG1hcmtzW2lzb10pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZyb20sIHRvXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZGVjby5maW5pc2goKTtcbn1cbmZ1bmN0aW9uIGNsaXBSVExMaW5lcyhyYW5nZXMsIGRvYykge1xuICAgIGxldCBjdXIgPSBkb2MuaXRlcigpLCBwb3MgPSAwLCByZXN1bHQgPSBbXSwgbGFzdCA9IG51bGw7XG4gICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHJhbmdlcykge1xuICAgICAgICBpZiAobGFzdCAmJiBsYXN0LnRvID4gZnJvbSkge1xuICAgICAgICAgICAgZnJvbSA9IGxhc3QudG87XG4gICAgICAgICAgICBpZiAoZnJvbSA+PSB0bylcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zICsgY3VyLnZhbHVlLmxlbmd0aCA8IGZyb20pIHtcbiAgICAgICAgICAgIGN1ci5uZXh0KGZyb20gLSAocG9zICsgY3VyLnZhbHVlLmxlbmd0aCkpO1xuICAgICAgICAgICAgcG9zID0gZnJvbTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBwb3MsIGVuZCA9IHBvcyArIGN1ci52YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIWN1ci5saW5lQnJlYWsgJiYgYnVpbGRGb3JMaW5lKGN1ci52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobGFzdCAmJiBsYXN0LnRvID4gc3RhcnQgLSAxMClcbiAgICAgICAgICAgICAgICAgICAgbGFzdC50byA9IE1hdGgubWluKHRvLCBlbmQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobGFzdCA9IHsgZnJvbTogc3RhcnQsIHRvOiBNYXRoLm1pbih0bywgZW5kKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbmQgPj0gdG8pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwb3MgPSBlbmQ7XG4gICAgICAgICAgICBjdXIubmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5jb25zdCBtYXJrcyA9IHtcbiAgICBydGw6IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1pc29cIiwgaW5jbHVzaXZlOiB0cnVlLCBhdHRyaWJ1dGVzOiB7IGRpcjogXCJydGxcIiB9LCBiaWRpSXNvbGF0ZTogRGlyZWN0aW9uLlJUTCB9KSxcbiAgICBsdHI6IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1pc29cIiwgaW5jbHVzaXZlOiB0cnVlLCBhdHRyaWJ1dGVzOiB7IGRpcjogXCJsdHJcIiB9LCBiaWRpSXNvbGF0ZTogRGlyZWN0aW9uLkxUUiB9KSxcbiAgICBhdXRvOiAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20taXNvXCIsIGluY2x1c2l2ZTogdHJ1ZSwgYXR0cmlidXRlczogeyBkaXI6IFwiYXV0b1wiIH0sIGJpZGlJc29sYXRlOiBudWxsIH0pXG59O1xuXG5leHBvcnQgeyBEb2NJbnB1dCwgSGlnaGxpZ2h0U3R5bGUsIEluZGVudENvbnRleHQsIExSTGFuZ3VhZ2UsIExhbmd1YWdlLCBMYW5ndWFnZURlc2NyaXB0aW9uLCBMYW5ndWFnZVN1cHBvcnQsIFBhcnNlQ29udGV4dCwgU3RyZWFtTGFuZ3VhZ2UsIFN0cmluZ1N0cmVhbSwgVHJlZUluZGVudENvbnRleHQsIGJpZGlJc29sYXRlcywgYnJhY2tldE1hdGNoaW5nLCBicmFja2V0TWF0Y2hpbmdIYW5kbGUsIGNvZGVGb2xkaW5nLCBjb250aW51ZWRJbmRlbnQsIGRlZmF1bHRIaWdobGlnaHRTdHlsZSwgZGVmaW5lTGFuZ3VhZ2VGYWNldCwgZGVsaW1pdGVkSW5kZW50LCBlbnN1cmVTeW50YXhUcmVlLCBmbGF0SW5kZW50LCBmb2xkQWxsLCBmb2xkQ29kZSwgZm9sZEVmZmVjdCwgZm9sZEd1dHRlciwgZm9sZEluc2lkZSwgZm9sZEtleW1hcCwgZm9sZE5vZGVQcm9wLCBmb2xkU2VydmljZSwgZm9sZFN0YXRlLCBmb2xkYWJsZSwgZm9sZGVkUmFuZ2VzLCBmb3JjZVBhcnNpbmcsIGdldEluZGVudFVuaXQsIGdldEluZGVudGF0aW9uLCBoaWdobGlnaHRpbmdGb3IsIGluZGVudE5vZGVQcm9wLCBpbmRlbnRPbklucHV0LCBpbmRlbnRSYW5nZSwgaW5kZW50U2VydmljZSwgaW5kZW50U3RyaW5nLCBpbmRlbnRVbml0LCBsYW5ndWFnZSwgbGFuZ3VhZ2VEYXRhUHJvcCwgbWF0Y2hCcmFja2V0cywgc3VibGFuZ3VhZ2VQcm9wLCBzeW50YXhIaWdobGlnaHRpbmcsIHN5bnRheFBhcnNlclJ1bm5pbmcsIHN5bnRheFRyZWUsIHN5bnRheFRyZWVBdmFpbGFibGUsIHRvZ2dsZUZvbGQsIHVuZm9sZEFsbCwgdW5mb2xkQ29kZSwgdW5mb2xkRWZmZWN0IH07XG4iLCAiaW1wb3J0IHsgUGFyc2VyLCBOb2RlUHJvcCwgTm9kZVNldCwgTm9kZVR5cGUsIERlZmF1bHRCdWZmZXJMZW5ndGgsIFRyZWUsIEl0ZXJNb2RlIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5cbi8qKlxuQSBwYXJzZSBzdGFjay4gVGhlc2UgYXJlIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgcGFyc2VyIHRvIHRyYWNrXG5wYXJzaW5nIHByb2dyZXNzLiBUaGV5IGFsc28gcHJvdmlkZSBzb21lIHByb3BlcnRpZXMgYW5kIG1ldGhvZHNcbnRoYXQgZXh0ZXJuYWwgY29kZSBzdWNoIGFzIGEgdG9rZW5pemVyIGNhbiB1c2UgdG8gZ2V0IGluZm9ybWF0aW9uXG5hYm91dCB0aGUgcGFyc2Ugc3RhdGUuXG4qL1xuY2xhc3MgU3RhY2sge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHBhcnNlIHRoYXQgdGhpcyBzdGFjayBpcyBwYXJ0IG9mIEBpbnRlcm5hbFxuICAgICovXG4gICAgcCwgXG4gICAgLyoqXG4gICAgSG9sZHMgc3RhdGUsIGlucHV0IHBvcywgYnVmZmVyIGluZGV4IHRyaXBsZXRzIGZvciBhbGwgYnV0IHRoZVxuICAgIHRvcCBzdGF0ZSBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YWNrLCBcbiAgICAvKipcbiAgICBUaGUgY3VycmVudCBwYXJzZSBzdGF0ZSBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRlLCBcbiAgICAvLyBUaGUgcG9zaXRpb24gYXQgd2hpY2ggdGhlIG5leHQgcmVkdWNlIHNob3VsZCB0YWtlIHBsYWNlLiBUaGlzXG4gICAgLy8gY2FuIGJlIGxlc3MgdGhhbiBgdGhpcy5wb3NgIHdoZW4gc2tpcHBlZCBleHByZXNzaW9ucyBoYXZlIGJlZW5cbiAgICAvLyBhZGRlZCB0byB0aGUgc3RhY2sgKHdoaWNoIHNob3VsZCBiZSBtb3ZlZCBvdXRzaWRlIG9mIHRoZSBuZXh0XG4gICAgLy8gcmVkdWN0aW9uKVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcmVkdWNlUG9zLCBcbiAgICAvKipcbiAgICBUaGUgaW5wdXQgcG9zaXRpb24gdXAgdG8gd2hpY2ggdGhpcyBzdGFjayBoYXMgcGFyc2VkLlxuICAgICovXG4gICAgcG9zLCBcbiAgICAvKipcbiAgICBUaGUgZHluYW1pYyBzY29yZSBvZiB0aGUgc3RhY2ssIGluY2x1ZGluZyBkeW5hbWljIHByZWNlZGVuY2VcbiAgICBhbmQgZXJyb3ItcmVjb3ZlcnkgcGVuYWx0aWVzXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzY29yZSwgXG4gICAgLy8gVGhlIG91dHB1dCBidWZmZXIuIEhvbGRzICh0eXBlLCBzdGFydCwgZW5kLCBzaXplKSBxdWFkc1xuICAgIC8vIHJlcHJlc2VudGluZyBub2RlcyBjcmVhdGVkIGJ5IHRoZSBwYXJzZXIsIHdoZXJlIGBzaXplYCBpc1xuICAgIC8vIGFtb3VudCBvZiBidWZmZXIgYXJyYXkgZW50cmllcyBjb3ZlcmVkIGJ5IHRoaXMgbm9kZS5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGJ1ZmZlciwgXG4gICAgLy8gVGhlIGJhc2Ugb2Zmc2V0IG9mIHRoZSBidWZmZXIuIFdoZW4gc3RhY2tzIGFyZSBzcGxpdCwgdGhlIHNwbGl0XG4gICAgLy8gaW5zdGFuY2Ugc2hhcmVkIHRoZSBidWZmZXIgaGlzdG9yeSB3aXRoIGl0cyBwYXJlbnQgdXAgdG9cbiAgICAvLyBgYnVmZmVyQmFzZWAsIHdoaWNoIGlzIHRoZSBhYnNvbHV0ZSBvZmZzZXQgKGluY2x1ZGluZyB0aGVcbiAgICAvLyBvZmZzZXQgb2YgcHJldmlvdXMgc3BsaXRzKSBpbnRvIHRoZSBidWZmZXIgYXQgd2hpY2ggdGhpcyBzdGFja1xuICAgIC8vIHN0YXJ0cyB3cml0aW5nLlxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgYnVmZmVyQmFzZSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjdXJDb250ZXh0LCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGxvb2tBaGVhZCA9IDAsIFxuICAgIC8vIEEgcGFyZW50IHN0YWNrIGZyb20gd2hpY2ggdGhpcyB3YXMgc3BsaXQgb2ZmLCBpZiBhbnkuIFRoaXMgaXNcbiAgICAvLyBzZXQgdXAgc28gdGhhdCBpdCBhbHdheXMgcG9pbnRzIHRvIGEgc3RhY2sgdGhhdCBoYXMgc29tZVxuICAgIC8vIGFkZGl0aW9uYWwgYnVmZmVyIGNvbnRlbnQsIG5ldmVyIHRvIGEgc3RhY2sgd2l0aCBhbiBlcXVhbFxuICAgIC8vIGBidWZmZXJCYXNlYC5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHBhcmVudCkge1xuICAgICAgICB0aGlzLnAgPSBwO1xuICAgICAgICB0aGlzLnN0YWNrID0gc3RhY2s7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5yZWR1Y2VQb3MgPSByZWR1Y2VQb3M7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLnNjb3JlID0gc2NvcmU7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgICB0aGlzLmJ1ZmZlckJhc2UgPSBidWZmZXJCYXNlO1xuICAgICAgICB0aGlzLmN1ckNvbnRleHQgPSBjdXJDb250ZXh0O1xuICAgICAgICB0aGlzLmxvb2tBaGVhZCA9IGxvb2tBaGVhZDtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgWyR7dGhpcy5zdGFjay5maWx0ZXIoKF8sIGkpID0+IGkgJSAzID09IDApLmNvbmNhdCh0aGlzLnN0YXRlKX1dQCR7dGhpcy5wb3N9JHt0aGlzLnNjb3JlID8gXCIhXCIgKyB0aGlzLnNjb3JlIDogXCJcIn1gO1xuICAgIH1cbiAgICAvLyBTdGFydCBhbiBlbXB0eSBzdGFja1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIHN0YXJ0KHAsIHN0YXRlLCBwb3MgPSAwKSB7XG4gICAgICAgIGxldCBjeCA9IHAucGFyc2VyLmNvbnRleHQ7XG4gICAgICAgIHJldHVybiBuZXcgU3RhY2socCwgW10sIHN0YXRlLCBwb3MsIHBvcywgMCwgW10sIDAsIGN4ID8gbmV3IFN0YWNrQ29udGV4dChjeCwgY3guc3RhcnQpIDogbnVsbCwgMCwgbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBzdGFjaydzIGN1cnJlbnQgW2NvbnRleHRdKCNsci5Db250ZXh0VHJhY2tlcikgdmFsdWUsIGlmXG4gICAgYW55LiBJdHMgdHlwZSB3aWxsIGRlcGVuZCBvbiB0aGUgY29udGV4dCB0cmFja2VyJ3MgdHlwZVxuICAgIHBhcmFtZXRlciwgb3IgaXQgd2lsbCBiZSBgbnVsbGAgaWYgdGhlcmUgaXMgbm8gY29udGV4dFxuICAgIHRyYWNrZXIuXG4gICAgKi9cbiAgICBnZXQgY29udGV4dCgpIHsgcmV0dXJuIHRoaXMuY3VyQ29udGV4dCA/IHRoaXMuY3VyQ29udGV4dC5jb250ZXh0IDogbnVsbDsgfVxuICAgIC8vIFB1c2ggYSBzdGF0ZSBvbnRvIHRoZSBzdGFjaywgdHJhY2tpbmcgaXRzIHN0YXJ0IHBvc2l0aW9uIGFzIHdlbGxcbiAgICAvLyBhcyB0aGUgYnVmZmVyIGJhc2UgYXQgdGhhdCBwb2ludC5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHB1c2hTdGF0ZShzdGF0ZSwgc3RhcnQpIHtcbiAgICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMuc3RhdGUsIHN0YXJ0LCB0aGlzLmJ1ZmZlckJhc2UgKyB0aGlzLmJ1ZmZlci5sZW5ndGgpO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxuICAgIC8vIEFwcGx5IGEgcmVkdWNlIGFjdGlvblxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcmVkdWNlKGFjdGlvbikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBkZXB0aCA9IGFjdGlvbiA+PiAxOSAvKiBBY3Rpb24uUmVkdWNlRGVwdGhTaGlmdCAqLywgdHlwZSA9IGFjdGlvbiAmIDY1NTM1IC8qIEFjdGlvbi5WYWx1ZU1hc2sgKi87XG4gICAgICAgIGxldCB7IHBhcnNlciB9ID0gdGhpcy5wO1xuICAgICAgICBsZXQgbG9va2FoZWFkUmVjb3JkID0gdGhpcy5yZWR1Y2VQb3MgPCB0aGlzLnBvcyAtIDI1IC8qIExvb2thaGVhZC5NYXJnaW4gKi8gJiYgdGhpcy5zZXRMb29rQWhlYWQodGhpcy5wb3MpO1xuICAgICAgICBsZXQgZFByZWMgPSBwYXJzZXIuZHluYW1pY1ByZWNlZGVuY2UodHlwZSk7XG4gICAgICAgIGlmIChkUHJlYylcbiAgICAgICAgICAgIHRoaXMuc2NvcmUgKz0gZFByZWM7XG4gICAgICAgIGlmIChkZXB0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShwYXJzZXIuZ2V0R290byh0aGlzLnN0YXRlLCB0eXBlLCB0cnVlKSwgdGhpcy5yZWR1Y2VQb3MpO1xuICAgICAgICAgICAgLy8gWmVyby1kZXB0aCByZWR1Y3Rpb25zIGFyZSBhIHNwZWNpYWwgY2FzZVx1MjAxNHRoZXkgYWRkIHN0dWZmIHRvXG4gICAgICAgICAgICAvLyB0aGUgc3RhY2sgd2l0aG91dCBwb3BwaW5nIGFueXRoaW5nIG9mZi5cbiAgICAgICAgICAgIGlmICh0eXBlIDwgcGFyc2VyLm1pblJlcGVhdFRlcm0pXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZU5vZGUodHlwZSwgdGhpcy5yZWR1Y2VQb3MsIHRoaXMucmVkdWNlUG9zLCBsb29rYWhlYWRSZWNvcmQgPyA4IDogNCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnJlZHVjZUNvbnRleHQodHlwZSwgdGhpcy5yZWR1Y2VQb3MpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZpbmQgdGhlIGJhc2UgaW5kZXggaW50byBgdGhpcy5zdGFja2AsIGNvbnRlbnQgYWZ0ZXIgd2hpY2ggd2lsbFxuICAgICAgICAvLyBiZSBkcm9wcGVkLiBOb3RlIHRoYXQgd2l0aCBgU3RheUZsYWdgIHJlZHVjdGlvbnMgd2UgbmVlZCB0b1xuICAgICAgICAvLyBjb25zdW1lIHR3byBleHRyYSBmcmFtZXMgKHRoZSBkdW1teSBwYXJlbnQgbm9kZSBmb3IgdGhlIHNraXBwZWRcbiAgICAgICAgLy8gZXhwcmVzc2lvbiBhbmQgdGhlIHN0YXRlIHRoYXQgd2UnbGwgYmUgc3RheWluZyBpbiwgd2hpY2ggc2hvdWxkXG4gICAgICAgIC8vIGJlIG1vdmVkIHRvIGB0aGlzLnN0YXRlYCkuXG4gICAgICAgIGxldCBiYXNlID0gdGhpcy5zdGFjay5sZW5ndGggLSAoKGRlcHRoIC0gMSkgKiAzKSAtIChhY3Rpb24gJiAyNjIxNDQgLyogQWN0aW9uLlN0YXlGbGFnICovID8gNiA6IDApO1xuICAgICAgICBsZXQgc3RhcnQgPSBiYXNlID8gdGhpcy5zdGFja1tiYXNlIC0gMl0gOiB0aGlzLnAucmFuZ2VzWzBdLmZyb20sIHNpemUgPSB0aGlzLnJlZHVjZVBvcyAtIHN0YXJ0O1xuICAgICAgICAvLyBUaGlzIGlzIGEga2x1ZGdlIHRvIHRyeSBhbmQgZGV0ZWN0IG92ZXJseSBkZWVwIGxlZnQtYXNzb2NpYXRpdmVcbiAgICAgICAgLy8gdHJlZXMsIHdoaWNoIHdpbGwgbm90IGluY3JlYXNlIHRoZSBwYXJzZSBzdGFjayBkZXB0aCBhbmQgdGh1c1xuICAgICAgICAvLyB3b24ndCBiZSBjYXVnaHQgYnkgdGhlIHJlZ3VsYXIgc3RhY2stZGVwdGggbGltaXQgY2hlY2suXG4gICAgICAgIGlmIChzaXplID49IDIwMDAgLyogUmVjb3Zlci5NaW5CaWdSZWR1Y3Rpb24gKi8gJiYgISgoX2EgPSB0aGlzLnAucGFyc2VyLm5vZGVTZXQudHlwZXNbdHlwZV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0Fub255bW91cykpIHtcbiAgICAgICAgICAgIGlmIChzdGFydCA9PSB0aGlzLnAubGFzdEJpZ1JlZHVjdGlvblN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wLmJpZ1JlZHVjdGlvbkNvdW50Kys7XG4gICAgICAgICAgICAgICAgdGhpcy5wLmxhc3RCaWdSZWR1Y3Rpb25TaXplID0gc2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucC5sYXN0QmlnUmVkdWN0aW9uU2l6ZSA8IHNpemUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnAuYmlnUmVkdWN0aW9uQ291bnQgPSAxO1xuICAgICAgICAgICAgICAgIHRoaXMucC5sYXN0QmlnUmVkdWN0aW9uU3RhcnQgPSBzdGFydDtcbiAgICAgICAgICAgICAgICB0aGlzLnAubGFzdEJpZ1JlZHVjdGlvblNpemUgPSBzaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBidWZmZXJCYXNlID0gYmFzZSA/IHRoaXMuc3RhY2tbYmFzZSAtIDFdIDogMCwgY291bnQgPSB0aGlzLmJ1ZmZlckJhc2UgKyB0aGlzLmJ1ZmZlci5sZW5ndGggLSBidWZmZXJCYXNlO1xuICAgICAgICAvLyBTdG9yZSBub3JtYWwgdGVybXMgb3IgYFIgLT4gUiBSYCByZXBlYXQgcmVkdWN0aW9uc1xuICAgICAgICBpZiAodHlwZSA8IHBhcnNlci5taW5SZXBlYXRUZXJtIHx8IChhY3Rpb24gJiAxMzEwNzIgLyogQWN0aW9uLlJlcGVhdEZsYWcgKi8pKSB7XG4gICAgICAgICAgICBsZXQgcG9zID0gcGFyc2VyLnN0YXRlRmxhZyh0aGlzLnN0YXRlLCAxIC8qIFN0YXRlRmxhZy5Ta2lwcGVkICovKSA/IHRoaXMucG9zIDogdGhpcy5yZWR1Y2VQb3M7XG4gICAgICAgICAgICB0aGlzLnN0b3JlTm9kZSh0eXBlLCBzdGFydCwgcG9zLCBjb3VudCArIDQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY3Rpb24gJiAyNjIxNDQgLyogQWN0aW9uLlN0YXlGbGFnICovKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5zdGFja1tiYXNlXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBiYXNlU3RhdGVJRCA9IHRoaXMuc3RhY2tbYmFzZSAtIDNdO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHBhcnNlci5nZXRHb3RvKGJhc2VTdGF0ZUlELCB0eXBlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGhpcy5zdGFjay5sZW5ndGggPiBiYXNlKVxuICAgICAgICAgICAgdGhpcy5zdGFjay5wb3AoKTtcbiAgICAgICAgdGhpcy5yZWR1Y2VDb250ZXh0KHR5cGUsIHN0YXJ0KTtcbiAgICB9XG4gICAgLy8gU2hpZnQgYSB2YWx1ZSBpbnRvIHRoZSBidWZmZXJcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0b3JlTm9kZSh0ZXJtLCBzdGFydCwgZW5kLCBzaXplID0gNCwgbXVzdFNpbmsgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGVybSA9PSAwIC8qIFRlcm0uRXJyICovICYmXG4gICAgICAgICAgICAoIXRoaXMuc3RhY2subGVuZ3RoIHx8IHRoaXMuc3RhY2tbdGhpcy5zdGFjay5sZW5ndGggLSAxXSA8IHRoaXMuYnVmZmVyLmxlbmd0aCArIHRoaXMuYnVmZmVyQmFzZSkpIHtcbiAgICAgICAgICAgIC8vIFRyeSB0byBvbWl0L21lcmdlIGFkamFjZW50IGVycm9yIG5vZGVzXG4gICAgICAgICAgICBsZXQgY3VyID0gdGhpcywgdG9wID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHRvcCA9PSAwICYmIGN1ci5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB0b3AgPSBjdXIuYnVmZmVyQmFzZSAtIGN1ci5wYXJlbnQuYnVmZmVyQmFzZTtcbiAgICAgICAgICAgICAgICBjdXIgPSBjdXIucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvcCA+IDAgJiYgY3VyLmJ1ZmZlclt0b3AgLSA0XSA9PSAwIC8qIFRlcm0uRXJyICovICYmIGN1ci5idWZmZXJbdG9wIC0gMV0gPiAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PSBlbmQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoY3VyLmJ1ZmZlclt0b3AgLSAyXSA+PSBzdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBjdXIuYnVmZmVyW3RvcCAtIDJdID0gZW5kO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbXVzdFNpbmsgfHwgdGhpcy5wb3MgPT0gZW5kKSB7IC8vIFNpbXBsZSBjYXNlLCBqdXN0IGFwcGVuZFxuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh0ZXJtLCBzdGFydCwgZW5kLCBzaXplKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHsgLy8gVGhlcmUgbWF5IGJlIHNraXBwZWQgbm9kZXMgdGhhdCBoYXZlIHRvIGJlIG1vdmVkIGZvcndhcmRcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDAgJiYgKHRoaXMuYnVmZmVyW2luZGV4IC0gNF0gIT0gMCAvKiBUZXJtLkVyciAqLyB8fCB0aGlzLmJ1ZmZlcltpbmRleCAtIDFdIDwgMCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbXVzdE1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzY2FuID0gaW5kZXg7IHNjYW4gPiAwICYmIHRoaXMuYnVmZmVyW3NjYW4gLSAyXSA+IGVuZDsgc2NhbiAtPSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ1ZmZlcltzY2FuIC0gMV0gPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXVzdE1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG11c3RNb3ZlKVxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaW5kZXggPiAwICYmIHRoaXMuYnVmZmVyW2luZGV4IC0gMl0gPiBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1vdmUgdGhpcyByZWNvcmQgZm9yd2FyZFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXhdID0gdGhpcy5idWZmZXJbaW5kZXggLSA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2luZGV4ICsgMV0gPSB0aGlzLmJ1ZmZlcltpbmRleCAtIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAyXSA9IHRoaXMuYnVmZmVyW2luZGV4IC0gMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleCArIDNdID0gdGhpcy5idWZmZXJbaW5kZXggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4IC09IDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2l6ZSA+IDQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSAtPSA0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleF0gPSB0ZXJtO1xuICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAxXSA9IHN0YXJ0O1xuICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAyXSA9IGVuZDtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyW2luZGV4ICsgM10gPSBzaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEFwcGx5IGEgc2hpZnQgYWN0aW9uXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzaGlmdChhY3Rpb24sIHR5cGUsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgaWYgKGFjdGlvbiAmIDEzMTA3MiAvKiBBY3Rpb24uR290b0ZsYWcgKi8pIHtcbiAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKGFjdGlvbiAmIDY1NTM1IC8qIEFjdGlvbi5WYWx1ZU1hc2sgKi8sIHRoaXMucG9zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoYWN0aW9uICYgMjYyMTQ0IC8qIEFjdGlvbi5TdGF5RmxhZyAqLykgPT0gMCkgeyAvLyBSZWd1bGFyIHNoaWZ0XG4gICAgICAgICAgICBsZXQgbmV4dFN0YXRlID0gYWN0aW9uLCB7IHBhcnNlciB9ID0gdGhpcy5wO1xuICAgICAgICAgICAgdGhpcy5wb3MgPSBlbmQ7XG4gICAgICAgICAgICBsZXQgc2tpcHBlZCA9IHBhcnNlci5zdGF0ZUZsYWcobmV4dFN0YXRlLCAxIC8qIFN0YXRlRmxhZy5Ta2lwcGVkICovKTtcbiAgICAgICAgICAgIC8vIFNraXBwZWQgb3IgemVyby1sZW5ndGggbm9uLXRyZWUgdG9rZW5zIGRvbid0IG1vdmUgcmVkdWNlUG9zXG4gICAgICAgICAgICBpZiAoIXNraXBwZWQgJiYgKGVuZCA+IHN0YXJ0IHx8IHR5cGUgPD0gcGFyc2VyLm1heE5vZGUpKVxuICAgICAgICAgICAgICAgIHRoaXMucmVkdWNlUG9zID0gZW5kO1xuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUobmV4dFN0YXRlLCBza2lwcGVkID8gc3RhcnQgOiBNYXRoLm1pbihzdGFydCwgdGhpcy5yZWR1Y2VQb3MpKTtcbiAgICAgICAgICAgIHRoaXMuc2hpZnRDb250ZXh0KHR5cGUsIHN0YXJ0KTtcbiAgICAgICAgICAgIGlmICh0eXBlIDw9IHBhcnNlci5tYXhOb2RlKVxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godHlwZSwgc3RhcnQsIGVuZCwgNCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7IC8vIFNoaWZ0LWFuZC1zdGF5LCB3aGljaCBtZWFucyB0aGlzIGlzIGEgc2tpcHBlZCB0b2tlblxuICAgICAgICAgICAgdGhpcy5wb3MgPSBlbmQ7XG4gICAgICAgICAgICB0aGlzLnNoaWZ0Q29udGV4dCh0eXBlLCBzdGFydCk7XG4gICAgICAgICAgICBpZiAodHlwZSA8PSB0aGlzLnAucGFyc2VyLm1heE5vZGUpXG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh0eXBlLCBzdGFydCwgZW5kLCA0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBBcHBseSBhbiBhY3Rpb25cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFwcGx5KGFjdGlvbiwgbmV4dCwgbmV4dFN0YXJ0LCBuZXh0RW5kKSB7XG4gICAgICAgIGlmIChhY3Rpb24gJiA2NTUzNiAvKiBBY3Rpb24uUmVkdWNlRmxhZyAqLylcbiAgICAgICAgICAgIHRoaXMucmVkdWNlKGFjdGlvbik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuc2hpZnQoYWN0aW9uLCBuZXh0LCBuZXh0U3RhcnQsIG5leHRFbmQpO1xuICAgIH1cbiAgICAvLyBBZGQgYSBwcmVidWlsdCAocmV1c2VkKSBub2RlIGludG8gdGhlIGJ1ZmZlci5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHVzZU5vZGUodmFsdWUsIG5leHQpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5wLnJldXNlZC5sZW5ndGggLSAxO1xuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMucC5yZXVzZWRbaW5kZXhdICE9IHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnAucmV1c2VkLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnBvcztcbiAgICAgICAgdGhpcy5yZWR1Y2VQb3MgPSB0aGlzLnBvcyA9IHN0YXJ0ICsgdmFsdWUubGVuZ3RoO1xuICAgICAgICB0aGlzLnB1c2hTdGF0ZShuZXh0LCBzdGFydCk7XG4gICAgICAgIHRoaXMuYnVmZmVyLnB1c2goaW5kZXgsIHN0YXJ0LCB0aGlzLnJlZHVjZVBvcywgLTEgLyogc2l6ZSA9PSAtMSBtZWFucyB0aGlzIGlzIGEgcmV1c2VkIHZhbHVlICovKTtcbiAgICAgICAgaWYgKHRoaXMuY3VyQ29udGV4dClcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGV4dCh0aGlzLmN1ckNvbnRleHQudHJhY2tlci5yZXVzZSh0aGlzLmN1ckNvbnRleHQuY29udGV4dCwgdmFsdWUsIHRoaXMsIHRoaXMucC5zdHJlYW0ucmVzZXQodGhpcy5wb3MgLSB2YWx1ZS5sZW5ndGgpKSk7XG4gICAgfVxuICAgIC8vIFNwbGl0IHRoZSBzdGFjay4gRHVlIHRvIHRoZSBidWZmZXIgc2hhcmluZyBhbmQgdGhlIGZhY3RcbiAgICAvLyB0aGF0IGB0aGlzLnN0YWNrYCB0ZW5kcyB0byBzdGF5IHF1aXRlIHNoYWxsb3csIHRoaXMgaXNuJ3QgdmVyeVxuICAgIC8vIGV4cGVuc2l2ZS5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNwbGl0KCkge1xuICAgICAgICBsZXQgcGFyZW50ID0gdGhpcztcbiAgICAgICAgbGV0IG9mZiA9IHBhcmVudC5idWZmZXIubGVuZ3RoO1xuICAgICAgICAvLyBCZWNhdXNlIHRoZSB0b3Agb2YgdGhlIGJ1ZmZlciAoYWZ0ZXIgdGhpcy5wb3MpIG1heSBiZSBtdXRhdGVkXG4gICAgICAgIC8vIHRvIHJlb3JkZXIgcmVkdWN0aW9ucyBhbmQgc2tpcHBlZCB0b2tlbnMsIGFuZCBzaGFyZWQgYnVmZmVyc1xuICAgICAgICAvLyBzaG91bGQgYmUgaW1tdXRhYmxlLCB0aGlzIGNvcGllcyBhbnkgb3V0c3RhbmRpbmcgc2tpcHBlZCB0b2tlbnNcbiAgICAgICAgLy8gdG8gdGhlIG5ldyBidWZmZXIsIGFuZCBwdXRzIHRoZSBiYXNlIHBvaW50ZXIgYmVmb3JlIHRoZW0uXG4gICAgICAgIHdoaWxlIChvZmYgPiAwICYmIHBhcmVudC5idWZmZXJbb2ZmIC0gMl0gPiBwYXJlbnQucmVkdWNlUG9zKVxuICAgICAgICAgICAgb2ZmIC09IDQ7XG4gICAgICAgIGxldCBidWZmZXIgPSBwYXJlbnQuYnVmZmVyLnNsaWNlKG9mZiksIGJhc2UgPSBwYXJlbnQuYnVmZmVyQmFzZSArIG9mZjtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHBhcmVudCBwb2ludHMgdG8gYW4gYWN0dWFsIHBhcmVudCB3aXRoIGNvbnRlbnQsIGlmIHRoZXJlIGlzIHN1Y2ggYSBwYXJlbnQuXG4gICAgICAgIHdoaWxlIChwYXJlbnQgJiYgYmFzZSA9PSBwYXJlbnQuYnVmZmVyQmFzZSlcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgICAgIHJldHVybiBuZXcgU3RhY2sodGhpcy5wLCB0aGlzLnN0YWNrLnNsaWNlKCksIHRoaXMuc3RhdGUsIHRoaXMucmVkdWNlUG9zLCB0aGlzLnBvcywgdGhpcy5zY29yZSwgYnVmZmVyLCBiYXNlLCB0aGlzLmN1ckNvbnRleHQsIHRoaXMubG9va0FoZWFkLCBwYXJlbnQpO1xuICAgIH1cbiAgICAvLyBUcnkgdG8gcmVjb3ZlciBmcm9tIGFuIGVycm9yIGJ5ICdkZWxldGluZycgKGlnbm9yaW5nKSBvbmUgdG9rZW4uXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICByZWNvdmVyQnlEZWxldGUobmV4dCwgbmV4dEVuZCkge1xuICAgICAgICBsZXQgaXNOb2RlID0gbmV4dCA8PSB0aGlzLnAucGFyc2VyLm1heE5vZGU7XG4gICAgICAgIGlmIChpc05vZGUpXG4gICAgICAgICAgICB0aGlzLnN0b3JlTm9kZShuZXh0LCB0aGlzLnBvcywgbmV4dEVuZCwgNCk7XG4gICAgICAgIHRoaXMuc3RvcmVOb2RlKDAgLyogVGVybS5FcnIgKi8sIHRoaXMucG9zLCBuZXh0RW5kLCBpc05vZGUgPyA4IDogNCk7XG4gICAgICAgIHRoaXMucG9zID0gdGhpcy5yZWR1Y2VQb3MgPSBuZXh0RW5kO1xuICAgICAgICB0aGlzLnNjb3JlIC09IDE5MCAvKiBSZWNvdmVyLkRlbGV0ZSAqLztcbiAgICB9XG4gICAgLyoqXG4gICAgQ2hlY2sgaWYgdGhlIGdpdmVuIHRlcm0gd291bGQgYmUgYWJsZSB0byBiZSBzaGlmdGVkIChvcHRpb25hbGx5XG4gICAgYWZ0ZXIgc29tZSByZWR1Y3Rpb25zKSBvbiB0aGlzIHN0YWNrLiBUaGlzIGNhbiBiZSB1c2VmdWwgZm9yXG4gICAgZXh0ZXJuYWwgdG9rZW5pemVycyB0aGF0IHdhbnQgdG8gbWFrZSBzdXJlIHRoZXkgb25seSBwcm92aWRlIGFcbiAgICBnaXZlbiB0b2tlbiB3aGVuIGl0IGFwcGxpZXMuXG4gICAgKi9cbiAgICBjYW5TaGlmdCh0ZXJtKSB7XG4gICAgICAgIGZvciAobGV0IHNpbSA9IG5ldyBTaW11bGF0ZWRTdGFjayh0aGlzKTs7KSB7XG4gICAgICAgICAgICBsZXQgYWN0aW9uID0gdGhpcy5wLnBhcnNlci5zdGF0ZVNsb3Qoc2ltLnN0YXRlLCA0IC8qIFBhcnNlU3RhdGUuRGVmYXVsdFJlZHVjZSAqLykgfHwgdGhpcy5wLnBhcnNlci5oYXNBY3Rpb24oc2ltLnN0YXRlLCB0ZXJtKTtcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoKGFjdGlvbiAmIDY1NTM2IC8qIEFjdGlvbi5SZWR1Y2VGbGFnICovKSA9PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgc2ltLnJlZHVjZShhY3Rpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEFwcGx5IHVwIHRvIFJlY292ZXIuTWF4TmV4dCByZWNvdmVyeSBhY3Rpb25zIHRoYXQgY29uY2VwdHVhbGx5XG4gICAgLy8gaW5zZXJ0cyBzb21lIG1pc3NpbmcgdG9rZW4gb3IgcnVsZS5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJlY292ZXJCeUluc2VydChuZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aCA+PSAzMDAgLyogUmVjb3Zlci5NYXhJbnNlcnRTdGFja0RlcHRoICovKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICBsZXQgbmV4dFN0YXRlcyA9IHRoaXMucC5wYXJzZXIubmV4dFN0YXRlcyh0aGlzLnN0YXRlKTtcbiAgICAgICAgaWYgKG5leHRTdGF0ZXMubGVuZ3RoID4gNCAvKiBSZWNvdmVyLk1heE5leHQgKi8gPDwgMSB8fCB0aGlzLnN0YWNrLmxlbmd0aCA+PSAxMjAgLyogUmVjb3Zlci5EYW1wZW5JbnNlcnRTdGFja0RlcHRoICovKSB7XG4gICAgICAgICAgICBsZXQgYmVzdCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIHM7IGkgPCBuZXh0U3RhdGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICAgICAgaWYgKChzID0gbmV4dFN0YXRlc1tpICsgMV0pICE9IHRoaXMuc3RhdGUgJiYgdGhpcy5wLnBhcnNlci5oYXNBY3Rpb24ocywgbmV4dCkpXG4gICAgICAgICAgICAgICAgICAgIGJlc3QucHVzaChuZXh0U3RhdGVzW2ldLCBzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aCA8IDEyMCAvKiBSZWNvdmVyLkRhbXBlbkluc2VydFN0YWNrRGVwdGggKi8pXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGJlc3QubGVuZ3RoIDwgNCAvKiBSZWNvdmVyLk1heE5leHQgKi8gPDwgMSAmJiBpIDwgbmV4dFN0YXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcyA9IG5leHRTdGF0ZXNbaSArIDFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWJlc3Quc29tZSgodiwgaSkgPT4gKGkgJiAxKSAmJiB2ID09IHMpKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdC5wdXNoKG5leHRTdGF0ZXNbaV0sIHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHRTdGF0ZXMgPSBiZXN0O1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXh0U3RhdGVzLmxlbmd0aCAmJiByZXN1bHQubGVuZ3RoIDwgNCAvKiBSZWNvdmVyLk1heE5leHQgKi87IGkgKz0gMikge1xuICAgICAgICAgICAgbGV0IHMgPSBuZXh0U3RhdGVzW2kgKyAxXTtcbiAgICAgICAgICAgIGlmIChzID09IHRoaXMuc3RhdGUpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBsZXQgc3RhY2sgPSB0aGlzLnNwbGl0KCk7XG4gICAgICAgICAgICBzdGFjay5wdXNoU3RhdGUocywgdGhpcy5wb3MpO1xuICAgICAgICAgICAgc3RhY2suc3RvcmVOb2RlKDAgLyogVGVybS5FcnIgKi8sIHN0YWNrLnBvcywgc3RhY2sucG9zLCA0LCB0cnVlKTtcbiAgICAgICAgICAgIHN0YWNrLnNoaWZ0Q29udGV4dChuZXh0U3RhdGVzW2ldLCB0aGlzLnBvcyk7XG4gICAgICAgICAgICBzdGFjay5yZWR1Y2VQb3MgPSB0aGlzLnBvcztcbiAgICAgICAgICAgIHN0YWNrLnNjb3JlIC09IDIwMCAvKiBSZWNvdmVyLkluc2VydCAqLztcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvLyBGb3JjZSBhIHJlZHVjZSwgaWYgcG9zc2libGUuIFJldHVybiBmYWxzZSBpZiB0aGF0IGNhbid0XG4gICAgLy8gYmUgZG9uZS5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGZvcmNlUmVkdWNlKCkge1xuICAgICAgICBsZXQgeyBwYXJzZXIgfSA9IHRoaXMucDtcbiAgICAgICAgbGV0IHJlZHVjZSA9IHBhcnNlci5zdGF0ZVNsb3QodGhpcy5zdGF0ZSwgNSAvKiBQYXJzZVN0YXRlLkZvcmNlZFJlZHVjZSAqLyk7XG4gICAgICAgIGlmICgocmVkdWNlICYgNjU1MzYgLyogQWN0aW9uLlJlZHVjZUZsYWcgKi8pID09IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghcGFyc2VyLnZhbGlkQWN0aW9uKHRoaXMuc3RhdGUsIHJlZHVjZSkpIHtcbiAgICAgICAgICAgIGxldCBkZXB0aCA9IHJlZHVjZSA+PiAxOSAvKiBBY3Rpb24uUmVkdWNlRGVwdGhTaGlmdCAqLywgdGVybSA9IHJlZHVjZSAmIDY1NTM1IC8qIEFjdGlvbi5WYWx1ZU1hc2sgKi87XG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5zdGFjay5sZW5ndGggLSBkZXB0aCAqIDM7XG4gICAgICAgICAgICBpZiAodGFyZ2V0IDwgMCB8fCBwYXJzZXIuZ2V0R290byh0aGlzLnN0YWNrW3RhcmdldF0sIHRlcm0sIGZhbHNlKSA8IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgYmFja3VwID0gdGhpcy5maW5kRm9yY2VkUmVkdWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKGJhY2t1cCA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmVkdWNlID0gYmFja3VwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdG9yZU5vZGUoMCAvKiBUZXJtLkVyciAqLywgdGhpcy5wb3MsIHRoaXMucG9zLCA0LCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuc2NvcmUgLT0gMTAwIC8qIFJlY292ZXIuUmVkdWNlICovO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVkdWNlUG9zID0gdGhpcy5wb3M7XG4gICAgICAgIHRoaXMucmVkdWNlKHJlZHVjZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBUcnkgdG8gc2NhbiB0aHJvdWdoIHRoZSBhdXRvbWF0b24gdG8gZmluZCBzb21lIGtpbmQgb2YgcmVkdWN0aW9uXG4gICAgdGhhdCBjYW4gYmUgYXBwbGllZC4gVXNlZCB3aGVuIHRoZSByZWd1bGFyIEZvcmNlZFJlZHVjZSBmaWVsZFxuICAgIGlzbid0IGEgdmFsaWQgYWN0aW9uLiBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGZpbmRGb3JjZWRSZWR1Y3Rpb24oKSB7XG4gICAgICAgIGxldCB7IHBhcnNlciB9ID0gdGhpcy5wLCBzZWVuID0gW107XG4gICAgICAgIGxldCBleHBsb3JlID0gKHN0YXRlLCBkZXB0aCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNlZW4uaW5jbHVkZXMoc3RhdGUpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHNlZW4ucHVzaChzdGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLmFsbEFjdGlvbnMoc3RhdGUsIChhY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uICYgKDI2MjE0NCAvKiBBY3Rpb24uU3RheUZsYWcgKi8gfCAxMzEwNzIgLyogQWN0aW9uLkdvdG9GbGFnICovKSkgO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFjdGlvbiAmIDY1NTM2IC8qIEFjdGlvbi5SZWR1Y2VGbGFnICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCByRGVwdGggPSAoYWN0aW9uID4+IDE5IC8qIEFjdGlvbi5SZWR1Y2VEZXB0aFNoaWZ0ICovKSAtIGRlcHRoO1xuICAgICAgICAgICAgICAgICAgICBpZiAockRlcHRoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlcm0gPSBhY3Rpb24gJiA2NTUzNSAvKiBBY3Rpb24uVmFsdWVNYXNrICovLCB0YXJnZXQgPSB0aGlzLnN0YWNrLmxlbmd0aCAtIHJEZXB0aCAqIDM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ID49IDAgJiYgcGFyc2VyLmdldEdvdG8odGhpcy5zdGFja1t0YXJnZXRdLCB0ZXJtLCBmYWxzZSkgPj0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHJEZXB0aCA8PCAxOSAvKiBBY3Rpb24uUmVkdWNlRGVwdGhTaGlmdCAqLykgfCA2NTUzNiAvKiBBY3Rpb24uUmVkdWNlRmxhZyAqLyB8IHRlcm07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IGV4cGxvcmUoYWN0aW9uLCBkZXB0aCArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGV4cGxvcmUodGhpcy5zdGF0ZSwgMCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZm9yY2VBbGwoKSB7XG4gICAgICAgIHdoaWxlICghdGhpcy5wLnBhcnNlci5zdGF0ZUZsYWcodGhpcy5zdGF0ZSwgMiAvKiBTdGF0ZUZsYWcuQWNjZXB0aW5nICovKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZvcmNlUmVkdWNlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JlTm9kZSgwIC8qIFRlcm0uRXJyICovLCB0aGlzLnBvcywgdGhpcy5wb3MsIDQsIHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBDaGVjayB3aGV0aGVyIHRoaXMgc3RhdGUgaGFzIG5vIGZ1cnRoZXIgYWN0aW9ucyAoYXNzdW1lZCB0byBiZSBhIGRpcmVjdCBkZXNjZW5kYW50IG9mIHRoZVxuICAgIHRvcCBzdGF0ZSwgc2luY2UgYW55IG90aGVyIHN0YXRlcyBtdXN0IGJlIGFibGUgdG8gY29udGludWVcbiAgICBzb21laG93KS4gQGludGVybmFsXG4gICAgKi9cbiAgICBnZXQgZGVhZEVuZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhY2subGVuZ3RoICE9IDMpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCB7IHBhcnNlciB9ID0gdGhpcy5wO1xuICAgICAgICByZXR1cm4gcGFyc2VyLmRhdGFbcGFyc2VyLnN0YXRlU2xvdCh0aGlzLnN0YXRlLCAxIC8qIFBhcnNlU3RhdGUuQWN0aW9ucyAqLyldID09IDY1NTM1IC8qIFNlcS5FbmQgKi8gJiZcbiAgICAgICAgICAgICFwYXJzZXIuc3RhdGVTbG90KHRoaXMuc3RhdGUsIDQgLyogUGFyc2VTdGF0ZS5EZWZhdWx0UmVkdWNlICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVzdGFydCB0aGUgc3RhY2sgKHB1dCBpdCBiYWNrIGluIGl0cyBzdGFydCBzdGF0ZSkuIE9ubHkgc2FmZVxuICAgIHdoZW4gdGhpcy5zdGFjay5sZW5ndGggPT0gMyAoc3RhdGUgaXMgZGlyZWN0bHkgYmVsb3cgdGhlIHRvcFxuICAgIHN0YXRlKS4gQGludGVybmFsXG4gICAgKi9cbiAgICByZXN0YXJ0KCkge1xuICAgICAgICB0aGlzLnN0b3JlTm9kZSgwIC8qIFRlcm0uRXJyICovLCB0aGlzLnBvcywgdGhpcy5wb3MsIDQsIHRydWUpO1xuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5zdGFja1swXTtcbiAgICAgICAgdGhpcy5zdGFjay5sZW5ndGggPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNhbWVTdGF0ZShvdGhlcikge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPSBvdGhlci5zdGF0ZSB8fCB0aGlzLnN0YWNrLmxlbmd0aCAhPSBvdGhlci5zdGFjay5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGFjay5sZW5ndGg7IGkgKz0gMylcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YWNrW2ldICE9IG90aGVyLnN0YWNrW2ldKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgcGFyc2VyIHVzZWQgYnkgdGhpcyBzdGFjay5cbiAgICAqL1xuICAgIGdldCBwYXJzZXIoKSB7IHJldHVybiB0aGlzLnAucGFyc2VyOyB9XG4gICAgLyoqXG4gICAgVGVzdCB3aGV0aGVyIGEgZ2l2ZW4gZGlhbGVjdCAoYnkgbnVtZXJpYyBJRCwgYXMgZXhwb3J0ZWQgZnJvbVxuICAgIHRoZSB0ZXJtcyBmaWxlKSBpcyBlbmFibGVkLlxuICAgICovXG4gICAgZGlhbGVjdEVuYWJsZWQoZGlhbGVjdElEKSB7IHJldHVybiB0aGlzLnAucGFyc2VyLmRpYWxlY3QuZmxhZ3NbZGlhbGVjdElEXTsgfVxuICAgIHNoaWZ0Q29udGV4dCh0ZXJtLCBzdGFydCkge1xuICAgICAgICBpZiAodGhpcy5jdXJDb250ZXh0KVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDb250ZXh0KHRoaXMuY3VyQ29udGV4dC50cmFja2VyLnNoaWZ0KHRoaXMuY3VyQ29udGV4dC5jb250ZXh0LCB0ZXJtLCB0aGlzLCB0aGlzLnAuc3RyZWFtLnJlc2V0KHN0YXJ0KSkpO1xuICAgIH1cbiAgICByZWR1Y2VDb250ZXh0KHRlcm0sIHN0YXJ0KSB7XG4gICAgICAgIGlmICh0aGlzLmN1ckNvbnRleHQpXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQodGhpcy5jdXJDb250ZXh0LnRyYWNrZXIucmVkdWNlKHRoaXMuY3VyQ29udGV4dC5jb250ZXh0LCB0ZXJtLCB0aGlzLCB0aGlzLnAuc3RyZWFtLnJlc2V0KHN0YXJ0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGVtaXRDb250ZXh0KCkge1xuICAgICAgICBsZXQgbGFzdCA9IHRoaXMuYnVmZmVyLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmIChsYXN0IDwgMCB8fCB0aGlzLmJ1ZmZlcltsYXN0XSAhPSAtMylcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godGhpcy5jdXJDb250ZXh0Lmhhc2gsIHRoaXMucG9zLCB0aGlzLnBvcywgLTMpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGVtaXRMb29rQWhlYWQoKSB7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5idWZmZXIubGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKGxhc3QgPCAwIHx8IHRoaXMuYnVmZmVyW2xhc3RdICE9IC00KVxuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh0aGlzLmxvb2tBaGVhZCwgdGhpcy5wb3MsIHRoaXMucG9zLCAtNCk7XG4gICAgfVxuICAgIHVwZGF0ZUNvbnRleHQoY29udGV4dCkge1xuICAgICAgICBpZiAoY29udGV4dCAhPSB0aGlzLmN1ckNvbnRleHQuY29udGV4dCkge1xuICAgICAgICAgICAgbGV0IG5ld0N4ID0gbmV3IFN0YWNrQ29udGV4dCh0aGlzLmN1ckNvbnRleHQudHJhY2tlciwgY29udGV4dCk7XG4gICAgICAgICAgICBpZiAobmV3Q3guaGFzaCAhPSB0aGlzLmN1ckNvbnRleHQuaGFzaClcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXRDb250ZXh0KCk7XG4gICAgICAgICAgICB0aGlzLmN1ckNvbnRleHQgPSBuZXdDeDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNldExvb2tBaGVhZChsb29rQWhlYWQpIHtcbiAgICAgICAgaWYgKGxvb2tBaGVhZCA8PSB0aGlzLmxvb2tBaGVhZClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5lbWl0TG9va0FoZWFkKCk7XG4gICAgICAgIHRoaXMubG9va0FoZWFkID0gbG9va0FoZWFkO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VyQ29udGV4dCAmJiB0aGlzLmN1ckNvbnRleHQudHJhY2tlci5zdHJpY3QpXG4gICAgICAgICAgICB0aGlzLmVtaXRDb250ZXh0KCk7XG4gICAgICAgIGlmICh0aGlzLmxvb2tBaGVhZCA+IDApXG4gICAgICAgICAgICB0aGlzLmVtaXRMb29rQWhlYWQoKTtcbiAgICB9XG59XG5jbGFzcyBTdGFja0NvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHRyYWNrZXIsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy50cmFja2VyID0gdHJhY2tlcjtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5oYXNoID0gdHJhY2tlci5zdHJpY3QgPyB0cmFja2VyLmhhc2goY29udGV4dCkgOiAwO1xuICAgIH1cbn1cbi8vIFVzZWQgdG8gY2hlYXBseSBydW4gc29tZSByZWR1Y3Rpb25zIHRvIHNjYW4gYWhlYWQgd2l0aG91dCBtdXRhdGluZ1xuLy8gYW4gZW50aXJlIHN0YWNrXG5jbGFzcyBTaW11bGF0ZWRTdGFjayB7XG4gICAgY29uc3RydWN0b3Ioc3RhcnQpIHtcbiAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhcnQuc3RhdGU7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBzdGFydC5zdGFjaztcbiAgICAgICAgdGhpcy5iYXNlID0gdGhpcy5zdGFjay5sZW5ndGg7XG4gICAgfVxuICAgIHJlZHVjZShhY3Rpb24pIHtcbiAgICAgICAgbGV0IHRlcm0gPSBhY3Rpb24gJiA2NTUzNSAvKiBBY3Rpb24uVmFsdWVNYXNrICovLCBkZXB0aCA9IGFjdGlvbiA+PiAxOSAvKiBBY3Rpb24uUmVkdWNlRGVwdGhTaGlmdCAqLztcbiAgICAgICAgaWYgKGRlcHRoID09IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YWNrID09IHRoaXMuc3RhcnQuc3RhY2spXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFjayA9IHRoaXMuc3RhY2suc2xpY2UoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sucHVzaCh0aGlzLnN0YXRlLCAwLCAwKTtcbiAgICAgICAgICAgIHRoaXMuYmFzZSArPSAzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5iYXNlIC09IChkZXB0aCAtIDEpICogMztcbiAgICAgICAgfVxuICAgICAgICBsZXQgZ290byA9IHRoaXMuc3RhcnQucC5wYXJzZXIuZ2V0R290byh0aGlzLnN0YWNrW3RoaXMuYmFzZSAtIDNdLCB0ZXJtLCB0cnVlKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGdvdG87XG4gICAgfVxufVxuLy8gVGhpcyBpcyBnaXZlbiB0byBgVHJlZS5idWlsZGAgdG8gYnVpbGQgYSBidWZmZXIsIGFuZCBlbmNhcHN1bGF0ZXNcbi8vIHRoZSBwYXJlbnQtc3RhY2std2Fsa2luZyBuZWNlc3NhcnkgdG8gcmVhZCB0aGUgbm9kZXMuXG5jbGFzcyBTdGFja0J1ZmZlckN1cnNvciB7XG4gICAgY29uc3RydWN0b3Ioc3RhY2ssIHBvcywgaW5kZXgpIHtcbiAgICAgICAgdGhpcy5zdGFjayA9IHN0YWNrO1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHN0YWNrLmJ1ZmZlcjtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXggPT0gMClcbiAgICAgICAgICAgIHRoaXMubWF5YmVOZXh0KCk7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoc3RhY2ssIHBvcyA9IHN0YWNrLmJ1ZmZlckJhc2UgKyBzdGFjay5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RhY2tCdWZmZXJDdXJzb3Ioc3RhY2ssIHBvcywgcG9zIC0gc3RhY2suYnVmZmVyQmFzZSk7XG4gICAgfVxuICAgIG1heWJlTmV4dCgpIHtcbiAgICAgICAgbGV0IG5leHQgPSB0aGlzLnN0YWNrLnBhcmVudDtcbiAgICAgICAgaWYgKG5leHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMuc3RhY2suYnVmZmVyQmFzZSAtIG5leHQuYnVmZmVyQmFzZTtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXh0O1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBuZXh0LmJ1ZmZlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaWQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gNF07IH1cbiAgICBnZXQgc3RhcnQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gM107IH1cbiAgICBnZXQgZW5kKCkgeyByZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5pbmRleCAtIDJdOyB9XG4gICAgZ2V0IHNpemUoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gMV07IH1cbiAgICBuZXh0KCkge1xuICAgICAgICB0aGlzLmluZGV4IC09IDQ7XG4gICAgICAgIHRoaXMucG9zIC09IDQ7XG4gICAgICAgIGlmICh0aGlzLmluZGV4ID09IDApXG4gICAgICAgICAgICB0aGlzLm1heWJlTmV4dCgpO1xuICAgIH1cbiAgICBmb3JrKCkge1xuICAgICAgICByZXR1cm4gbmV3IFN0YWNrQnVmZmVyQ3Vyc29yKHRoaXMuc3RhY2ssIHRoaXMucG9zLCB0aGlzLmluZGV4KTtcbiAgICB9XG59XG5cbi8vIFNlZSBsZXplci1nZW5lcmF0b3Ivc3JjL2VuY29kZS50cyBmb3IgY29tbWVudHMgYWJvdXQgdGhlIGVuY29kaW5nXG4vLyB1c2VkIGhlcmVcbmZ1bmN0aW9uIGRlY29kZUFycmF5KGlucHV0LCBUeXBlID0gVWludDE2QXJyYXkpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ICE9IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICBsZXQgYXJyYXkgPSBudWxsO1xuICAgIGZvciAobGV0IHBvcyA9IDAsIG91dCA9IDA7IHBvcyA8IGlucHV0Lmxlbmd0aDspIHtcbiAgICAgICAgbGV0IHZhbHVlID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBpbnB1dC5jaGFyQ29kZUF0KHBvcysrKSwgc3RvcCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG5leHQgPT0gMTI2IC8qIEVuY29kZS5CaWdWYWxDb2RlICovKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSA2NTUzNSAvKiBFbmNvZGUuQmlnVmFsICovO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5leHQgPj0gOTIgLyogRW5jb2RlLkdhcDIgKi8pXG4gICAgICAgICAgICAgICAgbmV4dC0tO1xuICAgICAgICAgICAgaWYgKG5leHQgPj0gMzQgLyogRW5jb2RlLkdhcDEgKi8pXG4gICAgICAgICAgICAgICAgbmV4dC0tO1xuICAgICAgICAgICAgbGV0IGRpZ2l0ID0gbmV4dCAtIDMyIC8qIEVuY29kZS5TdGFydCAqLztcbiAgICAgICAgICAgIGlmIChkaWdpdCA+PSA0NiAvKiBFbmNvZGUuQmFzZSAqLykge1xuICAgICAgICAgICAgICAgIGRpZ2l0IC09IDQ2IC8qIEVuY29kZS5CYXNlICovO1xuICAgICAgICAgICAgICAgIHN0b3AgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgKz0gZGlnaXQ7XG4gICAgICAgICAgICBpZiAoc3RvcClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHZhbHVlICo9IDQ2IC8qIEVuY29kZS5CYXNlICovO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcnJheSlcbiAgICAgICAgICAgIGFycmF5W291dCsrXSA9IHZhbHVlO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhcnJheSA9IG5ldyBUeXBlKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xufVxuXG5jbGFzcyBDYWNoZWRUb2tlbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3RhcnQgPSAtMTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IC0xO1xuICAgICAgICB0aGlzLmVuZCA9IC0xO1xuICAgICAgICB0aGlzLmV4dGVuZGVkID0gLTE7XG4gICAgICAgIHRoaXMubG9va0FoZWFkID0gMDtcbiAgICAgICAgdGhpcy5tYXNrID0gMDtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gMDtcbiAgICB9XG59XG5jb25zdCBudWxsVG9rZW4gPSBuZXcgQ2FjaGVkVG9rZW47XG4vKipcbltUb2tlbml6ZXJzXSgjbHIuRXh0ZXJuYWxUb2tlbml6ZXIpIGludGVyYWN0IHdpdGggdGhlIGlucHV0XG50aHJvdWdoIHRoaXMgaW50ZXJmYWNlLiBJdCBwcmVzZW50cyB0aGUgaW5wdXQgYXMgYSBzdHJlYW0gb2ZcbmNoYXJhY3RlcnMsIHRyYWNraW5nIGxvb2thaGVhZCBhbmQgaGlkaW5nIHRoZSBjb21wbGV4aXR5IG9mXG5bcmFuZ2VzXSgjY29tbW9uLlBhcnNlci5wYXJzZV5yYW5nZXMpIGZyb20gdG9rZW5pemVyIGNvZGUuXG4qL1xuY2xhc3MgSW5wdXRTdHJlYW0ge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBpbnB1dCwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICByYW5nZXMpIHtcbiAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmNodW5rID0gXCJcIjtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmNodW5rT2ZmID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgIEJhY2t1cCBjaHVua1xuICAgICAgICAqL1xuICAgICAgICB0aGlzLmNodW5rMiA9IFwiXCI7XG4gICAgICAgIHRoaXMuY2h1bmsyUG9zID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgIFRoZSBjaGFyYWN0ZXIgY29kZSBvZiB0aGUgbmV4dCBjb2RlIHVuaXQgaW4gdGhlIGlucHV0LCBvciAtMVxuICAgICAgICB3aGVuIHRoZSBzdHJlYW0gaXMgYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQuXG4gICAgICAgICovXG4gICAgICAgIHRoaXMubmV4dCA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMudG9rZW4gPSBudWxsVG9rZW47XG4gICAgICAgIHRoaXMucmFuZ2VJbmRleCA9IDA7XG4gICAgICAgIHRoaXMucG9zID0gdGhpcy5jaHVua1BvcyA9IHJhbmdlc1swXS5mcm9tO1xuICAgICAgICB0aGlzLnJhbmdlID0gcmFuZ2VzWzBdO1xuICAgICAgICB0aGlzLmVuZCA9IHJhbmdlc1tyYW5nZXMubGVuZ3RoIC0gMV0udG87XG4gICAgICAgIHRoaXMucmVhZE5leHQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICByZXNvbHZlT2Zmc2V0KG9mZnNldCwgYXNzb2MpIHtcbiAgICAgICAgbGV0IHJhbmdlID0gdGhpcy5yYW5nZSwgaW5kZXggPSB0aGlzLnJhbmdlSW5kZXg7XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLnBvcyArIG9mZnNldDtcbiAgICAgICAgd2hpbGUgKHBvcyA8IHJhbmdlLmZyb20pIHtcbiAgICAgICAgICAgIGlmICghaW5kZXgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHRoaXMucmFuZ2VzWy0taW5kZXhdO1xuICAgICAgICAgICAgcG9zIC09IHJhbmdlLmZyb20gLSBuZXh0LnRvO1xuICAgICAgICAgICAgcmFuZ2UgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChhc3NvYyA8IDAgPyBwb3MgPiByYW5nZS50byA6IHBvcyA+PSByYW5nZS50bykge1xuICAgICAgICAgICAgaWYgKGluZGV4ID09IHRoaXMucmFuZ2VzLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHRoaXMucmFuZ2VzWysraW5kZXhdO1xuICAgICAgICAgICAgcG9zICs9IG5leHQuZnJvbSAtIHJhbmdlLnRvO1xuICAgICAgICAgICAgcmFuZ2UgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2xpcFBvcyhwb3MpIHtcbiAgICAgICAgaWYgKHBvcyA+PSB0aGlzLnJhbmdlLmZyb20gJiYgcG9zIDwgdGhpcy5yYW5nZS50bylcbiAgICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgICAgIGZvciAobGV0IHJhbmdlIG9mIHRoaXMucmFuZ2VzKVxuICAgICAgICAgICAgaWYgKHJhbmdlLnRvID4gcG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heChwb3MsIHJhbmdlLmZyb20pO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmQ7XG4gICAgfVxuICAgIC8qKlxuICAgIExvb2sgYXQgYSBjb2RlIHVuaXQgbmVhciB0aGUgc3RyZWFtIHBvc2l0aW9uLiBgLnBlZWsoMClgIGVxdWFsc1xuICAgIGAubmV4dGAsIGAucGVlaygtMSlgIGdpdmVzIHlvdSB0aGUgcHJldmlvdXMgY2hhcmFjdGVyLCBhbmQgc29cbiAgICBvbi5cbiAgICBcbiAgICBOb3RlIHRoYXQgbG9va2luZyBhcm91bmQgZHVyaW5nIHRva2VuaXppbmcgY3JlYXRlcyBkZXBlbmRlbmNpZXNcbiAgICBvbiBwb3RlbnRpYWxseSBmYXItYXdheSBjb250ZW50LCB3aGljaCBtYXkgcmVkdWNlIHRoZVxuICAgIGVmZmVjdGl2ZW5lc3MgaW5jcmVtZW50YWwgcGFyc2luZ1x1MjAxNHdoZW4gbG9va2luZyBmb3J3YXJkXHUyMDE0b3IgZXZlblxuICAgIGNhdXNlIGludmFsaWQgcmVwYXJzZXMgd2hlbiBsb29raW5nIGJhY2t3YXJkIG1vcmUgdGhhbiAyNSBjb2RlXG4gICAgdW5pdHMsIHNpbmNlIHRoZSBsaWJyYXJ5IGRvZXMgbm90IHRyYWNrIGxvb2tiZWhpbmQuXG4gICAgKi9cbiAgICBwZWVrKG9mZnNldCkge1xuICAgICAgICBsZXQgaWR4ID0gdGhpcy5jaHVua09mZiArIG9mZnNldCwgcG9zLCByZXN1bHQ7XG4gICAgICAgIGlmIChpZHggPj0gMCAmJiBpZHggPCB0aGlzLmNodW5rLmxlbmd0aCkge1xuICAgICAgICAgICAgcG9zID0gdGhpcy5wb3MgKyBvZmZzZXQ7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmNodW5rLmNoYXJDb2RlQXQoaWR4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCByZXNvbHZlZCA9IHRoaXMucmVzb2x2ZU9mZnNldChvZmZzZXQsIDEpO1xuICAgICAgICAgICAgaWYgKHJlc29sdmVkID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgcG9zID0gcmVzb2x2ZWQ7XG4gICAgICAgICAgICBpZiAocG9zID49IHRoaXMuY2h1bmsyUG9zICYmIHBvcyA8IHRoaXMuY2h1bmsyUG9zICsgdGhpcy5jaHVuazIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5jaHVuazIuY2hhckNvZGVBdChwb3MgLSB0aGlzLmNodW5rMlBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgaSA9IHRoaXMucmFuZ2VJbmRleCwgcmFuZ2UgPSB0aGlzLnJhbmdlO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyYW5nZS50byA8PSBwb3MpXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gdGhpcy5yYW5nZXNbKytpXTtcbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rMiA9IHRoaXMuaW5wdXQuY2h1bmsodGhpcy5jaHVuazJQb3MgPSBwb3MpO1xuICAgICAgICAgICAgICAgIGlmIChwb3MgKyB0aGlzLmNodW5rMi5sZW5ndGggPiByYW5nZS50bylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHVuazIgPSB0aGlzLmNodW5rMi5zbGljZSgwLCByYW5nZS50byAtIHBvcyk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5jaHVuazIuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zID49IHRoaXMudG9rZW4ubG9va0FoZWFkKVxuICAgICAgICAgICAgdGhpcy50b2tlbi5sb29rQWhlYWQgPSBwb3MgKyAxO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBBY2NlcHQgYSB0b2tlbi4gQnkgZGVmYXVsdCwgdGhlIGVuZCBvZiB0aGUgdG9rZW4gaXMgc2V0IHRvIHRoZVxuICAgIGN1cnJlbnQgc3RyZWFtIHBvc2l0aW9uLCBidXQgeW91IGNhbiBwYXNzIGFuIG9mZnNldCAocmVsYXRpdmUgdG9cbiAgICB0aGUgc3RyZWFtIHBvc2l0aW9uKSB0byBjaGFuZ2UgdGhhdC5cbiAgICAqL1xuICAgIGFjY2VwdFRva2VuKHRva2VuLCBlbmRPZmZzZXQgPSAwKSB7XG4gICAgICAgIGxldCBlbmQgPSBlbmRPZmZzZXQgPyB0aGlzLnJlc29sdmVPZmZzZXQoZW5kT2Zmc2V0LCAtMSkgOiB0aGlzLnBvcztcbiAgICAgICAgaWYgKGVuZCA9PSBudWxsIHx8IGVuZCA8IHRoaXMudG9rZW4uc3RhcnQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRva2VuIGVuZCBvdXQgb2YgYm91bmRzXCIpO1xuICAgICAgICB0aGlzLnRva2VuLnZhbHVlID0gdG9rZW47XG4gICAgICAgIHRoaXMudG9rZW4uZW5kID0gZW5kO1xuICAgIH1cbiAgICAvKipcbiAgICBBY2NlcHQgYSB0b2tlbiBlbmRpbmcgYXQgYSBzcGVjaWZpYyBnaXZlbiBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGFjY2VwdFRva2VuVG8odG9rZW4sIGVuZFBvcykge1xuICAgICAgICB0aGlzLnRva2VuLnZhbHVlID0gdG9rZW47XG4gICAgICAgIHRoaXMudG9rZW4uZW5kID0gZW5kUG9zO1xuICAgIH1cbiAgICBnZXRDaHVuaygpIHtcbiAgICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMuY2h1bmsyUG9zICYmIHRoaXMucG9zIDwgdGhpcy5jaHVuazJQb3MgKyB0aGlzLmNodW5rMi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCB7IGNodW5rLCBjaHVua1BvcyB9ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY2h1bmsgPSB0aGlzLmNodW5rMjtcbiAgICAgICAgICAgIHRoaXMuY2h1bmtQb3MgPSB0aGlzLmNodW5rMlBvcztcbiAgICAgICAgICAgIHRoaXMuY2h1bmsyID0gY2h1bms7XG4gICAgICAgICAgICB0aGlzLmNodW5rMlBvcyA9IGNodW5rUG9zO1xuICAgICAgICAgICAgdGhpcy5jaHVua09mZiA9IHRoaXMucG9zIC0gdGhpcy5jaHVua1BvcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2h1bmsyID0gdGhpcy5jaHVuaztcbiAgICAgICAgICAgIHRoaXMuY2h1bmsyUG9zID0gdGhpcy5jaHVua1BvcztcbiAgICAgICAgICAgIGxldCBuZXh0Q2h1bmsgPSB0aGlzLmlucHV0LmNodW5rKHRoaXMucG9zKTtcbiAgICAgICAgICAgIGxldCBlbmQgPSB0aGlzLnBvcyArIG5leHRDaHVuay5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLmNodW5rID0gZW5kID4gdGhpcy5yYW5nZS50byA/IG5leHRDaHVuay5zbGljZSgwLCB0aGlzLnJhbmdlLnRvIC0gdGhpcy5wb3MpIDogbmV4dENodW5rO1xuICAgICAgICAgICAgdGhpcy5jaHVua1BvcyA9IHRoaXMucG9zO1xuICAgICAgICAgICAgdGhpcy5jaHVua09mZiA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVhZE5leHQoKSB7XG4gICAgICAgIGlmICh0aGlzLmNodW5rT2ZmID49IHRoaXMuY2h1bmsubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmdldENodW5rKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jaHVua09mZiA9PSB0aGlzLmNodW5rLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0ID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCA9IHRoaXMuY2h1bmsuY2hhckNvZGVBdCh0aGlzLmNodW5rT2ZmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSB0aGUgc3RyZWFtIGZvcndhcmQgTiAoZGVmYXVsdHMgdG8gMSkgY29kZSB1bml0cy4gUmV0dXJuc1xuICAgIHRoZSBuZXcgdmFsdWUgb2YgW2BuZXh0YF0oI2xyLklucHV0U3RyZWFtLm5leHQpLlxuICAgICovXG4gICAgYWR2YW5jZShuID0gMSkge1xuICAgICAgICB0aGlzLmNodW5rT2ZmICs9IG47XG4gICAgICAgIHdoaWxlICh0aGlzLnBvcyArIG4gPj0gdGhpcy5yYW5nZS50bykge1xuICAgICAgICAgICAgaWYgKHRoaXMucmFuZ2VJbmRleCA9PSB0aGlzLnJhbmdlcy5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldERvbmUoKTtcbiAgICAgICAgICAgIG4gLT0gdGhpcy5yYW5nZS50byAtIHRoaXMucG9zO1xuICAgICAgICAgICAgdGhpcy5yYW5nZSA9IHRoaXMucmFuZ2VzWysrdGhpcy5yYW5nZUluZGV4XTtcbiAgICAgICAgICAgIHRoaXMucG9zID0gdGhpcy5yYW5nZS5mcm9tO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucG9zICs9IG47XG4gICAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLnRva2VuLmxvb2tBaGVhZClcbiAgICAgICAgICAgIHRoaXMudG9rZW4ubG9va0FoZWFkID0gdGhpcy5wb3MgKyAxO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFkTmV4dCgpO1xuICAgIH1cbiAgICBzZXREb25lKCkge1xuICAgICAgICB0aGlzLnBvcyA9IHRoaXMuY2h1bmtQb3MgPSB0aGlzLmVuZDtcbiAgICAgICAgdGhpcy5yYW5nZSA9IHRoaXMucmFuZ2VzW3RoaXMucmFuZ2VJbmRleCA9IHRoaXMucmFuZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICB0aGlzLmNodW5rID0gXCJcIjtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCA9IC0xO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJlc2V0KHBvcywgdG9rZW4pIHtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLnRva2VuID0gdG9rZW47XG4gICAgICAgICAgICB0b2tlbi5zdGFydCA9IHBvcztcbiAgICAgICAgICAgIHRva2VuLmxvb2tBaGVhZCA9IHBvcyArIDE7XG4gICAgICAgICAgICB0b2tlbi52YWx1ZSA9IHRva2VuLmV4dGVuZGVkID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRva2VuID0gbnVsbFRva2VuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvcyAhPSBwb3MpIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICAgICAgaWYgKHBvcyA9PSB0aGlzLmVuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RG9uZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKHBvcyA8IHRoaXMucmFuZ2UuZnJvbSlcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5yYW5nZXNbLS10aGlzLnJhbmdlSW5kZXhdO1xuICAgICAgICAgICAgd2hpbGUgKHBvcyA+PSB0aGlzLnJhbmdlLnRvKVxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2UgPSB0aGlzLnJhbmdlc1srK3RoaXMucmFuZ2VJbmRleF07XG4gICAgICAgICAgICBpZiAocG9zID49IHRoaXMuY2h1bmtQb3MgJiYgcG9zIDwgdGhpcy5jaHVua1BvcyArIHRoaXMuY2h1bmsubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaHVua09mZiA9IHBvcyAtIHRoaXMuY2h1bmtQb3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rT2ZmID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVhZE5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICByZWFkKGZyb20sIHRvKSB7XG4gICAgICAgIGlmIChmcm9tID49IHRoaXMuY2h1bmtQb3MgJiYgdG8gPD0gdGhpcy5jaHVua1BvcyArIHRoaXMuY2h1bmsubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2h1bmsuc2xpY2UoZnJvbSAtIHRoaXMuY2h1bmtQb3MsIHRvIC0gdGhpcy5jaHVua1Bvcyk7XG4gICAgICAgIGlmIChmcm9tID49IHRoaXMuY2h1bmsyUG9zICYmIHRvIDw9IHRoaXMuY2h1bmsyUG9zICsgdGhpcy5jaHVuazIubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2h1bmsyLnNsaWNlKGZyb20gLSB0aGlzLmNodW5rMlBvcywgdG8gLSB0aGlzLmNodW5rMlBvcyk7XG4gICAgICAgIGlmIChmcm9tID49IHRoaXMucmFuZ2UuZnJvbSAmJiB0byA8PSB0aGlzLnJhbmdlLnRvKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXQucmVhZChmcm9tLCB0byk7XG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgICAgICBmb3IgKGxldCByIG9mIHRoaXMucmFuZ2VzKSB7XG4gICAgICAgICAgICBpZiAoci5mcm9tID49IHRvKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKHIudG8gPiBmcm9tKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSB0aGlzLmlucHV0LnJlYWQoTWF0aC5tYXgoci5mcm9tLCBmcm9tKSwgTWF0aC5taW4oci50bywgdG8pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbi8qKlxuQGludGVybmFsXG4qL1xuY2xhc3MgVG9rZW5Hcm91cCB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgaWQpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cbiAgICB0b2tlbihpbnB1dCwgc3RhY2spIHtcbiAgICAgICAgbGV0IHsgcGFyc2VyIH0gPSBzdGFjay5wO1xuICAgICAgICByZWFkVG9rZW4odGhpcy5kYXRhLCBpbnB1dCwgc3RhY2ssIHRoaXMuaWQsIHBhcnNlci5kYXRhLCBwYXJzZXIudG9rZW5QcmVjVGFibGUpO1xuICAgIH1cbn1cblRva2VuR3JvdXAucHJvdG90eXBlLmNvbnRleHR1YWwgPSBUb2tlbkdyb3VwLnByb3RvdHlwZS5mYWxsYmFjayA9IFRva2VuR3JvdXAucHJvdG90eXBlLmV4dGVuZCA9IGZhbHNlO1xuLyoqXG5AaGlkZVxuKi9cbmNsYXNzIExvY2FsVG9rZW5Hcm91cCB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgcHJlY1RhYmxlLCBlbHNlVG9rZW4pIHtcbiAgICAgICAgdGhpcy5wcmVjVGFibGUgPSBwcmVjVGFibGU7XG4gICAgICAgIHRoaXMuZWxzZVRva2VuID0gZWxzZVRva2VuO1xuICAgICAgICB0aGlzLmRhdGEgPSB0eXBlb2YgZGF0YSA9PSBcInN0cmluZ1wiID8gZGVjb2RlQXJyYXkoZGF0YSkgOiBkYXRhO1xuICAgIH1cbiAgICB0b2tlbihpbnB1dCwgc3RhY2spIHtcbiAgICAgICAgbGV0IHN0YXJ0ID0gaW5wdXQucG9zLCBza2lwcGVkID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGF0RW9mID0gaW5wdXQubmV4dCA8IDAsIG5leHRQb3MgPSBpbnB1dC5yZXNvbHZlT2Zmc2V0KDEsIDEpO1xuICAgICAgICAgICAgcmVhZFRva2VuKHRoaXMuZGF0YSwgaW5wdXQsIHN0YWNrLCAwLCB0aGlzLmRhdGEsIHRoaXMucHJlY1RhYmxlKTtcbiAgICAgICAgICAgIGlmIChpbnB1dC50b2tlbi52YWx1ZSA+IC0xKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxzZVRva2VuID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCFhdEVvZilcbiAgICAgICAgICAgICAgICBza2lwcGVkKys7XG4gICAgICAgICAgICBpZiAobmV4dFBvcyA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaW5wdXQucmVzZXQobmV4dFBvcywgaW5wdXQudG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChza2lwcGVkKSB7XG4gICAgICAgICAgICBpbnB1dC5yZXNldChzdGFydCwgaW5wdXQudG9rZW4pO1xuICAgICAgICAgICAgaW5wdXQuYWNjZXB0VG9rZW4odGhpcy5lbHNlVG9rZW4sIHNraXBwZWQpO1xuICAgICAgICB9XG4gICAgfVxufVxuTG9jYWxUb2tlbkdyb3VwLnByb3RvdHlwZS5jb250ZXh0dWFsID0gVG9rZW5Hcm91cC5wcm90b3R5cGUuZmFsbGJhY2sgPSBUb2tlbkdyb3VwLnByb3RvdHlwZS5leHRlbmQgPSBmYWxzZTtcbi8qKlxuYEBleHRlcm5hbCB0b2tlbnNgIGRlY2xhcmF0aW9ucyBpbiB0aGUgZ3JhbW1hciBzaG91bGQgcmVzb2x2ZSB0b1xuYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiovXG5jbGFzcyBFeHRlcm5hbFRva2VuaXplciB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgdG9rZW5pemVyLiBUaGUgZmlyc3QgYXJndW1lbnQgaXMgdGhlIGZ1bmN0aW9uIHRoYXQsXG4gICAgZ2l2ZW4gYW4gaW5wdXQgc3RyZWFtLCBzY2FucyBmb3IgdGhlIHR5cGVzIG9mIHRva2VucyBpdFxuICAgIHJlY29nbml6ZXMgYXQgdGhlIHN0cmVhbSdzIHBvc2l0aW9uLCBhbmQgY2FsbHNcbiAgICBbYGFjY2VwdFRva2VuYF0oI2xyLklucHV0U3RyZWFtLmFjY2VwdFRva2VuKSB3aGVuIGl0IGZpbmRzXG4gICAgb25lLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b2tlbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5jb250ZXh0dWFsID0gISFvcHRpb25zLmNvbnRleHR1YWw7XG4gICAgICAgIHRoaXMuZmFsbGJhY2sgPSAhIW9wdGlvbnMuZmFsbGJhY2s7XG4gICAgICAgIHRoaXMuZXh0ZW5kID0gISFvcHRpb25zLmV4dGVuZDtcbiAgICB9XG59XG4vLyBUb2tlbml6ZXIgZGF0YSBpcyBzdG9yZWQgYSBiaWcgdWludDE2IGFycmF5IGNvbnRhaW5pbmcsIGZvciBlYWNoXG4vLyBzdGF0ZTpcbi8vXG4vLyAgLSBBIGdyb3VwIGJpdG1hc2ssIGluZGljYXRpbmcgd2hhdCB0b2tlbiBncm91cHMgYXJlIHJlYWNoYWJsZSBmcm9tXG4vLyAgICB0aGlzIHN0YXRlLCBzbyB0aGF0IHBhdGhzIHRoYXQgY2FuIG9ubHkgbGVhZCB0byB0b2tlbnMgbm90IGluXG4vLyAgICBhbnkgb2YgdGhlIGN1cnJlbnQgZ3JvdXBzIGNhbiBiZSBjdXQgb2ZmIGVhcmx5LlxuLy9cbi8vICAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgZW5kIG9mIHRoZSBzdGF0ZSdzIHNlcXVlbmNlIG9mIGFjY2VwdGluZ1xuLy8gICAgdG9rZW5zXG4vL1xuLy8gIC0gVGhlIG51bWJlciBvZiBvdXRnb2luZyBlZGdlcyBmb3IgdGhlIHN0YXRlXG4vL1xuLy8gIC0gVGhlIGFjY2VwdGluZyB0b2tlbnMsIGFzICh0b2tlbiBpZCwgZ3JvdXAgbWFzaykgcGFpcnNcbi8vXG4vLyAgLSBUaGUgb3V0Z29pbmcgZWRnZXMsIGFzIChzdGFydCBjaGFyYWN0ZXIsIGVuZCBjaGFyYWN0ZXIsIHN0YXRlXG4vLyAgICBpbmRleCkgdHJpcGxlcywgd2l0aCBlbmQgY2hhcmFjdGVyIGJlaW5nIGV4Y2x1c2l2ZVxuLy9cbi8vIFRoaXMgZnVuY3Rpb24gaW50ZXJwcmV0cyB0aGF0IGRhdGEsIHJ1bm5pbmcgdGhyb3VnaCBhIHN0cmVhbSBhc1xuLy8gbG9uZyBhcyBuZXcgc3RhdGVzIHdpdGggdGhlIGEgbWF0Y2hpbmcgZ3JvdXAgbWFzayBjYW4gYmUgcmVhY2hlZCxcbi8vIGFuZCB1cGRhdGluZyBgaW5wdXQudG9rZW5gIHdoZW4gaXQgbWF0Y2hlcyBhIHRva2VuLlxuZnVuY3Rpb24gcmVhZFRva2VuKGRhdGEsIGlucHV0LCBzdGFjaywgZ3JvdXAsIHByZWNUYWJsZSwgcHJlY09mZnNldCkge1xuICAgIGxldCBzdGF0ZSA9IDAsIGdyb3VwTWFzayA9IDEgPDwgZ3JvdXAsIHsgZGlhbGVjdCB9ID0gc3RhY2sucC5wYXJzZXI7XG4gICAgc2NhbjogZm9yICg7Oykge1xuICAgICAgICBpZiAoKGdyb3VwTWFzayAmIGRhdGFbc3RhdGVdKSA9PSAwKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGxldCBhY2NFbmQgPSBkYXRhW3N0YXRlICsgMV07XG4gICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBzdGF0ZSBjYW4gbGVhZCB0byBhIHRva2VuIGluIHRoZSBjdXJyZW50IGdyb3VwXG4gICAgICAgIC8vIEFjY2VwdCB0b2tlbnMgaW4gdGhpcyBzdGF0ZSwgcG9zc2libHkgb3ZlcndyaXRpbmdcbiAgICAgICAgLy8gbG93ZXItcHJlY2VkZW5jZSAvIHNob3J0ZXIgdG9rZW5zXG4gICAgICAgIGZvciAobGV0IGkgPSBzdGF0ZSArIDM7IGkgPCBhY2NFbmQ7IGkgKz0gMilcbiAgICAgICAgICAgIGlmICgoZGF0YVtpICsgMV0gJiBncm91cE1hc2spID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCB0ZXJtID0gZGF0YVtpXTtcbiAgICAgICAgICAgICAgICBpZiAoZGlhbGVjdC5hbGxvd3ModGVybSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKGlucHV0LnRva2VuLnZhbHVlID09IC0xIHx8IGlucHV0LnRva2VuLnZhbHVlID09IHRlcm0gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJyaWRlcyh0ZXJtLCBpbnB1dC50b2tlbi52YWx1ZSwgcHJlY1RhYmxlLCBwcmVjT2Zmc2V0KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuYWNjZXB0VG9rZW4odGVybSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgbGV0IG5leHQgPSBpbnB1dC5uZXh0LCBsb3cgPSAwLCBoaWdoID0gZGF0YVtzdGF0ZSArIDJdO1xuICAgICAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIEVPRlxuICAgICAgICBpZiAoaW5wdXQubmV4dCA8IDAgJiYgaGlnaCA+IGxvdyAmJiBkYXRhW2FjY0VuZCArIGhpZ2ggKiAzIC0gM10gPT0gNjU1MzUgLyogU2VxLkVuZCAqLykge1xuICAgICAgICAgICAgc3RhdGUgPSBkYXRhW2FjY0VuZCArIGhpZ2ggKiAzIC0gMV07XG4gICAgICAgICAgICBjb250aW51ZSBzY2FuO1xuICAgICAgICB9XG4gICAgICAgIC8vIERvIGEgYmluYXJ5IHNlYXJjaCBvbiB0aGUgc3RhdGUncyBlZGdlc1xuICAgICAgICBmb3IgKDsgbG93IDwgaGlnaDspIHtcbiAgICAgICAgICAgIGxldCBtaWQgPSAobG93ICsgaGlnaCkgPj4gMTtcbiAgICAgICAgICAgIGxldCBpbmRleCA9IGFjY0VuZCArIG1pZCArIChtaWQgPDwgMSk7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IGRhdGFbaW5kZXhdLCB0byA9IGRhdGFbaW5kZXggKyAxXSB8fCAweDEwMDAwO1xuICAgICAgICAgICAgaWYgKG5leHQgPCBmcm9tKVxuICAgICAgICAgICAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICAgICAgICBlbHNlIGlmIChuZXh0ID49IHRvKVxuICAgICAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IGRhdGFbaW5kZXggKyAyXTtcbiAgICAgICAgICAgICAgICBpbnB1dC5hZHZhbmNlKCk7XG4gICAgICAgICAgICAgICAgY29udGludWUgc2NhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kT2Zmc2V0KGRhdGEsIHN0YXJ0LCB0ZXJtKSB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0LCBuZXh0OyAobmV4dCA9IGRhdGFbaV0pICE9IDY1NTM1IC8qIFNlcS5FbmQgKi87IGkrKylcbiAgICAgICAgaWYgKG5leHQgPT0gdGVybSlcbiAgICAgICAgICAgIHJldHVybiBpIC0gc3RhcnQ7XG4gICAgcmV0dXJuIC0xO1xufVxuZnVuY3Rpb24gb3ZlcnJpZGVzKHRva2VuLCBwcmV2LCB0YWJsZURhdGEsIHRhYmxlT2Zmc2V0KSB7XG4gICAgbGV0IGlQcmV2ID0gZmluZE9mZnNldCh0YWJsZURhdGEsIHRhYmxlT2Zmc2V0LCBwcmV2KTtcbiAgICByZXR1cm4gaVByZXYgPCAwIHx8IGZpbmRPZmZzZXQodGFibGVEYXRhLCB0YWJsZU9mZnNldCwgdG9rZW4pIDwgaVByZXY7XG59XG5cbi8vIEVudmlyb25tZW50IHZhcmlhYmxlIHVzZWQgdG8gY29udHJvbCBjb25zb2xlIG91dHB1dFxuY29uc3QgdmVyYm9zZSA9IHR5cGVvZiBwcm9jZXNzICE9IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnYgJiYgL1xcYnBhcnNlXFxiLy50ZXN0KHByb2Nlc3MuZW52LkxPRyk7XG5sZXQgc3RhY2tJRHMgPSBudWxsO1xuZnVuY3Rpb24gY3V0QXQodHJlZSwgcG9zLCBzaWRlKSB7XG4gICAgbGV0IGN1cnNvciA9IHRyZWUuY3Vyc29yKEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpO1xuICAgIGN1cnNvci5tb3ZlVG8ocG9zKTtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGlmICghKHNpZGUgPCAwID8gY3Vyc29yLmNoaWxkQmVmb3JlKHBvcykgOiBjdXJzb3IuY2hpbGRBZnRlcihwb3MpKSlcbiAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICBpZiAoKHNpZGUgPCAwID8gY3Vyc29yLnRvIDwgcG9zIDogY3Vyc29yLmZyb20gPiBwb3MpICYmICFjdXJzb3IudHlwZS5pc0Vycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2lkZSA8IDAgPyBNYXRoLm1heCgwLCBNYXRoLm1pbihjdXJzb3IudG8gLSAxLCBwb3MgLSAyNSAvKiBMb29rYWhlYWQuTWFyZ2luICovKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogTWF0aC5taW4odHJlZS5sZW5ndGgsIE1hdGgubWF4KGN1cnNvci5mcm9tICsgMSwgcG9zICsgMjUgLyogTG9va2FoZWFkLk1hcmdpbiAqLykpO1xuICAgICAgICAgICAgICAgIGlmIChzaWRlIDwgMCA/IGN1cnNvci5wcmV2U2libGluZygpIDogY3Vyc29yLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmICghY3Vyc29yLnBhcmVudCgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2lkZSA8IDAgPyAwIDogdHJlZS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgRnJhZ21lbnRDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKGZyYWdtZW50cywgbm9kZVNldCkge1xuICAgICAgICB0aGlzLmZyYWdtZW50cyA9IGZyYWdtZW50cztcbiAgICAgICAgdGhpcy5ub2RlU2V0ID0gbm9kZVNldDtcbiAgICAgICAgdGhpcy5pID0gMDtcbiAgICAgICAgdGhpcy5mcmFnbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuc2FmZUZyb20gPSAtMTtcbiAgICAgICAgdGhpcy5zYWZlVG8gPSAtMTtcbiAgICAgICAgdGhpcy50cmVlcyA9IFtdO1xuICAgICAgICB0aGlzLnN0YXJ0ID0gW107XG4gICAgICAgIHRoaXMuaW5kZXggPSBbXTtcbiAgICAgICAgdGhpcy5uZXh0RnJhZ21lbnQoKTtcbiAgICB9XG4gICAgbmV4dEZyYWdtZW50KCkge1xuICAgICAgICBsZXQgZnIgPSB0aGlzLmZyYWdtZW50ID0gdGhpcy5pID09IHRoaXMuZnJhZ21lbnRzLmxlbmd0aCA/IG51bGwgOiB0aGlzLmZyYWdtZW50c1t0aGlzLmkrK107XG4gICAgICAgIGlmIChmcikge1xuICAgICAgICAgICAgdGhpcy5zYWZlRnJvbSA9IGZyLm9wZW5TdGFydCA/IGN1dEF0KGZyLnRyZWUsIGZyLmZyb20gKyBmci5vZmZzZXQsIDEpIC0gZnIub2Zmc2V0IDogZnIuZnJvbTtcbiAgICAgICAgICAgIHRoaXMuc2FmZVRvID0gZnIub3BlbkVuZCA/IGN1dEF0KGZyLnRyZWUsIGZyLnRvICsgZnIub2Zmc2V0LCAtMSkgLSBmci5vZmZzZXQgOiBmci50bztcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLnRyZWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJlZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydC5wb3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4LnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmVlcy5wdXNoKGZyLnRyZWUpO1xuICAgICAgICAgICAgdGhpcy5zdGFydC5wdXNoKC1mci5vZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5pbmRleC5wdXNoKDApO1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhcnQgPSB0aGlzLnNhZmVGcm9tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhcnQgPSAxZTk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gYHBvc2AgbXVzdCBiZSA+PSBhbnkgcHJldmlvdXNseSBnaXZlbiBgcG9zYCBmb3IgdGhpcyBjdXJzb3JcbiAgICBub2RlQXQocG9zKSB7XG4gICAgICAgIGlmIChwb3MgPCB0aGlzLm5leHRTdGFydClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB3aGlsZSAodGhpcy5mcmFnbWVudCAmJiB0aGlzLnNhZmVUbyA8PSBwb3MpXG4gICAgICAgICAgICB0aGlzLm5leHRGcmFnbWVudCgpO1xuICAgICAgICBpZiAoIXRoaXMuZnJhZ21lbnQpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGxhc3QgPSB0aGlzLnRyZWVzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBpZiAobGFzdCA8IDApIHsgLy8gRW5kIG9mIHRyZWVcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRGcmFnbWVudCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRvcCA9IHRoaXMudHJlZXNbbGFzdF0sIGluZGV4ID0gdGhpcy5pbmRleFtsYXN0XTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PSB0b3AuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmVlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0LnBvcCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgucG9wKCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHRvcC5jaGlsZHJlbltpbmRleF07XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnN0YXJ0W2xhc3RdICsgdG9wLnBvc2l0aW9uc1tpbmRleF07XG4gICAgICAgICAgICBpZiAoc3RhcnQgPiBwb3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGFydCA9IHN0YXJ0O1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5leHQgaW5zdGFuY2VvZiBUcmVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID09IHBvcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnQgPCB0aGlzLnNhZmVGcm9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlbmQgPSBzdGFydCArIG5leHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW5kIDw9IHRoaXMuc2FmZVRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbG9va0FoZWFkID0gbmV4dC5wcm9wKE5vZGVQcm9wLmxvb2tBaGVhZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxvb2tBaGVhZCB8fCBlbmQgKyBsb29rQWhlYWQgPCB0aGlzLmZyYWdtZW50LnRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhbbGFzdF0rKztcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnQgKyBuZXh0Lmxlbmd0aCA+PSBNYXRoLm1heCh0aGlzLnNhZmVGcm9tLCBwb3MpKSB7IC8vIEVudGVyIHRoaXMgbm9kZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVzLnB1c2gobmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQucHVzaChzdGFydCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgucHVzaCgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4W2xhc3RdKys7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhcnQgPSBzdGFydCArIG5leHQubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgVG9rZW5DYWNoZSB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyLCBzdHJlYW0pIHtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSBzdHJlYW07XG4gICAgICAgIHRoaXMudG9rZW5zID0gW107XG4gICAgICAgIHRoaXMubWFpblRva2VuID0gbnVsbDtcbiAgICAgICAgdGhpcy5hY3Rpb25zID0gW107XG4gICAgICAgIHRoaXMudG9rZW5zID0gcGFyc2VyLnRva2VuaXplcnMubWFwKF8gPT4gbmV3IENhY2hlZFRva2VuKTtcbiAgICB9XG4gICAgZ2V0QWN0aW9ucyhzdGFjaykge1xuICAgICAgICBsZXQgYWN0aW9uSW5kZXggPSAwO1xuICAgICAgICBsZXQgbWFpbiA9IG51bGw7XG4gICAgICAgIGxldCB7IHBhcnNlciB9ID0gc3RhY2sucCwgeyB0b2tlbml6ZXJzIH0gPSBwYXJzZXI7XG4gICAgICAgIGxldCBtYXNrID0gcGFyc2VyLnN0YXRlU2xvdChzdGFjay5zdGF0ZSwgMyAvKiBQYXJzZVN0YXRlLlRva2VuaXplck1hc2sgKi8pO1xuICAgICAgICBsZXQgY29udGV4dCA9IHN0YWNrLmN1ckNvbnRleHQgPyBzdGFjay5jdXJDb250ZXh0Lmhhc2ggOiAwO1xuICAgICAgICBsZXQgbG9va0FoZWFkID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b2tlbml6ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoKCgxIDw8IGkpICYgbWFzaykgPT0gMClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGxldCB0b2tlbml6ZXIgPSB0b2tlbml6ZXJzW2ldLCB0b2tlbiA9IHRoaXMudG9rZW5zW2ldO1xuICAgICAgICAgICAgaWYgKG1haW4gJiYgIXRva2VuaXplci5mYWxsYmFjaylcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmICh0b2tlbml6ZXIuY29udGV4dHVhbCB8fCB0b2tlbi5zdGFydCAhPSBzdGFjay5wb3MgfHwgdG9rZW4ubWFzayAhPSBtYXNrIHx8IHRva2VuLmNvbnRleHQgIT0gY29udGV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FjaGVkVG9rZW4odG9rZW4sIHRva2VuaXplciwgc3RhY2spO1xuICAgICAgICAgICAgICAgIHRva2VuLm1hc2sgPSBtYXNrO1xuICAgICAgICAgICAgICAgIHRva2VuLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRva2VuLmxvb2tBaGVhZCA+IHRva2VuLmVuZCArIDI1IC8qIExvb2thaGVhZC5NYXJnaW4gKi8pXG4gICAgICAgICAgICAgICAgbG9va0FoZWFkID0gTWF0aC5tYXgodG9rZW4ubG9va0FoZWFkLCBsb29rQWhlYWQpO1xuICAgICAgICAgICAgaWYgKHRva2VuLnZhbHVlICE9IDAgLyogVGVybS5FcnIgKi8pIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnRJbmRleCA9IGFjdGlvbkluZGV4O1xuICAgICAgICAgICAgICAgIGlmICh0b2tlbi5leHRlbmRlZCA+IC0xKVxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25JbmRleCA9IHRoaXMuYWRkQWN0aW9ucyhzdGFjaywgdG9rZW4uZXh0ZW5kZWQsIHRva2VuLmVuZCwgYWN0aW9uSW5kZXgpO1xuICAgICAgICAgICAgICAgIGFjdGlvbkluZGV4ID0gdGhpcy5hZGRBY3Rpb25zKHN0YWNrLCB0b2tlbi52YWx1ZSwgdG9rZW4uZW5kLCBhY3Rpb25JbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbml6ZXIuZXh0ZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIG1haW4gPSB0b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbkluZGV4ID4gc3RhcnRJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGhpcy5hY3Rpb25zLmxlbmd0aCA+IGFjdGlvbkluZGV4KVxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zLnBvcCgpO1xuICAgICAgICBpZiAobG9va0FoZWFkKVxuICAgICAgICAgICAgc3RhY2suc2V0TG9va0FoZWFkKGxvb2tBaGVhZCk7XG4gICAgICAgIGlmICghbWFpbiAmJiBzdGFjay5wb3MgPT0gdGhpcy5zdHJlYW0uZW5kKSB7XG4gICAgICAgICAgICBtYWluID0gbmV3IENhY2hlZFRva2VuO1xuICAgICAgICAgICAgbWFpbi52YWx1ZSA9IHN0YWNrLnAucGFyc2VyLmVvZlRlcm07XG4gICAgICAgICAgICBtYWluLnN0YXJ0ID0gbWFpbi5lbmQgPSBzdGFjay5wb3M7XG4gICAgICAgICAgICBhY3Rpb25JbmRleCA9IHRoaXMuYWRkQWN0aW9ucyhzdGFjaywgbWFpbi52YWx1ZSwgbWFpbi5lbmQsIGFjdGlvbkluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1haW5Ub2tlbiA9IG1haW47XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbnM7XG4gICAgfVxuICAgIGdldE1haW5Ub2tlbihzdGFjaykge1xuICAgICAgICBpZiAodGhpcy5tYWluVG9rZW4pXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYWluVG9rZW47XG4gICAgICAgIGxldCBtYWluID0gbmV3IENhY2hlZFRva2VuLCB7IHBvcywgcCB9ID0gc3RhY2s7XG4gICAgICAgIG1haW4uc3RhcnQgPSBwb3M7XG4gICAgICAgIG1haW4uZW5kID0gTWF0aC5taW4ocG9zICsgMSwgcC5zdHJlYW0uZW5kKTtcbiAgICAgICAgbWFpbi52YWx1ZSA9IHBvcyA9PSBwLnN0cmVhbS5lbmQgPyBwLnBhcnNlci5lb2ZUZXJtIDogMCAvKiBUZXJtLkVyciAqLztcbiAgICAgICAgcmV0dXJuIG1haW47XG4gICAgfVxuICAgIHVwZGF0ZUNhY2hlZFRva2VuKHRva2VuLCB0b2tlbml6ZXIsIHN0YWNrKSB7XG4gICAgICAgIGxldCBzdGFydCA9IHRoaXMuc3RyZWFtLmNsaXBQb3Moc3RhY2sucG9zKTtcbiAgICAgICAgdG9rZW5pemVyLnRva2VuKHRoaXMuc3RyZWFtLnJlc2V0KHN0YXJ0LCB0b2tlbiksIHN0YWNrKTtcbiAgICAgICAgaWYgKHRva2VuLnZhbHVlID4gLTEpIHtcbiAgICAgICAgICAgIGxldCB7IHBhcnNlciB9ID0gc3RhY2sucDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyc2VyLnNwZWNpYWxpemVkLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIGlmIChwYXJzZXIuc3BlY2lhbGl6ZWRbaV0gPT0gdG9rZW4udmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHBhcnNlci5zcGVjaWFsaXplcnNbaV0odGhpcy5zdHJlYW0ucmVhZCh0b2tlbi5zdGFydCwgdG9rZW4uZW5kKSwgc3RhY2spO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID49IDAgJiYgc3RhY2sucC5wYXJzZXIuZGlhbGVjdC5hbGxvd3MocmVzdWx0ID4+IDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHJlc3VsdCAmIDEpID09IDAgLyogU3BlY2lhbGl6ZS5TcGVjaWFsaXplICovKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuLnZhbHVlID0gcmVzdWx0ID4+IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4uZXh0ZW5kZWQgPSByZXN1bHQgPj4gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9rZW4udmFsdWUgPSAwIC8qIFRlcm0uRXJyICovO1xuICAgICAgICAgICAgdG9rZW4uZW5kID0gdGhpcy5zdHJlYW0uY2xpcFBvcyhzdGFydCArIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1dEFjdGlvbihhY3Rpb24sIHRva2VuLCBlbmQsIGluZGV4KSB7XG4gICAgICAgIC8vIERvbid0IGFkZCBkdXBsaWNhdGUgYWN0aW9uc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGV4OyBpICs9IDMpXG4gICAgICAgICAgICBpZiAodGhpcy5hY3Rpb25zW2ldID09IGFjdGlvbilcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIHRoaXMuYWN0aW9uc1tpbmRleCsrXSA9IGFjdGlvbjtcbiAgICAgICAgdGhpcy5hY3Rpb25zW2luZGV4KytdID0gdG9rZW47XG4gICAgICAgIHRoaXMuYWN0aW9uc1tpbmRleCsrXSA9IGVuZDtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgICBhZGRBY3Rpb25zKHN0YWNrLCB0b2tlbiwgZW5kLCBpbmRleCkge1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gc3RhY2ssIHsgcGFyc2VyIH0gPSBzdGFjay5wLCB7IGRhdGEgfSA9IHBhcnNlcjtcbiAgICAgICAgZm9yIChsZXQgc2V0ID0gMDsgc2V0IDwgMjsgc2V0KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBwYXJzZXIuc3RhdGVTbG90KHN0YXRlLCBzZXQgPyAyIC8qIFBhcnNlU3RhdGUuU2tpcCAqLyA6IDEgLyogUGFyc2VTdGF0ZS5BY3Rpb25zICovKTs7IGkgKz0gMykge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhW2ldID09IDY1NTM1IC8qIFNlcS5FbmQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaSArIDFdID09IDEgLyogU2VxLk5leHQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBwYWlyKGRhdGEsIGkgKyAyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSAwICYmIGRhdGFbaSArIDFdID09IDIgLyogU2VxLk90aGVyICovKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5wdXRBY3Rpb24ocGFpcihkYXRhLCBpICsgMiksIHRva2VuLCBlbmQsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhW2ldID09IHRva2VuKVxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMucHV0QWN0aW9uKHBhaXIoZGF0YSwgaSArIDEpLCB0b2tlbiwgZW5kLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbn1cbmNsYXNzIFBhcnNlIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJzZXIsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgdGhpcy5yZWNvdmVyaW5nID0gMDtcbiAgICAgICAgdGhpcy5uZXh0U3RhY2tJRCA9IDB4MjY1NDsgLy8gXHUyNjU0LCBcdTI2NTUsIFx1MjY1NiwgXHUyNjU3LCBcdTI2NTgsIFx1MjY1OSwgXHUyNjYwLCBcdTI2NjEsIFx1MjY2MiwgXHUyNjYzLCBcdTI2NjQsIFx1MjY2NSwgXHUyNjY2LCBcdTI2NjdcbiAgICAgICAgdGhpcy5taW5TdGFja1BvcyA9IDA7XG4gICAgICAgIHRoaXMucmV1c2VkID0gW107XG4gICAgICAgIHRoaXMuc3RvcHBlZEF0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0QmlnUmVkdWN0aW9uU3RhcnQgPSAtMTtcbiAgICAgICAgdGhpcy5sYXN0QmlnUmVkdWN0aW9uU2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuYmlnUmVkdWN0aW9uQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnN0cmVhbSA9IG5ldyBJbnB1dFN0cmVhbShpbnB1dCwgcmFuZ2VzKTtcbiAgICAgICAgdGhpcy50b2tlbnMgPSBuZXcgVG9rZW5DYWNoZShwYXJzZXIsIHRoaXMuc3RyZWFtKTtcbiAgICAgICAgdGhpcy50b3BUZXJtID0gcGFyc2VyLnRvcFsxXTtcbiAgICAgICAgbGV0IHsgZnJvbSB9ID0gcmFuZ2VzWzBdO1xuICAgICAgICB0aGlzLnN0YWNrcyA9IFtTdGFjay5zdGFydCh0aGlzLCBwYXJzZXIudG9wWzBdLCBmcm9tKV07XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzLmxlbmd0aCAmJiB0aGlzLnN0cmVhbS5lbmQgLSBmcm9tID4gcGFyc2VyLmJ1ZmZlckxlbmd0aCAqIDRcbiAgICAgICAgICAgID8gbmV3IEZyYWdtZW50Q3Vyc29yKGZyYWdtZW50cywgcGFyc2VyLm5vZGVTZXQpIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IHBhcnNlZFBvcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluU3RhY2tQb3M7XG4gICAgfVxuICAgIC8vIE1vdmUgdGhlIHBhcnNlciBmb3J3YXJkLiBUaGlzIHdpbGwgcHJvY2VzcyBhbGwgcGFyc2Ugc3RhY2tzIGF0XG4gICAgLy8gYHRoaXMucG9zYCBhbmQgdHJ5IHRvIGFkdmFuY2UgdGhlbSB0byBhIGZ1cnRoZXIgcG9zaXRpb24uIElmIG5vXG4gICAgLy8gc3RhY2sgZm9yIHN1Y2ggYSBwb3NpdGlvbiBpcyBmb3VuZCwgaXQnbGwgc3RhcnQgZXJyb3ItcmVjb3ZlcnkuXG4gICAgLy9cbiAgICAvLyBXaGVuIHRoZSBwYXJzZSBpcyBmaW5pc2hlZCwgdGhpcyB3aWxsIHJldHVybiBhIHN5bnRheCB0cmVlLiBXaGVuXG4gICAgLy8gbm90LCBpdCByZXR1cm5zIGBudWxsYC5cbiAgICBhZHZhbmNlKCkge1xuICAgICAgICBsZXQgc3RhY2tzID0gdGhpcy5zdGFja3MsIHBvcyA9IHRoaXMubWluU3RhY2tQb3M7XG4gICAgICAgIC8vIFRoaXMgd2lsbCBob2xkIHN0YWNrcyBiZXlvbmQgYHBvc2AuXG4gICAgICAgIGxldCBuZXdTdGFja3MgPSB0aGlzLnN0YWNrcyA9IFtdO1xuICAgICAgICBsZXQgc3RvcHBlZCwgc3RvcHBlZFRva2VucztcbiAgICAgICAgLy8gSWYgYSBsYXJnZSBhbW91bnQgb2YgcmVkdWN0aW9ucyBoYXBwZW5lZCB3aXRoIHRoZSBzYW1lIHN0YXJ0XG4gICAgICAgIC8vIHBvc2l0aW9uLCBmb3JjZSB0aGUgc3RhY2sgb3V0IG9mIHRoYXQgcHJvZHVjdGlvbiBpbiBvcmRlciB0b1xuICAgICAgICAvLyBhdm9pZCBjcmVhdGluZyBhIHRyZWUgdG9vIGRlZXAgdG8gcmVjdXJzZSB0aHJvdWdoLlxuICAgICAgICAvLyAoVGhpcyBpcyBhbiB1Z2x5IGtsdWRnZSwgYmVjYXVzZSB1bmZvcnR1bmF0ZWx5IHRoZXJlIGlzIG5vXG4gICAgICAgIC8vIHN0cmFpZ2h0Zm9yd2FyZCwgY2hlYXAgd2F5IHRvIGNoZWNrIGZvciB0aGlzIGhhcHBlbmluZywgZHVlIHRvXG4gICAgICAgIC8vIHRoZSBoaXN0b3J5IG9mIHJlZHVjdGlvbnMgb25seSBiZWluZyBhdmFpbGFibGUgaW4gYW5cbiAgICAgICAgLy8gZXhwZW5zaXZlLXRvLWFjY2VzcyBmb3JtYXQgaW4gdGhlIHN0YWNrIGJ1ZmZlcnMuKVxuICAgICAgICBpZiAodGhpcy5iaWdSZWR1Y3Rpb25Db3VudCA+IDMwMCAvKiBSZWMuTWF4TGVmdEFzc29jaWF0aXZlUmVkdWN0aW9uQ291bnQgKi8gJiYgc3RhY2tzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICBsZXQgW3NdID0gc3RhY2tzO1xuICAgICAgICAgICAgd2hpbGUgKHMuZm9yY2VSZWR1Y2UoKSAmJiBzLnN0YWNrLmxlbmd0aCAmJiBzLnN0YWNrW3Muc3RhY2subGVuZ3RoIC0gMl0gPj0gdGhpcy5sYXN0QmlnUmVkdWN0aW9uU3RhcnQpIHsgfVxuICAgICAgICAgICAgdGhpcy5iaWdSZWR1Y3Rpb25Db3VudCA9IHRoaXMubGFzdEJpZ1JlZHVjdGlvblNpemUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIEtlZXAgYWR2YW5jaW5nIGFueSBzdGFja3MgYXQgYHBvc2AgdW50aWwgdGhleSBlaXRoZXIgbW92ZVxuICAgICAgICAvLyBmb3J3YXJkIG9yIGNhbid0IGJlIGFkdmFuY2VkLiBHYXRoZXIgc3RhY2tzIHRoYXQgY2FuJ3QgYmVcbiAgICAgICAgLy8gYWR2YW5jZWQgZnVydGhlciBpbiBgc3RvcHBlZGAuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhY2sgPSBzdGFja3NbaV07XG4gICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b2tlbnMubWFpblRva2VuID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoc3RhY2sucG9zID4gcG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1N0YWNrcy5wdXNoKHN0YWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hZHZhbmNlU3RhY2soc3RhY2ssIG5ld1N0YWNrcywgc3RhY2tzKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcHBlZCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcHBlZFRva2VucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0b3BwZWQucHVzaChzdGFjayk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0b2sgPSB0aGlzLnRva2Vucy5nZXRNYWluVG9rZW4oc3RhY2spO1xuICAgICAgICAgICAgICAgICAgICBzdG9wcGVkVG9rZW5zLnB1c2godG9rLnZhbHVlLCB0b2suZW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFuZXdTdGFja3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgZmluaXNoZWQgPSBzdG9wcGVkICYmIGZpbmRGaW5pc2hlZChzdG9wcGVkKTtcbiAgICAgICAgICAgIGlmIChmaW5pc2hlZCkge1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZpbmlzaCB3aXRoIFwiICsgdGhpcy5zdGFja0lEKGZpbmlzaGVkKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhY2tUb1RyZWUoZmluaXNoZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyc2VyLnN0cmljdCkge1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlICYmIHN0b3BwZWQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3R1Y2sgd2l0aCB0b2tlbiBcIiArICh0aGlzLnRva2Vucy5tYWluVG9rZW4gPyB0aGlzLnBhcnNlci5nZXROYW1lKHRoaXMudG9rZW5zLm1haW5Ub2tlbi52YWx1ZSkgOiBcIm5vbmVcIikpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIk5vIHBhcnNlIGF0IFwiICsgcG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5yZWNvdmVyaW5nKVxuICAgICAgICAgICAgICAgIHRoaXMucmVjb3ZlcmluZyA9IDUgLyogUmVjLkRpc3RhbmNlICovO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlY292ZXJpbmcgJiYgc3RvcHBlZCkge1xuICAgICAgICAgICAgbGV0IGZpbmlzaGVkID0gdGhpcy5zdG9wcGVkQXQgIT0gbnVsbCAmJiBzdG9wcGVkWzBdLnBvcyA+IHRoaXMuc3RvcHBlZEF0ID8gc3RvcHBlZFswXVxuICAgICAgICAgICAgICAgIDogdGhpcy5ydW5SZWNvdmVyeShzdG9wcGVkLCBzdG9wcGVkVG9rZW5zLCBuZXdTdGFja3MpO1xuICAgICAgICAgICAgaWYgKGZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZlcmJvc2UpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRm9yY2UtZmluaXNoIFwiICsgdGhpcy5zdGFja0lEKGZpbmlzaGVkKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhY2tUb1RyZWUoZmluaXNoZWQuZm9yY2VBbGwoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVjb3ZlcmluZykge1xuICAgICAgICAgICAgbGV0IG1heFJlbWFpbmluZyA9IHRoaXMucmVjb3ZlcmluZyA9PSAxID8gMSA6IHRoaXMucmVjb3ZlcmluZyAqIDMgLyogUmVjLk1heFJlbWFpbmluZ1BlclN0ZXAgKi87XG4gICAgICAgICAgICBpZiAobmV3U3RhY2tzLmxlbmd0aCA+IG1heFJlbWFpbmluZykge1xuICAgICAgICAgICAgICAgIG5ld1N0YWNrcy5zb3J0KChhLCBiKSA9PiBiLnNjb3JlIC0gYS5zY29yZSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld1N0YWNrcy5sZW5ndGggPiBtYXhSZW1haW5pbmcpXG4gICAgICAgICAgICAgICAgICAgIG5ld1N0YWNrcy5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdTdGFja3Muc29tZShzID0+IHMucmVkdWNlUG9zID4gcG9zKSlcbiAgICAgICAgICAgICAgICB0aGlzLnJlY292ZXJpbmctLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChuZXdTdGFja3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgLy8gUHJ1bmUgc3RhY2tzIHRoYXQgYXJlIGluIHRoZSBzYW1lIHN0YXRlLCBvciB0aGF0IGhhdmUgYmVlblxuICAgICAgICAgICAgLy8gcnVubmluZyB3aXRob3V0IHNwbGl0dGluZyBmb3IgYSB3aGlsZSwgdG8gYXZvaWQgZ2V0dGluZyBzdHVja1xuICAgICAgICAgICAgLy8gd2l0aCBtdWx0aXBsZSBzdWNjZXNzZnVsIHN0YWNrcyBydW5uaW5nIGVuZGxlc3NseSBvbi5cbiAgICAgICAgICAgIG91dGVyOiBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1N0YWNrcy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhY2sgPSBuZXdTdGFja3NbaV07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbmV3U3RhY2tzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvdGhlciA9IG5ld1N0YWNrc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YWNrLnNhbWVTdGF0ZShvdGhlcikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLmJ1ZmZlci5sZW5ndGggPiA1MDAgLyogUmVjLk1pbkJ1ZmZlckxlbmd0aFBydW5lICovICYmIG90aGVyLmJ1ZmZlci5sZW5ndGggPiA1MDAgLyogUmVjLk1pbkJ1ZmZlckxlbmd0aFBydW5lICovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChzdGFjay5zY29yZSAtIG90aGVyLnNjb3JlKSB8fCAoc3RhY2suYnVmZmVyLmxlbmd0aCAtIG90aGVyLmJ1ZmZlci5sZW5ndGgpKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGFja3Muc3BsaWNlKGotLSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGFja3Muc3BsaWNlKGktLSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgb3V0ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3U3RhY2tzLmxlbmd0aCA+IDEyIC8qIFJlYy5NYXhTdGFja0NvdW50ICovKSB7XG4gICAgICAgICAgICAgICAgbmV3U3RhY2tzLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKTtcbiAgICAgICAgICAgICAgICBuZXdTdGFja3Muc3BsaWNlKDEyIC8qIFJlYy5NYXhTdGFja0NvdW50ICovLCBuZXdTdGFja3MubGVuZ3RoIC0gMTIgLyogUmVjLk1heFN0YWNrQ291bnQgKi8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubWluU3RhY2tQb3MgPSBuZXdTdGFja3NbMF0ucG9zO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IG5ld1N0YWNrcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChuZXdTdGFja3NbaV0ucG9zIDwgdGhpcy5taW5TdGFja1BvcylcbiAgICAgICAgICAgICAgICB0aGlzLm1pblN0YWNrUG9zID0gbmV3U3RhY2tzW2ldLnBvcztcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHN0b3BBdChwb3MpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RvcHBlZEF0ICE9IG51bGwgJiYgdGhpcy5zdG9wcGVkQXQgPCBwb3MpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkNhbid0IG1vdmUgc3RvcHBlZEF0IGZvcndhcmRcIik7XG4gICAgICAgIHRoaXMuc3RvcHBlZEF0ID0gcG9zO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGFuIHVwZGF0ZWQgdmVyc2lvbiBvZiB0aGUgZ2l2ZW4gc3RhY2ssIG9yIG51bGwgaWYgdGhlXG4gICAgLy8gc3RhY2sgY2FuJ3QgYWR2YW5jZSBub3JtYWxseS4gV2hlbiBgc3BsaXRgIGFuZCBgc3RhY2tzYCBhcmVcbiAgICAvLyBnaXZlbiwgc3RhY2tzIHNwbGl0IG9mZiBieSBhbWJpZ3VvdXMgb3BlcmF0aW9ucyB3aWxsIGJlIHB1c2hlZCB0b1xuICAgIC8vIGBzcGxpdGAsIG9yIGFkZGVkIHRvIGBzdGFja3NgIGlmIHRoZXkgbW92ZSBgcG9zYCBmb3J3YXJkLlxuICAgIGFkdmFuY2VTdGFjayhzdGFjaywgc3RhY2tzLCBzcGxpdCkge1xuICAgICAgICBsZXQgc3RhcnQgPSBzdGFjay5wb3MsIHsgcGFyc2VyIH0gPSB0aGlzO1xuICAgICAgICBsZXQgYmFzZSA9IHZlcmJvc2UgPyB0aGlzLnN0YWNrSUQoc3RhY2spICsgXCIgLT4gXCIgOiBcIlwiO1xuICAgICAgICBpZiAodGhpcy5zdG9wcGVkQXQgIT0gbnVsbCAmJiBzdGFydCA+IHRoaXMuc3RvcHBlZEF0KVxuICAgICAgICAgICAgcmV0dXJuIHN0YWNrLmZvcmNlUmVkdWNlKCkgPyBzdGFjayA6IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmZyYWdtZW50cykge1xuICAgICAgICAgICAgbGV0IHN0cmljdEN4ID0gc3RhY2suY3VyQ29udGV4dCAmJiBzdGFjay5jdXJDb250ZXh0LnRyYWNrZXIuc3RyaWN0LCBjeEhhc2ggPSBzdHJpY3RDeCA/IHN0YWNrLmN1ckNvbnRleHQuaGFzaCA6IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBjYWNoZWQgPSB0aGlzLmZyYWdtZW50cy5ub2RlQXQoc3RhcnQpOyBjYWNoZWQ7KSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gdGhpcy5wYXJzZXIubm9kZVNldC50eXBlc1tjYWNoZWQudHlwZS5pZF0gPT0gY2FjaGVkLnR5cGUgPyBwYXJzZXIuZ2V0R290byhzdGFjay5zdGF0ZSwgY2FjaGVkLnR5cGUuaWQpIDogLTE7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoID4gLTEgJiYgY2FjaGVkLmxlbmd0aCAmJiAoIXN0cmljdEN4IHx8IChjYWNoZWQucHJvcChOb2RlUHJvcC5jb250ZXh0SGFzaCkgfHwgMCkgPT0gY3hIYXNoKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay51c2VOb2RlKGNhY2hlZCwgbWF0Y2gpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmVyYm9zZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhc2UgKyB0aGlzLnN0YWNrSUQoc3RhY2spICsgYCAodmlhIHJldXNlIG9mICR7cGFyc2VyLmdldE5hbWUoY2FjaGVkLnR5cGUuaWQpfSlgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghKGNhY2hlZCBpbnN0YW5jZW9mIFRyZWUpIHx8IGNhY2hlZC5jaGlsZHJlbi5sZW5ndGggPT0gMCB8fCBjYWNoZWQucG9zaXRpb25zWzBdID4gMClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgbGV0IGlubmVyID0gY2FjaGVkLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lciBpbnN0YW5jZW9mIFRyZWUgJiYgY2FjaGVkLnBvc2l0aW9uc1swXSA9PSAwKVxuICAgICAgICAgICAgICAgICAgICBjYWNoZWQgPSBpbm5lcjtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBkZWZhdWx0UmVkdWNlID0gcGFyc2VyLnN0YXRlU2xvdChzdGFjay5zdGF0ZSwgNCAvKiBQYXJzZVN0YXRlLkRlZmF1bHRSZWR1Y2UgKi8pO1xuICAgICAgICBpZiAoZGVmYXVsdFJlZHVjZSA+IDApIHtcbiAgICAgICAgICAgIHN0YWNrLnJlZHVjZShkZWZhdWx0UmVkdWNlKTtcbiAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhc2UgKyB0aGlzLnN0YWNrSUQoc3RhY2spICsgYCAodmlhIGFsd2F5cy1yZWR1Y2UgJHtwYXJzZXIuZ2V0TmFtZShkZWZhdWx0UmVkdWNlICYgNjU1MzUgLyogQWN0aW9uLlZhbHVlTWFzayAqLyl9KWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YWNrLnN0YWNrLmxlbmd0aCA+PSA4NDAwIC8qIFJlYy5DdXREZXB0aCAqLykge1xuICAgICAgICAgICAgd2hpbGUgKHN0YWNrLnN0YWNrLmxlbmd0aCA+IDYwMDAgLyogUmVjLkN1dFRvICovICYmIHN0YWNrLmZvcmNlUmVkdWNlKCkpIHsgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBhY3Rpb25zID0gdGhpcy50b2tlbnMuZ2V0QWN0aW9ucyhzdGFjayk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWN0aW9ucy5sZW5ndGg7KSB7XG4gICAgICAgICAgICBsZXQgYWN0aW9uID0gYWN0aW9uc1tpKytdLCB0ZXJtID0gYWN0aW9uc1tpKytdLCBlbmQgPSBhY3Rpb25zW2krK107XG4gICAgICAgICAgICBsZXQgbGFzdCA9IGkgPT0gYWN0aW9ucy5sZW5ndGggfHwgIXNwbGl0O1xuICAgICAgICAgICAgbGV0IGxvY2FsU3RhY2sgPSBsYXN0ID8gc3RhY2sgOiBzdGFjay5zcGxpdCgpO1xuICAgICAgICAgICAgbGV0IG1haW4gPSB0aGlzLnRva2Vucy5tYWluVG9rZW47XG4gICAgICAgICAgICBsb2NhbFN0YWNrLmFwcGx5KGFjdGlvbiwgdGVybSwgbWFpbiA/IG1haW4uc3RhcnQgOiBsb2NhbFN0YWNrLnBvcywgZW5kKTtcbiAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhc2UgKyB0aGlzLnN0YWNrSUQobG9jYWxTdGFjaykgKyBgICh2aWEgJHsoYWN0aW9uICYgNjU1MzYgLyogQWN0aW9uLlJlZHVjZUZsYWcgKi8pID09IDAgPyBcInNoaWZ0XCJcbiAgICAgICAgICAgICAgICAgICAgOiBgcmVkdWNlIG9mICR7cGFyc2VyLmdldE5hbWUoYWN0aW9uICYgNjU1MzUgLyogQWN0aW9uLlZhbHVlTWFzayAqLyl9YH0gZm9yICR7cGFyc2VyLmdldE5hbWUodGVybSl9IEAgJHtzdGFydH0ke2xvY2FsU3RhY2sgPT0gc3RhY2sgPyBcIlwiIDogXCIsIHNwbGl0XCJ9KWApO1xuICAgICAgICAgICAgaWYgKGxhc3QpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBlbHNlIGlmIChsb2NhbFN0YWNrLnBvcyA+IHN0YXJ0KVxuICAgICAgICAgICAgICAgIHN0YWNrcy5wdXNoKGxvY2FsU3RhY2spO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHNwbGl0LnB1c2gobG9jYWxTdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBBZHZhbmNlIGEgZ2l2ZW4gc3RhY2sgZm9yd2FyZCBhcyBmYXIgYXMgaXQgd2lsbCBnby4gUmV0dXJucyB0aGVcbiAgICAvLyAocG9zc2libHkgdXBkYXRlZCkgc3RhY2sgaWYgaXQgZ290IHN0dWNrLCBvciBudWxsIGlmIGl0IG1vdmVkXG4gICAgLy8gZm9yd2FyZCBhbmQgd2FzIGdpdmVuIHRvIGBwdXNoU3RhY2tEZWR1cGAuXG4gICAgYWR2YW5jZUZ1bGx5KHN0YWNrLCBuZXdTdGFja3MpIHtcbiAgICAgICAgbGV0IHBvcyA9IHN0YWNrLnBvcztcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFkdmFuY2VTdGFjayhzdGFjaywgbnVsbCwgbnVsbCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKHN0YWNrLnBvcyA+IHBvcykge1xuICAgICAgICAgICAgICAgIHB1c2hTdGFja0RlZHVwKHN0YWNrLCBuZXdTdGFja3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJ1blJlY292ZXJ5KHN0YWNrcywgdG9rZW5zLCBuZXdTdGFja3MpIHtcbiAgICAgICAgbGV0IGZpbmlzaGVkID0gbnVsbCwgcmVzdGFydGVkID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhY2sgPSBzdGFja3NbaV0sIHRva2VuID0gdG9rZW5zW2kgPDwgMV0sIHRva2VuRW5kID0gdG9rZW5zWyhpIDw8IDEpICsgMV07XG4gICAgICAgICAgICBsZXQgYmFzZSA9IHZlcmJvc2UgPyB0aGlzLnN0YWNrSUQoc3RhY2spICsgXCIgLT4gXCIgOiBcIlwiO1xuICAgICAgICAgICAgaWYgKHN0YWNrLmRlYWRFbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdGFydGVkKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICByZXN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHN0YWNrLnJlc3RhcnQoKTtcbiAgICAgICAgICAgICAgICBpZiAodmVyYm9zZSlcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChzdGFjaykgKyBcIiAocmVzdGFydGVkKVwiKTtcbiAgICAgICAgICAgICAgICBsZXQgZG9uZSA9IHRoaXMuYWR2YW5jZUZ1bGx5KHN0YWNrLCBuZXdTdGFja3MpO1xuICAgICAgICAgICAgICAgIGlmIChkb25lKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBmb3JjZSA9IHN0YWNrLnNwbGl0KCksIGZvcmNlQmFzZSA9IGJhc2U7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwIC8qIFJlYy5Gb3JjZVJlZHVjZUxpbWl0ICovICYmIGZvcmNlLmZvcmNlUmVkdWNlKCk7IGorKykge1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmb3JjZUJhc2UgKyB0aGlzLnN0YWNrSUQoZm9yY2UpICsgXCIgKHZpYSBmb3JjZS1yZWR1Y2UpXCIpO1xuICAgICAgICAgICAgICAgIGxldCBkb25lID0gdGhpcy5hZHZhbmNlRnVsbHkoZm9yY2UsIG5ld1N0YWNrcyk7XG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBmb3JjZUJhc2UgPSB0aGlzLnN0YWNrSUQoZm9yY2UpICsgXCIgLT4gXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpbnNlcnQgb2Ygc3RhY2sucmVjb3ZlckJ5SW5zZXJ0KHRva2VuKSkge1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhiYXNlICsgdGhpcy5zdGFja0lEKGluc2VydCkgKyBcIiAodmlhIHJlY292ZXItaW5zZXJ0KVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkdmFuY2VGdWxseShpbnNlcnQsIG5ld1N0YWNrcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0uZW5kID4gc3RhY2sucG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuRW5kID09IHN0YWNrLnBvcykge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbkVuZCsrO1xuICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IDAgLyogVGVybS5FcnIgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0YWNrLnJlY292ZXJCeURlbGV0ZSh0b2tlbiwgdG9rZW5FbmQpO1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhiYXNlICsgdGhpcy5zdGFja0lEKHN0YWNrKSArIGAgKHZpYSByZWNvdmVyLWRlbGV0ZSAke3RoaXMucGFyc2VyLmdldE5hbWUodG9rZW4pfSlgKTtcbiAgICAgICAgICAgICAgICBwdXNoU3RhY2tEZWR1cChzdGFjaywgbmV3U3RhY2tzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFmaW5pc2hlZCB8fCBmaW5pc2hlZC5zY29yZSA8IGZvcmNlLnNjb3JlKSB7XG4gICAgICAgICAgICAgICAgZmluaXNoZWQgPSBmb3JjZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmluaXNoZWQ7XG4gICAgfVxuICAgIC8vIENvbnZlcnQgdGhlIHN0YWNrJ3MgYnVmZmVyIHRvIGEgc3ludGF4IHRyZWUuXG4gICAgc3RhY2tUb1RyZWUoc3RhY2spIHtcbiAgICAgICAgc3RhY2suY2xvc2UoKTtcbiAgICAgICAgcmV0dXJuIFRyZWUuYnVpbGQoeyBidWZmZXI6IFN0YWNrQnVmZmVyQ3Vyc29yLmNyZWF0ZShzdGFjayksXG4gICAgICAgICAgICBub2RlU2V0OiB0aGlzLnBhcnNlci5ub2RlU2V0LFxuICAgICAgICAgICAgdG9wSUQ6IHRoaXMudG9wVGVybSxcbiAgICAgICAgICAgIG1heEJ1ZmZlckxlbmd0aDogdGhpcy5wYXJzZXIuYnVmZmVyTGVuZ3RoLFxuICAgICAgICAgICAgcmV1c2VkOiB0aGlzLnJldXNlZCxcbiAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnJhbmdlc1swXS5mcm9tLFxuICAgICAgICAgICAgbGVuZ3RoOiBzdGFjay5wb3MgLSB0aGlzLnJhbmdlc1swXS5mcm9tLFxuICAgICAgICAgICAgbWluUmVwZWF0VHlwZTogdGhpcy5wYXJzZXIubWluUmVwZWF0VGVybSB9KTtcbiAgICB9XG4gICAgc3RhY2tJRChzdGFjaykge1xuICAgICAgICBsZXQgaWQgPSAoc3RhY2tJRHMgfHwgKHN0YWNrSURzID0gbmV3IFdlYWtNYXApKS5nZXQoc3RhY2spO1xuICAgICAgICBpZiAoIWlkKVxuICAgICAgICAgICAgc3RhY2tJRHMuc2V0KHN0YWNrLCBpZCA9IFN0cmluZy5mcm9tQ29kZVBvaW50KHRoaXMubmV4dFN0YWNrSUQrKykpO1xuICAgICAgICByZXR1cm4gaWQgKyBzdGFjaztcbiAgICB9XG59XG5mdW5jdGlvbiBwdXNoU3RhY2tEZWR1cChzdGFjaywgbmV3U3RhY2tzKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdTdGFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG90aGVyID0gbmV3U3RhY2tzW2ldO1xuICAgICAgICBpZiAob3RoZXIucG9zID09IHN0YWNrLnBvcyAmJiBvdGhlci5zYW1lU3RhdGUoc3RhY2spKSB7XG4gICAgICAgICAgICBpZiAobmV3U3RhY2tzW2ldLnNjb3JlIDwgc3RhY2suc2NvcmUpXG4gICAgICAgICAgICAgICAgbmV3U3RhY2tzW2ldID0gc3RhY2s7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV3U3RhY2tzLnB1c2goc3RhY2spO1xufVxuY2xhc3MgRGlhbGVjdCB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlLCBmbGFncywgZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSBmbGFncztcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgICBhbGxvd3ModGVybSkgeyByZXR1cm4gIXRoaXMuZGlzYWJsZWQgfHwgdGhpcy5kaXNhYmxlZFt0ZXJtXSA9PSAwOyB9XG59XG5jb25zdCBpZCA9IHggPT4geDtcbi8qKlxuQ29udGV4dCB0cmFja2VycyBhcmUgdXNlZCB0byB0cmFjayBzdGF0ZWZ1bCBjb250ZXh0IChzdWNoIGFzXG5pbmRlbnRhdGlvbiBpbiB0aGUgUHl0aG9uIGdyYW1tYXIsIG9yIHBhcmVudCBlbGVtZW50cyBpbiB0aGUgWE1MXG5ncmFtbWFyKSBuZWVkZWQgYnkgZXh0ZXJuYWwgdG9rZW5pemVycy4gWW91IGRlY2xhcmUgdGhlbSBpbiBhXG5ncmFtbWFyIGZpbGUgYXMgYEBjb250ZXh0IGV4cG9ydE5hbWUgZnJvbSBcIm1vZHVsZVwiYC5cblxuQ29udGV4dCB2YWx1ZXMgc2hvdWxkIGJlIGltbXV0YWJsZSwgYW5kIGNhbiBiZSB1cGRhdGVkIChyZXBsYWNlZClcbm9uIHNoaWZ0IG9yIHJlZHVjZSBhY3Rpb25zLlxuXG5UaGUgZXhwb3J0IHVzZWQgaW4gYSBgQGNvbnRleHRgIGRlY2xhcmF0aW9uIHNob3VsZCBiZSBvZiB0aGlzXG50eXBlLlxuKi9cbmNsYXNzIENvbnRleHRUcmFja2VyIHtcbiAgICAvKipcbiAgICBEZWZpbmUgYSBjb250ZXh0IHRyYWNrZXIuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIHRoaXMuc3RhcnQgPSBzcGVjLnN0YXJ0O1xuICAgICAgICB0aGlzLnNoaWZ0ID0gc3BlYy5zaGlmdCB8fCBpZDtcbiAgICAgICAgdGhpcy5yZWR1Y2UgPSBzcGVjLnJlZHVjZSB8fCBpZDtcbiAgICAgICAgdGhpcy5yZXVzZSA9IHNwZWMucmV1c2UgfHwgaWQ7XG4gICAgICAgIHRoaXMuaGFzaCA9IHNwZWMuaGFzaCB8fCAoKCkgPT4gMCk7XG4gICAgICAgIHRoaXMuc3RyaWN0ID0gc3BlYy5zdHJpY3QgIT09IGZhbHNlO1xuICAgIH1cbn1cbi8qKlxuSG9sZHMgdGhlIHBhcnNlIHRhYmxlcyBmb3IgYSBnaXZlbiBncmFtbWFyLCBhcyBnZW5lcmF0ZWQgYnlcbmBsZXplci1nZW5lcmF0b3JgLCBhbmQgcHJvdmlkZXMgW21ldGhvZHNdKCNjb21tb24uUGFyc2VyKSB0byBwYXJzZVxuY29udGVudCB3aXRoLlxuKi9cbmNsYXNzIExSUGFyc2VyIGV4dGVuZHMgUGFyc2VyIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNwZWMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLndyYXBwZXJzID0gW107XG4gICAgICAgIGlmIChzcGVjLnZlcnNpb24gIT0gMTQgLyogRmlsZS5WZXJzaW9uICovKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYFBhcnNlciB2ZXJzaW9uICgke3NwZWMudmVyc2lvbn0pIGRvZXNuJ3QgbWF0Y2ggcnVudGltZSB2ZXJzaW9uICgkezE0IC8qIEZpbGUuVmVyc2lvbiAqL30pYCk7XG4gICAgICAgIGxldCBub2RlTmFtZXMgPSBzcGVjLm5vZGVOYW1lcy5zcGxpdChcIiBcIik7XG4gICAgICAgIHRoaXMubWluUmVwZWF0VGVybSA9IG5vZGVOYW1lcy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BlYy5yZXBlYXROb2RlQ291bnQ7IGkrKylcbiAgICAgICAgICAgIG5vZGVOYW1lcy5wdXNoKFwiXCIpO1xuICAgICAgICBsZXQgdG9wVGVybXMgPSBPYmplY3Qua2V5cyhzcGVjLnRvcFJ1bGVzKS5tYXAociA9PiBzcGVjLnRvcFJ1bGVzW3JdWzFdKTtcbiAgICAgICAgbGV0IG5vZGVQcm9wcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVOYW1lcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIG5vZGVQcm9wcy5wdXNoKFtdKTtcbiAgICAgICAgZnVuY3Rpb24gc2V0UHJvcChub2RlSUQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgICAgICBub2RlUHJvcHNbbm9kZUlEXS5wdXNoKFtwcm9wLCBwcm9wLmRlc2VyaWFsaXplKFN0cmluZyh2YWx1ZSkpXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNwZWMubm9kZVByb3BzKVxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcFNwZWMgb2Ygc3BlYy5ub2RlUHJvcHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgcHJvcCA9IHByb3BTcGVjWzBdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcCA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgICAgICBwcm9wID0gTm9kZVByb3BbcHJvcF07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwcm9wU3BlYy5sZW5ndGg7KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gcHJvcFNwZWNbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChuZXh0LCBwcm9wLCBwcm9wU3BlY1tpKytdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHByb3BTcGVjW2kgKyAtbmV4dF07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gLW5leHQ7IGogPiAwOyBqLS0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChwcm9wU3BlY1tpKytdLCBwcm9wLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIHRoaXMubm9kZVNldCA9IG5ldyBOb2RlU2V0KG5vZGVOYW1lcy5tYXAoKG5hbWUsIGkpID0+IE5vZGVUeXBlLmRlZmluZSh7XG4gICAgICAgICAgICBuYW1lOiBpID49IHRoaXMubWluUmVwZWF0VGVybSA/IHVuZGVmaW5lZCA6IG5hbWUsXG4gICAgICAgICAgICBpZDogaSxcbiAgICAgICAgICAgIHByb3BzOiBub2RlUHJvcHNbaV0sXG4gICAgICAgICAgICB0b3A6IHRvcFRlcm1zLmluZGV4T2YoaSkgPiAtMSxcbiAgICAgICAgICAgIGVycm9yOiBpID09IDAsXG4gICAgICAgICAgICBza2lwcGVkOiBzcGVjLnNraXBwZWROb2RlcyAmJiBzcGVjLnNraXBwZWROb2Rlcy5pbmRleE9mKGkpID4gLTFcbiAgICAgICAgfSkpKTtcbiAgICAgICAgaWYgKHNwZWMucHJvcFNvdXJjZXMpXG4gICAgICAgICAgICB0aGlzLm5vZGVTZXQgPSB0aGlzLm5vZGVTZXQuZXh0ZW5kKC4uLnNwZWMucHJvcFNvdXJjZXMpO1xuICAgICAgICB0aGlzLnN0cmljdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJ1ZmZlckxlbmd0aCA9IERlZmF1bHRCdWZmZXJMZW5ndGg7XG4gICAgICAgIGxldCB0b2tlbkFycmF5ID0gZGVjb2RlQXJyYXkoc3BlYy50b2tlbkRhdGEpO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBzcGVjLmNvbnRleHQ7XG4gICAgICAgIHRoaXMuc3BlY2lhbGl6ZXJTcGVjcyA9IHNwZWMuc3BlY2lhbGl6ZWQgfHwgW107XG4gICAgICAgIHRoaXMuc3BlY2lhbGl6ZWQgPSBuZXcgVWludDE2QXJyYXkodGhpcy5zcGVjaWFsaXplclNwZWNzLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zcGVjaWFsaXplclNwZWNzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgdGhpcy5zcGVjaWFsaXplZFtpXSA9IHRoaXMuc3BlY2lhbGl6ZXJTcGVjc1tpXS50ZXJtO1xuICAgICAgICB0aGlzLnNwZWNpYWxpemVycyA9IHRoaXMuc3BlY2lhbGl6ZXJTcGVjcy5tYXAoZ2V0U3BlY2lhbGl6ZXIpO1xuICAgICAgICB0aGlzLnN0YXRlcyA9IGRlY29kZUFycmF5KHNwZWMuc3RhdGVzLCBVaW50MzJBcnJheSk7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRlY29kZUFycmF5KHNwZWMuc3RhdGVEYXRhKTtcbiAgICAgICAgdGhpcy5nb3RvID0gZGVjb2RlQXJyYXkoc3BlYy5nb3RvKTtcbiAgICAgICAgdGhpcy5tYXhUZXJtID0gc3BlYy5tYXhUZXJtO1xuICAgICAgICB0aGlzLnRva2VuaXplcnMgPSBzcGVjLnRva2VuaXplcnMubWFwKHZhbHVlID0+IHR5cGVvZiB2YWx1ZSA9PSBcIm51bWJlclwiID8gbmV3IFRva2VuR3JvdXAodG9rZW5BcnJheSwgdmFsdWUpIDogdmFsdWUpO1xuICAgICAgICB0aGlzLnRvcFJ1bGVzID0gc3BlYy50b3BSdWxlcztcbiAgICAgICAgdGhpcy5kaWFsZWN0cyA9IHNwZWMuZGlhbGVjdHMgfHwge307XG4gICAgICAgIHRoaXMuZHluYW1pY1ByZWNlZGVuY2VzID0gc3BlYy5keW5hbWljUHJlY2VkZW5jZXMgfHwgbnVsbDtcbiAgICAgICAgdGhpcy50b2tlblByZWNUYWJsZSA9IHNwZWMudG9rZW5QcmVjO1xuICAgICAgICB0aGlzLnRlcm1OYW1lcyA9IHNwZWMudGVybU5hbWVzIHx8IG51bGw7XG4gICAgICAgIHRoaXMubWF4Tm9kZSA9IHRoaXMubm9kZVNldC50eXBlcy5sZW5ndGggLSAxO1xuICAgICAgICB0aGlzLmRpYWxlY3QgPSB0aGlzLnBhcnNlRGlhbGVjdCgpO1xuICAgICAgICB0aGlzLnRvcCA9IHRoaXMudG9wUnVsZXNbT2JqZWN0LmtleXModGhpcy50b3BSdWxlcylbMF1dO1xuICAgIH1cbiAgICBjcmVhdGVQYXJzZShpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpIHtcbiAgICAgICAgbGV0IHBhcnNlID0gbmV3IFBhcnNlKHRoaXMsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcyk7XG4gICAgICAgIGZvciAobGV0IHcgb2YgdGhpcy53cmFwcGVycylcbiAgICAgICAgICAgIHBhcnNlID0gdyhwYXJzZSwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgYSBnb3RvIHRhYmxlIGVudHJ5IEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0R290byhzdGF0ZSwgdGVybSwgbG9vc2UgPSBmYWxzZSkge1xuICAgICAgICBsZXQgdGFibGUgPSB0aGlzLmdvdG87XG4gICAgICAgIGlmICh0ZXJtID49IHRhYmxlWzBdKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBmb3IgKGxldCBwb3MgPSB0YWJsZVt0ZXJtICsgMV07Oykge1xuICAgICAgICAgICAgbGV0IGdyb3VwVGFnID0gdGFibGVbcG9zKytdLCBsYXN0ID0gZ3JvdXBUYWcgJiAxO1xuICAgICAgICAgICAgbGV0IHRhcmdldCA9IHRhYmxlW3BvcysrXTtcbiAgICAgICAgICAgIGlmIChsYXN0ICYmIGxvb3NlKVxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgICAgICBmb3IgKGxldCBlbmQgPSBwb3MgKyAoZ3JvdXBUYWcgPj4gMSk7IHBvcyA8IGVuZDsgcG9zKyspXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlW3Bvc10gPT0gc3RhdGUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgICAgICBpZiAobGFzdClcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgQ2hlY2sgaWYgdGhpcyBzdGF0ZSBoYXMgYW4gYWN0aW9uIGZvciBhIGdpdmVuIHRlcm1pbmFsIEBpbnRlcm5hbFxuICAgICovXG4gICAgaGFzQWN0aW9uKHN0YXRlLCB0ZXJtaW5hbCkge1xuICAgICAgICBsZXQgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgICAgZm9yIChsZXQgc2V0ID0gMDsgc2V0IDwgMjsgc2V0KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnN0YXRlU2xvdChzdGF0ZSwgc2V0ID8gMiAvKiBQYXJzZVN0YXRlLlNraXAgKi8gOiAxIC8qIFBhcnNlU3RhdGUuQWN0aW9ucyAqLyksIG5leHQ7OyBpICs9IDMpIHtcbiAgICAgICAgICAgICAgICBpZiAoKG5leHQgPSBkYXRhW2ldKSA9PSA2NTUzNSAvKiBTZXEuRW5kICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhW2kgKyAxXSA9PSAxIC8qIFNlcS5OZXh0ICovKVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IGRhdGFbaSA9IHBhaXIoZGF0YSwgaSArIDIpXTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YVtpICsgMV0gPT0gMiAvKiBTZXEuT3RoZXIgKi8pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFpcihkYXRhLCBpICsgMik7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV4dCA9PSB0ZXJtaW5hbCB8fCBuZXh0ID09IDAgLyogVGVybS5FcnIgKi8pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYWlyKGRhdGEsIGkgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0ZVNsb3Qoc3RhdGUsIHNsb3QpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVzWyhzdGF0ZSAqIDYgLyogUGFyc2VTdGF0ZS5TaXplICovKSArIHNsb3RdO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRlRmxhZyhzdGF0ZSwgZmxhZykge1xuICAgICAgICByZXR1cm4gKHRoaXMuc3RhdGVTbG90KHN0YXRlLCAwIC8qIFBhcnNlU3RhdGUuRmxhZ3MgKi8pICYgZmxhZykgPiAwO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHZhbGlkQWN0aW9uKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5hbGxBY3Rpb25zKHN0YXRlLCBhID0+IGEgPT0gYWN0aW9uID8gdHJ1ZSA6IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFsbEFjdGlvbnMoc3RhdGUsIGFjdGlvbikge1xuICAgICAgICBsZXQgZGVmbHQgPSB0aGlzLnN0YXRlU2xvdChzdGF0ZSwgNCAvKiBQYXJzZVN0YXRlLkRlZmF1bHRSZWR1Y2UgKi8pO1xuICAgICAgICBsZXQgcmVzdWx0ID0gZGVmbHQgPyBhY3Rpb24oZGVmbHQpIDogdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zdGF0ZVNsb3Qoc3RhdGUsIDEgLyogUGFyc2VTdGF0ZS5BY3Rpb25zICovKTsgcmVzdWx0ID09IG51bGw7IGkgKz0gMykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtpXSA9PSA2NTUzNSAvKiBTZXEuRW5kICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtpICsgMV0gPT0gMSAvKiBTZXEuTmV4dCAqLylcbiAgICAgICAgICAgICAgICAgICAgaSA9IHBhaXIodGhpcy5kYXRhLCBpICsgMik7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdCA9IGFjdGlvbihwYWlyKHRoaXMuZGF0YSwgaSArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHN0YXRlcyB0aGF0IGNhbiBmb2xsb3cgdGhpcyBvbmUgdGhyb3VnaCBzaGlmdCBhY3Rpb25zIG9yXG4gICAgZ290byBqdW1wcy4gQGludGVybmFsXG4gICAgKi9cbiAgICBuZXh0U3RhdGVzKHN0YXRlKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc3RhdGVTbG90KHN0YXRlLCAxIC8qIFBhcnNlU3RhdGUuQWN0aW9ucyAqLyk7OyBpICs9IDMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbaV0gPT0gNjU1MzUgLyogU2VxLkVuZCAqLykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbaSArIDFdID09IDEgLyogU2VxLk5leHQgKi8pXG4gICAgICAgICAgICAgICAgICAgIGkgPSBwYWlyKHRoaXMuZGF0YSwgaSArIDIpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKHRoaXMuZGF0YVtpICsgMl0gJiAoNjU1MzYgLyogQWN0aW9uLlJlZHVjZUZsYWcgKi8gPj4gMTYpKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5kYXRhW2kgKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5zb21lKCh2LCBpKSA9PiAoaSAmIDEpICYmIHYgPT0gdmFsdWUpKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzLmRhdGFbaV0sIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBDb25maWd1cmUgdGhlIHBhcnNlci4gUmV0dXJucyBhIG5ldyBwYXJzZXIgaW5zdGFuY2UgdGhhdCBoYXMgdGhlXG4gICAgZ2l2ZW4gc2V0dGluZ3MgbW9kaWZpZWQuIFNldHRpbmdzIG5vdCBwcm92aWRlZCBpbiBgY29uZmlnYCBhcmVcbiAgICBrZXB0IGZyb20gdGhlIG9yaWdpbmFsIHBhcnNlci5cbiAgICAqL1xuICAgIGNvbmZpZ3VyZShjb25maWcpIHtcbiAgICAgICAgLy8gSGlkZW91cyByZWZsZWN0aW9uLWJhc2VkIGtsdWRnZSB0byBtYWtlIGl0IGVhc3kgdG8gY3JlYXRlIGFcbiAgICAgICAgLy8gc2xpZ2h0bHkgbW9kaWZpZWQgY29weSBvZiBhIHBhcnNlci5cbiAgICAgICAgbGV0IGNvcHkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoTFJQYXJzZXIucHJvdG90eXBlKSwgdGhpcyk7XG4gICAgICAgIGlmIChjb25maWcucHJvcHMpXG4gICAgICAgICAgICBjb3B5Lm5vZGVTZXQgPSB0aGlzLm5vZGVTZXQuZXh0ZW5kKC4uLmNvbmZpZy5wcm9wcyk7XG4gICAgICAgIGlmIChjb25maWcudG9wKSB7XG4gICAgICAgICAgICBsZXQgaW5mbyA9IHRoaXMudG9wUnVsZXNbY29uZmlnLnRvcF07XG4gICAgICAgICAgICBpZiAoIWluZm8pXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYEludmFsaWQgdG9wIHJ1bGUgbmFtZSAke2NvbmZpZy50b3B9YCk7XG4gICAgICAgICAgICBjb3B5LnRvcCA9IGluZm87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy50b2tlbml6ZXJzKVxuICAgICAgICAgICAgY29weS50b2tlbml6ZXJzID0gdGhpcy50b2tlbml6ZXJzLm1hcCh0ID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBjb25maWcudG9rZW5pemVycy5maW5kKHIgPT4gci5mcm9tID09IHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZCA/IGZvdW5kLnRvIDogdDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoY29uZmlnLnNwZWNpYWxpemVycykge1xuICAgICAgICAgICAgY29weS5zcGVjaWFsaXplcnMgPSB0aGlzLnNwZWNpYWxpemVycy5zbGljZSgpO1xuICAgICAgICAgICAgY29weS5zcGVjaWFsaXplclNwZWNzID0gdGhpcy5zcGVjaWFsaXplclNwZWNzLm1hcCgocywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IGNvbmZpZy5zcGVjaWFsaXplcnMuZmluZChyID0+IHIuZnJvbSA9PSBzLmV4dGVybmFsKTtcbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgICAgICAgICBsZXQgc3BlYyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcyksIHsgZXh0ZXJuYWw6IGZvdW5kLnRvIH0pO1xuICAgICAgICAgICAgICAgIGNvcHkuc3BlY2lhbGl6ZXJzW2ldID0gZ2V0U3BlY2lhbGl6ZXIoc3BlYyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNwZWM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnLmNvbnRleHRUcmFja2VyKVxuICAgICAgICAgICAgY29weS5jb250ZXh0ID0gY29uZmlnLmNvbnRleHRUcmFja2VyO1xuICAgICAgICBpZiAoY29uZmlnLmRpYWxlY3QpXG4gICAgICAgICAgICBjb3B5LmRpYWxlY3QgPSB0aGlzLnBhcnNlRGlhbGVjdChjb25maWcuZGlhbGVjdCk7XG4gICAgICAgIGlmIChjb25maWcuc3RyaWN0ICE9IG51bGwpXG4gICAgICAgICAgICBjb3B5LnN0cmljdCA9IGNvbmZpZy5zdHJpY3Q7XG4gICAgICAgIGlmIChjb25maWcud3JhcClcbiAgICAgICAgICAgIGNvcHkud3JhcHBlcnMgPSBjb3B5LndyYXBwZXJzLmNvbmNhdChjb25maWcud3JhcCk7XG4gICAgICAgIGlmIChjb25maWcuYnVmZmVyTGVuZ3RoICE9IG51bGwpXG4gICAgICAgICAgICBjb3B5LmJ1ZmZlckxlbmd0aCA9IGNvbmZpZy5idWZmZXJMZW5ndGg7XG4gICAgICAgIHJldHVybiBjb3B5O1xuICAgIH1cbiAgICAvKipcbiAgICBUZWxscyB5b3Ugd2hldGhlciBhbnkgW3BhcnNlIHdyYXBwZXJzXSgjbHIuUGFyc2VyQ29uZmlnLndyYXApXG4gICAgYXJlIHJlZ2lzdGVyZWQgZm9yIHRoaXMgcGFyc2VyLlxuICAgICovXG4gICAgaGFzV3JhcHBlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXJzLmxlbmd0aCA+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdGhlIG5hbWUgYXNzb2NpYXRlZCB3aXRoIGEgZ2l2ZW4gdGVybS4gVGhpcyB3aWxsIG9ubHlcbiAgICB3b3JrIGZvciBhbGwgdGVybXMgd2hlbiB0aGUgcGFyc2VyIHdhcyBnZW5lcmF0ZWQgd2l0aCB0aGVcbiAgICBgLS1uYW1lc2Agb3B0aW9uLiBCeSBkZWZhdWx0LCBvbmx5IHRoZSBuYW1lcyBvZiB0YWdnZWQgdGVybXMgYXJlXG4gICAgc3RvcmVkLlxuICAgICovXG4gICAgZ2V0TmFtZSh0ZXJtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlcm1OYW1lcyA/IHRoaXMudGVybU5hbWVzW3Rlcm1dIDogU3RyaW5nKHRlcm0gPD0gdGhpcy5tYXhOb2RlICYmIHRoaXMubm9kZVNldC50eXBlc1t0ZXJtXS5uYW1lIHx8IHRlcm0pO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZW9mIHRlcm0gaWQgaXMgYWx3YXlzIGFsbG9jYXRlZCBkaXJlY3RseSBhZnRlciB0aGUgbm9kZVxuICAgIHR5cGVzLiBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGdldCBlb2ZUZXJtKCkgeyByZXR1cm4gdGhpcy5tYXhOb2RlICsgMTsgfVxuICAgIC8qKlxuICAgIFRoZSB0eXBlIG9mIHRvcCBub2RlIHByb2R1Y2VkIGJ5IHRoZSBwYXJzZXIuXG4gICAgKi9cbiAgICBnZXQgdG9wTm9kZSgpIHsgcmV0dXJuIHRoaXMubm9kZVNldC50eXBlc1t0aGlzLnRvcFsxXV07IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGR5bmFtaWNQcmVjZWRlbmNlKHRlcm0pIHtcbiAgICAgICAgbGV0IHByZWMgPSB0aGlzLmR5bmFtaWNQcmVjZWRlbmNlcztcbiAgICAgICAgcmV0dXJuIHByZWMgPT0gbnVsbCA/IDAgOiBwcmVjW3Rlcm1dIHx8IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcGFyc2VEaWFsZWN0KGRpYWxlY3QpIHtcbiAgICAgICAgbGV0IHZhbHVlcyA9IE9iamVjdC5rZXlzKHRoaXMuZGlhbGVjdHMpLCBmbGFncyA9IHZhbHVlcy5tYXAoKCkgPT4gZmFsc2UpO1xuICAgICAgICBpZiAoZGlhbGVjdClcbiAgICAgICAgICAgIGZvciAobGV0IHBhcnQgb2YgZGlhbGVjdC5zcGxpdChcIiBcIikpIHtcbiAgICAgICAgICAgICAgICBsZXQgaWQgPSB2YWx1ZXMuaW5kZXhPZihwYXJ0KTtcbiAgICAgICAgICAgICAgICBpZiAoaWQgPj0gMClcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3NbaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgbGV0IGRpc2FibGVkID0gbnVsbDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoIWZsYWdzW2ldKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHRoaXMuZGlhbGVjdHNbdmFsdWVzW2ldXSwgaWQ7IChpZCA9IHRoaXMuZGF0YVtqKytdKSAhPSA2NTUzNSAvKiBTZXEuRW5kICovOylcbiAgICAgICAgICAgICAgICAgICAgKGRpc2FibGVkIHx8IChkaXNhYmxlZCA9IG5ldyBVaW50OEFycmF5KHRoaXMubWF4VGVybSArIDEpKSlbaWRdID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBEaWFsZWN0KGRpYWxlY3QsIGZsYWdzLCBkaXNhYmxlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFVzZWQgYnkgdGhlIG91dHB1dCBvZiB0aGUgcGFyc2VyIGdlbmVyYXRvci4gTm90IGF2YWlsYWJsZSB0b1xuICAgIHVzZXIgY29kZS4gQGhpZGVcbiAgICAqL1xuICAgIHN0YXRpYyBkZXNlcmlhbGl6ZShzcGVjKSB7XG4gICAgICAgIHJldHVybiBuZXcgTFJQYXJzZXIoc3BlYyk7XG4gICAgfVxufVxuZnVuY3Rpb24gcGFpcihkYXRhLCBvZmYpIHsgcmV0dXJuIGRhdGFbb2ZmXSB8IChkYXRhW29mZiArIDFdIDw8IDE2KTsgfVxuZnVuY3Rpb24gZmluZEZpbmlzaGVkKHN0YWNrcykge1xuICAgIGxldCBiZXN0ID0gbnVsbDtcbiAgICBmb3IgKGxldCBzdGFjayBvZiBzdGFja3MpIHtcbiAgICAgICAgbGV0IHN0b3BwZWQgPSBzdGFjay5wLnN0b3BwZWRBdDtcbiAgICAgICAgaWYgKChzdGFjay5wb3MgPT0gc3RhY2sucC5zdHJlYW0uZW5kIHx8IHN0b3BwZWQgIT0gbnVsbCAmJiBzdGFjay5wb3MgPiBzdG9wcGVkKSAmJlxuICAgICAgICAgICAgc3RhY2sucC5wYXJzZXIuc3RhdGVGbGFnKHN0YWNrLnN0YXRlLCAyIC8qIFN0YXRlRmxhZy5BY2NlcHRpbmcgKi8pICYmXG4gICAgICAgICAgICAoIWJlc3QgfHwgYmVzdC5zY29yZSA8IHN0YWNrLnNjb3JlKSlcbiAgICAgICAgICAgIGJlc3QgPSBzdGFjaztcbiAgICB9XG4gICAgcmV0dXJuIGJlc3Q7XG59XG5mdW5jdGlvbiBnZXRTcGVjaWFsaXplcihzcGVjKSB7XG4gICAgaWYgKHNwZWMuZXh0ZXJuYWwpIHtcbiAgICAgICAgbGV0IG1hc2sgPSBzcGVjLmV4dGVuZCA/IDEgLyogU3BlY2lhbGl6ZS5FeHRlbmQgKi8gOiAwIC8qIFNwZWNpYWxpemUuU3BlY2lhbGl6ZSAqLztcbiAgICAgICAgcmV0dXJuICh2YWx1ZSwgc3RhY2spID0+IChzcGVjLmV4dGVybmFsKHZhbHVlLCBzdGFjaykgPDwgMSkgfCBtYXNrO1xuICAgIH1cbiAgICByZXR1cm4gc3BlYy5nZXQ7XG59XG5cbmV4cG9ydCB7IENvbnRleHRUcmFja2VyLCBFeHRlcm5hbFRva2VuaXplciwgSW5wdXRTdHJlYW0sIExSUGFyc2VyLCBMb2NhbFRva2VuR3JvdXAsIFN0YWNrIH07XG4iLCAiLy8gVGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgbGV6ZXItZ2VuZXJhdG9yLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGVkaXQgaXQuXG5pbXBvcnQge0xSUGFyc2VyfSBmcm9tIFwiQGxlemVyL2xyXCJcbmV4cG9ydCBjb25zdCBwYXJzZXIgPSBMUlBhcnNlci5kZXNlcmlhbGl6ZSh7XG4gIHZlcnNpb246IDE0LFxuICBzdGF0ZXM6IFwiIV5RVlFQT09PT1FPJyNDYCcjQ2BPT1FPJyNEVScjRFVPI2NRUE8nI0NeT09RTycjQ14nI0NeT09RTycjRFQnI0RUUVZRUE9PT09RTy1FN1MtRTdTT09RTyw1OHgsNTh4T09RTy1FN1ItRTdSXCIsXG4gIHN0YXRlRGF0YTogXCIkWH5Pe09Tfk9SU09UUE9VUE9WUE9XUE9YUE9ZUE9aUE9bUE9dUE9eUE9fUE9gUE9hUE9iUE9jUE9kUE9lUE9mUE9nUE9oUE9pUE9qUE9rUE9sUE9tUE9uUE9vUE9wUE9xUE9yUE9zUE90UE91UE9+T3ZXT35QWU9SbWxramloZ2ZlZGNiYWBvXl9bWllYV1ZVVF11flwiLFxuICBnb3RvOiBcIiFieVBQelAhT1BQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFAhVCFaVFRPVVZRT1JVUVVPUlhVU1JPVVJWUlwiLFxuICBub2RlTmFtZXM6IFwiXHUyNkEwIFByb2dyYW0gU2VudGVuY2UgQ29tbWVudCBBdG9tIEZpeCBCeSBFeGFtcGxlIEV4ZXJjaXNlIFByb29mIFFFRCBHaXZlbiBBc3N1bWUgQ29uY2x1c2lvbiBMZXRzIExldCBVcyBQcm92ZSBUaGF0IFdlIENvbXB1dGUgQ29uY2x1ZGUgQnlXb3JkIEFwcGxpZWQgVG8gVXNpbmcgR2V0IFN1Y2ggSXQgU3VmZmljZXMgU3RyaW5nIExQYXJlbiBSUGFyZW4gTEJyYWNlIFJCcmFjZSBMQnJhY2tldCBSQnJhY2tldCBDaHVuayBFbmRPZlNlbnRlbmNlXCIsXG4gIG1heFRlcm06IDQzLFxuICBza2lwcGVkTm9kZXM6IFswXSxcbiAgcmVwZWF0Tm9kZUNvdW50OiAyLFxuICB0b2tlbkRhdGE6IFwiIz91flIhW09YJHdYWSV4WVomV1pdJHddXiV4XnAkd3BxJXhxciR3cnMmXXN4JHd4eSd5eXopU3p9JHd9IU8pWCFPIWMkdyFjIWQsYSFkIWUzZCFlIWY1YiFmIWckdyFnIWhAaSFoIWlNdCFpIWohIXMhaiFuJHchbiFvISh1IW8hciR3IXIhcyEteyFzIXQhM30hdCF5JHcheSF6ITZ8IXohfSR3IX0jTyE4eiNPI1AkdyNQI1EhOVAjUSNUJHcjVCNVITlVI1UjViFAWCNWI1chQlYjVyNaJHcjWiNbIyBfI1sjXSR3I10jXiMkXiNeI2QkdyNkI2UjJlsjZSNnJHcjZyNoIytdI2gjaSM1ZSNpI2ojOmgjaiNrJHcjayNsITZ8I2wjbyR3I28jcCM/ayNwI3EkdyNxI3IjP3AjcjsnUyR3OydTOz1gJXI8JWx+JHd+TyR3fn4mV34kfFt1fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+JXVQOz1gPCVsJHd+JX1Se35YWSV4XV4leHBxJXh+Jl1Pdn5+JmBWT3ImXXJzJnVzI08mXSNPI1AmeiNQOydTJl07J1M7PWAnczwlbE8mXX4mek9ufn4mfVJPOydTJl07J1M7PWAnVzs9YE8mXX4nWldPciZdcnMmdXMjTyZdI08jUCZ6I1A7J1MmXTsnUzs9YCdzOz1gPCVsJl08JWxPJl1+J3ZQOz1gPCVsJl1+KE9Qb356eyhSfihVVE96KFJ6eyhlezsnUyhSOydTOz1gKHw8JWxPKFJ+KGhUT3koUnl6KHd6OydTKFI7J1M7PWAofDwlbE8oUn4ofE9Sfn4pUFA7PWA8JWwoUn4pWE9wfn4pXl51fk9YJHdaXSR3XnAkd3FyJHdzeCR3en0kd30hTypZIU8hfSR3I08jUCR3I1EjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiphZVJ+dX5PWCpZWFkrclpdKlldXityXnAqWXBxK3JxcipZcnMrcnN4Kll4eityeiF9KlkhfSNPK3IjTyNQKlkjUCNRK3IjUSNvKlkjbyNwK3IjcCNxKlkjcSNyK3IjcjsnUypZOydTOz1gLFo8JWxPKll+K3dTUn5PWStyWjsnUytyOydTOz1gLFQ8JWxPK3J+LFdQOz1gPCVsK3J+LF5QOz1gPCVsKll+LGZedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjZyR3I2cjaC1iI2gjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fi1nXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI2ckdyNnI2guYyNoI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34uaF51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNpJHcjaSNqL2QjaiNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+L2ledX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjYSR3I2EjYjBlI2IjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fjBqXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI1gkdyNYI1kxZiNZI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34xa151fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiFbJHchWyFdMmchXSF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+Mm5bW351fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+M2ledX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjbSR3I20jbjRlI24jbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fjRsW1V+dX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fjVnXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI2MkdyNjI2Q2YyNkI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd342aF51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNiJHcjYiNjN2QjYyNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+N2ledX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjViR3I1YjVzhlI1cjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fjhqXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI2AkdyNgI2E5ZiNhI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd345a151fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNpJHcjaSNqOmcjaiNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+OmxedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjZyR3I2cjaDtoI2gjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fjttXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI10kdyNdI148aSNeI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd348bl51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNjJHcjYyNkPWojZCNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+PW9edX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjYiR3I2IjYz5rI2MjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fj5wXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IVskdyFbIV0/bCFdIX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34/c1tdfnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd35Abl51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNsJHcjbCNtQWojbSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+QW9gdX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjVCR3I1QjVUJxI1UjWCR3I1gjWUdyI1kjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fkJ2XnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI2EkdyNhI2JDciNiI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd35Dd151fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNkJHcjZCNlRHMjZSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+RHhedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjYCR3I2AjYUV0I2EjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fkV5XnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI1gkdyNYI1lGdSNZI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd35GfFtWfnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd35Hd151fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNmJHcjZiNnSHMjZyNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+SHhedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjViR3I1YjV0l0I1cjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fkl5XnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI10kdyNdI15KdSNeI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd35Kel51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNnJHcjZyNoS3YjaCNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+S3tedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjWCR3I1gjWUx3I1kjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fk1PW1d+dX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fk15XnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI10kdyNdI15OdSNeI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd35Oel51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNsJHcjbCNtISB2I20jbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiEgfVtUfnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hIXhedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjXSR3I10jXiEjdCNeI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hI3ledX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjaiR3I2ojayEkdSNrI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hJHpedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjWCR3I1gjWSEldiNZI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hJXtedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjYiR3I2IjYyEmdyNjI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hJnxedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohWyR3IVshXSEneCFdIX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hKFBbWn51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+ISh6XnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI1gkdyNYI1khKXYjWSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+ISl7XnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI2gkdyNoI2khKncjaSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+IStPX19+dX5PWCR3Wl0kd15wJHdxciR3c3ckd3d4ISt9eiF9JHcjTyNQJHcjUSNnJHcjZyNoIS1PI2gjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiEsU151fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNnJHcjZyNoIS1PI2gjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiEtVltefnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hLlFedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjZiR3I2YjZyEufCNnI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hL1JedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjYyR3I2MjZCEvfSNkI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hMFNedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjYyR3I2MjZCExTyNkI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hMVRedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjWSR3I1kjWiEyUCNaI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hMlVedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohWyR3IVshXSEzUSFdIX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hM1hbWH51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+ITRTXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IWckdyFnIWghNU8haCF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+ITVUXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IWYkdyFmIWchNlAhZyF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+ITZXW1l+dX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiE3Ul51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNYJHcjWCNZITd9I1kjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiE4VVtjfnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hOVBPc35+ITlVT3R+fiE5Wl51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNkJHcjZCNlITpWI2UjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiE6W151fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNkJHcjZCNlITtXI2UjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiE7XV51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNgJHcjYCNhITxYI2EjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiE8Xl51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNdJHcjXSNeIT1ZI14jbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiE9X151fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNYJHcjWCNZIT5aI1kjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiE+YF51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNXJHcjVyNYIT9bI1gjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiE/Y1tnfnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hQF5edX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjbSR3I20jbiFBWSNuI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hQWFbZn51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+IUJbXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI2MkdyNjI2QhQ1cjZCNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+IUNdX3V+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI2EkdyNhI2IhRFsjYiNjIUldI2MjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiFEYV51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNkJHcjZCNlIUVdI2UjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiFFYl51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNpJHcjaSNqIUZeI2ojbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiFGY151fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNoJHcjaCNpIUdfI2kjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiFHZF51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNYJHcjWCNZIUhgI1kjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiFIZ1tkfnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hSWJedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjViR3I1YjVyFKXiNXI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hSmNedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjYCR3I2AjYSFLXyNhI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hS2RedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjaSR3I2kjaiFMYCNqI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hTGVedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjVyR3I1cjWCFNYSNYI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hTWZedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjWCR3I1gjWSFOYiNZI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34hTmlbZX51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+IyBkXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI1gkdyNYI1kjIWAjWSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+IyFlXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI2gkdyNoI2kjI2EjaSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+IyNoW2p+dX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiMkY151fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNoJHcjaCNpIyVfI2kjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiMlZltsfnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jJmFedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjZiR3I2YjZyMnXSNnI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jJ2JedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjYyR3I2MjZCMoXiNkI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jKGNedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjaiR3I2ojayMpXyNrI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jKWRedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjWCR3I1gjWSMqYCNZI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jKmdbYX51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+IytiXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI2kkdyNpI2ojLF4jaiNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+IyxjYHV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI1YkdyNWI1cjLWUjVyNZJHcjWSNaIy9jI1ojbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiMtal51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNbJHcjWyNdIy5mI10jbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiMubVtrfnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jL2hedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjWSR3I1kjWiMwZCNaI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jMGledX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjXSR3I10jXiMxZSNeI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jMWpedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjViR3I1YjVyMyZiNXI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jMmtedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjWCR3I1gjWSMzZyNZI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jM2xedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjZyR3I2cjaCM0aCNoI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jNG9bbX51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+IzVqYHV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI1skdyNbI10jNmwjXSNjJHcjYyNkIzlrI2QjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiM2cV51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNUJHcjVCNVIzdtI1UjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiM3cl51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNoJHcjaCNpIzhuI2kjbyR3I3AjcSR3I3I7J1MkdzsnUzs9YCVyPCVsTyR3fiM4dVtifnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jOXJbaH51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+IzptXnV+T1gkd1pdJHdecCR3cXIkd3N4JHd6IX0kdyNPI1AkdyNRI2ckdyNnI2gjO2kjaCNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+IztwXmB+dX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjXSR3I10jXiM8bCNeI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jPHFedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjYiR3I2IjYyM9bSNjI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jPXJedX5PWCR3Wl0kd15wJHdxciR3c3gkd3ohfSR3I08jUCR3I1EjWiR3I1ojWyM+biNbI28kdyNwI3EkdyNyOydTJHc7J1M7PWAlcjwlbE8kd34jPnVbaX51fk9YJHdaXSR3XnAkd3FyJHdzeCR3eiF9JHcjTyNQJHcjUSNvJHcjcCNxJHcjcjsnUyR3OydTOz1gJXI8JWxPJHd+Iz9wT3F+fiM/dU9yflwiLFxuICB0b2tlbml6ZXJzOiBbMF0sXG4gIHRvcFJ1bGVzOiB7XCJQcm9ncmFtXCI6WzAsMV19LFxuICB0b2tlblByZWM6IDExOFxufSlcbiJdLAogICJtYXBwaW5ncyI6ICJ1YkFBQSxJQUFBQSxHQUFBLEdBQUFDLEdBQUFELEdBQUEsb0JBQUFFLEdBQUEsb0JBQUFDLEdBQUEsd0JBQUFDLEdBQUEsWUFBQUMsS0FBQSxlQUFBQyxHQUFBTixJQ0lBLElBQUlPLEdBQWEsRUFDWEMsR0FBTixLQUFZLENBQ1IsWUFBWUMsRUFBTUMsRUFBSSxDQUNsQixLQUFLLEtBQU9ELEVBQ1osS0FBSyxHQUFLQyxDQUNkLENBQ0osRUFNTUMsRUFBTixLQUFlLENBSVgsWUFBWUMsRUFBUyxDQUFDLEVBQUcsQ0FDckIsS0FBSyxHQUFLTCxLQUNWLEtBQUssUUFBVSxDQUFDLENBQUNLLEVBQU8sUUFDeEIsS0FBSyxZQUFjQSxFQUFPLGNBQWdCLElBQU0sQ0FDNUMsTUFBTSxJQUFJLE1BQU0sc0RBQXNELENBQzFFLEdBQ0EsS0FBSyxRQUFVQSxFQUFPLFNBQVcsSUFDckMsQ0FVQSxJQUFJQyxFQUFPLENBQ1AsR0FBSSxLQUFLLFFBQ0wsTUFBTSxJQUFJLFdBQVcsd0NBQXdDLEVBQ2pFLE9BQUksT0FBT0EsR0FB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UyxNQUFPLFNBQVUsRUFDdEMsQ0FBRSxJQUFLQSxFQUFLLFFBQVMsTUFBTyxTQUFVLENBQzFDLENBQUMsRUFHWUssR0FBc0JDLEdBQVcsT0FBTyxDQUNqRCxPQUFRQyxHQUFPLFVBQVUsQ0FDckIsTUFBTyxDQUNIQyxHQUFVLENBRU4sUUFBV1IsRUFBSyxRQUNoQixTQUFZQSxFQUFLLFFBQ2pCLE1BQVNBLEVBQUssUUFDZCxJQUFPQSxFQUFLLFFBRVosTUFBU0EsRUFBSyxNQUNkLE9BQVVBLEVBQUssTUFDZixXQUFjQSxFQUFLLE1BR25CLElBQU9BLEVBQUssT0FDWixHQUFNQSxFQUFLLE9BQ1gsS0FBUUEsRUFBSyxPQUNiLElBQU9BLEVBQUssT0FDWixHQUFNQSxFQUFLLE9BQ1gsTUFBU0EsRUFBSyxPQUNkLEtBQVFBLEVBQUssT0FDYixHQUFNQSxFQUFLLE9BQ1gsUUFBV0EsRUFBSyxPQUNoQixTQUFZQSxFQUFLLE9BQ2pCLE9BQVVBLEVBQUssT0FDZixRQUFXQSxFQUFLLE9BQ2hCLEdBQU1BLEVBQUssT0FDWCxNQUFTQSxFQUFLLE9BQ2QsSUFBT0EsRUFBSyxPQUNaLEtBQVFBLEVBQUssT0FDYixHQUFNQSxFQUFLLE9BQ1gsU0FBWUEsRUFBSyxPQUdqQixNQUFTQSxFQUFLLFNBQ2QsUUFBV0EsRUFBSyxRQUNoQixPQUFVQSxFQUFLLE9BR2YsT0FBVUEsRUFBSyxRQUNmLE9BQVVBLEVBQUssUUFDZixPQUFVQSxFQUFLLFFBQ2YsT0FBVUEsRUFBSyxRQUNmLFNBQVlBLEVBQUssUUFDakIsU0FBWUEsRUFBSyxPQUNqQixDQUFDLENBQ1QsQ0FDSixDQUFDLEVBQ0QsS0FBTSxhQUNWLENBQUMsRUFFTSxTQUFTUyxJQUFVLENBQ3RCLE9BQU8sSUFBSUMsR0FBZ0JMLEVBQW1CLENBQ2xEIiwKICAibmFtZXMiOiBbImluZGV4X2V4cG9ydHMiLCAiX19leHBvcnQiLCAiaGlnaGxpZ2h0X2RhcmsiLCAiaGlnaGxpZ2h0X2xpZ2h0IiwgImxlYW5WZXJib3NlTGFuZ3VhZ2UiLCAidmVyYm9zZSIsICJfX3RvQ29tbW9uSlMiLCAibmV4dFByb3BJRCIsICJSYW5nZSIsICJmcm9tIiwgInRvIiwgIk5vZGVQcm9wIiwgImNvbmZpZyIsICJtYXRjaCIsICJOb2RlVHlwZSIsICJ0eXBlIiwgInJlc3VsdCIsICJzdHIiLCAidmFsdWUiLCAiTW91bnRlZFRyZWUiLCAidHJlZSIsICJvdmVybGF5IiwgInBhcnNlciIsICJicmFja2V0ZWQiLCAibm9Qcm9wcyIsICJfTm9kZVR5cGUiLCAibmFtZSIsICJwcm9wcyIsICJpZCIsICJmbGFncyIsICJzcGVjIiwgInNyYyIsICJwcm9wIiwgImdyb3VwIiwgIm1hcCIsICJkaXJlY3QiLCAibm9kZSIsICJncm91cHMiLCAiaSIsICJmb3VuZCIsICJOb2RlU2V0IiwgIl9Ob2RlU2V0IiwgInR5cGVzIiwgIm5ld1R5cGVzIiwgIm5ld1Byb3BzIiwgInNvdXJjZSIsICJhZGQiLCAiQ2FjaGVkTm9kZSIsICJDYWNoZWRJbm5lck5vZGUiLCAiSXRlck1vZGUiLCAiVHJlZSIsICJfVHJlZSIsICJjaGlsZHJlbiIsICJwb3NpdGlvbnMiLCAibGVuZ3RoIiwgIm1vdW50ZWQiLCAiY2giLCAibW9kZSIsICJUcmVlQ3Vyc29yIiwgInBvcyIsICJzaWRlIiwgInNjb3BlIiwgImN1cnNvciIsICJUcmVlTm9kZSIsICJyZXNvbHZlTm9kZSIsICJzdGFja0l0ZXJhdG9yIiwgImVudGVyIiwgImxlYXZlIiwgImFub24iLCAiYyIsICJlbnRlcmVkIiwgImJhbGFuY2VSYW5nZSIsICJkYXRhIiwgImJ1aWxkVHJlZSIsICJGbGF0QnVmZmVyQ3Vyc29yIiwgIl9GbGF0QnVmZmVyQ3Vyc29yIiwgImJ1ZmZlciIsICJpbmRleCIsICJUcmVlQnVmZmVyIiwgIl9UcmVlQnVmZmVyIiwgInNldCIsICJlbmRJbmRleCIsICJzdGFydEluZGV4IiwgImRpciIsICJwaWNrIiwgImNoZWNrU2lkZSIsICJzdGFydEkiLCAiZW5kSSIsICJiIiwgImNvcHkiLCAibGVuIiwgImoiLCAib3ZlcmxheXMiLCAiX2EiLCAicGFyZW50IiwgInNjYW4iLCAiaW5uZXIiLCAiQmFzZU5vZGUiLCAiYmVmb3JlIiwgImFmdGVyIiwgInIiLCAiZ2V0Q2hpbGRyZW4iLCAiY29udGV4dCIsICJtYXRjaE5vZGVDb250ZXh0IiwgImxhc3QiLCAiX1RyZWVOb2RlIiwgIl90cmVlIiwgIl9wYXJlbnQiLCAiZSIsICJuZXh0IiwgInN0YXJ0IiwgIkJ1ZmZlck5vZGUiLCAiQnVmZmVyQ29udGV4dCIsICJoYXNDaGlsZCIsICJyUG9zIiwgImVudGVyQnJhY2tldGVkIiwgInZhbCIsICJjdXIiLCAicCIsICJfQnVmZmVyTm9kZSIsICJwYXJlbnRTdGFydCIsICJpdGVyU3RhY2siLCAiaGVhZHMiLCAicGlja2VkIiwgIm5ld0hlYWRzIiwgIlN0YWNrSXRlcmF0b3IiLCAibGF5ZXJzIiwgIm1vdW50IiwgInJvb3QiLCAibiIsICJkIiwgImNoaWxkIiwgImNhY2hlIiwgImRlcHRoIiwgIm11c3RMZWF2ZSIsICJub2RlU2V0IiwgIm1heEJ1ZmZlckxlbmd0aCIsICJyZXVzZWQiLCAibWluUmVwZWF0VHlwZSIsICJjb250ZXh0SGFzaCIsICJsb29rQWhlYWQiLCAidGFrZU5vZGUiLCAibWluUG9zIiwgImluUmVwZWF0IiwgImVuZCIsICJzaXplIiwgImxvb2tBaGVhZEF0U3RhcnQiLCAiY29udGV4dEF0U3RhcnQiLCAic3RhcnRQb3MiLCAiZmluZEJ1ZmZlclNpemUiLCAiZW5kUG9zIiwgImNvcHlUb0J1ZmZlciIsICJsb2NhbENoaWxkcmVuIiwgImxvY2FsUG9zaXRpb25zIiwgImxvY2FsSW5SZXBlYXQiLCAibGFzdEdyb3VwIiwgImxhc3RFbmQiLCAibWFrZVJlcGVhdExlYWYiLCAidGFrZUZsYXROb2RlIiwgIm1ha2UiLCAibWFrZUJhbGFuY2VkIiwgIm1ha2VUcmVlIiwgIm5vZGVzIiwgIm5vZGVDb3VudCIsICJzdG9wQXQiLCAibGFzdEkiLCAibG9va0FoZWFkUHJvcCIsICJiYXNlIiwgInBhaXIiLCAibWF4U2l6ZSIsICJmb3JrIiwgInNraXAiLCAibWluU3RhcnQiLCAibm9kZVNpemUiLCAibG9jYWxTa2lwcGVkIiwgIm5vZGVTdGFydCIsICJidWZmZXJTdGFydCIsICJub2RlU2l6ZUNhY2hlIiwgImJhbGFuY2VUeXBlIiwgIm1rVG9wIiwgIm1rVHJlZSIsICJ0b3RhbCIsICJtYXhDaGlsZCIsICJkaXZpZGUiLCAib2Zmc2V0IiwgImdyb3VwRnJvbSIsICJncm91cFN0YXJ0IiwgImdyb3VwU2l6ZSIsICJuZXh0U2l6ZSIsICJvbmx5IiwgIlRyZWVGcmFnbWVudCIsICJfVHJlZUZyYWdtZW50IiwgImZyb20iLCAidG8iLCAidHJlZSIsICJvZmZzZXQiLCAib3BlblN0YXJ0IiwgIm9wZW5FbmQiLCAiZnJhZ21lbnRzIiwgInBhcnRpYWwiLCAicmVzdWx0IiwgImYiLCAiY2hhbmdlcyIsICJtaW5HYXAiLCAiZkkiLCAibmV4dEYiLCAiY0kiLCAicG9zIiwgIm9mZiIsICJuZXh0QyIsICJuZXh0UG9zIiwgImN1dCIsICJmRnJvbSIsICJmVG8iLCAiUGFyc2VyIiwgImlucHV0IiwgInJhbmdlcyIsICJTdHJpbmdJbnB1dCIsICJyIiwgIlJhbmdlIiwgInBhcnNlIiwgImRvbmUiLCAic3RyaW5nIiwgInN0b3BwZWRJbm5lciIsICJOb2RlUHJvcCIsICJyYW5nZUZyb20iLCAicmFuZ2VUbyIsICJudW1iZXJzIiwgInMiLCAiaSIsICJuIiwgImlzRXh0ZW5kaW5nQ2hhciIsICJjb2RlIiwgImZyb20iLCAidG8iLCAibWlkIiwgImlzUmVnaW9uYWxJbmRpY2F0b3IiLCAiWldKIiwgImZpbmRDbHVzdGVyQnJlYWsiLCAic3RyIiwgInBvcyIsICJmb3J3YXJkIiwgImluY2x1ZGVFeHRlbmRpbmciLCAibmV4dENsdXN0ZXJCcmVhayIsICJwcmV2Q2x1c3RlckJyZWFrIiwgInN1cnJvZ2F0ZUxvdyIsICJzdXJyb2dhdGVIaWdoIiwgInByZXYiLCAiY29kZVBvaW50QXQiLCAiY29kZVBvaW50U2l6ZSIsICJuZXh0IiwgImlzRXh0ZW5kaW5nQ2hhciIsICJpc1JlZ2lvbmFsSW5kaWNhdG9yIiwgImNvdW50QmVmb3JlIiwgImkiLCAiZm91bmQiLCAiY29kZTAiLCAiY29kZTEiLCAiY2giLCAiY29kZSIsICJUZXh0IiwgIl9UZXh0IiwgInBvcyIsICJuIiwgImZyb20iLCAidG8iLCAidGV4dCIsICJjbGlwIiwgInBhcnRzIiwgIlRleHROb2RlIiwgIm90aGVyIiwgInN0YXJ0IiwgImVuZCIsICJhIiwgIlJhd1RleHRDdXJzb3IiLCAiYiIsICJza2lwIiwgImRpciIsICJQYXJ0aWFsVGV4dEN1cnNvciIsICJpbm5lciIsICJMaW5lQ3Vyc29yIiwgImxpbmVzIiwgIlRleHRMZWFmIiwgIl9UZXh0TGVhZiIsICJsZW5ndGgiLCAidGV4dExlbmd0aCIsICJ0YXJnZXQiLCAiaXNMaW5lIiwgImxpbmUiLCAib2Zmc2V0IiwgImkiLCAic3RyaW5nIiwgIkxpbmUiLCAib3BlbiIsICJzbGljZVRleHQiLCAicHJldiIsICJqb2luZWQiLCAiYXBwZW5kVGV4dCIsICJtaWQiLCAibmV3TGVuIiwgImxpbmVTZXAiLCAicmVzdWx0IiwgInBhcnQiLCAibGVuIiwgIl9UZXh0Tm9kZSIsICJjaGlsZHJlbiIsICJjaGlsZCIsICJlbmRMaW5lIiwgImNoaWxkT3BlbiIsICJ1cGRhdGVkIiwgInRvdGFsTGluZXMiLCAiY29weSIsICJpQSIsICJpQiIsICJlQSIsICJlQiIsICJjaEEiLCAiY2hCIiwgImwiLCAiY2giLCAiZmxhdCIsICJjaHVuayIsICJtYXhDaHVuayIsICJtaW5DaHVuayIsICJjaHVua2VkIiwgImN1cnJlbnRMaW5lcyIsICJjdXJyZW50TGVuIiwgImN1cnJlbnRDaHVuayIsICJhZGQiLCAibGFzdCIsICJub2RlIiwgImZsdXNoIiwgImZpcnN0IiwgInRvcCIsICJvZmZzZXRWYWx1ZSIsICJzaXplIiwgIm5leHQiLCAibGltaXQiLCAidmFsdWUiLCAiZG9uZSIsICJsaW5lQnJlYWsiLCAibnVtYmVyIiwgImZpbmRDbHVzdGVyQnJlYWsiLCAic3RyIiwgImZvcndhcmQiLCAiaW5jbHVkZUV4dGVuZGluZyIsICJEZWZhdWx0U3BsaXQiLCAiTWFwTW9kZSIsICJDaGFuZ2VEZXNjIiwgIl9DaGFuZ2VEZXNjIiwgInNlY3Rpb25zIiwgInJlc3VsdCIsICJpIiwgImlucyIsICJmIiwgInBvc0EiLCAicG9zQiIsICJsZW4iLCAiaW5kaXZpZHVhbCIsICJpdGVyQ2hhbmdlcyIsICJvdGhlciIsICJjb21wb3NlU2V0cyIsICJiZWZvcmUiLCAibWFwU2V0IiwgInBvcyIsICJhc3NvYyIsICJtb2RlIiwgImVuZEEiLCAiZnJvbSIsICJ0byIsICJlbmQiLCAianNvbiIsICJhIiwgIkNoYW5nZVNldCIsICJfQ2hhbmdlU2V0IiwgImluc2VydGVkIiwgImRvYyIsICJmcm9tQSIsICJ0b0EiLCAiZnJvbUIiLCAiX3RvQiIsICJ0ZXh0IiwgImluZGV4IiwgIlRleHQiLCAicmFuZ2VzIiwgInJlc3VsdFNlY3Rpb25zIiwgInJlc3VsdEluc2VydGVkIiwgImZpbHRlcmVkU2VjdGlvbnMiLCAiaXRlciIsICJTZWN0aW9uSXRlciIsICJkb25lIiwgIm5leHQiLCAiYWRkU2VjdGlvbiIsICJhZGRJbnNlcnQiLCAicGFydHMiLCAiY2hhbmdlcyIsICJsZW5ndGgiLCAibGluZVNlcCIsICJ0b3RhbCIsICJmbHVzaCIsICJmb3JjZSIsICJzZXQiLCAicHJvY2VzcyIsICJzcGVjIiwgInN1YiIsICJpbnNlcnQiLCAiaW5zVGV4dCIsICJpbnNMZW4iLCAicGFydCIsICJlIiwgImZvcmNlSm9pbiIsICJsYXN0IiwgInZhbHVlcyIsICJ2YWx1ZSIsICJkZXNjIiwgImVuZEIiLCAic2V0QSIsICJzZXRCIiwgIm1rU2V0IiwgImIiLCAicGllY2UiLCAibGVmdCIsICJvcGVuIiwgInNlY3Rpb25MZW4iLCAiaW5zQiIsICJTZWxlY3Rpb25SYW5nZSIsICJfU2VsZWN0aW9uUmFuZ2UiLCAiZmxhZ3MiLCAibGV2ZWwiLCAiY2hhbmdlIiwgIkVkaXRvclNlbGVjdGlvbiIsICJoZWFkIiwgImluY2x1ZGVBc3NvYyIsICJfRWRpdG9yU2VsZWN0aW9uIiwgIm1haW5JbmRleCIsICJyIiwgInJhbmdlIiwgIm1haW4iLCAid2hpY2giLCAiYW5jaG9yIiwgImJpZGlMZXZlbCIsICJnb2FsQ29sdW1uIiwgInByZXYiLCAiY2hlY2tTZWxlY3Rpb24iLCAic2VsZWN0aW9uIiwgImRvY0xlbmd0aCIsICJuZXh0SUQiLCAiRmFjZXQiLCAiX0ZhY2V0IiwgImNvbWJpbmUiLCAiY29tcGFyZUlucHV0IiwgImNvbXBhcmUiLCAiaXNTdGF0aWMiLCAiZW5hYmxlcyIsICJjb25maWciLCAic2FtZUFycmF5IiwgIkZhY2V0UHJvdmlkZXIiLCAiZGVwcyIsICJnZXQiLCAiZmllbGQiLCAieCIsICJzdGF0ZSIsICJkZXBlbmRlbmNpZXMiLCAiZmFjZXQiLCAidHlwZSIsICJhZGRyZXNzZXMiLCAiX2EiLCAiZ2V0dGVyIiwgImlkIiwgImlkeCIsICJtdWx0aSIsICJkZXBEb2MiLCAiZGVwU2VsIiwgImRlcEFkZHJzIiwgImRlcCIsICJ0ciIsICJlbnN1cmVBbGwiLCAibmV3VmFsIiwgImNvbXBhcmVBcnJheSIsICJvbGRTdGF0ZSIsICJvbGRBZGRyIiwgIm9sZFZhbCIsICJnZXRBZGRyIiwgIlN0YXRlRmllbGQiLCAiYWRkcnMiLCAiY2hhbmdlZCIsICJhZGRyIiwgImVuc3VyZUFkZHIiLCAiZHluYW1pY0ZhY2V0U2xvdCIsICJwcm92aWRlcnMiLCAicHJvdmlkZXJBZGRycyIsICJwIiwgInByb3ZpZGVyVHlwZXMiLCAiZHluYW1pYyIsICJ2YWwiLCAiZGVwQ2hhbmdlZCIsICJvbGRQcm92aWRlcnMiLCAib2xkVmFsdWUiLCAiaW5pdEZpZWxkIiwgIl9TdGF0ZUZpZWxkIiwgImNyZWF0ZUYiLCAidXBkYXRlRiIsICJjb21wYXJlRiIsICJpbml0IiwgIm9sZEluaXQiLCAicmVJbml0IiwgImNyZWF0ZSIsICJQcmVjXyIsICJwcmVjIiwgImV4dCIsICJQcmVjRXh0ZW5zaW9uIiwgIlByZWMiLCAiaW5uZXIiLCAiQ29tcGFydG1lbnQiLCAiX0NvbXBhcnRtZW50IiwgIkNvbXBhcnRtZW50SW5zdGFuY2UiLCAiY29udGVudCIsICJjb21wYXJ0bWVudCIsICJDb25maWd1cmF0aW9uIiwgIl9Db25maWd1cmF0aW9uIiwgImJhc2UiLCAiY29tcGFydG1lbnRzIiwgImR5bmFtaWNTbG90cyIsICJhZGRyZXNzIiwgInN0YXRpY1ZhbHVlcyIsICJmYWNldHMiLCAiZmllbGRzIiwgIm5ld0NvbXBhcnRtZW50cyIsICJmbGF0dGVuIiwgIm9sZEZhY2V0cyIsICJleHRlbnNpb24iLCAic2VlbiIsICJrbm93biIsICJmb3VuZCIsICJzdGF0dXMiLCAibGFuZ3VhZ2VEYXRhIiwgImFsbG93TXVsdGlwbGVTZWxlY3Rpb25zIiwgInYiLCAibGluZVNlcGFyYXRvciIsICJjaGFuZ2VGaWx0ZXIiLCAidHJhbnNhY3Rpb25GaWx0ZXIiLCAidHJhbnNhY3Rpb25FeHRlbmRlciIsICJyZWFkT25seSIsICJBbm5vdGF0aW9uIiwgIkFubm90YXRpb25UeXBlIiwgIlN0YXRlRWZmZWN0VHlwZSIsICJtYXAiLCAiU3RhdGVFZmZlY3QiLCAiX1N0YXRlRWZmZWN0IiwgIm1hcHBpbmciLCAibWFwcGVkIiwgImVmZmVjdHMiLCAiZWZmZWN0IiwgIlRyYW5zYWN0aW9uIiwgIl9UcmFuc2FjdGlvbiIsICJzdGFydFN0YXRlIiwgImFubm90YXRpb25zIiwgInNjcm9sbEludG9WaWV3IiwgImFubiIsICJldmVudCIsICJqb2luUmFuZ2VzIiwgImlBIiwgImlCIiwgIm1lcmdlVHJhbnNhY3Rpb24iLCAic2VxdWVudGlhbCIsICJtYXBGb3JBIiwgIm1hcEZvckIiLCAicmVzb2x2ZVRyYW5zYWN0aW9uSW5uZXIiLCAiZG9jU2l6ZSIsICJzZWwiLCAiYXNBcnJheSIsICJyZXNvbHZlVHJhbnNhY3Rpb24iLCAic3BlY3MiLCAiZmlsdGVyIiwgInMiLCAic2VxIiwgImV4dGVuZFRyYW5zYWN0aW9uIiwgImZpbHRlclRyYW5zYWN0aW9uIiwgImJhY2siLCAiZmlsdGVyZWQiLCAiZmlsdGVycyIsICJleHRlbmRlcnMiLCAibm9uZSIsICJDaGFyQ2F0ZWdvcnkiLCAibm9uQVNDSUlTaW5nbGVDYXNlV29yZENoYXIiLCAid29yZENoYXIiLCAiaGFzV29yZENoYXIiLCAic3RyIiwgImNoIiwgIm1ha2VDYXRlZ29yaXplciIsICJ3b3JkQ2hhcnMiLCAiY2hhciIsICJFZGl0b3JTdGF0ZSIsICJfRWRpdG9yU3RhdGUiLCAiY29tcHV0ZVNsb3QiLCAicmVxdWlyZSIsICJjb25mIiwgImtleSIsICJzdGFydFZhbHVlcyIsICJzbG90IiwgInJlc3VsdDEiLCAibmV3Q2hhbmdlcyIsICJuZXdNYXBwZWQiLCAiaiIsICJtYXBCeSIsICJzdHJpbmciLCAicHJvcCIsICJmaWVsZEluaXQiLCAiY29uZmlndXJhdGlvbiIsICJwaHJhc2UiLCAibSIsICJuIiwgIm5hbWUiLCAic2lkZSIsICJwcm92aWRlciIsICJhdCIsICJjaGFycyIsICJjYXQiLCAic3RhcnQiLCAiZmluZENsdXN0ZXJCcmVhayIsICJrQSIsICJrQiIsICJrIiwgIlJhbmdlVmFsdWUiLCAib3RoZXIiLCAiZnJvbSIsICJ0byIsICJSYW5nZSIsICJNYXBNb2RlIiwgImNtcFZhbCIsICJhIiwgImIiLCAiX1JhbmdlIiwgInZhbHVlIiwgImNtcFJhbmdlIiwgIkNodW5rIiwgIl9DaHVuayIsICJtYXhQb2ludCIsICJwb3MiLCAic2lkZSIsICJlbmQiLCAic3RhcnRBdCIsICJhcnIiLCAibG8iLCAiaGkiLCAibWlkIiwgImRpZmYiLCAib2Zmc2V0IiwgImYiLCAiaSIsICJlIiwgImNoYW5nZXMiLCAibmV3UG9zIiwgInZhbCIsICJjdXJGcm9tIiwgImN1clRvIiwgIm5ld0Zyb20iLCAibmV3VG8iLCAibWFwcGVkIiwgIlJhbmdlU2V0IiwgIl9SYW5nZVNldCIsICJjaHVua1BvcyIsICJjaHVuayIsICJuZXh0TGF5ZXIiLCAibGFzdCIsICJzaXplIiwgImluZGV4IiwgInVwZGF0ZVNwZWMiLCAiYWRkIiwgInNvcnQiLCAiZmlsdGVyRnJvbSIsICJmaWx0ZXJUbyIsICJmaWx0ZXIiLCAiY3VyIiwgIkxheWVyQ3Vyc29yIiwgInNwaWxsIiwgImJ1aWxkZXIiLCAiUmFuZ2VTZXRCdWlsZGVyIiwgInJhbmdlIiwgImNodW5rcyIsICJzdGFydCIsICJ0b3VjaCIsICJuZXh0IiwgIkhlYXBDdXJzb3IiLCAic2V0cyIsICJvbGRTZXRzIiwgIm5ld1NldHMiLCAidGV4dERpZmYiLCAiY29tcGFyYXRvciIsICJtaW5Qb2ludFNpemUiLCAic2V0IiwgInNoYXJlZENodW5rcyIsICJmaW5kU2hhcmVkQ2h1bmtzIiwgInNpZGVBIiwgIlNwYW5DdXJzb3IiLCAic2lkZUIiLCAiZnJvbUEiLCAiZnJvbUIiLCAibGVuZ3RoIiwgImNvbXBhcmUiLCAic2FtZVZhbHVlcyIsICJpdGVyYXRvciIsICJjdXJzb3IiLCAib3BlblJhbmdlcyIsICJhY3RpdmUiLCAib3BlbkNvdW50IiwgInJhbmdlcyIsICJidWlsZCIsICJsYXp5U29ydCIsICJyZXN1bHQiLCAibGF5ZXIiLCAicHJldiIsICJfUmFuZ2VTZXRCdWlsZGVyIiwgIm5ld0FycmF5cyIsICJpbkEiLCAic2hhcmVkIiwgImtub3duIiwgInNraXAiLCAibWluUG9pbnQiLCAicmFuayIsICJmb3J3YXJkIiwgInJhbmdlSW5kZXgiLCAiX0hlYXBDdXJzb3IiLCAiaGVhcCIsICJoZWFwQnViYmxlIiwgInRvcCIsICJjaGlsZEluZGV4IiwgImNoaWxkIiwgInJlbW92ZSIsICJmaW5kTWluSW5kZXgiLCAidHJhY2tPcGVuIiwgImluc2VydCIsICJ3YXNQb2ludCIsICJuZXh0VmFsIiwgIm9wZW4iLCAic3RhcnRBIiwgInN0YXJ0QiIsICJlbmRCIiwgImRQb3MiLCAiYm91bmRzIiwgImJvdW5kQ2hhbmdlIiwgImRFbmQiLCAiY2xpcEVuZCIsICJhcnJheSIsICJmb3VuZCIsICJmb3VuZFBvcyIsICJmaW5kQ29sdW1uIiwgInN0cmluZyIsICJjb2wiLCAidGFiU2l6ZSIsICJzdHJpY3QiLCAiaSIsICJuIiwgImZpbmRDbHVzdGVyQnJlYWsiLCAiQ09VTlQiLCAiU0VUIiwgInRvcCIsICJTdHlsZU1vZHVsZSIsICJzcGVjIiwgIm9wdGlvbnMiLCAiZmluaXNoIiwgInNwbGl0U2VsZWN0b3IiLCAic2VsZWN0b3IiLCAicmVuZGVyIiwgInNlbGVjdG9ycyIsICJ0YXJnZXQiLCAiaXNLZXlmcmFtZXMiLCAibG9jYWwiLCAiaXNBdCIsICJrZXlmcmFtZXMiLCAicHJvcCIsICJ2YWx1ZSIsICJwYXJ0IiwgInNlbCIsICJhIiwgImIiLCAibCIsICJpZCIsICJyb290IiwgIm1vZHVsZXMiLCAic2V0IiwgIm5vbmNlIiwgIlN0eWxlU2V0IiwgImFkb3B0ZWRTZXQiLCAiZG9jIiwgIndpbiIsICJhZG9wdGVkIiwgInNoZWV0IiwgInBvcyIsICJqIiwgImkiLCAibW9kIiwgImluZGV4IiwgImsiLCAidGV4dCIsICJiYXNlIiwgInNoaWZ0IiwgIm1hYyIsICJpZSIsICJpIiwgImNvZGUiLCAibmF2IiwgImRvYyIsICJpZV9lZGdlIiwgImllX3VwdG8xMCIsICJpZV8xMXVwIiwgImllIiwgImdlY2tvIiwgImNocm9tZSIsICJ3ZWJraXQiLCAic2FmYXJpIiwgImlvcyIsICJicm93c2VyIiwgImNvbWJpbmVBdHRycyIsICJzb3VyY2UiLCAidGFyZ2V0IiwgIm5hbWUiLCAibm9BdHRycyIsICJhdHRyc0VxIiwgImEiLCAiYiIsICJpZ25vcmUiLCAia2V5c0EiLCAia2V5c0IiLCAia2V5IiwgInNldEF0dHJzIiwgImRvbSIsICJhdHRycyIsICJpIiwgInZhbHVlIiwgInVwZGF0ZUF0dHJzIiwgInByZXYiLCAiY2hhbmdlZCIsICJnZXRBdHRycyIsICJhdHRyIiwgIldpZGdldFR5cGUiLCAid2lkZ2V0IiwgInZpZXciLCAib3RoZXIiLCAiZXZlbnQiLCAicG9zIiwgInNpZGUiLCAiQmxvY2tUeXBlIiwgIkRlY29yYXRpb24iLCAiUmFuZ2VWYWx1ZSIsICJzdGFydFNpZGUiLCAiZW5kU2lkZSIsICJzcGVjIiwgIk1hcmtEZWNvcmF0aW9uIiwgImJsb2NrIiwgIlBvaW50RGVjb3JhdGlvbiIsICJzdGFydCIsICJlbmQiLCAiZ2V0SW5jbHVzaXZlIiwgIkxpbmVEZWNvcmF0aW9uIiwgIm9mIiwgInNvcnQiLCAiUmFuZ2VTZXQiLCAiX01hcmtEZWNvcmF0aW9uIiwgImZyb20iLCAidG8iLCAiX0xpbmVEZWNvcmF0aW9uIiwgIk1hcE1vZGUiLCAiX1BvaW50RGVjb3JhdGlvbiIsICJpc1JlcGxhY2UiLCAid2lkZ2V0c0VxIiwgImFkZFJhbmdlIiwgInJhbmdlcyIsICJtYXJnaW4iLCAibGFzdCIsICJCbG9ja1dyYXBwZXIiLCAiX0Jsb2NrV3JhcHBlciIsICJ0YWdOYW1lIiwgImF0dHJpYnV0ZXMiLCAiZ2V0U2VsZWN0aW9uIiwgInJvb3QiLCAiY29udGFpbnMiLCAibm9kZSIsICJoYXNTZWxlY3Rpb24iLCAic2VsZWN0aW9uIiwgImNsaWVudFJlY3RzRm9yIiwgInRleHRSYW5nZSIsICJpc0VxdWl2YWxlbnRQb3NpdGlvbiIsICJvZmYiLCAidGFyZ2V0Tm9kZSIsICJ0YXJnZXRPZmYiLCAic2NhbkZvciIsICJkb21JbmRleCIsICJpbmRleCIsICJpc0Jsb2NrRWxlbWVudCIsICJkaXIiLCAibWF4T2Zmc2V0IiwgInBhcmVudCIsICJmbGF0dGVuUmVjdCIsICJyZWN0IiwgImxlZnQiLCAieCIsICJ3aW5kb3dSZWN0IiwgIndpbiIsICJ2cCIsICJnZXRTY2FsZSIsICJlbHQiLCAic2NhbGVYIiwgInNjYWxlWSIsICJzY3JvbGxSZWN0SW50b1ZpZXciLCAieSIsICJ4TWFyZ2luIiwgInlNYXJnaW4iLCAibHRyIiwgImN1ciIsICJzdG9wIiwgImJvdW5kaW5nIiwgInRvcCIsICJtb3ZlWCIsICJtb3ZlWSIsICJyZWN0SGVpZ2h0IiwgImJvdW5kaW5nSGVpZ2h0IiwgIm1vdmVkWCIsICJtb3ZlZFkiLCAic2Nyb2xsYWJsZVBhcmVudHMiLCAiRE9NU2VsZWN0aW9uU3RhdGUiLCAiZG9tU2VsIiwgInJhbmdlIiwgImFuY2hvck5vZGUiLCAiZm9jdXNOb2RlIiwgImFuY2hvck9mZnNldCIsICJmb2N1c09mZnNldCIsICJwcmV2ZW50U2Nyb2xsU3VwcG9ydGVkIiwgImZvY3VzUHJldmVudFNjcm9sbCIsICJzdGFjayIsICJzY3JhdGNoUmFuZ2UiLCAiZGlzcGF0Y2hLZXkiLCAiY29kZSIsICJtb2RzIiwgIm9wdGlvbnMiLCAiZG93biIsICJ1cCIsICJnZXRSb290IiwgImF0RWxlbWVudFN0YXJ0IiwgIm9mZnNldCIsICJpc1Njcm9sbGVkVG9Cb3R0b20iLCAidGV4dE5vZGVCZWZvcmUiLCAic3RhcnROb2RlIiwgInN0YXJ0T2Zmc2V0IiwgInRleHROb2RlQWZ0ZXIiLCAiRE9NUG9zIiwgIl9ET01Qb3MiLCAicHJlY2lzZSIsICJEaXJlY3Rpb24iLCAiTFRSIiwgIlJUTCIsICJkZWMiLCAic3RyIiwgInJlc3VsdCIsICJMb3dUeXBlcyIsICJBcmFiaWNUeXBlcyIsICJCcmFja2V0cyIsICJCcmFja2V0U3RhY2siLCAicCIsICJsIiwgInIiLCAiY2hhclR5cGUiLCAiY2giLCAiQmlkaVJFIiwgIkJpZGlTcGFuIiwgImxldmVsIiwgImZvcndhcmQiLCAib3JkZXIiLCAiYXNzb2MiLCAibWF5YmUiLCAic3BhbiIsICJpc29sYXRlc0VxIiwgImlBIiwgImlCIiwgInR5cGVzIiwgImNvbXB1dGVDaGFyVHlwZXMiLCAibGluZSIsICJyRnJvbSIsICJyVG8iLCAiaXNvbGF0ZXMiLCAib3V0ZXJUeXBlIiwgImlJIiwgInByZXZUeXBlIiwgInByZXZTdHJvbmciLCAidHlwZSIsICJyZXBsYWNlIiwgImoiLCAicHJvY2Vzc0JyYWNrZXRQYWlycyIsICJvcHBvc2l0ZVR5cGUiLCAic0kiLCAiY29udGV4dCIsICJiciIsICJzSiIsICJmbGFncyIsICJlbWJlZCIsICJwcm9jZXNzTmV1dHJhbHMiLCAiYmVmb3JlTCIsICJhZnRlckwiLCAiakkiLCAiZnJvbUoiLCAiZW1pdFNwYW5zIiwgImJhc2VMZXZlbCIsICJvdXJUeXBlIiwgImlDaCIsICJzYW1lRGlyIiwgImlzTnVtIiwgIm5leHQiLCAicmVjdXJzZSIsICJsb2NhbExldmVsIiwgImlTY2FuIiwgInJ1biIsICJpc28iLCAidXB0byIsICJkaXJTd2FwIiwgImNvbXB1dGVTZWN0aW9uT3JkZXIiLCAiY29tcHV0ZU9yZGVyIiwgImRpcmVjdGlvbiIsICJ0cml2aWFsT3JkZXIiLCAibGVuZ3RoIiwgIm1vdmVkT3ZlciIsICJtb3ZlVmlzdWFsbHkiLCAiX2EiLCAic3RhcnRJbmRleCIsICJzcGFuSSIsICJzcGFuRW5kIiwgIm5leHRJIiwgIm5leHRJbmRleCIsICJmaW5kQ2x1c3RlckJyZWFrIiwgIm5leHRTcGFuIiwgIkVkaXRvclNlbGVjdGlvbiIsICJhdXRvRGlyZWN0aW9uIiwgInRleHQiLCAiY2xpY2tBZGRzU2VsZWN0aW9uUmFuZ2UiLCAiRmFjZXQiLCAiZHJhZ01vdmVzU2VsZWN0aW9uJDEiLCAibW91c2VTZWxlY3Rpb25TdHlsZSIsICJleGNlcHRpb25TaW5rIiwgInVwZGF0ZUxpc3RlbmVyIiwgImlucHV0SGFuZGxlciIsICJmb2N1c0NoYW5nZUVmZmVjdCIsICJjbGlwYm9hcmRJbnB1dEZpbHRlciIsICJjbGlwYm9hcmRPdXRwdXRGaWx0ZXIiLCAicGVyTGluZVRleHREaXJlY3Rpb24iLCAidmFsdWVzIiwgIm5hdGl2ZVNlbGVjdGlvbkhpZGRlbiIsICJzY3JvbGxIYW5kbGVyIiwgIlNjcm9sbFRhcmdldCIsICJfU2Nyb2xsVGFyZ2V0IiwgImlzU25hcHNob3QiLCAiY2hhbmdlcyIsICJzdGF0ZSIsICJzY3JvbGxJbnRvVmlldyIsICJTdGF0ZUVmZmVjdCIsICJ0IiwgInNldEVkaXRDb250ZXh0Rm9ybWF0dGluZyIsICJsb2dFeGNlcHRpb24iLCAiZXhjZXB0aW9uIiwgImhhbmRsZXIiLCAiZWRpdGFibGUiLCAibmV4dFBsdWdpbklEIiwgInZpZXdQbHVnaW4iLCAicGx1Z2lucyIsICJWaWV3UGx1Z2luIiwgIl9WaWV3UGx1Z2luIiwgImlkIiwgImNyZWF0ZSIsICJkb21FdmVudEhhbmRsZXJzIiwgImRvbUV2ZW50T2JzZXJ2ZXJzIiwgImJ1aWxkRXh0ZW5zaW9ucyIsICJhcmciLCAiZXZlbnRIYW5kbGVycyIsICJldmVudE9ic2VydmVycyIsICJwcm92aWRlIiwgImRlY28iLCAicGx1Z2luIiwgImV4dCIsICJkZWNvcmF0aW9ucyIsICJwbHVnaW5JbnN0IiwgImNscyIsICJQbHVnaW5JbnN0YW5jZSIsICJ1cGRhdGUiLCAiZSIsICJlZGl0b3JBdHRyaWJ1dGVzIiwgImNvbnRlbnRBdHRyaWJ1dGVzIiwgImJsb2NrV3JhcHBlcnMiLCAib3V0ZXJEZWNvcmF0aW9ucyIsICJhdG9taWNSYW5nZXMiLCAiYmlkaUlzb2xhdGVkUmFuZ2VzIiwgImdldElzb2xhdGVkUmFuZ2VzIiwgInNldHMiLCAiZnJvbURvYyIsICJ0b0RvYyIsICJhY3RpdmUiLCAib3BlbiIsICJhZGQiLCAic2Nyb2xsTWFyZ2lucyIsICJnZXRTY3JvbGxNYXJnaW5zIiwgInJpZ2h0IiwgImJvdHRvbSIsICJtIiwgInN0eWxlTW9kdWxlIiwgIkNoYW5nZWRSYW5nZSIsICJfQ2hhbmdlZFJhbmdlIiwgImZyb21BIiwgInRvQSIsICJmcm9tQiIsICJ0b0IiLCAic2V0IiwgIm1lIiwgImRpZmYiLCAiZEkiLCAickkiLCAibmV4dEQiLCAibmV4dFIiLCAiVmlld1VwZGF0ZSIsICJfVmlld1VwZGF0ZSIsICJ0cmFuc2FjdGlvbnMiLCAiQ2hhbmdlU2V0IiwgInRyIiwgImNoYW5nZWRSYW5nZXMiLCAibm9DaGlsZHJlbiIsICJUaWxlIiwgInRyYWNrIiwgInRpbGUiLCAiY2hpbGQiLCAiYWZ0ZXIiLCAiRG9jVGlsZSIsICJDb21wb3NpdGVUaWxlIiwgInRyYWNraW5nIiwgInJtJDEiLCAiZiIsICJCbG9ja1dyYXBwZXJUaWxlIiwgImJlZm9yZSIsICJiZWZvcmVPZmYiLCAiYWZ0ZXJPZmYiLCAiX0Jsb2NrV3JhcHBlclRpbGUiLCAid3JhcHBlciIsICJMaW5lVGlsZSIsICJfTGluZVRpbGUiLCAia2VlcEF0dHJzIiwgImZvckNvb3JkcyIsICJzY2FuIiwgIm9uU2FtZUxpbmUiLCAiZm91bmQiLCAiZmFsbGJhY2tSZWN0IiwgInNhdyIsICJyZWN0cyIsICJwb3NBIiwgInBvc0IiLCAiTWFya1RpbGUiLCAiX01hcmtUaWxlIiwgIm1hcmsiLCAiVGV4dFRpbGUiLCAiX1RleHRUaWxlIiwgImZsYXR0ZW4iLCAiV2lkZ2V0VGlsZSIsICJfV2lkZ2V0VGlsZSIsICJjdXN0b20iLCAiZnJvbUJhY2siLCAiVGV4dCIsICJXaWRnZXRCdWZmZXJUaWxlIiwgImltZyIsICJUaWxlUG9pbnRlciIsICJkaXN0IiwgIndhbGtlciIsICJiZWZvcmVCcmVhayIsICJwYXJlbnRzIiwgImJyayIsICJ0YWtlIiwgIk9wZW5XcmFwcGVyIiwgInJhbmsiLCAiVGlsZUJ1aWxkZXIiLCAiY2FjaGUiLCAibWFya3MiLCAib3BlblN0YXJ0IiwgImNvbXBvc2l0aW9uIiwgImZyZWVOb2RlIiwgImhlYWQiLCAibnciLCAib2xkVGlsZSIsICJub1NwYWNlIiwgImxpbmVCYXNlQXR0cnMiLCAiaGFzQ29udGVudCIsICJCcmVha1dpZGdldCIsICJ3cmFwIiwgIlRleHRTdHJlYW0iLCAibGVuIiwgIm1heExlbiIsICJsaW5lQnJlYWsiLCAiZG9uZSIsICJjaGFycyIsICJidWNrZXRzIiwgIlRpbGVDYWNoZSIsICJidWNrZXQiLCAidGVzdCIsICJ3aWRnZXRzIiwgInBhc3MiLCAiVGlsZVVwZGF0ZSIsICJvbGQiLCAiZGlzYWxsb3dCbG9ja0VmZmVjdHNGb3IiLCAiY29tcG9zaXRpb25Db250ZXh0IiwgInNraXBBIiwgImluY1N0YXJ0IiwgImluY0VuZCIsICJhY3RpdmVNYXJrcyIsICJnZXRNYXJrcyIsICJvcGVuTWFya3MiLCAicGVuZGluZ0xpbmVBdHRycyIsICJtYXJrQ291bnQiLCAib3BlbkVuZCIsICJOdWxsV2lkZ2V0IiwgIndpZGdldEZsYWdzIiwgImFkZExpbmVEZWNvIiwgInJlcXVpcmVUZXh0IiwgInB0ciIsICJ0YWciLCAiRG9jVmlldyIsICJyZWFkQ29tcG9zaXRpb25BdCIsICJ0b3VjaGVzQ29tcG9zaXRpb24iLCAiZmluZENvbXBvc2l0aW9uUmFuZ2UiLCAicHJldkRlY28iLCAicHJldldyYXBwZXJzIiwgImRlY29EaWZmIiwgImZpbmRDaGFuZ2VkRGVjbyIsICJibG9ja0RpZmYiLCAiZmluZENoYW5nZWRXcmFwcGVycyIsICJvYnNlcnZlciIsICJidWlsZGVyIiwgImRlc3Ryb3lEcm9wcGVkIiwgImdhcHMiLCAiQmxvY2tHYXBXaWRnZXQiLCAiZWZmZWN0IiwgIm11c3RSZWFkIiwgImZyb21Qb2ludGVyIiwgImFjdGl2ZUVsdCIsICJmb2N1c2VkIiwgInNlbGVjdGlvbk5vdEZvY3VzIiwgImZvcmNlIiwgIm1haW4iLCAiYW5jaG9yIiwgImJldHdlZW5VbmVkaXRhYmxlIiwgImR1bW15IiwgImluVW5lZGl0YWJsZSIsICJyYXdTZWwiLCAibmV4dFRvIiwgIm5leHRUb1VuZWRpdGFibGUiLCAic2VsIiwgImN1cnNvciIsICJsaW5lU3RhcnQiLCAibmV3UmFuZ2UiLCAiYmlhcyIsICJiZWZvcmVCYWQiLCAiYWZ0ZXJCYWQiLCAidmlld3BvcnQiLCAiY29udGVudFdpZHRoIiwgImlzV2lkZXIiLCAid2lkZXN0IiwgInNwYWNlQWJvdmUiLCAibWVhc3VyZUJvdW5kcyIsICJjaGlsZFJlY3QiLCAiaGVpZ2h0IiwgIndpZHRoIiwgImxpbmVNZWFzdXJlIiwgInRvdGFsV2lkdGgiLCAidGV4dEhlaWdodCIsICJsaW5lSGVpZ2h0IiwgImNoYXJXaWR0aCIsICJ2cyIsICJhbGxEZWNvIiwgImQiLCAiZHluYW1pY091dGVyIiwgIm91dGVyRGVjbyIsICJkeW5hbWljIiwgInYiLCAicmVmIiwgIm1hcmdpbnMiLCAidGFyZ2V0UmVjdCIsICJvZmZzZXRXaWR0aCIsICJvZmZzZXRIZWlnaHQiLCAicmV1c2VkIiwgImZpbmRDb21wb3NpdGlvbk5vZGUiLCAiaGVhZFBvcyIsICJ0ZXh0QmVmb3JlIiwgInRleHRBZnRlciIsICJ0ZXh0Tm9kZSIsICJ0aWxlQWZ0ZXIiLCAidGlsZUJlZm9yZSIsICJpbnYiLCAiRGVjb3JhdGlvbkNvbXBhcmF0b3IkMSIsICJjb21wIiwgIldyYXBwZXJDb21wYXJhdG9yIiwgImluc2lkZSIsICJ0b3VjaGVkIiwgImdyb3VwQXQiLCAiY2F0ZWdvcml6ZSIsICJsaW5lUG9zIiwgImNhdCIsICJwb3NBdENvb3Jkc0ltcHJlY2lzZSIsICJjb250ZW50UmVjdCIsICJpbnRvIiwgImNvbnRlbnQiLCAiZmluZENvbHVtbiIsICJibG9ja0F0IiwgImJlc3QiLCAibW92ZVRvTGluZUJvdW5kYXJ5IiwgImluY2x1ZGVXcmFwIiwgImNvb3JkcyIsICJlZGl0b3JSZWN0IiwgIm1vdmVCeUNoYXIiLCAiYnkiLCAic3BhbnMiLCAiY2hlY2siLCAiY2hhciIsICJieUdyb3VwIiwgIm5leHRDYXQiLCAiQ2hhckNhdGVnb3J5IiwgIm1vdmVWZXJ0aWNhbGx5IiwgImRpc3RhbmNlIiwgInN0YXJ0UG9zIiwgImdvYWwiLCAic3RhcnRZIiwgInN0YXJ0Q29vcmRzIiwgImRvY1RvcCIsICJyZXNvbHZlZEdvYWwiLCAicG9zQXRDb29yZHMiLCAic2tpcEF0b21pY1JhbmdlcyIsICJhdG9tcyIsICJtb3ZlZCIsICJza2lwQXRvbXNGb3JTZWxlY3Rpb24iLCAidXBkYXRlZCIsICJza2lwQXRvbXMiLCAib2xkUG9zIiwgIm5ld1BvcyIsICJQb3NBc3NvYyIsICJzY2FuWSIsICJ5T2Zmc2V0IiwgImhhbGZMaW5lIiwgInBvc0F0Q29vcmRzSW5saW5lIiwgImNsb3Nlc3QiLCAiY2xvc2VzdFJlY3QiLCAiZHhDbG9zZXN0IiwgImR5Q2xvc2VzdCIsICJyb3dUb3AiLCAicm93Qm90IiwgImNoZWNrUmVjdHMiLCAiZHgiLCAiZHkiLCAiZGlyQXQiLCAiaW5uZXIiLCAiaW5uZXJPZmYiLCAiTGluZUJyZWFrUGxhY2Vob2xkZXIiLCAiRE9NUmVhZGVyIiwgInBvaW50cyIsICJFZGl0b3JTdGF0ZSIsICJvbGRMZW4iLCAibmV4dFRpbGUiLCAiaXNFbXB0eVRvRW5kIiwgInBvaW50IiwgInJlIiwgIm5leHRCcmVhayIsICJicmVha1NpemUiLCAiZnJvbVZpZXciLCAiaXNBdEVuZCIsICJ3IiwgIm92ZXJyaWRlIiwgIkRPTVBvaW50IiwgIkRPTUNoYW5nZSIsICJ0eXBlT3ZlciIsICJpSGVhZCIsICJpQW5jaG9yIiwgImRvbUJvdW5kc0Fyb3VuZCIsICJzZWxQb2ludHMiLCAic2VsZWN0aW9uUG9pbnRzIiwgInJlYWRlciIsICJzZWxlY3Rpb25Gcm9tUG9pbnRzIiwgIm9mZkZyb20iLCAib2ZmVG8iLCAiZnJvbUkiLCAiZnJvbVN0YXJ0IiwgInRvSSIsICJ0b0VuZCIsICJwcmV2RW5kIiwgImFwcGx5RE9NQ2hhbmdlIiwgImRvbUNoYW5nZSIsICJjaGFuZ2UiLCAibmV3U2VsIiwgImxhc3RLZXkiLCAicHJlZmVycmVkUG9zIiwgInByZWZlcnJlZFNpZGUiLCAiZmluZERpZmYiLCAic2FtZVNlbFBvcyIsICJhcHBseURPTUNoYW5nZUlubmVyIiwgInVzZXJFdmVudCIsICJkZWZhdWx0VHIiLCAiZGVmYXVsdEluc2VydCIsICJhcHBseURlZmF1bHRJbnNlcnQiLCAiaCIsICJzdGFydFN0YXRlIiwgImluQXRvbWljIiwgIm1haW5TZWwiLCAicmVwbGFjZWQiLCAiY29tcG9zaXRpb25SYW5nZSIsICJkTGVuIiwgInJhbmdlQ2hhbmdlcyIsICJzZWxPZmYiLCAibWluTGVuIiwgImFkanVzdCIsICJtb3ZlIiwgImJhc2UiLCAiSW5wdXRTdGF0ZSIsICJvcmlnaW4iLCAiZmlyZWZveENvcHlDdXRIYWNrIiwgImV2ZW50QmVsb25nc1RvRWRpdG9yIiwgImhhbmRsZXJzIiwgImNvbXB1dGVIYW5kbGVycyIsICJwYXNzaXZlIiwgImV4aXN0cyIsICJtb2RpZmllckNvZGVzIiwgInBlbmRpbmciLCAiUGVuZGluZ0tleXMiLCAiRW1hY3N5UGVuZGluZ0tleXMiLCAibW91c2VTZWxlY3Rpb24iLCAiYmluZEhhbmRsZXIiLCAicmVjb3JkIiwgIm9ic2VydmVycyIsICJkcmFnU2Nyb2xsTWFyZ2luIiwgImRyYWdTY3JvbGxTcGVlZCIsICJNb3VzZVNlbGVjdGlvbiIsICJzdGFydEV2ZW50IiwgInN0eWxlIiwgIm11c3RTZWxlY3QiLCAiYWRkc1NlbGVjdGlvblJhbmdlIiwgImlzSW5QcmltYXJ5U2VsZWN0aW9uIiwgImdldENsaWNrVHlwZSIsICJzeCIsICJzeSIsICJmYWNldCIsICJkcmFnTW92ZXNTZWxlY3Rpb24iLCAiYnJva2VuQ2xpcGJvYXJkQVBJIiwgImNhcHR1cmVQYXN0ZSIsICJkb1Bhc3RlIiwgInRleHRGaWx0ZXIiLCAiZmlsdGVyIiwgImlucHV0IiwgImJ5TGluZSIsICJsYXN0TGluZXdpc2VDb3B5IiwgImxhc3RMaW5lIiwgImluc2VydCIsICJtYWtlU3R5bGUiLCAiYmFzaWNNb3VzZVNlbGVjdGlvbiIsICJtdXN0Rm9jdXMiLCAibW91c2VTZWwiLCAicmFuZ2VGb3JDbGljayIsICJ2aXN1YWwiLCAiQmFkTW91c2VEZXRhaWwiLCAibGFzdE1vdXNlRG93biIsICJsYXN0TW91c2VEb3duQ291bnQiLCAibGFzdE1vdXNlRG93blRpbWUiLCAibGFzdFRpbWUiLCAic3RhcnRTZWwiLCAiZXh0ZW5kIiwgIm11bHRpcGxlIiwgInJlbW92ZWQiLCAic3RhcnRSYW5nZSIsICJyZW1vdmVSYW5nZUFyb3VuZCIsICJpbnB1dFN0YXRlIiwgImRyb3BUZXh0IiwgImRpcmVjdCIsICJkcm9wUG9zIiwgImRyYWdnZWRDb250ZW50IiwgImRlbCIsICJpbnMiLCAiZmlsZXMiLCAicmVhZCIsICJmaW5pc2hGaWxlIiwgInMiLCAiZGF0YSIsICJjYXB0dXJlQ29weSIsICJjb3BpZWRSYW5nZSIsICJsaW5ld2lzZSIsICJpc0ZvY3VzQ2hhbmdlIiwgIkFubm90YXRpb24iLCAiZm9jdXNDaGFuZ2VUcmFuc2FjdGlvbiIsICJmb2N1cyIsICJlZmZlY3RzIiwgImdldEVmZmVjdCIsICJ1cGRhdGVGb3JGb2N1c0NoYW5nZSIsICJfYiIsICJzdGFydFZpZXdIZWlnaHQiLCAiYXBwbGllZEZpcmVmb3hIYWNrIiwgIndyYXBwaW5nV2hpdGVTcGFjZSIsICJoZWlnaHRDaGFuZ2VGbGFnIiwgImNsZWFySGVpZ2h0Q2hhbmdlRmxhZyIsICJIZWlnaHRPcmFjbGUiLCAibGluZVdyYXBwaW5nIiwgImxpbmVzIiwgIndoaXRlU3BhY2UiLCAibGluZUhlaWdodHMiLCAibmV3SGVpZ2h0IiwgImxpbmVMZW5ndGgiLCAia25vd25IZWlnaHRzIiwgIk1lYXN1cmVkSGVpZ2h0cyIsICJoZWlnaHRzIiwgIkJsb2NrSW5mbyIsICJfQmxvY2tJbmZvIiwgIl9jb250ZW50IiwgIlF1ZXJ5VHlwZSIsICJFcHNpbG9uIiwgIkhlaWdodE1hcCIsICJfSGVpZ2h0TWFwIiwgIl9mcm9tIiwgIl90byIsICJub2RlcyIsICJvbGREb2MiLCAib3JhY2xlIiwgIk5vZGVCdWlsZGVyIiwgIkhlaWdodE1hcFRleHQiLCAic3BsaXQiLCAiSGVpZ2h0TWFwQnJhbmNoIiwgInZhbCIsICJTcGFjZURlY28iLCAiSGVpZ2h0TWFwQmxvY2siLCAiX29yYWNsZSIsICJfdmFsdWUiLCAiX3R5cGUiLCAibWVhc3VyZWQiLCAiX2ZvcmNlIiwgIl9IZWlnaHRNYXBUZXh0IiwgImFib3ZlIiwgIkhlaWdodE1hcEdhcCIsICJfSGVpZ2h0TWFwR2FwIiwgImZpcnN0TGluZSIsICJwZXJMaW5lIiwgInBlckNoYXIiLCAidG90YWxQZXJMaW5lIiwgImd1ZXNzIiwgImxpbmVUb3AiLCAibGluZXNBYm92ZSIsICJmaXJzdCIsICJzaW5nbGVIZWlnaHQiLCAibWlkIiwgInJpZ2h0VG9wIiwgInJpZ2h0T2Zmc2V0IiwgInN1YlF1ZXJ5IiwgInJpZ2h0U3RhcnQiLCAibWVyZ2VHYXBzIiwgInJlYmFsYW5jZSIsICJhcm91bmQiLCAicmVsZXZhbnRXaWRnZXRIZWlnaHQiLCAiX05vZGVCdWlsZGVyIiwgImJyZWFrcyIsICJnYXAiLCAiaGVpZ2h0UmVsZXZhbnREZWNvQ2hhbmdlcyIsICJEZWNvcmF0aW9uQ29tcGFyYXRvciIsICJ2aXNpYmxlUGl4ZWxSYW5nZSIsICJwYWRkaW5nVG9wIiwgInBhcmVudFJlY3QiLCAiaW5XaW5kb3ciLCAiZnVsbFBpeGVsUmFuZ2UiLCAiTGluZUdhcCIsICJzaXplIiwgImRpc3BsYXlTaXplIiwgImdBIiwgImdCIiwgInZpZXdTdGF0ZSIsICJ3cmFwcGluZyIsICJMaW5lR2FwV2lkZ2V0IiwgInZlcnRpY2FsIiwgIlZpZXdTdGF0ZSIsICJJZFNjYWxlciIsICJndWVzc1dyYXBwaW5nIiwgInN0YXRpY0RlY28iLCAidmlld3BvcnRzIiwgIlZpZXdwb3J0IiwgInNjYWxlciIsICJCaWdTY2FsZXIiLCAic2NhbGVCbG9jayIsICJzY3JvbGxUYXJnZXQiLCAiY29udGVudENoYW5nZXMiLCAiaGVpZ2h0Q2hhbmdlcyIsICJwcmV2SGVpZ2h0IiwgInNjcm9sbEFuY2hvciIsICJ2aWV3cG9ydENoYW5nZSIsICJyZWZyZXNoIiwgImRvbVJlY3QiLCAibWVhc3VyZUNvbnRlbnQiLCAicGFkZGluZ0JvdHRvbSIsICJzY3JvbGxUb3AiLCAicGl4ZWxWaWV3cG9ydCIsICJkVG9wIiwgImRCb3R0b20iLCAiaW5WaWV3IiwgIm1hcmdpblRvcCIsICJtYXAiLCAidmlzaWJsZVRvcCIsICJ2aXNpYmxlQm90dG9tIiwgInZpZXdIZWlnaHQiLCAidG9wUG9zIiwgIm1hcHBlZCIsICJjdXJyZW50IiwgIm1heU1lYXN1cmUiLCAiaGFsZk1hcmdpbiIsICJkb3VibGVNYXJnaW4iLCAiYWRkR2FwIiwgInN0cnVjdHVyZSIsICJhdm9pZCIsICJmaW5kIiwgImNoZWNrTGluZSIsICJsaW5lU3RydWN0dXJlIiwgInZpZXdGcm9tIiwgInZpZXdUbyIsICJtYXJnaW5IZWlnaHQiLCAiYm90IiwgInRhcmdldEZyYWMiLCAiZmluZEZyYWN0aW9uIiwgInNwYWNlRnJhYyIsICJmaW5kUG9zaXRpb24iLCAibWFyZ2luV2lkdGgiLCAiaG9yaXpPZmZzZXQiLCAicHhMZWZ0IiwgInB4UmlnaHQiLCAiZnJhY3Rpb24iLCAic3RhdGVEZWNvIiwgInRvdGFsIiwgInJhdGlvIiwgImNvdW50ZWQiLCAiYXJyYXkiLCAib3V0ZXIiLCAiX0JpZ1NjYWxlciIsICJoZWlnaHRNYXAiLCAidnBIZWlnaHQiLCAiZG9tQmFzZSIsICJvYmoiLCAibiIsICJiVG9wIiwgImJCb3R0b20iLCAidGhlbWUiLCAic3RycyIsICJkYXJrVGhlbWUiLCAiYmFzZVRoZW1lSUQiLCAiU3R5bGVNb2R1bGUiLCAiYmFzZUxpZ2h0SUQiLCAiYmFzZURhcmtJRCIsICJsaWdodERhcmtJRHMiLCAiYnVpbGRUaGVtZSIsICJzY29wZXMiLCAiYmFzZVRoZW1lJDEiLCAib2JzZXJ2ZU9wdGlvbnMiLCAidXNlQ2hhckRhdGEiLCAiRE9NT2JzZXJ2ZXIiLCAibXV0YXRpb25zIiwgIm11dCIsICJFZGl0Q29udGV4dE1hbmFnZXIiLCAiZW50cmllcyIsICJnIiwgIndhc0NoYW5nZWQiLCAic2FmYXJpU2VsZWN0aW9uUmFuZ2VIYWNrIiwgImxvY2FsIiwgImtleUNvZGUiLCAiZmx1c2giLCAicmVjb3JkcyIsICJyZWFkU2VsZWN0aW9uIiwgImhhbmRsZWQiLCAicmVjIiwgImNoaWxkQmVmb3JlIiwgImZpbmRDaGlsZCIsICJjaGlsZEFmdGVyIiwgIl9jIiwgImN1clRpbGUiLCAiYnVpbGRTZWxlY3Rpb25SYW5nZUZyb21SYW5nZSIsICJjdXJBbmNob3IiLCAiZGVsZXRlcyIsICJuZXdMZW4iLCAiZm9ybWF0IiwgImxpbmVTdHlsZSIsICJ0aGlja25lc3MiLCAiZHJpZnRlZCIsICJhYm9ydCIsICJfZnJvbUIiLCAiX3RvQiIsICJyZXZlcnRlZCIsICJjb250ZXh0UG9zIiwgImNsaXBMZW4iLCAiYyIsICJlZGl0b3JQb3MiLCAiRWRpdG9yVmlldyIsICJfRWRpdG9yVmlldyIsICJjb25maWciLCAiZGlzcGF0Y2giLCAidHJzIiwgIlRyYW5zYWN0aW9uIiwgInJlZHJhd24iLCAiYXR0cnNDaGFuZ2VkIiwgImZvY3VzRmxhZyIsICJkaXNwYXRjaEZvY3VzIiwgInBlbmRpbmdLZXkiLCAiQ2FjaGVkT3JkZXIiLCAibGlzdGVuZXIiLCAibmV3U3RhdGUiLCAiaGFkRm9jdXMiLCAicHJldlNwZWNzIiwgInNwZWNzIiwgIm5ld1BsdWdpbnMiLCAic0RPTSIsICJzY3JvbGxBbmNob3JQb3MiLCAic2Nyb2xsQW5jaG9ySGVpZ2h0IiwgIm1lYXN1cmluZyIsICJCYWRNZWFzdXJlIiwgImVkaXRvckF0dHJzIiwgImF0dHJzRnJvbUZhY2V0IiwgImNvbnRlbnRBdHRycyIsICJjaGFuZ2VkQ29udGVudCIsICJjaGFuZ2VkRWRpdG9yIiwgImRpdiIsICJub25jZSIsICJyZXF1ZXN0IiwgImtub3duIiwgImluaXRpYWwiLCAiTWF4QmlkaUxpbmUiLCAiZW50cnkiLCAic2Nyb2xsTGVmdCIsICJwcmVmaXgiLCAiUHJlYyIsICJfQ2FjaGVkT3JkZXIiLCAiZnJlc2giLCAibGFzdERpciIsICJzb3VyY2VzIiwgImN1cnJlbnRQbGF0Zm9ybSIsICJVbmljb2RlUmVnZXhwU3VwcG9ydCIsICJHdXR0ZXJNYXJrZXIiLCAiUmFuZ2VWYWx1ZSIsICJvdGhlciIsICJkb20iLCAiTWFwTW9kZSIsICJuZXh0VGFnSUQiLCAiVGFnIiwgIl9UYWciLCAibmFtZSIsICJzZXQiLCAiYmFzZSIsICJtb2RpZmllZCIsICJtb2QiLCAibmFtZU9yUGFyZW50IiwgInBhcmVudCIsICJ0YWciLCAidCIsICJNb2RpZmllciIsICJhIiwgImIiLCAibmV4dE1vZGlmaWVySUQiLCAiX01vZGlmaWVyIiwgIm1vZHMiLCAiZXhpc3RzIiwgInNhbWVBcnJheSIsICJtIiwgImNvbmZpZ3MiLCAicG93ZXJTZXQiLCAiY29uZmlnIiwgIngiLCAiYXJyYXkiLCAic2V0cyIsICJpIiwgImoiLCAiZSIsICJzdHlsZVRhZ3MiLCAic3BlYyIsICJieU5hbWUiLCAicHJvcCIsICJ0YWdzIiwgInBhcnQiLCAicGllY2VzIiwgIm1vZGUiLCAicmVzdCIsICJwb3MiLCAibmV4dCIsICJsYXN0IiwgImlubmVyIiwgInJ1bGUiLCAiUnVsZSIsICJydWxlTm9kZVByb3AiLCAiTm9kZVByb3AiLCAiY3VyIiwgInJvb3QiLCAidGFrZSIsICJjb3B5IiwgImNvbnRleHQiLCAib3RoZXIiLCAidGFnSGlnaGxpZ2h0ZXIiLCAib3B0aW9ucyIsICJtYXAiLCAic3R5bGUiLCAic2NvcGUiLCAiYWxsIiwgImNscyIsICJzdWIiLCAidGFnQ2xhc3MiLCAidCIsICJUYWciLCAiY29tbWVudCIsICJuYW1lIiwgInR5cGVOYW1lIiwgInByb3BlcnR5TmFtZSIsICJsaXRlcmFsIiwgInN0cmluZyIsICJudW1iZXIiLCAiY29udGVudCIsICJoZWFkaW5nIiwgImtleXdvcmQiLCAib3BlcmF0b3IiLCAicHVuY3R1YXRpb24iLCAiYnJhY2tldCIsICJtZXRhIiwgInRhZ3MiLCAidmFsIiwgImNsYXNzSGlnaGxpZ2h0ZXIiLCAidGFnSGlnaGxpZ2h0ZXIiLCAiX2EiLCAibGFuZ3VhZ2VEYXRhUHJvcCIsICJOb2RlUHJvcCIsICJkZWZpbmVMYW5ndWFnZUZhY2V0IiwgImJhc2VEYXRhIiwgIkZhY2V0IiwgInZhbHVlcyIsICJzdWJsYW5ndWFnZVByb3AiLCAiTGFuZ3VhZ2UiLCAiZGF0YSIsICJwYXJzZXIiLCAiZXh0cmFFeHRlbnNpb25zIiwgIm5hbWUiLCAiRWRpdG9yU3RhdGUiLCAic3ludGF4VHJlZSIsICJsYW5ndWFnZSIsICJzdGF0ZSIsICJwb3MiLCAic2lkZSIsICJ0b3AiLCAidG9wTm9kZUF0IiwgImJhc2UiLCAic3ViIiwgImlubmVyTm9kZSIsICJzdWJsYW5nIiwgImxhbmciLCAicmVzdWx0IiwgImV4cGxvcmUiLCAidHJlZSIsICJmcm9tIiwgIm1vdW50IiwgInIiLCAic2l6ZSIsICJpIiwgImNoIiwgIlRyZWUiLCAiU3RhdGVFZmZlY3QiLCAidG9wTGFuZyIsICJub2RlIiwgIkl0ZXJNb2RlIiwgIkxSTGFuZ3VhZ2UiLCAiX0xSTGFuZ3VhZ2UiLCAic3BlYyIsICJ0eXBlIiwgIm9wdGlvbnMiLCAiZmllbGQiLCAiRG9jSW5wdXQiLCAiZG9jIiwgInBvcyIsICJmcm9tIiwgInRvIiwgInN0cmluZ1N0YXJ0IiwgImN1cnJlbnRDb250ZXh0IiwgIlBhcnNlQ29udGV4dCIsICJfUGFyc2VDb250ZXh0IiwgInBhcnNlciIsICJzdGF0ZSIsICJmcmFnbWVudHMiLCAidHJlZSIsICJ0cmVlTGVuIiwgInZpZXdwb3J0IiwgInNraXBwZWQiLCAic2NoZWR1bGVPbiIsICJUcmVlIiwgInVudGlsIiwgInVwdG8iLCAiX2EiLCAiZW5kVGltZSIsICJkb25lIiwgIlRyZWVGcmFnbWVudCIsICJmIiwgInByZXYiLCAiciIsICJjdXRGcmFnbWVudHMiLCAiY2hhbmdlcyIsICJuZXdTdGF0ZSIsICJyYW5nZXMiLCAiZnJvbUEiLCAidG9BIiwgImZyb21CIiwgInRvQiIsICJzdGFydExlbiIsICJQYXJzZXIiLCAiaW5wdXQiLCAiY3giLCAiTm9kZVR5cGUiLCAiZnJhZ3MiLCAiTGFuZ3VhZ2VTdGF0ZSIsICJfTGFuZ3VhZ2VTdGF0ZSIsICJjb250ZXh0IiwgInRyIiwgIm5ld0N4IiwgInZwVG8iLCAicGFyc2VTdGF0ZSIsICJsYW5ndWFnZSIsICJMYW5ndWFnZSIsICJTdGF0ZUZpZWxkIiwgInZhbHVlIiwgInJlcXVlc3RJZGxlIiwgImNhbGxiYWNrIiwgInRpbWVvdXQiLCAiaWRsZSIsICJpc0lucHV0UGVuZGluZyIsICJwYXJzZVdvcmtlciIsICJWaWV3UGx1Z2luIiwgInZpZXciLCAidXBkYXRlIiwgImZpZWxkIiwgImRlYWRsaW5lIiwgIm5vdyIsICJ2aWV3cG9ydEZpcnN0IiwgImVyciIsICJsb2dFeGNlcHRpb24iLCAiRmFjZXQiLCAibGFuZ3VhZ2VzIiwgIkVkaXRvclZpZXciLCAibGFuZyIsICJMYW5ndWFnZVN1cHBvcnQiLCAic3VwcG9ydCIsICJIaWdobGlnaHRTdHlsZSIsICJfSGlnaGxpZ2h0U3R5bGUiLCAic3BlY3MiLCAib3B0aW9ucyIsICJtb2RTcGVjIiwgImRlZiIsICJzcGVjIiwgImNscyIsICJTdHlsZU1vZHVsZSIsICJhbGwiLCAic2NvcGVPcHQiLCAiTGFuZ3VhZ2UiLCAidHlwZSIsICJsYW5ndWFnZURhdGFQcm9wIiwgInRhZ0hpZ2hsaWdodGVyIiwgInN0eWxlIiwgImRlZmF1bHRIaWdobGlnaHRTdHlsZSIsICJIaWdobGlnaHRTdHlsZSIsICJ0YWdzIiwgIm5vVG9rZW5zIiwgInR5cGVBcnJheSIsICJOb2RlVHlwZSIsICJ3YXJuZWQiLCAiYnlUYWciLCAiZGVmYXVsdFRhYmxlIiwgImxlZ2FjeU5hbWUiLCAibmFtZSIsICJjcmVhdGVUb2tlblR5cGUiLCAibm9Ub2tlbnMiLCAid2FybkZvclBhcnQiLCAicGFydCIsICJtc2ciLCAid2FybmVkIiwgImNyZWF0ZVRva2VuVHlwZSIsICJleHRyYSIsICJ0YWdTdHIiLCAidGFncyQxIiwgIm5hbWUiLCAiZm91bmQiLCAidmFsdWUiLCAidGFncyIsICJ0YWciLCAia2V5IiwgInQiLCAia25vd24iLCAiYnlUYWciLCAidHlwZSIsICJOb2RlVHlwZSIsICJ0eXBlQXJyYXkiLCAic3R5bGVUYWdzIiwgIm1hcmtzIiwgIkRlY29yYXRpb24iLCAiRGlyZWN0aW9uIiwgIlN0YWNrIiwgIl9TdGFjayIsICJwIiwgInN0YWNrIiwgInN0YXRlIiwgInJlZHVjZVBvcyIsICJwb3MiLCAic2NvcmUiLCAiYnVmZmVyIiwgImJ1ZmZlckJhc2UiLCAiY3VyQ29udGV4dCIsICJsb29rQWhlYWQiLCAicGFyZW50IiwgIl8iLCAiaSIsICJjeCIsICJTdGFja0NvbnRleHQiLCAic3RhcnQiLCAiYWN0aW9uIiwgIl9hIiwgImRlcHRoIiwgInR5cGUiLCAicGFyc2VyIiwgImxvb2thaGVhZFJlY29yZCIsICJkUHJlYyIsICJiYXNlIiwgInNpemUiLCAiY291bnQiLCAiYmFzZVN0YXRlSUQiLCAidGVybSIsICJlbmQiLCAibXVzdFNpbmsiLCAiY3VyIiwgInRvcCIsICJpbmRleCIsICJtdXN0TW92ZSIsICJzY2FuIiwgIm5leHRTdGF0ZSIsICJza2lwcGVkIiwgIm5leHQiLCAibmV4dFN0YXJ0IiwgIm5leHRFbmQiLCAidmFsdWUiLCAib2ZmIiwgImlzTm9kZSIsICJzaW0iLCAiU2ltdWxhdGVkU3RhY2siLCAibmV4dFN0YXRlcyIsICJiZXN0IiwgInMiLCAidiIsICJyZXN1bHQiLCAicmVkdWNlIiwgInRhcmdldCIsICJiYWNrdXAiLCAic2VlbiIsICJleHBsb3JlIiwgInJEZXB0aCIsICJmb3VuZCIsICJvdGhlciIsICJkaWFsZWN0SUQiLCAibGFzdCIsICJjb250ZXh0IiwgIm5ld0N4IiwgInRyYWNrZXIiLCAiZ290byIsICJTdGFja0J1ZmZlckN1cnNvciIsICJfU3RhY2tCdWZmZXJDdXJzb3IiLCAiZGVjb2RlQXJyYXkiLCAiaW5wdXQiLCAiVHlwZSIsICJhcnJheSIsICJvdXQiLCAic3RvcCIsICJkaWdpdCIsICJDYWNoZWRUb2tlbiIsICJudWxsVG9rZW4iLCAiSW5wdXRTdHJlYW0iLCAicmFuZ2VzIiwgIm9mZnNldCIsICJhc3NvYyIsICJyYW5nZSIsICJpZHgiLCAicmVzb2x2ZWQiLCAidG9rZW4iLCAiZW5kT2Zmc2V0IiwgImVuZFBvcyIsICJjaHVuayIsICJjaHVua1BvcyIsICJuZXh0Q2h1bmsiLCAibiIsICJmcm9tIiwgInRvIiwgInIiLCAiVG9rZW5Hcm91cCIsICJkYXRhIiwgImlkIiwgInJlYWRUb2tlbiIsICJMb2NhbFRva2VuR3JvdXAiLCAicHJlY1RhYmxlIiwgImVsc2VUb2tlbiIsICJhdEVvZiIsICJuZXh0UG9zIiwgInJlYWRUb2tlbiIsICJkYXRhIiwgImlucHV0IiwgInN0YWNrIiwgImdyb3VwIiwgInByZWNUYWJsZSIsICJwcmVjT2Zmc2V0IiwgInN0YXRlIiwgImdyb3VwTWFzayIsICJkaWFsZWN0IiwgInNjYW4iLCAiYWNjRW5kIiwgImkiLCAidGVybSIsICJvdmVycmlkZXMiLCAibmV4dCIsICJsb3ciLCAiaGlnaCIsICJtaWQiLCAiaW5kZXgiLCAiZnJvbSIsICJ0byIsICJmaW5kT2Zmc2V0IiwgInN0YXJ0IiwgInRva2VuIiwgInByZXYiLCAidGFibGVEYXRhIiwgInRhYmxlT2Zmc2V0IiwgImlQcmV2IiwgInZlcmJvc2UiLCAic3RhY2tJRHMiLCAiY3V0QXQiLCAidHJlZSIsICJwb3MiLCAic2lkZSIsICJjdXJzb3IiLCAiSXRlck1vZGUiLCAiRnJhZ21lbnRDdXJzb3IiLCAiZnJhZ21lbnRzIiwgIm5vZGVTZXQiLCAiZnIiLCAibGFzdCIsICJ0b3AiLCAiVHJlZSIsICJlbmQiLCAibG9va0FoZWFkIiwgIk5vZGVQcm9wIiwgIlRva2VuQ2FjaGUiLCAicGFyc2VyIiwgInN0cmVhbSIsICJfIiwgIkNhY2hlZFRva2VuIiwgImFjdGlvbkluZGV4IiwgIm1haW4iLCAidG9rZW5pemVycyIsICJtYXNrIiwgImNvbnRleHQiLCAidG9rZW5pemVyIiwgInN0YXJ0SW5kZXgiLCAicCIsICJyZXN1bHQiLCAiYWN0aW9uIiwgInNldCIsICJwYWlyIiwgIlBhcnNlIiwgInJhbmdlcyIsICJJbnB1dFN0cmVhbSIsICJTdGFjayIsICJzdGFja3MiLCAibmV3U3RhY2tzIiwgInN0b3BwZWQiLCAic3RvcHBlZFRva2VucyIsICJzIiwgInRvayIsICJmaW5pc2hlZCIsICJmaW5kRmluaXNoZWQiLCAibWF4UmVtYWluaW5nIiwgImEiLCAiYiIsICJvdXRlciIsICJqIiwgIm90aGVyIiwgInNwbGl0IiwgImJhc2UiLCAic3RyaWN0Q3giLCAiY3hIYXNoIiwgImNhY2hlZCIsICJtYXRjaCIsICJpbm5lciIsICJkZWZhdWx0UmVkdWNlIiwgImFjdGlvbnMiLCAibG9jYWxTdGFjayIsICJwdXNoU3RhY2tEZWR1cCIsICJ0b2tlbnMiLCAicmVzdGFydGVkIiwgInRva2VuRW5kIiwgImZvcmNlIiwgImZvcmNlQmFzZSIsICJpbnNlcnQiLCAiU3RhY2tCdWZmZXJDdXJzb3IiLCAiaWQiLCAiRGlhbGVjdCIsICJzb3VyY2UiLCAiZmxhZ3MiLCAiZGlzYWJsZWQiLCAiTFJQYXJzZXIiLCAiX0xSUGFyc2VyIiwgIlBhcnNlciIsICJzcGVjIiwgIm5vZGVOYW1lcyIsICJpIiwgInRvcFRlcm1zIiwgInIiLCAibm9kZVByb3BzIiwgInNldFByb3AiLCAibm9kZUlEIiwgInByb3AiLCAidmFsdWUiLCAicHJvcFNwZWMiLCAiTm9kZVByb3AiLCAibmV4dCIsICJqIiwgIk5vZGVTZXQiLCAibmFtZSIsICJOb2RlVHlwZSIsICJ0b2tlbkFycmF5IiwgImRlY29kZUFycmF5IiwgImdldFNwZWNpYWxpemVyIiwgIlRva2VuR3JvdXAiLCAiaW5wdXQiLCAiZnJhZ21lbnRzIiwgInJhbmdlcyIsICJwYXJzZSIsICJQYXJzZSIsICJ3IiwgInN0YXRlIiwgInRlcm0iLCAibG9vc2UiLCAidGFibGUiLCAicG9zIiwgImdyb3VwVGFnIiwgImxhc3QiLCAidGFyZ2V0IiwgImVuZCIsICJ0ZXJtaW5hbCIsICJkYXRhIiwgInNldCIsICJwYWlyIiwgInNsb3QiLCAiZmxhZyIsICJhY3Rpb24iLCAiYSIsICJkZWZsdCIsICJyZXN1bHQiLCAidiIsICJjb25maWciLCAiY29weSIsICJpbmZvIiwgInQiLCAiZm91bmQiLCAicyIsICJwcmVjIiwgImRpYWxlY3QiLCAidmFsdWVzIiwgImZsYWdzIiwgInBhcnQiLCAiaWQiLCAiZGlzYWJsZWQiLCAiRGlhbGVjdCIsICJvZmYiLCAiZmluZEZpbmlzaGVkIiwgInN0YWNrcyIsICJiZXN0IiwgInN0YWNrIiwgInN0b3BwZWQiLCAibWFzayIsICJwYXJzZXIiLCAiTFJQYXJzZXIiLCAidGFncyIsICJUYWciLCAiaGlnaGxpZ2h0X2RhcmsiLCAiSGlnaGxpZ2h0U3R5bGUiLCAiaGlnaGxpZ2h0X2xpZ2h0IiwgImxlYW5WZXJib3NlTGFuZ3VhZ2UiLCAiTFJMYW5ndWFnZSIsICJwYXJzZXIiLCAic3R5bGVUYWdzIiwgInZlcmJvc2UiLCAiTGFuZ3VhZ2VTdXBwb3J0Il0KfQo=
